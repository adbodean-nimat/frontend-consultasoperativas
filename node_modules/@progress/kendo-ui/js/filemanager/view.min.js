!function(){var e,i={93309:function(e,t,i){var n;i=[i(64289),i(11962)],void 0===(t="function"==typeof(n=function(){var c=window.kendo.jQuery,u=void 0,f=window.kendo,d=f.ui,l=f.Observable,g=c.extend,r=f.keys,p="navigate",i="select",t="expand",m="change",v="open",w="load",o="keydown",n="keydownAction",a=".kendoFileManagerViewComponent",h=[],k=null,e=function(e,t){d.filemanager.ViewComponents[e]=t},b=function(e){return d.filemanager.ViewComponents[e]||null},s=l.extend({init:function(e,t,i){var n=this;n.element=t;n.options=i;if(e)n.widgetComponent=new e(t,i);else throw new Error("The widget for the ViewComponent is not available! Please add the corresponding scripts!");l.fn.init.call(n)},_bindEvents:function(){this.widgetComponent.bind("dataBinding",this._binding.bind(this));this.widgetComponent.bind("dataBound",this._bound.bind(this))},_binding:function(e){if(this.trigger("dataBinding",e))e.preventDefault()},_bound:function(){this.trigger("dataBound")},_setDSOptions:function(e,t){if(!e.dataSource&&t)e.dataSource=t},_initDragAndDrop:function(e,t){var i=this;t=t||i.options.dropFilter;e=e||i.element;i.draggable=e.kendoDraggable({filter:t,hint:i._hint.bind(i),cursorOffset:{top:-10,left:-50},holdToDrag:true,ignore:"input, .k-focusable",hold:i._hold.bind(i)}).data("kendoDraggable");i.draggable.userEvents.minHold=150;i.droptarget=e.kendoDropTargetArea({filter:t,drop:i._onDrop.bind(i),dragenter:function(e){e.dropTarget.addClass("k-filemanager-drop-target")},dragleave:function(e){e.dropTarget.removeClass("k-filemanager-drop-target")}}).data("kendoDraggable")},_hold:function(e){var t=this,i=e.currentTarget;if(!i.is(".k-selected")){if(t.widgetComponent.selectable)t.widgetComponent.selectable.clear();t.widgetComponent.select(i)}if(t.widgetComponent.selectable)t.widgetComponent.selectable.userEvents.cancel()},_hint:function(e){var t=this,i=t.widgetComponent.dataItem(e),n=t.widgetComponent.select();k=t.widgetComponent;h=n;if(n.length>1)return f.format("<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1} {2}</span></div>","file",n.length,t.options.messages.items);return f.format("<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1}</span></div>",i.isDirectory?"folder":"file",i.name)},_onDrop:function(e){var t=this,i=t.widgetComponent.dataItem(e.dropTarget),n=i.id,r=[];if(!i.isDirectory)return;for(var o=0;o<h.length;o++){var d=k.dataItem(h[o]).id;r.push(d)}this.trigger("drop",{target:n,items:r})},getSelected:function(){throw new Error("Not Implemented!")},refresh:function(e){this.widgetComponent.setDataSource(e)},destroy:function(){f.destroy(this.element)}}),_=(g(f.ui.filemanager,{ViewComponent:s,ViewComponents:{},registerViewComponent:e,getViewComponent:b}),s.extend({init:function(e,t,i){var n=this,r=i.dataSource,o=i.messages;t=g({},n.defaultOptions,t,{messages:o});n._setDSOptions(t,r);t.kendoKeydown=t.kendoKeydown||n._kendoKeydown.bind(n);s.fn.init.call(this,d.ListView,e,t);n.listView=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!r.isLocalBinding)n._initDragAndDrop()},defaultOptions:{layout:"flex",flex:{direction:"row",wrap:"wrap"},selectable:f.support.mobileOS?"row":"multiple",template:"<div class='k-listview-item' title='#:name##:extension#'>"+"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>"+"<div class='k-file-name file-name'>#:name##:extension#</div>"+"</div>",editTemplate:"<div class='k-listview-item'>"+"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>"+"<div class='k-file-name'><span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input type='text' class='k-input-inner' data-bind='value:name' name='name' required='required' /><span></div>"+"</div>",dropFilter:".k-listview-item",navigatable:true},_bindEvents:function(){var n=this,e=n.listView;e.bind(m,n._select.bind(n));e.element.on("dblclick"+a,n._dblClick.bind(n));e.element.on("mousedown"+a,".k-listview-item:not(.k-edit-item)",n._mousedown.bind(n));e.element.on(o+a,".k-edit-item",n._keydown.bind(n));e.element.on(o+a,n._keydownAction.bind(n));e.bind("edit",function(e){var t=e.sender;var i=e.item.find("input");i.on("blur",function(){var e=t._modelFromElement(t.editable.element).dirty;t._closeEditable();if(!e)n.trigger("cancel")})});e.bind("cancel",function(){n.trigger("cancel")});s.fn._bindEvents.call(this)},_select:function(){var e=this,t=e.getSelected();e.trigger(i,{entries:t})},_keydown:function(e){var t=this;if(e.keyCode===f.keys.ESC){t.listView._closeEditable();t.trigger("cancel")}},_keydownAction:function(e){var t=this,i=c(e.target).find(".k-focus");if(i.length&&!i.is(".k-edit-item"))t.trigger(n,{target:i,keyCode:e.keyCode})},_mousedown:function(e){var t=this,i=c(e.target).closest(".k-listview-item");if(e.which===3&&!i.is(".k-selected")){t.listView.selectable.clear();t.listView.select(i)}},_kendoKeydown:function(e){var t=this;if(e.keyCode===r.ENTER&&!e.preventKendoKeydown)t._handleEnterKey(e)},_handleEnterKey:function(e){var t=this,i=c(e.target),n=t.listView.current();if(t.widgetComponent.editable&&i.is("input"))i.trigger("blur");else if(!t.widgetComponent.editable)t._triggerOpen(n);e.preventKendoKeydown=true},_dblClick:function(e){var t=this,i=c(e.target).closest(".k-listview-item");t._triggerOpen(i)},_triggerOpen:function(e){var t=this;if(e.is(".k-edit-item"))return;var i=t.listView.dataItem(e);if(i)t.trigger(v,{entry:i})},addFolder:function(){this.listView.add()},edit:function(e){var t=this,i=t.listView.select();t.listView.edit(e||i)},getSelected:function(){var e=this,t=e.listView.select(),i=[];for(var n=0;n<t.length;n++){var r=e.listView.dataItem(t[n]);if(r)i.push(r)}return i},destroy:function(){this.listView.element.off(a);s.fn.destroy.call(this)}})),y=(d.filemanager.registerViewComponent("list",_),s.extend({init:function(e,t,i){var n=this,r=i.messages;t=g({},n.defaultOptions,t,{messages:r});s.fn.init.call(this,d.TreeView,e,t);n.treeView=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!i.isLocalBinding)n._initDragAndDrop()},defaultOptions:{dataTextField:"name",dropFilter:".k-item"},_refreshDataSource:function(e){var t=this,i=t.treeView,n=e.action,r=e.node,o=null,d=i.element,a=d.attr("aria-activedescendant"),s=e.items.filter(function(e){return e.isDirectory}).map(function(e){return g({},e.toJSON(),{id:e.id||f.guid(),hasChildren:e.hasChildren,items:[]})});if(r){o=i.findByUid(i.dataSource.get(r.id).uid);i._progress(o,false)}if(!s.length)return;if(n=="itemloaded"||o&&n==="sync"){o.find(".k-item").each(function(e,t){i.remove(t)});i.append(s,o);if(t._shouldFocus){i.current(o);i.focus()}}else if(n=="remove")this._remove(s[0].id);else if(n=="itemchange"){var l=i.dataSource.get(s[0].id);if(l)l.set(e.field,s[0][e.field]);else i.append(s[0],o)}else if(!i.dataSource.data().length)i.append(s);else if(n==="sync"||n===u&&!o){i.items().each(function(e,t){i.remove(t)});i.append(s);if(t._shouldFocus){i.current(i._nextVisible(c()));i.focus()}}if(!!a&&d.find("#"+a).length===0)d.removeAttr("aria-activedescendant")},_remove:function(e){var t=this,i=t.treeView,n=i.dataSource,r=n.get(e),o;if(r){o=i.findByUid(r.uid);i.remove(o)}},_bindEvents:function(){var e=this;e.treeView.bind(i,e._navigate.bind(e));e.treeView.bind(t,e._expand.bind(e));e.treeView.element.on(o,e._keydownAction.bind(e))},_keydownAction:function(e){var t=this,i=c(e.target).find(".k-focus").closest(".k-item");t.trigger(n,{target:i,keyCode:e.keyCode})},_expand:function(e){var t=this,i=t.treeView,n=i.dataItem(e.node);e.preventDefault();t.trigger(w,{entryId:n.id})},_navigate:function(e){var t=this,i=e.node,n=t.treeView.dataItem(i),r=n.id;e.preventDefault();t.trigger(p,{path:r,entry:n.toJSON()})},_hold:c.noop,getSelected:function(){var e=this,t=e.treeView.element.find(".k-selected").closest(".k-item"),i=e.treeView.dataItem(t);return i},refresh:function(e){var t=this,i=t.treeView,n=i.dataSource.get(e),r=n&&i.findByUid(n.uid);if(n&&r){i.element.find(".k-selected").removeClass("k-selected");r.find("> div .k-in").removeClass("k-hover").addClass("k-selected")}},reload:function(){this.treeView.dataSource.read()}}));if(d.filemanager.registerViewComponent("tree",y),f.ui.Grid){var C=s.extend({init:function(e,t,i){var n=this,r=i.dataSource,o=i.messages;t=g({},n.defaultOptions,t,{messages:o});n._setDSOptions(t,r);n._setupColumns(t,o);t.kendoKeydown=t.kendoKeydown||n._kendoKeydown.bind(n);s.fn.init.call(this,d.Grid,e,t);n.grid=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!r.isLocalBinding)n._initDragAndDrop()},defaultOptions:{selectable:f.support.mobileOS?"row":"multiple",editable:{mode:"inline",confirmation:false},sortable:true,dropFilter:"tr:not(.k-grid-edit-row)",navigatable:true},_setupColumns:function(e,t){if(!e.columns)e.columns=[{field:"name",title:t.nameField||"Name",template:function(e){var t=!e.isDirectory?f.getFileGroup(e.extension,true):"folder";var i="<div class='file-group-icon'>"+"<span class='k-icon k-i-"+t+"'></span>"+"</div>"+"<div class='file-name'>"+f.htmlEncode(e.name+e.extension)+"<div>";return i}},{field:"created",title:t.dateCreatedField,format:"{0:G}"},{field:"size",title:t.sizeField,template:function(e){if(e.size>0)return f.getFileSizeMessage(e.size);else return""}}]},_bindEvents:function(){var e=this,t=e.grid;t.bind(m,e._select.bind(e));t.table.on("dblclick"+a,e._dblClick.bind(e));t.table.on("mousedown"+a,"tr:not(.k-grid-edit-row)",e._mousedown.bind(e));t.table.on(o+a,".k-grid-edit-row",e._keydown.bind(e));t.table.on(o+a,e._keydownAction.bind(e));t.bind("edit",function(){e._toggleFocusable(true)});t.bind("cancel",function(){e.trigger("cancel")});t.saveRow=c.noop;s.fn._bindEvents.call(this)},_kendoKeydown:function(e){var t=this,i=t.grid.current(),n=i?i.closest("tr[data-uid]"):null;if(n&&e.keyCode===r.ENTER&&!e.preventKendoKeydown){t._triggerOpen(n);e.preventKendoKeydown=true}if(e.keyCode===r.F2)e.preventKendoKeydown=true},_keydownAction:function(e){var t=this,i=c(e.target).find(".k-focus").closest("tr");if(i.length&&!i.is(".k-grid-edit-row"))t.trigger(n,{target:i,keyCode:e.keyCode})},_keydown:function(e){var t=this,i=t.grid;if(!c(e.target).closest(".k-grid-edit-row").length)return;if(e.keyCode===f.keys.ENTER){setTimeout(function(){var e=t.grid._editContainer||c();e.find("input").trigger("blur");t._closeEditable()});t._tryCancel()}if(e.keyCode===f.keys.ESC){i.cancelChanges();t.trigger("cancel")}},_mousedown:function(e){var t=this,i=c(e.target).closest("tr[data-uid]");if(e.which===1&&t.grid.editable){setTimeout(function(){t._closeEditable()});t._tryCancel()}if(e.which===3&&!i.is(".k-selected")){t.grid.selectable.clear();t.grid.select(i)}},_tryCancel:function(){var e=this,t=e.grid,i;if(t.editable){i=t._editContainer;if(!i.find("input").val())t.cancelChanges()}setTimeout(function(){e._toggleFocusable(false)})},_toggleFocusable:function(e){var t=this,i=t.grid;i.table.find("tr,td").children().addBack().toggleClass("k-focusable",e)},_closeEditable:function(){var e=this,t;if(e.grid.editable&&!e.grid.editable.options.model.dirty){t=e.grid._editContainer;e.grid._destroyEditable();e.grid._displayRow(t);e.trigger("cancel")}},_select:function(){var e=this,t=e.getSelected();e.trigger(i,{entries:t})},_dblClick:function(e){var t=this,i=c(e.target).closest("tr[data-uid]");t._triggerOpen(i)},_triggerOpen:function(e){var t=this;if(e.is(".k-grid-edit-row"))return;var i=t.grid.dataItem(e);if(i)t.trigger(v,{entry:i})},getSelected:function(){var e=this,t=e.grid.select(),i=[];for(var n=0;n<t.length;n++)i.push(e.grid.dataItem(t[n]));return i},addFolder:function(){this.grid.addRow()},edit:function(e){var t=this,i=t.grid.select();t.grid.editRow(e||i)},destroy:function(){this.grid.table.off(a);this.grid.element.off(a);s.fn.destroy.call(this)}});d.filemanager.registerViewComponent("grid",C)}return window.kendo})?n.apply(t,i):n)||(e.exports=t)},64289:function(e){"use strict";e.exports=require("../kendo.listview")},11962:function(e){"use strict";e.exports=require("../kendo.treeview")}},n={};function r(e){var t=n[e];return void 0!==t||(t=n[e]={exports:{}},i[e](t,t.exports,r)),t.exports}r.amdD=function(){throw Error("define cannot be used indirect")},e=r(93309),module.exports=e}();