!function(){var e,o={72809:function(e,a,o){var t;o=[o(54212),o(76733)],void 0===(a="function"==typeof(t=function(){var e={id:"imageeditor",name:"ImageEditor",category:"web",depends:["core"]},i=window.kendo.jQuery,a=void 0,n=window.kendo,r=i.extend,g=i.isPlainObject,t=n.ui.Widget,d=n.ui,s=".kendoImageEditor",c=n._outerHeight,o="error",m="imageLoaded",u="imageRendered",l="execute",p={wrapper:"k-widget k-imageeditor",header:"k-imageeditor-header",toolbar:"k-imageeditor-toolbar",paneWrapper:"k-imageeditor-action-pane",contentWrapper:"k-imageeditor-content",canvasWrapper:"k-imageeditor-canvas-container",canvasContainer:"k-imageeditor-canvas"},v=t.extend({init:function(e,a){var o=this;t.fn.init.call(o,e,a);a=i.extend(true,{},a);o._wrapper();o._renderHeader();o._contentWrapper();o._keyHandler();if(a.imageUrl)o._drawCanvas();o._initUndoRedoStack();o._toggleTools();n.notify(o)},options:{name:"ImageEditor",width:"100%",height:570,imageUrl:"",toolbar:{},saveAs:{fileName:"image.png"},messages:{toolbar:{open:"Open Image",save:"Save Image",undo:"Undo",redo:"Redo",crop:"Crop",resize:"Resize",zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomDropdown:"Zoom options",zoomActualSize:"Show actual size",zoomFitToScreen:"Fit to screen"},panes:{crop:{title:"Crop Image",aspectRatio:"Aspect Ratio:",aspectRatioItems:{originalRatio:"Original ratio","1:1":"1:1 (Square)","4:5":"4:5 (8:10)","5:7":"5:7","2:3":"2:3 (4:6)","16:9":"16:9"},orientation:"Orientation:",portrait:"Portrait",landscape:"Landscape"},resize:{title:"Resize image",pixels:"Pixels",percents:"Percents"}},common:{width:"Width:",height:"Height:",cancel:"Cancel",confirm:"Confirm",lockAspectRatio:"Lock aspect ratio"}}},events:[o,m,u,l],_wrapper:function(){var e=this,a=e.options,o=a.width,t=a.height;e.wrapper=e.element.addClass(p.wrapper);if(o)e.wrapper.width(o);if(t)e.wrapper.height(t);e._resizeHandler=n.onResize(function(){e.resize(true)})},_renderHeader:function(){var e=this,a=e.options;e.header=i("<div />").addClass(p.header);if(a.toolbar)e.header.append(e._initToolbar().element);e.wrapper.append(e.header)},_initToolbar:function(){var e=this,a=e.options,o=i("<div></div>").addClass(p.toolbar),t=r({},a.toolbar,{messages:a.messages.toolbar,action:e.executeCommand.bind(e)});e.toolbar=new d.imageeditor.ToolBar(o,t);return e.toolbar},_contentWrapper:function(){var e=this,a=i("<div></div>").addClass(p.contentWrapper),o=i("<div></div>").addClass(p.canvasWrapper),t=i("<div></div>").addClass(p.canvasContainer),n=i("<div></div>").addClass(p.paneWrapper).hide(),r=c(e.header);e.canvasWrapper=o;e.canvasContainer=t;e.paneWrapper=n;o.append(t);a.height(c(e.wrapper)-r);a.append(o).append(n);e.wrapper.append(a)},_keyHandler:function(){var a=this,o=false;a.wrapper.on("keydown"+s,function(e){if(e.ctrlKey){switch(e.keyCode){case 48:a.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"});o=true;break;case 189:a.executeCommand({command:"ZoomImageEditorCommand",options:"zoomOut"});o=true;break;case 187:a.executeCommand({command:"ZoomImageEditorCommand",options:"zoomIn"});o=true;break;case 90:a.executeCommand({command:"UndoImageEditorCommand"});o=true;break;case 89:a.executeCommand({command:"RedoImageEditorCommand"});o=true;break}if(o)e.preventDefault()}})},_drawCanvas:function(){var a=this;var e=a.options.imageUrl;a.drawImage(e).done(function(e){if(!a.trigger(m,{image:e}))a.drawCanvas(e)}).fail(function(e){a.trigger(o,e)})},_initUndoRedoStack:function(){var e=this;e.undoStack=[];e.redoStack=[]},_toggleTools:function(){var e=this,a=e.redoStack.length>0,o=e.undoStack.length>0,t=!!e._image,n=true;try{e._canvas.toDataURL()}catch(e){n=false}e.toolbar.toggleTools({redo:a,undo:o,enable:t,canExport:n})},drawImage:function(e){var a=this,o=new i.Deferred,t=new Image;t.onload=function(){n.ui.progress(a.canvasContainer,false);o.resolve(t)};t.onerror=function(){n.ui.progress(a.canvasContainer,false);o.reject(arguments)};n.ui.progress(a.canvasContainer,true);t.src=e;return o.promise()},drawCanvas:function(e){var a=this;var o=i("<canvas>Canvas element</canvas>")[0];var t=o.getContext("2d");if(a._canvas)i(a._canvas).remove();if(a._image)a.undoStack.push(a._image);a._canvas=o;a._ctx=t;a._image=e;o.width=e.width;o.height=e.height;t.drawImage(e,0,0);a.canvasContainer.append(o);if(e.height>a.canvasWrapper.height())a.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"});else a.executeCommand({command:"ZoomImageEditorCommand",options:a.getZoomLevel()});a.trigger(u,{canvas:o,ctx:t,image:e});a._toggleTools()},getCanvasElement:function(){return this._canvas},getCurrent2dContext:function(){return this._ctx},getCurrentImage:function(){return this._image},executeCommand:function(e){var a=e.command,o=r({imageeditor:this},g(e.options)?e.options:{value:e.options}),t=new d.imageeditor.commands[a](o);if(!this.trigger(l,e)){this._toggleTools();return t.exec()}},getZoomLevel:function(){return this._zoomLevel||1},destroy:function(){var e=this;e.element.off(s);if(e.currentPaneTool)e.currentPaneTool.destroy();if(e.toolbar)e.toolbar.destroy();if(e._upload)e._upload.destroy();t.fn.destroy.call(e)}});return d.plugin(v),window.kendo})?t.apply(a,o):t)||(e.exports=a)},76733:function(e){"use strict";e.exports=require("./imageeditor/commands")},54212:function(e){"use strict";e.exports=require("./imageeditor/toolbar")}},t={};function n(e){var a=t[e];return void 0!==a||(a=t[e]={exports:{}},o[e](a,a.exports,n)),a.exports}n.amdD=function(){throw Error("define cannot be used indirect")},e=n(72809),module.exports=e}();