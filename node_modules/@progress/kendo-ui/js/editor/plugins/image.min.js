!function(){var e,i={89494:function(e,t,i){var n;i=[i(65451),i(90710)],void 0===(t="function"==typeof(n=function(){var n=window.kendo.jQuery,T=void 0,v=window.kendo,R=n.extend,e=v.ui.editor,t=e.EditorUtils,h=e.Dom,s=t.registerTool,a=e.ToolTemplate,w=e.RangeUtils,i=e.Command,x=v.keys,y="#k-editor-image-url",I="#k-editor-image-title",A="#k-editor-image-width",B="#k-editor-image-height",o=i.extend({init:function(e){var t=this;i.fn.init.call(t,e);t.async=true;t.attributes={}},insertImage:function(e,t){var i=this.attributes;var n=w.documentFromRange(t);if(i.src&&i.src!="http://"){var s=function(){setTimeout(function(){if(!i.width)e.removeAttribute("width");if(!i.height)e.removeAttribute("height");e.removeAttribute("complete")})};if(!e){e=h.create(n,"img",i);e.onload=e.onerror=s;t.deleteContents();t.insertNode(e);if(!e.nextSibling)h.insertAfter(n.createTextNode("\ufeff"),e);s();t.setStartAfter(e);t.setEndAfter(e);w.selectRange(t);return true}else{e.onload=e.onerror=s;h.attr(e,i);s()}}return false},_dialogTemplate:function(e){return v.template('<div class="k-editor-dialog k-popup-edit-form">'+'<div class="k-edit-form-container">'+'<div class="k-edit-form-content">'+"# if (showBrowser) { #"+'<div class="k-filebrowser k-imagebrowser"></div>'+"# } #"+"<div class='k-edit-label'>"+'<label for="k-editor-image-url">#: messages.imageWebAddress #</label>'+"</div>"+"<div class='k-edit-field'>"+'<span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-url"></span>'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-image-title">#: messages.imageAltText #</label>'+"</div>"+"<div class='k-edit-field'>"+'<span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-title"></span>'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-image-width">#: messages.imageWidth #</label>'+"</div>"+"<div class='k-edit-field'>"+'<span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-width"></span>'+"</div>"+"<div class='k-edit-label'>"+'<label for="k-editor-image-height">#: messages.imageHeight #</label>'+"</div>"+"<div class='k-edit-field'>"+'<span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-height"></span>'+"</div>"+"</div>"+'<div class="k-edit-buttons">'+'<button class="k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary"><span class="k-button-text">#: messages.dialogInsert #</span></button>'+'<button class="k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base"><span class="k-button-text">#: messages.dialogCancel #</span></button>'+"</div>"+"</div>"+"</div>")({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();if(!e.insertImage(w.image(t),t))e.releaseRange(t)},exec:function(){var s=this,a=s.lockRange(),u=false,o=w.image(a),m=o&&o.getAttribute("width")||"",c=o&&o.getAttribute("height")||"",d,g=v.support.browser.msie,k=s.editor.options,f=k.messages,e=k.imageBrowser,t=!!(v.ui.ImageBrowser&&e&&e.transport&&e.transport.read!==T),i={title:f.insertImage,visible:false,resizable:t};this.expandImmutablesIn(a);function n(e){var t=d.element,i=parseInt(t.find(A).val(),10),n=parseInt(t.find(B).val(),10);s.attributes={src:t.find(y).val().replace(/ /g,"%20"),alt:t.find(I).val()};s.attributes.width=null;s.attributes.height=null;if(!isNaN(i)&&i>0)s.attributes.width=i;if(!isNaN(n)&&n>0)s.attributes.height=n;u=s.insertImage(o,a);r(e);if(s.change)s.change()}function r(e){e.preventDefault();d.destroy();h.windowFromDocument(w.documentFromRange(a)).focus();if(!u)s.releaseRange(a)}function p(e){if(e.keyCode==x.ENTER)n(e);else if(e.keyCode==x.ESC)r(e)}i.close=r;if(t)i.width=750;d=this.createDialog(s._dialogTemplate(t),i).toggleClass("k-filebrowser-dialog",t).find(".k-dialog-insert").on("click",n).end().find(".k-dialog-close").on("click",r).end().find(".k-edit-field input").on("keydown",p).end().find(y).val(o?o.getAttribute("src",2):"http://").end().find(I).val(o?o.alt:"").end().find(A).val(m).end().find(B).val(c).end().data("kendoWindow");var l=d.element;if(t){this._imageBrowser=new v.ui.ImageBrowser(l.find(".k-imagebrowser"),R({},e));this._imageBrowser.bind("change",function(e){if(e.selected.get("type")==="f")l.find(y).val(this.value())});this._imageBrowser.bind("apply",n)}if(g){var b=l.closest(".k-window").height();l.css("max-height",b)}d.center().open();l.find(y).trigger("focus").select()}});s("insertImage",new e.Tool({command:v.ui.editor.ImageCommand=o,template:new a({template:t.buttonTemplate,title:"Insert Image"})}))})?n.apply(t,i):n)||(e.exports=t)},65451:function(e){"use strict";e.exports=require("../../kendo.imagebrowser")},90710:function(e){"use strict";e.exports=require("../command")}},n={};function s(e){var t=n[e];return void 0!==t||(t=n[e]={exports:{}},i[e](t,t.exports,s)),t.exports}s.amdD=function(){throw Error("define cannot be used indirect")},e=s(89494),module.exports=e}();