!function(){var t,e={14820:function(t,i,e){var o;e=[e(33155),e(14464)],void 0===(i="function"==typeof(o=function(){var n=window.kendo.jQuery,i=void 0,l=document,c=Math,u=c.min,m=c.pow,o=window.kendo,e=o.ui.Widget,f=o.deepExtend,h=o.dataviz,r=h.ui,a=o.geometry,p=a.Point,t=h.map,g=t.Extent,s=t.Location,d=t.crs.EPSG3857,_,y=o.util.renderPos,w=o.drawing.util,z=w.defined,v=w.limitValue,b=w.valueOrDefault,x="k-",T=.9,E=.93,L="DOMMouseScroll mousewheel",S=5,C=1,O=e.extend({init:function(t,i){o.destroy(t);e.fn.init.call(this,t);this._initOptions(i);this.bind(this.events,i);this.crs=new d;this.element.addClass(x+this.options.name.toLowerCase()).css("position","relative").empty().append(l.createElement("div"));this._viewOrigin=this._getOrigin();this._initScroller();this._initMarkers();this._initControls();this._initLayers();this._reset();this._mousewheel=this._mousewheel.bind(this);this.element.on(L,this._mousewheel)},options:{name:"Map",controls:{attribution:true,navigator:{panStep:100},zoom:true},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:true,messages:{tileTitle:"Map tile"}},events:["beforeReset","click","markerActivate","markerClick","markerCreated","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"],destroy:function(){this.scroller.destroy();if(this.navigator)this.navigator.destroy();if(this.attribution)this.attribution.destroy();if(this.zoomControl)this.zoomControl.destroy();this.markers.destroy();for(var t=0;t<this.layers.length;t++)this.layers[t].destroy();e.fn.destroy.call(this)},zoom:function(t){var i=this.options;if(z(t)){t=c.round(v(t,i.minZoom,i.maxZoom));if(i.zoom!==t){i.zoom=t;this._reset()}return this}else return i.zoom},center:function(t){if(t){this.options.center=s.create(t).toArray();this._reset();return this}else return s.create(this.options.center)},extent:function(t){if(t){this._setExtent(t);return this}else return this._getExtent()},setOptions:function(t){e.fn.setOptions.call(this,t);this._reset()},locationToLayer:function(t,i){var e=!this.options.wraparound;t=s.create(t);return this.crs.toPoint(t,this._layerSize(i),e)},layerToLocation:function(t,i){var e=!this.options.wraparound;t=p.create(t);return this.crs.toLocation(t,this._layerSize(i),e)},locationToView:function(t){t=s.create(t);var i=this.locationToLayer(this._viewOrigin);var e=this.locationToLayer(t);return e.translateWith(i.scale(-1))},viewToLocation:function(t,i){var e=this.locationToLayer(this._getOrigin(),i);t=p.create(t);t=t.clone().translateWith(e);return this.layerToLocation(t,i)},eventOffset:function(t){var i;var e;var o;var r=this.element.offset();if(t.x||t.y){var n="location";e=t.x[n]-r.left;o=t.y[n]-r.top;i=new a.Point(e,o)}else{var s=t.originalEvent||t;e=b(s.pageX,s.clientX)-r.left;o=b(s.pageY,s.clientY)-r.top;i=new a.Point(e,o)}return i},eventToView:function(t){var i=this.eventOffset(t);return this.locationToView(this.viewToLocation(i))},eventToLayer:function(t){return this.locationToLayer(this.eventToLocation(t))},eventToLocation:function(t){var i=this.eventOffset(t);return this.viewToLocation(i)},viewSize:function(){var t=this.element;var i=this._layerSize();var e=t.width();if(!this.options.wraparound)e=u(i,e);return{width:e,height:u(i,t.height())}},exportVisual:function(){this._reset();return false},_setOrigin:function(t,i){var e=this.viewSize(),o;t=this._origin=s.create(t);o=this.locationToLayer(t,i);o.x+=e.width/2;o.y+=e.height/2;this.options.center=this.layerToLocation(o,i).toArray();return this},_getOrigin:function(t){var i=this.viewSize(),e;if(t||!this._origin){e=this.locationToLayer(this.center());e.x-=i.width/2;e.y-=i.height/2;this._origin=this.layerToLocation(e)}return this._origin},_setExtent:function(t){var i=g.create(t);var e=i.se.clone();if(this.options.wraparound&&e.lng<0&&t.nw.lng>0)e.lng=180+(180+e.lng);t=new g(i.nw,e);this.center(t.center());var o=this.element.width();var r=this.element.height();for(var n=this.options.maxZoom;n>=this.options.minZoom;n--){var s=this.locationToLayer(t.nw,n);var a=this.locationToLayer(t.se,n);var l=c.abs(a.x-s.x);var h=c.abs(a.y-s.y);if(l<=o&&h<=r)break}this.zoom(n)},_getExtent:function(){var t=this._getOrigin();var i=this.locationToLayer(t);var e=this.viewSize();i.x+=e.width;i.y+=e.height;var o=this.layerToLocation(i);return new g(t,o)},_zoomAround:function(t,i){this._setOrigin(this.layerToLocation(t,i),i);this.zoom(i)},_initControls:function(){var t=this.options.controls;if(r.Attribution&&t.attribution)this._createAttribution(t.attribution);if(!o.support.mobileOS){if(r.Navigator&&t.navigator)this._createNavigator(t.navigator);if(r.ZoomControl&&t.zoom)this._createZoomControl(t.zoom)}},_createControlElement:function(t,i){var e=t.position||i;var o="."+y(e).replace(" ",".");var r=n(".k-map-controls"+o,this.element);if(r.length===0)r=n("<div>").addClass("k-map-controls "+y(e)).appendTo(this.element);return n("<div>").appendTo(r)},_createAttribution:function(t){var i=this._createControlElement(t,"bottomRight");this.attribution=new r.Attribution(i,t)},_createNavigator:function(t){var i=this._createControlElement(t,"topLeft");var e=this.navigator=new r.Navigator(i,t);this._navigatorPan=this._navigatorPan.bind(this);e.bind("pan",this._navigatorPan);this._navigatorCenter=this._navigatorCenter.bind(this);e.bind("center",this._navigatorCenter)},_navigatorPan:function(t){var i=this;var e=i.scroller;var o=e.scrollLeft+t.x;var r=e.scrollTop-t.y;var n=this._virtualSize;var s=this.element.height();var a=this.element.width();o=v(o,n.x.min,n.x.max-a);r=v(r,n.y.min,n.y.max-s);i.scroller.one("scroll",function(t){i._scrollEnd(t)});i.scroller.scrollTo(-o,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(t){var i=this._createControlElement(t,"topLeft");var e=this.zoomControl=new r.ZoomControl(i,t);this._zoomControlChange=this._zoomControlChange.bind(this);e.bind("change",this._zoomControlChange)},_zoomControlChange:function(t){if(!this.trigger("zoomStart",{originalEvent:t})){this.zoom(this.zoom()+t.delta);this.trigger("zoomEnd",{originalEvent:t})}},_initScroller:function(){var t=o.support.mobileOS?E:T;var i=this.options.zoomable!==false;var e=this.scroller=new o.mobile.ui.Scroller(this.element.children(0),{friction:t,velocityMultiplier:S,zoom:i,mousewheelScrolling:false,supportDoubleTap:true});e.bind("scroll",this._scroll.bind(this));e.bind("scrollEnd",this._scrollEnd.bind(this));e.userEvents.bind("gesturestart",this._scaleStart.bind(this));e.userEvents.bind("gestureend",this._scale.bind(this));e.userEvents.bind("doubleTap",this._doubleTap.bind(this));e.userEvents.bind("tap",this._tap.bind(this));this.scrollElement=e.scrollElement},_initLayers:function(){var t=this.options.layers,i=this.layers=[];for(var e=0;e<t.length;e++){var o=t[e];var r=o.type||"shape";var n=this.options.layerDefaults[r];var s=h.map.layers[r];i.push(new s(this,f({},n,o)))}},_initMarkers:function(){this.markers=new t.layers.MarkerLayer(this,this.options.markerDefaults);this.markers.add(this.options.markers)},_scroll:function(t){var i=this.locationToLayer(this._viewOrigin).round();var e=t.sender.movable;var o=new a.Point(e.x,e.y).scale(-1).scale(1/e.scale);i.x+=o.x;i.y+=o.y;this._scrollOffset=o;this._setOrigin(this.layerToLocation(i));this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(t){if(!this._scrollOffset||!this._panComplete())return;this._scrollOffset=null;this._panEndTS=new Date;this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_panComplete:function(){return new Date-(this._panEndTS||0)>50},_scaleStart:function(t){if(this.trigger("zoomStart",{originalEvent:t})){var i=t.touches[1];if(i)i.cancel()}},_scale:function(t){var i=this.scroller.movable.scale;var e=this._scaleToZoom(i);var o=new a.Point(t.center.x,t.center.y);var r=this.viewToLocation(o,e);var n=this.locationToLayer(r,e);var s=n.translate(-o.x,-o.y);this._zoomAround(s,e);this.trigger("zoomEnd",{originalEvent:t})},_scaleToZoom:function(t){var i=this._layerSize()*t;var e=i/this.options.minSize;var o=c.log(e)/c.log(2);return c.round(o)},_reset:function(){if(this.attribution)this.attribution.filter(this.center(),this.zoom());this._viewOrigin=this._getOrigin(true);this._resetScroller();this.trigger("beforeReset");this.trigger("reset",{tileTitle:this.options.messages.tileTitle})},_resetScroller:function(){var t=this.scroller;var i=t.dimensions.x;var e=t.dimensions.y;var o=this._layerSize();var r=this.extent().nw;var n=this.locationToLayer(r).round();t.movable.round=true;t.reset();t.userEvents.cancel();var s=this.zoom();t.dimensions.forcedMinScale=m(2,this.options.minZoom-s);t.dimensions.maxScale=m(2,this.options.maxZoom-s);var a={min:-n.x,max:o-n.x};var l={min:-n.y,max:o-n.y};if(this.options.wraparound){a.max=20*o;a.min=-a.max}if(this.options.pannable===false){var h=this.viewSize();a.min=l.min=0;a.max=h.width;l.max=h.height}i.makeVirtual();e.makeVirtual();i.virtualSize(a.min,a.max);e.virtualSize(l.min,l.max);this._virtualSize={x:a,y:l}},_renderLayers:function(){var t=this.options.layers,i=this.layers=[],e=this.scrollWrap;e.empty();for(var o=0;o<t.length;o++){var r=t[o];var n=r.type||"shape";var s=this.options.layerDefaults[n];var a=h.map.layers[n];i.push(new a(this,f({},s,r)))}},_layerSize:function(t){t=b(t,this.options.zoom);return this.options.minSize*m(2,t)},_tap:function(t){if(!this._panComplete())return;var i=this.eventOffset(t);this.trigger("click",{originalEvent:t,location:this.viewToLocation(i)})},_doubleTap:function(t){var i=this.options;if(i.zoomable!==false)if(!this.trigger("zoomStart",{originalEvent:t})){var e=this.zoom()+C;var o=this.eventOffset(t);var r=this.viewToLocation(o);var n=this.locationToLayer(r,e);var s=n.translate(-o.x,-o.y);this._zoomAround(s,e);this.trigger("zoomEnd",{originalEvent:t})}},_mousewheel:function(t){t.preventDefault();var i=h.mwDelta(t)>0?-1:1;var e=this.options;var o=this.zoom();var r=v(o+i,e.minZoom,e.maxZoom);if(e.zoomable!==false&&r!==o)if(!this.trigger("zoomStart",{originalEvent:t})){var n=this.eventOffset(t);var s=this.viewToLocation(n);var a=this.locationToLayer(s,r);var l=a.translate(-n.x,-n.y);this._zoomAround(l,r);this.trigger("zoomEnd",{originalEvent:t})}}});h.ui.plugin(O)})?o.apply(i,e):o)||(t.exports=i)},33155:function(t){"use strict";t.exports=require("./crs")},14464:function(t){"use strict";t.exports=require("./location")}},o={};function r(t){var i=o[t];return void 0!==i||(i=o[t]={exports:{}},e[t](i,i.exports,r)),i.exports}r.amdD=function(){throw Error("define cannot be used indirect")},t=r(14820),module.exports=t}();