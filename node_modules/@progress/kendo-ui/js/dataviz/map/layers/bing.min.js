!function(){var e,i={51903:function(e,t,i){var o;i=[i(21729)],void 0===(t="function"==typeof(o=function(){var t=window.kendo.jQuery,c=void 0,e=window.kendo,i=e.dataviz,o=e.deepExtend,a=e.drawing.util.defined,l=i.map.Extent,r=i.map.Location,n=i.map.layers.TileLayer,s=i.map.layers.TileView,u=n.extend({init:function(e,t){this.options.baseUrl=this._scheme()+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/";n.fn.init.call(this,e,t);this._onMetadata=this._onMetadata.bind(this);this._fetchMetadata()},options:{imagerySet:"road"},_fetchMetadata:function(){var e=this.options;if(!e.key)throw new Error("Bing tile layer: API key is required");t.ajax({url:e.baseUrl+e.imagerySet,data:{output:"json",include:"ImageryProviders",key:e.key,uriScheme:this._scheme()},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){e=e||window.location.protocol;return e.replace(":","")==="https"?"https":"http"},_onMetadata:function(e){if(e&&e.resourceSets.length){var t=this.resource=e.resourceSets[0].resources[0];o(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains});var i=this.options;if(!a(i.minZoom))i.minZoom=t.zoomMin;if(!a(i.maxZoom))i.maxZoom=t.zoomMax;this._addAttribution();if(this.element.css("display")!=="none")this._reset()}},_viewType:function(){return d},_addAttribution:function(){var e=this.map.attribution;if(e){var t=this.resource.imageryProviders;if(t)for(var i=0;i<t.length;i++){var o=t[i];for(var a=0;a<o.coverageAreas.length;a++){var n=o.coverageAreas[a];e.add({text:o.attribution,minZoom:n.zoomMin,maxZoom:n.zoomMax,extent:new l(new r(n.bbox[2],n.bbox[1]),new r(n.bbox[0],n.bbox[3]))})}}}},imagerySet:function(e){if(e){this.options.imagerySet=e;this.map.attribution.clear();this._fetchMetadata()}else return this.options.imagerySet}}),d=s.extend({options:{culture:"en-US"},tileOptions:function(e){var t=s.fn.tileOptions.call(this,e);t.culture=this.options.culture;t.quadkey=this.tileQuadKey(this.wrapIndex(e));return t},tileQuadKey:function(e){var t="",i,o,a;for(a=this._zoom;a>0;a--){i=0;o=1<<a-1;if((e.x&o)!==0)i++;if((e.y&o)!==0)i+=2;t+=i}return t}});o(i,{map:{layers:{bing:u,BingLayer:u,BingView:d}}})})?o.apply(t,i):o)||(e.exports=t)},21729:function(e){"use strict";e.exports=require("./tile")}},o={};function a(e){var t=o[e];return void 0!==t||(t=o[e]={exports:{}},i[e](t,t.exports,a)),t.exports}a.amdD=function(){throw Error("define cannot be used indirect")},e=a(51903),module.exports=e}();