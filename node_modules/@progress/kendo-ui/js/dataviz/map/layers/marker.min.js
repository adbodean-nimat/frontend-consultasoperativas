!function(){var t,e={58016:function(t,i,e){var a;e=[e(14560),e(46043),e(25340),e(87181)],void 0===(i="function"==typeof(a=function(){var e=window.kendo.jQuery,d=void 0,l=document,i=Math,u=e.inArray,n=window.kendo,p=n.Class,f=n.data.DataSource,o=n.ui.Tooltip,t=n.dataviz,a=n.deepExtend,s=t.map,r=s.Location,h=s.layers.Layer,m=h.extend({init:function(t,i){h.fn.init.call(this,t,i);this._markerClick=this._markerClick.bind(this);this.element.on("click",".k-marker",this._markerClick);this.items=[];this._initDataSource()},destroy:function(){h.fn.destroy.call(this);this.element.off("click",".k-marker",this._markerClick);this.dataSource.unbind("change",this._dataChange);this.clear()},options:{zIndex:1e3,autoBind:true,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(Array.isArray(t))for(var i=0;i<t.length;i++)this._addOne(t[i]);else return this._addOne(t)},remove:function(t){t.destroy();var i=u(t,this.items);if(i>-1)this.items.splice(i,1)},clear:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},update:function(t){var i=t.location();if(i){t.showAt(this.map.locationToView(i));var e={marker:t,layer:this};this.map.trigger("markerActivate",e)}},_reset:function(){h.fn._reset.call(this);var t=this.items;for(var i=0;i<t.length;i++)this.update(t[i])},bind:function(t,i){var e=s.Marker.create(t,this.options);e.dataItem=i;var a={marker:e,layer:this};var r=this.map.trigger("markerCreated",a);if(!r){this.add(e);return e}},setDataSource:function(t){if(this.dataSource)this.dataSource.unbind("change",this._dataChange);this.dataSource=n.data.DataSource.create(t);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind)this.dataSource.fetch()},_addOne:function(t){var i=c.create(t,this.options);i.addTo(this);return i},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=this._dataChange.bind(this);this.dataSource=f.create(t).bind("change",this._dataChange);if(t&&this.options.autoBind)this.dataSource.fetch()},_dataChange:function(t){this._load(t.sender.view())},_load:function(t){this._data=t;this.clear();var i=n.getter(this.options.locationField);var e=n.getter(this.options.titleField);for(var a=0;a<t.length;a++){var r=t[a];this.bind({location:i(r),title:e(r)},r)}},_markerClick:function(t){var i={marker:e(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",i)}}),c=p.extend({init:function(t){this.options=t||{}},addTo:function(t){this.layer=t.markers||t;this.layer.items.push(this);this.layer.update(this)},location:function(t){if(t){this.options.location=r.create(t).toArray();if(this.layer)this.layer.update(this);return this}else return r.create(this.options.location)},showAt:function(t){this.render();this.element.css({left:i.round(t.x),top:i.round(t.y)});if(this.tooltip&&this.tooltip.popup)this.tooltip.popup._position()},hide:function(){if(this.element){this.element.remove();this.element=null}if(this.tooltip){this.tooltip.destroy();this.tooltip=null}},destroy:function(){this.layer=null;this.hide()},render:function(){if(!this.element){var t=this.options;var i=this.layer;this.element=e(l.createElement("span")).addClass("k-marker k-icon k-i-marker-"+n.toHyphens(t.shape||"pin")).attr("title",t.title).attr(t.attributes||{}).data("kendoMarker",this).css("zIndex",t.zIndex);if(i)i.element.append(this.element);this.renderTooltip()}},renderTooltip:function(){var i=this;var t=i.options.title;var e=i.options.tooltip||{};if(e&&o){var a=e.template;if(a){var r=n.template(a);e.content=function(t){t.location=i.location();t.marker=i;return r(t)}}if(t||e.content||e.contentUrl){this.tooltip=new o(this.element,e);this.tooltip.marker=this}}}});c.create=function(t,i){if(t instanceof c)return t;return new c(a({},i,t))},a(t,{map:{layers:{marker:m,MarkerLayer:m},Marker:c}})})?a.apply(i,e):a)||(t.exports=i)},25340:function(t){"use strict";t.exports=require("../../../kendo.data")},87181:function(t){"use strict";t.exports=require("../../../kendo.tooltip")},46043:function(t){"use strict";t.exports=require("../location")},14560:function(t){"use strict";t.exports=require("./base")}},a={};function r(t){var i=a[t];return void 0!==i||(i=a[t]={exports:{}},e[t](i,i.exports,r)),i.exports}r.amdD=function(){throw Error("define cannot be used indirect")},t=r(58016),module.exports=t}();