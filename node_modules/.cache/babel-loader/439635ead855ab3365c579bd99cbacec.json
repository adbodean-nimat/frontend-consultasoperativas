{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    55038:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n      /***********************************************************************\n      * WARNING: this file is auto-generated.  If you change it directly,\n      * your modifications will eventually be lost.  The source code is in\n      * `kendo-charts` repository, you should make your changes there and\n      * run `src-modules/sync.sh` in this repository.\n      */\n\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(33877), __webpack_require__(13298), __webpack_require__(79174), __webpack_require__(32549)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        (function ($) {\n          /* eslint-disable space-before-blocks, space-before-function-paren, curly */\n          window.kendo.dataviz = window.kendo.dataviz || {};\n          var dataviz = kendo.dataviz;\n          var Class = dataviz.Class;\n          var isNumber = dataviz.isNumber;\n          var datavizConstants = dataviz.constants;\n          var MAX_VALUE = datavizConstants.MAX_VALUE;\n          var MIN_VALUE = datavizConstants.MIN_VALUE;\n          var VALUE = datavizConstants.VALUE;\n          var CENTER = datavizConstants.CENTER;\n          var TOP = datavizConstants.TOP;\n          var BOTTOM = datavizConstants.BOTTOM;\n          var LEFT = datavizConstants.LEFT;\n          var WHITE = datavizConstants.WHITE;\n          var CIRCLE = datavizConstants.CIRCLE;\n          var X = datavizConstants.X;\n          var Y = datavizConstants.Y;\n          var RIGHT = datavizConstants.RIGHT;\n          var BLACK = datavizConstants.BLACK;\n          var DATE = datavizConstants.DATE;\n          var DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\n          var ARC = datavizConstants.ARC;\n          var defined = dataviz.defined;\n          var getter = dataviz.getter;\n          var isArray = dataviz.isArray;\n          var ChartElement = dataviz.ChartElement;\n          var Point = dataviz.Point;\n          var Box = dataviz.Box;\n          var alignPathToPixel = dataviz.alignPathToPixel;\n          var setDefaultOptions = dataviz.setDefaultOptions;\n          var inArray = dataviz.inArray;\n          var isFunction = dataviz.isFunction;\n          var valueOrDefault = dataviz.valueOrDefault;\n          var isObject = dataviz.isObject;\n          var deepExtend = dataviz.deepExtend;\n          var last = dataviz.last;\n          var eventElement = dataviz.eventElement;\n          var getTemplate = dataviz.getTemplate;\n          var TextBox = dataviz.TextBox;\n          var ShapeElement = dataviz.ShapeElement;\n          var getSpacing = dataviz.getSpacing;\n          var CurveProcessor = dataviz.CurveProcessor;\n          var append = dataviz.append;\n          var isString = dataviz.isString;\n          var parseDate = dataviz.parseDate;\n          var styleValue = dataviz.styleValue;\n          var CategoryAxis = dataviz.CategoryAxis;\n          var BoxElement = dataviz.BoxElement;\n          var round = dataviz.round;\n          var limitValue = dataviz.limitValue;\n          var grep = dataviz.grep;\n          var elementStyles = dataviz.elementStyles;\n          var hasClasses = dataviz.hasClasses;\n          var bindEvents = dataviz.bindEvents;\n          var services = dataviz.services;\n          var unbindEvents = dataviz.unbindEvents;\n          var support = kendo.support;\n          var drawing = kendo.drawing;\n          var Path = drawing.Path;\n          var Animation = drawing.Animation;\n          var AnimationFactory = drawing.AnimationFactory;\n          var Group = drawing.Group;\n          var Color = kendo.Color;\n          var geometry = kendo.geometry;\n          var GeometryPoint = geometry.Point;\n          var transform = geometry.transform;\n          var ChartAxis = Class.extend({\n            init: function (axis) {\n              this._axis = axis;\n              this.options = axis.options;\n            },\n            value: function (point) {\n              var axis = this._axis;\n              var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n              return value;\n            },\n            slot: function (from, to, limit) {\n              if (limit === void 0) {\n                limit = true;\n              }\n\n              return this._axis.slot(from, to, limit);\n            },\n            range: function () {\n              return this._axis.range();\n            },\n            valueRange: function () {\n              return this._axis.valueRange();\n            }\n          });\n\n          function findAxisByName(name, axes) {\n            for (var idx = 0; idx < axes.length; idx++) {\n              if (axes[idx].options.name === name) {\n                axes[idx].prepareUserOptions();\n                return new ChartAxis(axes[idx]);\n              }\n            }\n          }\n\n          var ChartPane = kendo.Class.extend({\n            init: function (pane) {\n              this.visual = pane.visual;\n              this.chartsVisual = pane.chartContainer.visual;\n              this._pane = pane;\n            },\n            findAxisByName: function (name) {\n              return findAxisByName(name, this._pane.axes);\n            }\n          });\n          var ChartPlotArea = Class.extend({\n            init: function (plotArea) {\n              this._plotArea = plotArea;\n              this.visual = plotArea.visual;\n              this.backgroundVisual = plotArea._bgVisual;\n            }\n          });\n\n          function countNumbers(values) {\n            var length = values.length;\n            var count = 0;\n\n            for (var i = 0; i < length; i++) {\n              var num = values[i];\n\n              if (isNumber(num)) {\n                count++;\n              }\n            }\n\n            return count;\n          }\n\n          var Aggregates = {\n            min: function (values) {\n              var length = values.length;\n              var min = MAX_VALUE;\n\n              for (var i = 0; i < length; i++) {\n                var value = values[i];\n\n                if (isNumber(value)) {\n                  min = Math.min(min, value);\n                }\n              }\n\n              return min === MAX_VALUE ? values[0] : min;\n            },\n            max: function (values) {\n              var length = values.length;\n              var max = MIN_VALUE;\n\n              for (var i = 0; i < length; i++) {\n                var value = values[i];\n\n                if (isNumber(value)) {\n                  max = Math.max(max, value);\n                }\n              }\n\n              return max === MIN_VALUE ? values[0] : max;\n            },\n            sum: function (values) {\n              var length = values.length;\n              var sum = 0;\n\n              for (var i = 0; i < length; i++) {\n                var value = values[i];\n\n                if (isNumber(value)) {\n                  sum += value;\n                }\n              }\n\n              return sum;\n            },\n            sumOrNull: function (values) {\n              var result = null;\n\n              if (countNumbers(values)) {\n                result = Aggregates.sum(values);\n              }\n\n              return result;\n            },\n            count: function (values) {\n              var length = values.length;\n              var count = 0;\n\n              for (var i = 0; i < length; i++) {\n                var value = values[i];\n\n                if (value !== null && defined(value)) {\n                  count++;\n                }\n              }\n\n              return count;\n            },\n            avg: function (values) {\n              var count = countNumbers(values);\n              var result = values[0];\n\n              if (count > 0) {\n                result = Aggregates.sum(values) / count;\n              }\n\n              return result;\n            },\n            first: function (values) {\n              var length = values.length;\n\n              for (var i = 0; i < length; i++) {\n                var value = values[i];\n\n                if (value !== null && defined(value)) {\n                  return value;\n                }\n              }\n\n              return values[0];\n            }\n          };\n\n          function getField(field, row) {\n            if (row === null) {\n              return row;\n            }\n\n            var get = getter(field, true);\n            return get(row);\n          }\n\n          var SeriesBinder = Class.extend({\n            init: function () {\n              this._valueFields = {};\n              this._otherFields = {};\n              this._nullValue = {};\n              this._undefinedValue = {};\n            },\n            register: function (seriesTypes, valueFields, otherFields) {\n              var this$1 = this;\n\n              if (valueFields === void 0) {\n                valueFields = [VALUE];\n              }\n\n              if (otherFields === void 0) {\n                otherFields = {};\n              }\n\n              for (var i = 0; i < seriesTypes.length; i++) {\n                var type = seriesTypes[i];\n                this$1._valueFields[type] = valueFields;\n                this$1._otherFields[type] = otherFields;\n                this$1._nullValue[type] = this$1._makeValue(valueFields, null);\n                this$1._undefinedValue[type] = this$1._makeValue(valueFields, undefined);\n              }\n            },\n            canonicalFields: function (series) {\n              return this.valueFields(series).concat(this.otherFields(series));\n            },\n            valueFields: function (series) {\n              return this._valueFields[series.type] || [VALUE];\n            },\n            otherFields: function (series) {\n              return this._otherFields[series.type] || [VALUE];\n            },\n            bindPoint: function (series, pointIx, item) {\n              var data = series.data;\n              var pointData = defined(item) ? item : data[pointIx];\n              var result = {\n                valueFields: {\n                  value: pointData\n                }\n              };\n              var valueFields = this.valueFields(series);\n              var otherFields = this._otherFields[series.type];\n              var fields, value;\n\n              if (pointData === null) {\n                value = this._nullValue[series.type];\n              } else if (!defined(pointData)) {\n                value = this._undefinedValue[series.type];\n              } else if (Array.isArray(pointData)) {\n                var fieldData = pointData.slice(valueFields.length);\n                value = this._bindFromArray(pointData, valueFields);\n                fields = this._bindFromArray(fieldData, otherFields);\n              } else if (typeof pointData === \"object\") {\n                var srcValueFields = this.sourceFields(series, valueFields);\n                var srcPointFields = this.sourceFields(series, otherFields);\n                value = this._bindFromObject(pointData, valueFields, srcValueFields);\n                fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n              }\n\n              if (defined(value)) {\n                if (valueFields.length === 1) {\n                  result.valueFields.value = value[valueFields[0]];\n                } else {\n                  result.valueFields = value;\n                }\n              }\n\n              result.fields = fields || {};\n              return result;\n            },\n            _makeValue: function (fields, initialValue) {\n              var value = {};\n              var length = fields.length;\n\n              for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                value[fieldName] = initialValue;\n              }\n\n              return value;\n            },\n            _bindFromArray: function (array, fields) {\n              var value = {};\n\n              if (fields) {\n                var length = Math.min(fields.length, array.length);\n\n                for (var i = 0; i < length; i++) {\n                  value[fields[i]] = array[i];\n                }\n              }\n\n              return value;\n            },\n            _bindFromObject: function (object, fields, srcFields) {\n              if (srcFields === void 0) {\n                srcFields = fields;\n              }\n\n              var value = {};\n\n              if (fields) {\n                var length = fields.length;\n\n                for (var i = 0; i < length; i++) {\n                  var fieldName = fields[i];\n                  var srcFieldName = srcFields[i];\n\n                  if (srcFieldName !== null) {\n                    value[fieldName] = getField(srcFieldName, object);\n                  }\n                }\n              }\n\n              return value;\n            },\n            sourceFields: function (series, canonicalFields) {\n              var sourceFields = [];\n\n              if (canonicalFields) {\n                var length = canonicalFields.length;\n\n                for (var i = 0; i < length; i++) {\n                  var fieldName = canonicalFields[i];\n                  var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n                  sourceFields.push(series[sourceFieldName] !== null ? series[sourceFieldName] || fieldName : null);\n                }\n              }\n\n              return sourceFields;\n            }\n          });\n          SeriesBinder.current = new SeriesBinder();\n          var STD_ERR = \"stderr\";\n          var STD_DEV = \"stddev\";\n          var percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\n          var standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n          var ErrorRangeCalculator = Class.extend({\n            init: function (errorValue, series, field) {\n              this.initGlobalRanges(errorValue, series, field);\n            },\n            initGlobalRanges: function (errorValue, series, field) {\n              var data = series.data;\n              var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n              if (deviationMatch) {\n                this.valueGetter = this.createValueGetter(series, field);\n                var average = this.getAverage(data);\n                var deviation = this.getStandardDeviation(data, average, false);\n                var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n                var errorRange = {\n                  low: average.value - deviation * multiple,\n                  high: average.value + deviation * multiple\n                };\n\n                this.globalRange = function () {\n                  return errorRange;\n                };\n              } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n                this.valueGetter = this.createValueGetter(series, field);\n                var standardError = this.getStandardError(data, this.getAverage(data));\n\n                this.globalRange = function (value) {\n                  return {\n                    low: value - standardError,\n                    high: value + standardError\n                  };\n                };\n              }\n            },\n            createValueGetter: function (series, field) {\n              var data = series.data;\n              var binder = SeriesBinder.current;\n              var valueFields = binder.valueFields(series);\n              var item = defined(data[0]) ? data[0] : {};\n              var valueGetter;\n\n              if (isArray(item)) {\n                var index = field ? valueFields.indexOf(field) : 0;\n                valueGetter = getter(\"[\" + index + \"]\");\n              } else if (isNumber(item)) {\n                valueGetter = getter();\n              } else if (typeof item === datavizConstants.OBJECT) {\n                var srcValueFields = binder.sourceFields(series, valueFields);\n                valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n              }\n\n              return valueGetter;\n            },\n            getErrorRange: function (pointValue, errorValue) {\n              var low, high, value;\n\n              if (!defined(errorValue)) {\n                return null;\n              }\n\n              if (this.globalRange) {\n                return this.globalRange(pointValue);\n              }\n\n              if (isArray(errorValue)) {\n                low = pointValue - errorValue[0];\n                high = pointValue + errorValue[1];\n              } else if (isNumber(value = parseFloat(errorValue))) {\n                low = pointValue - value;\n                high = pointValue + value;\n              } else if (value = percentRegex.exec(errorValue)) {\n                var percentValue = pointValue * (parseFloat(value[1]) / 100);\n                low = pointValue - Math.abs(percentValue);\n                high = pointValue + Math.abs(percentValue);\n              } else {\n                throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n              }\n\n              return {\n                low: low,\n                high: high\n              };\n            },\n            getStandardError: function (data, average) {\n              return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n            },\n            getStandardDeviation: function (data, average, isSample) {\n              var this$1 = this;\n              var length = data.length;\n              var total = isSample ? average.count - 1 : average.count;\n              var squareDifferenceSum = 0;\n\n              for (var idx = 0; idx < length; idx++) {\n                var value = this$1.valueGetter(data[idx]);\n\n                if (isNumber(value)) {\n                  squareDifferenceSum += Math.pow(value - average.value, 2);\n                }\n              }\n\n              return Math.sqrt(squareDifferenceSum / total);\n            },\n            getAverage: function (data) {\n              var this$1 = this;\n              var length = data.length;\n              var sum = 0;\n              var count = 0;\n\n              for (var idx = 0; idx < length; idx++) {\n                var value = this$1.valueGetter(data[idx]);\n\n                if (isNumber(value)) {\n                  sum += value;\n                  count++;\n                }\n              }\n\n              return {\n                value: sum / count,\n                count: count\n              };\n            }\n          });\n          var browser = support.browser || {};\n          var INITIAL_ANIMATION_DURATION = 600;\n          var FADEIN = \"fadeIn\";\n          var GLASS = \"glass\";\n          var BORDER_BRIGHTNESS = 0.8;\n          var TOOLTIP_OFFSET = 5;\n          var START_SCALE = browser.msie ? 0.001 : 0;\n          var ERROR_LOW_FIELD = \"errorLow\";\n          var ERROR_HIGH_FIELD = \"errorHigh\";\n          var X_ERROR_LOW_FIELD = \"xErrorLow\";\n          var X_ERROR_HIGH_FIELD = \"xErrorHigh\";\n          var Y_ERROR_LOW_FIELD = \"yErrorLow\";\n          var Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\n          var LINE_MARKER_SIZE = 8;\n          var ZERO = \"zero\";\n          var INTERPOLATE = \"interpolate\";\n          var GAP = \"gap\";\n          var ABOVE = \"above\";\n          var BELOW = \"below\";\n          var SMOOTH = \"smooth\";\n          var STEP = \"step\";\n          var AREA = \"area\";\n          var BAR = \"bar\";\n          var BOX_PLOT = \"boxPlot\";\n          var BUBBLE = \"bubble\";\n          var BULLET = \"bullet\";\n          var CANDLESTICK = \"candlestick\";\n          var COLUMN = \"column\";\n          var DONUT = \"donut\";\n          var FUNNEL = \"funnel\";\n          var HEATMAP = \"heatmap\";\n          var HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\n          var LINE = \"line\";\n          var OHLC = \"ohlc\";\n          var PIE = \"pie\";\n          var POLAR_AREA = \"polarArea\";\n          var POLAR_LINE = \"polarLine\";\n          var POLAR_SCATTER = \"polarScatter\";\n          var RADAR_AREA = \"radarArea\";\n          var RADAR_COLUMN = \"radarColumn\";\n          var RADAR_LINE = \"radarLine\";\n          var RANGE_AREA = \"rangeArea\";\n          var RANGE_BAR = \"rangeBar\";\n          var RANGE_COLUMN = \"rangeColumn\";\n          var SCATTER = \"scatter\";\n          var SCATTER_LINE = \"scatterLine\";\n          var VERTICAL_AREA = \"verticalArea\";\n          var VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\n          var VERTICAL_BULLET = \"verticalBullet\";\n          var VERTICAL_LINE = \"verticalLine\";\n          var VERTICAL_RANGE_AREA = \"verticalRangeArea\";\n          var WATERFALL = \"waterfall\";\n          var EQUALLY_SPACED_SERIES = [BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT, BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL];\n          var LEGEND_ITEM_CLICK = \"legendItemClick\";\n          var LEGEND_ITEM_HOVER = \"legendItemHover\";\n          var LEGEND_ITEM_LEAVE = \"legendItemLeave\";\n          var SERIES_CLICK = \"seriesClick\";\n          var SERIES_HOVER = \"seriesHover\";\n          var SERIES_OVER = \"seriesOver\";\n          var SERIES_LEAVE = \"seriesLeave\";\n          var PLOT_AREA_CLICK = \"plotAreaClick\";\n          var PLOT_AREA_HOVER = \"plotAreaHover\";\n          var PLOT_AREA_LEAVE = \"plotAreaLeave\";\n          var DRAG = \"drag\";\n          var DRAG_END = \"dragEnd\";\n          var DRAG_START = \"dragStart\";\n          var ZOOM_START = \"zoomStart\";\n          var ZOOM = \"zoom\";\n          var ZOOM_END = \"zoomEnd\";\n          var SELECT_START = \"selectStart\";\n          var SELECT = \"select\";\n          var SELECT_END = \"selectEnd\";\n          var RENDER = \"render\";\n          var SHOW_TOOLTIP = \"showTooltip\";\n          var HIDE_TOOLTIP = \"hideTooltip\";\n          var PANE_RENDER = \"paneRender\";\n          var LOGARITHMIC = \"log\";\n          var CATEGORY = \"category\";\n          var INSIDE_END = \"insideEnd\";\n          var INSIDE_BASE = \"insideBase\";\n          var OUTSIDE_END = \"outsideEnd\";\n          var MOUSEWHEEL = \"DOMMouseScroll mousewheel\";\n          var MOUSEWHEEL_DELAY = 150;\n          var MOUSEWHEEL_ZOOM_RATE = 0.3;\n          var constants = {\n            INITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n            FADEIN: FADEIN,\n            LEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n            LEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n            LEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n            SERIES_CLICK: SERIES_CLICK,\n            SERIES_HOVER: SERIES_HOVER,\n            SERIES_OVER: SERIES_OVER,\n            SERIES_LEAVE: SERIES_LEAVE,\n            GLASS: GLASS,\n            BORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n            TOOLTIP_OFFSET: TOOLTIP_OFFSET,\n            START_SCALE: START_SCALE,\n            ERROR_LOW_FIELD: ERROR_LOW_FIELD,\n            ERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n            X_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n            X_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n            Y_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n            Y_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n            LINE_MARKER_SIZE: LINE_MARKER_SIZE,\n            INTERPOLATE: INTERPOLATE,\n            ZERO: ZERO,\n            SMOOTH: SMOOTH,\n            STEP: STEP,\n            CATEGORY: CATEGORY,\n            FUNNEL: FUNNEL,\n            BAR: BAR,\n            CANDLESTICK: CANDLESTICK,\n            PIE: PIE,\n            COLUMN: COLUMN,\n            AREA: AREA,\n            VERTICAL_BULLET: VERTICAL_BULLET,\n            BOX_PLOT: BOX_PLOT,\n            OHLC: OHLC,\n            WATERFALL: WATERFALL,\n            LINE: LINE,\n            BULLET: BULLET,\n            VERTICAL_LINE: VERTICAL_LINE,\n            VERTICAL_AREA: VERTICAL_AREA,\n            RANGE_AREA: RANGE_AREA,\n            VERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n            RANGE_COLUMN: RANGE_COLUMN,\n            VERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n            RANGE_BAR: RANGE_BAR,\n            HORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n            SCATTER: SCATTER,\n            SCATTER_LINE: SCATTER_LINE,\n            BUBBLE: BUBBLE,\n            RADAR_AREA: RADAR_AREA,\n            RADAR_LINE: RADAR_LINE,\n            RADAR_COLUMN: RADAR_COLUMN,\n            POLAR_LINE: POLAR_LINE,\n            POLAR_AREA: POLAR_AREA,\n            POLAR_SCATTER: POLAR_SCATTER,\n            RENDER: RENDER,\n            PLOT_AREA_CLICK: PLOT_AREA_CLICK,\n            PLOT_AREA_HOVER: PLOT_AREA_HOVER,\n            PLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n            LOGARITHMIC: LOGARITHMIC,\n            DRAG: DRAG,\n            DRAG_START: DRAG_START,\n            DRAG_END: DRAG_END,\n            ZOOM_START: ZOOM_START,\n            ZOOM: ZOOM,\n            ZOOM_END: ZOOM_END,\n            SELECT_START: SELECT_START,\n            SELECT: SELECT,\n            SELECT_END: SELECT_END,\n            PANE_RENDER: PANE_RENDER,\n            GAP: GAP,\n            DONUT: DONUT,\n            INSIDE_END: INSIDE_END,\n            INSIDE_BASE: INSIDE_BASE,\n            OUTSIDE_END: OUTSIDE_END,\n            MOUSEWHEEL: MOUSEWHEEL,\n            MOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n            MOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n            SHOW_TOOLTIP: SHOW_TOOLTIP,\n            HIDE_TOOLTIP: HIDE_TOOLTIP,\n            EQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n            ABOVE: ABOVE,\n            BELOW: BELOW,\n            HEATMAP: HEATMAP\n          };\n          var DEFAULT_ERROR_BAR_WIDTH = 4;\n          var ErrorBarBase = ChartElement.extend({\n            init: function (low, high, isVertical, chart, series, options) {\n              ChartElement.fn.init.call(this, options);\n              this.low = low;\n              this.high = high;\n              this.isVertical = isVertical;\n              this.chart = chart;\n              this.series = series;\n            },\n            reflow: function (targetBox) {\n              var endCaps = this.options.endCaps;\n              var isVertical = this.isVertical;\n              var axis = this.getAxis();\n              var valueBox = axis.getSlot(this.low, this.high);\n              var centerBox = targetBox.center();\n              var capsWidth = this.getCapsWidth(targetBox, isVertical);\n              var capValue = isVertical ? centerBox.x : centerBox.y;\n              var capStart = capValue - capsWidth;\n              var capEnd = capValue + capsWidth;\n              var linePoints;\n\n              if (isVertical) {\n                linePoints = [new Point(centerBox.x, valueBox.y1), new Point(centerBox.x, valueBox.y2)];\n\n                if (endCaps) {\n                  linePoints.push(new Point(capStart, valueBox.y1), new Point(capEnd, valueBox.y1), new Point(capStart, valueBox.y2), new Point(capEnd, valueBox.y2));\n                }\n\n                this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n              } else {\n                linePoints = [new Point(valueBox.x1, centerBox.y), new Point(valueBox.x2, centerBox.y)];\n\n                if (endCaps) {\n                  linePoints.push(new Point(valueBox.x1, capStart), new Point(valueBox.x1, capEnd), new Point(valueBox.x2, capStart), new Point(valueBox.x2, capEnd));\n                }\n\n                this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n              }\n\n              this.linePoints = linePoints;\n            },\n            getCapsWidth: function (box, isVertical) {\n              var boxSize = isVertical ? box.width() : box.height();\n              var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n              return capsWidth;\n            },\n            createVisual: function () {\n              var this$1 = this;\n              var options = this.options;\n              var visual = options.visual;\n\n              if (visual) {\n                this.visual = visual({\n                  low: this.low,\n                  high: this.high,\n                  rect: this.box.toRect(),\n                  sender: this.getSender(),\n                  options: {\n                    endCaps: options.endCaps,\n                    color: options.color,\n                    line: options.line\n                  },\n                  createVisual: function () {\n                    this$1.createDefaultVisual();\n                    var defaultVisual = this$1.visual;\n                    delete this$1.visual;\n                    return defaultVisual;\n                  }\n                });\n              } else {\n                this.createDefaultVisual();\n              }\n            },\n            createDefaultVisual: function () {\n              var this$1 = this;\n              var ref = this;\n              var options = ref.options;\n              var linePoints = ref.linePoints;\n              var lineOptions = {\n                stroke: {\n                  color: options.color,\n                  width: options.line.width,\n                  dashType: options.line.dashType\n                }\n              };\n              ChartElement.fn.createVisual.call(this);\n\n              for (var idx = 0; idx < linePoints.length; idx += 2) {\n                var line = new Path(lineOptions).moveTo(linePoints[idx].x, linePoints[idx].y).lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n                alignPathToPixel(line);\n                this$1.visual.append(line);\n              }\n            }\n          });\n          setDefaultOptions(ErrorBarBase, {\n            animation: {\n              type: FADEIN,\n              delay: INITIAL_ANIMATION_DURATION\n            },\n            endCaps: true,\n            line: {\n              width: 2\n            },\n            zIndex: 1\n          });\n          var CategoricalErrorBar = ErrorBarBase.extend({\n            getAxis: function () {\n              var axis = this.chart.seriesValueAxis(this.series);\n              return axis;\n            }\n          });\n          var MAX_EXPAND_DEPTH = 5;\n\n          function evalOptions(options, context, state, dryRun) {\n            if (state === void 0) {\n              state = {};\n            }\n\n            if (dryRun === void 0) {\n              dryRun = false;\n            }\n\n            var defaults = state.defaults = state.defaults || {};\n            var depth = state.depth = state.depth || 0;\n            var needsEval = false;\n            state.excluded = state.excluded || [];\n\n            if (depth > MAX_EXPAND_DEPTH) {\n              return null;\n            }\n\n            for (var property in options) {\n              if (!inArray(property, state.excluded) && options.hasOwnProperty(property)) {\n                var propValue = options[property];\n\n                if (isFunction(propValue)) {\n                  needsEval = true;\n\n                  if (!dryRun) {\n                    options[property] = valueOrDefault(propValue(context), defaults[property]);\n                  }\n                } else if (isObject(propValue)) {\n                  if (!dryRun) {\n                    state.defaults = defaults[property];\n                  }\n\n                  state.depth++;\n                  needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                  state.depth--;\n                }\n              }\n            }\n\n            return needsEval;\n          }\n\n          function categoriesCount(series) {\n            var seriesCount = series.length;\n            var categories = 0;\n\n            for (var i = 0; i < seriesCount; i++) {\n              categories = Math.max(categories, series[i].data.length);\n            }\n\n            return categories;\n          }\n\n          var CategoricalChart = ChartElement.extend({\n            init: function (plotArea, options) {\n              ChartElement.fn.init.call(this, options);\n              this.plotArea = plotArea;\n              this.chartService = plotArea.chartService;\n              this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]); // Value axis ranges grouped by axis name, e.g.:\n              // primary: { min: 0, max: 1 }\n\n              this.valueAxisRanges = {};\n              this.points = [];\n              this.categoryPoints = [];\n              this.seriesPoints = [];\n              this.seriesOptions = [];\n              this._evalSeries = [];\n              this.render();\n            },\n            render: function () {\n              this.traverseDataPoints(this.addValue.bind(this));\n            },\n            pointOptions: function (series, seriesIx) {\n              var options = this.seriesOptions[seriesIx];\n\n              if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                  vertical: !this.options.invertAxes\n                }, series);\n              }\n\n              return options;\n            },\n            plotValue: function (point) {\n              if (!point) {\n                return 0;\n              }\n\n              if (this.options.isStacked100 && isNumber(point.value)) {\n                var categoryIx = point.categoryIx;\n                var categoryPoints = this.categoryPoints[categoryIx];\n                var otherValues = [];\n                var categorySum = 0;\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                  var other = categoryPoints[i];\n\n                  if (other) {\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n\n                    if (stack && otherStack && stack.group !== otherStack.group) {\n                      continue;\n                    }\n\n                    if (isNumber(other.value)) {\n                      categorySum += Math.abs(other.value);\n                      otherValues.push(Math.abs(other.value));\n                    }\n                  }\n                }\n\n                if (categorySum > 0) {\n                  return point.value / categorySum;\n                }\n              }\n\n              return point.value;\n            },\n            plotRange: function (point, startValue) {\n              var this$1 = this;\n\n              if (startValue === void 0) {\n                startValue = 0;\n              }\n\n              var categoryPoints = this.categoryPoints[point.categoryIx];\n\n              if (this.options.isStacked) {\n                var plotValue = this.plotValue(point);\n                var positive = plotValue >= 0;\n                var prevValue = startValue;\n                var isStackedBar = false;\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                  var other = categoryPoints[i];\n\n                  if (point === other) {\n                    break;\n                  }\n\n                  var stack = point.series.stack;\n                  var otherStack = other.series.stack;\n\n                  if (stack && otherStack) {\n                    if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                      continue;\n                    }\n\n                    if (stack.group && stack.group !== otherStack.group) {\n                      continue;\n                    }\n                  }\n\n                  var otherValue = this$1.plotValue(other);\n\n                  if (otherValue >= 0 && positive || otherValue < 0 && !positive) {\n                    prevValue += otherValue;\n                    plotValue += otherValue;\n                    isStackedBar = true;\n\n                    if (this$1.options.isStacked100) {\n                      plotValue = Math.min(plotValue, 1);\n                    }\n                  }\n                }\n\n                if (isStackedBar) {\n                  prevValue -= startValue;\n                }\n\n                return [prevValue, plotValue];\n              }\n\n              var series = point.series;\n              var valueAxis = this.seriesValueAxis(series);\n              var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n              return [axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue];\n            },\n            stackLimits: function (axisName, stackName) {\n              var this$1 = this;\n              var min = MAX_VALUE;\n              var max = MIN_VALUE;\n\n              for (var i = 0; i < this.categoryPoints.length; i++) {\n                var categoryPoints = this$1.categoryPoints[i];\n\n                if (!categoryPoints) {\n                  continue;\n                }\n\n                for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                  var point = categoryPoints[pIx];\n\n                  if (point) {\n                    if (point.series.stack === stackName || point.series.axis === axisName) {\n                      var to = this$1.plotRange(point, 0)[1];\n\n                      if (defined(to) && isFinite(to)) {\n                        max = Math.max(max, to);\n                        min = Math.min(min, to);\n                      }\n                    }\n                  }\n                }\n              }\n\n              return {\n                min: min,\n                max: max\n              };\n            },\n            updateStackRange: function () {\n              var this$1 = this;\n              var ref = this.options;\n              var isStacked = ref.isStacked;\n              var chartSeries = ref.series;\n              var limitsCache = {};\n\n              if (isStacked) {\n                for (var i = 0; i < chartSeries.length; i++) {\n                  var series = chartSeries[i];\n                  var axisName = series.axis;\n                  var key = axisName + series.stack;\n                  var limits = limitsCache[key];\n\n                  if (!limits) {\n                    limits = this$1.stackLimits(axisName, series.stack);\n                    var errorTotals = this$1.errorTotals;\n\n                    if (errorTotals) {\n                      if (errorTotals.negative.length) {\n                        limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                      }\n\n                      if (errorTotals.positive.length) {\n                        limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                      }\n                    }\n\n                    if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                      limitsCache[key] = limits;\n                    } else {\n                      limits = null;\n                    }\n                  }\n\n                  if (limits) {\n                    this$1.valueAxisRanges[axisName] = limits;\n                  }\n                }\n              }\n            },\n            addErrorBar: function (point, data, categoryIx) {\n              var value = point.value;\n              var series = point.series;\n              var seriesIx = point.seriesIx;\n              var errorBars = point.options.errorBars;\n              var lowValue = data.fields[ERROR_LOW_FIELD];\n              var highValue = data.fields[ERROR_HIGH_FIELD];\n              var errorRange;\n\n              if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = {\n                  low: lowValue,\n                  high: highValue\n                };\n              } else if (errorBars && defined(errorBars.value)) {\n                this.seriesErrorRanges = this.seriesErrorRanges || [];\n                this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] || new ErrorRangeCalculator(errorBars.value, series, VALUE);\n                errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n              }\n\n              if (errorRange) {\n                point.low = errorRange.low;\n                point.high = errorRange.high;\n                this.addPointErrorBar(point, categoryIx);\n              }\n            },\n            addPointErrorBar: function (point, categoryIx) {\n              var isVertical = !this.options.invertAxes;\n              var options = point.options.errorBars;\n              var series = point.series;\n              var low = point.low;\n              var high = point.high;\n\n              if (this.options.isStacked) {\n                var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n                low = stackedErrorRange.low;\n                high = stackedErrorRange.high;\n              } else {\n                var fields = {\n                  categoryIx: categoryIx,\n                  series: series\n                };\n                this.updateRange({\n                  value: low\n                }, fields);\n                this.updateRange({\n                  value: high\n                }, fields);\n              }\n\n              var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n              point.errorBars = [errorBar];\n              point.append(errorBar);\n            },\n            stackedErrorRange: function (point, categoryIx) {\n              var plotValue = this.plotRange(point, 0)[1] - point.value;\n              var low = point.low + plotValue;\n              var high = point.high + plotValue;\n              this.errorTotals = this.errorTotals || {\n                positive: [],\n                negative: []\n              };\n\n              if (low < 0) {\n                this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n              }\n\n              if (high > 0) {\n                this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n              }\n\n              return {\n                low: low,\n                high: high\n              };\n            },\n            addValue: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var categoryPoints = this.categoryPoints[categoryIx];\n\n              if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n              }\n\n              var seriesPoints = this.seriesPoints[seriesIx];\n\n              if (!seriesPoints) {\n                this.seriesPoints[seriesIx] = seriesPoints = [];\n              }\n\n              var point = this.createPoint(data, fields);\n\n              if (point) {\n                $.extend(point, fields);\n                point.owner = this;\n                point.noteText = data.fields.noteText;\n\n                if (!defined(point.dataItem)) {\n                  point.dataItem = series.data[categoryIx];\n                }\n\n                this.addErrorBar(point, data, categoryIx);\n              }\n\n              this.points.push(point);\n              seriesPoints.push(point);\n              categoryPoints.push(point);\n              this.updateRange(data.valueFields, fields);\n            },\n            evalPointOptions: function (options, value, category, categoryIx, series, seriesIx) {\n              var state = {\n                defaults: series._defaults,\n                excluded: [\"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\"]\n              };\n              var doEval = this._evalSeries[seriesIx];\n\n              if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n              }\n\n              var pointOptions = options;\n\n              if (doEval) {\n                pointOptions = deepExtend({}, pointOptions);\n                evalOptions(pointOptions, {\n                  value: value,\n                  category: category,\n                  index: categoryIx,\n                  series: series,\n                  dataItem: series.data[categoryIx]\n                }, state);\n              }\n\n              return pointOptions;\n            },\n            updateRange: function (data, fields) {\n              var axisName = fields.series.axis;\n              var value = data.value;\n              var axisRange = this.valueAxisRanges[axisName];\n\n              if (isFinite(value) && value !== null) {\n                axisRange = this.valueAxisRanges[axisName] = axisRange || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n                axisRange.min = Math.min(axisRange.min, value);\n                axisRange.max = Math.max(axisRange.max, value);\n              }\n            },\n            seriesValueAxis: function (series) {\n              var plotArea = this.plotArea;\n              var axisName = series.axis;\n              var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n              if (!axis) {\n                throw new Error(\"Unable to locate value axis with name \" + axisName);\n              }\n\n              return axis;\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              var categorySlots = this.categorySlots = [];\n              var chartPoints = this.points;\n              var categoryAxis = this.categoryAxis;\n              var pointIx = 0;\n              this.traverseDataPoints(function (data, fields) {\n                var categoryIx = fields.categoryIx;\n                var currentSeries = fields.series;\n                var valueAxis = this$1.seriesValueAxis(currentSeries);\n                var point = chartPoints[pointIx++];\n                var categorySlot = categorySlots[categoryIx];\n\n                if (!categorySlot) {\n                  categorySlots[categoryIx] = categorySlot = this$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n                }\n\n                if (point) {\n                  var plotRange = this$1.plotRange(point, valueAxis.startValue());\n                  var valueSlot = this$1.valueSlot(valueAxis, plotRange);\n\n                  if (valueSlot) {\n                    var pointSlot = this$1.pointSlot(categorySlot, valueSlot);\n                    point.aboveAxis = this$1.aboveAxis(point, valueAxis);\n                    point.stackValue = plotRange[1];\n\n                    if (this$1.options.isStacked100) {\n                      point.percentage = this$1.plotValue(point);\n                    }\n\n                    this$1.reflowPoint(point, pointSlot);\n                  } else {\n                    point.visible = false;\n                  }\n                }\n              });\n              this.reflowCategories(categorySlots);\n\n              if (!this.options.clip && this.options.limitPoints && this.points.length) {\n                this.limitPoints();\n              }\n\n              this.box = targetBox;\n            },\n            valueSlot: function (valueAxis, plotRange) {\n              return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n            },\n            limitPoints: function () {\n              var this$1 = this;\n              var categoryPoints = this.categoryPoints;\n              var points = categoryPoints[0].concat(last(categoryPoints));\n\n              for (var idx = 0; idx < points.length; idx++) {\n                if (points[idx]) {\n                  this$1.limitPoint(points[idx]);\n                }\n              }\n            },\n            limitPoint: function (point) {\n              var limittedSlot = this.categoryAxis.limitSlot(point.box);\n\n              if (!limittedSlot.equals(point.box)) {\n                point.reflow(limittedSlot);\n              }\n            },\n            aboveAxis: function (point, valueAxis) {\n              var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n              var value = point.value;\n              return valueAxis.options.reverse ? value < axisCrossingValue : value >= axisCrossingValue;\n            },\n            categoryAxisCrossingValue: function (valueAxis) {\n              var categoryAxis = this.categoryAxis;\n              var options = valueAxis.options;\n              var crossingValues = [].concat(options.axisCrossingValues || options.axisCrossingValue);\n              return crossingValues[categoryAxis.axisIndex || 0] || 0;\n            },\n            reflowPoint: function (point, pointSlot) {\n              point.reflow(pointSlot);\n            },\n            reflowCategories: function () {},\n            pointSlot: function (categorySlot, valueSlot) {\n              var options = this.options;\n              var invertAxes = options.invertAxes;\n              var slotX = invertAxes ? valueSlot : categorySlot;\n              var slotY = invertAxes ? categorySlot : valueSlot;\n              return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n            },\n            categorySlot: function (categoryAxis, categoryIx) {\n              return categoryAxis.getSlot(categoryIx);\n            },\n            traverseDataPoints: function (callback) {\n              var this$1 = this;\n              var series = this.options.series;\n              var count = categoriesCount(series);\n              var seriesCount = series.length;\n\n              for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                this$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n              }\n\n              for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n                for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                  var currentSeries = series[seriesIx$1];\n                  var currentCategory = this$1.categoryAxis.categoryAt(categoryIx);\n\n                  var pointData = this$1._bindPoint(currentSeries, seriesIx$1, categoryIx);\n\n                  callback(pointData, {\n                    category: currentCategory,\n                    categoryIx: categoryIx,\n                    categoriesCount: count,\n                    series: currentSeries,\n                    seriesIx: seriesIx$1\n                  });\n                }\n              }\n\n              for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n                this$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n              }\n            },\n            _outOfRangeCallback: function (series, field, seriesIx, callback) {\n              var outOfRangePoint = series[field];\n\n              if (outOfRangePoint) {\n                var categoryIx = outOfRangePoint.categoryIx;\n\n                var pointData = this._bindPoint(series, seriesIx, categoryIx, outOfRangePoint.item);\n\n                callback(pointData, {\n                  category: outOfRangePoint.category,\n                  categoryIx: categoryIx,\n                  series: series,\n                  seriesIx: seriesIx,\n                  dataItem: outOfRangePoint.item\n                });\n              }\n            },\n            _bindPoint: function (series, seriesIx, categoryIx, item) {\n              if (!this._bindCache) {\n                this._bindCache = [];\n              }\n\n              var bindCache = this._bindCache[seriesIx];\n\n              if (!bindCache) {\n                bindCache = this._bindCache[seriesIx] = [];\n              }\n\n              var data = bindCache[categoryIx];\n\n              if (!data) {\n                data = bindCache[categoryIx] = SeriesBinder.current.bindPoint(series, categoryIx, item);\n              }\n\n              return data;\n            },\n            formatPointValue: function (point, format) {\n              if (point.value === null) {\n                return \"\";\n              }\n\n              return this.chartService.format.auto(format, point.value);\n            },\n            pointValue: function (data) {\n              return data.valueFields.value;\n            }\n          });\n          setDefaultOptions(CategoricalChart, {\n            series: [],\n            invertAxes: false,\n            isStacked: false,\n            clip: true,\n            limitPoints: true\n          });\n          var PointEventsMixin = {\n            click: function (chart, e) {\n              return chart.trigger(SERIES_CLICK, this.eventArgs(e));\n            },\n            hover: function (chart, e) {\n              return chart.trigger(SERIES_HOVER, this.eventArgs(e));\n            },\n            over: function (chart, e) {\n              return chart.trigger(SERIES_OVER, this.eventArgs(e));\n            },\n            out: function (chart, e) {\n              return chart.trigger(SERIES_LEAVE, this.eventArgs(e));\n            },\n            eventArgs: function (e) {\n              return {\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                category: this.category,\n                series: this.series,\n                dataItem: this.dataItem,\n                runningTotal: this.runningTotal,\n                total: this.total,\n                element: eventElement(e),\n                originalEvent: e,\n                point: this\n              };\n            }\n          };\n          var NoteMixin = {\n            createNote: function () {\n              var options = this.options.notes;\n              var text = this.noteText || options.label.text;\n\n              if (options.visible !== false && defined(text) && text !== null) {\n                this.note = new dataviz.Note({\n                  value: this.value,\n                  text: text,\n                  dataItem: this.dataItem,\n                  category: this.category,\n                  series: this.series\n                }, this.options.notes, this.owner.chartService);\n                this.append(this.note);\n              }\n            }\n          };\n          var LinePoint = ChartElement.extend({\n            init: function (value, options) {\n              ChartElement.fn.init.call(this);\n              this.value = value;\n              this.options = options;\n              this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n              this.tooltipTracking = true;\n            },\n            render: function () {\n              var ref = this.options;\n              var markers = ref.markers;\n              var labels = ref.labels;\n\n              if (this._rendered) {\n                return;\n              }\n\n              this._rendered = true;\n\n              if (markers.visible && markers.size) {\n                this.marker = this.createMarker();\n                this.append(this.marker);\n              }\n\n              if (labels.visible) {\n                var labelTemplate = getTemplate(labels);\n                var pointData = this.pointData();\n                var labelText = this.value;\n\n                if (labelTemplate) {\n                  labelText = labelTemplate(pointData);\n                } else if (labels.format) {\n                  labelText = this.formatValue(labels.format);\n                }\n\n                this.label = new TextBox(labelText, deepExtend({\n                  align: CENTER,\n                  vAlign: CENTER,\n                  margin: {\n                    left: 5,\n                    right: 5\n                  },\n                  zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                }, labels), pointData);\n                this.append(this.label);\n              }\n\n              this.createNote();\n\n              if (this.errorBar) {\n                this.append(this.errorBar);\n              }\n            },\n            markerBorder: function () {\n              var options = this.options.markers;\n              var background = options.background;\n              var border = deepExtend({\n                color: this.color\n              }, options.border);\n\n              if (!defined(border.color)) {\n                border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n              }\n\n              return border;\n            },\n            createVisual: function () {},\n            createMarker: function () {\n              var options = this.options.markers;\n              var marker = new ShapeElement({\n                type: options.type,\n                width: options.size,\n                height: options.size,\n                rotation: options.rotation,\n                background: options.background,\n                border: this.markerBorder(),\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n                animation: options.animation,\n                visual: options.visual\n              }, {\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                category: this.category\n              });\n              return marker;\n            },\n            markerBox: function () {\n              if (!this.marker) {\n                this.marker = this.createMarker();\n                this.marker.reflow(this._childBox);\n              }\n\n              return this.marker.box;\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              var ref = this;\n              var options = ref.options;\n              var aboveAxis = ref.aboveAxis;\n              var vertical = options.vertical;\n              this.render();\n              this.box = targetBox;\n              var childBox = targetBox.clone();\n\n              if (vertical) {\n                if (aboveAxis) {\n                  childBox.y1 -= childBox.height();\n                } else {\n                  childBox.y2 += childBox.height();\n                }\n              } else {\n                if (aboveAxis) {\n                  childBox.x1 += childBox.width();\n                } else {\n                  childBox.x2 -= childBox.width();\n                }\n              }\n\n              this._childBox = childBox;\n\n              if (this.marker) {\n                this.marker.reflow(childBox);\n              }\n\n              this.reflowLabel(childBox);\n\n              if (this.errorBars) {\n                for (var i = 0; i < this.errorBars.length; i++) {\n                  this$1.errorBars[i].reflow(childBox);\n                }\n              }\n\n              if (this.note) {\n                var noteTargetBox = this.markerBox();\n\n                if (!(options.markers.visible && options.markers.size)) {\n                  var center = noteTargetBox.center();\n                  noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n                }\n\n                this.note.reflow(noteTargetBox);\n              }\n            },\n            reflowLabel: function (box) {\n              var ref = this;\n              var options = ref.options;\n              var label = ref.label;\n              var anchor = options.labels.position;\n\n              if (label) {\n                anchor = anchor === ABOVE ? TOP : anchor;\n                anchor = anchor === BELOW ? BOTTOM : anchor;\n                label.reflow(box);\n                label.box.alignTo(this.markerBox(), anchor);\n                label.reflow(label.box);\n              }\n            },\n            createHighlight: function () {\n              var markers = this.options.highlight.markers;\n              var defaultColor = this.markerBorder().color;\n              var options = this.options.markers;\n              var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n              var shadow = new ShapeElement({\n                type: options.type,\n                width: size,\n                height: size,\n                rotation: options.rotation,\n                background: markers.color || defaultColor,\n                border: {\n                  color: markers.border.color,\n                  width: markers.border.width,\n                  opacity: valueOrDefault(markers.border.opacity, 1)\n                },\n                opacity: valueOrDefault(markers.opacity, 1)\n              });\n              shadow.reflow(this._childBox);\n              return shadow.getElement();\n            },\n            highlightVisual: function () {\n              return (this.marker || {}).visual;\n            },\n            highlightVisualArgs: function () {\n              var marker = this.marker;\n              var visual, rect;\n\n              if (marker) {\n                rect = marker.paddingBox.toRect();\n                visual = marker.visual;\n              } else {\n                var size = this.options.markers.size;\n                var halfSize = size / 2;\n                var center = this.box.center();\n                rect = new geometry.Rect([center.x - halfSize, center.y - halfSize], [size, size]);\n              }\n\n              return {\n                options: this.options,\n                rect: rect,\n                visual: visual\n              };\n            },\n            tooltipAnchor: function () {\n              var markerBox = this.markerBox();\n              var clipBox = this.owner.pane.clipBox();\n              var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n              if (showTooltip) {\n                var x = markerBox.x2 + TOOLTIP_OFFSET;\n                var horizontalAlign = LEFT;\n                var y, verticalAlign;\n\n                if (this.aboveAxis) {\n                  y = markerBox.y1;\n                  verticalAlign = BOTTOM;\n                } else {\n                  y = markerBox.y2;\n                  verticalAlign = TOP;\n                }\n\n                return {\n                  point: new Point(x, y),\n                  align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                  }\n                };\n              }\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            },\n            overlapsBox: function (box) {\n              var markerBox = this.markerBox();\n              return markerBox.overlaps(box);\n            },\n            unclipElements: function () {\n              if (this.label) {\n                this.label.options.noclip = true;\n              }\n\n              if (this.note) {\n                this.note.options.noclip = true;\n              }\n            },\n            pointData: function () {\n              return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                series: this.series\n              };\n            }\n          });\n          LinePoint.prototype.defaults = {\n            vertical: true,\n            markers: {\n              visible: true,\n              background: WHITE,\n              size: LINE_MARKER_SIZE,\n              type: CIRCLE,\n              border: {\n                width: 2\n              },\n              opacity: 1\n            },\n            labels: {\n              visible: false,\n              position: ABOVE,\n              margin: getSpacing(3),\n              padding: getSpacing(4),\n              animation: {\n                type: FADEIN,\n                delay: INITIAL_ANIMATION_DURATION\n              }\n            },\n            notes: {\n              label: {}\n            },\n            highlight: {\n              markers: {\n                border: {\n                  color: \"#fff\",\n                  width: 2\n                }\n              },\n              zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n            },\n            errorBars: {\n              line: {\n                width: 1\n              }\n            }\n          };\n          deepExtend(LinePoint.prototype, PointEventsMixin);\n          deepExtend(LinePoint.prototype, NoteMixin);\n          var LineSegment = ChartElement.extend({\n            init: function (linePoints, series, seriesIx) {\n              ChartElement.fn.init.call(this);\n              this.linePoints = linePoints;\n              this.series = series;\n              this.seriesIx = seriesIx;\n            },\n            points: function () {\n              return this.toGeometryPoints(this.linePoints);\n            },\n            toGeometryPoints: function (points) {\n              var result = [];\n\n              for (var i = 0, length = points.length; i < length; i++) {\n                if (points[i] && points[i].visible !== false) {\n                  result.push(points[i]._childBox.toRect().center());\n                }\n              }\n\n              return result;\n            },\n            createVisual: function () {\n              var this$1 = this;\n              var customVisual = this.series.visual;\n\n              if (customVisual) {\n                this.visual = customVisual({\n                  points: this.toGeometryPoints(this.linePoints),\n                  series: this.series,\n                  sender: this.getSender(),\n                  createVisual: function () {\n                    this$1.segmentVisual();\n                    return this$1.visual;\n                  }\n                });\n\n                if (this.visual && !defined(this.visual.options.zIndex)) {\n                  this.visual.options.zIndex = this.series.zIndex;\n                }\n              } else {\n                this.segmentVisual();\n              }\n            },\n            segmentVisual: function () {\n              var ref = this;\n              var options = ref.options;\n              var series = ref.series;\n              var color = series.color;\n              var defaults = series._defaults;\n\n              if (isFunction(color) && defaults) {\n                color = defaults.color;\n              }\n\n              var line = Path.fromPoints(this.points(), {\n                stroke: {\n                  color: color,\n                  width: series.width,\n                  opacity: series.opacity,\n                  dashType: series.dashType\n                },\n                zIndex: series.zIndex\n              });\n\n              if (options.closed) {\n                line.close();\n              }\n\n              this.visual = line;\n            },\n            aliasFor: function (e, coords) {\n              return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n            }\n          });\n          setDefaultOptions(LineSegment, {\n            closed: false\n          });\n          var StepLineMixin = {\n            calculateStepPoints: function (points) {\n              var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n              var ref = categoryAxis.options;\n              var justified = ref.justified;\n              var vertical = ref.vertical;\n              var reverse = ref.reverse;\n              var stepAxis = vertical ? X : Y;\n              var axis = vertical ? Y : X;\n              var stepDir = reverse ? 2 : 1;\n              var dir = stepDir;\n              var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n              var result = [previousPoint];\n\n              for (var idx = 1; idx < points.length; idx++) {\n                var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n                if (previousPoint[stepAxis] !== point[stepAxis]) {\n                  var stepPoint = new GeometryPoint();\n                  stepPoint[stepAxis] = previousPoint[stepAxis];\n                  stepPoint[axis] = point[axis];\n                  result.push(stepPoint, point);\n                }\n\n                previousPoint = point;\n              }\n\n              if (!justified) {\n                result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n              } else if (previousPoint !== last(result)) {\n                result.push(previousPoint);\n              }\n\n              return result;\n            }\n          };\n\n          function toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n            var box = lintPoint.box;\n            var result = new GeometryPoint();\n            result[stepAxis] = box[stepAxis + stepDir];\n            result[axis] = box[axis + dir];\n            return result;\n          }\n\n          var StepLineSegment = LineSegment.extend({\n            points: function () {\n              return this.calculateStepPoints(this.linePoints);\n            }\n          });\n          deepExtend(StepLineSegment.prototype, StepLineMixin);\n          var SplineSegment = LineSegment.extend({\n            segmentVisual: function () {\n              var series = this.series;\n              var defaults = series._defaults;\n              var color = series.color;\n\n              if (isFunction(color) && defaults) {\n                color = defaults.color;\n              }\n\n              var curveProcessor = new CurveProcessor(this.options.closed);\n              var segments = curveProcessor.process(this.points());\n              var curve = new Path({\n                stroke: {\n                  color: color,\n                  width: series.width,\n                  opacity: series.opacity,\n                  dashType: series.dashType\n                },\n                zIndex: series.zIndex\n              });\n              curve.segments.push.apply(curve.segments, segments);\n              this.visual = curve;\n            }\n          });\n          var LineChartMixin = {\n            renderSegments: function () {\n              var this$1 = this;\n              var ref = this;\n              var options = ref.options;\n              var seriesPoints = ref.seriesPoints;\n              var series = options.series;\n              var seriesCount = seriesPoints.length;\n              var lastSegment;\n              this._segments = [];\n\n              for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var sortedPoints = this$1.sortPoints(seriesPoints[seriesIx]);\n                var pointCount = sortedPoints.length;\n                var linePoints = [];\n\n                for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                  var point = sortedPoints[pointIx];\n\n                  if (point) {\n                    linePoints.push(point);\n                  } else if (this$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                    if (linePoints.length > 1) {\n                      lastSegment = this$1.createSegment(linePoints, currentSeries, seriesIx, lastSegment);\n\n                      this$1._addSegment(lastSegment);\n                    }\n\n                    linePoints = [];\n                  }\n                }\n\n                if (linePoints.length > 1) {\n                  lastSegment = this$1.createSegment(linePoints, currentSeries, seriesIx, lastSegment);\n\n                  this$1._addSegment(lastSegment);\n                }\n              }\n\n              this.children.unshift.apply(this.children, this._segments);\n            },\n            _addSegment: function (segment) {\n              this._segments.push(segment);\n\n              segment.parent = this;\n            },\n            sortPoints: function (points) {\n              return points;\n            },\n            seriesMissingValues: function (series) {\n              var missingValues = series.missingValues;\n              var assumeZero = !missingValues && this.options.isStacked;\n              return assumeZero ? ZERO : missingValues || INTERPOLATE;\n            },\n            getNearestPoint: function (x, y, seriesIx) {\n              var target = new Point(x, y);\n              var allPoints = this.seriesPoints[seriesIx];\n              var nearestPointDistance = MAX_VALUE;\n              var nearestPoint;\n\n              for (var i = 0; i < allPoints.length; i++) {\n                var point = allPoints[i];\n\n                if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                  var pointBox = point.box;\n                  var pointDistance = pointBox.center().distanceTo(target);\n\n                  if (pointDistance < nearestPointDistance) {\n                    nearestPoint = point;\n                    nearestPointDistance = pointDistance;\n                  }\n                }\n              }\n\n              return nearestPoint;\n            }\n          };\n          var ClipAnimation = Animation.extend({\n            setup: function () {\n              this._setEnd(this.options.box.x1);\n            },\n            step: function (pos) {\n              var box = this.options.box;\n\n              this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n            },\n            _setEnd: function (x) {\n              var element = this.element;\n              var segments = element.segments;\n              var topRight = segments[1].anchor();\n              var bottomRight = segments[2].anchor();\n              element.suspend();\n              topRight.setX(x);\n              element.resume();\n              bottomRight.setX(x);\n            }\n          });\n          setDefaultOptions(ClipAnimation, {\n            duration: INITIAL_ANIMATION_DURATION\n          });\n          AnimationFactory.current.register(\"clip\", ClipAnimation);\n\n          function anyHasZIndex(elements) {\n            for (var idx = 0; idx < elements.length; idx++) {\n              if (defined(elements[idx].zIndex)) {\n                return true;\n              }\n            }\n          }\n\n          var ClipAnimationMixin = {\n            createAnimation: function () {\n              var root = this.getRoot();\n\n              if (root && (root.options || {}).transitions !== false) {\n                var box = root.size();\n                var clipPath = Path.fromRect(box.toRect());\n                this.visual.clip(clipPath);\n                this.animation = new ClipAnimation(clipPath, {\n                  box: box\n                });\n\n                if (anyHasZIndex(this.options.series)) {\n                  this._setChildrenAnimation(clipPath);\n                }\n              }\n            },\n            _setChildrenAnimation: function (clipPath) {\n              var points = this.animationPoints();\n\n              for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n\n                if (point && point.visual && defined(point.visual.options.zIndex)) {\n                  point.visual.clip(clipPath);\n                }\n              }\n            }\n          };\n          var LineChart = CategoricalChart.extend({\n            render: function () {\n              CategoricalChart.fn.render.call(this);\n              this.updateStackRange();\n              this.renderSegments();\n            },\n            pointType: function () {\n              return LinePoint;\n            },\n            createPoint: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var missingValues = this.seriesMissingValues(series);\n              var value = data.valueFields.value;\n\n              if (!defined(value) || value === null) {\n                if (missingValues === ZERO) {\n                  value = 0;\n                } else {\n                  return null;\n                }\n              }\n\n              var pointOptions = this.pointOptions(series, seriesIx);\n              pointOptions = this.evalPointOptions(pointOptions, value, category, categoryIx, series, seriesIx);\n              var color = data.fields.color || series.color;\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              }\n\n              var point = new LinePoint(value, pointOptions);\n              point.color = color;\n              this.append(point);\n              return point;\n            },\n            plotRange: function (point) {\n              var this$1 = this;\n              var plotValue = this.plotValue(point);\n\n              if (this.options.isStacked) {\n                var categoryIx = point.categoryIx;\n                var categoryPoints = this.categoryPoints[categoryIx];\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                  var other = categoryPoints[i];\n\n                  if (point === other) {\n                    break;\n                  }\n\n                  plotValue += this$1.plotValue(other);\n\n                  if (this$1.options.isStacked100) {\n                    plotValue = Math.min(plotValue, 1);\n                  }\n                }\n              }\n\n              return [plotValue, plotValue];\n            },\n            createSegment: function (linePoints, currentSeries, seriesIx) {\n              var style = currentSeries.style;\n              var pointType;\n\n              if (style === STEP) {\n                pointType = StepLineSegment;\n              } else if (style === SMOOTH) {\n                pointType = SplineSegment;\n              } else {\n                pointType = LineSegment;\n              }\n\n              return new pointType(linePoints, currentSeries, seriesIx);\n            },\n            animationPoints: function () {\n              var points = this.points;\n              var result = [];\n\n              for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n              }\n\n              return result.concat(this._segments);\n            },\n            supportsPointInactiveOpacity: function () {\n              return false;\n            }\n          });\n          deepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n          var AreaSegment = LineSegment.extend({\n            init: function (linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n              LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n              this.prevSegment = prevSegment;\n              this.stackPoints = stackPoints;\n            },\n            createVisual: function () {\n              var series = this.series;\n              var defaults = series._defaults;\n              var lineOptions = series.line || {};\n              var color = series.color;\n\n              if (isFunction(color) && defaults) {\n                color = defaults.color;\n              }\n\n              this.visual = new Group({\n                zIndex: series.zIndex\n              });\n              this.createFill({\n                fill: {\n                  color: color,\n                  opacity: series.opacity\n                },\n                stroke: null\n              });\n\n              if (lineOptions.width > 0 && lineOptions.visible !== false) {\n                this.createStroke({\n                  stroke: deepExtend({\n                    color: color,\n                    opacity: series.opacity,\n                    lineCap: \"butt\"\n                  }, lineOptions)\n                });\n              }\n            },\n            strokeSegments: function () {\n              var segments = this._strokeSegments;\n\n              if (!segments) {\n                segments = this._strokeSegments = this.createStrokeSegments();\n              }\n\n              return segments;\n            },\n            createStrokeSegments: function () {\n              return this.segmentsFromPoints(this.points());\n            },\n            stackSegments: function () {\n              if (this.prevSegment) {\n                return this.prevSegment.createStackSegments(this.stackPoints);\n              }\n\n              return this.createStackSegments(this.stackPoints);\n            },\n            createStackSegments: function (stackPoints) {\n              return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n            },\n            segmentsFromPoints: function (points) {\n              return points.map(function (point) {\n                return new geometry.Segment(point);\n              });\n            },\n            createStroke: function (style) {\n              var stroke = new Path(style);\n              stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n              this.visual.append(stroke);\n            },\n            hasStackSegment: function () {\n              return this.prevSegment || this.stackPoints && this.stackPoints.length;\n            },\n            createFill: function (style) {\n              var strokeSegments = this.strokeSegments();\n              var fillSegments = strokeSegments.slice(0);\n              var hasStackSegments = this.hasStackSegment();\n\n              if (hasStackSegments) {\n                var stackSegments = this.stackSegments();\n                append(fillSegments, stackSegments);\n              }\n\n              var fill = new Path(style);\n              fill.segments.push.apply(fill.segments, fillSegments);\n\n              if (!hasStackSegments && strokeSegments.length > 1) {\n                this.fillToAxes(fill);\n              }\n\n              this.visual.append(fill);\n            },\n            fillToAxes: function (fillPath) {\n              var chart = this.parent;\n              var invertAxes = chart.options.invertAxes;\n              var valueAxis = chart.seriesValueAxis(this.series);\n              var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n              var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n              var segments = this.strokeSegments();\n              var firstPoint = segments[0].anchor();\n              var lastPoint = last(segments).anchor();\n              var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n              if (invertAxes) {\n                fillPath.lineTo(end, lastPoint.y).lineTo(end, firstPoint.y);\n              } else {\n                fillPath.lineTo(lastPoint.x, end).lineTo(firstPoint.x, end);\n              }\n            }\n          });\n          var StepAreaSegment = AreaSegment.extend({\n            createStrokeSegments: function () {\n              return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n            },\n            createStackSegments: function (stackPoints) {\n              return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n            }\n          });\n          deepExtend(StepAreaSegment.prototype, StepLineMixin);\n          var SplineAreaSegment = AreaSegment.extend({\n            createStrokeSegments: function () {\n              var curveProcessor = new CurveProcessor(this.options.closed);\n              var linePoints = this.points();\n              return curveProcessor.process(linePoints);\n            },\n            createStackSegments: function () {\n              var strokeSegments = this.strokeSegments();\n              var stackSegments = [];\n\n              for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n                var segment = strokeSegments[idx];\n                stackSegments.push(new geometry.Segment(segment.anchor(), segment.controlOut(), segment.controlIn()));\n              }\n\n              return stackSegments;\n            }\n          });\n          var AreaChart = LineChart.extend({\n            createSegment: function (linePoints, currentSeries, seriesIx, prevSegment) {\n              var isStacked = this.options.isStacked;\n              var style = (currentSeries.line || {}).style;\n              var previousSegment;\n              var stackPoints;\n\n              if (isStacked && seriesIx > 0 && prevSegment) {\n                var missingValues = this.seriesMissingValues(currentSeries);\n\n                if (missingValues !== \"gap\") {\n                  stackPoints = prevSegment.linePoints;\n                  previousSegment = prevSegment;\n                } else {\n                  stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n                }\n              }\n\n              var pointType;\n\n              if (style === STEP) {\n                pointType = StepAreaSegment;\n              } else if (style === SMOOTH) {\n                pointType = SplineAreaSegment;\n              } else {\n                pointType = AreaSegment;\n              }\n\n              return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              LineChart.fn.reflow.call(this, targetBox);\n              var stackPoints = this._stackPoints;\n\n              if (stackPoints) {\n                for (var idx = 0; idx < stackPoints.length; idx++) {\n                  var stackPoint = stackPoints[idx];\n                  var pointSlot = this$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                  stackPoint.reflow(pointSlot);\n                }\n              }\n            },\n            _gapStackPoints: function (linePoints, seriesIx, style) {\n              var this$1 = this;\n              var seriesPoints = this.seriesPoints;\n              var startIdx = linePoints[0].categoryIx;\n              var length = linePoints.length;\n\n              if (startIdx < 0) {\n                startIdx = 0;\n                length--;\n              }\n\n              var endIdx = startIdx + length;\n              var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n              var stackPoints = [];\n              this._stackPoints = this._stackPoints || [];\n\n              for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n                var pointIx = categoryIx + pointOffset;\n                var currentSeriesIx = seriesIx;\n                var point = void 0;\n\n                do {\n                  currentSeriesIx--;\n                  point = seriesPoints[currentSeriesIx][pointIx];\n                } while (currentSeriesIx > 0 && !point);\n\n                if (point) {\n                  if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                    stackPoints.push(this$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                  }\n\n                  stackPoints.push(point);\n\n                  if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                    stackPoints.push(this$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                  }\n                } else {\n                  var gapStackPoint = this$1._createGapStackPoint(categoryIx);\n\n                  this$1._stackPoints.push(gapStackPoint);\n\n                  stackPoints.push(gapStackPoint);\n                }\n              }\n\n              return stackPoints;\n            },\n            _previousSegmentPoint: function (categoryIx, pointIx, segmentIx, seriesIdx) {\n              var seriesPoints = this.seriesPoints;\n              var index = seriesIdx;\n              var point;\n\n              while (index > 0 && !point) {\n                index--;\n                point = seriesPoints[index][segmentIx];\n              }\n\n              if (!point) {\n                point = this._createGapStackPoint(categoryIx);\n\n                this._stackPoints.push(point);\n              } else {\n                point = seriesPoints[index][pointIx];\n              }\n\n              return point;\n            },\n            _createGapStackPoint: function (categoryIx) {\n              var options = this.pointOptions({}, 0);\n              var point = new LinePoint(0, options);\n              point.categoryIx = categoryIx;\n              point.series = {};\n              return point;\n            },\n            seriesMissingValues: function (series) {\n              return series.missingValues || ZERO;\n            },\n            supportsPointInactiveOpacity: function () {\n              return false;\n            }\n          });\n          var AxisGroupRangeTracker = Class.extend({\n            init: function () {\n              this.axisRanges = {};\n            },\n            update: function (chartAxisRanges) {\n              var axisRanges = this.axisRanges;\n\n              for (var axisName in chartAxisRanges) {\n                var chartRange = chartAxisRanges[axisName];\n                var range = axisRanges[axisName];\n                axisRanges[axisName] = range = range || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n                range.min = Math.min(range.min, chartRange.min);\n                range.max = Math.max(range.max, chartRange.max);\n              }\n            },\n            reset: function (axisName) {\n              this.axisRanges[axisName] = undefined;\n            },\n            query: function (axisName) {\n              return this.axisRanges[axisName];\n            }\n          });\n          var BarLabel = ChartElement.extend({\n            init: function (content, options, pointData) {\n              ChartElement.fn.init.call(this, options);\n              this.textBox = new TextBox(content, this.options, pointData);\n              this.append(this.textBox);\n            },\n            createVisual: function () {\n              this.textBox.options.noclip = this.options.noclip;\n            },\n            reflow: function (targetBox) {\n              var options = this.options;\n              var vertical = options.vertical;\n              var aboveAxis = options.aboveAxis;\n              var text = this.children[0];\n              var textOptions = text.options;\n              var box = text.box;\n              var padding = text.options.padding;\n              var labelBox = targetBox;\n              textOptions.align = vertical ? CENTER : LEFT;\n              textOptions.vAlign = vertical ? TOP : CENTER;\n\n              if (options.position === INSIDE_END) {\n                if (vertical) {\n                  textOptions.vAlign = TOP;\n\n                  if (!aboveAxis && box.height() < targetBox.height()) {\n                    textOptions.vAlign = BOTTOM;\n                  }\n                } else {\n                  textOptions.align = aboveAxis ? RIGHT : LEFT;\n                }\n              } else if (options.position === CENTER) {\n                textOptions.vAlign = CENTER;\n                textOptions.align = CENTER;\n              } else if (options.position === INSIDE_BASE) {\n                if (vertical) {\n                  textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n                } else {\n                  textOptions.align = aboveAxis ? LEFT : RIGHT;\n                }\n              } else if (options.position === OUTSIDE_END) {\n                if (vertical) {\n                  if (aboveAxis) {\n                    labelBox = new Box(targetBox.x1, targetBox.y1 - box.height(), targetBox.x2, targetBox.y1);\n                  } else {\n                    labelBox = new Box(targetBox.x1, targetBox.y2, targetBox.x2, targetBox.y2 + box.height());\n                  }\n                } else {\n                  textOptions.align = CENTER;\n\n                  if (aboveAxis) {\n                    labelBox = new Box(targetBox.x2, targetBox.y1, targetBox.x2 + box.width(), targetBox.y2);\n                  } else {\n                    labelBox = new Box(targetBox.x1 - box.width(), targetBox.y1, targetBox.x1, targetBox.y2);\n                  }\n                }\n              }\n\n              if (!options.rotation) {\n                if (vertical) {\n                  padding.left = padding.right = (labelBox.width() - text.contentBox.width()) / 2;\n                } else {\n                  padding.top = padding.bottom = (labelBox.height() - text.contentBox.height()) / 2;\n                }\n              }\n\n              text.reflow(labelBox);\n            },\n            alignToClipBox: function (clipBox) {\n              var vertical = this.options.vertical;\n              var field = vertical ? Y : X;\n              var start = field + \"1\";\n              var end = field + \"2\";\n              var text = this.children[0];\n              var parentBox = this.parent.box;\n\n              if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n                var targetBox = text.paddingBox.clone();\n                targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n                targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n                this.reflow(targetBox);\n              }\n            }\n          });\n          setDefaultOptions(BarLabel, {\n            position: OUTSIDE_END,\n            margin: getSpacing(3),\n            padding: getSpacing(4),\n            color: BLACK,\n            background: \"\",\n            border: {\n              width: 1,\n              color: \"\"\n            },\n            aboveAxis: true,\n            vertical: false,\n            animation: {\n              type: FADEIN,\n              delay: INITIAL_ANIMATION_DURATION\n            },\n            zIndex: 2\n          });\n\n          function hasGradientOverlay(options) {\n            var overlay = options.overlay;\n            return overlay && overlay.gradient && overlay.gradient !== \"none\";\n          }\n\n          var BAR_ALIGN_MIN_WIDTH = 6;\n          var Bar = ChartElement.extend({\n            init: function (value, options) {\n              ChartElement.fn.init.call(this);\n              this.options = options;\n              this.color = options.color || WHITE;\n              this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n              this.value = value;\n            },\n            render: function () {\n              if (this._rendered) {\n                return;\n              }\n\n              this._rendered = true;\n              this.createLabel();\n              this.createNote();\n\n              if (this.errorBar) {\n                this.append(this.errorBar);\n              }\n            },\n            createLabel: function () {\n              var options = this.options;\n              var labels = options.labels;\n\n              if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n\n                if (labelTemplate) {\n                  labelText = labelTemplate(pointData);\n                } else {\n                  labelText = this.formatValue(labels.format);\n                }\n\n                this.label = new BarLabel(labelText, deepExtend({\n                  vertical: options.vertical\n                }, labels), pointData);\n                this.append(this.label);\n              }\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              this.render();\n              var label = this.label;\n              this.box = targetBox;\n\n              if (label) {\n                label.options.aboveAxis = this.aboveAxis;\n                label.reflow(targetBox);\n              }\n\n              if (this.note) {\n                this.note.reflow(targetBox);\n              }\n\n              if (this.errorBars) {\n                for (var i = 0; i < this.errorBars.length; i++) {\n                  this$1.errorBars[i].reflow(targetBox);\n                }\n              }\n            },\n            createVisual: function () {\n              var this$1 = this;\n              var ref = this;\n              var box = ref.box;\n              var options = ref.options;\n              var customVisual = options.visual;\n\n              if (this.visible !== false) {\n                ChartElement.fn.createVisual.call(this);\n\n                if (customVisual) {\n                  var visual = this.rectVisual = customVisual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    sender: this.getSender(),\n                    series: this.series,\n                    percentage: this.percentage,\n                    stackValue: this.stackValue,\n                    runningTotal: this.runningTotal,\n                    total: this.total,\n                    rect: box.toRect(),\n                    createVisual: function () {\n                      var group = new Group();\n                      this$1.createRect(group);\n                      return group;\n                    },\n                    options: options\n                  });\n\n                  if (visual) {\n                    this.visual.append(visual);\n                  }\n                } else if (box.width() > 0 && box.height() > 0) {\n                  this.createRect(this.visual);\n                }\n              }\n            },\n            createRect: function (visual) {\n              var options = this.options;\n              var border = options.border;\n              var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n              var rect = this.box.toRect();\n              rect.size.width = Math.round(rect.size.width);\n              var path = this.rectVisual = Path.fromRect(rect, {\n                fill: {\n                  color: this.color,\n                  opacity: options.opacity\n                },\n                stroke: {\n                  color: this.getBorderColor(),\n                  width: border.width,\n                  opacity: strokeOpacity,\n                  dashType: border.dashType\n                }\n              });\n              var width = this.box.width();\n              var height = this.box.height();\n              var size = options.vertical ? width : height;\n\n              if (size > BAR_ALIGN_MIN_WIDTH) {\n                alignPathToPixel(path); // Fixes lineJoin issue in firefox when the joined lines are parallel\n\n                if (width < 1 || height < 1) {\n                  path.options.stroke.lineJoin = \"round\";\n                }\n              }\n\n              visual.append(path);\n\n              if (hasGradientOverlay(options)) {\n                var overlay = this.createGradientOverlay(path, {\n                  baseColor: this.color\n                }, deepExtend({\n                  end: !options.vertical ? [0, 1] : undefined\n                }, options.overlay));\n                visual.append(overlay);\n              }\n            },\n            createHighlight: function (style) {\n              var highlight = Path.fromRect(this.box.toRect(), style);\n              return alignPathToPixel(highlight);\n            },\n            highlightVisual: function () {\n              return this.rectVisual;\n            },\n            highlightVisualArgs: function () {\n              return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this.rectVisual\n              };\n            },\n            getBorderColor: function () {\n              var color = this.color;\n              var border = this.options.border;\n              var brightness = border._brightness || BORDER_BRIGHTNESS;\n              var borderColor = border.color;\n\n              if (!defined(borderColor)) {\n                borderColor = new Color(color).brightness(brightness).toHex();\n              }\n\n              return borderColor;\n            },\n            tooltipAnchor: function () {\n              var ref = this;\n              var options = ref.options;\n              var box = ref.box;\n              var aboveAxis = ref.aboveAxis;\n              var clipBox = this.owner.pane.clipBox() || box;\n              var horizontalAlign = LEFT;\n              var verticalAlign = TOP;\n              var x, y;\n\n              if (options.vertical) {\n                x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n\n                if (aboveAxis) {\n                  y = Math.max(box.y1, clipBox.y1);\n                } else {\n                  y = Math.min(box.y2, clipBox.y2);\n                  verticalAlign = BOTTOM;\n                }\n              } else {\n                var x1 = Math.max(box.x1, clipBox.x1);\n                var x2 = Math.min(box.x2, clipBox.x2);\n\n                if (options.isStacked) {\n                  verticalAlign = BOTTOM;\n\n                  if (aboveAxis) {\n                    horizontalAlign = RIGHT;\n                    x = x2;\n                  } else {\n                    x = x1;\n                  }\n\n                  y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n                } else {\n                  if (aboveAxis) {\n                    x = x2 + TOOLTIP_OFFSET;\n                  } else {\n                    x = x1 - TOOLTIP_OFFSET;\n                    horizontalAlign = RIGHT;\n                  }\n\n                  y = Math.max(box.y1, clipBox.y1);\n                }\n              }\n\n              return {\n                point: new Point(x, y),\n                align: {\n                  horizontal: horizontalAlign,\n                  vertical: verticalAlign\n                }\n              };\n            },\n            overlapsBox: function (box) {\n              return this.box.overlaps(box);\n            },\n            pointData: function () {\n              return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                runningTotal: this.runningTotal,\n                total: this.total,\n                series: this.series\n              };\n            }\n          });\n          deepExtend(Bar.prototype, PointEventsMixin);\n          deepExtend(Bar.prototype, NoteMixin);\n          Bar.prototype.defaults = {\n            border: {\n              width: 1\n            },\n            vertical: true,\n            overlay: {\n              gradient: \"glass\"\n            },\n            labels: {\n              visible: false,\n              format: \"{0}\"\n            },\n            opacity: 1,\n            notes: {\n              label: {}\n            }\n          };\n\n          function forEach(elements, callback) {\n            elements.forEach(callback);\n          }\n\n          function forEachReverse(elements, callback) {\n            var length = elements.length;\n\n            for (var idx = length - 1; idx >= 0; idx--) {\n              callback(elements[idx], idx - length - 1);\n            }\n          }\n\n          var ClusterLayout = ChartElement.extend({\n            init: function (options) {\n              ChartElement.fn.init.call(this, options);\n              this.forEach = options.rtl ? forEachReverse : forEach;\n            },\n            reflow: function (box) {\n              var ref = this.options;\n              var vertical = ref.vertical;\n              var gap = ref.gap;\n              var spacing = ref.spacing;\n              var children = this.children;\n              var count = children.length;\n              var axis = vertical ? Y : X;\n              var slots = count + gap + spacing * (count - 1);\n              var slotSize = (vertical ? box.height() : box.width()) / slots;\n              var position = box[axis + 1] + slotSize * (gap / 2);\n              this.forEach(children, function (child, idx) {\n                var childBox = (child.box || box).clone();\n                childBox[axis + 1] = position;\n                childBox[axis + 2] = position + slotSize;\n                child.reflow(childBox);\n\n                if (idx < count - 1) {\n                  position += slotSize * spacing;\n                }\n\n                position += slotSize;\n              });\n            }\n          });\n          setDefaultOptions(ClusterLayout, {\n            vertical: false,\n            gap: 0,\n            spacing: 0\n          });\n          var StackWrap = ChartElement.extend({\n            reflow: function (targetBox) {\n              var this$1 = this;\n              var positionAxis = this.options.vertical ? X : Y;\n              var children = this.children;\n              var childrenCount = children.length;\n              var box = this.box = new Box();\n\n              for (var i = 0; i < childrenCount; i++) {\n                var currentChild = children[i];\n\n                if (currentChild.visible !== false) {\n                  var childBox = currentChild.box.clone();\n                  childBox.snapTo(targetBox, positionAxis);\n\n                  if (i === 0) {\n                    box = this$1.box = childBox.clone();\n                  }\n\n                  currentChild.reflow(childBox);\n                  box.wrap(childBox);\n                }\n              }\n            }\n          });\n          setDefaultOptions(StackWrap, {\n            vertical: true\n          });\n          var BarChart = CategoricalChart.extend({\n            render: function () {\n              CategoricalChart.fn.render.call(this);\n              this.updateStackRange();\n            },\n            pointType: function () {\n              return Bar;\n            },\n            clusterType: function () {\n              return ClusterLayout;\n            },\n            stackType: function () {\n              return StackWrap;\n            },\n            stackLimits: function (axisName, stackName) {\n              var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n              return limits;\n            },\n            createPoint: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var ref = this;\n              var options = ref.options;\n              var children = ref.children;\n              var isStacked = options.isStacked;\n              var value = this.pointValue(data);\n              var pointOptions = this.pointOptions(series, seriesIx);\n              var labelOptions = pointOptions.labels;\n\n              if (isStacked) {\n                if (labelOptions.position === OUTSIDE_END) {\n                  labelOptions.position = INSIDE_END;\n                }\n              }\n\n              pointOptions.isStacked = isStacked;\n              var color = data.fields.color || series.color;\n\n              if (value < 0 && pointOptions.negativeColor) {\n                color = pointOptions.negativeColor;\n              }\n\n              pointOptions = this.evalPointOptions(pointOptions, value, category, categoryIx, series, seriesIx);\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              }\n\n              var pointType = this.pointType();\n              var point = new pointType(value, pointOptions);\n              point.color = color;\n              var cluster = children[categoryIx];\n\n              if (!cluster) {\n                var clusterType = this.clusterType();\n                cluster = new clusterType({\n                  vertical: options.invertAxes,\n                  gap: options.gap,\n                  spacing: options.spacing,\n                  rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n              }\n\n              if (isStacked) {\n                var stackWrap = this.getStackWrap(series, cluster);\n                stackWrap.append(point);\n              } else {\n                cluster.append(point);\n              }\n\n              return point;\n            },\n            getStackWrap: function (series, cluster) {\n              var stack = series.stack;\n              var stackGroup = stack ? stack.group || stack : stack;\n              var wraps = cluster.children;\n              var stackWrap;\n\n              if (typeof stackGroup === datavizConstants.STRING) {\n                for (var i = 0; i < wraps.length; i++) {\n                  if (wraps[i]._stackGroup === stackGroup) {\n                    stackWrap = wraps[i];\n                    break;\n                  }\n                }\n              } else {\n                stackWrap = wraps[0];\n              }\n\n              if (!stackWrap) {\n                var stackType = this.stackType();\n                stackWrap = new stackType({\n                  vertical: !this.options.invertAxes\n                });\n                stackWrap._stackGroup = stackGroup;\n                cluster.append(stackWrap);\n              }\n\n              return stackWrap;\n            },\n            categorySlot: function (categoryAxis, categoryIx, valueAxis) {\n              var options = this.options;\n              var categorySlot = categoryAxis.getSlot(categoryIx);\n              var startValue = valueAxis.startValue();\n\n              if (options.isStacked) {\n                var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n                var stackAxis = options.invertAxes ? X : Y;\n                categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n              }\n\n              return categorySlot;\n            },\n            reflowCategories: function (categorySlots) {\n              var children = this.children;\n              var childrenLength = children.length;\n\n              for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n              }\n            },\n            createAnimation: function () {\n              this._setAnimationOptions();\n\n              CategoricalChart.fn.createAnimation.call(this);\n\n              if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation();\n              }\n            },\n            _setChildrenAnimation: function () {\n              var this$1 = this;\n              var points = this.points;\n\n              for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                var pointVisual = point.visual;\n\n                if (pointVisual && defined(pointVisual.options.zIndex)) {\n                  point.options.animation = this$1.options.animation;\n                  point.createAnimation();\n                }\n              }\n            },\n            _setAnimationOptions: function () {\n              var options = this.options;\n              var animation = options.animation || {};\n              var origin;\n\n              if (options.isStacked) {\n                var valueAxis = this.seriesValueAxis(options.series[0]);\n                origin = valueAxis.getSlot(valueAxis.startValue());\n              } else {\n                origin = this.categoryAxis.getSlot(0);\n              }\n\n              animation.origin = new GeometryPoint(origin.x1, origin.y1);\n              animation.vertical = !options.invertAxes;\n            }\n          });\n          setDefaultOptions(BarChart, {\n            animation: {\n              type: BAR\n            }\n          });\n          var Candlestick = ChartElement.extend({\n            init: function (value, options) {\n              ChartElement.fn.init.call(this, options);\n              this.value = value;\n            },\n            reflow: function (box) {\n              var ref = this;\n              var options = ref.options;\n              var value = ref.value;\n              var chart = ref.owner;\n              var valueAxis = chart.seriesValueAxis(options);\n              var ocSlot = valueAxis.getSlot(value.open, value.close);\n              var lhSlot = valueAxis.getSlot(value.low, value.high);\n              ocSlot.x1 = lhSlot.x1 = box.x1;\n              ocSlot.x2 = lhSlot.x2 = box.x2;\n              this.realBody = ocSlot;\n              var mid = lhSlot.center().x;\n              var points = [];\n              points.push([[mid, lhSlot.y1], [mid, ocSlot.y1]]);\n              points.push([[mid, ocSlot.y2], [mid, lhSlot.y2]]);\n              this.lines = points;\n              this.box = lhSlot.clone().wrap(ocSlot);\n\n              if (!this._rendered) {\n                this._rendered = true;\n                this.createNote();\n              }\n\n              this.reflowNote();\n            },\n            reflowNote: function () {\n              if (this.note) {\n                this.note.reflow(this.box);\n              }\n            },\n            createVisual: function () {\n              ChartElement.fn.createVisual.call(this);\n              this._mainVisual = this.mainVisual(this.options);\n              this.visual.append(this._mainVisual);\n              this.createOverlay();\n            },\n            mainVisual: function (options) {\n              var group = new Group();\n              this.createBody(group, options);\n              this.createLines(group, options);\n              return group;\n            },\n            createBody: function (container, options) {\n              var body = Path.fromRect(this.realBody.toRect(), {\n                fill: {\n                  color: this.color,\n                  opacity: options.opacity\n                },\n                stroke: null\n              });\n\n              if (options.border.width > 0) {\n                body.options.set(\"stroke\", {\n                  color: this.getBorderColor(),\n                  width: options.border.width,\n                  dashType: options.border.dashType,\n                  opacity: valueOrDefault(options.border.opacity, options.opacity)\n                });\n              }\n\n              alignPathToPixel(body);\n              container.append(body);\n\n              if (hasGradientOverlay(options)) {\n                container.append(this.createGradientOverlay(body, {\n                  baseColor: this.color\n                }, deepExtend({\n                  end: !options.vertical ? [0, 1] : undefined\n                }, options.overlay)));\n              }\n            },\n            createLines: function (container, options) {\n              this.drawLines(container, options, this.lines, options.line);\n            },\n            drawLines: function (container, options, lines, lineOptions) {\n              if (!lines) {\n                return;\n              }\n\n              var lineStyle = {\n                stroke: {\n                  color: lineOptions.color || this.color,\n                  opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                  width: lineOptions.width,\n                  dashType: lineOptions.dashType,\n                  lineCap: \"butt\"\n                }\n              };\n\n              for (var i = 0; i < lines.length; i++) {\n                var line = Path.fromPoints(lines[i], lineStyle);\n                alignPathToPixel(line);\n                container.append(line);\n              }\n            },\n            getBorderColor: function () {\n              var border = this.options.border;\n              var borderColor = border.color;\n\n              if (!defined(borderColor)) {\n                borderColor = new Color(this.color).brightness(border._brightness).toHex();\n              }\n\n              return borderColor;\n            },\n            createOverlay: function () {\n              var overlay = Path.fromRect(this.box.toRect(), {\n                fill: {\n                  color: WHITE,\n                  opacity: 0\n                },\n                stroke: null\n              });\n              this.visual.append(overlay);\n            },\n            createHighlight: function () {\n              var highlight = this.options.highlight;\n              var normalColor = this.color;\n              this.color = highlight.color || this.color;\n              var overlay = this.mainVisual(deepExtend({}, this.options, {\n                line: {\n                  color: this.getBorderColor()\n                }\n              }, highlight));\n              this.color = normalColor;\n              return overlay;\n            },\n            highlightVisual: function () {\n              return this._mainVisual;\n            },\n            highlightVisualArgs: function () {\n              return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this._mainVisual\n              };\n            },\n            tooltipAnchor: function () {\n              var box = this.box;\n              var clipBox = this.owner.pane.clipBox() || box;\n              return {\n                point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n                align: {\n                  horizontal: LEFT,\n                  vertical: TOP\n                }\n              };\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            },\n            overlapsBox: function (box) {\n              return this.box.overlaps(box);\n            }\n          });\n          setDefaultOptions(Candlestick, {\n            vertical: true,\n            border: {\n              _brightness: 0.8\n            },\n            line: {\n              width: 2\n            },\n            overlay: {\n              gradient: \"glass\"\n            },\n            tooltip: {\n              format: \"<table>\" + \"<tr><th colspan='2'>{4:d}</th></tr>\" + \"<tr><td>Open:</td><td>{0:C}</td></tr>\" + \"<tr><td>High:</td><td>{1:C}</td></tr>\" + \"<tr><td>Low:</td><td>{2:C}</td></tr>\" + \"<tr><td>Close:</td><td>{3:C}</td></tr>\" + \"</table>\"\n            },\n            highlight: {\n              opacity: 1,\n              border: {\n                width: 1,\n                opacity: 1\n              },\n              line: {\n                width: 1,\n                opacity: 1\n              }\n            },\n            notes: {\n              visible: true,\n              label: {}\n            }\n          });\n          deepExtend(Candlestick.prototype, PointEventsMixin);\n          deepExtend(Candlestick.prototype, NoteMixin);\n\n          function areNumbers(values) {\n            return countNumbers(values) === values.length;\n          }\n\n          var CandlestickChart = CategoricalChart.extend({\n            reflowCategories: function (categorySlots) {\n              var children = this.children;\n              var childrenLength = children.length;\n\n              for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n              }\n            },\n            addValue: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var ref = this;\n              var children = ref.children;\n              var options = ref.options;\n              var value = data.valueFields;\n              var valueParts = this.splitValue(value);\n              var hasValue = areNumbers(valueParts);\n              var dataItem = series.data[categoryIx];\n              var categoryPoints = this.categoryPoints[categoryIx];\n              var point;\n\n              if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n              }\n\n              if (hasValue) {\n                point = this.createPoint(data, fields);\n              }\n\n              var cluster = children[categoryIx];\n\n              if (!cluster) {\n                cluster = new ClusterLayout({\n                  vertical: options.invertAxes,\n                  gap: options.gap,\n                  spacing: options.spacing,\n                  rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n              }\n\n              if (point) {\n                this.updateRange(value, fields);\n                cluster.append(point);\n                point.categoryIx = categoryIx;\n                point.category = category;\n                point.series = series;\n                point.seriesIx = seriesIx;\n                point.owner = this;\n                point.dataItem = dataItem;\n                point.noteText = data.fields.noteText;\n              }\n\n              this.points.push(point);\n              categoryPoints.push(point);\n            },\n            pointType: function () {\n              return Candlestick;\n            },\n            createPoint: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var pointType = this.pointType();\n              var value = data.valueFields;\n              var pointOptions = deepExtend({}, series);\n              var color = data.fields.color || series.color;\n              pointOptions = this.evalPointOptions(pointOptions, value, category, categoryIx, series, seriesIx);\n\n              if (series.type === CANDLESTICK) {\n                if (value.open > value.close) {\n                  color = data.fields.downColor || series.downColor || series.color;\n                }\n              }\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              }\n\n              pointOptions.vertical = !this.options.invertAxes;\n              var point = new pointType(value, pointOptions);\n              point.color = color;\n              return point;\n            },\n            splitValue: function (value) {\n              return [value.low, value.open, value.close, value.high];\n            },\n            updateRange: function (value, fields) {\n              var axisName = fields.series.axis;\n              var parts = this.splitValue(value);\n              var axisRange = this.valueAxisRanges[axisName];\n              axisRange = this.valueAxisRanges[axisName] = axisRange || {\n                min: MAX_VALUE,\n                max: MIN_VALUE\n              };\n              axisRange = this.valueAxisRanges[axisName] = {\n                min: Math.min.apply(Math, parts.concat([axisRange.min])),\n                max: Math.max.apply(Math, parts.concat([axisRange.max]))\n              };\n            },\n            formatPointValue: function (point, format) {\n              var value = point.value;\n              return this.chartService.format.auto(format, value.open, value.high, value.low, value.close, point.category);\n            },\n            animationPoints: function () {\n              return this.points;\n            }\n          });\n          deepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n          var BoxPlot = Candlestick.extend({\n            init: function (value, options) {\n              Candlestick.fn.init.call(this, value, options);\n              this.createNote();\n            },\n            reflow: function (box) {\n              var ref = this;\n              var options = ref.options;\n              var value = ref.value;\n              var chart = ref.owner;\n              var valueAxis = chart.seriesValueAxis(options);\n              var whiskerSlot, boxSlot;\n              this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n              this.realBody = boxSlot;\n              this.reflowBoxSlot(box);\n              this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n              this.reflowWhiskerSlot(box);\n              var medianSlot = valueAxis.getSlot(value.median);\n\n              if (value.mean) {\n                var meanSlot = valueAxis.getSlot(value.mean);\n                this.meanPoints = this.calcMeanPoints(box, meanSlot);\n              }\n\n              this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n              this.medianPoints = this.calcMedianPoints(box, medianSlot);\n              this.box = whiskerSlot.clone().wrap(boxSlot);\n              this.reflowNote();\n            },\n            reflowBoxSlot: function (box) {\n              this.boxSlot.x1 = box.x1;\n              this.boxSlot.x2 = box.x2;\n            },\n            reflowWhiskerSlot: function (box) {\n              this.whiskerSlot.x1 = box.x1;\n              this.whiskerSlot.x2 = box.x2;\n            },\n            calcMeanPoints: function (box, meanSlot) {\n              return [[[box.x1, meanSlot.y1], [box.x2, meanSlot.y1]]];\n            },\n            calcWhiskerPoints: function (boxSlot, whiskerSlot) {\n              var mid = whiskerSlot.center().x;\n              return [[[mid - 5, whiskerSlot.y1], [mid + 5, whiskerSlot.y1], [mid, whiskerSlot.y1], [mid, boxSlot.y1]], [[mid - 5, whiskerSlot.y2], [mid + 5, whiskerSlot.y2], [mid, whiskerSlot.y2], [mid, boxSlot.y2]]];\n            },\n            calcMedianPoints: function (box, medianSlot) {\n              return [[[box.x1, medianSlot.y1], [box.x2, medianSlot.y1]]];\n            },\n            renderOutliers: function (options) {\n              var this$1 = this;\n              var value = this.value;\n              var outliers = value.outliers || [];\n              var outerFence = Math.abs(value.q3 - value.q1) * 3;\n              var elements = [];\n              var markers = options.markers || {};\n\n              for (var i = 0; i < outliers.length; i++) {\n                var outlierValue = outliers[i];\n\n                if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                  markers = options.outliers;\n                } else {\n                  markers = options.extremes;\n                }\n\n                var markersBorder = deepExtend({}, markers.border);\n\n                if (!defined(markersBorder.color)) {\n                  if (defined(this$1.color)) {\n                    markersBorder.color = this$1.color;\n                  } else {\n                    markersBorder.color = new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                  }\n                }\n\n                var shape = new ShapeElement({\n                  type: markers.type,\n                  width: markers.size,\n                  height: markers.size,\n                  rotation: markers.rotation,\n                  background: markers.background,\n                  border: markersBorder,\n                  opacity: markers.opacity\n                });\n                shape.value = outlierValue;\n                elements.push(shape);\n              }\n\n              this.reflowOutliers(elements);\n              return elements;\n            },\n            reflowOutliers: function (outliers) {\n              var this$1 = this;\n              var valueAxis = this.owner.seriesValueAxis(this.options);\n              var center = this.box.center();\n\n              for (var i = 0; i < outliers.length; i++) {\n                var outlierValue = outliers[i].value;\n                var markerBox = valueAxis.getSlot(outlierValue);\n\n                if (this$1.options.vertical) {\n                  markerBox.move(center.x);\n                } else {\n                  markerBox.move(undefined, center.y);\n                }\n\n                this$1.box = this$1.box.wrap(markerBox);\n                outliers[i].reflow(markerBox);\n              }\n            },\n            mainVisual: function (options) {\n              var group = Candlestick.fn.mainVisual.call(this, options);\n              var outliers = this.renderOutliers(options);\n\n              for (var i = 0; i < outliers.length; i++) {\n                var element = outliers[i].getElement();\n\n                if (element) {\n                  group.append(element);\n                }\n              }\n\n              return group;\n            },\n            createLines: function (container, options) {\n              this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n              this.drawLines(container, options, this.medianPoints, options.median);\n              this.drawLines(container, options, this.meanPoints, options.mean);\n            },\n            getBorderColor: function () {\n              if ((this.options.border || {}).color) {\n                return this.options.border.color;\n              }\n\n              if (this.color) {\n                return this.color;\n              }\n\n              return Candlestick.fn.getBorderColor.call(this);\n            }\n          });\n          setDefaultOptions(BoxPlot, {\n            border: {\n              _brightness: 0.8\n            },\n            line: {\n              width: 2\n            },\n            median: {\n              color: \"#f6f6f6\"\n            },\n            mean: {\n              width: 2,\n              dashType: \"dash\",\n              color: \"#f6f6f6\"\n            },\n            overlay: {\n              gradient: \"glass\"\n            },\n            tooltip: {\n              format: \"<table>\" + \"<tr><th colspan='2'>{6:d}</th></tr>\" + \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" + \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" + \"<tr><td>Median:</td><td>{2:C}</td></tr>\" + \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" + \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" + \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" + \"</table>\"\n            },\n            highlight: {\n              opacity: 1,\n              border: {\n                width: 1,\n                opacity: 1\n              },\n              line: {\n                width: 1,\n                opacity: 1\n              }\n            },\n            notes: {\n              visible: true,\n              label: {}\n            },\n            outliers: {\n              visible: true,\n              size: LINE_MARKER_SIZE,\n              type: datavizConstants.CROSS,\n              background: WHITE,\n              border: {\n                width: 2,\n                opacity: 1\n              },\n              opacity: 0\n            },\n            extremes: {\n              visible: true,\n              size: LINE_MARKER_SIZE,\n              type: CIRCLE,\n              background: WHITE,\n              border: {\n                width: 2,\n                opacity: 1\n              },\n              opacity: 0\n            }\n          });\n          deepExtend(BoxPlot.prototype, PointEventsMixin);\n          var VerticalBoxPlot = BoxPlot.extend({\n            reflowBoxSlot: function (box) {\n              this.boxSlot.y1 = box.y1;\n              this.boxSlot.y2 = box.y2;\n            },\n            reflowWhiskerSlot: function (box) {\n              this.whiskerSlot.y1 = box.y1;\n              this.whiskerSlot.y2 = box.y2;\n            },\n            calcMeanPoints: function (box, meanSlot) {\n              return [[[meanSlot.x1, box.y1], [meanSlot.x1, box.y2]]];\n            },\n            calcWhiskerPoints: function (boxSlot, whiskerSlot) {\n              var mid = whiskerSlot.center().y;\n              return [[[whiskerSlot.x1, mid - 5], [whiskerSlot.x1, mid + 5], [whiskerSlot.x1, mid], [boxSlot.x1, mid]], [[whiskerSlot.x2, mid - 5], [whiskerSlot.x2, mid + 5], [whiskerSlot.x2, mid], [boxSlot.x2, mid]]];\n            },\n            calcMedianPoints: function (box, medianSlot) {\n              return [[[medianSlot.x1, box.y1], [medianSlot.x1, box.y2]]];\n            }\n          });\n          var BoxPlotChart = CandlestickChart.extend({\n            addValue: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var ref = this;\n              var children = ref.children;\n              var options = ref.options;\n              var value = data.valueFields;\n              var valueParts = this.splitValue(value);\n              var hasValue = areNumbers(valueParts);\n              var dataItem = series.data[categoryIx];\n              var categoryPoints = this.categoryPoints[categoryIx];\n              var point;\n\n              if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n              }\n\n              if (hasValue) {\n                point = this.createPoint(data, fields);\n              }\n\n              var cluster = children[categoryIx];\n\n              if (!cluster) {\n                cluster = new ClusterLayout({\n                  vertical: options.invertAxes,\n                  gap: options.gap,\n                  spacing: options.spacing,\n                  rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n              }\n\n              if (point) {\n                this.updateRange(value, fields);\n                cluster.append(point);\n                point.categoryIx = categoryIx;\n                point.category = category;\n                point.series = series;\n                point.seriesIx = seriesIx;\n                point.owner = this;\n                point.dataItem = dataItem;\n              }\n\n              this.points.push(point);\n              categoryPoints.push(point);\n            },\n            pointType: function () {\n              if (this.options.invertAxes) {\n                return VerticalBoxPlot;\n              }\n\n              return BoxPlot;\n            },\n            splitValue: function (value) {\n              return [value.lower, value.q1, value.median, value.q3, value.upper];\n            },\n            updateRange: function (value, fields) {\n              var axisName = fields.series.axis;\n              var axisRange = this.valueAxisRanges[axisName];\n              var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n              if (defined(value.mean)) {\n                parts = parts.concat(value.mean);\n              }\n\n              axisRange = this.valueAxisRanges[axisName] = axisRange || {\n                min: MAX_VALUE,\n                max: MIN_VALUE\n              };\n              axisRange = this.valueAxisRanges[axisName] = {\n                min: Math.min.apply(Math, parts.concat([axisRange.min])),\n                max: Math.max.apply(Math, parts.concat([axisRange.max]))\n              };\n            },\n            formatPointValue: function (point, format) {\n              var value = point.value;\n              return this.chartService.format.auto(format, value.lower, value.q1, value.median, value.q3, value.upper, value.mean, point.category);\n            },\n            filterOutliers: function (items) {\n              var length = (items || []).length;\n              var result = [];\n\n              for (var i = 0; i < length; i++) {\n                var item = items[i];\n\n                if (defined(item) && item !== null) {\n                  result.push(item);\n                }\n              }\n\n              return result;\n            },\n            supportsPointInactiveOpacity: function () {\n              return false;\n            }\n          });\n          var ScatterErrorBar = ErrorBarBase.extend({\n            getAxis: function () {\n              var axes = this.chart.seriesAxes(this.series);\n              var axis = this.isVertical ? axes.y : axes.x;\n              return axis;\n            }\n          });\n\n          function hasValue(value) {\n            return defined(value) && value !== null;\n          }\n\n          var ScatterChart = ChartElement.extend({\n            init: function (plotArea, options) {\n              ChartElement.fn.init.call(this, options);\n              this.plotArea = plotArea;\n              this.chartService = plotArea.chartService;\n\n              this._initFields();\n\n              this.render();\n            },\n            _initFields: function () {\n              // X and Y axis ranges grouped by name, e.g.:\n              // primary: { min: 0, max: 1 }\n              this.xAxisRanges = {};\n              this.yAxisRanges = {};\n              this.points = [];\n              this.seriesPoints = [];\n              this.seriesOptions = [];\n              this._evalSeries = [];\n            },\n            render: function () {\n              this.traverseDataPoints(this.addValue.bind(this));\n            },\n            addErrorBar: function (point, field, fields) {\n              var value = point.value[field];\n              var valueErrorField = field + \"Value\";\n              var lowField = field + \"ErrorLow\";\n              var highField = field + \"ErrorHigh\";\n              var seriesIx = fields.seriesIx;\n              var series = fields.series;\n              var errorBars = point.options.errorBars;\n              var lowValue = fields[lowField];\n              var highValue = fields[highField];\n\n              if (isNumber(value)) {\n                var errorRange;\n\n                if (isNumber(lowValue) && isNumber(highValue)) {\n                  errorRange = {\n                    low: lowValue,\n                    high: highValue\n                  };\n                }\n\n                if (errorBars && defined(errorBars[valueErrorField])) {\n                  this.seriesErrorRanges = this.seriesErrorRanges || {\n                    x: [],\n                    y: []\n                  };\n                  this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] || new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n                  errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n                }\n\n                if (errorRange) {\n                  this.addPointErrorBar(errorRange, point, field);\n                }\n              }\n            },\n            addPointErrorBar: function (errorRange, point, field) {\n              var low = errorRange.low;\n              var high = errorRange.high;\n              var series = point.series;\n              var options = point.options.errorBars;\n              var isVertical = field === Y;\n              var item = {};\n              point[field + \"Low\"] = low;\n              point[field + \"High\"] = high;\n              point.errorBars = point.errorBars || [];\n              var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n              point.errorBars.push(errorBar);\n              point.append(errorBar);\n              item[field] = low;\n              this.updateRange(item, series);\n              item[field] = high;\n              this.updateRange(item, series);\n            },\n            addValue: function (value, fields) {\n              var x = value.x;\n              var y = value.y;\n              var seriesIx = fields.seriesIx;\n              var series = this.options.series[seriesIx];\n              var missingValues = this.seriesMissingValues(series);\n              var seriesPoints = this.seriesPoints[seriesIx];\n              var pointValue = value;\n\n              if (!(hasValue(x) && hasValue(y))) {\n                pointValue = this.createMissingValue(pointValue, missingValues);\n              }\n\n              var point;\n\n              if (pointValue) {\n                point = this.createPoint(pointValue, fields);\n\n                if (point) {\n                  $.extend(point, fields);\n                  this.addErrorBar(point, X, fields);\n                  this.addErrorBar(point, Y, fields);\n                }\n\n                this.updateRange(pointValue, fields.series);\n              }\n\n              this.points.push(point);\n              seriesPoints.push(point);\n            },\n            seriesMissingValues: function (series) {\n              return series.missingValues;\n            },\n            createMissingValue: function () {},\n            updateRange: function (value, series) {\n              var intlService = this.chartService.intl;\n              var xAxisName = series.xAxis;\n              var yAxisName = series.yAxis;\n              var x = value.x;\n              var y = value.y;\n              var xAxisRange = this.xAxisRanges[xAxisName];\n              var yAxisRange = this.yAxisRanges[yAxisName];\n\n              if (hasValue(x)) {\n                xAxisRange = this.xAxisRanges[xAxisName] = xAxisRange || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n\n                if (isString(x)) {\n                  x = parseDate(intlService, x);\n                }\n\n                xAxisRange.min = Math.min(xAxisRange.min, x);\n                xAxisRange.max = Math.max(xAxisRange.max, x);\n              }\n\n              if (hasValue(y)) {\n                yAxisRange = this.yAxisRanges[yAxisName] = yAxisRange || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n\n                if (isString(y)) {\n                  y = parseDate(intlService, y);\n                }\n\n                yAxisRange.min = Math.min(yAxisRange.min, y);\n                yAxisRange.max = Math.max(yAxisRange.max, y);\n              }\n            },\n            evalPointOptions: function (options, value, fields) {\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var state = {\n                defaults: series._defaults,\n                excluded: [\"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\"]\n              };\n              var doEval = this._evalSeries[seriesIx];\n\n              if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n              }\n\n              var pointOptions = options;\n\n              if (doEval) {\n                pointOptions = deepExtend({}, options);\n                evalOptions(pointOptions, {\n                  value: value,\n                  series: series,\n                  dataItem: fields.dataItem\n                }, state);\n              }\n\n              return pointOptions;\n            },\n            pointType: function () {\n              return LinePoint;\n            },\n            pointOptions: function (series, seriesIx) {\n              var options = this.seriesOptions[seriesIx];\n\n              if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                  markers: {\n                    opacity: series.opacity\n                  },\n                  tooltip: {\n                    format: this.options.tooltip.format\n                  },\n                  labels: {\n                    format: this.options.labels.format\n                  }\n                }, series);\n              }\n\n              return options;\n            },\n            createPoint: function (value, fields) {\n              var series = fields.series;\n              var pointOptions = this.pointOptions(series, fields.seriesIx);\n              var color = fields.color || series.color;\n              pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              }\n\n              var point = new LinePoint(value, pointOptions);\n              point.color = color;\n              this.append(point);\n              return point;\n            },\n            seriesAxes: function (series) {\n              var xAxisName = series.xAxis;\n              var yAxisName = series.yAxis;\n              var plotArea = this.plotArea;\n              var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n              var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n              if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n              }\n\n              if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n              }\n\n              return {\n                x: xAxis,\n                y: yAxis\n              };\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              var chartPoints = this.points;\n              var limit = !this.options.clip;\n              var pointIx = 0;\n              this.traverseDataPoints(function (value, fields) {\n                var point = chartPoints[pointIx++];\n                var seriesAxes = this$1.seriesAxes(fields.series);\n                var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n                var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n                if (point) {\n                  if (slotX && slotY) {\n                    var pointSlot = this$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                  } else {\n                    point.visible = false;\n                  }\n                }\n              });\n              this.box = targetBox;\n            },\n            pointSlot: function (slotX, slotY) {\n              return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n            },\n            traverseDataPoints: function (callback) {\n              var this$1 = this;\n              var ref = this;\n              var series = ref.options.series;\n              var seriesPoints = ref.seriesPoints;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var currentSeriesPoints = seriesPoints[seriesIx];\n\n                if (!currentSeriesPoints) {\n                  seriesPoints[seriesIx] = [];\n                }\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                  var ref$1 = this$1._bindPoint(currentSeries, seriesIx, pointIx);\n\n                  var value = ref$1.valueFields;\n                  var fields = ref$1.fields;\n                  callback(value, deepExtend({\n                    pointIx: pointIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: currentSeries.data[pointIx],\n                    owner: this$1\n                  }, fields));\n                }\n              }\n            },\n            formatPointValue: function (point, format) {\n              var value = point.value;\n              return this.chartService.format.auto(format, value.x, value.y);\n            },\n            animationPoints: function () {\n              var points = this.points;\n              var result = [];\n\n              for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n              }\n\n              return result;\n            }\n          });\n          setDefaultOptions(ScatterChart, {\n            series: [],\n            tooltip: {\n              format: \"{0}, {1}\"\n            },\n            labels: {\n              format: \"{0}, {1}\"\n            },\n            clip: true\n          });\n          deepExtend(ScatterChart.prototype, ClipAnimationMixin, {\n            _bindPoint: CategoricalChart.prototype._bindPoint\n          });\n          var Bubble = LinePoint.extend({\n            init: function (value, options) {\n              LinePoint.fn.init.call(this, value, options);\n              this.category = value.category;\n            },\n            createHighlight: function () {\n              var highlight = this.options.highlight;\n              var border = highlight.border;\n              var markers = this.options.markers;\n              var center = this.box.center();\n              var radius = (markers.size + markers.border.width + border.width) / 2;\n              var highlightGroup = new Group();\n              var shadow = new drawing.Circle(new geometry.Circle([center.x, center.y + radius / 5 + border.width / 2], radius + border.width / 2), {\n                stroke: {\n                  color: 'none'\n                },\n                fill: this.createGradient({\n                  gradient: 'bubbleShadow',\n                  color: markers.background,\n                  stops: [{\n                    offset: 0,\n                    color: markers.background,\n                    opacity: 0.3\n                  }, {\n                    offset: 1,\n                    color: markers.background,\n                    opacity: 0\n                  }]\n                })\n              });\n              var overlay = new drawing.Circle(new geometry.Circle([center.x, center.y], radius), {\n                stroke: {\n                  color: border.color || new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                  width: border.width,\n                  opacity: border.opacity\n                },\n                fill: {\n                  color: markers.background,\n                  opacity: highlight.opacity\n                }\n              });\n              highlightGroup.append(shadow, overlay);\n              return highlightGroup;\n            }\n          });\n          Bubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n            labels: {\n              position: CENTER\n            },\n            highlight: {\n              opacity: 1,\n              border: {\n                color: \"#fff\",\n                width: 2,\n                opacity: 1\n              }\n            }\n          });\n          Bubble.prototype.defaults.highlight.zIndex = undefined;\n          var BubbleChart = ScatterChart.extend({\n            _initFields: function () {\n              this._maxSize = MIN_VALUE;\n\n              ScatterChart.fn._initFields.call(this);\n            },\n            addValue: function (value, fields) {\n              if (value.size !== null && (value.size > 0 || value.size < 0 && fields.series.negativeValues.visible)) {\n                this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n                ScatterChart.fn.addValue.call(this, value, fields);\n              } else {\n                this.points.push(null);\n                this.seriesPoints[fields.seriesIx].push(null);\n              }\n            },\n            reflow: function (box) {\n              this.updateBubblesSize(box);\n              ScatterChart.fn.reflow.call(this, box);\n            },\n            pointType: function () {\n              return Bubble;\n            },\n            createPoint: function (value, fields) {\n              var series = fields.series;\n              var pointsCount = series.data.length;\n              var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n              var animationOptions = {\n                delay: delay,\n                duration: INITIAL_ANIMATION_DURATION - delay,\n                type: BUBBLE\n              };\n              var color = fields.color || series.color;\n\n              if (value.size < 0 && series.negativeValues.visible) {\n                color = valueOrDefault(series.negativeValues.color, color);\n              }\n\n              var pointOptions = deepExtend({\n                labels: {\n                  animation: {\n                    delay: delay,\n                    duration: INITIAL_ANIMATION_DURATION - delay\n                  }\n                }\n              }, this.pointOptions(series, fields.seriesIx), {\n                markers: {\n                  type: CIRCLE,\n                  border: series.border,\n                  opacity: series.opacity,\n                  animation: animationOptions\n                }\n              });\n              pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              }\n\n              pointOptions.markers.background = color;\n              var point = new Bubble(value, pointOptions);\n              point.color = color;\n              this.append(point);\n              return point;\n            },\n            updateBubblesSize: function (box) {\n              var this$1 = this;\n              var ref = this;\n              var series = ref.options.series;\n              var boxSize = Math.min(box.width(), box.height());\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesPoints = this$1.seriesPoints[seriesIx];\n                var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n                var maxSize = currentSeries.maxSize || boxSize * 0.2;\n                var minR = minSize / 2;\n                var maxR = maxSize / 2;\n                var minArea = Math.PI * minR * minR;\n                var maxArea = Math.PI * maxR * maxR;\n                var areaRange = maxArea - minArea;\n                var areaRatio = areaRange / this$1._maxSize;\n\n                for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                  var point = seriesPoints[pointIx];\n\n                  if (point) {\n                    var area = Math.abs(point.value.size) * areaRatio;\n                    var radius = Math.sqrt((minArea + area) / Math.PI);\n                    var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                    var zIndex = baseZIndex + (1 - radius / maxR);\n                    deepExtend(point.options, {\n                      zIndex: zIndex,\n                      markers: {\n                        size: radius * 2,\n                        zIndex: zIndex\n                      },\n                      labels: {\n                        zIndex: zIndex + 1\n                      }\n                    });\n                  }\n                }\n              }\n            },\n            formatPointValue: function (point, format) {\n              var value = point.value;\n              return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n            },\n            createAnimation: function () {},\n            createVisual: function () {}\n          });\n          setDefaultOptions(BubbleChart, {\n            tooltip: {\n              format: \"{3}\"\n            },\n            labels: {\n              format: \"{3}\"\n            }\n          });\n          var Target = ShapeElement.extend({});\n          deepExtend(Target.prototype, PointEventsMixin);\n          var Bullet = ChartElement.extend({\n            init: function (value, options) {\n              ChartElement.fn.init.call(this, options);\n              this.aboveAxis = this.options.aboveAxis;\n              this.color = options.color || WHITE;\n              this.value = value;\n            },\n            render: function () {\n              var options = this.options;\n\n              if (!this._rendered) {\n                this._rendered = true;\n\n                if (defined(this.value.target)) {\n                  this.target = new Target({\n                    type: options.target.shape,\n                    background: options.target.color || this.color,\n                    opacity: options.opacity,\n                    zIndex: options.zIndex,\n                    border: options.target.border,\n                    vAlign: TOP,\n                    align: RIGHT\n                  });\n                  this.target.value = this.value;\n                  this.target.dataItem = this.dataItem;\n                  this.target.series = this.series;\n                  this.append(this.target);\n                }\n\n                this.createNote();\n              }\n            },\n            reflow: function (box) {\n              this.render();\n              var ref = this;\n              var options = ref.options;\n              var target = ref.target;\n              var chart = ref.owner;\n              var invertAxes = options.invertAxes;\n              var valueAxis = chart.seriesValueAxis(this.options);\n              var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n              var targetValueSlot = valueAxis.getSlot(this.value.target);\n              var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n              var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n              if (target) {\n                var targetSlot = new Box(targetSlotX.x1, targetSlotY.y1, targetSlotX.x2, targetSlotY.y2);\n                target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n                target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n                target.reflow(targetSlot);\n              }\n\n              if (this.note) {\n                this.note.reflow(box);\n              }\n\n              this.box = box;\n            },\n            createVisual: function () {\n              ChartElement.fn.createVisual.call(this);\n              var options = this.options;\n              var body = Path.fromRect(this.box.toRect(), {\n                fill: {\n                  color: this.color,\n                  opacity: options.opacity\n                },\n                stroke: null\n              });\n\n              if (options.border.width > 0) {\n                body.options.set(\"stroke\", {\n                  color: options.border.color || this.color,\n                  width: options.border.width,\n                  dashType: options.border.dashType,\n                  opacity: valueOrDefault(options.border.opacity, options.opacity)\n                });\n              }\n\n              this.bodyVisual = body;\n              alignPathToPixel(body);\n              this.visual.append(body);\n            },\n            createAnimation: function () {\n              if (this.bodyVisual) {\n                this.animation = Animation.create(this.bodyVisual, this.options.animation);\n              }\n            },\n            createHighlight: function (style) {\n              return Path.fromRect(this.box.toRect(), style);\n            },\n            highlightVisual: function () {\n              return this.bodyVisual;\n            },\n            highlightVisualArgs: function () {\n              return {\n                rect: this.box.toRect(),\n                visual: this.bodyVisual,\n                options: this.options\n              };\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            }\n          });\n          Bullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\n          setDefaultOptions(Bullet, {\n            border: {\n              width: 1\n            },\n            vertical: false,\n            opacity: 1,\n            target: {\n              shape: \"\",\n              border: {\n                width: 0,\n                color: \"green\"\n              },\n              line: {\n                width: 2\n              }\n            },\n            tooltip: {\n              format: \"Current: {0}<br />Target: {1}\"\n            }\n          });\n          deepExtend(Bullet.prototype, PointEventsMixin);\n          deepExtend(Bullet.prototype, NoteMixin);\n          var BulletChart = CategoricalChart.extend({\n            init: function (plotArea, options) {\n              wrapData(options);\n              CategoricalChart.fn.init.call(this, plotArea, options);\n            },\n            reflowCategories: function (categorySlots) {\n              var children = this.children;\n              var childrenLength = children.length;\n\n              for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n              }\n            },\n            plotRange: function (point) {\n              var series = point.series;\n              var valueAxis = this.seriesValueAxis(series);\n              var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n              return [axisCrossingValue, point.value.current || axisCrossingValue];\n            },\n            createPoint: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var ref = this;\n              var options = ref.options;\n              var children = ref.children;\n              var value = data.valueFields;\n              var bulletOptions = deepExtend({\n                vertical: !options.invertAxes,\n                overlay: series.overlay,\n                categoryIx: categoryIx,\n                invertAxes: options.invertAxes\n              }, series);\n              var color = data.fields.color || series.color;\n              bulletOptions = this.evalPointOptions(bulletOptions, value, category, categoryIx, series, seriesIx);\n\n              if (isFunction(series.color)) {\n                color = bulletOptions.color;\n              }\n\n              var bullet = new Bullet(value, bulletOptions);\n              bullet.color = color;\n              var cluster = children[categoryIx];\n\n              if (!cluster) {\n                cluster = new ClusterLayout({\n                  vertical: options.invertAxes,\n                  gap: options.gap,\n                  spacing: options.spacing,\n                  rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n              }\n\n              cluster.append(bullet);\n              return bullet;\n            },\n            updateRange: function (value, fields) {\n              var current = value.current;\n              var target = value.target;\n              var axisName = fields.series.axis;\n              var axisRange = this.valueAxisRanges[axisName];\n\n              if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n                axisRange = this.valueAxisRanges[axisName] = axisRange || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n                axisRange.min = Math.min(axisRange.min, current, target);\n                axisRange.max = Math.max(axisRange.max, current, target);\n              }\n            },\n            formatPointValue: function (point, format) {\n              return this.chartService.format.auto(format, point.value.current, point.value.target);\n            },\n            pointValue: function (data) {\n              return data.valueFields.current;\n            },\n            aboveAxis: function (point) {\n              var value = point.value.current;\n              return value > 0;\n            },\n            createAnimation: function () {\n              var this$1 = this;\n              var points = this.points;\n\n              this._setAnimationOptions();\n\n              for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                point.options.animation = this$1.options.animation;\n                point.createAnimation();\n              }\n            }\n          });\n          BulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n          setDefaultOptions(BulletChart, {\n            animation: {\n              type: BAR\n            }\n          });\n\n          function wrapData(options) {\n            var series = options.series;\n\n            for (var i = 0; i < series.length; i++) {\n              var seriesItem = series[i];\n              var data = seriesItem.data;\n\n              if (data && !isArray(data[0]) && !isObject(data[0])) {\n                seriesItem.data = [data];\n              }\n            }\n          }\n\n          var BaseTooltip = Class.extend({\n            init: function (chartService, options) {\n              this.chartService = chartService;\n              this.options = deepExtend({}, this.options, options);\n            },\n            getStyle: function (options, point) {\n              var background = options.background;\n              var border = options.border.color;\n\n              if (point) {\n                var pointColor = point.color || point.options.color;\n                background = valueOrDefault(background, pointColor);\n                border = valueOrDefault(border, pointColor);\n              }\n\n              var padding = getSpacing(options.padding || {}, \"auto\");\n              return {\n                backgroundColor: background,\n                borderColor: border,\n                font: options.font,\n                color: options.color,\n                opacity: options.opacity,\n                borderWidth: styleValue(options.border.width),\n                paddingTop: styleValue(padding.top),\n                paddingBottom: styleValue(padding.bottom),\n                paddingLeft: styleValue(padding.left),\n                paddingRight: styleValue(padding.right)\n              };\n            },\n            show: function (options, tooltipOptions, point) {\n              options.format = tooltipOptions.format;\n              var style = this.getStyle(tooltipOptions, point);\n              options.style = style;\n              var background = new Color(style.backgroundColor);\n\n              if (!defined(tooltipOptions.color) && !background.isDark()) {\n                options.className = \"k-chart-tooltip-inverse\";\n              }\n\n              this.chartService.notify(SHOW_TOOLTIP, options);\n              this.visible = true;\n            },\n            hide: function () {\n              if (this.chartService) {\n                this.chartService.notify(HIDE_TOOLTIP);\n              }\n\n              this.visible = false;\n            },\n            destroy: function () {\n              delete this.chartService;\n            }\n          });\n          setDefaultOptions(BaseTooltip, {\n            border: {\n              width: 1\n            },\n            opacity: 1\n          });\n          var CrosshairTooltip = BaseTooltip.extend({\n            init: function (chartService, crosshair, options) {\n              BaseTooltip.fn.init.call(this, chartService, options);\n              this.crosshair = crosshair;\n              this.formatService = chartService.format;\n              this.initAxisName();\n            },\n            initAxisName: function () {\n              var axis = this.crosshair.axis;\n              var plotArea = axis.plotArea;\n              var name;\n\n              if (plotArea.categoryAxis) {\n                name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n              } else {\n                name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n              }\n\n              this.axisName = name;\n            },\n            showAt: function (point) {\n              var ref = this;\n              var axis = ref.crosshair.axis;\n              var options = ref.options;\n              var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n              var formattedValue = value;\n\n              if (options.format) {\n                formattedValue = this.formatService.auto(options.format, value);\n              } else if (axis.options.type === DATE) {\n                formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n              }\n\n              this.show({\n                point: point,\n                anchor: this.getAnchor(),\n                crosshair: this.crosshair,\n                value: formattedValue,\n                axisName: this.axisName,\n                axisIndex: this.crosshair.axis.axisIndex\n              }, this.options);\n            },\n            hide: function () {\n              this.chartService.notify(HIDE_TOOLTIP, {\n                crosshair: this.crosshair,\n                axisName: this.axisName,\n                axisIndex: this.crosshair.axis.axisIndex\n              });\n            },\n            getAnchor: function () {\n              var ref = this;\n              var crosshair = ref.crosshair;\n              var ref_options = ref.options;\n              var position = ref_options.position;\n              var padding = ref_options.padding;\n              var vertical = !crosshair.axis.options.vertical;\n              var lineBox = crosshair.line.bbox();\n              var horizontalAlign, verticalAlign, point;\n\n              if (vertical) {\n                horizontalAlign = CENTER;\n\n                if (position === BOTTOM) {\n                  verticalAlign = TOP;\n                  point = lineBox.bottomLeft().translate(0, padding);\n                } else {\n                  verticalAlign = BOTTOM;\n                  point = lineBox.topLeft().translate(0, -padding);\n                }\n              } else {\n                verticalAlign = CENTER;\n\n                if (position === LEFT) {\n                  horizontalAlign = RIGHT;\n                  point = lineBox.topLeft().translate(-padding, 0);\n                } else {\n                  horizontalAlign = LEFT;\n                  point = lineBox.topRight().translate(padding, 0);\n                }\n              }\n\n              return {\n                point: point,\n                align: {\n                  horizontal: horizontalAlign,\n                  vertical: verticalAlign\n                }\n              };\n            }\n          });\n          setDefaultOptions(CrosshairTooltip, {\n            padding: 10\n          });\n          var Crosshair = ChartElement.extend({\n            init: function (chartService, axis, options) {\n              ChartElement.fn.init.call(this, options);\n              this.axis = axis;\n              this.stickyMode = axis instanceof CategoryAxis;\n              var tooltipOptions = this.options.tooltip;\n\n              if (tooltipOptions.visible) {\n                this.tooltip = new CrosshairTooltip(chartService, this, deepExtend({}, tooltipOptions, {\n                  stickyMode: this.stickyMode\n                }));\n              }\n            },\n            showAt: function (point) {\n              this.point = point;\n              this.moveLine();\n              this.line.visible(true);\n\n              if (this.tooltip) {\n                this.tooltip.showAt(point);\n              }\n            },\n            hide: function () {\n              this.line.visible(false);\n\n              if (this.tooltip) {\n                this.tooltip.hide();\n              }\n            },\n            moveLine: function () {\n              var ref = this;\n              var axis = ref.axis;\n              var point = ref.point;\n              var vertical = axis.options.vertical;\n              var box = this.getBox();\n              var dim = vertical ? Y : X;\n              var lineStart = new GeometryPoint(box.x1, box.y1);\n              var lineEnd;\n\n              if (vertical) {\n                lineEnd = new GeometryPoint(box.x2, box.y1);\n              } else {\n                lineEnd = new GeometryPoint(box.x1, box.y2);\n              }\n\n              if (point) {\n                if (this.stickyMode) {\n                  var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                  lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n                } else {\n                  lineStart[dim] = lineEnd[dim] = point[dim];\n                }\n              }\n\n              this.box = box;\n              this.line.moveTo(lineStart).lineTo(lineEnd);\n            },\n            getBox: function () {\n              var axis = this.axis;\n              var axes = axis.pane.axes;\n              var length = axes.length;\n              var vertical = axis.options.vertical;\n              var box = axis.lineBox().clone();\n              var dim = vertical ? X : Y;\n              var axisLineBox;\n\n              for (var i = 0; i < length; i++) {\n                var currentAxis = axes[i];\n\n                if (currentAxis.options.vertical !== vertical) {\n                  if (!axisLineBox) {\n                    axisLineBox = currentAxis.lineBox().clone();\n                  } else {\n                    axisLineBox.wrap(currentAxis.lineBox());\n                  }\n                }\n              }\n\n              box[dim + 1] = axisLineBox[dim + 1];\n              box[dim + 2] = axisLineBox[dim + 2];\n              return box;\n            },\n            createVisual: function () {\n              ChartElement.fn.createVisual.call(this);\n              var options = this.options;\n              this.line = new Path({\n                stroke: {\n                  color: options.color,\n                  width: options.width,\n                  opacity: options.opacity,\n                  dashType: options.dashType\n                },\n                visible: false\n              });\n              this.moveLine();\n              this.visual.append(this.line);\n            },\n            destroy: function () {\n              if (this.tooltip) {\n                this.tooltip.destroy();\n              }\n\n              ChartElement.fn.destroy.call(this);\n            }\n          });\n          setDefaultOptions(Crosshair, {\n            color: BLACK,\n            width: 2,\n            zIndex: -1,\n            tooltip: {\n              visible: false\n            }\n          });\n          var ChartContainer = ChartElement.extend({\n            init: function (options, pane) {\n              ChartElement.fn.init.call(this, options);\n              this.pane = pane;\n            },\n            shouldClip: function () {\n              var children = this.children;\n              var length = children.length;\n\n              for (var i = 0; i < length; i++) {\n                if (children[i].options.clip === true) {\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            _clipBox: function () {\n              return this.pane.chartsBox();\n            },\n            createVisual: function () {\n              this.visual = new Group({\n                zIndex: 0\n              });\n\n              if (this.shouldClip()) {\n                var clipBox = this.clipBox = this._clipBox();\n\n                var clipRect = clipBox.toRect();\n                var clipPath = Path.fromRect(clipRect);\n                alignPathToPixel(clipPath);\n                this.visual.clip(clipPath);\n                this.unclipLabels();\n              }\n            },\n            stackRoot: function () {\n              return this;\n            },\n            unclipLabels: function () {\n              var ref = this;\n              var charts = ref.children;\n              var clipBox = ref.clipBox;\n\n              for (var i = 0; i < charts.length; i++) {\n                var points = charts[i].points || {};\n                var length = points.length;\n\n                for (var j = 0; j < length; j++) {\n                  var point = points[j];\n\n                  if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                    if (point.unclipElements) {\n                      point.unclipElements();\n                    } else {\n                      var label = point.label;\n                      var note = point.note;\n\n                      if (label && label.options.visible) {\n                        if (label.alignToClipBox) {\n                          label.alignToClipBox(clipBox);\n                        }\n\n                        label.options.noclip = true;\n                      }\n\n                      if (note && note.options.visible) {\n                        note.options.noclip = true;\n                      }\n                    }\n                  }\n                }\n              }\n            },\n            destroy: function () {\n              ChartElement.fn.destroy.call(this);\n              delete this.parent;\n            }\n          });\n          ChartContainer.prototype.isStackRoot = true;\n          var Pane = BoxElement.extend({\n            init: function (options) {\n              BoxElement.fn.init.call(this, options);\n              this.id = paneID();\n              this.createTitle();\n              this.content = new ChartElement();\n              this.chartContainer = new ChartContainer({}, this);\n              this.append(this.content);\n              this.axes = [];\n              this.charts = [];\n            },\n            createTitle: function () {\n              var titleOptions = this.options.title;\n\n              if (isObject(titleOptions)) {\n                titleOptions = deepExtend({}, titleOptions, {\n                  align: titleOptions.position,\n                  position: TOP\n                });\n              }\n\n              this.title = dataviz.Title.buildTitle(titleOptions, this, Pane.prototype.options.title);\n            },\n            appendAxis: function (axis) {\n              this.content.append(axis);\n              this.axes.push(axis);\n              axis.pane = this;\n            },\n            appendAxisAt: function (axis, pos) {\n              this.content.append(axis);\n              this.axes.splice(pos, 0, axis);\n              axis.pane = this;\n            },\n            appendChart: function (chart) {\n              if (this.chartContainer.parent !== this.content) {\n                this.content.append(this.chartContainer);\n              }\n\n              this.charts.push(chart);\n              this.chartContainer.append(chart);\n              chart.pane = this;\n            },\n            empty: function () {\n              var this$1 = this;\n              var plotArea = this.parent;\n\n              if (plotArea) {\n                for (var i = 0; i < this.axes.length; i++) {\n                  plotArea.removeAxis(this$1.axes[i]);\n                }\n\n                for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                  plotArea.removeChart(this$1.charts[i$1]);\n                }\n              }\n\n              this.axes = [];\n              this.charts = [];\n              this.content.destroy();\n              this.content.children = [];\n              this.chartContainer.children = [];\n            },\n            reflow: function (targetBox) {\n              // Content (such as charts) is rendered, but excluded from reflows\n              var content;\n\n              if (last(this.children) === this.content) {\n                content = this.children.pop();\n              }\n\n              BoxElement.fn.reflow.call(this, targetBox);\n\n              if (content) {\n                this.children.push(content);\n              }\n\n              if (this.title) {\n                this.contentBox.y1 += this.title.box.height();\n              }\n            },\n            visualStyle: function () {\n              var style = BoxElement.fn.visualStyle.call(this);\n              style.zIndex = -10;\n              return style;\n            },\n            renderComplete: function () {\n              if (this.options.visible) {\n                this.createGridLines();\n              }\n            },\n            stackRoot: function () {\n              return this;\n            },\n            clipRoot: function () {\n              return this;\n            },\n            createGridLines: function () {\n              var axes = this.axes;\n              var allAxes = axes.concat(this.parent.axes);\n              var vGridLines = [];\n              var hGridLines = []; // TODO\n              // Is full combination really necessary?\n\n              for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var vertical = axis.options.vertical;\n                var gridLines = vertical ? vGridLines : hGridLines;\n\n                for (var j = 0; j < allAxes.length; j++) {\n                  if (gridLines.length === 0) {\n                    var altAxis = allAxes[j];\n\n                    if (vertical !== altAxis.options.vertical) {\n                      append(gridLines, axis.createGridLines(altAxis));\n                    }\n                  }\n                }\n              }\n            },\n            refresh: function () {\n              this.visual.clear();\n              this.content.parent = null;\n              this.content.createGradient = this.createGradient.bind(this);\n              this.content.renderVisual();\n              this.content.parent = this;\n\n              if (this.title) {\n                this.visual.append(this.title.visual);\n              }\n\n              this.visual.append(this.content.visual);\n              this.renderComplete();\n              this.notifyRender();\n            },\n            chartsBox: function () {\n              var axes = this.axes;\n              var length = axes.length;\n              var chartsBox = new Box();\n\n              for (var idx = 0; idx < length; idx++) {\n                var axis = axes[idx];\n                var axisValueField = axis.options.vertical ? Y : X;\n                var lineBox = axis.lineBox();\n                chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n                chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n              }\n\n              if (chartsBox.x2 === 0) {\n                var allAxes = this.parent.axes;\n                var length$1 = allAxes.length;\n\n                for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                  var axis$1 = allAxes[idx$1];\n\n                  if (!axis$1.options.vertical) {\n                    var lineBox$1 = axis$1.lineBox();\n                    chartsBox.x1 = lineBox$1.x1;\n                    chartsBox.x2 = lineBox$1.x2;\n                  }\n                }\n              }\n\n              return chartsBox;\n            },\n            clipBox: function () {\n              return this.chartContainer.clipBox;\n            },\n            notifyRender: function () {\n              var service = this.getService();\n\n              if (service) {\n                service.notify(PANE_RENDER, {\n                  pane: new ChartPane(this),\n                  index: this.paneIndex,\n                  name: this.options.name\n                });\n              }\n            }\n          });\n          var ID = 1;\n\n          function paneID() {\n            return \"pane\" + ID++;\n          }\n\n          Pane.prototype.isStackRoot = true;\n          setDefaultOptions(Pane, {\n            zIndex: -1,\n            shrinkToFit: true,\n            title: {\n              align: LEFT\n            },\n            visible: true\n          });\n\n          function appendIfNotNull(array, element) {\n            if (element !== null) {\n              array.push(element);\n            }\n          }\n\n          function segmentVisible(series, fields, index) {\n            var visible = fields.visible;\n\n            if (defined(visible)) {\n              return visible;\n            }\n\n            var pointVisibility = series.pointVisibility;\n\n            if (pointVisibility) {\n              return pointVisibility[index];\n            }\n          }\n\n          function bindSegments(series) {\n            var data = series.data;\n            var points = [];\n            var sum = 0;\n            var count = 0;\n\n            for (var idx = 0; idx < data.length; idx++) {\n              var pointData = SeriesBinder.current.bindPoint(series, idx);\n              var value = pointData.valueFields.value;\n\n              if (isString(value)) {\n                value = parseFloat(value);\n              }\n\n              if (isNumber(value)) {\n                pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n                pointData.value = Math.abs(value);\n                points.push(pointData);\n\n                if (pointData.visible) {\n                  sum += pointData.value;\n                }\n\n                if (value !== 0) {\n                  count++;\n                }\n              } else {\n                points.push(null);\n              }\n            }\n\n            return {\n              total: sum,\n              points: points,\n              count: count\n            };\n          }\n\n          function equalsIgnoreCase(a, b) {\n            if (a && b) {\n              return a.toLowerCase() === b.toLowerCase();\n            }\n\n            return a === b;\n          }\n\n          function filterSeriesByType(series, types) {\n            var result = [];\n            var seriesTypes = [].concat(types);\n\n            for (var idx = 0; idx < series.length; idx++) {\n              var currentSeries = series[idx];\n\n              if (inArray(currentSeries.type, seriesTypes)) {\n                result.push(currentSeries);\n              }\n            }\n\n            return result;\n          }\n\n          function getDateField(field, row, intlService) {\n            if (row === null) {\n              return row;\n            }\n\n            var key = \"_date_\" + field;\n            var value = row[key];\n\n            if (!value) {\n              value = parseDate(intlService, getter(field, true)(row));\n              row[key] = value;\n            }\n\n            return value;\n          }\n\n          function isDateAxis(axisOptions, sampleCategory) {\n            var type = axisOptions.type;\n            var dateCategory = sampleCategory instanceof Date;\n            return !type && dateCategory || equalsIgnoreCase(type, DATE);\n          }\n\n          function singleItemOrArray(array) {\n            return array.length === 1 ? array[0] : array;\n          }\n\n          var AREA_REGEX = /area/i;\n\n          function seriesMissingValues(series) {\n            if (series.missingValues) {\n              return series.missingValues;\n            }\n\n            return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n          }\n\n          function hasValue$1(series, item) {\n            var fields = SeriesBinder.current.bindPoint(series, null, item);\n            var valueFields = fields.valueFields;\n\n            for (var field in valueFields) {\n              if (dataviz.convertableToNumber(valueFields[field])) {\n                return true;\n              }\n            }\n          }\n\n          function findNext(ref) {\n            var start = ref.start;\n            var dir = ref.dir;\n            var min = ref.min;\n            var max = ref.max;\n            var getter$$1 = ref.getter;\n            var hasItem = ref.hasItem;\n            var series = ref.series;\n            var pointHasValue, outPoint;\n            var idx = start;\n\n            do {\n              idx += dir; //aggregating and binding the item takes too much time for large number of categories\n              //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n\n              if (hasItem(idx)) {\n                outPoint = getter$$1(idx);\n                pointHasValue = hasValue$1(series, outPoint.item);\n              }\n            } while (min <= idx && idx <= max && !pointHasValue);\n\n            if (pointHasValue) {\n              return outPoint;\n            }\n          }\n\n          function createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n            var min = range.min;\n            var max = range.max;\n            var hasMinPoint = min > 0 && min < count;\n            var hasMaxPoint = max + 1 < count;\n\n            if (hasMinPoint || hasMaxPoint) {\n              var missingValues = seriesMissingValues(series);\n              var minPoint, maxPoint;\n\n              if (missingValues !== INTERPOLATE) {\n                if (hasMinPoint) {\n                  minPoint = getter$$1(min - 1);\n                }\n\n                if (hasMaxPoint) {\n                  maxPoint = getter$$1(max + 1);\n                }\n              } else {\n                var outPoint, pointHasValue;\n\n                if (hasMinPoint) {\n                  outPoint = getter$$1(min - 1);\n                  pointHasValue = hasValue$1(series, outPoint.item);\n\n                  if (!pointHasValue) {\n                    minPoint = findNext({\n                      start: min,\n                      dir: -1,\n                      min: 0,\n                      max: count - 1,\n                      getter: getter$$1,\n                      hasItem: hasItem,\n                      series: series\n                    });\n                  } else {\n                    minPoint = outPoint;\n                  }\n                }\n\n                if (hasMaxPoint) {\n                  outPoint = getter$$1(max + 1);\n                  pointHasValue = hasValue$1(series, outPoint.item);\n\n                  if (!pointHasValue) {\n                    maxPoint = findNext({\n                      start: max,\n                      dir: 1,\n                      min: 0,\n                      max: count - 1,\n                      getter: getter$$1,\n                      hasItem: hasItem,\n                      series: series\n                    });\n                  } else {\n                    maxPoint = outPoint;\n                  }\n                }\n              }\n\n              if (minPoint) {\n                series._outOfRangeMinPoint = minPoint;\n              }\n\n              if (maxPoint) {\n                series._outOfRangeMaxPoint = maxPoint;\n              }\n            }\n          }\n\n          var PlotAreaBase = ChartElement.extend({\n            init: function (series, options, chartService) {\n              ChartElement.fn.init.call(this, options);\n              this.initFields(series, options);\n              this.series = series;\n              this.initSeries();\n              this.charts = [];\n              this.options.legend = this.options.legend || {};\n              this.options.legend.items = [];\n              this.axes = [];\n              this.crosshairs = [];\n              this.chartService = chartService;\n              this.originalOptions = options;\n              this.createPanes();\n              this.render();\n              this.createCrosshairs();\n            },\n            initFields: function () {},\n            initSeries: function () {\n              var series = this.series;\n\n              for (var i = 0; i < series.length; i++) {\n                series[i].index = i;\n              }\n            },\n            createPanes: function () {\n              var this$1 = this;\n              var titleOptions = this.options.title || {};\n              var paneDefaults = this.options.paneDefaults;\n              var paneOptions = this.options.panes || [];\n              var panesLength = Math.max(paneOptions.length, 1);\n              var panes = [];\n              var defaults = deepExtend({\n                title: {\n                  color: titleOptions.color\n                }\n              }, paneDefaults);\n\n              for (var i = 0; i < panesLength; i++) {\n                var options = deepExtend({}, defaults, paneOptions[i]);\n\n                if (isString(options.title)) {\n                  options.title = deepExtend({\n                    text: options.title\n                  }, defaults.title);\n                }\n\n                var currentPane = new Pane(options);\n                currentPane.paneIndex = i;\n                panes.push(currentPane);\n                this$1.append(currentPane);\n              }\n\n              this.panes = panes;\n            },\n            crosshairOptions: function (axis) {\n              return axis.options.crosshair;\n            },\n            createCrosshairs: function (panes) {\n              var this$1 = this;\n\n              if (panes === void 0) {\n                panes = this.panes;\n              }\n\n              for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n\n                for (var j = 0; j < pane.axes.length; j++) {\n                  var axis = pane.axes[j];\n                  var options = this$1.crosshairOptions(axis);\n\n                  if (options && options.visible) {\n                    var currentCrosshair = new Crosshair(this$1.chartService, axis, options);\n                    this$1.crosshairs.push(currentCrosshair);\n                    pane.content.append(currentCrosshair);\n                  }\n                }\n              }\n            },\n            removeCrosshairs: function (pane) {\n              var crosshairs = this.crosshairs;\n              var axes = pane.axes;\n\n              for (var i = crosshairs.length - 1; i >= 0; i--) {\n                for (var j = 0; j < axes.length; j++) {\n                  if (crosshairs[i].axis === axes[j]) {\n                    crosshairs.splice(i, 1);\n                    break;\n                  }\n                }\n              }\n            },\n            hideCrosshairs: function () {\n              var crosshairs = this.crosshairs;\n\n              for (var idx = 0; idx < crosshairs.length; idx++) {\n                crosshairs[idx].hide();\n              }\n            },\n            findPane: function (name) {\n              var panes = this.panes;\n              var matchingPane;\n\n              for (var i = 0; i < panes.length; i++) {\n                if (panes[i].options.name === name) {\n                  matchingPane = panes[i];\n                  break;\n                }\n              }\n\n              return matchingPane || panes[0];\n            },\n            findPointPane: function (point) {\n              var panes = this.panes;\n              var matchingPane;\n\n              for (var i = 0; i < panes.length; i++) {\n                if (panes[i].box.containsPoint(point)) {\n                  matchingPane = panes[i];\n                  break;\n                }\n              }\n\n              return matchingPane;\n            },\n            appendAxis: function (axis) {\n              var pane = this.findPane(axis.options.pane);\n              pane.appendAxis(axis);\n              this.axes.push(axis);\n              axis.plotArea = this;\n            },\n            removeAxis: function (axisToRemove) {\n              var this$1 = this;\n              var filteredAxes = [];\n\n              for (var i = 0; i < this.axes.length; i++) {\n                var axis = this$1.axes[i];\n\n                if (axisToRemove !== axis) {\n                  filteredAxes.push(axis);\n                } else {\n                  axis.destroy();\n                }\n              }\n\n              this.axes = filteredAxes;\n            },\n            appendChart: function (chart, pane) {\n              this.charts.push(chart);\n\n              if (pane) {\n                pane.appendChart(chart);\n              } else {\n                this.append(chart);\n              }\n            },\n            removeChart: function (chartToRemove) {\n              var this$1 = this;\n              var filteredCharts = [];\n\n              for (var i = 0; i < this.charts.length; i++) {\n                var chart = this$1.charts[i];\n\n                if (chart !== chartToRemove) {\n                  filteredCharts.push(chart);\n                } else {\n                  chart.destroy();\n                }\n              }\n\n              this.charts = filteredCharts;\n            },\n            addToLegend: function (series) {\n              var count = series.length;\n              var legend = this.options.legend;\n              var labels = legend.labels || {};\n              var inactiveItems = legend.inactiveItems || {};\n              var inactiveItemsLabels = inactiveItems.labels || {};\n              var data = [];\n\n              for (var i = 0; i < count; i++) {\n                var currentSeries = series[i];\n                var seriesVisible = currentSeries.visible !== false;\n\n                if (currentSeries.visibleInLegend === false) {\n                  continue;\n                }\n\n                var text = currentSeries.name;\n                var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n\n                if (labelTemplate) {\n                  text = labelTemplate({\n                    text: hasValue(text) ? text : \"\",\n                    series: currentSeries\n                  });\n                }\n\n                var defaults = currentSeries._defaults;\n                var color = currentSeries.color;\n\n                if (isFunction(color) && defaults) {\n                  color = defaults.color;\n                }\n\n                var itemLabelOptions = void 0,\n                    markerColor = void 0;\n\n                if (seriesVisible) {\n                  itemLabelOptions = {};\n                  markerColor = color;\n                } else {\n                  itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                  };\n                  markerColor = inactiveItems.markers.color;\n                }\n\n                if (hasValue(text) && text !== \"\") {\n                  data.push({\n                    text: text,\n                    labels: itemLabelOptions,\n                    markerColor: markerColor,\n                    series: currentSeries,\n                    active: seriesVisible\n                  });\n                }\n              }\n\n              append(legend.items, data);\n            },\n            groupAxes: function (panes) {\n              var xAxes = [];\n              var yAxes = [];\n\n              for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n                var paneAxes = panes[paneIx].axes;\n\n                for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                  var axis = paneAxes[axisIx];\n\n                  if (axis.options.vertical) {\n                    yAxes.push(axis);\n                  } else {\n                    xAxes.push(axis);\n                  }\n                }\n              }\n\n              return {\n                x: xAxes,\n                y: yAxes,\n                any: xAxes.concat(yAxes)\n              };\n            },\n            groupSeriesByPane: function () {\n              var this$1 = this;\n              var series = this.series;\n              var seriesByPane = {};\n\n              for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var pane = this$1.seriesPaneName(currentSeries);\n\n                if (seriesByPane[pane]) {\n                  seriesByPane[pane].push(currentSeries);\n                } else {\n                  seriesByPane[pane] = [currentSeries];\n                }\n              }\n\n              return seriesByPane;\n            },\n            filterVisibleSeries: function (series) {\n              var result = [];\n\n              for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n\n                if (currentSeries.visible !== false) {\n                  result.push(currentSeries);\n                }\n              }\n\n              return result;\n            },\n            reflow: function (targetBox) {\n              var options = this.options.plotArea;\n              var panes = this.panes;\n              var margin = getSpacing(options.margin);\n              this.box = targetBox.clone().unpad(margin);\n              this.reflowPanes();\n              this.detachLabels();\n              this.reflowAxes(panes);\n              this.reflowCharts(panes);\n            },\n            redraw: function (panes) {\n              var this$1 = this;\n              var panesArray = [].concat(panes);\n              this.initSeries(); //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n\n              var root = this.getRoot();\n\n              if (root) {\n                root.cleanGradients();\n              }\n\n              for (var i = 0; i < panesArray.length; i++) {\n                this$1.removeCrosshairs(panesArray[i]);\n                panesArray[i].empty();\n              }\n\n              this.render(panesArray);\n              this.detachLabels();\n              this.reflowAxes(this.panes);\n              this.reflowCharts(panesArray);\n              this.createCrosshairs(panesArray);\n\n              for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n                panesArray[i$1].refresh();\n              }\n            },\n            axisCrossingValues: function (axis, crossingAxes) {\n              var options = axis.options;\n              var crossingValues = [].concat(options.axisCrossingValues || options.axisCrossingValue);\n              var valuesToAdd = crossingAxes.length - crossingValues.length;\n              var defaultValue = crossingValues[0] || 0;\n\n              for (var i = 0; i < valuesToAdd; i++) {\n                crossingValues.push(defaultValue);\n              }\n\n              return crossingValues;\n            },\n            alignAxisTo: function (axis, targetAxis, crossingValue, targetCrossingValue) {\n              var slot = axis.getSlot(crossingValue, crossingValue, true);\n              var slotEdge = axis.options.reverse ? 2 : 1;\n              var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n              var targetEdge = targetAxis.options.reverse ? 2 : 1;\n              var axisBox = axis.box.translate(targetSlot[X + targetEdge] - slot[X + slotEdge], targetSlot[Y + targetEdge] - slot[Y + slotEdge]);\n\n              if (axis.pane !== targetAxis.pane) {\n                axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n              }\n\n              axis.reflow(axisBox);\n            },\n            alignAxes: function (xAxes, yAxes) {\n              var this$1 = this;\n              var xAnchor = xAxes[0];\n              var yAnchor = yAxes[0];\n              var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n              var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n              var leftAnchors = {};\n              var rightAnchors = {};\n              var topAnchors = {};\n              var bottomAnchors = {};\n\n              for (var i = 0; i < yAxes.length; i++) {\n                var axis = yAxes[i];\n                var pane = axis.pane;\n                var paneId = pane.id;\n                var visible = axis.options.visible !== false; // Locate pane anchor, if any, and use its axisCrossingValues\n\n                var anchor = paneAnchor(xAxes, pane) || xAnchor;\n                var anchorCrossings = xAnchorCrossings;\n\n                if (anchor !== xAnchor) {\n                  anchorCrossings = this$1.axisCrossingValues(anchor, yAxes);\n                }\n\n                this$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                if (axis.options._overlap) {\n                  continue;\n                }\n\n                if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                  // Push the axis to the left the previous y-axis so they don't overlap\n                  if (leftAnchors[paneId]) {\n                    axis.reflow(axis.box.alignTo(leftAnchors[paneId].box, LEFT).translate(-axis.options.margin, 0));\n                  }\n\n                  if (visible) {\n                    leftAnchors[paneId] = axis;\n                  }\n                }\n\n                if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                  // Flip the labels on the right if we're at the right end of the pane\n                  if (!axis._mirrored) {\n                    axis.options.labels.mirror = !axis.options.labels.mirror;\n                    axis._mirrored = true;\n                  }\n\n                  this$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]); // Push the axis to the right the previous y-axis so they don't overlap\n\n                  if (rightAnchors[paneId]) {\n                    axis.reflow(axis.box.alignTo(rightAnchors[paneId].box, RIGHT).translate(axis.options.margin, 0));\n                  }\n\n                  if (visible) {\n                    rightAnchors[paneId] = axis;\n                  }\n                }\n\n                if (i !== 0 && yAnchor.pane === axis.pane) {\n                  axis.alignTo(yAnchor);\n                  axis.reflow(axis.box);\n                }\n              }\n\n              for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n                var axis$1 = xAxes[i$1];\n                var pane$1 = axis$1.pane;\n                var paneId$1 = pane$1.id;\n                var visible$1 = axis$1.options.visible !== false; // Locate pane anchor and use its axisCrossingValues\n\n                var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n                var anchorCrossings$1 = yAnchorCrossings;\n\n                if (anchor$1 !== yAnchor) {\n                  anchorCrossings$1 = this$1.axisCrossingValues(anchor$1, xAxes);\n                }\n\n                this$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                if (axis$1.options._overlap) {\n                  continue;\n                }\n\n                if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                  // Flip the labels on top if we're at the top of the pane\n                  if (!axis$1._mirrored) {\n                    axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                    axis$1._mirrored = true;\n                  }\n\n                  this$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]); // Push the axis above the previous x-axis so they don't overlap\n\n                  if (topAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box.alignTo(topAnchors[paneId$1].box, TOP).translate(0, -axis$1.options.margin));\n                  }\n\n                  if (visible$1) {\n                    topAnchors[paneId$1] = axis$1;\n                  }\n                }\n\n                if (round(axis$1.lineBox().y2, datavizConstants.COORD_PRECISION) === round(anchor$1.lineBox().y2, datavizConstants.COORD_PRECISION)) {\n                  // Push the axis below the previous x-axis so they don't overlap\n                  if (bottomAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box.alignTo(bottomAnchors[paneId$1].box, BOTTOM).translate(0, axis$1.options.margin));\n                  }\n\n                  if (visible$1) {\n                    bottomAnchors[paneId$1] = axis$1;\n                  }\n                }\n\n                if (i$1 !== 0) {\n                  axis$1.alignTo(xAnchor);\n                  axis$1.reflow(axis$1.box);\n                }\n              }\n            },\n            shrinkAxisWidth: function (panes) {\n              var axes = this.groupAxes(panes).any;\n              var axisBox = axisGroupBox(axes);\n              var overflowX = 0;\n\n              for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n\n                if (currentPane.axes.length > 0) {\n                  overflowX = Math.max(overflowX, axisBox.width() - currentPane.contentBox.width());\n                }\n              }\n\n              if (overflowX !== 0) {\n                for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                  var currentAxis = axes[i$1];\n\n                  if (!currentAxis.options.vertical) {\n                    currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                  }\n                }\n              }\n            },\n            shrinkAxisHeight: function (panes) {\n              var shrinked;\n\n              for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                var axes = currentPane.axes;\n                var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n                if (overflowY !== 0) {\n                  for (var j = 0; j < axes.length; j++) {\n                    var currentAxis = axes[j];\n\n                    if (currentAxis.options.vertical) {\n                      currentAxis.reflow(currentAxis.box.shrink(0, overflowY));\n                    }\n                  }\n\n                  shrinked = true;\n                }\n              }\n\n              return shrinked;\n            },\n            fitAxes: function (panes) {\n              var axes = this.groupAxes(panes).any;\n              var offsetX = 0;\n\n              for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                var paneAxes = currentPane.axes;\n                var paneBox = currentPane.contentBox;\n\n                if (paneAxes.length > 0) {\n                  var axisBox = axisGroupBox(paneAxes); // OffsetY is calculated and applied per pane\n\n                  var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2); // OffsetX is calculated and applied globally\n\n                  offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                  for (var j = 0; j < paneAxes.length; j++) {\n                    var currentAxis = paneAxes[j];\n                    currentAxis.reflow(currentAxis.box.translate(0, offsetY));\n                  }\n                }\n              }\n\n              for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis$1 = axes[i$1];\n                currentAxis$1.reflow(currentAxis$1.box.translate(offsetX, 0));\n              }\n            },\n            reflowAxes: function (panes) {\n              var this$1 = this;\n              var axes = this.groupAxes(panes);\n\n              for (var i = 0; i < panes.length; i++) {\n                this$1.reflowPaneAxes(panes[i]);\n              }\n\n              if (axes.x.length > 0 && axes.y.length > 0) {\n                this.alignAxes(axes.x, axes.y);\n                this.shrinkAxisWidth(panes);\n                this.autoRotateAxisLabels(axes);\n                this.alignAxes(axes.x, axes.y);\n\n                if (this.shrinkAxisWidth(panes)) {\n                  this.alignAxes(axes.x, axes.y);\n                }\n\n                this.shrinkAxisHeight(panes);\n                this.alignAxes(axes.x, axes.y);\n\n                if (this.shrinkAxisHeight(panes)) {\n                  this.alignAxes(axes.x, axes.y);\n                }\n\n                this.fitAxes(panes);\n              }\n            },\n            autoRotateAxisLabels: function (groupedAxes) {\n              var this$1 = this;\n              var ref = this;\n              var panes = ref.panes;\n              var axes = allPaneAxes(panes);\n              var rotated;\n\n              for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n\n                if (axis.autoRotateLabels()) {\n                  rotated = true;\n                }\n              }\n\n              if (rotated) {\n                for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                  this$1.reflowPaneAxes(panes[idx$1]);\n                }\n\n                if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                  this.alignAxes(groupedAxes.x, groupedAxes.y);\n                  this.shrinkAxisWidth(panes);\n                }\n              }\n            },\n            reflowPaneAxes: function (pane) {\n              var axes = pane.axes;\n              var length = axes.length;\n\n              if (length > 0) {\n                for (var i = 0; i < length; i++) {\n                  axes[i].reflow(pane.contentBox);\n                }\n              }\n            },\n            reflowCharts: function (panes) {\n              var charts = this.charts;\n              var count = charts.length;\n              var box = this.box;\n\n              for (var i = 0; i < count; i++) {\n                var chartPane = charts[i].pane;\n\n                if (!chartPane || inArray(chartPane, panes)) {\n                  charts[i].reflow(box);\n                }\n              }\n            },\n            reflowPanes: function () {\n              var ref = this;\n              var box = ref.box;\n              var panes = ref.panes;\n              var panesLength = panes.length;\n              var remainingHeight = box.height();\n              var remainingPanes = panesLength;\n              var autoHeightPanes = 0;\n              var top = box.y1;\n\n              for (var i = 0; i < panesLength; i++) {\n                var currentPane = panes[i];\n                var height = currentPane.options.height;\n                currentPane.options.width = box.width();\n\n                if (!currentPane.options.height) {\n                  autoHeightPanes++;\n                } else {\n                  if (height.indexOf && height.indexOf(\"%\")) {\n                    var percents = parseInt(height, 10) / 100;\n                    currentPane.options.height = percents * box.height();\n                  }\n\n                  currentPane.reflow(box.clone());\n                  remainingHeight -= currentPane.options.height;\n                }\n              }\n\n              for (var i$1 = 0; i$1 < panesLength; i$1++) {\n                var currentPane$1 = panes[i$1];\n\n                if (!currentPane$1.options.height) {\n                  currentPane$1.options.height = remainingHeight / autoHeightPanes;\n                }\n              }\n\n              for (var i$2 = 0; i$2 < panesLength; i$2++) {\n                var currentPane$2 = panes[i$2];\n                var paneBox = box.clone().move(box.x1, top);\n                currentPane$2.reflow(paneBox);\n                remainingPanes--;\n                top += currentPane$2.options.height;\n              }\n            },\n            backgroundBox: function () {\n              var axes = this.axes;\n              var axesCount = axes.length;\n              var box;\n\n              for (var i = 0; i < axesCount; i++) {\n                var axisA = axes[i];\n\n                for (var j = 0; j < axesCount; j++) {\n                  var axisB = axes[j];\n\n                  if (axisA.options.vertical !== axisB.options.vertical) {\n                    var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                    if (!box) {\n                      box = lineBox;\n                    } else {\n                      box = box.wrap(lineBox);\n                    }\n                  }\n                }\n              }\n\n              return box || this.box;\n            },\n            chartsBoxes: function () {\n              var panes = this.panes;\n              var boxes = [];\n\n              for (var idx = 0; idx < panes.length; idx++) {\n                boxes.push(panes[idx].chartsBox());\n              }\n\n              return boxes;\n            },\n            addBackgroundPaths: function (multipath) {\n              var boxes = this.chartsBoxes();\n\n              for (var idx = 0; idx < boxes.length; idx++) {\n                multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n              }\n            },\n            backgroundContainsPoint: function (point) {\n              var boxes = this.chartsBoxes();\n\n              for (var idx = 0; idx < boxes.length; idx++) {\n                if (boxes[idx].containsPoint(point)) {\n                  return true;\n                }\n              }\n            },\n            createVisual: function () {\n              ChartElement.fn.createVisual.call(this);\n              var options = this.options.plotArea;\n              var opacity = options.opacity;\n              var background = options.background;\n              var border = options.border;\n\n              if (border === void 0) {\n                border = {};\n              }\n\n              if (isTransparent(background)) {\n                background = WHITE;\n                opacity = 0;\n              }\n\n              var bg = this._bgVisual = new drawing.MultiPath({\n                fill: {\n                  color: background,\n                  opacity: opacity\n                },\n                stroke: {\n                  color: border.width ? border.color : \"\",\n                  width: border.width,\n                  dashType: border.dashType\n                },\n                zIndex: -1\n              });\n              this.addBackgroundPaths(bg);\n              this.appendVisual(bg);\n            },\n            pointsByCategoryIndex: function (categoryIndex) {\n              var charts = this.charts;\n              var result = [];\n\n              if (categoryIndex !== null) {\n                for (var i = 0; i < charts.length; i++) {\n                  var chart = charts[i];\n\n                  if (chart.pane.options.name === \"_navigator\") {\n                    continue;\n                  }\n\n                  var points = charts[i].categoryPoints[categoryIndex];\n\n                  if (points && points.length) {\n                    for (var j = 0; j < points.length; j++) {\n                      var point = points[j];\n\n                      if (point && defined(point.value) && point.value !== null) {\n                        result.push(point);\n                      }\n                    }\n                  }\n                }\n              }\n\n              return result;\n            },\n            pointsBySeriesIndex: function (seriesIndex) {\n              return this.filterPoints(function (point) {\n                return point.series.index === seriesIndex;\n              });\n            },\n            pointsBySeriesName: function (name) {\n              return this.filterPoints(function (point) {\n                return point.series.name === name;\n              });\n            },\n            filterPoints: function (callback) {\n              var charts = this.charts;\n              var result = [];\n\n              for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                var points = chart.points;\n\n                for (var j = 0; j < points.length; j++) {\n                  var point = points[j];\n\n                  if (point && point.visible !== false && callback(point)) {\n                    result.push(point);\n                  }\n                }\n              }\n\n              return result;\n            },\n            findPoint: function (callback) {\n              var charts = this.charts;\n\n              for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                var points = chart.points;\n\n                for (var j = 0; j < points.length; j++) {\n                  var point = points[j];\n\n                  if (point && point.visible !== false && callback(point)) {\n                    return point;\n                  }\n                }\n              }\n            },\n            paneByPoint: function (point) {\n              var panes = this.panes;\n\n              for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n\n                if (pane.box.containsPoint(point)) {\n                  return pane;\n                }\n              }\n            },\n            detachLabels: function () {\n              var axes = this.groupAxes(this.panes);\n              var xAxes = axes.x;\n              var yAxes = axes.y;\n              this.detachAxisGroupLabels(yAxes, xAxes);\n              this.detachAxisGroupLabels(xAxes, yAxes);\n            },\n            detachAxisGroupLabels: function (axes, crossingAxes) {\n              var this$1 = this;\n              var labelAxisCount = 0;\n\n              for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var pane = axis.pane;\n                var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n                var axisIndex = i + labelAxisCount;\n                var labelAxis = this$1.createLabelAxis(axis, axisIndex, anchor);\n\n                if (labelAxis) {\n                  labelAxisCount++;\n                  var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                  pane.appendAxisAt(labelAxis, pos);\n                }\n              }\n            },\n            createLabelAxis: function (axis, axisIndex, anchor) {\n              var labelOptions = axis.options.labels;\n              var position = labelOptions.position;\n              var onAxis = position !== datavizConstants.END && position !== datavizConstants.START;\n              var visible = labelOptions.visible;\n\n              if (onAxis || visible === false) {\n                return null;\n              }\n\n              var allAxes = this.groupAxes(this.panes);\n              var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n              var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n              var end = position === datavizConstants.END;\n              var range = anchor.range();\n              var edge = end ? range.max : range.min;\n              var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n              if (crossingValue - edge === 0) {\n                return null;\n              }\n\n              anchorCrossings.splice(axisIndex + 1, 0, edge);\n              anchor.options.axisCrossingValues = anchorCrossings;\n              var labelAxis = axis.clone();\n              axis.clear();\n              labelAxis.options.name = undefined;\n              labelAxis.options.line.visible = false;\n              labelAxis.options.crosshair = undefined;\n              labelAxis.options.notes = undefined;\n              labelAxis.options.plotBands = undefined;\n              return labelAxis;\n            }\n          });\n\n          function isSingleAxis(axis) {\n            return !axis.pane.axes.some(function (a) {\n              return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false;\n            });\n          }\n\n          function axisGroupBox(axes) {\n            var length = axes.length;\n            var box;\n\n            for (var i = 0; i < length; i++) {\n              var axis = axes[i];\n              var visible = axis.options.visible !== false;\n\n              if (visible || isSingleAxis(axis)) {\n                var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n                if (!box) {\n                  box = axisBox.clone();\n                } else {\n                  box.wrap(axisBox);\n                }\n              }\n            }\n\n            return box || new Box();\n          }\n\n          function paneAnchor(axes, pane) {\n            for (var i = 0; i < axes.length; i++) {\n              var anchor = axes[i];\n\n              if (anchor && anchor.pane === pane) {\n                return anchor;\n              }\n            }\n          }\n\n          function isTransparent(color) {\n            return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n          }\n\n          var allPaneAxes = function (panes) {\n            return panes.reduce(function (acc, pane) {\n              return acc.concat(pane.axes);\n            }, []);\n          };\n\n          setDefaultOptions(PlotAreaBase, {\n            series: [],\n            plotArea: {\n              margin: {}\n            },\n            background: \"\",\n            border: {\n              color: BLACK,\n              width: 0\n            },\n            paneDefaults: {\n              title: {}\n            },\n            legend: {\n              inactiveItems: {\n                labels: {\n                  color: \"#919191\"\n                },\n                markers: {\n                  color: \"#919191\"\n                }\n              }\n            }\n          });\n          var PlotAreaEventsMixin = {\n            hover: function (chart, e) {\n              this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n            },\n            click: function (chart, e) {\n              this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n            }\n          };\n          var SeriesAggregator = Class.extend({\n            init: function (series, binder, defaultAggregates) {\n              var canonicalFields = binder.canonicalFields(series);\n              var valueFields = binder.valueFields(series);\n              var sourceFields = binder.sourceFields(series, canonicalFields);\n              var seriesFields = this._seriesFields = [];\n              var defaults = defaultAggregates.query(series.type);\n              var rootAggregate = series.aggregate || defaults;\n              this._series = series;\n              this._binder = binder;\n\n              for (var i = 0; i < canonicalFields.length; i++) {\n                var field = canonicalFields[i];\n                var fieldAggregate = void 0;\n\n                if (isObject(rootAggregate)) {\n                  fieldAggregate = rootAggregate[field];\n                } else if (i === 0 || inArray(field, valueFields)) {\n                  fieldAggregate = rootAggregate;\n                } else {\n                  break;\n                }\n\n                if (fieldAggregate) {\n                  seriesFields.push({\n                    canonicalName: field,\n                    name: sourceFields[i],\n                    transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                  });\n                }\n              }\n            },\n            aggregatePoints: function (srcPoints, group) {\n              var this$1 = this;\n              var ref = this;\n              var series = ref._series;\n              var seriesFields = ref._seriesFields;\n\n              var data = this._bindPoints(srcPoints || []);\n\n              var firstDataItem = data.dataItems[0];\n              var result = {};\n\n              if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n                var fn = function () {};\n\n                fn.prototype = firstDataItem;\n                result = new fn();\n              }\n\n              for (var i = 0; i < seriesFields.length; i++) {\n                var field = seriesFields[i];\n\n                var srcValues = this$1._bindField(data.values, field.canonicalName);\n\n                var value = field.transform(srcValues, series, data.dataItems, group);\n\n                if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                  result = value;\n                  break;\n                } else {\n                  if (defined(value)) {\n                    setValue(field.name, result, value);\n                  }\n                }\n              }\n\n              return result;\n            },\n            _bindPoints: function (points) {\n              var ref = this;\n              var binder = ref._binder;\n              var series = ref._series;\n              var values = [];\n              var dataItems = [];\n\n              for (var i = 0; i < points.length; i++) {\n                var pointIx = points[i];\n                values.push(binder.bindPoint(series, pointIx));\n                dataItems.push(series.data[pointIx]);\n              }\n\n              return {\n                values: values,\n                dataItems: dataItems\n              };\n            },\n            _bindField: function (data, field) {\n              var values = [];\n              var count = data.length;\n\n              for (var i = 0; i < count; i++) {\n                var item = data[i];\n                var valueFields = item.valueFields;\n                var value = void 0;\n\n                if (defined(valueFields[field])) {\n                  value = valueFields[field];\n                } else {\n                  value = item.fields[field];\n                }\n\n                values.push(value);\n              }\n\n              return values;\n            }\n          });\n\n          function setValue(fieldName, target, value) {\n            var parentObj = target;\n            var field = fieldName;\n\n            if (fieldName.indexOf(\".\") > -1) {\n              var parts = fieldName.split(\".\");\n\n              while (parts.length > 1) {\n                field = parts.shift();\n\n                if (!defined(parentObj[field])) {\n                  parentObj[field] = {};\n                }\n\n                parentObj = parentObj[field];\n              }\n\n              field = parts.shift();\n            }\n\n            parentObj[field] = value;\n          }\n\n          var DefaultAggregates = Class.extend({\n            init: function () {\n              this._defaults = {};\n            },\n            register: function (seriesTypes, aggregates) {\n              var this$1 = this;\n\n              for (var i = 0; i < seriesTypes.length; i++) {\n                this$1._defaults[seriesTypes[i]] = aggregates;\n              }\n            },\n            query: function (seriesType) {\n              return this._defaults[seriesType];\n            }\n          });\n          DefaultAggregates.current = new DefaultAggregates();\n          var RangeBar = Bar.extend({\n            createLabel: function () {\n              var labels = this.options.labels;\n              var fromOptions = deepExtend({}, labels, labels.from);\n              var toOptions = deepExtend({}, labels, labels.to);\n\n              if (fromOptions.visible) {\n                this.labelFrom = this._createLabel(fromOptions);\n                this.append(this.labelFrom);\n              }\n\n              if (toOptions.visible) {\n                this.labelTo = this._createLabel(toOptions);\n                this.append(this.labelTo);\n              }\n            },\n            _createLabel: function (options) {\n              var labelTemplate = getTemplate(options);\n              var pointData = this.pointData();\n              var labelText;\n\n              if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n              } else {\n                labelText = this.formatValue(options.format);\n              }\n\n              return new BarLabel(labelText, deepExtend({\n                vertical: this.options.vertical\n              }, options), pointData);\n            },\n            reflow: function (targetBox) {\n              this.render();\n              var ref = this;\n              var labelFrom = ref.labelFrom;\n              var labelTo = ref.labelTo;\n              var value = ref.value;\n              this.box = targetBox;\n\n              if (labelFrom) {\n                labelFrom.options.aboveAxis = value.from > value.to;\n                labelFrom.reflow(targetBox);\n              }\n\n              if (labelTo) {\n                labelTo.options.aboveAxis = value.to > value.from;\n                labelTo.reflow(targetBox);\n              }\n\n              if (this.note) {\n                this.note.reflow(targetBox);\n              }\n            }\n          });\n          RangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n            labels: {\n              format: \"{0} - {1}\"\n            },\n            tooltip: {\n              format: \"{1}\"\n            }\n          });\n          var RangeBarChart = BarChart.extend({\n            pointType: function () {\n              return RangeBar;\n            },\n            pointValue: function (data) {\n              return data.valueFields;\n            },\n            formatPointValue: function (point, format) {\n              if (point.value.from === null && point.value.to === null) {\n                return \"\";\n              }\n\n              return this.chartService.format.auto(format, point.value.from, point.value.to);\n            },\n            plotRange: function (point) {\n              if (!point) {\n                return 0;\n              }\n\n              return [point.value.from, point.value.to];\n            },\n            updateRange: function (value, fields) {\n              var axisName = fields.series.axis;\n              var from = value.from;\n              var to = value.to;\n              var axisRange = this.valueAxisRanges[axisName];\n\n              if (value !== null && isNumber(from) && isNumber(to)) {\n                axisRange = this.valueAxisRanges[axisName] = axisRange || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n                axisRange.min = Math.min(axisRange.min, from);\n                axisRange.max = Math.max(axisRange.max, from);\n                axisRange.min = Math.min(axisRange.min, to);\n                axisRange.max = Math.max(axisRange.max, to);\n              }\n            },\n            aboveAxis: function (point) {\n              var value = point.value;\n              return value.from < value.to;\n            }\n          });\n          RangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n          var RangeLinePoint = LinePoint.extend({\n            aliasFor: function () {\n              return this.parent;\n            }\n          });\n          var AUTO = 'auto';\n          var DEFAULT_FROM_FORMAT = '{0}';\n          var DEFAULT_TO_FORMAT = '{1}';\n          var RangeAreaPoint = ChartElement.extend({\n            init: function (value, options) {\n              ChartElement.fn.init.call(this);\n              this.value = value;\n              this.options = options;\n              this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n              this.tooltipTracking = true;\n              this.initLabelsFormat();\n            },\n            render: function () {\n              if (this._rendered) {\n                return;\n              }\n\n              this._rendered = true;\n              var ref = this.options;\n              var markers = ref.markers;\n              var labels = ref.labels;\n              var value = this.value;\n              var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n                labels: labels.from,\n                markers: markers.from\n              }));\n              var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n                labels: labels.to,\n                markers: markers.to\n              }));\n              this.copyFields(fromPoint);\n              this.copyFields(toPoint);\n              this.append(fromPoint);\n              this.append(toPoint);\n            },\n            reflow: function (targetBox) {\n              this.render();\n              var fromBox = targetBox.from;\n              var toBox = targetBox.to;\n              this.positionLabels(fromBox, toBox);\n              this.fromPoint.reflow(fromBox);\n              this.toPoint.reflow(toBox);\n              this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n            },\n            createHighlight: function () {\n              var group = new Group();\n              group.append(this.fromPoint.createHighlight());\n              group.append(this.toPoint.createHighlight());\n              return group;\n            },\n            highlightVisual: function () {\n              return this.visual;\n            },\n            highlightVisualArgs: function () {\n              return {\n                options: this.options,\n                from: this.fromPoint.highlightVisualArgs(),\n                to: this.toPoint.highlightVisualArgs()\n              };\n            },\n            tooltipAnchor: function () {\n              var clipBox = this.owner.pane.clipBox();\n              var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n              if (showTooltip) {\n                var box = this.box;\n                var center = box.center();\n                var horizontalAlign = LEFT;\n                var x, y, verticalAlign;\n\n                if (this.options.vertical) {\n                  x = center.x;\n                  y = box.y1 - TOOLTIP_OFFSET;\n                  verticalAlign = BOTTOM;\n                } else {\n                  x = box.x2 + TOOLTIP_OFFSET;\n                  y = center.y;\n                  verticalAlign = CENTER;\n                }\n\n                return {\n                  point: new Point(x, y),\n                  align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                  }\n                };\n              }\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            },\n            overlapsBox: function (box) {\n              return this.box.overlaps(box);\n            },\n            unclipElements: function () {\n              this.fromPoint.unclipElements();\n              this.toPoint.unclipElements();\n            },\n            initLabelsFormat: function () {\n              var labels = this.options.labels;\n\n              if (!labels.format) {\n                if (!labels.from || !labels.from.format) {\n                  labels.from = $.extend({}, labels.from, {\n                    format: DEFAULT_FROM_FORMAT\n                  });\n                }\n\n                if (!labels.to || !labels.to.format) {\n                  labels.to = $.extend({}, labels.to, {\n                    format: DEFAULT_TO_FORMAT\n                  });\n                }\n              }\n            },\n            positionLabels: function (fromBox, toBox) {\n              var ref = this.options;\n              var labels = ref.labels;\n              var vertical = ref.vertical;\n\n              if (labels.position === AUTO) {\n                var fromLabelPosition, toLabelPosition;\n\n                if (vertical) {\n                  if (toBox.y1 <= fromBox.y1) {\n                    toLabelPosition = ABOVE;\n                    fromLabelPosition = BELOW;\n                  } else {\n                    toLabelPosition = BELOW;\n                    fromLabelPosition = ABOVE;\n                  }\n                } else {\n                  if (toBox.x1 <= fromBox.x1) {\n                    toLabelPosition = LEFT;\n                    fromLabelPosition = RIGHT;\n                  } else {\n                    toLabelPosition = RIGHT;\n                    fromLabelPosition = LEFT;\n                  }\n                }\n\n                if (!labels.from || !labels.from.position) {\n                  this.fromPoint.options.labels.position = fromLabelPosition;\n                }\n\n                if (!labels.to || !labels.to.position) {\n                  this.toPoint.options.labels.position = toLabelPosition;\n                }\n              }\n            },\n            copyFields: function (point) {\n              point.dataItem = this.dataItem;\n              point.category = this.category;\n              point.series = this.series;\n              point.color = this.color;\n              point.owner = this.owner;\n            }\n          });\n          deepExtend(RangeAreaPoint.prototype, PointEventsMixin);\n          deepExtend(RangeAreaPoint.prototype, NoteMixin);\n          RangeAreaPoint.prototype.defaults = {\n            markers: {\n              visible: false,\n              background: WHITE,\n              size: LINE_MARKER_SIZE,\n              type: CIRCLE,\n              border: {\n                width: 2\n              },\n              opacity: 1\n            },\n            labels: {\n              visible: false,\n              margin: getSpacing(3),\n              padding: getSpacing(4),\n              animation: {\n                type: FADEIN,\n                delay: INITIAL_ANIMATION_DURATION\n              },\n              position: AUTO\n            },\n            notes: {\n              label: {}\n            },\n            highlight: {\n              markers: {\n                border: {\n                  color: WHITE,\n                  width: 2\n                }\n              },\n              zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n            },\n            tooltip: {\n              format: '{0} - {1}'\n            }\n          };\n          var RangeAreaSegment = AreaSegment.extend({\n            createStrokeSegments: function () {\n              return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n            },\n            stackSegments: function () {\n              var fromSegments = this.fromSegments;\n\n              if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n              }\n\n              return fromSegments;\n            },\n            createStroke: function (style) {\n              var toPath = new Path(style);\n              var fromPath = new Path(style);\n              toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n              fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n              this.visual.append(toPath);\n              this.visual.append(fromPath);\n            },\n            hasStackSegment: function () {\n              return true;\n            },\n            fromPoints: function () {\n              return this.linePoints.map(function (point) {\n                return point.fromPoint;\n              });\n            },\n            toPoints: function () {\n              return this.linePoints.map(function (point) {\n                return point.toPoint;\n              });\n            }\n          });\n          var SplineRangeAreaSegment = RangeAreaSegment.extend({\n            createStrokeSegments: function () {\n              return this.createCurveSegments(this.toPoints());\n            },\n            stackSegments: function () {\n              var fromSegments = this.fromSegments;\n\n              if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n              }\n\n              return fromSegments;\n            },\n            createCurveSegments: function (points) {\n              var curveProcessor = new CurveProcessor();\n              return curveProcessor.process(this.toGeometryPoints(points));\n            }\n          });\n          var StepRangeAreaSegment = RangeAreaSegment.extend({\n            createStrokeSegments: function () {\n              return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n            },\n            stackSegments: function () {\n              var fromSegments = this.fromSegments;\n\n              if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n                fromSegments.reverse();\n              }\n\n              return fromSegments;\n            }\n          });\n          deepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n          var RangeAreaChart = CategoricalChart.extend({\n            render: function () {\n              CategoricalChart.fn.render.call(this);\n              this.renderSegments();\n            },\n            pointType: function () {\n              return RangeAreaPoint;\n            },\n            createPoint: function (data, fields) {\n              var categoryIx = fields.categoryIx;\n              var category = fields.category;\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var value = data.valueFields;\n\n              if (!hasValue(value.from) && !hasValue(value.to)) {\n                if (this.seriesMissingValues(series) === ZERO) {\n                  value = {\n                    from: 0,\n                    to: 0\n                  };\n                } else {\n                  return null;\n                }\n              }\n\n              var pointOptions = this.pointOptions(series, seriesIx);\n              pointOptions = this.evalPointOptions(pointOptions, value, category, categoryIx, series, seriesIx);\n              var color = data.fields.color || series.color;\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              }\n\n              var point = new RangeAreaPoint(value, pointOptions);\n              point.color = color;\n              this.append(point);\n              return point;\n            },\n            createSegment: function (linePoints, currentSeries, seriesIx) {\n              var style = (currentSeries.line || {}).style;\n              var segmentType;\n\n              if (style === \"smooth\") {\n                segmentType = SplineRangeAreaSegment;\n              } else if (style === \"step\") {\n                segmentType = StepRangeAreaSegment;\n              } else {\n                segmentType = RangeAreaSegment;\n              }\n\n              return new segmentType(linePoints, currentSeries, seriesIx);\n            },\n            plotRange: function (point, startValue) {\n              if (!point) {\n                return [startValue, startValue];\n              }\n\n              return [point.value.from, point.value.to];\n            },\n            valueSlot: function (valueAxis, plotRange) {\n              var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n              var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n\n              if (fromSlot && toSlot) {\n                return {\n                  from: fromSlot,\n                  to: toSlot\n                };\n              }\n            },\n            pointSlot: function (categorySlot, valueSlot) {\n              var from = valueSlot.from;\n              var to = valueSlot.to;\n              var fromSlot, toSlot;\n\n              if (this.options.invertAxes) {\n                fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n                toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n              } else {\n                fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n                toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n              }\n\n              return {\n                from: fromSlot,\n                to: toSlot\n              };\n            },\n            addValue: function (data, fields) {\n              var valueFields = data.valueFields;\n\n              if (!isNumber(valueFields.from)) {\n                valueFields.from = valueFields.to;\n              }\n\n              if (!isNumber(valueFields.to)) {\n                valueFields.to = valueFields.from;\n              }\n\n              CategoricalChart.fn.addValue.call(this, data, fields);\n            },\n            updateRange: function (value, fields) {\n              if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n                var axisName = fields.series.axis;\n                var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || {\n                  min: MAX_VALUE,\n                  max: MIN_VALUE\n                };\n                var from = value.from;\n                var to = value.to;\n                axisRange.min = Math.min(axisRange.min, from, to);\n                axisRange.max = Math.max(axisRange.max, from, to);\n              }\n            },\n            formatPointValue: function (point, format) {\n              var value = point.value;\n              return this.chartService.format.auto(format, value.from, value.to);\n            },\n            animationPoints: function () {\n              var points = this.points;\n              var result = [];\n\n              for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n\n                if (point) {\n                  result.push((point.fromPoint || {}).marker);\n                  result.push((point.toPoint || {}).marker);\n                }\n              }\n\n              return result.concat(this._segments);\n            }\n          });\n          deepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n          var OHLCPoint = Candlestick.extend({\n            reflow: function (box) {\n              var ref = this;\n              var options = ref.options;\n              var value = ref.value;\n              var chart = ref.owner;\n              var valueAxis = chart.seriesValueAxis(options);\n              var oPoints = [];\n              var cPoints = [];\n              var lhPoints = [];\n              var lhSlot = valueAxis.getSlot(value.low, value.high);\n              var oSlot = valueAxis.getSlot(value.open, value.open);\n              var cSlot = valueAxis.getSlot(value.close, value.close);\n              oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n              oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n              var mid = lhSlot.center().x;\n              oPoints.push([oSlot.x1, oSlot.y1]);\n              oPoints.push([mid, oSlot.y1]);\n              cPoints.push([mid, cSlot.y1]);\n              cPoints.push([cSlot.x2, cSlot.y1]);\n              lhPoints.push([mid, lhSlot.y1]);\n              lhPoints.push([mid, lhSlot.y2]);\n              this.lines = [oPoints, cPoints, lhPoints];\n              this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n              this.reflowNote();\n            },\n            createBody: function () {}\n          });\n          var OHLCChart = CandlestickChart.extend({\n            pointType: function () {\n              return OHLCPoint;\n            }\n          });\n          var WaterfallSegment = ChartElement.extend({\n            init: function (from, to, series) {\n              ChartElement.fn.init.call(this);\n              this.from = from;\n              this.to = to;\n              this.series = series;\n            },\n            linePoints: function () {\n              var from = this.from;\n              var ref = this;\n              var fromBox = ref.from.box;\n              var toBox = ref.to.box;\n              var points = [];\n\n              if (from.isVertical) {\n                var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n                points.push([fromBox.x1, y], [toBox.x2, y]);\n              } else {\n                var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n                points.push([x, fromBox.y1], [x, toBox.y2]);\n              }\n\n              return points;\n            },\n            createVisual: function () {\n              ChartElement.fn.createVisual.call(this);\n              var line = this.series.line || {};\n              var path = Path.fromPoints(this.linePoints(), {\n                stroke: {\n                  color: line.color,\n                  width: line.width,\n                  opacity: line.opacity,\n                  dashType: line.dashType\n                }\n              });\n              alignPathToPixel(path);\n              this.visual.append(path);\n            }\n          });\n          setDefaultOptions(WaterfallSegment, {\n            animation: {\n              type: FADEIN,\n              delay: INITIAL_ANIMATION_DURATION\n            }\n          });\n          var WaterfallChart = BarChart.extend({\n            render: function () {\n              BarChart.fn.render.call(this);\n              this.createSegments();\n            },\n            traverseDataPoints: function (callback) {\n              var this$1 = this;\n              var series = this.options.series;\n              var totalCategories = categoriesCount(series);\n              var isVertical = !this.options.invertAxes;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var total = 0;\n                var runningTotal = 0;\n\n                for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                  var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                  var value = data.valueFields.value;\n                  var summary = data.fields.summary;\n                  var from = total;\n                  var to = void 0;\n\n                  if (summary) {\n                    if (summary.toLowerCase() === \"total\") {\n                      data.valueFields.value = total;\n                      from = 0;\n                      to = total;\n                    } else {\n                      data.valueFields.value = runningTotal;\n                      to = from - runningTotal;\n                      runningTotal = 0;\n                    }\n                  } else if (isNumber(value)) {\n                    runningTotal += value;\n                    total += value;\n                    to = total;\n                  }\n\n                  callback(data, {\n                    category: this$1.categoryAxis.categoryAt(categoryIx),\n                    categoryIx: categoryIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    total: total,\n                    runningTotal: runningTotal,\n                    from: from,\n                    to: to,\n                    isVertical: isVertical\n                  });\n                }\n              }\n            },\n            updateRange: function (value, fields) {\n              BarChart.fn.updateRange.call(this, {\n                value: fields.to\n              }, fields);\n            },\n            aboveAxis: function (point) {\n              return point.value >= 0;\n            },\n            plotRange: function (point) {\n              return [point.from, point.to];\n            },\n            createSegments: function () {\n              var this$1 = this;\n              var series = this.options.series;\n              var seriesPoints = this.seriesPoints;\n              var segments = this.segments = [];\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var points = seriesPoints[seriesIx];\n\n                if (points) {\n                  var prevPoint = void 0;\n\n                  for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                    var point = points[pointIx];\n\n                    if (point && prevPoint) {\n                      var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                      segments.push(segment);\n                      this$1.append(segment);\n                    }\n\n                    prevPoint = point;\n                  }\n                }\n              }\n            }\n          });\n          var AREA_SERIES = [AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA];\n          var OUT_OF_RANGE_SERIES = [LINE, VERTICAL_LINE].concat(AREA_SERIES);\n          var CategoricalPlotArea = PlotAreaBase.extend({\n            initFields: function (series) {\n              var this$1 = this;\n              this.namedCategoryAxes = {};\n              this.namedValueAxes = {};\n              this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n\n              if (series.length > 0) {\n                this.invertAxes = inArray(series[0].type, [BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA, RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT]);\n\n                for (var i = 0; i < series.length; i++) {\n                  var stack = series[i].stack;\n\n                  if (stack && stack.type === \"100%\") {\n                    this$1.stack100 = true;\n                    break;\n                  }\n                }\n              }\n            },\n            render: function (panes) {\n              if (panes === void 0) {\n                panes = this.panes;\n              }\n\n              this.createCategoryAxes(panes);\n              this.aggregateCategories(panes);\n              this.createCategoryAxesLabels(panes);\n              this.createCharts(panes);\n              this.createValueAxes(panes);\n            },\n            removeAxis: function (axis) {\n              var axisName = axis.options.name;\n              PlotAreaBase.fn.removeAxis.call(this, axis);\n\n              if (axis instanceof CategoryAxis) {\n                delete this.namedCategoryAxes[axisName];\n              } else {\n                this.valueAxisRangeTracker.reset(axisName);\n                delete this.namedValueAxes[axisName];\n              }\n\n              if (axis === this.categoryAxis) {\n                delete this.categoryAxis;\n              }\n\n              if (axis === this.valueAxis) {\n                delete this.valueAxis;\n              }\n            },\n            createCharts: function (panes) {\n              var this$1 = this;\n              var seriesByPane = this.groupSeriesByPane();\n\n              for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1.addToLegend(paneSeries);\n                var visibleSeries = this$1.filterVisibleSeries(paneSeries);\n\n                if (!visibleSeries) {\n                  continue;\n                }\n\n                var groups = this$1.groupSeriesByCategoryAxis(visibleSeries);\n\n                for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                  this$1.createChartGroup(groups[groupIx], pane);\n                }\n              }\n            },\n            createChartGroup: function (series, pane) {\n              this.createAreaChart(filterSeriesByType(series, [AREA, VERTICAL_AREA]), pane);\n              this.createRangeAreaChart(filterSeriesByType(series, [RANGE_AREA, VERTICAL_RANGE_AREA]), pane);\n              this.createBarChart(filterSeriesByType(series, [COLUMN, BAR]), pane);\n              this.createRangeBarChart(filterSeriesByType(series, [RANGE_COLUMN, RANGE_BAR]), pane);\n              this.createBulletChart(filterSeriesByType(series, [BULLET, VERTICAL_BULLET]), pane);\n              this.createCandlestickChart(filterSeriesByType(series, CANDLESTICK), pane);\n              this.createBoxPlotChart(filterSeriesByType(series, [BOX_PLOT, VERTICAL_BOX_PLOT]), pane);\n              this.createOHLCChart(filterSeriesByType(series, OHLC), pane);\n              this.createWaterfallChart(filterSeriesByType(series, [WATERFALL, HORIZONTAL_WATERFALL]), pane);\n              this.createLineChart(filterSeriesByType(series, [LINE, VERTICAL_LINE]), pane);\n            },\n            aggregateCategories: function (panes) {\n              var this$1 = this;\n              var series = this.srcSeries || this.series;\n              var processedSeries = [];\n              this._currentPointsCache = {};\n              this._seriesPointsCache = this._seriesPointsCache || {};\n\n              for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var categoryAxis = this$1.seriesCategoryAxis(currentSeries);\n                var axisPane = this$1.findPane(categoryAxis.options.pane);\n                var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n                if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                  currentSeries = this$1.aggregateSeries(currentSeries, categoryAxis);\n                } else {\n                  currentSeries = this$1.filterSeries(currentSeries, categoryAxis);\n                }\n\n                processedSeries.push(currentSeries);\n              }\n\n              this._seriesPointsCache = this._currentPointsCache;\n              this._currentPointsCache = null;\n              this.srcSeries = series;\n              this.series = processedSeries;\n            },\n            filterSeries: function (series, categoryAxis) {\n              var dataLength = (series.data || {}).length;\n              categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n              if (!(isNumber(categoryAxis.options.min) || isNumber(categoryAxis.options.max))) {\n                return series;\n              }\n\n              var range = categoryAxis.currentRangeIndices();\n              var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n              var currentSeries = deepExtend({}, series);\n              currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n              if (outOfRangePoints) {\n                createOutOfRangePoints(currentSeries, range, dataLength, function (idx) {\n                  return {\n                    item: series.data[idx],\n                    category: categoryAxis.categoryAt(idx, true),\n                    categoryIx: idx - range.min\n                  };\n                }, function (idx) {\n                  return defined(series.data[idx]);\n                });\n              }\n\n              return currentSeries;\n            },\n            clearSeriesPointsCache: function () {\n              this._seriesPointsCache = {};\n            },\n            seriesSourcePoints: function (series, categoryAxis) {\n              var this$1 = this;\n              var key = series.index + \";\" + categoryAxis.categoriesHash();\n\n              if (this._seriesPointsCache[key]) {\n                this._currentPointsCache[key] = this._seriesPointsCache[key];\n                return this._seriesPointsCache[key];\n              }\n\n              var axisOptions = categoryAxis.options;\n              var srcCategories = axisOptions.srcCategories;\n              var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n              var srcData = series.data;\n              var getFn = dateAxis ? getDateField : getField;\n              var result = [];\n\n              if (!dateAxis) {\n                categoryAxis.mapCategories(); //fixes major performance issue caused by searching for the index for large data\n              }\n\n              for (var idx = 0; idx < srcData.length; idx++) {\n                var category = void 0;\n\n                if (series.categoryField) {\n                  category = getFn(series.categoryField, srcData[idx], this$1.chartService.intl);\n                } else {\n                  category = srcCategories[idx];\n                }\n\n                if (defined(category) && category !== null) {\n                  var categoryIx = categoryAxis.totalIndex(category);\n                  result[categoryIx] = result[categoryIx] || {\n                    items: [],\n                    category: category\n                  };\n                  result[categoryIx].items.push(idx);\n                }\n              }\n\n              this._currentPointsCache[key] = result;\n              return result;\n            },\n            aggregateSeries: function (series, categoryAxis) {\n              var srcData = series.data;\n\n              if (!srcData.length) {\n                return series;\n              }\n\n              var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n              var result = deepExtend({}, series);\n              var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n              var data = result.data = [];\n              var dataItems = categoryAxis.options.dataItems || [];\n              var range = categoryAxis.currentRangeIndices();\n\n              var categoryItem = function (idx) {\n                var categoryIdx = idx - range.min;\n                var point = srcPoints[idx];\n\n                if (!point) {\n                  point = srcPoints[idx] = {};\n                }\n\n                point.categoryIx = categoryIdx;\n\n                if (!point.item) {\n                  var category = categoryAxis.categoryAt(idx, true);\n                  point.category = category;\n                  point.item = aggregator.aggregatePoints(point.items, category);\n                }\n\n                return point;\n              };\n\n              for (var idx = range.min; idx <= range.max; idx++) {\n                var point = categoryItem(idx);\n                data[point.categoryIx] = point.item;\n\n                if (point.items && point.items.length) {\n                  dataItems[point.categoryIx] = point.item;\n                }\n              }\n\n              if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n                createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) {\n                  return srcPoints[idx];\n                });\n              }\n\n              categoryAxis.options.dataItems = dataItems;\n              return result;\n            },\n            appendChart: function (chart, pane) {\n              var series = chart.options.series;\n              var categoryAxis = this.seriesCategoryAxis(series[0]);\n              var categories = categoryAxis.options.categories;\n              var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n              if (categoriesToAdd > 0) {\n                //consider setting an option to axis instead of adding fake categories\n                categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n\n                while (categoriesToAdd--) {\n                  categories.push(\"\");\n                }\n              }\n\n              this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n              PlotAreaBase.fn.appendChart.call(this, chart, pane);\n            },\n            seriesPaneName: function (series) {\n              var options = this.options;\n              var axisName = series.axis;\n              var axisOptions = [].concat(options.valueAxis);\n              var axis = grep(axisOptions, function (a) {\n                return a.name === axisName;\n              })[0];\n              var panes = options.panes || [{}];\n              var defaultPaneName = (panes[0] || {}).name || \"default\";\n              var paneName = (axis || {}).pane || defaultPaneName;\n              return paneName;\n            },\n            seriesCategoryAxis: function (series) {\n              var axisName = series.categoryAxis;\n              var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n              if (!axis) {\n                throw new Error(\"Unable to locate category axis with name \" + axisName);\n              }\n\n              return axis;\n            },\n            stackableChartOptions: function (firstSeries, pane) {\n              var stack = firstSeries.stack;\n              var isStacked100 = stack && stack.type === \"100%\";\n              var clip = pane.options.clip;\n              return {\n                isStacked: stack,\n                isStacked100: isStacked100,\n                clip: clip\n              };\n            },\n            groupSeriesByCategoryAxis: function (series) {\n              var categoryAxes = [];\n              var unique = {};\n\n              for (var idx = 0; idx < series.length; idx++) {\n                var name = series[idx].categoryAxis || \"$$default$$\";\n\n                if (!unique.hasOwnProperty(name)) {\n                  unique[name] = true;\n                  categoryAxes.push(name);\n                }\n              }\n\n              var groups = [];\n\n              for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n                var axis = categoryAxes[axisIx];\n                var axisSeries = groupSeries(series, axis, axisIx);\n\n                if (axisSeries.length === 0) {\n                  continue;\n                }\n\n                groups.push(axisSeries);\n              }\n\n              return groups;\n            },\n            createBarChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var barChart = new BarChart(this, $.extend({\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n              }, this.stackableChartOptions(firstSeries, pane)));\n              this.appendChart(barChart, pane);\n            },\n            createRangeBarChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var rangeColumnChart = new RangeBarChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n              });\n              this.appendChart(rangeColumnChart, pane);\n            },\n            createBulletChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var bulletChart = new BulletChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n              });\n              this.appendChart(bulletChart, pane);\n            },\n            createLineChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var lineChart = new LineChart(this, $.extend({\n                invertAxes: this.invertAxes,\n                series: series\n              }, this.stackableChartOptions(firstSeries, pane)));\n              this.appendChart(lineChart, pane);\n            },\n            createAreaChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var areaChart = new AreaChart(this, $.extend({\n                invertAxes: this.invertAxes,\n                series: series\n              }, this.stackableChartOptions(firstSeries, pane)));\n              this.appendChart(areaChart, pane);\n            },\n            createRangeAreaChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var rangeAreaChart = new RangeAreaChart(this, {\n                invertAxes: this.invertAxes,\n                series: series,\n                clip: pane.options.clip\n              });\n              this.appendChart(rangeAreaChart, pane);\n            },\n            createOHLCChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var chart = new OHLCChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n              });\n              this.appendChart(chart, pane);\n            },\n            createCandlestickChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var chart = new CandlestickChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n              });\n              this.appendChart(chart, pane);\n            },\n            createBoxPlotChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var chart = new BoxPlotChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n              });\n              this.appendChart(chart, pane);\n            },\n            createWaterfallChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var waterfallChart = new WaterfallChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n              });\n              this.appendChart(waterfallChart, pane);\n            },\n            axisRequiresRounding: function (categoryAxisName, categoryAxisIndex) {\n              var this$1 = this;\n              var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n              for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n                var currentSeries = this$1.series[seriesIx];\n\n                if (inArray(currentSeries.type, AREA_SERIES)) {\n                  var line = currentSeries.line;\n\n                  if (line && line.style === STEP) {\n                    centeredSeries.push(currentSeries);\n                  }\n                }\n              }\n\n              for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n                var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n\n                if (seriesAxis === categoryAxisName || !seriesAxis && categoryAxisIndex === 0) {\n                  return true;\n                }\n              }\n            },\n            aggregatedAxis: function (categoryAxisName, categoryAxisIndex) {\n              var series = this.series;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var seriesAxis = series[seriesIx].categoryAxis || \"\";\n\n                if ((seriesAxis === categoryAxisName || !seriesAxis && categoryAxisIndex === 0) && series[seriesIx].categoryField) {\n                  return true;\n                }\n              }\n            },\n            createCategoryAxesLabels: function () {\n              var axes = this.axes;\n\n              for (var i = 0; i < axes.length; i++) {\n                if (axes[i] instanceof CategoryAxis) {\n                  axes[i].createLabels();\n                }\n              }\n            },\n            createCategoryAxes: function (panes) {\n              var this$1 = this;\n              var invertAxes = this.invertAxes;\n              var definitions = [].concat(this.options.categoryAxis);\n              var axes = [];\n\n              for (var i = 0; i < definitions.length; i++) {\n                var axisOptions = definitions[i];\n                var axisPane = this$1.findPane(axisOptions.pane);\n\n                if (inArray(axisPane, panes)) {\n                  var name = axisOptions.name;\n                  var categories = axisOptions.categories;\n\n                  if (categories === void 0) {\n                    categories = [];\n                  }\n\n                  axisOptions = deepExtend({\n                    vertical: invertAxes,\n                    reverse: !invertAxes && this$1.chartService.rtl,\n                    axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                  }, axisOptions);\n\n                  if (!defined(axisOptions.justified)) {\n                    axisOptions.justified = this$1.isJustified();\n                  }\n\n                  if (this$1.axisRequiresRounding(name, i)) {\n                    axisOptions.justified = false;\n                  }\n\n                  var categoryAxis = void 0;\n\n                  if (isDateAxis(axisOptions, categories[0])) {\n                    categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1.chartService);\n                  } else {\n                    categoryAxis = new CategoryAxis(axisOptions, this$1.chartService);\n                  }\n\n                  definitions[i].categories = categoryAxis.options.srcCategories;\n\n                  if (name) {\n                    if (this$1.namedCategoryAxes[name]) {\n                      throw new Error(\"Category axis with name \" + name + \" is already defined\");\n                    }\n\n                    this$1.namedCategoryAxes[name] = categoryAxis;\n                  }\n\n                  categoryAxis.axisIndex = i;\n                  axes.push(categoryAxis);\n                  this$1.appendAxis(categoryAxis);\n                }\n              }\n\n              var primaryAxis = this.categoryAxis || axes[0];\n              this.categoryAxis = primaryAxis;\n\n              if (invertAxes) {\n                this.axisY = primaryAxis;\n              } else {\n                this.axisX = primaryAxis;\n              }\n            },\n            isJustified: function () {\n              var series = this.series;\n\n              for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n\n                if (!inArray(currentSeries.type, AREA_SERIES)) {\n                  return false;\n                }\n              }\n\n              return true;\n            },\n            createValueAxes: function (panes) {\n              var this$1 = this;\n              var tracker = this.valueAxisRangeTracker;\n              var defaultRange = tracker.query();\n              var definitions = [].concat(this.options.valueAxis);\n              var invertAxes = this.invertAxes;\n              var baseOptions = {\n                vertical: !invertAxes,\n                reverse: invertAxes && this.chartService.rtl\n              };\n              var axes = [];\n\n              if (this.stack100) {\n                baseOptions.roundToMajorUnit = false;\n                baseOptions.labels = {\n                  format: \"P0\"\n                };\n              }\n\n              for (var i = 0; i < definitions.length; i++) {\n                var axisOptions = definitions[i];\n                var axisPane = this$1.findPane(axisOptions.pane);\n\n                if (inArray(axisPane, panes)) {\n                  var name = axisOptions.name;\n                  var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? {\n                    min: 0.1,\n                    max: 1\n                  } : {\n                    min: 0,\n                    max: 1\n                  };\n                  var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                  if (i === 0 && range && defaultRange) {\n                    range.min = Math.min(range.min, defaultRange.min);\n                    range.max = Math.max(range.max, defaultRange.max);\n                  }\n\n                  var axisType = void 0;\n\n                  if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                    axisType = dataviz.LogarithmicAxis;\n                  } else {\n                    axisType = dataviz.NumericAxis;\n                  }\n\n                  var valueAxis = new axisType(range.min, range.max, deepExtend({}, baseOptions, axisOptions), this$1.chartService);\n\n                  if (name) {\n                    if (this$1.namedValueAxes[name]) {\n                      throw new Error(\"Value axis with name \" + name + \" is already defined\");\n                    }\n\n                    this$1.namedValueAxes[name] = valueAxis;\n                  }\n\n                  valueAxis.axisIndex = i;\n                  axes.push(valueAxis);\n                  this$1.appendAxis(valueAxis);\n                }\n              }\n\n              var primaryAxis = this.valueAxis || axes[0];\n              this.valueAxis = primaryAxis;\n\n              if (invertAxes) {\n                this.axisX = primaryAxis;\n              } else {\n                this.axisY = primaryAxis;\n              }\n            },\n            _dispatchEvent: function (chart, e, eventType) {\n              var coords = chart._eventCoordinates(e);\n\n              var point = new Point(coords.x, coords.y);\n              var pane = this.pointPane(point);\n              var categories = [];\n              var values = [];\n\n              if (!pane) {\n                return;\n              }\n\n              var allAxes = pane.axes;\n\n              for (var i = 0; i < allAxes.length; i++) {\n                var axis = allAxes[i];\n\n                if (axis.getValue) {\n                  appendIfNotNull(values, axis.getValue(point));\n                } else {\n                  appendIfNotNull(categories, axis.getCategory(point));\n                }\n              }\n\n              if (categories.length === 0) {\n                appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n              }\n\n              if (categories.length > 0 && values.length > 0) {\n                chart.trigger(eventType, {\n                  element: eventElement(e),\n                  originalEvent: e,\n                  category: singleItemOrArray(categories),\n                  value: singleItemOrArray(values)\n                });\n              }\n            },\n            pointPane: function (point) {\n              var panes = this.panes;\n\n              for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n\n                if (currentPane.contentBox.containsPoint(point)) {\n                  return currentPane;\n                }\n              }\n            },\n            updateAxisOptions: function (axis, options) {\n              updateAxisOptions(this.options, axis, options);\n              updateAxisOptions(this.originalOptions, axis, options);\n            }\n          });\n\n          function updateAxisOptions(targetOptions, axis, options) {\n            var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n            deepExtend(axesOptions[axis.axisIndex], options);\n          }\n\n          function groupSeries(series, axis, axisIx) {\n            return grep(series, function (s) {\n              return axisIx === 0 && !s.categoryAxis || s.categoryAxis === axis;\n            });\n          }\n\n          setDefaultOptions(CategoricalPlotArea, {\n            categoryAxis: {},\n            valueAxis: {}\n          });\n          deepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n          var Highlight = Class.extend({\n            init: function () {\n              this._points = [];\n            },\n            destroy: function () {\n              this._points = [];\n            },\n            show: function (points, opacity) {\n              var this$1 = this;\n              var arrayPoints = [].concat(points);\n              this.hide();\n\n              for (var i = 0; i < arrayPoints.length; i++) {\n                var point = arrayPoints[i];\n\n                if (point && point.toggleHighlight && point.hasHighlight()) {\n                  this$1.togglePointHighlight(point, true, opacity);\n\n                  this$1._points.push(point);\n                }\n              }\n            },\n            togglePointHighlight: function (point, show, opacity) {\n              var toggleHandler = (point.options.highlight || {}).toggle;\n\n              if (toggleHandler) {\n                var eventArgs = {\n                  category: point.category,\n                  series: point.series,\n                  dataItem: point.dataItem,\n                  value: point.value,\n                  stackValue: point.stackValue,\n                  preventDefault: preventDefault,\n                  visual: point.highlightVisual(),\n                  show: show\n                };\n                toggleHandler(eventArgs);\n\n                if (!eventArgs._defaultPrevented) {\n                  point.toggleHighlight(show, opacity);\n                }\n              } else {\n                point.toggleHighlight(show, opacity);\n              }\n            },\n            hide: function () {\n              var this$1 = this;\n              var points = this._points;\n\n              while (points.length) {\n                this$1.togglePointHighlight(points.pop(), false);\n              }\n            },\n            isHighlighted: function (element) {\n              var points = this._points;\n\n              for (var i = 0; i < points.length; i++) {\n                var point = points[i];\n\n                if (element === point) {\n                  return true;\n                }\n              }\n\n              return false;\n            }\n          });\n\n          function preventDefault() {\n            this._defaultPrevented = true;\n          }\n\n          function acceptKey(e, mouseKey) {\n            var key = (mouseKey || \"\").toLowerCase();\n            var event = e.event;\n            var accept = key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey) || event[key + \"Key\"];\n            return accept;\n          }\n\n          function toChartAxisRanges(axisRanges) {\n            var ranges = {};\n\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n              var axisRange = axisRanges[idx];\n\n              if (axisRange.axis.options.name) {\n                ranges[axisRange.axis.options.name] = {\n                  min: axisRange.range.min,\n                  max: axisRange.range.max\n                };\n              }\n            }\n\n            return ranges;\n          }\n\n          var Pannable = Class.extend({\n            init: function (plotArea, options) {\n              this.plotArea = plotArea;\n              this.options = deepExtend({}, this.options, options);\n            },\n            start: function (e) {\n              this._active = acceptKey(e, this.options.key);\n              return this._active;\n            },\n            move: function (e) {\n              if (this._active) {\n                var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n\n                if (axisRanges.length) {\n                  this.axisRanges = axisRanges;\n                  return toChartAxisRanges(axisRanges);\n                }\n              }\n            },\n            end: function () {\n              var active = this._active;\n              this._active = false;\n              return active;\n            },\n            pan: function () {\n              var ref = this;\n              var plotArea = ref.plotArea;\n              var axisRanges = ref.axisRanges;\n\n              if (axisRanges.length) {\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                  var range = axisRanges[idx];\n                  plotArea.updateAxisOptions(range.axis, range.range);\n                }\n\n                plotArea.redraw(plotArea.panes);\n              }\n            },\n            destroy: function () {\n              delete this.plotArea;\n            },\n            _panAxes: function (e, position) {\n              var plotArea = this.plotArea;\n              var delta = -e[position].delta;\n              var lock = (this.options.lock || \"\").toLowerCase();\n              var updatedAxes = [];\n\n              if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n                var axes = plotArea.axes;\n\n                for (var idx = 0; idx < axes.length; idx++) {\n                  var axis = axes[idx];\n\n                  if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                    var range = axis.pan(delta);\n\n                    if (range) {\n                      range.limitRange = true;\n                      updatedAxes.push({\n                        axis: axis,\n                        range: range\n                      });\n                    }\n                  }\n                }\n              }\n\n              return updatedAxes;\n            }\n          });\n          Pannable.prototype.options = {\n            key: \"none\",\n            lock: \"none\"\n          };\n          var ZoomSelection = Class.extend({\n            init: function (chart, options) {\n              this.chart = chart;\n              this.options = deepExtend({}, this.options, options);\n              this.createElement();\n            },\n            createElement: function () {\n              var marquee = this._marquee = document.createElement(\"div\");\n              marquee.className = \"k-marquee\";\n              var marqueeColor = document.createElement(\"div\");\n              marqueeColor.className = \"k-marquee-color\";\n              marquee.appendChild(marqueeColor);\n            },\n            removeElement: function () {\n              if (this._marquee.parentNode) {\n                this._marquee.parentNode.removeChild(this._marquee);\n              }\n            },\n            setStyles: function (styles) {\n              elementStyles(this._marquee, styles);\n            },\n            start: function (e) {\n              if (acceptKey(e, this.options.key)) {\n                var chart = this.chart;\n\n                var point = chart._eventCoordinates(e);\n\n                var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n\n                var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n                if (zoomPane && clipBox) {\n                  var offset = this._elementOffset();\n\n                  clipBox.translate(offset.left, offset.top);\n                  this._zoomPaneClipBox = clipBox;\n                  document.body.appendChild(this._marquee);\n                  this.setStyles({\n                    left: e.pageX + 1,\n                    top: e.pageY + 1,\n                    width: 0,\n                    height: 0\n                  });\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            _elementOffset: function () {\n              var chartElement = this.chart.element;\n              var ref = elementStyles(chartElement, [\"paddingLeft\", \"paddingTop\"]);\n              var paddingLeft = ref.paddingLeft;\n              var paddingTop = ref.paddingTop;\n              var offset = dataviz.elementOffset(chartElement);\n              return {\n                left: paddingLeft + offset.left,\n                top: paddingTop + offset.top\n              };\n            },\n            move: function (e) {\n              var zoomPane = this._zoomPane;\n\n              if (zoomPane) {\n                this.setStyles(this._selectionPosition(e));\n              }\n            },\n            end: function (e) {\n              var zoomPane = this._zoomPane;\n\n              if (zoomPane) {\n                var elementOffset$$1 = this._elementOffset();\n\n                var selectionPosition = this._selectionPosition(e);\n\n                selectionPosition.left -= elementOffset$$1.left;\n                selectionPosition.top -= elementOffset$$1.top;\n                var start = {\n                  x: selectionPosition.left,\n                  y: selectionPosition.top\n                };\n                var end = {\n                  x: selectionPosition.left + selectionPosition.width,\n                  y: selectionPosition.top + selectionPosition.height\n                };\n\n                this._updateAxisRanges(start, end);\n\n                this.removeElement();\n                delete this._zoomPane;\n                return toChartAxisRanges(this.axisRanges);\n              }\n            },\n            zoom: function () {\n              var axisRanges = this.axisRanges;\n\n              if (axisRanges && axisRanges.length) {\n                var plotArea = this.chart._plotArea;\n\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                  var axisRange = axisRanges[idx];\n                  plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n                }\n\n                plotArea.redraw(plotArea.panes);\n              }\n            },\n            destroy: function () {\n              this.removeElement();\n              delete this._marquee;\n              delete this.chart;\n            },\n            _updateAxisRanges: function (start, end) {\n              var lock = (this.options.lock || \"\").toLowerCase();\n              var axisRanges = [];\n              var axes = this._zoomPane.axes;\n\n              for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                var vertical = axis.options.vertical;\n\n                if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                  var range = axis.pointsRange(start, end);\n\n                  if (range) {\n                    axisRanges.push({\n                      axis: axis,\n                      range: range\n                    });\n                  }\n                }\n              }\n\n              this.axisRanges = axisRanges;\n            },\n            _selectionPosition: function (e) {\n              var clipBox = this._zoomPaneClipBox;\n              var startLocation = {\n                x: e.x.startLocation,\n                y: e.y.startLocation\n              };\n              var pageX = e.x.location;\n              var pageY = e.y.location;\n              var lock = (this.options.lock || \"\").toLowerCase();\n              var left = Math.min(startLocation.x, pageX);\n              var top = Math.min(startLocation.y, pageY);\n              var width = Math.abs(startLocation.x - pageX);\n              var height = Math.abs(startLocation.y - pageY);\n\n              if (lock === X) {\n                left = clipBox.x1;\n                width = clipBox.width();\n              }\n\n              if (lock === Y) {\n                top = clipBox.y1;\n                height = clipBox.height();\n              }\n\n              if (pageX > clipBox.x2) {\n                width = clipBox.x2 - startLocation.x;\n              }\n\n              if (pageX < clipBox.x1) {\n                width = startLocation.x - clipBox.x1;\n              }\n\n              if (pageY > clipBox.y2) {\n                height = clipBox.y2 - startLocation.y;\n              }\n\n              if (pageY < clipBox.y1) {\n                height = startLocation.y - clipBox.y1;\n              }\n\n              return {\n                left: Math.max(left, clipBox.x1),\n                top: Math.max(top, clipBox.y1),\n                width: width,\n                height: height\n              };\n            }\n          });\n          ZoomSelection.prototype.options = {\n            key: \"shift\",\n            lock: \"none\"\n          };\n          var ref = drawing.util;\n          var limitValue$1 = ref.limitValue; // Limit the zoom rate between 1% and 90% per mousewheel event.\n          // At zoom rates close to 100% the axis range quickly becomes 0.\n\n          var MIN_RATE = 0.01;\n          var MAX_RATE = 0.9;\n          var DEFAULT_RATE = 0.3;\n          var MousewheelZoom = Class.extend({\n            init: function (chart, options) {\n              this.chart = chart;\n              this.options = deepExtend({\n                rate: DEFAULT_RATE\n              }, this.options, options);\n            },\n            updateRanges: function (delta, coords) {\n              var this$1 = this;\n              var lock = (this.options.lock || \"\").toLowerCase();\n              var axisRanges = [];\n              var axes = this.chart._plotArea.axes;\n\n              for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                var vertical = axis.options.vertical;\n\n                if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                  var rate = limitValue$1(this$1.options.rate, MIN_RATE, MAX_RATE);\n                  var range = axis.zoomRange(-delta * rate, coords);\n\n                  if (range) {\n                    axisRanges.push({\n                      axis: axis,\n                      range: range\n                    });\n                  }\n                }\n              }\n\n              this.axisRanges = axisRanges;\n              return toChartAxisRanges(axisRanges);\n            },\n            zoom: function () {\n              var axisRanges = this.axisRanges;\n              var plotArea = this.chart._plotArea;\n\n              if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                  var axisRange = axisRanges[idx];\n                  plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n                }\n\n                plotArea.redraw(plotArea.panes);\n              }\n            },\n            destroy: function () {\n              delete this.chart;\n            }\n          });\n          var LegendLayout = ChartElement.extend({\n            init: function (options, chartService) {\n              ChartElement.fn.init.call(this, options);\n              this.chartService = chartService;\n            },\n            render: function () {\n              var ref = this;\n              var children = ref.children;\n              var options = ref.options;\n              var vertical = options.vertical;\n              this.visual = new drawing.Layout(null, {\n                spacing: vertical ? 0 : options.spacing,\n                lineSpacing: vertical ? options.spacing : 0,\n                orientation: vertical ? \"vertical\" : \"horizontal\",\n                reverse: options.rtl,\n                alignItems: vertical ? \"start\" : \"center\"\n              });\n\n              for (var idx = 0; idx < children.length; idx++) {\n                var legendItem = children[idx];\n                legendItem.reflow(new Box());\n                legendItem.renderVisual();\n              }\n            },\n            reflow: function (box) {\n              this.visual.rect(box.toRect());\n              this.visual.reflow();\n              var bbox = this.visual.clippedBBox();\n\n              if (bbox) {\n                this.box = dataviz.rectToBox(bbox);\n              } else {\n                this.box = new Box();\n              }\n            },\n            renderVisual: function () {\n              this.addVisual();\n            },\n            createVisual: function () {}\n          });\n          var LegendItem = BoxElement.extend({\n            init: function (options) {\n              BoxElement.fn.init.call(this, options);\n              this.createContainer();\n\n              if (!options.rtl) {\n                this.createMarker();\n                this.createLabel();\n              } else {\n                this.createLabel();\n                this.createMarker();\n              }\n            },\n            createContainer: function () {\n              this.container = new dataviz.FloatElement({\n                vertical: false,\n                wrap: false,\n                align: CENTER,\n                spacing: this.options.spacing\n              });\n              this.append(this.container);\n            },\n            createMarker: function () {\n              this.container.append(new ShapeElement(this.markerOptions()));\n            },\n            markerOptions: function () {\n              var options = this.options;\n              var markerColor = options.markerColor;\n              return deepExtend({}, options.markers, {\n                background: markerColor,\n                border: {\n                  color: markerColor\n                }\n              });\n            },\n            createLabel: function () {\n              var options = this.options;\n              var labelOptions = deepExtend({}, options.labels);\n              this.container.append(new TextBox(options.text, labelOptions));\n            },\n            renderComplete: function () {\n              BoxElement.fn.renderComplete.call(this);\n              var cursor = this.options.cursor || {};\n              var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n                fill: {\n                  color: WHITE,\n                  opacity: 0\n                },\n                stroke: null,\n                cursor: cursor.style || cursor\n              });\n              this.appendVisual(eventSink);\n            },\n            click: function (widget, e) {\n              var args = this.eventArgs(e);\n\n              if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n                e.preventDefault();\n              }\n            },\n            over: function (widget, e) {\n              var args = this.eventArgs(e);\n\n              if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n                widget._legendItemHover(args.seriesIndex, args.pointIndex);\n              } // Don't trigger point hover for legend items\n\n\n              return true;\n            },\n            out: function (widget, e) {\n              widget._unsetActivePoint();\n\n              widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n            },\n            eventArgs: function (e) {\n              var options = this.options;\n              return {\n                element: eventElement(e),\n                text: options.text,\n                series: options.series,\n                seriesIndex: options.series.index,\n                pointIndex: options.pointIndex\n              };\n            },\n            renderVisual: function () {\n              var this$1 = this;\n              var options = this.options;\n              var customVisual = options.visual;\n\n              if (customVisual) {\n                this.visual = customVisual({\n                  active: options.active,\n                  series: options.series,\n                  sender: this.getSender(),\n                  pointIndex: options.pointIndex,\n                  options: {\n                    markers: this.markerOptions(),\n                    labels: options.labels\n                  },\n                  createVisual: function () {\n                    this$1.createVisual();\n                    this$1.renderChildren();\n                    this$1.renderComplete();\n                    var defaultVisual = this$1.visual;\n                    delete this$1.visual;\n                    return defaultVisual;\n                  }\n                });\n                this.addVisual();\n              } else {\n                BoxElement.fn.renderVisual.call(this);\n              }\n            }\n          });\n          var HORIZONTAL = \"horizontal\";\n          var POINTER = \"pointer\";\n          var CUSTOM = \"custom\";\n          var Legend = ChartElement.extend({\n            init: function (options, chartService) {\n              if (chartService === void 0) {\n                chartService = {};\n              }\n\n              ChartElement.fn.init.call(this, options);\n              this.chartService = chartService;\n\n              if (!inArray(this.options.position, [TOP, RIGHT, BOTTOM, LEFT, CUSTOM])) {\n                this.options.position = RIGHT;\n              }\n\n              this.createContainers();\n              this.createLegendTitle(options.title);\n              this.createItems();\n            },\n            createContainers: function () {\n              var options = this.options;\n              var position = options.position;\n              var userAlign = options.align;\n              var align = position;\n              var vAlign = CENTER;\n\n              if (position === CUSTOM) {\n                align = LEFT;\n              } else if (inArray(position, [TOP, BOTTOM])) {\n                if (userAlign === \"start\") {\n                  align = LEFT;\n                } else if (userAlign === \"end\") {\n                  align = RIGHT;\n                } else {\n                  align = CENTER;\n                }\n\n                vAlign = position;\n              } else if (userAlign) {\n                if (userAlign === \"start\") {\n                  vAlign = TOP;\n                } else if (userAlign === \"end\") {\n                  vAlign = BOTTOM;\n                }\n              }\n\n              this.container = new BoxElement({\n                margin: options.margin,\n                padding: options.padding,\n                background: options.background,\n                border: options.border,\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n              });\n\n              if (this.hasTitle()) {\n                this.itemsContainer = new BoxElement({\n                  vAlign: vAlign,\n                  align: align,\n                  zIndex: options.zIndex,\n                  shrinkToFit: true\n                });\n              } else {\n                this.itemsContainer = this.container;\n              }\n\n              this.append(this.container);\n            },\n            createItems: function () {\n              var chartService = this.getService();\n              var options = this.options;\n              var vertical = this.isVertical();\n              var innerElement = new LegendLayout({\n                vertical: vertical,\n                spacing: options.spacing,\n                rtl: chartService.rtl\n              }, chartService);\n              var items = options.items;\n\n              if (options.reverse) {\n                items = items.slice(0).reverse();\n              }\n\n              var count = items.length;\n\n              for (var i = 0; i < count; i++) {\n                var item = items[i];\n                innerElement.append(new LegendItem(deepExtend({}, {\n                  markers: options.markers,\n                  labels: options.labels,\n                  rtl: chartService.rtl\n                }, options.item, item)));\n              }\n\n              innerElement.render();\n              this.itemsContainer.append(innerElement);\n            },\n            isVertical: function () {\n              var ref = this.options;\n              var orientation = ref.orientation;\n              var position = ref.position;\n              var vertical = position === CUSTOM && orientation !== HORIZONTAL || (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [LEFT, RIGHT]));\n              return vertical;\n            },\n            hasItems: function () {\n              return this.container.children[0].children.length > 0;\n            },\n            reflow: function (targetBox) {\n              var options = this.options;\n              var legendBox = targetBox.clone();\n\n              if (!this.hasItems()) {\n                this.box = legendBox;\n                return;\n              }\n\n              if (options.position === CUSTOM) {\n                this.containerCustomReflow(legendBox);\n                this.box = legendBox;\n              } else {\n                this.containerReflow(legendBox);\n              }\n\n              if (this.hasTitle()) {\n                this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n              }\n            },\n            containerReflow: function (targetBox) {\n              var ref = this;\n              var options = ref.options;\n              var container = ref.container;\n              var position = options.position;\n              var width = options.width;\n              var height = options.height;\n              var pos = position === TOP || position === BOTTOM ? X : Y;\n              var vertical = this.isVertical();\n              var alignTarget = targetBox.clone();\n              var containerBox = targetBox.clone();\n\n              if (position === LEFT || position === RIGHT) {\n                containerBox.y1 = alignTarget.y1 = 0;\n              }\n\n              if (vertical && height) {\n                containerBox.y2 = containerBox.y1 + height;\n                containerBox.align(alignTarget, Y, container.options.vAlign);\n              } else if (!vertical && width) {\n                containerBox.x2 = containerBox.x1 + width;\n                containerBox.align(alignTarget, X, container.options.align);\n              }\n\n              container.reflow(containerBox);\n              containerBox = container.box;\n              var box = containerBox.clone();\n\n              if (options.offsetX || options.offsetY) {\n                containerBox.translate(options.offsetX, options.offsetY);\n                container.reflow(containerBox);\n              }\n\n              box[pos + 1] = targetBox[pos + 1];\n              box[pos + 2] = targetBox[pos + 2];\n              this.box = box;\n            },\n            containerCustomReflow: function (targetBox) {\n              var ref = this;\n              var options = ref.options;\n              var container = ref.container;\n              var offsetX = options.offsetX;\n              var offsetY = options.offsetY;\n              var width = options.width;\n              var height = options.height;\n              var vertical = this.isVertical();\n              var containerBox = targetBox.clone();\n\n              if (vertical && height) {\n                containerBox.y2 = containerBox.y1 + height;\n              } else if (!vertical && width) {\n                containerBox.x2 = containerBox.x1 + width;\n              }\n\n              container.reflow(containerBox);\n              containerBox = container.box;\n              container.reflow(new Box(offsetX, offsetY, offsetX + containerBox.width(), offsetY + containerBox.height()));\n            },\n            renderVisual: function () {\n              if (this.hasItems()) {\n                ChartElement.fn.renderVisual.call(this);\n              }\n            },\n            createLegendTitle: function (title) {\n              var titleOptions = deepExtend({}, {\n                color: BLACK,\n                position: TOP,\n                align: CENTER\n              }, title);\n              var text = titleOptions.text;\n\n              if (!title || title.visible === false) {\n                return;\n              }\n\n              if (defined(titleOptions) && titleOptions.visible) {\n                var labelTemplate = getTemplate(titleOptions);\n\n                if (labelTemplate) {\n                  text = labelTemplate({\n                    text: text\n                  });\n                } else if (titleOptions.format) {\n                  text = this.chartService.format.auto(titleOptions.format, text);\n                }\n              }\n\n              this.title = new TextBox(text, titleOptions);\n              this.createTitleLayout();\n              this.appendTitleLayoutContent();\n            },\n            createTitleLayout: function () {\n              this.layout = new dataviz.FloatElement({\n                vertical: true,\n                wrap: false\n              });\n              this.container.append(this.layout);\n            },\n            hasTitle: function () {\n              return Boolean(this.options.title && this.options.title.visible !== false);\n            },\n            appendTitleLayoutContent: function () {\n              var options = this.options;\n\n              if (options.title.position === BOTTOM) {\n                this.layout.append(this.itemsContainer);\n                this.layout.append(this.title);\n              } else {\n                this.layout.append(this.title);\n                this.layout.append(this.itemsContainer);\n              }\n            }\n          });\n          setDefaultOptions(Legend, {\n            position: RIGHT,\n            items: [],\n            offsetX: 0,\n            offsetY: 0,\n            margin: getSpacing(5),\n            padding: getSpacing(5),\n            border: {\n              color: BLACK,\n              width: 0\n            },\n            item: {\n              cursor: POINTER,\n              spacing: 6\n            },\n            spacing: 6,\n            background: \"\",\n            zIndex: 1,\n            markers: {\n              border: {\n                width: 0\n              },\n              width: 15,\n              height: 3,\n              type: \"rect\",\n              align: LEFT,\n              vAlign: CENTER\n            }\n          });\n          var PlotAreaFactory = Class.extend({\n            init: function () {\n              this._registry = [];\n            },\n            register: function (type, seriesTypes) {\n              this._registry.push({\n                type: type,\n                seriesTypes: seriesTypes\n              });\n            },\n            create: function (srcSeries, options, chartService) {\n              var registry = this._registry;\n              var match = registry[0];\n              var series;\n\n              for (var idx = 0; idx < registry.length; idx++) {\n                var entry = registry[idx];\n                series = filterSeriesByType(srcSeries, entry.seriesTypes);\n\n                if (series.length > 0) {\n                  match = entry;\n                  break;\n                }\n              }\n\n              return new match.type(series, options, chartService);\n            }\n          });\n          PlotAreaFactory.current = new PlotAreaFactory();\n          var ZOOM_ACCELERATION = 3;\n          var SELECTOR_HEIGHT_ADJUST = 0.1;\n\n          function createDiv(className) {\n            var element = document.createElement(\"div\");\n\n            if (className) {\n              element.className = className;\n            }\n\n            return element;\n          }\n\n          function closestHandle(element) {\n            var current = element;\n\n            while (current && !hasClasses(current, \"k-handle\")) {\n              current = current.parentNode;\n            }\n\n            return current;\n          }\n\n          var Selection = Class.extend({\n            init: function (chart, categoryAxis, options, observer) {\n              var chartElement = chart.element;\n              this.options = deepExtend({}, this.options, options);\n              this.chart = chart;\n              this.observer = observer;\n              this.chartElement = chartElement;\n              this.categoryAxis = categoryAxis;\n              this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n              this.initOptions();\n              this.visible = this.options.visible && chartElement.offsetHeight;\n\n              if (this.visible) {\n                this.createElements();\n                this.set(this._index(this.options.from), this._index(this.options.to));\n                this.bindEvents();\n              }\n            },\n            onPane: function (pane) {\n              return this.categoryAxis.pane === pane;\n            },\n            createElements: function () {\n              var options = this.options;\n              var wrapper = this.wrapper = createDiv(\"k-selector\");\n              elementStyles(wrapper, {\n                top: options.offset.top,\n                left: options.offset.left,\n                width: options.width,\n                height: options.height,\n                direction: 'ltr'\n              });\n              var selection = this.selection = createDiv(\"k-selection\");\n              this.leftMask = createDiv(\"k-mask\");\n              this.rightMask = createDiv(\"k-mask\");\n              wrapper.appendChild(this.leftMask);\n              wrapper.appendChild(this.rightMask);\n              wrapper.appendChild(selection);\n              selection.appendChild(createDiv(\"k-selection-bg\"));\n              var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle\");\n              var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle\");\n              leftHandle.appendChild(createDiv());\n              rightHandle.appendChild(createDiv());\n              selection.appendChild(leftHandle);\n              selection.appendChild(rightHandle);\n              this.chartElement.appendChild(wrapper);\n              var selectionStyles = elementStyles(selection, [\"borderLeftWidth\", \"borderRightWidth\", \"height\"]);\n              var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n              var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n              options.selection = {\n                border: {\n                  left: selectionStyles.borderLeftWidth,\n                  right: selectionStyles.borderRightWidth\n                }\n              };\n              elementStyles(leftHandle, {\n                top: (selectionStyles.height - leftHandleHeight) / 2\n              });\n              elementStyles(rightHandle, {\n                top: (selectionStyles.height - rightHandleHeight) / 2\n              });\n              wrapper.style.cssText = wrapper.style.cssText;\n            },\n            bindEvents: function () {\n              if (this.options.mousewheel !== false) {\n                this._mousewheelHandler = this._mousewheel.bind(this);\n                var obj;\n                bindEvents(this.wrapper, (obj = {}, obj[MOUSEWHEEL] = this._mousewheelHandler, obj));\n              }\n\n              this._domEvents = services.DomEventsBuilder.create(this.wrapper, {\n                stopPropagation: true,\n                // applicable for the jQuery UserEvents\n                start: this._start.bind(this),\n                move: this._move.bind(this),\n                end: this._end.bind(this),\n                tap: this._tap.bind(this),\n                press: this._press.bind(this),\n                gesturestart: this._gesturestart.bind(this),\n                gesturechange: this._gesturechange.bind(this),\n                gestureend: this._gestureend.bind(this)\n              });\n            },\n            initOptions: function () {\n              var ref = this;\n              var options = ref.options;\n              var categoryAxis = ref.categoryAxis;\n              var box = categoryAxis.pane.chartsBox();\n              var intlService = this.chart.chartService.intl;\n\n              if (this._dateAxis) {\n                deepExtend(options, {\n                  min: parseDate(intlService, options.min),\n                  max: parseDate(intlService, options.max),\n                  from: parseDate(intlService, options.from),\n                  to: parseDate(intlService, options.to)\n                });\n              }\n\n              var ref$1 = elementStyles(this.chartElement, [\"paddingLeft\", \"paddingTop\"]);\n              var paddingLeft = ref$1.paddingLeft;\n              var paddingTop = ref$1.paddingTop;\n              this.options = deepExtend({}, {\n                width: box.width(),\n                height: box.height() + SELECTOR_HEIGHT_ADJUST,\n                //workaround for sub-pixel hover on the paths in chrome\n                padding: {\n                  left: paddingLeft,\n                  top: paddingTop\n                },\n                offset: {\n                  left: box.x1 + paddingLeft,\n                  top: box.y1 + paddingTop\n                },\n                from: options.min,\n                to: options.max\n              }, options);\n            },\n            destroy: function () {\n              if (this._domEvents) {\n                this._domEvents.destroy();\n\n                delete this._domEvents;\n              }\n\n              clearTimeout(this._mwTimeout);\n              this._state = null;\n\n              if (this.wrapper) {\n                if (this._mousewheelHandler) {\n                  var obj;\n                  unbindEvents(this.wrapper, (obj = {}, obj[MOUSEWHEEL] = this._mousewheelHandler, obj));\n                  this._mousewheelHandler = null;\n                }\n\n                this.chartElement.removeChild(this.wrapper);\n                this.wrapper = null;\n              }\n            },\n            _rangeEventArgs: function (range) {\n              return {\n                axis: this.categoryAxis.options,\n                from: this._value(range.from),\n                to: this._value(range.to)\n              };\n            },\n            _start: function (e) {\n              var options = this.options;\n              var target = eventElement(e);\n\n              if (this._state || !target) {\n                return;\n              }\n\n              this.chart._unsetActivePoint();\n\n              this._state = {\n                moveTarget: closestHandle(target) || target,\n                startLocation: e.x ? e.x.location : 0,\n                range: {\n                  from: this._index(options.from),\n                  to: this._index(options.to)\n                }\n              };\n\n              var args = this._rangeEventArgs({\n                from: this._index(options.from),\n                to: this._index(options.to)\n              });\n\n              if (this.trigger(SELECT_START, args)) {\n                this._state = null;\n              }\n            },\n            _press: function (e) {\n              var handle;\n\n              if (this._state) {\n                handle = this._state.moveTarget;\n              } else {\n                handle = closestHandle(eventElement(e));\n              }\n\n              if (handle) {\n                dataviz.addClass(handle, \"k-handle-active\");\n              }\n            },\n            _move: function (e) {\n              if (!this._state) {\n                return;\n              }\n\n              var ref = this;\n              var state = ref._state;\n              var options = ref.options;\n              var categoryAxis = ref.categoryAxis;\n              var range = state.range;\n              var target = state.moveTarget;\n              var reverse = categoryAxis.options.reverse;\n\n              var from = this._index(options.from);\n\n              var to = this._index(options.to);\n\n              var min = this._index(options.min);\n\n              var max = this._index(options.max);\n\n              var delta = state.startLocation - e.x.location;\n              var oldRange = {\n                from: range.from,\n                to: range.to\n              };\n              var span = range.to - range.from;\n              var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n              var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n              if (!target) {\n                return;\n              }\n\n              var leftHandle = hasClasses(target, \"k-left-handle\");\n              var rightHandle = hasClasses(target, \"k-right-handle\");\n\n              if (hasClasses(target, \"k-selection k-selection-bg\")) {\n                range.from = Math.min(Math.max(min, from - offset), max - span);\n                range.to = Math.min(range.from + span, max);\n              } else if (leftHandle && !reverse || rightHandle && reverse) {\n                range.from = Math.min(Math.max(min, from - offset), max - 1);\n                range.to = Math.max(range.from + 1, range.to);\n              } else if (leftHandle && reverse || rightHandle && !reverse) {\n                range.to = Math.min(Math.max(min + 1, to - offset), max);\n                range.from = Math.min(range.to - 1, range.from);\n              }\n\n              if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.move(range.from, range.to);\n                this.trigger(SELECT, this._rangeEventArgs(range));\n              }\n            },\n            _end: function () {\n              if (this._state) {\n                var moveTarget = this._state.moveTarget;\n\n                if (moveTarget) {\n                  dataviz.removeClass(moveTarget, \"k-handle-active\");\n                }\n\n                var range = this._state.range;\n                this.set(range.from, range.to);\n                this.trigger(SELECT_END, this._rangeEventArgs(range));\n                delete this._state;\n              }\n            },\n            _tap: function (e) {\n              var ref = this;\n              var options = ref.options;\n              var categoryAxis = ref.categoryAxis;\n\n              var coords = this.chart._eventCoordinates(e);\n\n              var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n\n              var from = this._index(options.from);\n\n              var to = this._index(options.to);\n\n              var min = this._index(options.min);\n\n              var max = this._index(options.max);\n\n              var span = to - from;\n              var mid = from + span / 2;\n              var range = {};\n              var rightClick = e.event.which === 3;\n              var offset = Math.round(mid - categoryIx);\n\n              if (this._state || rightClick) {\n                return;\n              }\n\n              this.chart._unsetActivePoint();\n\n              if (!categoryAxis.options.justified) {\n                offset--;\n              }\n\n              range.from = Math.min(Math.max(min, from - offset), max - span);\n              range.to = Math.min(range.from + span, max);\n\n              this._start(e);\n\n              if (this._state) {\n                this._state.range = range;\n                this.trigger(SELECT, this._rangeEventArgs(range));\n\n                this._end();\n              }\n            },\n            _mousewheel: function (e) {\n              var this$1 = this;\n              var delta = dataviz.mousewheelDelta(e);\n\n              this._start({\n                target: this.selection\n              });\n\n              if (this._state) {\n                var range = this._state.range;\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (Math.abs(delta) > 1) {\n                  delta *= ZOOM_ACCELERATION;\n                }\n\n                if (this.options.mousewheel.reverse) {\n                  delta *= -1;\n                }\n\n                if (this.expand(delta)) {\n                  this.trigger(SELECT, {\n                    axis: this.categoryAxis.options,\n                    delta: delta,\n                    originalEvent: e,\n                    from: this._value(range.from),\n                    to: this._value(range.to)\n                  });\n                }\n\n                if (this._mwTimeout) {\n                  clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                  this$1._end();\n                }, MOUSEWHEEL_DELAY);\n              }\n            },\n            _gesturestart: function (e) {\n              var options = this.options;\n              this._state = {\n                range: {\n                  from: this._index(options.from),\n                  to: this._index(options.to)\n                }\n              };\n\n              var args = this._rangeEventArgs(this._state.range);\n\n              if (this.trigger(SELECT_START, args)) {\n                this._state = null;\n              } else {\n                e.preventDefault();\n              }\n            },\n            _gestureend: function () {\n              if (this._state) {\n                this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n                delete this._state;\n              }\n            },\n            _gesturechange: function (e) {\n              var ref = this;\n              var chart = ref.chart;\n              var state = ref._state;\n              var options = ref.options;\n              var categoryAxis = ref.categoryAxis;\n              var range = state.range;\n\n              var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n\n              var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n\n              var left = Math.min(p0, p1);\n              var right = Math.max(p0, p1);\n              e.preventDefault();\n              range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n              range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n              this.move(range.from, range.to);\n              this.trigger(SELECT, this._rangeEventArgs(range));\n            },\n            _index: function (value) {\n              var index = value;\n\n              if (value instanceof Date) {\n                index = this.categoryAxis.categoryIndex(value);\n              }\n\n              return index;\n            },\n            _value: function (index) {\n              var value = index;\n\n              if (this._dateAxis) {\n                value = this.categoryAxis.categoryAt(index);\n\n                if (value > this.options.max) {\n                  value = this.options.max;\n                }\n              }\n\n              return value;\n            },\n            _slot: function (value) {\n              var categoryAxis = this.categoryAxis;\n\n              var index = this._index(value);\n\n              return categoryAxis.getSlot(index, index, true);\n            },\n            move: function (from, to) {\n              var options = this.options;\n              var reverse = this.categoryAxis.options.reverse;\n              var offset = options.offset;\n              var padding = options.padding;\n              var border = options.selection.border;\n              var left = reverse ? to : from;\n              var right = reverse ? from : to;\n              var edge = 'x' + (reverse ? 2 : 1);\n\n              var box = this._slot(left);\n\n              var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n              elementStyles(this.leftMask, {\n                width: leftMaskWidth\n              });\n              elementStyles(this.selection, {\n                left: leftMaskWidth\n              });\n              box = this._slot(right);\n              var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n              elementStyles(this.rightMask, {\n                width: rightMaskWidth\n              });\n              var distance = options.width - rightMaskWidth;\n\n              if (distance !== options.width) {\n                distance += border.right;\n              }\n\n              elementStyles(this.rightMask, {\n                left: distance\n              });\n              elementStyles(this.selection, {\n                width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n              });\n            },\n            set: function (from, to) {\n              var options = this.options;\n\n              var min = this._index(options.min);\n\n              var max = this._index(options.max);\n\n              var fromValue = limitValue(this._index(from), min, max);\n              var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n              if (options.visible) {\n                this.move(fromValue, toValue);\n              }\n\n              options.from = this._value(fromValue);\n              options.to = this._value(toValue);\n            },\n            expand: function (delta) {\n              var options = this.options;\n\n              var min = this._index(options.min);\n\n              var max = this._index(options.max);\n\n              var zDir = options.mousewheel.zoom;\n\n              var from = this._index(options.from);\n\n              var to = this._index(options.to);\n\n              var range = {\n                from: from,\n                to: to\n              };\n              var oldRange = deepExtend({}, range);\n\n              if (this._state) {\n                range = this._state.range;\n              }\n\n              if (zDir !== RIGHT) {\n                range.from = limitValue(limitValue(from - delta, 0, to - 1), min, max);\n              }\n\n              if (zDir !== LEFT) {\n                range.to = limitValue(limitValue(to + delta, range.from + 1, max), min, max);\n              }\n\n              if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.set(range.from, range.to);\n                return true;\n              }\n            },\n            zoom: function (delta, coords) {\n              var options = this.options;\n\n              var min = this._index(options.min);\n\n              var max = this._index(options.max);\n\n              var from = this._index(options.from);\n\n              var to = this._index(options.to);\n\n              var range = {\n                from: from,\n                to: to\n              };\n              var oldRange = deepExtend({}, range);\n              var ref = this.categoryAxis.options;\n              var reverse = ref.reverse;\n              var origin = X + (reverse ? '2' : '1');\n              var lineBox = this.categoryAxis.lineBox();\n              var relative = Math.abs(lineBox[origin] - coords[X]);\n              var size = lineBox.width();\n              var position = round(relative / size, 2);\n              var minDelta = round(position * delta);\n              var maxDelta = round((1 - position) * delta);\n\n              if (this._state) {\n                range = this._state.range;\n              }\n\n              range.from = limitValue(limitValue(from - minDelta, 0, to - 1), min, max);\n              range.to = limitValue(limitValue(to + maxDelta, range.from + 1, max), min, max);\n\n              if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.set(range.from, range.to);\n                return true;\n              }\n            },\n            trigger: function (name, args) {\n              return (this.observer || this.chart).trigger(name, args);\n            }\n          });\n          setDefaultOptions(Selection, {\n            visible: true,\n            mousewheel: {\n              zoom: \"both\"\n            },\n            min: MIN_VALUE,\n            max: MAX_VALUE\n          });\n          var Tooltip = BaseTooltip.extend({\n            show: function (point) {\n              if (!point || !point.tooltipAnchor || this._current && this._current === point) {\n                return;\n              }\n\n              var options = deepExtend({}, this.options, point.options.tooltip);\n              var anchor = point.tooltipAnchor();\n\n              if (anchor) {\n                this._current = point;\n                BaseTooltip.fn.show.call(this, {\n                  point: point,\n                  anchor: anchor\n                }, options, point);\n              } else {\n                this.hide();\n              }\n            },\n            hide: function () {\n              delete this._current;\n              BaseTooltip.fn.hide.call(this);\n            }\n          });\n          var SharedTooltip = BaseTooltip.extend({\n            init: function (plotArea, options) {\n              BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n              this.plotArea = plotArea;\n              this.formatService = plotArea.chartService.format;\n            },\n            showAt: function (points, coords) {\n              var tooltipPoints = grep(points, function (point) {\n                var tooltip = point.series.tooltip;\n                var excluded = tooltip && tooltip.visible === false;\n                return !excluded;\n              });\n\n              if (tooltipPoints.length > 0) {\n                var point = tooltipPoints[0];\n                var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n                var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n                this.show({\n                  anchor: anchor,\n                  shared: true,\n                  points: points,\n                  category: point.category,\n                  categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                  series: this.plotArea.series\n                }, this.options);\n              }\n            },\n            _slotAnchor: function (point, slot) {\n              var axis = this.plotArea.categoryAxis;\n              var align = {\n                horizontal: \"left\",\n                vertical: \"center\"\n              };\n\n              if (!axis.options.vertical) {\n                point.x = slot.center().x;\n              }\n\n              return {\n                point: point,\n                align: align\n              };\n            },\n            _defaultAnchor: function (point, slot) {\n              var box = point.owner.pane.chartsBox();\n              var vertical = this.plotArea.categoryAxis.options.vertical;\n              var center = box.center();\n              var slotCenter = slot.center();\n              var align = {\n                horizontal: \"center\",\n                vertical: \"center\"\n              };\n              var centerPoint;\n\n              if (vertical) {\n                centerPoint = new Point(center.x, slotCenter.y);\n              } else {\n                centerPoint = new Point(slotCenter.x, center.y);\n              }\n\n              return {\n                point: centerPoint,\n                align: align\n              };\n            }\n          });\n          setDefaultOptions(SharedTooltip, {\n            categoryFormat: '{0:d}'\n          });\n          var BarChartAnimation = Animation.extend({\n            setup: function () {\n              var ref = this;\n              var element = ref.element;\n              var options = ref.options;\n              var bbox = element.bbox();\n\n              if (bbox) {\n                this.origin = options.origin;\n                var axis = options.vertical ? Y : X;\n                var fromScale = this.fromScale = new GeometryPoint(1, 1);\n                fromScale[axis] = START_SCALE;\n                element.transform(transform().scale(fromScale.x, fromScale.y));\n              } else {\n                this.abort();\n              }\n            },\n            step: function (pos) {\n              var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n              var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n              this.element.transform(transform().scale(scaleX, scaleY, this.origin));\n            },\n            abort: function () {\n              Animation.fn.abort.call(this);\n              this.element.transform(null);\n            }\n          });\n          setDefaultOptions(BarChartAnimation, {\n            duration: INITIAL_ANIMATION_DURATION\n          });\n          AnimationFactory.current.register(BAR, BarChartAnimation);\n          var BubbleAnimation = Animation.extend({\n            setup: function () {\n              var center = this.center = this.element.bbox().center();\n              this.element.transform(transform().scale(START_SCALE, START_SCALE, center));\n            },\n            step: function (pos) {\n              this.element.transform(transform().scale(pos, pos, this.center));\n            }\n          });\n          setDefaultOptions(BubbleAnimation, {\n            easing: \"easeOutElastic\"\n          });\n          AnimationFactory.current.register(BUBBLE, BubbleAnimation);\n          var FadeInAnimation = Animation.extend({\n            setup: function () {\n              this.fadeTo = this.element.opacity();\n              this.element.opacity(0);\n            },\n            step: function (pos) {\n              this.element.opacity(pos * this.fadeTo);\n            }\n          });\n          setDefaultOptions(FadeInAnimation, {\n            duration: 200,\n            easing: \"linear\"\n          });\n          AnimationFactory.current.register(FADEIN, FadeInAnimation);\n          var PieAnimation = Animation.extend({\n            setup: function () {\n              this.element.transform(transform().scale(START_SCALE, START_SCALE, this.options.center));\n            },\n            step: function (pos) {\n              this.element.transform(transform().scale(pos, pos, this.options.center));\n            }\n          });\n          setDefaultOptions(PieAnimation, {\n            easing: \"easeOutElastic\",\n            duration: INITIAL_ANIMATION_DURATION\n          });\n          AnimationFactory.current.register(PIE, PieAnimation);\n          var ScatterLineChart = ScatterChart.extend({\n            render: function () {\n              ScatterChart.fn.render.call(this);\n              this.renderSegments();\n            },\n            createSegment: function (linePoints, currentSeries, seriesIx) {\n              var style = currentSeries.style;\n              var pointType;\n\n              if (style === SMOOTH) {\n                pointType = SplineSegment;\n              } else {\n                pointType = LineSegment;\n              }\n\n              return new pointType(linePoints, currentSeries, seriesIx);\n            },\n            animationPoints: function () {\n              var points = ScatterChart.fn.animationPoints.call(this);\n              return points.concat(this._segments);\n            },\n            createMissingValue: function (value, missingValues) {\n              if (missingValues === ZERO) {\n                var missingValue = {\n                  x: value.x,\n                  y: value.y\n                };\n\n                if (!hasValue(missingValue.x)) {\n                  missingValue.x = 0;\n                }\n\n                if (!hasValue(missingValue.y)) {\n                  missingValue.y = 0;\n                }\n\n                return missingValue;\n              }\n            }\n          });\n          deepExtend(ScatterLineChart.prototype, LineChartMixin);\n          var XYPlotArea = PlotAreaBase.extend({\n            initFields: function () {\n              this.namedXAxes = {};\n              this.namedYAxes = {};\n              this.xAxisRangeTracker = new AxisGroupRangeTracker();\n              this.yAxisRangeTracker = new AxisGroupRangeTracker();\n            },\n            render: function (panes) {\n              var this$1 = this;\n\n              if (panes === void 0) {\n                panes = this.panes;\n              }\n\n              var seriesByPane = this.groupSeriesByPane();\n\n              for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1.addToLegend(paneSeries);\n                var filteredSeries = this$1.filterVisibleSeries(paneSeries);\n\n                if (!filteredSeries) {\n                  continue;\n                }\n\n                this$1.createScatterChart(filterSeriesByType(filteredSeries, SCATTER), pane);\n                this$1.createScatterLineChart(filterSeriesByType(filteredSeries, SCATTER_LINE), pane);\n                this$1.createBubbleChart(filterSeriesByType(filteredSeries, BUBBLE), pane);\n              }\n\n              this.createAxes(panes);\n            },\n            appendChart: function (chart, pane) {\n              this.xAxisRangeTracker.update(chart.xAxisRanges);\n              this.yAxisRangeTracker.update(chart.yAxisRanges);\n              PlotAreaBase.fn.appendChart.call(this, chart, pane);\n            },\n            removeAxis: function (axis) {\n              var axisName = axis.options.name;\n              PlotAreaBase.fn.removeAxis.call(this, axis);\n\n              if (axis.options.vertical) {\n                this.yAxisRangeTracker.reset(axisName);\n                delete this.namedYAxes[axisName];\n              } else {\n                this.xAxisRangeTracker.reset(axisName);\n                delete this.namedXAxes[axisName];\n              }\n\n              if (axis === this.axisX) {\n                delete this.axisX;\n              }\n\n              if (axis === this.axisY) {\n                delete this.axisY;\n              }\n            },\n            seriesPaneName: function (series) {\n              var options = this.options;\n              var xAxisName = series.xAxis;\n              var xAxisOptions = [].concat(options.xAxis);\n              var xAxis = grep(xAxisOptions, function (a) {\n                return a.name === xAxisName;\n              })[0];\n              var yAxisName = series.yAxis;\n              var yAxisOptions = [].concat(options.yAxis);\n              var yAxis = grep(yAxisOptions, function (a) {\n                return a.name === yAxisName;\n              })[0];\n              var panes = options.panes || [{}];\n              var defaultPaneName = panes[0].name || \"default\";\n              var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n              return paneName;\n            },\n            createScatterChart: function (series, pane) {\n              if (series.length > 0) {\n                this.appendChart(new ScatterChart(this, {\n                  series: series,\n                  clip: pane.options.clip\n                }), pane);\n              }\n            },\n            createScatterLineChart: function (series, pane) {\n              if (series.length > 0) {\n                this.appendChart(new ScatterLineChart(this, {\n                  series: series,\n                  clip: pane.options.clip\n                }), pane);\n              }\n            },\n            createBubbleChart: function (series, pane) {\n              if (series.length > 0) {\n                this.appendChart(new BubbleChart(this, {\n                  series: series,\n                  clip: pane.options.clip\n                }), pane);\n              }\n            },\n            createXYAxis: function (options, vertical, axisIndex) {\n              var axisName = options.name;\n              var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n              var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n              var axisOptions = deepExtend({\n                reverse: !vertical && this.chartService.rtl\n              }, options, {\n                vertical: vertical\n              });\n              var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n              var defaultRange = tracker.query();\n              var defaultAxisRange = isLog ? {\n                min: 0.1,\n                max: 1\n              } : {\n                min: 0,\n                max: 1\n              };\n              var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n              var typeSamples = [axisOptions.min, axisOptions.max];\n              var series = this.series;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n\n                if (seriesAxisName === axisOptions.name || axisIndex === 0 && !seriesAxisName) {\n                  var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                  typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n                  break;\n                }\n              }\n\n              if (axisIndex === 0 && defaultRange) {\n                range.min = Math.min(range.min, defaultRange.min);\n                range.max = Math.max(range.max, defaultRange.max);\n              }\n\n              var inferredDate;\n\n              for (var i = 0; i < typeSamples.length; i++) {\n                if (typeSamples[i] instanceof Date) {\n                  inferredDate = true;\n                  break;\n                }\n              }\n\n              var axisType;\n\n              if (equalsIgnoreCase(axisOptions.type, DATE) || !axisOptions.type && inferredDate) {\n                axisType = dataviz.DateValueAxis;\n              } else if (isLog) {\n                axisType = dataviz.LogarithmicAxis;\n              } else {\n                axisType = dataviz.NumericAxis;\n              }\n\n              var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n              axis.axisIndex = axisIndex;\n\n              if (axisName) {\n                if (namedAxes[axisName]) {\n                  throw new Error((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\");\n                }\n\n                namedAxes[axisName] = axis;\n              }\n\n              this.appendAxis(axis);\n              return axis;\n            },\n            createAxes: function (panes) {\n              var this$1 = this;\n              var options = this.options;\n              var xAxesOptions = [].concat(options.xAxis);\n              var xAxes = [];\n              var yAxesOptions = [].concat(options.yAxis);\n              var yAxes = [];\n\n              for (var idx = 0; idx < xAxesOptions.length; idx++) {\n                var axisPane = this$1.findPane(xAxesOptions[idx].pane);\n\n                if (inArray(axisPane, panes)) {\n                  xAxes.push(this$1.createXYAxis(xAxesOptions[idx], false, idx));\n                }\n              }\n\n              for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n                var axisPane$1 = this$1.findPane(yAxesOptions[idx$1].pane);\n\n                if (inArray(axisPane$1, panes)) {\n                  yAxes.push(this$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n                }\n              }\n\n              this.axisX = this.axisX || xAxes[0];\n              this.axisY = this.axisY || yAxes[0];\n            },\n            _dispatchEvent: function (chart, e, eventType) {\n              var coords = chart._eventCoordinates(e);\n\n              var point = new Point(coords.x, coords.y);\n              var allAxes = this.axes;\n              var length = allAxes.length;\n              var xValues = [];\n              var yValues = [];\n\n              for (var i = 0; i < length; i++) {\n                var axis = allAxes[i];\n                var values = axis.options.vertical ? yValues : xValues;\n                var currentValue = axis.getValue(point);\n\n                if (currentValue !== null) {\n                  values.push(currentValue);\n                }\n              }\n\n              if (xValues.length > 0 && yValues.length > 0) {\n                chart.trigger(eventType, {\n                  element: eventElement(e),\n                  originalEvent: e,\n                  x: singleItemOrArray(xValues),\n                  y: singleItemOrArray(yValues)\n                });\n              }\n            },\n            updateAxisOptions: function (axis, options) {\n              var vertical = axis.options.vertical;\n              var axes = this.groupAxes(this.panes);\n              var index = (vertical ? axes.y : axes.x).indexOf(axis);\n              updateAxisOptions$1(this.options, index, vertical, options);\n              updateAxisOptions$1(this.originalOptions, index, vertical, options);\n            }\n          });\n\n          function updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n            var axisOptions = [].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis)[axisIndex];\n            deepExtend(axisOptions, options);\n          }\n\n          setDefaultOptions(XYPlotArea, {\n            xAxis: {},\n            yAxis: {}\n          });\n          deepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n          var PieSegment = ChartElement.extend({\n            init: function (value, sector, options) {\n              ChartElement.fn.init.call(this, options);\n              this.value = value;\n              this.sector = sector;\n            },\n            render: function () {\n              var labels = this.options.labels;\n              var chartService = this.owner.chartService;\n              var labelText = this.value;\n\n              if (this._rendered || this.visible === false) {\n                return;\n              }\n\n              this._rendered = true;\n              var labelTemplate = getTemplate(labels);\n              var pointData = this.pointData();\n\n              if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n              } else if (labels.format) {\n                labelText = chartService.format.auto(labels.format, labelText);\n              }\n\n              if (labels.visible && (labelText || labelText === 0)) {\n                if (labels.position === CENTER || labels.position === INSIDE_END) {\n                  if (!labels.color) {\n                    labels.color = dataviz.autoTextColor(this.options.color);\n                  }\n\n                  if (!labels.background) {\n                    labels.background = this.options.color;\n                  }\n                } else {\n                  var themeLabels = chartService.theme.seriesDefaults.labels;\n                  labels.color = labels.color || themeLabels.color;\n                  labels.background = labels.background || themeLabels.background;\n                }\n\n                this.label = new TextBox(labelText, deepExtend({}, labels, {\n                  align: CENTER,\n                  vAlign: \"\",\n                  animation: {\n                    type: FADEIN,\n                    delay: this.animationDelay\n                  }\n                }), pointData);\n                this.append(this.label);\n              }\n            },\n            reflow: function (targetBox) {\n              this.render();\n              this.box = targetBox;\n              this.reflowLabel();\n            },\n            reflowLabel: function () {\n              var ref = this;\n              var labelsOptions = ref.options.labels;\n              var label = ref.label;\n              var sector = this.sector.clone();\n              var labelsDistance = labelsOptions.distance;\n              var angle = sector.middle();\n\n              if (label) {\n                var labelHeight = label.box.height();\n                var labelWidth = label.box.width();\n                var lp;\n\n                if (labelsOptions.position === CENTER) {\n                  sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                  lp = sector.point(angle);\n                  label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else if (labelsOptions.position === INSIDE_END) {\n                  sector.radius = sector.radius - labelHeight / 2;\n                  lp = sector.point(angle);\n                  label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else {\n                  var x1;\n                  lp = sector.clone().expand(labelsDistance).point(angle);\n\n                  if (lp.x >= sector.center.x) {\n                    x1 = lp.x + labelWidth;\n                    label.orientation = RIGHT;\n                  } else {\n                    x1 = lp.x - labelWidth;\n                    label.orientation = LEFT;\n                  }\n\n                  label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n                }\n              }\n            },\n            createVisual: function () {\n              var this$1 = this;\n              var ref = this;\n              var sector = ref.sector;\n              var options = ref.options;\n              ChartElement.fn.createVisual.call(this);\n\n              if (this.value) {\n                if (options.visual) {\n                  var startAngle = (sector.startAngle + 180) % 360;\n                  var visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    center: new GeometryPoint(sector.center.x, sector.center.y),\n                    radius: sector.radius,\n                    innerRadius: sector.innerRadius,\n                    startAngle: startAngle,\n                    endAngle: startAngle + sector.angle,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                      var group = new Group();\n                      this$1.createSegmentVisual(group);\n                      return group;\n                    }\n                  });\n\n                  if (visual) {\n                    this.visual.append(visual);\n                  }\n                } else {\n                  this.createSegmentVisual(this.visual);\n                }\n              }\n            },\n            createSegmentVisual: function (group) {\n              var ref = this;\n              var sector = ref.sector;\n              var options = ref.options;\n              var borderOptions = options.border || {};\n              var border = borderOptions.width > 0 ? {\n                stroke: {\n                  color: borderOptions.color,\n                  width: borderOptions.width,\n                  opacity: borderOptions.opacity,\n                  dashType: borderOptions.dashType\n                }\n              } : {};\n              var color = options.color;\n              var fill = {\n                color: color,\n                opacity: options.opacity\n              };\n              var visual = this.createSegment(sector, deepExtend({\n                fill: fill,\n                stroke: {\n                  opacity: options.opacity\n                },\n                zIndex: options.zIndex\n              }, border));\n              group.append(visual);\n\n              if (hasGradientOverlay(options)) {\n                group.append(this.createGradientOverlay(visual, {\n                  baseColor: color,\n                  fallbackFill: fill\n                }, deepExtend({\n                  center: [sector.center.x, sector.center.y],\n                  innerRadius: sector.innerRadius,\n                  radius: sector.radius,\n                  userSpace: true\n                }, options.overlay)));\n              }\n            },\n            createSegment: function (sector, options) {\n              if (options.singleSegment) {\n                return new drawing.Circle(new geometry.Circle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n              }\n\n              return dataviz.ShapeBuilder.current.createRing(sector, options);\n            },\n            createAnimation: function () {\n              var ref = this;\n              var options = ref.options;\n              var center = ref.sector.center;\n              deepExtend(options, {\n                animation: {\n                  center: [center.x, center.y],\n                  delay: this.animationDelay\n                }\n              });\n              ChartElement.fn.createAnimation.call(this);\n            },\n            createHighlight: function (options) {\n              var highlight = this.options.highlight || {};\n              var border = highlight.border || {};\n              return this.createSegment(this.sector, deepExtend({}, options, {\n                fill: {\n                  color: highlight.color,\n                  opacity: highlight.opacity\n                },\n                stroke: {\n                  opacity: border.opacity,\n                  width: border.width,\n                  color: border.color\n                }\n              }));\n            },\n            highlightVisual: function () {\n              return this.visual.children[0];\n            },\n            highlightVisualArgs: function () {\n              var sector = this.sector;\n              return {\n                options: this.options,\n                radius: sector.radius,\n                innerRadius: sector.innerRadius,\n                center: new GeometryPoint(sector.center.x, sector.center.y),\n                startAngle: sector.startAngle,\n                endAngle: sector.angle + sector.startAngle,\n                visual: this.visual\n              };\n            },\n            tooltipAnchor: function () {\n              var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n              var midAndle = sector.middle();\n              var midPoint = sector.point(midAndle);\n              return {\n                point: midPoint,\n                align: tooltipAlignment(midAndle + 180)\n              };\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            },\n            pointData: function () {\n              return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage\n              };\n            }\n          });\n          var RAD_30 = round(dataviz.rad(30), DEFAULT_PRECISION);\n          var RAD_60 = round(dataviz.rad(60), DEFAULT_PRECISION);\n\n          function tooltipAlignment(angle) {\n            var radians = dataviz.rad(angle);\n            var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n            var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n            var horizontal;\n\n            if (Math.abs(sine) > RAD_60) {\n              horizontal = CENTER;\n            } else if (cosine < 0) {\n              horizontal = RIGHT;\n            } else {\n              horizontal = LEFT;\n            }\n\n            var vertical;\n\n            if (Math.abs(sine) < RAD_30) {\n              vertical = CENTER;\n            } else if (sine < 0) {\n              vertical = BOTTOM;\n            } else {\n              vertical = TOP;\n            }\n\n            return {\n              horizontal: horizontal,\n              vertical: vertical\n            };\n          }\n\n          setDefaultOptions(PieSegment, {\n            color: WHITE,\n            overlay: {\n              gradient: \"roundedBevel\"\n            },\n            border: {\n              width: 0.5\n            },\n            labels: {\n              visible: false,\n              distance: 35,\n              font: datavizConstants.DEFAULT_FONT,\n              margin: getSpacing(0.5),\n              align: CIRCLE,\n              zIndex: 1,\n              position: OUTSIDE_END\n            },\n            animation: {\n              type: PIE\n            },\n            highlight: {\n              visible: true,\n              border: {\n                width: 1\n              }\n            },\n            visible: true\n          });\n          deepExtend(PieSegment.prototype, PointEventsMixin);\n          var PieChartMixin = {\n            createLegendItem: function (value, point, options) {\n              var legendOptions = this.options.legend || {};\n              var labelsOptions = legendOptions.labels || {};\n              var inactiveItems = legendOptions.inactiveItems || {};\n              var inactiveItemsLabels = inactiveItems.labels || {};\n\n              if (options && options.visibleInLegend !== false) {\n                var pointVisible = options.visible !== false;\n                var labelTemplate = pointVisible ? getTemplate(labelsOptions) : getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n                var text = options.category;\n\n                if (labelTemplate) {\n                  text = labelTemplate({\n                    text: text,\n                    series: options.series,\n                    dataItem: options.dataItem,\n                    percentage: options.percentage,\n                    value: value\n                  });\n                }\n\n                var itemLabelOptions, markerColor;\n\n                if (pointVisible) {\n                  itemLabelOptions = {};\n                  markerColor = point.color;\n                } else {\n                  itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                  };\n                  markerColor = (inactiveItems.markers || {}).color;\n                }\n\n                if (hasValue(text) && text !== \"\") {\n                  this.legendItems.push({\n                    active: pointVisible,\n                    pointIndex: options.index,\n                    text: text,\n                    series: options.series,\n                    markerColor: markerColor,\n                    labels: itemLabelOptions\n                  });\n                }\n              }\n            }\n          };\n          var PIE_SECTOR_ANIM_DELAY = 70;\n          var PieChart = ChartElement.extend({\n            init: function (plotArea, options) {\n              ChartElement.fn.init.call(this, options);\n              this.plotArea = plotArea;\n              this.chartService = plotArea.chartService;\n              this.points = [];\n              this.legendItems = [];\n              this.render();\n            },\n            render: function () {\n              this.traverseDataPoints(this.addValue.bind(this));\n            },\n            traverseDataPoints: function (callback) {\n              var this$1 = this;\n              var ref = this;\n              var options = ref.options;\n              var seriesColors = ref.plotArea.options.seriesColors;\n\n              if (seriesColors === void 0) {\n                seriesColors = [];\n              }\n\n              var colorsCount = seriesColors.length;\n              var series = options.series;\n              var seriesCount = series.length;\n\n              for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var data = currentSeries.data;\n                var ref$1 = bindSegments(currentSeries);\n                var total = ref$1.total;\n                var points = ref$1.points;\n                var count = ref$1.count;\n                var anglePerValue = 360 / total;\n                var constantAngle = void 0;\n\n                if (!isFinite(anglePerValue)) {\n                  constantAngle = 360 / count;\n                }\n\n                var currentAngle = void 0;\n\n                if (defined(currentSeries.startAngle)) {\n                  currentAngle = currentSeries.startAngle;\n                } else {\n                  currentAngle = options.startAngle;\n                }\n\n                if (seriesIx !== seriesCount - 1) {\n                  if (currentSeries.labels.position === OUTSIDE_END) {\n                    currentSeries.labels.position = CENTER;\n                  }\n                }\n\n                for (var i = 0; i < points.length; i++) {\n                  var pointData = points[i];\n\n                  if (!pointData) {\n                    continue;\n                  }\n\n                  var fields = pointData.fields;\n                  var value = pointData.value;\n                  var visible = pointData.visible;\n                  var angle = value !== 0 ? constantAngle || value * anglePerValue : 0;\n                  var explode = data.length !== 1 && Boolean(fields.explode);\n\n                  if (!isFunction(currentSeries.color)) {\n                    currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                  }\n\n                  callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                    owner: this$1,\n                    category: defined(fields.category) ? fields.category : \"\",\n                    index: i,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: data[i],\n                    percentage: total !== 0 ? value / total : 0,\n                    explode: explode,\n                    visibleInLegend: fields.visibleInLegend,\n                    visible: visible,\n                    zIndex: seriesCount - seriesIx,\n                    animationDelay: this$1.animationDelay(i, seriesIx, seriesCount)\n                  });\n\n                  if (visible !== false) {\n                    currentAngle += angle;\n                  }\n                }\n              }\n            },\n            evalSegmentOptions: function (options, value, fields) {\n              var series = fields.series;\n              evalOptions(options, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                category: fields.category,\n                percentage: fields.percentage\n              }, {\n                defaults: series._defaults,\n                excluded: [\"data\", \"content\", \"template\", \"visual\", \"toggle\"]\n              });\n            },\n            addValue: function (value, sector, fields) {\n              var segmentOptions = deepExtend({}, fields.series, {\n                index: fields.index\n              });\n              this.evalSegmentOptions(segmentOptions, value, fields);\n              this.createLegendItem(value, segmentOptions, fields);\n\n              if (fields.visible === false) {\n                return;\n              }\n\n              var segment = new PieSegment(value, sector, segmentOptions);\n              $.extend(segment, fields);\n              this.append(segment);\n              this.points.push(segment);\n            },\n            reflow: function (targetBox) {\n              var ref = this;\n              var options = ref.options;\n              var points = ref.points;\n              var seriesConfigs = ref.seriesConfigs;\n\n              if (seriesConfigs === void 0) {\n                seriesConfigs = [];\n              }\n\n              var count = points.length;\n              var box = targetBox.clone();\n              var space = 5;\n              var minWidth = Math.min(box.width(), box.height());\n              var halfMinWidth = minWidth / 2;\n              var defaultPadding = minWidth - minWidth * 0.85;\n              var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n              var newBoxCenter = newBox.center();\n              var boxCenter = box.center();\n              var seriesCount = options.series.length;\n              var leftSideLabels = [];\n              var rightSideLabels = [];\n              var padding = valueOrDefault(options.padding, defaultPadding);\n              this.targetBox = targetBox;\n              padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n              newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n              var radius = halfMinWidth - padding;\n              var center = new Point(radius + newBox.x1 + padding, radius + newBox.y1 + padding);\n\n              for (var i = 0; i < count; i++) {\n                var segment = points[i];\n                var sector = segment.sector;\n                var seriesIndex = segment.seriesIx;\n                sector.radius = radius;\n                sector.center = center;\n\n                if (seriesConfigs.length) {\n                  var seriesConfig = seriesConfigs[seriesIndex];\n                  sector.innerRadius = seriesConfig.innerRadius;\n                  sector.radius = seriesConfig.radius;\n                }\n\n                if (seriesIndex === seriesCount - 1 && segment.explode) {\n                  sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n                }\n\n                segment.reflow(newBox);\n                var label = segment.label;\n\n                if (label) {\n                  if (label.options.position === OUTSIDE_END) {\n                    if (seriesIndex === seriesCount - 1) {\n                      if (label.orientation === RIGHT) {\n                        rightSideLabels.push(label);\n                      } else {\n                        leftSideLabels.push(label);\n                      }\n                    }\n                  }\n                }\n              }\n\n              if (leftSideLabels.length > 0) {\n                leftSideLabels.sort(this.labelComparator(true));\n                this.leftLabelsReflow(leftSideLabels);\n              }\n\n              if (rightSideLabels.length > 0) {\n                rightSideLabels.sort(this.labelComparator(false));\n                this.rightLabelsReflow(rightSideLabels);\n              }\n\n              this.box = newBox;\n            },\n            leftLabelsReflow: function (labels) {\n              var distances = this.distanceBetweenLabels(labels);\n              this.distributeLabels(distances, labels);\n            },\n            rightLabelsReflow: function (labels) {\n              var distances = this.distanceBetweenLabels(labels);\n              this.distributeLabels(distances, labels);\n            },\n            distanceBetweenLabels: function (labels) {\n              var segment = last(this.points);\n              var sector = segment.sector;\n              var count = labels.length - 1;\n              var lr = sector.radius + segment.options.labels.distance;\n              var distances = [];\n              var firstBox = labels[0].box;\n              var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n              distances.push(distance);\n\n              for (var i = 0; i < count; i++) {\n                var secondBox = labels[i + 1].box;\n                firstBox = labels[i].box;\n                distance = round(secondBox.y1 - firstBox.y2);\n                distances.push(distance);\n              }\n\n              distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n              distances.push(distance);\n              return distances;\n            },\n            distributeLabels: function (distances, labels) {\n              var this$1 = this;\n              var count = distances.length;\n              var left, right, remaining;\n\n              for (var i = 0; i < count; i++) {\n                remaining = -distances[i];\n                left = right = i;\n\n                while (remaining > 0 && (left >= 0 || right < count)) {\n                  remaining = this$1._takeDistance(distances, i, --left, remaining);\n                  remaining = this$1._takeDistance(distances, i, ++right, remaining);\n                }\n              }\n\n              this.reflowLabels(distances, labels);\n            },\n            _takeDistance: function (distances, anchor, position, amount) {\n              var result = amount;\n\n              if (distances[position] > 0) {\n                var available = Math.min(distances[position], result);\n                result -= available;\n                distances[position] -= available;\n                distances[anchor] += available;\n              }\n\n              return result;\n            },\n            reflowLabels: function (distances, labels) {\n              var this$1 = this;\n              var segment = last(this.points);\n              var sector = segment.sector;\n              var labelOptions = segment.options.labels;\n              var labelsCount = labels.length;\n              var labelDistance = labelOptions.distance;\n              var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n              var boxX;\n              distances[0] += 2;\n\n              for (var i = 0; i < labelsCount; i++) {\n                var label = labels[i];\n                var box = label.box;\n                boxY += distances[i];\n                boxX = this$1.hAlignLabel(box.x2, sector.clone().expand(labelDistance), boxY, boxY + box.height(), label.orientation === RIGHT);\n\n                if (label.orientation === RIGHT) {\n                  if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.radius + sector.center.x + labelDistance;\n                  }\n\n                  label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n                } else {\n                  if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.center.x - sector.radius - labelDistance;\n                  }\n\n                  label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n                }\n\n                boxY += box.height();\n              }\n            },\n            createVisual: function () {\n              var this$1 = this;\n              var ref = this;\n              var connectors = ref.options.connectors;\n              var points = ref.points;\n              var count = points.length;\n              var space = 4;\n              ChartElement.fn.createVisual.call(this);\n              this._connectorLines = [];\n\n              for (var i = 0; i < count; i++) {\n                var segment = points[i];\n                var sector = segment.sector;\n                var label = segment.label;\n                var angle = sector.middle();\n                var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n                if (label) {\n                  var connectorLine = new Path({\n                    stroke: {\n                      color: connectorsColor,\n                      width: connectors.width\n                    },\n                    animation: {\n                      type: FADEIN,\n                      delay: segment.animationDelay\n                    }\n                  });\n\n                  if (label.options.position === OUTSIDE_END) {\n                    var box = label.box;\n                    var centerPoint = sector.center;\n                    var start = sector.point(angle);\n                    var middle = new Point(box.x1, box.center().y);\n                    var sr = void 0,\n                        end = void 0,\n                        crossing = void 0;\n                    start = sector.clone().expand(connectors.padding).point(angle);\n                    connectorLine.moveTo(start.x, start.y); // TODO: Extract into a method to remove duplication\n\n                    if (label.orientation === RIGHT) {\n                      end = new Point(box.x1 - connectors.padding, box.center().y);\n                      crossing = intersection(centerPoint, start, middle, end);\n                      middle = new Point(end.x - space, end.y);\n                      crossing = crossing || middle;\n                      crossing.x = Math.min(crossing.x, middle.x);\n\n                      if (this$1.pointInCircle(crossing, sector.center, sector.radius + space) || crossing.x < sector.center.x) {\n                        sr = sector.center.x + sector.radius + space;\n\n                        if (segment.options.labels.align !== COLUMN) {\n                          if (sr < middle.x) {\n                            connectorLine.lineTo(sr, start.y);\n                          } else {\n                            connectorLine.lineTo(start.x + space * 2, start.y);\n                          }\n                        } else {\n                          connectorLine.lineTo(sr, start.y);\n                        }\n\n                        connectorLine.lineTo(middle.x, end.y);\n                      } else {\n                        crossing.y = end.y;\n                        connectorLine.lineTo(crossing.x, crossing.y);\n                      }\n                    } else {\n                      end = new Point(box.x2 + connectors.padding, box.center().y);\n                      crossing = intersection(centerPoint, start, middle, end);\n                      middle = new Point(end.x + space, end.y);\n                      crossing = crossing || middle;\n                      crossing.x = Math.max(crossing.x, middle.x);\n\n                      if (this$1.pointInCircle(crossing, sector.center, sector.radius + space) || crossing.x > sector.center.x) {\n                        sr = sector.center.x - sector.radius - space;\n\n                        if (segment.options.labels.align !== COLUMN) {\n                          if (sr > middle.x) {\n                            connectorLine.lineTo(sr, start.y);\n                          } else {\n                            connectorLine.lineTo(start.x - space * 2, start.y);\n                          }\n                        } else {\n                          connectorLine.lineTo(sr, start.y);\n                        }\n\n                        connectorLine.lineTo(middle.x, end.y);\n                      } else {\n                        crossing.y = end.y;\n                        connectorLine.lineTo(crossing.x, crossing.y);\n                      }\n                    }\n\n                    connectorLine.lineTo(end.x, end.y);\n\n                    this$1._connectorLines.push(connectorLine);\n\n                    this$1.visual.append(connectorLine);\n                  }\n                }\n              }\n            },\n            renderVisual: function () {\n              ChartElement.fn.renderVisual.call(this);\n\n              if (dataviz.find(this.options.series, function (options) {\n                return options.autoFit;\n              })) {\n                var targetBox = this.targetBox;\n                var pieCenter = this.box.center();\n                var bbox = this.visual.bbox();\n\n                if (!bbox) {\n                  return;\n                }\n\n                var bboxBottom = bbox.bottomRight();\n                var scale = Math.min((pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y), (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y), (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x), (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x));\n\n                if (scale < 1) {\n                  this.visual.transform(transform().scale(scale, scale, [pieCenter.x, pieCenter.y]));\n                }\n              }\n            },\n            labelComparator: function (reverse) {\n              var reverseValue = reverse ? -1 : 1;\n              return function (a, b) {\n                var first = (a.parent.sector.middle() + 270) % 360;\n                var second = (b.parent.sector.middle() + 270) % 360;\n                return (first - second) * reverseValue;\n              };\n            },\n            hAlignLabel: function (originalX, sector, y1, y2, direction) {\n              var radius = sector.radius;\n              var sector_center = sector.center;\n              var cx = sector_center.x;\n              var cy = sector_center.y;\n              var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n              if (t > radius) {\n                return originalX;\n              }\n\n              return cx + Math.sqrt(radius * radius - t * t) * (direction ? 1 : -1);\n            },\n            pointInCircle: function (point, center, radius) {\n              return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n            },\n            formatPointValue: function (point, format) {\n              return this.chartService.format.auto(format, point.value);\n            },\n            animationDelay: function (categoryIndex) {\n              return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n            },\n            stackRoot: function () {\n              return this;\n            }\n          });\n\n          function intersection(a1, a2, b1, b2) {\n            var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n            var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n            var result;\n\n            if (ub !== 0) {\n              var ua = uat / ub;\n              result = new Point(a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y));\n            }\n\n            return result;\n          }\n\n          setDefaultOptions(PieChart, {\n            startAngle: 90,\n            connectors: {\n              width: 2,\n              color: \"#939393\",\n              padding: 8\n            },\n            inactiveItems: {\n              markers: {},\n              labels: {}\n            }\n          });\n          deepExtend(PieChart.prototype, PieChartMixin);\n          PieChart.prototype.isStackRoot = true;\n          var PiePlotArea = PlotAreaBase.extend({\n            render: function () {\n              this.createPieChart(this.series);\n            },\n            createPieChart: function (series) {\n              var firstSeries = series[0];\n              var pieChart = new PieChart(this, {\n                series: series,\n                padding: firstSeries.padding,\n                startAngle: firstSeries.startAngle,\n                connectors: firstSeries.connectors,\n                legend: this.options.legend\n              });\n              this.appendChart(pieChart);\n            },\n            appendChart: function (chart, pane) {\n              PlotAreaBase.fn.appendChart.call(this, chart, pane);\n              append(this.options.legend.items, chart.legendItems);\n            }\n          });\n          var DonutSegment = PieSegment.extend({\n            reflowLabel: function () {\n              var ref = this;\n              var labelsOptions = ref.options.labels;\n              var label = ref.label;\n              var sector = this.sector.clone();\n              var angle = sector.middle();\n\n              if (label) {\n                var labelHeight = label.box.height();\n\n                if (labelsOptions.position === CENTER) {\n                  sector.radius -= (sector.radius - sector.innerRadius) / 2;\n                  var lp = sector.point(angle);\n                  label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else {\n                  PieSegment.fn.reflowLabel.call(this);\n                }\n              }\n            },\n            createSegment: function (sector, options) {\n              return dataviz.ShapeBuilder.current.createRing(sector, options);\n            }\n          });\n          setDefaultOptions(DonutSegment, {\n            overlay: {\n              gradient: \"roundedGlass\"\n            },\n            labels: {\n              position: CENTER\n            },\n            animation: {\n              type: PIE\n            }\n          });\n          deepExtend(DonutSegment.prototype, PointEventsMixin);\n          var DONUT_SECTOR_ANIM_DELAY = 50;\n          var DonutChart = PieChart.extend({\n            addValue: function (value, sector, fields) {\n              var segmentOptions = deepExtend({}, fields.series, {\n                index: fields.index\n              });\n              this.evalSegmentOptions(segmentOptions, value, fields);\n              this.createLegendItem(value, segmentOptions, fields);\n\n              if (fields.visible === false) {\n                return;\n              }\n\n              var segment = new DonutSegment(value, sector, segmentOptions);\n              $.extend(segment, fields);\n              this.append(segment);\n              this.points.push(segment);\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              var options = this.options;\n              var box = targetBox.clone();\n              var space = 5;\n              var minWidth = Math.min(box.width(), box.height());\n              var halfMinWidth = minWidth / 2;\n              var defaultPadding = minWidth - minWidth * 0.85;\n              var series = options.series;\n              var seriesCount = series.length;\n              var padding = valueOrDefault(options.padding, defaultPadding);\n              padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n              var totalSize = halfMinWidth - padding;\n              var seriesWithoutSize = 0;\n              var holeSize;\n\n              for (var i = 0; i < seriesCount; i++) {\n                var currentSeries = series[i];\n\n                if (i === 0) {\n                  if (defined(currentSeries.holeSize)) {\n                    holeSize = currentSeries.holeSize;\n                    totalSize -= currentSeries.holeSize;\n                  }\n                }\n\n                if (defined(currentSeries.size)) {\n                  totalSize -= currentSeries.size;\n                } else {\n                  seriesWithoutSize++;\n                }\n\n                if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                  totalSize -= currentSeries.margin;\n                }\n              }\n\n              if (!defined(holeSize)) {\n                var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n                holeSize = currentSize * 0.75;\n                totalSize -= holeSize;\n              }\n\n              var innerRadius = holeSize;\n              var margin = 0;\n              var size, radius;\n              this.seriesConfigs = [];\n\n              for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n                var currentSeries$1 = series[i$1];\n                size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n                innerRadius += margin;\n                radius = innerRadius + size;\n                this$1.seriesConfigs.push({\n                  innerRadius: innerRadius,\n                  radius: radius\n                });\n                margin = currentSeries$1.margin || 0;\n                innerRadius = radius;\n              }\n\n              PieChart.fn.reflow.call(this, targetBox);\n            },\n            animationDelay: function (categoryIndex, seriesIndex, seriesCount) {\n              return categoryIndex * DONUT_SECTOR_ANIM_DELAY + INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1);\n            }\n          });\n          setDefaultOptions(DonutChart, {\n            startAngle: 90,\n            connectors: {\n              width: 2,\n              color: \"#939393\",\n              padding: 8\n            }\n          });\n          var DonutPlotArea = PiePlotArea.extend({\n            render: function () {\n              this.createDonutChart(this.series);\n            },\n            createDonutChart: function (series) {\n              var firstSeries = series[0];\n              var donutChart = new DonutChart(this, {\n                series: series,\n                padding: firstSeries.padding,\n                connectors: firstSeries.connectors,\n                legend: this.options.legend\n              });\n              this.appendChart(donutChart);\n            }\n          });\n          var DEFAULT_PADDING = 0.15;\n          var PolarPlotAreaBase = PlotAreaBase.extend({\n            initFields: function () {\n              this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n            },\n            render: function () {\n              this.addToLegend(this.series);\n              this.createPolarAxis();\n              this.createCharts();\n              this.createValueAxis();\n            },\n            alignAxes: function () {\n              var axis = this.valueAxis;\n              var range = axis.range();\n              var crossingValue = axis.options.reverse ? range.max : range.min;\n              var slot = axis.getSlot(crossingValue);\n              var center = this.polarAxis.getSlot(0).center;\n              var axisBox = axis.box.translate(center.x - slot.x1, center.y - slot.y1);\n              axis.reflow(axisBox);\n            },\n            createValueAxis: function () {\n              var tracker = this.valueAxisRangeTracker;\n              var defaultRange = tracker.query();\n              var axisOptions = this.valueAxisOptions({\n                roundToMajorUnit: false,\n                zIndex: -1\n              });\n              var axisType, axisDefaultRange;\n\n              if (axisOptions.type === LOGARITHMIC) {\n                axisType = dataviz.RadarLogarithmicAxis;\n                axisDefaultRange = {\n                  min: 0.1,\n                  max: 1\n                };\n              } else {\n                axisType = dataviz.RadarNumericAxis;\n                axisDefaultRange = {\n                  min: 0,\n                  max: 1\n                };\n              }\n\n              var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n              if (range && defaultRange) {\n                range.min = Math.min(range.min, defaultRange.min);\n                range.max = Math.max(range.max, defaultRange.max);\n              }\n\n              var valueAxis = new axisType(range.min, range.max, axisOptions, this.chartService);\n              this.valueAxis = valueAxis;\n              this.appendAxis(valueAxis);\n            },\n            reflowAxes: function () {\n              var ref = this;\n              var options = ref.options.plotArea;\n              var valueAxis = ref.valueAxis;\n              var polarAxis = ref.polarAxis;\n              var box = ref.box;\n              var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n              var padding = getSpacing(options.padding || {}, defaultPadding);\n              var paddingBox = box.clone().unpad(padding);\n              var axisBox = paddingBox.clone();\n              axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n              axisBox.align(paddingBox, Y, CENTER);\n              var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n              polarAxis.reflow(axisBox);\n              valueAxis.reflow(valueAxisBox);\n              var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n              valueAxis.reflow(valueAxis.box.unpad({\n                top: heightDiff\n              }));\n              this.axisBox = axisBox;\n              this.alignAxes(axisBox);\n            },\n            backgroundBox: function () {\n              return this.box;\n            },\n            detachLabels: function () {}\n          });\n          var PolarScatterChart = ScatterChart.extend({\n            pointSlot: function (slotX, slotY) {\n              var valueRadius = slotX.center.y - slotY.y1;\n              var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n              return new Box(slot.x, slot.y, slot.x, slot.y);\n            }\n          });\n          setDefaultOptions(PolarScatterChart, {\n            clip: false\n          });\n          var PolarLineChart = ScatterLineChart.extend({});\n          PolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n          setDefaultOptions(PolarLineChart, {\n            clip: false\n          });\n          var SplinePolarAreaSegment = SplineAreaSegment.extend({\n            fillToAxes: function (fillPath) {\n              var center = this._polarAxisCenter();\n\n              fillPath.lineTo(center.x, center.y);\n            },\n            _polarAxisCenter: function () {\n              var polarAxis = this.parent.plotArea.polarAxis;\n              var center = polarAxis.box.center();\n              return center;\n            },\n            strokeSegments: function () {\n              var segments = this._strokeSegments;\n\n              if (!segments) {\n                var center = this._polarAxisCenter();\n\n                var curveProcessor = new CurveProcessor(false);\n                var linePoints = this.points();\n                linePoints.push(center);\n                segments = this._strokeSegments = curveProcessor.process(linePoints);\n                segments.pop();\n              }\n\n              return segments;\n            }\n          });\n          var PolarAreaSegment = AreaSegment.extend({\n            fillToAxes: function (fillPath) {\n              var polarAxis = this.parent.plotArea.polarAxis;\n              var center = polarAxis.box.center();\n              var centerSegment = new geometry.Segment([center.x, center.y]);\n              fillPath.segments.unshift(centerSegment);\n              fillPath.segments.push(centerSegment);\n            }\n          });\n          var PolarAreaChart = PolarLineChart.extend({\n            createSegment: function (linePoints, currentSeries, seriesIx) {\n              var style = (currentSeries.line || {}).style;\n              var segment;\n\n              if (style === SMOOTH) {\n                segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n              } else {\n                segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n              }\n\n              return segment;\n            },\n            createMissingValue: function (value, missingValues) {\n              var missingValue;\n\n              if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n                missingValue = {\n                  x: value.x,\n                  y: value.y\n                };\n\n                if (missingValues === ZERO) {\n                  missingValue.y = 0;\n                }\n              }\n\n              return missingValue;\n            },\n            seriesMissingValues: function (series) {\n              return series.missingValues || ZERO;\n            },\n            _hasMissingValuesGap: function () {\n              var this$1 = this;\n              var series = this.options.series;\n\n              for (var idx = 0; idx < series.length; idx++) {\n                if (this$1.seriesMissingValues(series[idx]) === GAP) {\n                  return true;\n                }\n              }\n            },\n            sortPoints: function (points) {\n              var this$1 = this;\n              points.sort(xComparer);\n\n              if (this._hasMissingValuesGap()) {\n                for (var idx = 0; idx < points.length; idx++) {\n                  var point = points[idx];\n\n                  if (point) {\n                    var value = point.value;\n\n                    if (!hasValue(value.y) && this$1.seriesMissingValues(point.series) === GAP) {\n                      delete points[idx];\n                    }\n                  }\n                }\n              }\n\n              return points;\n            }\n          });\n\n          function xComparer(a, b) {\n            return a.value.x - b.value.x;\n          }\n\n          var PolarPlotArea = PolarPlotAreaBase.extend({\n            createPolarAxis: function () {\n              var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n              this.polarAxis = polarAxis;\n              this.axisX = polarAxis;\n              this.appendAxis(polarAxis);\n            },\n            valueAxisOptions: function (defaults) {\n              return deepExtend(defaults, {\n                majorGridLines: {\n                  type: ARC\n                },\n                minorGridLines: {\n                  type: ARC\n                }\n              }, this.options.yAxis);\n            },\n            createValueAxis: function () {\n              PolarPlotAreaBase.fn.createValueAxis.call(this);\n              this.axisY = this.valueAxis;\n            },\n            appendChart: function (chart, pane) {\n              this.valueAxisRangeTracker.update(chart.yAxisRanges);\n              PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n            },\n            createCharts: function () {\n              var series = this.filterVisibleSeries(this.series);\n              var pane = this.panes[0];\n              this.createLineChart(filterSeriesByType(series, [POLAR_LINE]), pane);\n              this.createScatterChart(filterSeriesByType(series, [POLAR_SCATTER]), pane);\n              this.createAreaChart(filterSeriesByType(series, [POLAR_AREA]), pane);\n            },\n            createLineChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var lineChart = new PolarLineChart(this, {\n                series: series\n              });\n              this.appendChart(lineChart, pane);\n            },\n            createScatterChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var scatterChart = new PolarScatterChart(this, {\n                series: series\n              });\n              this.appendChart(scatterChart, pane);\n            },\n            createAreaChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var areaChart = new PolarAreaChart(this, {\n                series: series\n              });\n              this.appendChart(areaChart, pane);\n            },\n            _dispatchEvent: function (chart, e, eventType) {\n              var coords = chart._eventCoordinates(e);\n\n              var point = new Point(coords.x, coords.y);\n              var xValue = this.axisX.getValue(point);\n              var yValue = this.axisY.getValue(point);\n\n              if (xValue !== null && yValue !== null) {\n                chart.trigger(eventType, {\n                  element: eventElement(e),\n                  x: xValue,\n                  y: yValue\n                });\n              }\n            },\n            createCrosshairs: function () {}\n          });\n          setDefaultOptions(PolarPlotArea, {\n            xAxis: {},\n            yAxis: {}\n          });\n          deepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin);\n\n          function groupBySeriesIx(segments) {\n            var seriesSegments = [];\n\n            for (var idx = 0; idx < segments.length; idx++) {\n              var segment = segments[idx];\n              seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n              seriesSegments[segment.seriesIx].push(segment);\n            }\n\n            return seriesSegments;\n          }\n\n          var RadarLineChart = LineChart.extend({\n            pointSlot: function (categorySlot, valueSlot) {\n              var valueRadius = categorySlot.center.y - valueSlot.y1;\n              var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n              return new Box(slot.x, slot.y, slot.x, slot.y);\n            },\n            renderSegments: function () {\n              LineChart.fn.renderSegments.call(this);\n\n              if (this._segments && this._segments.length > 1) {\n                var seriesSegments = groupBySeriesIx(this._segments);\n\n                for (var idx = 0; idx < seriesSegments.length; idx++) {\n                  var segments = seriesSegments[idx];\n\n                  if (segments && segments.length > 1) {\n                    var firstPoint = segments[0].linePoints[0];\n                    var lastSegment = last(segments);\n                    var lastPoint = last(lastSegment.linePoints);\n                    var isFirstDataPoint = firstPoint.categoryIx === 0;\n                    var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n\n                    if (isFirstDataPoint && isLastDataPoint) {\n                      last(segments).linePoints.push(firstPoint);\n                    }\n                  }\n                }\n              }\n            },\n            createSegment: function (linePoints, currentSeries, seriesIx) {\n              var style = currentSeries.style;\n              var pointType;\n\n              if (style === SMOOTH) {\n                pointType = SplineSegment;\n              } else {\n                pointType = LineSegment;\n              }\n\n              var segment = new pointType(linePoints, currentSeries, seriesIx);\n              var missingValues = this.seriesMissingValues(currentSeries);\n\n              if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n                segment.options.closed = true;\n              }\n\n              return segment;\n            }\n          });\n          setDefaultOptions(RadarLineChart, {\n            clip: false,\n            limitPoints: false\n          });\n          var SplineRadarAreaSegment = SplineAreaSegment.extend({\n            fillToAxes: function () {}\n          });\n          var RadarAreaSegment = AreaSegment.extend({\n            fillToAxes: function () {}\n          });\n          var RadarAreaChart = RadarLineChart.extend({\n            createSegment: function (linePoints, currentSeries, seriesIx, prevSegment) {\n              var isStacked = this.options.isStacked;\n              var style = (currentSeries.line || {}).style;\n              var previousSegment;\n              var stackPoints;\n              var segment;\n\n              if (isStacked && seriesIx > 0 && prevSegment) {\n                stackPoints = prevSegment.linePoints.slice(0);\n                previousSegment = prevSegment;\n              }\n\n              if (style === SMOOTH) {\n                segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n                segment.options.closed = true;\n              } else {\n                linePoints.push(linePoints[0]);\n                segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n              }\n\n              return segment;\n            },\n            seriesMissingValues: function (series) {\n              return series.missingValues || ZERO;\n            }\n          });\n          var RadarSegment = DonutSegment.extend({\n            init: function (value, options) {\n              DonutSegment.fn.init.call(this, value, null, options);\n            }\n          });\n          setDefaultOptions(RadarSegment, {\n            overlay: {\n              gradient: \"none\"\n            },\n            labels: {\n              distance: 10\n            }\n          });\n          var RadarClusterLayout = ChartElement.extend({\n            init: function (options) {\n              ChartElement.fn.init.call(this, options);\n              this.forEach = options.rtl ? forEachReverse : forEach;\n            },\n            reflow: function (sector) {\n              var ref = this;\n              var options = ref.options;\n              var children = ref.children;\n              var gap = options.gap;\n              var spacing = options.spacing;\n              var count = children.length;\n              var slots = count + gap + spacing * (count - 1);\n              var slotAngle = sector.angle / slots;\n              var angle = sector.startAngle + slotAngle * (gap / 2);\n              this.forEach(children, function (child) {\n                var slotSector = sector.clone();\n                slotSector.startAngle = angle;\n                slotSector.angle = slotAngle;\n\n                if (child.sector) {\n                  slotSector.radius = child.sector.radius;\n                }\n\n                child.reflow(slotSector);\n                child.sector = slotSector;\n                angle += slotAngle + slotAngle * spacing;\n              });\n            }\n          });\n          setDefaultOptions(RadarClusterLayout, {\n            gap: 1,\n            spacing: 0\n          });\n          var RadarStackLayout = ChartElement.extend({\n            reflow: function (sector) {\n              var ref = this;\n              var reverse = ref.options.reverse;\n              var children = ref.children;\n              var childrenCount = children.length;\n              var first = reverse ? childrenCount - 1 : 0;\n              var step = reverse ? -1 : 1;\n              this.box = new Box();\n\n              for (var i = first; i >= 0 && i < childrenCount; i += step) {\n                var childSector = children[i].sector;\n                childSector.startAngle = sector.startAngle;\n                childSector.angle = sector.angle;\n              }\n            }\n          });\n          var RadarBarChart = BarChart.extend({\n            pointType: function () {\n              return RadarSegment;\n            },\n            clusterType: function () {\n              return RadarClusterLayout;\n            },\n            stackType: function () {\n              return RadarStackLayout;\n            },\n            categorySlot: function (categoryAxis, categoryIx) {\n              return categoryAxis.getSlot(categoryIx);\n            },\n            pointSlot: function (categorySlot, valueSlot) {\n              var slot = categorySlot.clone();\n              var y = categorySlot.center.y;\n              slot.radius = y - valueSlot.y1;\n              slot.innerRadius = y - valueSlot.y2;\n              return slot;\n            },\n            reflowPoint: function (point, pointSlot) {\n              point.sector = pointSlot;\n              point.reflow();\n            },\n            createAnimation: function () {\n              this.options.animation.center = this.box.toRect().center();\n              BarChart.fn.createAnimation.call(this);\n            }\n          });\n          RadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n          setDefaultOptions(RadarBarChart, {\n            clip: false,\n            limitPoints: false,\n            animation: {\n              type: \"pie\"\n            }\n          });\n          var RadarPlotArea = PolarPlotAreaBase.extend({\n            createPolarAxis: function () {\n              var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n              this.polarAxis = categoryAxis;\n              this.categoryAxis = categoryAxis;\n              this.appendAxis(categoryAxis);\n              this.aggregateCategories();\n              this.createCategoryAxesLabels();\n            },\n            valueAxisOptions: function (defaults) {\n              if (this._hasBarCharts) {\n                deepExtend(defaults, {\n                  majorGridLines: {\n                    type: ARC\n                  },\n                  minorGridLines: {\n                    type: ARC\n                  }\n                });\n              }\n\n              if (this._isStacked100) {\n                deepExtend(defaults, {\n                  roundToMajorUnit: false,\n                  labels: {\n                    format: \"P0\"\n                  }\n                });\n              }\n\n              return deepExtend(defaults, this.options.valueAxis);\n            },\n            aggregateCategories: function () {\n              // No separate panes in radar charts\n              CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n            },\n            createCategoryAxesLabels: function () {\n              CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n            },\n            filterSeries: function (currentSeries) {\n              // Not supported for radar charts\n              return currentSeries;\n            },\n            createCharts: function () {\n              var series = this.filterVisibleSeries(this.series);\n              var pane = this.panes[0];\n              this.createAreaChart(filterSeriesByType(series, [RADAR_AREA]), pane);\n              this.createLineChart(filterSeriesByType(series, [RADAR_LINE]), pane);\n              this.createBarChart(filterSeriesByType(series, [RADAR_COLUMN]), pane);\n            },\n            chartOptions: function (series) {\n              var options = {\n                series: series\n              };\n              var firstSeries = series[0];\n\n              if (firstSeries) {\n                var filteredSeries = this.filterVisibleSeries(series);\n                var stack = firstSeries.stack;\n                options.isStacked = stack && filteredSeries.length > 1;\n                options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n                if (options.isStacked100) {\n                  this._isStacked100 = true;\n                }\n              }\n\n              return options;\n            },\n            createAreaChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n              this.appendChart(areaChart, pane);\n            },\n            createLineChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var lineChart = new RadarLineChart(this, this.chartOptions(series));\n              this.appendChart(lineChart, pane);\n            },\n            createBarChart: function (series, pane) {\n              if (series.length === 0) {\n                return;\n              }\n\n              var firstSeries = series[0];\n              var options = this.chartOptions(series);\n              options.gap = firstSeries.gap;\n              options.spacing = firstSeries.spacing;\n              var barChart = new RadarBarChart(this, options);\n              this.appendChart(barChart, pane);\n              this._hasBarCharts = true;\n            },\n            seriesCategoryAxis: function () {\n              return this.categoryAxis;\n            },\n            _dispatchEvent: function (chart, e, eventType) {\n              var coords = chart._eventCoordinates(e);\n\n              var point = new Point(coords.x, coords.y);\n              var category = this.categoryAxis.getCategory(point);\n              var value = this.valueAxis.getValue(point);\n\n              if (category !== null && value !== null) {\n                chart.trigger(eventType, {\n                  element: eventElement(e),\n                  category: category,\n                  value: value\n                });\n              }\n            },\n            createCrosshairs: function () {}\n          });\n          deepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n            appendChart: CategoricalPlotArea.prototype.appendChart,\n            aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n            seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints\n          });\n          setDefaultOptions(RadarPlotArea, {\n            categoryAxis: {\n              categories: []\n            },\n            valueAxis: {}\n          });\n          var FunnelSegment = ChartElement.extend({\n            init: function (value, options, segmentOptions) {\n              ChartElement.fn.init.call(this, options);\n              this.value = value;\n              this.options.index = segmentOptions.index;\n            },\n            reflow: function (chartBox) {\n              var points = this.points;\n              var label = this.children[0];\n              this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n              if (label) {\n                label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n              }\n            },\n            createVisual: function () {\n              var this$1 = this;\n              var options = this.options;\n              var visual;\n              ChartElement.fn.createVisual.call(this);\n\n              if (options.visual) {\n                visual = options.visual({\n                  category: this.category,\n                  dataItem: this.dataItem,\n                  value: this.value,\n                  series: this.series,\n                  percentage: this.percentage,\n                  points: this.points,\n                  options: options,\n                  sender: this.getSender(),\n                  createVisual: function () {\n                    return this$1.createPath();\n                  }\n                });\n              } else {\n                visual = this.createPath();\n              }\n\n              if (visual) {\n                this.visual.append(visual);\n              }\n            },\n            createPath: function () {\n              var options = this.options;\n              var border = options.border;\n              var path = Path.fromPoints(this.points, {\n                fill: {\n                  color: options.color,\n                  opacity: options.opacity\n                },\n                stroke: {\n                  color: border.color,\n                  opacity: border.opacity,\n                  width: border.width\n                }\n              }).close();\n              return path;\n            },\n            createHighlight: function (style) {\n              return Path.fromPoints(this.points, style);\n            },\n            highlightVisual: function () {\n              return this.visual.children[0];\n            },\n            highlightVisualArgs: function () {\n              var path = Path.fromPoints(this.points).close();\n              return {\n                options: this.options,\n                path: path\n              };\n            },\n            tooltipAnchor: function () {\n              var box = this.box;\n              return {\n                point: new Point(box.center().x, box.y1),\n                align: {\n                  horizontal: \"center\",\n                  vertical: \"top\"\n                }\n              };\n            },\n            formatValue: function (format) {\n              var point = this;\n              return point.owner.formatPointValue(point, format);\n            }\n          });\n          setDefaultOptions(FunnelSegment, {\n            color: WHITE,\n            border: {\n              width: 1\n            }\n          });\n          deepExtend(FunnelSegment.prototype, PointEventsMixin);\n          var FunnelChart = ChartElement.extend({\n            init: function (plotArea, options) {\n              ChartElement.fn.init.call(this, options);\n              this.plotArea = plotArea;\n              this.points = [];\n              this.labels = [];\n              this.legendItems = [];\n              this.render();\n            },\n            formatPointValue: function (point, format) {\n              return this.chartService.format.auto(format, point.value);\n            },\n            render: function () {\n              var this$1 = this;\n              var ref = this;\n              var options = ref.options;\n              var seriesColors = ref.plotArea.options.seriesColors;\n\n              if (seriesColors === void 0) {\n                seriesColors = [];\n              }\n\n              var series = options.series[0];\n              var data = series.data;\n\n              if (!data) {\n                return;\n              }\n\n              var ref$1 = bindSegments(series);\n              var total = ref$1.total;\n              var points = ref$1.points;\n\n              for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n\n                if (!pointData) {\n                  continue;\n                }\n\n                var fields = pointData.fields;\n\n                if (!isFunction(series.color)) {\n                  series.color = fields.color || seriesColors[i % seriesColors.length];\n                }\n\n                fields = deepExtend({\n                  index: i,\n                  owner: this$1,\n                  series: series,\n                  dataItem: data[i],\n                  percentage: pointData.value / total\n                }, fields, {\n                  visible: pointData.visible\n                });\n                var value = pointData.valueFields.value;\n                var segment = this$1.createSegment(value, fields);\n                var label = this$1.createLabel(value, fields);\n\n                if (segment && label) {\n                  segment.append(label);\n                }\n              }\n            },\n            evalSegmentOptions: function (options, value, fields) {\n              var series = fields.series;\n              evalOptions(options, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                index: fields.index\n              }, {\n                defaults: series._defaults,\n                excluded: [\"data\", \"content\", \"template\", \"toggle\", \"visual\"]\n              });\n            },\n            createSegment: function (value, fields) {\n              var seriesOptions = deepExtend({}, fields.series);\n              this.evalSegmentOptions(seriesOptions, value, fields);\n              this.createLegendItem(value, seriesOptions, fields);\n\n              if (fields.visible !== false) {\n                var segment = new FunnelSegment(value, seriesOptions, fields);\n                $.extend(segment, fields);\n                this.append(segment);\n                this.points.push(segment);\n                return segment;\n              }\n            },\n            createLabel: function (value, fields) {\n              var series = fields.series;\n              var dataItem = fields.dataItem;\n              var labels = deepExtend({}, this.options.labels, series.labels);\n              var text = value;\n\n              if (labels.visible) {\n                var labelTemplate = getTemplate(labels);\n                var data = {\n                  dataItem: dataItem,\n                  value: value,\n                  percentage: fields.percentage,\n                  category: fields.category,\n                  series: series\n                };\n\n                if (labelTemplate) {\n                  text = labelTemplate(data);\n                } else if (labels.format) {\n                  text = this.plotArea.chartService.format.auto(labels.format, text);\n                }\n\n                if (!labels.color) {\n                  labels.color = dataviz.autoTextColor(series.color);\n\n                  if (!labels.background) {\n                    labels.background = series.color;\n                  }\n                }\n\n                this.evalSegmentOptions(labels, value, fields);\n                var textBox = new TextBox(text, deepExtend({\n                  vAlign: labels.position\n                }, labels), data);\n                this.labels.push(textBox);\n                return textBox;\n              }\n            },\n            labelPadding: function () {\n              var labels = this.labels;\n              var padding = {\n                left: 0,\n                right: 0\n              };\n\n              for (var i = 0; i < labels.length; i++) {\n                var label = labels[i];\n                var align = label.options.align;\n\n                if (align !== CENTER) {\n                  var width = labels[i].box.width();\n\n                  if (align === LEFT) {\n                    padding.left = Math.max(padding.left, width);\n                  } else {\n                    padding.right = Math.max(padding.right, width);\n                  }\n                }\n              }\n\n              return padding;\n            },\n            dynamicSlopeReflow: function (box, width, totalHeight) {\n              var ref = this;\n              var options = ref.options;\n              var segments = ref.points;\n              var count = segments.length;\n              var firstSegment = segments[0];\n              var maxSegment = firstSegment;\n\n              for (var idx = 0; idx < segments.length; idx++) {\n                if (segments[idx].percentage > maxSegment.percentage) {\n                  maxSegment = segments[idx];\n                }\n              }\n\n              var lastUpperSide = firstSegment.percentage / maxSegment.percentage * width;\n              var previousOffset = (width - lastUpperSide) / 2;\n              var previousHeight = 0;\n\n              for (var idx$1 = 0; idx$1 < count; idx$1++) {\n                var percentage = segments[idx$1].percentage;\n                var nextSegment = segments[idx$1 + 1];\n                var nextPercentage = nextSegment ? nextSegment.percentage : percentage;\n                var points = segments[idx$1].points = [];\n                var height = options.dynamicHeight ? totalHeight * percentage : totalHeight / count;\n                var offset = void 0;\n\n                if (!percentage) {\n                  offset = nextPercentage ? 0 : width / 2;\n                } else {\n                  offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n                }\n\n                offset = limitValue(offset, 0, width);\n                points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n                points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n                previousOffset = offset;\n                previousHeight += height + options.segmentSpacing;\n                lastUpperSide = limitValue(width - 2 * offset, 0, width);\n              }\n            },\n            constantSlopeReflow: function (box, width, totalHeight) {\n              var ref = this;\n              var options = ref.options;\n              var segments = ref.points;\n              var count = segments.length;\n              var decreasingWidth = options.neckRatio <= 1;\n              var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n              var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n              var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n              var finalNarrow = (topMostWidth - neckRatio) / 2;\n              var previousHeight = 0;\n\n              for (var idx = 0; idx < count; idx++) {\n                var points = segments[idx].points = [];\n                var percentage = segments[idx].percentage;\n                var offset = options.dynamicHeight ? finalNarrow * percentage : finalNarrow / count;\n                var height = options.dynamicHeight ? totalHeight * percentage : totalHeight / count;\n                points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n                points.push(new GeometryPoint(box.x1 + previousOffset + offset, box.y1 + height + previousHeight));\n                previousOffset += offset;\n                previousHeight += height + options.segmentSpacing;\n              }\n            },\n            reflow: function (chartBox) {\n              var points = this.points;\n              var count = points.length;\n\n              if (!count) {\n                return;\n              }\n\n              var options = this.options;\n              var box = chartBox.clone().unpad(this.labelPadding());\n              var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n              var width = box.width();\n\n              if (options.dynamicSlope) {\n                this.dynamicSlopeReflow(box, width, totalHeight);\n              } else {\n                this.constantSlopeReflow(box, width, totalHeight);\n              }\n\n              for (var idx = 0; idx < count; idx++) {\n                points[idx].reflow(chartBox);\n              }\n            }\n          });\n          setDefaultOptions(FunnelChart, {\n            neckRatio: 0.3,\n            width: 300,\n            dynamicSlope: false,\n            dynamicHeight: true,\n            segmentSpacing: 0,\n            labels: {\n              visible: false,\n              align: CENTER,\n              position: CENTER,\n              zIndex: 1\n            }\n          });\n          deepExtend(FunnelChart.prototype, PieChartMixin);\n          var FunnelPlotArea = PlotAreaBase.extend({\n            render: function () {\n              this.createFunnelChart(this.series);\n            },\n            createFunnelChart: function (series) {\n              var firstSeries = series[0];\n              var funnelChart = new FunnelChart(this, {\n                series: series,\n                legend: this.options.legend,\n                neckRatio: firstSeries.neckRatio,\n                dynamicHeight: firstSeries.dynamicHeight,\n                dynamicSlope: firstSeries.dynamicSlope,\n                segmentSpacing: firstSeries.segmentSpacing,\n                highlight: firstSeries.highlight\n              });\n              this.appendChart(funnelChart);\n            },\n            appendChart: function (chart, pane) {\n              PlotAreaBase.fn.appendChart.call(this, chart, pane);\n              append(this.options.legend.items, chart.legendItems);\n            }\n          }); // Linear color scale from the given color to white minus minimum lightness offset.\n\n          var colorScale = function (color, minLightnessOffset) {\n            if (minLightnessOffset === void 0) {\n              minLightnessOffset = 0.05;\n            }\n\n            var baseColor = kendo.parseColor(color);\n            var offset = 1 - minLightnessOffset;\n            return function (value) {\n              var hsl = baseColor.toHSL();\n              var range = 100 - hsl.l;\n              var point = offset - value;\n              hsl.l += Math.min(point * range, range);\n              return hsl.toCss();\n            };\n          };\n\n          var HeatmapPoint = ChartElement.extend({\n            init: function (value, options) {\n              ChartElement.fn.init.call(this);\n              this.options = options;\n              this.color = options.color || WHITE;\n              this.value = value;\n            },\n            render: function () {\n              if (this._rendered) {\n                return;\n              }\n\n              this._rendered = true;\n              this.createMarker();\n              this.createLabel();\n              this.createNote();\n            },\n            createLabel: function () {\n              var options = this.options;\n              var labels = options.labels;\n\n              if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n                var labelColor = labels.color;\n\n                if (labelTemplate) {\n                  labelText = labelTemplate(pointData);\n                } else {\n                  labelText = this.formatValue(labels.format);\n                }\n\n                if (!labelColor) {\n                  labelColor = dataviz.autoTextColor(this.color);\n                }\n\n                this.label = new TextBox(labelText, deepExtend({\n                  align: CENTER,\n                  vAlign: CENTER,\n                  margin: {\n                    left: 5,\n                    right: 5\n                  },\n                  zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                }, labels, {\n                  color: labelColor\n                }), pointData);\n                this.append(this.label);\n              }\n            },\n            formatValue: function (format) {\n              return this.owner.formatPointValue(this, format);\n            },\n            reflow: function (targetBox) {\n              this.render();\n              var label = this.label;\n              this.box = targetBox;\n\n              if (label) {\n                label.reflow(this.markerBox());\n              }\n\n              if (this.note) {\n                this.note.reflow(targetBox);\n              }\n\n              this.marker.reflow(this.markerBox());\n            },\n            markerBox: function () {\n              var options = this.options;\n              var markers = options.markers;\n              var border = markers.border;\n              var rect = this.box.toRect();\n              var type = valueOrDefault(markers.type, 'rect');\n              var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n              var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n              var halfBorderWidth = Math.round(borderWidth / 2);\n\n              if (markers.size) {\n                var center = rect.center();\n                rect.size.width = rect.size.height = markers.size;\n                rect.origin.x = Math.round(center.x - rect.size.width / 2);\n                rect.origin.y = Math.round(center.y - rect.size.height / 2);\n              }\n\n              rect.size.width -= borderWidth;\n              rect.size.height -= borderWidth;\n              rect.origin.y += halfBorderWidth + 0.5;\n              rect.origin.x += halfBorderWidth + 0.5;\n              return dataviz.rectToBox(rect);\n            },\n            markerBorder: function () {\n              var options = this.options;\n              var markers = options.markers;\n              var border = markers.border;\n              var opacity = valueOrDefault(border.opacity, options.opacity);\n              return {\n                color: border.color || this.color,\n                width: border.width,\n                opacity: opacity,\n                dashType: border.dashType\n              };\n            },\n            createMarker: function () {\n              var options = this.options;\n              var markerOptions = options.markers;\n              var marker = new ShapeElement({\n                type: valueOrDefault(markerOptions.type, 'rect'),\n                width: markerOptions.size,\n                height: markerOptions.size,\n                rotation: markerOptions.rotation,\n                background: this.color,\n                border: this.markerBorder(),\n                borderRadius: markerOptions.borderRadius,\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n                animation: options.animation,\n                visual: options.visual\n              }, {\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                category: this.category\n              });\n              this.marker = marker;\n              this.append(marker);\n            },\n            createHighlight: function (style) {\n              var options = this.options;\n              var markerOptions = this.options.highlight.markers || this.options.markers;\n              var highlight = new ShapeElement({\n                type: valueOrDefault(markerOptions.type, 'rect'),\n                width: markerOptions.size,\n                height: markerOptions.size,\n                rotation: markerOptions.rotation,\n                background: markerOptions.color || this.color,\n                border: this.markerBorder(),\n                borderRadius: markerOptions.borderRadius,\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n              });\n              highlight.reflow(this.markerBox());\n              var visual = highlight.getElement();\n              visual.options.fill = style.fill;\n              visual.options.stroke = style.stroke;\n              return visual;\n            },\n            highlightVisual: function () {\n              return this.rectVisual;\n            },\n            highlightVisualArgs: function () {\n              return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this.rectVisual\n              };\n            },\n            tooltipAnchor: function () {\n              var left = this.box.center().x;\n              var top = this.box.y1 - TOOLTIP_OFFSET;\n              return {\n                point: new Point(left, top),\n                align: {\n                  horizontal: CENTER,\n                  vertical: BOTTOM\n                }\n              };\n            },\n            overlapsBox: function (box) {\n              return this.box.overlaps(box);\n            },\n            unclipElements: function () {\n              /* noop, clip labels */\n            },\n            pointData: function () {\n              return {\n                x: this.value.x,\n                y: this.value.y,\n                value: this.value.value,\n                dataItem: this.dataItem,\n                series: this.series\n              };\n            }\n          });\n          deepExtend(HeatmapPoint.prototype, PointEventsMixin);\n          deepExtend(HeatmapPoint.prototype, NoteMixin);\n          HeatmapPoint.prototype.defaults = {\n            markers: {\n              type: 'rect',\n              borderRadius: 4,\n              border: {\n                color: 'transparent'\n              }\n            },\n            padding: {\n              top: 1\n            },\n            labels: {\n              visible: false,\n              padding: 3\n            },\n            opacity: 1,\n            notes: {\n              label: {}\n            }\n          };\n          var HeatmapChart = ChartElement.extend({\n            init: function (plotArea, options) {\n              ChartElement.fn.init.call(this, options);\n              this.plotArea = plotArea;\n              this.chartService = plotArea.chartService;\n\n              this._initFields();\n\n              this.render();\n            },\n            _initFields: function () {\n              this.points = [];\n              this.seriesOptions = [];\n              this.valueRange = {\n                min: MAX_VALUE,\n                max: MIN_VALUE\n              };\n              this._evalSeries = [];\n            },\n            render: function () {\n              this.setRange();\n              this.traverseDataPoints(this.addValue.bind(this));\n            },\n            setRange: function () {\n              var this$1 = this;\n              var ref = this;\n              var series = ref.options.series;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                  var ref$1 = this$1._bindPoint(currentSeries, seriesIx, pointIx);\n\n                  var valueFields = ref$1.valueFields;\n\n                  if (defined(valueFields.value) && valueFields.value !== null) {\n                    this$1.valueRange.min = Math.min(this$1.valueRange.min, valueFields.value);\n                    this$1.valueRange.max = Math.max(this$1.valueRange.max, valueFields.value);\n                  }\n                }\n              }\n            },\n            addValue: function (value, fields) {\n              var point;\n\n              if (value && defined(value.value) && value.value !== null) {\n                point = this.createPoint(value, fields);\n\n                if (point) {\n                  $.extend(point, fields);\n                }\n              }\n\n              this.points.push(point);\n            },\n            evalPointOptions: function (options, value, fields) {\n              var series = fields.series;\n              var seriesIx = fields.seriesIx;\n              var state = {\n                defaults: series._defaults,\n                excluded: [\"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\"]\n              };\n              var doEval = this._evalSeries[seriesIx];\n\n              if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n              }\n\n              var pointOptions = options;\n\n              if (doEval) {\n                pointOptions = deepExtend({}, options);\n                evalOptions(pointOptions, {\n                  value: value,\n                  series: series,\n                  dataItem: fields.dataItem,\n                  min: this.valueRange.min,\n                  max: this.valueRange.max\n                }, state);\n              }\n\n              return pointOptions;\n            },\n            pointType: function () {\n              return HeatmapPoint;\n            },\n            pointOptions: function (series, seriesIx) {\n              var options = this.seriesOptions[seriesIx];\n\n              if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                  markers: {\n                    opacity: series.opacity\n                  },\n                  tooltip: {\n                    format: this.options.tooltip.format\n                  },\n                  labels: {\n                    format: this.options.labels.format\n                  }\n                }, series);\n              }\n\n              return options;\n            },\n            createPoint: function (value, fields) {\n              var series = fields.series;\n              var pointOptions = this.pointOptions(series, fields.seriesIx);\n              var color = fields.color || series.color;\n              pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n              if (isFunction(series.color)) {\n                color = pointOptions.color;\n              } else if (this.valueRange.max !== 0) {\n                var scale = colorScale(color);\n                color = scale(value.value / this.valueRange.max);\n              }\n\n              var point = new HeatmapPoint(value, pointOptions);\n              point.color = color;\n              this.append(point);\n              return point;\n            },\n            seriesAxes: function (series) {\n              var xAxisName = series.xAxis;\n              var yAxisName = series.yAxis;\n              var plotArea = this.plotArea;\n              var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n              var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n              if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n              }\n\n              if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n              }\n\n              return {\n                xAxis: xAxis,\n                yAxis: yAxis\n              };\n            },\n            reflow: function (targetBox) {\n              var this$1 = this;\n              var chartPoints = this.points;\n              var limit = !this.options.clip;\n              var pointIx = 0;\n              this.traverseDataPoints(function (value, fields) {\n                var point = chartPoints[pointIx++];\n                var ref = this$1.seriesAxes(fields.series);\n                var xAxis = ref.xAxis;\n                var yAxis = ref.yAxis;\n                var indexX = xAxis.categoryIndex(value.x);\n                var indexY = yAxis.categoryIndex(value.y);\n                var slotX = xAxis.getSlot(indexX, indexX, limit);\n                var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n                if (point) {\n                  if (slotX && slotY) {\n                    var pointSlot = this$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                  } else {\n                    point.visible = false;\n                  }\n                }\n              });\n              this.box = targetBox;\n            },\n            pointSlot: function (slotX, slotY) {\n              return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n            },\n            traverseDataPoints: function (callback) {\n              var this$1 = this;\n              var ref = this;\n              var series = ref.options.series;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var ref$1 = this$1.seriesAxes(currentSeries);\n                var xAxis = ref$1.xAxis;\n                var yAxis = ref$1.yAxis;\n                var xRange = xAxis.currentRangeIndices();\n                var yRange = yAxis.currentRangeIndices();\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                  var ref$2 = this$1._bindPoint(currentSeries, seriesIx, pointIx);\n\n                  var value = ref$2.valueFields;\n                  var fields = ref$2.fields;\n                  var xIndex = xAxis.totalIndex(value.x);\n                  var yIndex = yAxis.totalIndex(value.y);\n                  var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                  var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                  if (xIn && yIn) {\n                    callback(value, deepExtend({\n                      pointIx: pointIx,\n                      series: currentSeries,\n                      seriesIx: seriesIx,\n                      dataItem: currentSeries.data[pointIx],\n                      owner: this$1\n                    }, fields));\n                  }\n                }\n              }\n            },\n            formatPointValue: function (point, format) {\n              var value = point.value;\n              return this.chartService.format.auto(format, value.x, value.y, value.value);\n            },\n            animationPoints: function () {\n              var points = this.points;\n              var result = [];\n\n              for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n              }\n\n              return result;\n            }\n          });\n          setDefaultOptions(HeatmapChart, {\n            series: [],\n            tooltip: {\n              format: \"{0}, {1}: {2}\"\n            },\n            labels: {\n              format: \"{2}\"\n            },\n            clip: true\n          });\n          deepExtend(HeatmapChart.prototype, {\n            _bindPoint: CategoricalChart.prototype._bindPoint\n          });\n          var HeatmapPlotArea = PlotAreaBase.extend({\n            initFields: function () {\n              this.namedXAxes = {};\n              this.namedYAxes = {};\n            },\n            render: function (panes) {\n              if (panes === void 0) {\n                panes = this.panes;\n              }\n\n              this.bindCategories();\n              this.createAxes(panes);\n              this.createCharts(panes);\n              this.createAxisLabels();\n            },\n            bindCategories: function () {\n              var this$1 = this;\n              var series = this.srcSeries || this.series;\n\n              for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var data = currentSeries.data || [];\n                var ref = this$1.seriesAxes(currentSeries);\n                var xAxis = ref.xAxis;\n                var yAxis = ref.yAxis;\n                var xCategories = dataviz.createHashSet(xAxis.categories || []);\n                var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n                for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                  var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                  var x = ref$1.x;\n                  var y = ref$1.y;\n\n                  if (!xCategories.has(x)) {\n                    xCategories.add(x);\n                  }\n\n                  if (!yCategories.has(y)) {\n                    yCategories.add(y);\n                  }\n                }\n\n                xAxis.categories = xCategories.values();\n                yAxis.categories = yCategories.values();\n              }\n            },\n            createCharts: function (panes) {\n              var this$1 = this;\n              var seriesByPane = this.groupSeriesByPane();\n\n              for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1.addToLegend(paneSeries);\n                var filteredSeries = this$1.filterVisibleSeries(paneSeries);\n\n                if (!filteredSeries) {\n                  continue;\n                }\n\n                this$1.createHeatmapChart(filterSeriesByType(filteredSeries, [HEATMAP]), pane);\n              }\n            },\n            createHeatmapChart: function (series, pane) {\n              var chart = new HeatmapChart(this, {\n                series: series\n              });\n              this.appendChart(chart, pane);\n            },\n            seriesPaneName: function (series) {\n              var options = this.options;\n              var xAxisName = series.xAxis;\n              var xAxisOptions = [].concat(options.xAxis);\n              var xAxis = grep(xAxisOptions, function (a) {\n                return a.name === xAxisName;\n              })[0];\n              var yAxisName = series.yAxis;\n              var yAxisOptions = [].concat(options.yAxis);\n              var yAxis = grep(yAxisOptions, function (a) {\n                return a.name === yAxisName;\n              })[0];\n              var panes = options.panes || [{}];\n              var defaultPaneName = panes[0].name || \"default\";\n              var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n              return paneName;\n            },\n            seriesAxes: function (series) {\n              var xAxis;\n              var yAxis;\n              var options = this.options;\n              var xAxisOptions = [].concat(options.xAxis);\n              var xAxisName = series.xAxis;\n\n              if (xAxisName) {\n                xAxis = xAxisOptions.find(function (axis) {\n                  return axis.name === xAxisName;\n                });\n              } else {\n                xAxis = xAxisOptions[0];\n              }\n\n              var yAxisOptions = [].concat(options.yAxis);\n              var yAxisName = series.yAxis;\n\n              if (yAxisName) {\n                yAxis = yAxisOptions.find(function (axis) {\n                  return axis.name === yAxisName;\n                });\n              } else {\n                yAxis = yAxisOptions[0];\n              }\n\n              if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n              }\n\n              if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n              }\n\n              return {\n                xAxis: xAxis,\n                yAxis: yAxis\n              };\n            },\n            createAxisLabels: function () {\n              var axes = this.axes;\n\n              for (var i = 0; i < axes.length; i++) {\n                axes[i].createLabels();\n              }\n            },\n            createXYAxis: function (options, vertical, axisIndex) {\n              var axisName = options.name;\n              var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n              var axisOptions = $.extend({\n                axisCrossingValue: 0\n              }, options, {\n                vertical: vertical,\n                reverse: vertical || this.chartService.rtl ? !options.reverse : options.reverse,\n                justified: false\n              });\n              var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n              var typeSamples = [axisOptions.min, axisOptions.max, firstCategory];\n              var series = this.series;\n\n              for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n\n                if (seriesAxisName === axisOptions.name || axisIndex === 0 && !seriesAxisName) {\n                  var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                  typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n                  break;\n                }\n              }\n\n              var inferredDate;\n\n              for (var i = 0; i < typeSamples.length; i++) {\n                if (typeSamples[i] instanceof Date) {\n                  inferredDate = true;\n                  break;\n                }\n              }\n\n              var axisType;\n\n              if (equalsIgnoreCase(axisOptions.type, DATE) || !axisOptions.type && inferredDate) {\n                axisType = dataviz.DateCategoryAxis;\n              } else {\n                axisType = CategoryAxis;\n              }\n\n              var axis = new axisType(axisOptions, this.chartService);\n              axis.axisIndex = axisIndex;\n\n              if (axisName) {\n                if (namedAxes[axisName]) {\n                  throw new Error((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\");\n                }\n\n                namedAxes[axisName] = axis;\n              }\n\n              this.appendAxis(axis);\n              axis.mapCategories();\n              return axis;\n            },\n            createAxes: function (panes) {\n              var this$1 = this;\n              var options = this.options;\n              var xAxesOptions = [].concat(options.xAxis);\n              var xAxes = [];\n              var yAxesOptions = [].concat(options.yAxis);\n              var yAxes = [];\n\n              for (var idx = 0; idx < xAxesOptions.length; idx++) {\n                var axisPane = this$1.findPane(xAxesOptions[idx].pane);\n\n                if (inArray(axisPane, panes)) {\n                  xAxes.push(this$1.createXYAxis(xAxesOptions[idx], false, idx));\n                }\n              }\n\n              for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n                var axisPane$1 = this$1.findPane(yAxesOptions[idx$1].pane);\n\n                if (inArray(axisPane$1, panes)) {\n                  yAxes.push(this$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n                }\n              }\n\n              this.axisX = this.axisX || xAxes[0];\n              this.axisY = this.axisY || yAxes[0];\n            },\n            removeAxis: function (axis) {\n              var axisName = axis.options.name;\n              PlotAreaBase.fn.removeAxis.call(this, axis);\n\n              if (axis.options.vertical) {\n                delete this.namedYAxes[axisName];\n              } else {\n                delete this.namedXAxes[axisName];\n              }\n\n              if (axis === this.axisX) {\n                delete this.axisX;\n              }\n\n              if (axis === this.axisY) {\n                delete this.axisY;\n              }\n            },\n            _dispatchEvent: function (chart, e, eventType) {\n              var coords = chart._eventCoordinates(e);\n\n              var point = new Point(coords.x, coords.y);\n              var allAxes = this.axes;\n              var length = allAxes.length;\n              var xValues = [];\n              var yValues = [];\n\n              for (var i = 0; i < length; i++) {\n                var axis = allAxes[i];\n                var values = axis.options.vertical ? yValues : xValues;\n                appendIfNotNull(values, axis.getCategory(point));\n              }\n\n              if (xValues.length > 0 && yValues.length > 0) {\n                chart.trigger(eventType, {\n                  element: eventElement(e),\n                  originalEvent: e,\n                  x: singleItemOrArray(xValues),\n                  y: singleItemOrArray(yValues)\n                });\n              }\n            },\n            updateAxisOptions: function (axis, options) {\n              var vertical = axis.options.vertical;\n              var axes = this.groupAxes(this.panes);\n              var index = (vertical ? axes.y : axes.x).indexOf(axis);\n              updateAxisOptions$2(this.options, index, vertical, options);\n              updateAxisOptions$2(this.originalOptions, index, vertical, options);\n            },\n            crosshairOptions: function (axis) {\n              // Stack the crosshair above the series points.\n              return $.extend({}, axis.options.crosshair, {\n                zIndex: 0\n              });\n            }\n          });\n\n          function updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n            var axisOptions = [].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis)[axisIndex];\n            deepExtend(axisOptions, options);\n          }\n\n          setDefaultOptions(HeatmapPlotArea, {\n            xAxis: {},\n            yAxis: {}\n          });\n          deepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n          var COLOR = \"color\";\n          var FIRST = \"first\";\n          var FROM = \"from\";\n          var MAX = \"max\";\n          var MIN = \"min\";\n          var NOTE_TEXT = \"noteText\";\n          var SUMMARY_FIELD = \"summary\";\n          var TO = \"to\";\n          PlotAreaFactory.current.register(CategoricalPlotArea, [BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA]);\n          PlotAreaFactory.current.register(XYPlotArea, [SCATTER, SCATTER_LINE, BUBBLE]);\n          PlotAreaFactory.current.register(PiePlotArea, [PIE]);\n          PlotAreaFactory.current.register(DonutPlotArea, [DONUT]);\n          PlotAreaFactory.current.register(FunnelPlotArea, [FUNNEL]);\n          PlotAreaFactory.current.register(PolarPlotArea, [POLAR_AREA, POLAR_LINE, POLAR_SCATTER]);\n          PlotAreaFactory.current.register(RadarPlotArea, [RADAR_AREA, RADAR_COLUMN, RADAR_LINE]);\n          PlotAreaFactory.current.register(HeatmapPlotArea, [HEATMAP]);\n          SeriesBinder.current.register([BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA], [VALUE], [CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD]);\n          SeriesBinder.current.register([RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA], [FROM, TO], [CATEGORY, COLOR, NOTE_TEXT]);\n          SeriesBinder.current.register([WATERFALL, HORIZONTAL_WATERFALL], [VALUE], [CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD]);\n          SeriesBinder.current.register([POLAR_AREA, POLAR_LINE, POLAR_SCATTER], [X, Y], [COLOR]);\n          SeriesBinder.current.register([RADAR_AREA, RADAR_COLUMN, RADAR_LINE], [VALUE], [COLOR]);\n          SeriesBinder.current.register([FUNNEL], [VALUE], [CATEGORY, COLOR, \"visibleInLegend\", \"visible\"]);\n          DefaultAggregates.current.register([BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL], {\n            value: MAX,\n            color: FIRST,\n            noteText: FIRST,\n            errorLow: MIN,\n            errorHigh: MAX\n          });\n          DefaultAggregates.current.register([RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA], {\n            from: MIN,\n            to: MAX,\n            color: FIRST,\n            noteText: FIRST\n          });\n          DefaultAggregates.current.register([RADAR_AREA, RADAR_COLUMN, RADAR_LINE], {\n            value: MAX,\n            color: FIRST\n          });\n          SeriesBinder.current.register([SCATTER, SCATTER_LINE, BUBBLE], [X, Y], [COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD]);\n          SeriesBinder.current.register([BUBBLE], [X, Y, \"size\"], [COLOR, CATEGORY, NOTE_TEXT]);\n          SeriesBinder.current.register([HEATMAP], [X, Y, VALUE], [COLOR, NOTE_TEXT]);\n          SeriesBinder.current.register([CANDLESTICK, OHLC], [\"open\", \"high\", \"low\", \"close\"], [CATEGORY, COLOR, \"downColor\", NOTE_TEXT]);\n          DefaultAggregates.current.register([CANDLESTICK, OHLC], {\n            open: MAX,\n            high: MAX,\n            low: MIN,\n            close: MAX,\n            color: FIRST,\n            downColor: FIRST,\n            noteText: FIRST\n          });\n          SeriesBinder.current.register([BOX_PLOT, VERTICAL_BOX_PLOT], [\"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\"], [CATEGORY, COLOR, NOTE_TEXT]);\n          DefaultAggregates.current.register([BOX_PLOT, VERTICAL_BOX_PLOT], {\n            lower: MAX,\n            q1: MAX,\n            median: MAX,\n            q3: MAX,\n            upper: MAX,\n            mean: MAX,\n            outliers: FIRST,\n            color: FIRST,\n            noteText: FIRST\n          });\n          SeriesBinder.current.register([BULLET, VERTICAL_BULLET], [\"current\", \"target\"], [CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT]);\n          DefaultAggregates.current.register([BULLET, VERTICAL_BULLET], {\n            current: MAX,\n            target: MAX,\n            color: FIRST,\n            noteText: FIRST\n          });\n          SeriesBinder.current.register([PIE, DONUT], [VALUE], [CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\"]);\n          var AXIS_NAMES = [CATEGORY, VALUE, X, Y];\n          var MOUSEMOVE = \"mousemove\";\n          var CONTEXTMENU = \"contextmenu\";\n          var MOUSELEAVE = \"mouseleave\";\n          var MOUSEMOVE_DELAY = 20;\n          var Chart = Class.extend({\n            init: function (element, userOptions, themeOptions, context) {\n              var this$1 = this;\n\n              if (context === void 0) {\n                context = {};\n              }\n\n              this.observers = [];\n              this.addObserver(context.observer);\n              this.chartService = new services.ChartService(this, context);\n              this.chartService.theme = themeOptions;\n\n              this._initElement(element);\n\n              var options = deepExtend({}, this.options, userOptions);\n              this._originalOptions = deepExtend({}, options);\n              this._theme = themeOptions;\n\n              this._initTheme(options, themeOptions);\n\n              this._initHandlers();\n\n              this._initSurface();\n\n              this.bindCategories();\n              dataviz.FontLoader.preloadFonts(userOptions, function () {\n                this$1.fontLoaded = true;\n\n                if (!this$1._destroyed) {\n                  this$1.trigger('init');\n\n                  this$1._redraw();\n\n                  this$1._attachEvents();\n                }\n              });\n            },\n            _initElement: function (element) {\n              this._setElementClass(element);\n\n              element.style.position = \"relative\";\n\n              while (element.firstChild) {\n                element.removeChild(element.firstChild);\n              }\n\n              this.element = element;\n            },\n            _setElementClass: function (element) {\n              dataviz.addClass(element, \"k-chart\");\n            },\n            _initTheme: function (options, themeOptions) {\n              var seriesCopies = [];\n              var series = options.series || [];\n\n              for (var i = 0; i < series.length; i++) {\n                seriesCopies.push($.extend({}, series[i]));\n              }\n\n              options.series = seriesCopies;\n              resolveAxisAliases(options);\n              this.applyDefaults(options, themeOptions); // Clean up default if not overriden by data attributes\n\n              if (options.seriesColors === null) {\n                delete options.seriesColors;\n              }\n\n              this.options = deepExtend({}, themeOptions, options);\n              this.applySeriesColors();\n            },\n            getSize: function () {\n              var chartArea = this.options.chartArea || {};\n              var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n              var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n              return {\n                width: width,\n                height: height\n              };\n            },\n            resize: function (force) {\n              var size = this.getSize();\n              var currentSize = this._size;\n              var hasSize = size.width > 0 || size.height > 0;\n\n              if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n                this._size = size;\n\n                this._resize(size, force);\n\n                this.trigger(\"resize\", size);\n              } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) {\n                return !s.visible;\n              })) {\n                this._destroySelections();\n\n                this._setupSelection();\n              }\n            },\n            _resize: function () {\n              this._noTransitionsRedraw();\n            },\n            redraw: function (paneName) {\n              this.applyDefaults(this.options);\n              this.applySeriesColors();\n\n              if (paneName) {\n                var plotArea = this._model._plotArea;\n                var pane = plotArea.findPane(paneName);\n                plotArea.redraw(pane);\n              } else {\n                this._redraw();\n              }\n            },\n            getAxis: function (name) {\n              return findAxisByName(name, this._plotArea.axes);\n            },\n            findAxisByName: function (name) {\n              return this.getAxis(name);\n            },\n            findPaneByName: function (name) {\n              var panes = this._plotArea.panes;\n\n              for (var idx = 0; idx < panes.length; idx++) {\n                if (panes[idx].options.name === name) {\n                  return new ChartPane(panes[idx]);\n                }\n              }\n            },\n            findPaneByIndex: function (idx) {\n              var panes = this._plotArea.panes;\n\n              if (panes[idx]) {\n                return new ChartPane(panes[idx]);\n              }\n            },\n            plotArea: function () {\n              return new ChartPlotArea(this._plotArea);\n            },\n            toggleHighlight: function (show, filter) {\n              var plotArea = this._plotArea;\n              var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n              var points;\n\n              if (isFunction(filter)) {\n                points = plotArea.filterPoints(filter);\n              } else {\n                var seriesName, categoryName;\n\n                if (isObject(filter)) {\n                  seriesName = filter.series;\n                  categoryName = filter.category;\n                } else {\n                  seriesName = categoryName = filter;\n                }\n\n                if (firstSeries.type === DONUT) {\n                  points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n                } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\n                  points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n                } else {\n                  points = plotArea.pointsBySeriesName(seriesName);\n                }\n              }\n\n              if (points) {\n                this.togglePointsHighlight(show, points);\n              }\n            },\n            togglePointsHighlight: function (show, points) {\n              var highlight = this._highlight;\n\n              for (var idx = 0; idx < points.length; idx++) {\n                highlight.togglePointHighlight(points[idx], show);\n              }\n            },\n            showTooltip: function (filter) {\n              var shared = this._sharedTooltip();\n\n              var ref = this;\n              var tooltip = ref._tooltip;\n              var plotArea = ref._plotArea;\n              var point, categoryIndex;\n\n              if (isFunction(filter)) {\n                point = plotArea.findPoint(filter);\n\n                if (point && shared) {\n                  categoryIndex = point.categoryIx;\n                }\n              } else if (shared && defined(filter)) {\n                categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n              }\n\n              if (shared) {\n                if (categoryIndex >= 0) {\n                  var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n\n                  tooltip.showAt(points);\n                }\n              } else if (point) {\n                tooltip.show(point);\n              }\n            },\n            hideTooltip: function () {\n              this._tooltip.hide();\n            },\n            _initSurface: function () {\n              var surface = this.surface;\n\n              var wrap = this._surfaceWrap();\n\n              var chartArea = this.options.chartArea || {};\n\n              if (chartArea.width) {\n                dataviz.elementSize(wrap, {\n                  width: chartArea.width\n                });\n              }\n\n              if (chartArea.height) {\n                dataviz.elementSize(wrap, {\n                  height: chartArea.height\n                });\n              }\n\n              if (!surface || surface.options.type !== this.options.renderAs) {\n                this._destroySurface();\n\n                this.surface = drawing.Surface.create(wrap, {\n                  type: this.options.renderAs\n                });\n                this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n                this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n              } else {\n                this.surface.clear();\n                this.surface.resize();\n              }\n            },\n            _surfaceWrap: function () {\n              return this.element;\n            },\n            _redraw: function () {\n              var model = this._getModel();\n\n              this._size = {\n                width: model.options.width,\n                height: model.options.height\n              };\n\n              this._destroyView();\n\n              this._model = model;\n              this._plotArea = model._plotArea;\n              model.renderVisual();\n\n              if (this.options.transitions !== false) {\n                model.traverse(function (element) {\n                  if (element.animation) {\n                    element.animation.setup();\n                  }\n                });\n              }\n\n              this._initSurface();\n\n              this.surface.draw(model.visual);\n\n              if (this.options.transitions !== false) {\n                model.traverse(function (element) {\n                  if (element.animation) {\n                    element.animation.play();\n                  }\n                });\n              }\n\n              this._tooltip = this._createTooltip();\n              this._highlight = new Highlight();\n\n              this._setupSelection();\n\n              this._createPannable();\n\n              this._createZoomSelection();\n\n              this._createMousewheelZoom();\n\n              this.trigger(RENDER);\n              triggerPaneRender(this._plotArea.panes);\n\n              if (!this._navState) {\n                this._cancelDomEvents();\n              }\n            },\n            exportVisual: function (exportOptions) {\n              var visual;\n\n              if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n                var currentOptions = this.options;\n                var options = deepExtend({}, exportOptions.options, {\n                  chartArea: {\n                    width: exportOptions.width,\n                    height: exportOptions.height\n                  }\n                });\n                clearMissingValues(this._originalOptions, options);\n                this.options = deepExtend({}, this._originalOptions, options);\n\n                this._initTheme(this.options, this._theme);\n\n                this.bindCategories();\n\n                var model = this._getModel();\n\n                model.renderVisual();\n                triggerPaneRender(model._plotArea.panes);\n                visual = model.visual;\n                this.options = currentOptions;\n              } else {\n                visual = this.surface.exportVisual();\n              }\n\n              return visual;\n            },\n            _sharedTooltip: function () {\n              return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n            },\n            _createPannable: function () {\n              var options = this.options;\n\n              if (options.pannable !== false) {\n                this._pannable = new Pannable(this._plotArea, options.pannable);\n              }\n            },\n            _createZoomSelection: function () {\n              var zoomable = this.options.zoomable;\n              var selection = (zoomable || {}).selection;\n\n              if (zoomable !== false && selection !== false) {\n                this._zoomSelection = new ZoomSelection(this, selection);\n              }\n            },\n            _createMousewheelZoom: function () {\n              var zoomable = this.options.zoomable;\n              var mousewheel = (zoomable || {}).mousewheel;\n\n              if (zoomable !== false && mousewheel !== false) {\n                this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n              }\n            },\n            _toggleDragZoomEvents: function () {\n              var pannable = this.options.pannable;\n              var zoomable = this.options.zoomable;\n              var selection = (zoomable || {}).selection;\n              var mousewheel = (zoomable || {}).mousewheel;\n              var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([DRAG_START, DRAG, DRAG_END]);\n              var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ZOOM_START, ZOOM, ZOOM_END]);\n              var element = this.element;\n\n              if (this._dragZoomEnabled && allowDrag && allowZoom) {\n                element.style.touchAction = this._touchAction || '';\n                this._dragZoomEnabled = false;\n              } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n                element.style.touchAction = \"none\";\n                this._dragZoomEnabled = true;\n              }\n\n              this._toggleDomEvents(!allowDrag, !allowZoom);\n            },\n            _toggleDomEvents: function (drag, zoom) {\n              var domEvents = this.domEvents;\n\n              if (!domEvents) {\n                return;\n              }\n\n              if (domEvents.toggleDrag) {\n                domEvents.toggleDrag(drag);\n              }\n\n              if (domEvents.toggleZoom) {\n                domEvents.toggleZoom(zoom);\n              }\n            },\n            _createTooltip: function () {\n              var ref = this;\n              var tooltipOptions = ref.options.tooltip;\n              var tooltip;\n\n              if (this._sharedTooltip()) {\n                tooltip = this._createSharedTooltip(tooltipOptions);\n              } else {\n                tooltip = new Tooltip(this.chartService, tooltipOptions);\n              }\n\n              return tooltip;\n            },\n            _createSharedTooltip: function (options) {\n              return new SharedTooltip(this._plotArea, options);\n            },\n            applyDefaults: function (options, themeOptions) {\n              applyAxisDefaults(options, themeOptions);\n              applySeriesDefaults(options, themeOptions);\n            },\n            applySeriesColors: function () {\n              var options = this.options;\n              var series = options.series;\n              var colors = options.seriesColors || [];\n\n              for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var seriesColor = colors[i % colors.length];\n                var defaults = currentSeries._defaults;\n                currentSeries.color = currentSeries.color || seriesColor;\n\n                if (defaults) {\n                  defaults.color = defaults.color || seriesColor;\n                }\n              }\n            },\n            _getModel: function () {\n              var options = this.options;\n\n              var plotArea = this._createPlotArea();\n\n              var model = new dataviz.RootElement(this._modelOptions());\n              model.chart = this;\n              model._plotArea = plotArea;\n              dataviz.Title.buildTitle(options.title, model);\n\n              if (options.legend && options.legend.visible) {\n                model.append(new Legend(plotArea.options.legend, this.chartService));\n              }\n\n              model.append(plotArea);\n              model.reflow();\n              return model;\n            },\n            _modelOptions: function () {\n              var options = this.options;\n              var size = this.getSize();\n              return deepExtend({\n                transitions: options.transitions,\n                width: size.width || datavizConstants.DEFAULT_WIDTH,\n                height: size.height || datavizConstants.DEFAULT_HEIGHT\n              }, options.chartArea);\n            },\n            _createPlotArea: function (skipSeries) {\n              var options = this.options;\n              var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n              return plotArea;\n            },\n            _setupSelection: function () {\n              var this$1 = this;\n              var ref = this;\n              var axes = ref._plotArea.axes;\n              var selections = this._selections = [];\n\n              for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var options = axis.options;\n\n                if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                  var range = axis.range();\n                  var selection = new Selection(this$1, axis, deepExtend({\n                    min: range.min,\n                    max: range.max\n                  }, options.select));\n                  selections.push(selection);\n                }\n              }\n            },\n            _selectStart: function (e) {\n              return this.trigger(SELECT_START, e);\n            },\n            _select: function (e) {\n              return this.trigger(SELECT, e);\n            },\n            _selectEnd: function (e) {\n              return this.trigger(SELECT_END, e);\n            },\n            _initHandlers: function () {\n              this._clickHandler = this._click.bind(this);\n              this._mousewheelHandler = this._mousewheel.bind(this);\n              this._mouseleaveHandler = this._mouseleave.bind(this);\n              this._surfaceMouseenterHandler = this._mouseover.bind(this);\n              this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n              this._mousemove = kendo.throttle(this._mousemove.bind(this), MOUSEMOVE_DELAY);\n            },\n            addObserver: function (observer) {\n              if (observer) {\n                this.observers.push(observer);\n              }\n            },\n            removeObserver: function (observer) {\n              var index = this.observers.indexOf(observer);\n\n              if (index >= 0) {\n                this.observers.splice(index, 1);\n              }\n            },\n            requiresHandlers: function (eventNames) {\n              var observers = this.observers;\n\n              for (var idx = 0; idx < observers.length; idx++) {\n                if (observers[idx].requiresHandlers(eventNames)) {\n                  return true;\n                }\n              }\n            },\n            trigger: function (name, args) {\n              if (args === void 0) {\n                args = {};\n              }\n\n              if (name === SHOW_TOOLTIP) {\n                args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n              }\n\n              args.sender = this;\n              var observers = this.observers;\n              var isDefaultPrevented = false;\n\n              for (var idx = 0; idx < observers.length; idx++) {\n                if (observers[idx].trigger(name, args)) {\n                  isDefaultPrevented = true;\n                }\n              }\n\n              return isDefaultPrevented;\n            },\n            _attachEvents: function () {\n              var element = this.element;\n              this._touchAction = element.style.touchAction;\n              var obj;\n              bindEvents(element, (obj = {}, obj[CONTEXTMENU] = this._clickHandler, obj[MOUSEWHEEL] = this._mousewheelHandler, obj[MOUSELEAVE] = this._mouseleaveHandler, obj));\n\n              if (this._shouldAttachMouseMove()) {\n                var obj$1;\n                bindEvents(element, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mousemove, obj$1));\n              }\n\n              this.domEvents = services.DomEventsBuilder.create(this.element, {\n                start: this._start.bind(this),\n                move: this._move.bind(this),\n                end: this._end.bind(this),\n                tap: this._tap.bind(this),\n                gesturestart: this._gesturestart.bind(this),\n                gesturechange: this._gesturechange.bind(this),\n                gestureend: this._gestureend.bind(this)\n              });\n\n              this._toggleDragZoomEvents();\n            },\n            _mouseleave: function (e) {\n              if (this._hoveredPoint) {\n                this._hoveredPoint.out(this, e);\n\n                this._hoveredPoint = null;\n              }\n\n              if (this._plotArea.hovered) {\n                this.trigger(PLOT_AREA_LEAVE);\n                this._plotArea.hovered = false;\n              }\n            },\n            _cancelDomEvents: function () {\n              if (this.domEvents && this.domEvents.cancel) {\n                this.domEvents.cancel();\n              }\n            },\n            _gesturestart: function (e) {\n              if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n                this._gestureDistance = e.distance;\n\n                this._unsetActivePoint();\n\n                this.surface.suspendTracking();\n              }\n            },\n            _gestureend: function (e) {\n              if (this._zooming && !this._stopChartHandlers(e)) {\n                if (this.surface) {\n                  this.surface.resumeTracking();\n                }\n\n                this._zooming = false;\n                this.trigger(ZOOM_END, {});\n              }\n            },\n            _gesturechange: function (e) {\n              var mousewheelZoom = this._mousewheelZoom;\n\n              if (mousewheelZoom && !this._stopChartHandlers(e)) {\n                e.preventDefault();\n                var previousGestureDistance = this._gestureDistance;\n                var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n                if (Math.abs(scaleDelta) >= 0.1) {\n                  scaleDelta = Math.round(scaleDelta * 10);\n                  this._gestureDistance = e.distance;\n                  var args = {\n                    delta: scaleDelta,\n                    axisRanges: axisRanges(this._plotArea.axes),\n                    originalEvent: e\n                  };\n\n                  if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    var coords = this._eventCoordinates(e);\n\n                    if (!this._zooming) {\n                      this._zooming = true;\n                    }\n\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n\n                    if (ranges && !this.trigger(ZOOM, args)) {\n                      mousewheelZoom.zoom();\n                    }\n                  }\n                }\n              }\n            },\n            _mouseout: function (e) {\n              if (e.element) {\n                var element = this._drawingChartElement(e.element, e);\n\n                if (element && element.leave) {\n                  element.leave(this, e.originalEvent);\n                }\n              }\n            },\n            _start: function (e) {\n              var coords = this._eventCoordinates(e);\n\n              if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n                return;\n              }\n\n              if (this.requiresHandlers([DRAG_START, DRAG, DRAG_END])) {\n                this._startNavigation(e, coords, DRAG_START);\n              }\n\n              if (this._pannable && this._pannable.start(e)) {\n                this.surface.suspendTracking();\n\n                this._unsetActivePoint();\n\n                this._suppressHover = true;\n                this.chartService.panning = true;\n              }\n\n              if (this._zoomSelection) {\n                if (this._zoomSelection.start(e)) {\n                  this.trigger(ZOOM_START, {\n                    axisRanges: axisRanges(this._plotArea.axes),\n                    originalEvent: e\n                  });\n                }\n              }\n            },\n            _move: function (e) {\n              var ref = this;\n              var state = ref._navState;\n              var pannable = ref._pannable;\n\n              if (this._stopChartHandlers(e)) {\n                return;\n              }\n\n              if (pannable) {\n                var ranges = pannable.move(e);\n\n                if (ranges && !this.trigger(DRAG, {\n                  axisRanges: ranges,\n                  originalEvent: e\n                })) {\n                  pannable.pan();\n                }\n              } else if (state) {\n                var ranges$1 = {};\n                var axes = state.axes;\n\n                for (var i = 0; i < axes.length; i++) {\n                  var currentAxis = axes[i];\n                  var axisName = currentAxis.options.name;\n\n                  if (axisName) {\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\n                    var delta = axis.startLocation - axis.location;\n\n                    if (delta !== 0) {\n                      ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                    }\n                  }\n                }\n\n                state.axisRanges = ranges$1;\n                this.trigger(DRAG, {\n                  axisRanges: ranges$1,\n                  originalEvent: e\n                });\n              }\n\n              if (this._zoomSelection) {\n                this._zoomSelection.move(e);\n              }\n            },\n            _end: function (e) {\n              if (this._stopChartHandlers(e)) {\n                return;\n              }\n\n              var pannable = this._pannable;\n\n              if (pannable && pannable.end(e)) {\n                this.surface.resumeTracking();\n                this.trigger(DRAG_END, {\n                  axisRanges: axisRanges(this._plotArea.axes),\n                  originalEvent: e\n                });\n                this._suppressHover = false;\n                this.chartService.panning = false;\n              } else {\n                this._endNavigation(e, DRAG_END);\n              }\n\n              if (this._zoomSelection) {\n                var ranges = this._zoomSelection.end(e);\n\n                if (ranges && !this.trigger(ZOOM, {\n                  axisRanges: ranges,\n                  originalEvent: e\n                })) {\n                  this._zoomSelection.zoom();\n\n                  this.trigger(ZOOM_END, {\n                    axisRanges: ranges,\n                    originalEvent: e\n                  });\n                }\n              }\n            },\n            _stopChartHandlers: function (e) {\n              var selections = this._selections || [];\n\n              if (!selections.length) {\n                return false;\n              }\n\n              var coords = this._eventCoordinates(e);\n\n              var pane = this._plotArea.paneByPoint(coords);\n\n              if (pane) {\n                for (var idx = 0; idx < selections.length; idx++) {\n                  if (selections[idx].onPane(pane)) {\n                    return true;\n                  }\n                }\n              }\n            },\n            _mousewheelZoomRate: function () {\n              var zoomable = this.options.zoomable;\n              var mousewheel = (zoomable || {}).mousewheel || {};\n              return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n            },\n            _mousewheel: function (e) {\n              var this$1 = this;\n              var delta = dataviz.mousewheelDelta(e);\n              var mousewheelZoom = this._mousewheelZoom;\n\n              var coords = this._eventCoordinates(e);\n\n              if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n                return;\n              }\n\n              if (mousewheelZoom) {\n                var args = {\n                  delta: delta,\n                  axisRanges: axisRanges(this._plotArea.axes),\n                  originalEvent: e\n                };\n\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                  e.preventDefault();\n\n                  if (!this._zooming) {\n                    this._unsetActivePoint();\n\n                    this.surface.suspendTracking();\n                    this._zooming = true;\n                  }\n\n                  if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                  }\n\n                  args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n\n                  if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                    mousewheelZoom.zoom();\n                  }\n\n                  this._mwTimeout = setTimeout(function () {\n                    this$1.trigger(ZOOM_END, args);\n                    this$1._zooming = false;\n\n                    if (this$1.surface) {\n                      this$1.surface.resumeTracking();\n                    }\n                  }, MOUSEWHEEL_DELAY);\n                }\n              } else {\n                var state = this._navState;\n\n                if (!state) {\n                  var prevented = this._startNavigation(e, coords, ZOOM_START);\n\n                  if (!prevented) {\n                    state = this._navState;\n                  }\n                }\n\n                if (state) {\n                  var totalDelta = state.totalDelta || delta;\n                  state.totalDelta = totalDelta + delta;\n                  var axes = this._navState.axes;\n                  var ranges = {};\n\n                  for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n\n                    if (axisName) {\n                      ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1._mousewheelZoomRate(), coords);\n                    }\n                  }\n\n                  this.trigger(ZOOM, {\n                    delta: delta,\n                    axisRanges: ranges,\n                    originalEvent: e\n                  });\n\n                  if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                  }\n\n                  this._mwTimeout = setTimeout(function () {\n                    this$1._endNavigation(e, ZOOM_END);\n                  }, MOUSEWHEEL_DELAY);\n                }\n              }\n            },\n            _startNavigation: function (e, coords, chartEvent) {\n              var plotArea = this._model._plotArea;\n              var pane = plotArea.findPointPane(coords);\n              var axes = plotArea.axes.slice(0);\n\n              if (!pane) {\n                return;\n              }\n\n              var ranges = axisRanges(axes);\n              var prevented = this.trigger(chartEvent, {\n                axisRanges: ranges,\n                originalEvent: e\n              });\n\n              if (prevented) {\n                this._cancelDomEvents();\n              } else {\n                this._suppressHover = true;\n\n                this._unsetActivePoint();\n\n                this._navState = {\n                  axisRanges: ranges,\n                  pane: pane,\n                  axes: axes\n                };\n              }\n            },\n            _endNavigation: function (e, chartEvent) {\n              if (this._navState) {\n                this.trigger(chartEvent, {\n                  axisRanges: this._navState.axisRanges,\n                  originalEvent: e\n                });\n                this._suppressHover = false;\n                this._navState = null;\n              }\n            },\n            _getChartElement: function (e, match) {\n              var element = this.surface.eventTarget(e);\n\n              if (element) {\n                return this._drawingChartElement(element, e, match);\n              }\n            },\n            _drawingChartElement: function (element, e, match) {\n              var current = element;\n              var chartElement;\n\n              while (current && !chartElement) {\n                chartElement = current.chartElement;\n                current = current.parent;\n              }\n\n              if (chartElement) {\n                if (chartElement.aliasFor) {\n                  chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n                }\n\n                if (match) {\n                  chartElement = chartElement.closest(match);\n\n                  if (chartElement && chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor();\n                  }\n                }\n\n                return chartElement;\n              }\n            },\n            _eventCoordinates: function (e) {\n              var coordinates = dataviz.eventCoordinates(e);\n              return this._toModelCoordinates(coordinates.x, coordinates.y);\n            },\n            _elementPadding: function () {\n              if (!this._padding) {\n                var ref = elementStyles(this.element, [\"paddingLeft\", \"paddingTop\"]);\n                var paddingLeft = ref.paddingLeft;\n                var paddingTop = ref.paddingTop;\n                this._padding = {\n                  top: paddingTop,\n                  left: paddingLeft\n                };\n              }\n\n              return this._padding;\n            },\n            _toDocumentCoordinates: function (point) {\n              var padding = this._elementPadding();\n\n              var offset = dataviz.elementOffset(this.element);\n              return {\n                left: round(point.x + padding.left + offset.left),\n                top: round(point.y + padding.top + offset.top)\n              };\n            },\n            _toModelCoordinates: function (clientX, clientY) {\n              var element = this.element;\n              var offset = dataviz.elementOffset(element);\n\n              var padding = this._elementPadding();\n\n              var inverseTransform = dataviz.elementScale(element).invert();\n              var point = new GeometryPoint(clientX - offset.left - padding.left, clientY - offset.top - padding.top).transform(inverseTransform);\n              return new Point(point.x, point.y);\n            },\n            _tap: function (e) {\n              var this$1 = this;\n              var drawingElement = this.surface.eventTarget(e);\n\n              var element = this._drawingChartElement(drawingElement, e);\n\n              var sharedTooltip = this._sharedTooltip();\n\n              if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n                this._unsetActivePoint();\n              }\n\n              if (sharedTooltip) {\n                this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n              }\n\n              this._propagateClick(element, e); //part of fix for hover issue on windows touch\n\n\n              this.handlingTap = true;\n              setTimeout(function () {\n                this$1.handlingTap = false;\n              }, 0);\n            },\n            _click: function (e) {\n              var element = this._getChartElement(e);\n\n              this._propagateClick(element, e);\n            },\n            _propagateClick: function (element, e) {\n              var this$1 = this;\n              var current = element;\n\n              while (current) {\n                if (current.click) {\n                  current.click(this$1, e);\n                }\n\n                current = current.parent;\n              }\n            },\n            _startHover: function (element, e) {\n              if (this._suppressHover) {\n                return false;\n              }\n\n              var point = this._drawingChartElement(element, e, function (element) {\n                return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n              });\n\n              var activePoint = this._activePoint;\n              var multipleSeries = this._plotArea.series.length > 1;\n\n              var hasInactiveOpacity = this._hasInactiveOpacity();\n\n              this._updateHoveredPoint(point, e);\n\n              if (point && activePoint !== point && point.hover) {\n                this._activePoint = point;\n\n                if (!this._sharedTooltip() && !point.hover(this, e)) {\n                  this._displayTooltip(point);\n\n                  if (hasInactiveOpacity) {\n                    this._displayInactiveOpacity(point, multipleSeries);\n                  } else {\n                    this._highlight.show(point);\n                  }\n                }\n              } else if (!point && hasInactiveOpacity) {\n                if (multipleSeries && this._activeChartInstance) {\n                  this._updateSeriesOpacity(point, true);\n\n                  this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n\n                  this._activeChartInstance = null;\n                }\n\n                this._highlight && this._highlight.hide();\n                this._activePoint = null;\n              }\n\n              return point;\n            },\n            _displayTooltip: function (point) {\n              var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n\n              if (tooltipOptions.visible) {\n                this._tooltip.show(point);\n              }\n            },\n            _displayInactiveOpacity: function (activePoint, multipleSeries, highlightPoints) {\n              var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n\n              if (!chartInstance) {\n                return;\n              }\n\n              if (multipleSeries) {\n                this._updateSeriesOpacity(activePoint);\n\n                this._applySeriesOpacity(chartInstance.children, null, true);\n\n                this._applySeriesOpacity(chartInstance.children, activePoint.series);\n\n                this._highlight.show(highlightPoints || activePoint);\n              } else {\n                var inactivePoints;\n\n                if (!chartInstance.supportsPointInactiveOpacity()) {\n                  this._highlight.show(activePoint);\n\n                  return;\n                }\n\n                inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n                if (inactivePoints && inactivePoints.length) {\n                  this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n                }\n              }\n            },\n            _getInactivePoints: function (activePoint, chartInstance) {\n              var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n              return allPoints.filter(function (point) {\n                return point !== activePoint;\n              });\n            },\n            _getAllPointsOfType: function (container, type) {\n              var this$1 = this;\n              var points = [];\n\n              for (var i = 0; i < container.children.length; i++) {\n                var element = container.children[i];\n\n                if (element.constructor === type) {\n                  points.push(element);\n                } else if (element.children && element.children.length) {\n                  points = points.concat(this$1._getAllPointsOfType(element, type));\n                }\n              }\n\n              return points;\n            },\n            _updateHoveredPoint: function (point, e) {\n              var hoveredPoint = this._hoveredPoint;\n\n              if (hoveredPoint && hoveredPoint !== point) {\n                hoveredPoint.out(this, e);\n                this._hoveredPoint = null;\n              }\n\n              if (point && hoveredPoint !== point && point.over) {\n                this._hoveredPoint = point;\n                point.over(this, e);\n              }\n            },\n            _updateSeriesOpacity: function (point, resetOpacity) {\n              var this$1 = this;\n              var plotArea = this._plotArea;\n              var length = plotArea.series.length;\n\n              for (var i = 0; i < length; i++) {\n                var currSeries = plotArea.series[i];\n\n                var defaultOpacity = this$1._getDefaultOpacityForSeries(currSeries);\n\n                var inactiveOpacity = this$1._getInactiveOpacityForSeries(currSeries);\n\n                if (!resetOpacity && currSeries !== point.series) {\n                  currSeries.defaultOpacity = defaultOpacity;\n                  currSeries.opacity = inactiveOpacity;\n\n                  if (currSeries.line) {\n                    currSeries.line.opacity = inactiveOpacity;\n                  }\n                } else {\n                  currSeries.opacity = defaultOpacity;\n\n                  if (currSeries.line) {\n                    currSeries.line.opacity = defaultOpacity;\n                  }\n                }\n              }\n            },\n            _applySeriesOpacity: function (elements, activeSeries, reset, series) {\n              var this$1 = this;\n\n              for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                var currSeries = element.series || series;\n                var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n                if (shouldHighlight && element.visual) {\n                  var opacity = series ? series.opacity : element.series.opacity;\n\n                  if (currSeries !== activeSeries || reset) {\n                    element.visual.opacity(reset ? 1 : opacity);\n                  }\n                }\n\n                if (element.children && element.children.length) {\n                  this$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n                }\n              }\n            },\n            _chartInstanceFromPoint: function (point) {\n              var chartInstance = point.parent;\n\n              while (chartInstance && !chartInstance.plotArea) {\n                chartInstance = chartInstance.parent;\n              }\n\n              return chartInstance;\n            },\n            _hasInactiveOpacity: function () {\n              var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n              var hasInactiveOpacity = this.options.series.filter(function (s) {\n                return s.highlight.inactiveOpacity !== undefined;\n              }).length > 0;\n              return hasDefaultInactiveOpacity || hasInactiveOpacity;\n            },\n            _getInactiveOpacityForSeries: function (series) {\n              var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n              var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n              return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n            },\n            _getDefaultOpacityForSeries: function (series) {\n              return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n            },\n            _mouseover: function (e) {\n              var point = this._startHover(e.element, e.originalEvent);\n\n              if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n                this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n                var obj;\n                bindEvents(document, (obj = {}, obj[MOUSEMOVE] = this._mouseMoveTrackHandler, obj));\n              }\n            },\n            _mouseMoveTracking: function (e) {\n              var ref = this;\n              var options = ref.options;\n              var tooltip = ref._tooltip;\n              var highlight = ref._highlight;\n              var point = ref._activePoint;\n\n              var coords = this._eventCoordinates(e);\n\n              if (this._plotArea.box.containsPoint(coords)) {\n                if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                  var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n\n                  if (seriesPoint && seriesPoint !== point) {\n                    this._activePoint = seriesPoint;\n\n                    if (!seriesPoint.hover(this, e)) {\n                      var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n\n                      if (tooltipOptions.visible) {\n                        tooltip.show(seriesPoint);\n                      }\n\n                      highlight.show(seriesPoint);\n                    }\n                  }\n                }\n              } else {\n                var obj;\n                unbindEvents(document, (obj = {}, obj[MOUSEMOVE] = this._mouseMoveTrackHandler, obj));\n\n                this._unsetActivePoint();\n\n                this._mouseMoveTrackHandler = null;\n              }\n            },\n            _mousemove: function (e) {\n              var coords = this._eventCoordinates(e);\n\n              var plotArea = this._plotArea;\n\n              this._trackCrosshairs(coords);\n\n              if (plotArea.hover) {\n                var overPlotArea = plotArea.backgroundContainsPoint(coords);\n\n                if (overPlotArea) {\n                  plotArea.hovered = true;\n\n                  this._plotArea.hover(this, e);\n                } else if (plotArea.hovered && !overPlotArea) {\n                  this.trigger(PLOT_AREA_LEAVE);\n                  plotArea.hovered = false;\n                }\n              }\n\n              if (this._sharedTooltip()) {\n                this._trackSharedTooltip(coords, e);\n              }\n            },\n            _trackCrosshairs: function (coords) {\n              var crosshairs = this._plotArea.crosshairs;\n\n              for (var i = 0; i < crosshairs.length; i++) {\n                var current = crosshairs[i];\n\n                if (current.box.containsPoint(coords)) {\n                  current.showAt(coords);\n                } else {\n                  current.hide();\n                }\n              }\n            },\n            _trackSharedTooltip: function (coords, e, toggle) {\n              if (this._suppressHover) {\n                return;\n              }\n\n              var ref = this;\n              var tooltipOptions = ref.options.tooltip;\n              var plotArea = ref._plotArea;\n              var categoryAxis = ref._plotArea.categoryAxis;\n              var tooltip = ref._tooltip;\n              var highlight = ref._highlight;\n\n              if (plotArea.backgroundContainsPoint(coords)) {\n                var index = categoryAxis.pointCategoryIndex(coords);\n\n                if (index !== this._tooltipCategoryIx || !this._sharedHighlight && toggle) {\n                  var points = plotArea.pointsByCategoryIndex(index);\n                  var pointArgs = points.map(function (point) {\n                    return point.eventArgs(e);\n                  });\n                  var hoverArgs = pointArgs[0] || {};\n                  hoverArgs.categoryPoints = pointArgs;\n\n                  if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                    if (tooltipOptions.visible) {\n                      tooltip.showAt(points, coords);\n                    }\n\n                    highlight.show(points);\n                    this._sharedHighlight = true;\n                  } else {\n                    tooltip.hide();\n                  }\n\n                  this._tooltipCategoryIx = index;\n                } else if (toggle && this._sharedHighlight) {\n                  highlight.hide();\n                  tooltip.hide();\n                  this._sharedHighlight = false;\n                }\n              } else if (this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._tooltipCategoryIx = null;\n                this._sharedHighlight = false;\n              }\n            },\n            hideElements: function (options) {\n              var plotArea = this._plotArea;\n\n              this._mousemove.cancel();\n\n              plotArea.hideCrosshairs();\n\n              this._unsetActivePoint(options);\n            },\n            _unsetActivePoint: function (options) {\n              var ref = this;\n              var tooltip = ref._tooltip;\n              var highlight = ref._highlight;\n              this._activePoint = null;\n              this._hoveredPoint = null;\n\n              if (tooltip && !(options && options.keepTooltipOpen)) {\n                tooltip.hide();\n              }\n\n              this._tooltipCategoryIx = null;\n              this._sharedHighlight = false;\n\n              if (highlight) {\n                highlight.hide();\n              }\n            },\n            _deferRedraw: function () {\n              this._redraw();\n            },\n            _clearRedrawTimeout: function () {\n              if (this._redrawTimeout) {\n                clearInterval(this._redrawTimeout);\n                this._redrawTimeout = null;\n              }\n            },\n            bindCategories: function () {\n              var this$1 = this;\n              var options = this.options;\n              var definitions = [].concat(options.categoryAxis);\n\n              for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n                var axis = definitions[axisIx];\n\n                if (axis.autoBind !== false) {\n                  this$1.bindCategoryAxisFromSeries(axis, axisIx);\n                }\n              }\n            },\n            bindCategoryAxisFromSeries: function (axis, axisIx) {\n              var this$1 = this;\n              var series = this.options.series;\n              var seriesLength = series.length;\n              var uniqueCategories = new dataviz.HashMap(); //perf improvement in case type category with dates\n\n              var items = [];\n              var bindable = false;\n              var dateAxis;\n\n              for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                var s = series[seriesIx];\n                var onAxis = s.categoryAxis === axis.name || !s.categoryAxis && axisIx === 0;\n                var data = s.data;\n                var dataLength = data.length;\n                var bind = s.categoryField && onAxis;\n                bindable = bind || bindable;\n\n                if (bind && dataLength > 0) {\n                  dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n                  var getFn = dateAxis ? getDateField : getField;\n\n                  for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                    var dataRow = data[dataIx];\n                    var category = getFn(s.categoryField, dataRow, this$1.chartService.intl);\n\n                    if (dateAxis || !uniqueCategories.get(category)) {\n                      items.push([category, dataRow]);\n\n                      if (!dateAxis) {\n                        uniqueCategories.set(category, true);\n                      }\n                    }\n                  }\n                }\n              }\n\n              if (items.length > 0) {\n                if (dateAxis) {\n                  items = uniqueDates(items, function (a, b) {\n                    return dataviz.dateComparer(a[0], b[0]);\n                  });\n                }\n\n                var result = transpose(items);\n                axis.categories = result[0];\n              } else if (bindable) {\n                axis.categories = [];\n              }\n            },\n            _isBindable: function (series) {\n              var valueFields = SeriesBinder.current.valueFields(series);\n              var result = true;\n\n              for (var i = 0; i < valueFields.length; i++) {\n                var field = valueFields[i];\n\n                if (field === VALUE) {\n                  field = \"field\";\n                } else {\n                  field = field + \"Field\";\n                }\n\n                if (!defined(series[field])) {\n                  result = false;\n                  break;\n                }\n              }\n\n              return result;\n            },\n            _noTransitionsRedraw: function () {\n              var options = this.options;\n              var transitionsState;\n\n              if (options.transitions !== false) {\n                options.transitions = false;\n                transitionsState = true;\n              }\n\n              this._redraw();\n\n              if (transitionsState) {\n                options.transitions = true;\n              }\n            },\n            _legendItemHover: function (seriesIndex, pointIndex) {\n              var ref = this;\n              var plotArea = ref._plotArea;\n              var highlight = ref._highlight;\n              var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n              var items;\n\n              if (inArray(currentSeries.type, [PIE, DONUT, FUNNEL])) {\n                items = plotArea.findPoint(function (point) {\n                  return point.series.index === seriesIndex && point.index === pointIndex;\n                });\n              } else {\n                items = plotArea.pointsBySeriesIndex(seriesIndex);\n              }\n\n              if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n                var multipleSeries = plotArea.series.length > 1;\n                var point = items.length ? items[0] : items;\n\n                this._displayInactiveOpacity(point, multipleSeries, items);\n              } else {\n                highlight.show(items);\n              }\n            },\n            _shouldAttachMouseMove: function () {\n              return this._plotArea.crosshairs.length || this._tooltip && this._sharedTooltip() || this.requiresHandlers([PLOT_AREA_HOVER, PLOT_AREA_LEAVE]);\n            },\n            updateMouseMoveHandler: function () {\n              var obj;\n              unbindEvents(this.element, (obj = {}, obj[MOUSEMOVE] = this._mousemove, obj));\n\n              if (this._shouldAttachMouseMove()) {\n                var obj$1;\n                bindEvents(this.element, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mousemove, obj$1));\n              }\n            },\n            applyOptions: function (options, theme) {\n              clearMissingValues(this._originalOptions, options);\n              this._originalOptions = deepExtend(this._originalOptions, options);\n              this.options = deepExtend({}, this._originalOptions);\n\n              if (theme) {\n                this._theme = theme;\n                this.chartService.theme = theme;\n              }\n\n              this._initTheme(this.options, this._theme);\n\n              this._toggleDragZoomEvents();\n            },\n            setOptions: function (options, theme) {\n              this.applyOptions(options, theme);\n              this.bindCategories();\n              this.redraw();\n              this.updateMouseMoveHandler();\n            },\n            setDirection: function (rtl) {\n              this.chartService.rtl = Boolean(rtl);\n\n              if (this.surface && this.surface.type === 'svg') {\n                this._destroySurface();\n              }\n            },\n            setIntlService: function (intl) {\n              this.chartService.intl = intl;\n            },\n            noTransitionsRedraw: function () {\n              this._noTransitionsRedraw();\n            },\n            destroy: function () {\n              this._destroyed = true;\n              var obj;\n              unbindEvents(this.element, (obj = {}, obj[CONTEXTMENU] = this._clickHandler, obj[MOUSEWHEEL] = this._mousewheelHandler, obj[MOUSEMOVE] = this._mousemove, obj[MOUSELEAVE] = this._mouseleaveHandler, obj));\n\n              if (this.domEvents) {\n                this.domEvents.destroy();\n                delete this.domEvents;\n              }\n\n              if (this._mouseMoveTrackHandler) {\n                var obj$1;\n                unbindEvents(document, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mouseMoveTrackHandler, obj$1));\n              }\n\n              this._destroyView();\n\n              this._destroySurface();\n\n              this._clearRedrawTimeout();\n            },\n            _destroySurface: function () {\n              var surface = this.surface;\n\n              if (surface) {\n                surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n                surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n                surface.destroy();\n                this.surface = null;\n              }\n            },\n            _destroySelections: function () {\n              var selections = this._selections;\n\n              if (selections) {\n                while (selections.length > 0) {\n                  selections.shift().destroy();\n                }\n              }\n            },\n            _destroyView: function () {\n              var model = this._model;\n\n              if (model) {\n                model.destroy();\n                this._model = null;\n              }\n\n              this._unsetActivePoint();\n\n              this._destroySelections();\n\n              if (this._tooltip) {\n                this._tooltip.destroy();\n              }\n\n              if (this._highlight) {\n                this._highlight.destroy();\n              }\n\n              if (this._zoomSelection) {\n                this._zoomSelection.destroy();\n\n                delete this._zoomSelection;\n              }\n\n              if (this._pannable) {\n                this._pannable.destroy();\n\n                delete this._pannable;\n              }\n\n              if (this._mousewheelZoom) {\n                this._mousewheelZoom.destroy();\n\n                delete this._mousewheelZoom;\n              }\n            }\n          });\n\n          function resolveAxisAliases(options) {\n            var aliases = AXIS_NAMES;\n\n            for (var idx = 0; idx < aliases.length; idx++) {\n              var alias = aliases[idx] + \"Axes\";\n\n              if (options[alias]) {\n                options[aliases[idx] + \"Axis\"] = options[alias];\n                delete options[alias];\n              }\n            }\n          }\n\n          function pointByCategoryName(points, name) {\n            if (points) {\n              for (var idx = 0; idx < points.length; idx++) {\n                if (points[idx].category === name) {\n                  return [points[idx]];\n                }\n              }\n            }\n          }\n\n          function applyAxisDefaults(options, themeOptions) {\n            var themeAxisDefaults = (themeOptions || {}).axisDefaults || {};\n            var axisName, axisDefaults, axes;\n\n            function mapAxisOptions(axisOptions) {\n              var axisColor = (axisOptions || {}).color || axisDefaults.color;\n              var result = deepExtend({}, themeAxisDefaults, themeAxisDefaults[axisName], axisDefaults, axisDefaults[axisName], {\n                line: {\n                  color: axisColor\n                },\n                labels: {\n                  color: axisColor\n                },\n                title: {\n                  color: axisColor\n                }\n              }, axisOptions);\n              delete result[axisName];\n              return result;\n            }\n\n            for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n              axisName = AXIS_NAMES[idx] + \"Axis\";\n              axisDefaults = options.axisDefaults || {};\n              axes = [].concat(options[axisName]);\n              axes = axes.map(mapAxisOptions);\n              options[axisName] = axes.length > 1 ? axes : axes[0];\n            }\n          }\n\n          function applySeriesDefaults(options, themeOptions) {\n            var series = options.series;\n            var seriesLength = series.length;\n            var seriesDefaults = options.seriesDefaults;\n            var commonDefaults = deepExtend({}, options.seriesDefaults);\n            var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n            var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n            cleanupNestedSeriesDefaults(commonDefaults);\n            cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n            for (var i = 0; i < seriesLength; i++) {\n              var seriesType = series[i].type || options.seriesDefaults.type;\n              var baseOptions = deepExtend({\n                data: []\n              }, commonThemeDefaults, themeSeriesDefaults[seriesType], {\n                tooltip: options.tooltip\n              }, commonDefaults, seriesDefaults[seriesType]);\n              series[i]._defaults = baseOptions;\n              series[i] = deepExtend({}, baseOptions, series[i]);\n              series[i].data = series[i].data || [];\n            }\n          }\n\n          function cleanupNestedSeriesDefaults(seriesDefaults) {\n            delete seriesDefaults.bar;\n            delete seriesDefaults.column;\n            delete seriesDefaults.rangeColumn;\n            delete seriesDefaults.line;\n            delete seriesDefaults.verticalLine;\n            delete seriesDefaults.pie;\n            delete seriesDefaults.donut;\n            delete seriesDefaults.area;\n            delete seriesDefaults.verticalArea;\n            delete seriesDefaults.scatter;\n            delete seriesDefaults.scatterLine;\n            delete seriesDefaults.bubble;\n            delete seriesDefaults.candlestick;\n            delete seriesDefaults.ohlc;\n            delete seriesDefaults.boxPlot;\n            delete seriesDefaults.bullet;\n            delete seriesDefaults.verticalBullet;\n            delete seriesDefaults.polarArea;\n            delete seriesDefaults.polarLine;\n            delete seriesDefaults.radarArea;\n            delete seriesDefaults.radarLine;\n            delete seriesDefaults.waterfall;\n          }\n\n          function axisRanges(axes) {\n            var ranges = {};\n\n            for (var i = 0; i < axes.length; i++) {\n              var axis = axes[i];\n              var axisName = axis.options.name;\n\n              if (axisName) {\n                ranges[axisName] = axis.range();\n              }\n            }\n\n            return ranges;\n          }\n\n          function sortDates(dates, comparer) {\n            if (comparer === void 0) {\n              comparer = dataviz.dateComparer;\n            }\n\n            for (var i = 1, length = dates.length; i < length; i++) {\n              if (comparer(dates[i], dates[i - 1]) < 0) {\n                dates.sort(comparer);\n                break;\n              }\n            }\n\n            return dates;\n          }\n\n          function uniqueDates(srcDates, comparer) {\n            if (comparer === void 0) {\n              comparer = dataviz.dateComparer;\n            }\n\n            var dates = sortDates(srcDates, comparer);\n            var length = dates.length;\n            var result = length > 0 ? [dates[0]] : [];\n\n            for (var i = 1; i < length; i++) {\n              if (comparer(dates[i], last(result)) !== 0) {\n                result.push(dates[i]);\n              }\n            }\n\n            return result;\n          }\n\n          function transpose(rows) {\n            var rowCount = rows.length;\n            var result = [];\n\n            for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n              var row = rows[rowIx];\n              var colCount = row.length;\n\n              for (var colIx = 0; colIx < colCount; colIx++) {\n                result[colIx] = result[colIx] || [];\n                result[colIx].push(row[colIx]);\n              }\n            }\n\n            return result;\n          }\n\n          var DATA_FIELDS = ['data', 'categories'];\n\n          function clearMissingValues(originalOptions, options) {\n            for (var field in options) {\n              if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n                var fieldValue = options[field];\n                var originalValue = originalOptions[field];\n\n                if (defined(originalValue)) {\n                  var nullValue = fieldValue === null;\n\n                  if (nullValue || !defined(fieldValue)) {\n                    delete originalOptions[field];\n\n                    if (nullValue) {\n                      delete options[field];\n                    }\n                  } else if (originalValue && isObject(fieldValue)) {\n                    if (isObject(originalValue)) {\n                      clearMissingValues(originalValue, fieldValue);\n                    }\n                  }\n                }\n              }\n            }\n          }\n\n          function triggerPaneRender(panes) {\n            for (var idx = 0; idx < panes.length; idx++) {\n              panes[idx].notifyRender();\n            }\n          }\n\n          setDefaultOptions(Chart, {\n            renderAs: \"\",\n            chartArea: {},\n            legend: {\n              visible: true,\n              labels: {}\n            },\n            categoryAxis: {},\n            seriesDefaults: {\n              type: COLUMN,\n              data: [],\n              highlight: {\n                visible: true\n              },\n              labels: {},\n              negativeValues: {\n                visible: false\n              }\n            },\n            series: [],\n            seriesColors: null,\n            tooltip: {\n              visible: false\n            },\n            transitions: true,\n            valueAxis: {},\n            plotArea: {},\n            title: {},\n            xAxis: {},\n            yAxis: {},\n            panes: [{}],\n            pannable: false,\n            zoomable: false\n          });\n          kendo.deepExtend(kendo.dataviz, {\n            constants: constants,\n            Aggregates: Aggregates,\n            AreaChart: AreaChart,\n            AreaSegment: AreaSegment,\n            AxisGroupRangeTracker: AxisGroupRangeTracker,\n            Bar: Bar,\n            BarChart: BarChart,\n            BarLabel: BarLabel,\n            BoxPlotChart: BoxPlotChart,\n            BoxPlot: BoxPlot,\n            BubbleChart: BubbleChart,\n            Bullet: Bullet,\n            BulletChart: BulletChart,\n            CandlestickChart: CandlestickChart,\n            Candlestick: Candlestick,\n            CategoricalChart: CategoricalChart,\n            CategoricalErrorBar: CategoricalErrorBar,\n            CategoricalPlotArea: CategoricalPlotArea,\n            Chart: Chart,\n            ChartContainer: ChartContainer,\n            ClipAnimation: ClipAnimation,\n            ClusterLayout: ClusterLayout,\n            Crosshair: Crosshair,\n            CrosshairTooltip: CrosshairTooltip,\n            DefaultAggregates: DefaultAggregates,\n            DonutChart: DonutChart,\n            DonutPlotArea: DonutPlotArea,\n            DonutSegment: DonutSegment,\n            ErrorBarBase: ErrorBarBase,\n            ErrorRangeCalculator: ErrorRangeCalculator,\n            Highlight: Highlight,\n            SharedTooltip: SharedTooltip,\n            Legend: Legend,\n            LegendItem: LegendItem,\n            LegendLayout: LegendLayout,\n            LineChart: LineChart,\n            LinePoint: LinePoint,\n            LineSegment: LineSegment,\n            Pane: Pane,\n            PieAnimation: PieAnimation,\n            PieChart: PieChart,\n            PieChartMixin: PieChartMixin,\n            PiePlotArea: PiePlotArea,\n            PieSegment: PieSegment,\n            PlotAreaBase: PlotAreaBase,\n            PlotAreaEventsMixin: PlotAreaEventsMixin,\n            PlotAreaFactory: PlotAreaFactory,\n            PointEventsMixin: PointEventsMixin,\n            RangeBar: RangeBar,\n            RangeBarChart: RangeBarChart,\n            RangeAreaPoint: RangeAreaPoint,\n            RangeAreaChart: RangeAreaChart,\n            ScatterChart: ScatterChart,\n            ScatterErrorBar: ScatterErrorBar,\n            ScatterLineChart: ScatterLineChart,\n            Selection: Selection,\n            SeriesAggregator: SeriesAggregator,\n            SeriesBinder: SeriesBinder,\n            SplineSegment: SplineSegment,\n            SplineAreaSegment: SplineAreaSegment,\n            StackWrap: StackWrap,\n            Tooltip: Tooltip,\n            OHLCChart: OHLCChart,\n            OHLCPoint: OHLCPoint,\n            WaterfallChart: WaterfallChart,\n            WaterfallSegment: WaterfallSegment,\n            XYPlotArea: XYPlotArea,\n            MousewheelZoom: MousewheelZoom,\n            ZoomSelection: ZoomSelection,\n            Pannable: Pannable,\n            ChartAxis: ChartAxis,\n            ChartPane: ChartPane,\n            ChartPlotArea: ChartPlotArea,\n            findAxisByName: findAxisByName,\n            anyHasZIndex: anyHasZIndex,\n            appendIfNotNull: appendIfNotNull,\n            areNumbers: areNumbers,\n            bindSegments: bindSegments,\n            categoriesCount: categoriesCount,\n            countNumbers: countNumbers,\n            equalsIgnoreCase: equalsIgnoreCase,\n            evalOptions: evalOptions,\n            filterSeriesByType: filterSeriesByType,\n            getDateField: getDateField,\n            getField: getField,\n            hasGradientOverlay: hasGradientOverlay,\n            hasValue: hasValue,\n            isDateAxis: isDateAxis,\n            segmentVisible: segmentVisible,\n            singleItemOrArray: singleItemOrArray,\n            createOutOfRangePoints: createOutOfRangePoints\n          });\n        })(window.kendo.jQuery);\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    13298:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../../kendo.color\");\n      /***/\n    },\n\n    /***/\n    33877:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../../kendo.core\");\n      /***/\n    },\n\n    /***/\n    32549:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../../kendo.dataviz.core\");\n      /***/\n    },\n\n    /***/\n    79174:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../../kendo.drawing\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(55038);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","$","window","kendo","dataviz","Class","isNumber","datavizConstants","constants","MAX_VALUE","MIN_VALUE","VALUE","CENTER","TOP","BOTTOM","LEFT","WHITE","CIRCLE","X","Y","RIGHT","BLACK","DATE","DEFAULT_PRECISION","ARC","defined","getter","isArray","ChartElement","Point","Box","alignPathToPixel","setDefaultOptions","inArray","isFunction","valueOrDefault","isObject","deepExtend","last","eventElement","getTemplate","TextBox","ShapeElement","getSpacing","CurveProcessor","append","isString","parseDate","styleValue","CategoryAxis","BoxElement","round","limitValue","grep","elementStyles","hasClasses","bindEvents","services","unbindEvents","support","drawing","Path","Animation","AnimationFactory","Group","Color","geometry","GeometryPoint","transform","ChartAxis","extend","init","axis","_axis","options","value","point","getCategory","getValue","slot","from","to","limit","range","valueRange","findAxisByName","name","axes","idx","length","prepareUserOptions","ChartPane","pane","visual","chartsVisual","chartContainer","_pane","ChartPlotArea","plotArea","_plotArea","backgroundVisual","_bgVisual","countNumbers","values","count","i","num","Aggregates","min","Math","max","sum","sumOrNull","result","avg","first","getField","field","row","get","SeriesBinder","_valueFields","_otherFields","_nullValue","_undefinedValue","register","seriesTypes","valueFields","otherFields","this$1","type","_makeValue","canonicalFields","series","concat","bindPoint","pointIx","item","data","pointData","fields","Array","fieldData","slice","_bindFromArray","srcValueFields","sourceFields","srcPointFields","_bindFromObject","initialValue","fieldName","array","object","srcFields","srcFieldName","sourceFieldName","push","current","STD_ERR","STD_DEV","percentRegex","standardDeviationRegex","RegExp","ErrorRangeCalculator","errorValue","initGlobalRanges","deviationMatch","exec","valueGetter","createValueGetter","average","getAverage","deviation","getStandardDeviation","multiple","parseFloat","errorRange","low","high","globalRange","indexOf","standardError","getStandardError","binder","index","OBJECT","getErrorRange","pointValue","percentValue","abs","Error","sqrt","isSample","total","squareDifferenceSum","pow","browser","INITIAL_ANIMATION_DURATION","FADEIN","GLASS","BORDER_BRIGHTNESS","TOOLTIP_OFFSET","START_SCALE","msie","ERROR_LOW_FIELD","ERROR_HIGH_FIELD","X_ERROR_LOW_FIELD","X_ERROR_HIGH_FIELD","Y_ERROR_LOW_FIELD","Y_ERROR_HIGH_FIELD","LINE_MARKER_SIZE","ZERO","INTERPOLATE","GAP","ABOVE","BELOW","SMOOTH","STEP","AREA","BAR","BOX_PLOT","BUBBLE","BULLET","CANDLESTICK","COLUMN","DONUT","FUNNEL","HEATMAP","HORIZONTAL_WATERFALL","LINE","OHLC","PIE","POLAR_AREA","POLAR_LINE","POLAR_SCATTER","RADAR_AREA","RADAR_COLUMN","RADAR_LINE","RANGE_AREA","RANGE_BAR","RANGE_COLUMN","SCATTER","SCATTER_LINE","VERTICAL_AREA","VERTICAL_BOX_PLOT","VERTICAL_BULLET","VERTICAL_LINE","VERTICAL_RANGE_AREA","WATERFALL","EQUALLY_SPACED_SERIES","LEGEND_ITEM_CLICK","LEGEND_ITEM_HOVER","LEGEND_ITEM_LEAVE","SERIES_CLICK","SERIES_HOVER","SERIES_OVER","SERIES_LEAVE","PLOT_AREA_CLICK","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","DRAG","DRAG_END","DRAG_START","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","RENDER","SHOW_TOOLTIP","HIDE_TOOLTIP","PANE_RENDER","LOGARITHMIC","CATEGORY","INSIDE_END","INSIDE_BASE","OUTSIDE_END","MOUSEWHEEL","MOUSEWHEEL_DELAY","MOUSEWHEEL_ZOOM_RATE","DEFAULT_ERROR_BAR_WIDTH","ErrorBarBase","isVertical","chart","fn","call","reflow","targetBox","endCaps","getAxis","valueBox","getSlot","centerBox","center","capsWidth","getCapsWidth","capValue","x","y","capStart","capEnd","linePoints","y1","y2","box","x1","x2","boxSize","width","height","floor","createVisual","rect","toRect","sender","getSender","color","line","createDefaultVisual","defaultVisual","ref","lineOptions","stroke","dashType","moveTo","lineTo","animation","delay","zIndex","CategoricalErrorBar","seriesValueAxis","MAX_EXPAND_DEPTH","evalOptions","context","state","dryRun","defaults","depth","needsEval","excluded","property","hasOwnProperty","propValue","categoriesCount","seriesCount","categories","CategoricalChart","chartService","categoryAxis","seriesCategoryAxis","valueAxisRanges","points","categoryPoints","seriesPoints","seriesOptions","_evalSeries","render","traverseDataPoints","addValue","bind","pointOptions","seriesIx","pointType","prototype","vertical","invertAxes","plotValue","isStacked100","categoryIx","otherValues","categorySum","other","stack","otherStack","group","plotRange","startValue","isStacked","positive","prevValue","isStackedBar","STRING","otherValue","valueAxis","axisCrossingValue","categoryAxisCrossingValue","convertableToNumber","stackLimits","axisName","stackName","pIx","isFinite","updateStackRange","chartSeries","limitsCache","key","limits","errorTotals","negative","sparseArrayLimits","addErrorBar","errorBars","lowValue","highValue","seriesErrorRanges","addPointErrorBar","stackedErrorRange","updateRange","errorBar","createPoint","owner","noteText","dataItem","evalPointOptions","category","_defaults","doEval","axisRange","namedValueAxes","categorySlots","chartPoints","currentSeries","categorySlot","valueSlot","pointSlot","aboveAxis","stackValue","percentage","reflowPoint","visible","reflowCategories","clip","limitPoints","limitPoint","limittedSlot","limitSlot","equals","reverse","crossingValues","axisCrossingValues","axisIndex","slotX","slotY","callback","_outOfRangeCallback","seriesIx$1","currentCategory","categoryAt","_bindPoint","seriesIx$2","outOfRangePoint","_bindCache","bindCache","formatPointValue","format","auto","PointEventsMixin","click","e","trigger","eventArgs","hover","over","out","runningTotal","element","originalEvent","NoteMixin","createNote","notes","text","label","note","Note","LinePoint","tooltipTracking","markers","labels","_rendered","size","marker","createMarker","labelTemplate","labelText","formatValue","align","vAlign","margin","left","right","markerBorder","background","border","brightness","toHex","rotation","opacity","markerBox","_childBox","childBox","clone","reflowLabel","noteTargetBox","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","paddingBox","halfSize","Rect","tooltipAnchor","clipBox","showTooltip","overlaps","horizontalAlign","verticalAlign","horizontal","overlapsBox","unclipElements","noclip","padding","HIGHLIGHT_ZINDEX","LineSegment","toGeometryPoints","customVisual","segmentVisual","fromPoints","closed","close","aliasFor","coords","parent","getNearestPoint","StepLineMixin","calculateStepPoints","justified","stepAxis","stepDir","dir","previousPoint","toGeometryPoint","stepPoint","lintPoint","StepLineSegment","SplineSegment","curveProcessor","segments","process","curve","LineChartMixin","renderSegments","lastSegment","_segments","sortedPoints","sortPoints","pointCount","seriesMissingValues","createSegment","_addSegment","children","unshift","segment","missingValues","assumeZero","target","allPoints","nearestPointDistance","nearestPoint","pointBox","pointDistance","distanceTo","ClipAnimation","setup","_setEnd","step","pos","interpolateValue","topRight","bottomRight","suspend","setX","resume","duration","anyHasZIndex","elements","ClipAnimationMixin","createAnimation","root","getRoot","transitions","clipPath","fromRect","_setChildrenAnimation","animationPoints","LineChart","style","supportsPointInactiveOpacity","AreaSegment","prevSegment","stackPoints","createFill","fill","createStroke","lineCap","strokeSegments","_strokeSegments","createStrokeSegments","segmentsFromPoints","stackSegments","createStackSegments","map","Segment","hasStackSegment","fillSegments","hasStackSegments","fillToAxes","fillPath","crossingValue","endSlot","firstPoint","lastPoint","end","StepAreaSegment","SplineAreaSegment","controlOut","controlIn","AreaChart","previousSegment","_gapStackPoints","_stackPoints","stackPoint","startIdx","endIdx","pointOffset","_outOfRangeMinPoint","currentSeriesIx","_previousSegmentPoint","gapStackPoint","_createGapStackPoint","segmentIx","seriesIdx","AxisGroupRangeTracker","axisRanges","update","chartAxisRanges","chartRange","reset","query","BarLabel","content","textBox","textOptions","labelBox","contentBox","top","bottom","alignToClipBox","start","parentBox","hasGradientOverlay","overlay","gradient","BAR_ALIGN_MIN_WIDTH","Bar","createLabel","rectVisual","createRect","strokeOpacity","path","getBorderColor","lineJoin","createGradientOverlay","baseColor","_brightness","borderColor","forEach","forEachReverse","ClusterLayout","rtl","gap","spacing","slots","slotSize","child","StackWrap","positionAxis","childrenCount","currentChild","snapTo","wrap","BarChart","clusterType","stackType","labelOptions","negativeColor","cluster","stackWrap","getStackWrap","stackGroup","wraps","_stackGroup","zeroSlot","stackAxis","childrenLength","_setAnimationOptions","pointVisual","origin","Candlestick","ocSlot","open","lhSlot","realBody","mid","lines","reflowNote","_mainVisual","mainVisual","createOverlay","createBody","createLines","container","body","set","drawLines","lineStyle","normalColor","tooltip","areNumbers","CandlestickChart","valueParts","splitValue","hasValue","downColor","parts","BoxPlot","whiskerSlot","boxSlot","q1","q3","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","meanPoints","calcMeanPoints","whiskerPoints","calcWhiskerPoints","medianPoints","calcMedianPoints","renderOutliers","outliers","outerFence","outlierValue","extremes","markersBorder","shape","reflowOutliers","move","whiskers","CROSS","VerticalBoxPlot","BoxPlotChart","filterOutliers","items","ScatterErrorBar","seriesAxes","ScatterChart","_initFields","xAxisRanges","yAxisRanges","valueErrorField","lowField","highField","createMissingValue","intlService","intl","xAxisName","xAxis","yAxisName","yAxis","xAxisRange","yAxisRange","namedXAxes","axisX","namedYAxes","axisY","currentSeriesPoints","ref$1","Bubble","radius","highlightGroup","Circle","createGradient","stops","offset","BubbleChart","_maxSize","negativeValues","updateBubblesSize","pointsCount","animationOptions","minSize","maxSize","minR","maxR","minArea","PI","maxArea","areaRange","areaRatio","area","baseZIndex","Target","Bullet","targetValueSlot","targetSlotX","targetSlotY","targetSlot","bodyVisual","create","BulletChart","wrapData","bulletOptions","bullet","isNaN","seriesItem","BaseTooltip","getStyle","pointColor","backgroundColor","font","borderWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","show","tooltipOptions","isDark","className","notify","hide","destroy","CrosshairTooltip","crosshair","formatService","initAxisName","showAt","stickyMode","formattedValue","dateFormats","baseUnit","getAnchor","ref_options","lineBox","bbox","bottomLeft","translate","topLeft","Crosshair","moveLine","getBox","dim","lineStart","lineEnd","pointCategoryIndex","axisLineBox","currentAxis","ChartContainer","shouldClip","_clipBox","chartsBox","clipRect","unclipLabels","stackRoot","charts","j","isStackRoot","Pane","id","paneID","createTitle","titleOptions","title","Title","buildTitle","appendAxis","appendAxisAt","splice","appendChart","empty","removeAxis","i$1","removeChart","pop","visualStyle","renderComplete","createGridLines","clipRoot","allAxes","vGridLines","hGridLines","gridLines","altAxis","refresh","clear","renderVisual","notifyRender","axisValueField","length$1","idx$1","axis$1","lineBox$1","service","getService","paneIndex","ID","shrinkToFit","appendIfNotNull","segmentVisible","pointVisibility","bindSegments","equalsIgnoreCase","a","b","toLowerCase","filterSeriesByType","types","getDateField","isDateAxis","axisOptions","sampleCategory","dateCategory","Date","singleItemOrArray","AREA_REGEX","test","hasValue$1","findNext","getter$$1","hasItem","pointHasValue","outPoint","createOutOfRangePoints","hasMinPoint","hasMaxPoint","minPoint","maxPoint","_outOfRangeMaxPoint","PlotAreaBase","initFields","initSeries","legend","crosshairs","originalOptions","createPanes","createCrosshairs","paneDefaults","paneOptions","panes","panesLength","currentPane","crosshairOptions","currentCrosshair","removeCrosshairs","hideCrosshairs","findPane","matchingPane","findPointPane","containsPoint","axisToRemove","filteredAxes","chartToRemove","filteredCharts","addToLegend","inactiveItems","inactiveItemsLabels","seriesVisible","visibleInLegend","itemLabelOptions","markerColor","active","groupAxes","xAxes","yAxes","paneIx","paneAxes","axisIx","any","groupSeriesByPane","seriesByPane","seriesPaneName","filterVisibleSeries","unpad","reflowPanes","detachLabels","reflowAxes","reflowCharts","redraw","panesArray","cleanGradients","crossingAxes","valuesToAdd","defaultValue","alignAxisTo","targetAxis","targetCrossingValue","slotEdge","targetEdge","axisBox","alignAxes","xAnchor","yAnchor","xAnchorCrossings","yAnchorCrossings","leftAnchors","rightAnchors","topAnchors","bottomAnchors","paneId","paneAnchor","anchorCrossings","_overlap","_mirrored","mirror","pane$1","paneId$1","visible$1","anchor$1","anchorCrossings$1","COORD_PRECISION","shrinkAxisWidth","axisGroupBox","overflowX","shrink","shrinkAxisHeight","shrinked","overflowY","fitAxes","offsetX","paneBox","offsetY","currentAxis$1","reflowPaneAxes","autoRotateAxisLabels","groupedAxes","allPaneAxes","rotated","autoRotateLabels","chartPane","remainingHeight","remainingPanes","autoHeightPanes","percents","parseInt","currentPane$1","i$2","currentPane$2","backgroundBox","axesCount","axisA","axisB","chartsBoxes","boxes","addBackgroundPaths","multipath","paths","backgroundContainsPoint","isTransparent","bg","MultiPath","appendVisual","pointsByCategoryIndex","categoryIndex","pointsBySeriesIndex","seriesIndex","filterPoints","pointsBySeriesName","findPoint","paneByPoint","detachAxisGroupLabels","labelAxisCount","labelAxis","createLabelAxis","onAxis","END","START","edge","plotBands","isSingleAxis","some","reduce","acc","PlotAreaEventsMixin","_dispatchEvent","SeriesAggregator","defaultAggregates","seriesFields","_seriesFields","rootAggregate","aggregate","_series","_binder","fieldAggregate","canonicalName","aggregatePoints","srcPoints","_bindPoints","firstDataItem","dataItems","srcValues","_bindField","setValue","parentObj","split","shift","DefaultAggregates","aggregates","seriesType","RangeBar","fromOptions","toOptions","labelFrom","_createLabel","labelTo","RangeBarChart","plotLimits","RangeLinePoint","AUTO","DEFAULT_FROM_FORMAT","DEFAULT_TO_FORMAT","RangeAreaPoint","initLabelsFormat","fromPoint","toPoint","copyFields","fromBox","toBox","positionLabels","fromLabelPosition","toLabelPosition","RangeAreaSegment","toPoints","fromSegments","toPath","fromPath","SplineRangeAreaSegment","createCurveSegments","StepRangeAreaSegment","RangeAreaChart","segmentType","fromSlot","toSlot","OHLCPoint","oPoints","cPoints","lhPoints","oSlot","cSlot","OHLCChart","WaterfallSegment","WaterfallChart","createSegments","totalCategories","summary","prevPoint","AREA_SERIES","OUT_OF_RANGE_SERIES","CategoricalPlotArea","namedCategoryAxes","valueAxisRangeTracker","stack100","createCategoryAxes","aggregateCategories","createCategoryAxesLabels","createCharts","createValueAxes","paneSeries","visibleSeries","groups","groupSeriesByCategoryAxis","groupIx","createChartGroup","createAreaChart","createRangeAreaChart","createBarChart","createRangeBarChart","createBulletChart","createCandlestickChart","createBoxPlotChart","createOHLCChart","createWaterfallChart","createLineChart","srcSeries","processedSeries","_currentPointsCache","_seriesPointsCache","axisPane","dateAxis","categoryField","aggregateSeries","filterSeries","dataLength","_seriesMax","currentRangeIndices","outOfRangePoints","clearSeriesPointsCache","seriesSourcePoints","categoriesHash","srcCategories","srcData","getFn","mapCategories","totalIndex","aggregator","categoryItem","categoryIdx","totalCount","categoriesToAdd","defaultPaneName","paneName","stackableChartOptions","firstSeries","categoryAxes","unique","axisSeries","groupSeries","barChart","rangeColumnChart","bulletChart","lineChart","areaChart","rangeAreaChart","waterfallChart","axisRequiresRounding","categoryAxisName","categoryAxisIndex","centeredSeries","seriesAxis","aggregatedAxis","createLabels","definitions","isJustified","DateCategoryAxis","primaryAxis","tracker","defaultRange","baseOptions","roundToMajorUnit","defaultAxisRange","axisType","LogarithmicAxis","NumericAxis","eventType","_eventCoordinates","pointPane","updateAxisOptions","targetOptions","axesOptions","s","Highlight","_points","arrayPoints","toggleHighlight","hasHighlight","togglePointHighlight","toggleHandler","toggle","preventDefault","_defaultPrevented","isHighlighted","acceptKey","mouseKey","event","accept","ctrlKey","shiftKey","altKey","toChartAxisRanges","ranges","Pannable","_active","_panAxes","pan","delta","lock","updatedAxes","limitRange","ZoomSelection","createElement","marquee","_marquee","document","marqueeColor","appendChild","removeElement","parentNode","removeChild","setStyles","styles","zoomPane","_zoomPane","_elementOffset","_zoomPaneClipBox","pageX","pageY","chartElement","elementOffset","_selectionPosition","elementOffset$$1","selectionPosition","_updateAxisRanges","zoom","pointsRange","startLocation","location","util","limitValue$1","MIN_RATE","MAX_RATE","DEFAULT_RATE","MousewheelZoom","rate","updateRanges","zoomRange","LegendLayout","Layout","lineSpacing","orientation","alignItems","legendItem","clippedBBox","rectToBox","addVisual","LegendItem","createContainer","FloatElement","markerOptions","cursor","eventSink","_itemOverlay","widget","args","_legendItemHover","pointIndex","_unsetActivePoint","renderChildren","HORIZONTAL","POINTER","CUSTOM","Legend","createContainers","createLegendTitle","createItems","userAlign","hasTitle","itemsContainer","innerElement","hasItems","legendBox","containerCustomReflow","containerReflow","alignTarget","containerBox","createTitleLayout","appendTitleLayoutContent","layout","Boolean","PlotAreaFactory","_registry","registry","match","entry","ZOOM_ACCELERATION","SELECTOR_HEIGHT_ADJUST","createDiv","closestHandle","Selection","observer","_dateAxis","initOptions","offsetHeight","createElements","_index","onPane","wrapper","direction","selection","leftMask","rightMask","leftHandle","rightHandle","selectionStyles","leftHandleHeight","rightHandleHeight","borderLeftWidth","borderRightWidth","cssText","mousewheel","_mousewheelHandler","_mousewheel","obj","_domEvents","DomEventsBuilder","stopPropagation","_start","_move","_end","tap","_tap","press","_press","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","clearTimeout","_mwTimeout","_state","_rangeEventArgs","_value","moveTarget","handle","addClass","oldRange","span","scale","removeClass","rightClick","which","mousewheelDelta","expand","setTimeout","p0","_toModelCoordinates","touches","p1","_slot","leftMaskWidth","rightMaskWidth","distance","fromValue","toValue","zDir","relative","minDelta","maxDelta","Tooltip","_current","SharedTooltip","tooltipPoints","_slotAnchor","_defaultAnchor","shared","categoryText","categoryFormat","slotCenter","centerPoint","BarChartAnimation","fromScale","abort","scaleX","scaleY","BubbleAnimation","easing","FadeInAnimation","fadeTo","PieAnimation","ScatterLineChart","missingValue","XYPlotArea","xAxisRangeTracker","yAxisRangeTracker","filteredSeries","createScatterChart","createScatterLineChart","createBubbleChart","createAxes","xAxisOptions","yAxisOptions","createXYAxis","namedAxes","isLog","typeSamples","seriesAxisName","firstPointValue","inferredDate","DateValueAxis","xAxesOptions","yAxesOptions","axisPane$1","xValues","yValues","currentValue","updateAxisOptions$1","PieSegment","sector","autoTextColor","themeLabels","theme","seriesDefaults","animationDelay","labelsOptions","labelsDistance","angle","middle","labelHeight","labelWidth","lp","startAngle","innerRadius","endAngle","createSegmentVisual","borderOptions","fallbackFill","userSpace","singleSegment","ShapeBuilder","createRing","midAndle","midPoint","tooltipAlignment","RAD_30","rad","RAD_60","radians","sine","sin","cosine","cos","DEFAULT_FONT","PieChartMixin","createLegendItem","legendOptions","pointVisible","legendItems","PIE_SECTOR_ANIM_DELAY","PieChart","seriesColors","colorsCount","anglePerValue","constantAngle","currentAngle","explode","Ring","evalSegmentOptions","segmentOptions","seriesConfigs","space","minWidth","halfMinWidth","defaultPadding","newBox","newBoxCenter","boxCenter","leftSideLabels","rightSideLabels","seriesConfig","setRadius","sort","labelComparator","leftLabelsReflow","rightLabelsReflow","distances","distanceBetweenLabels","distributeLabels","lr","firstBox","secondBox","remaining","_takeDistance","reflowLabels","amount","available","labelsCount","labelDistance","boxY","boxX","hAlignLabel","connectors","_connectorLines","connectorsColor","connectorLine","sr","crossing","intersection","pointInCircle","find","autoFit","pieCenter","bboxBottom","reverseValue","second","originalX","sector_center","cx","cy","t","a1","a2","b1","b2","uat","ub","ua","PiePlotArea","createPieChart","pieChart","DonutSegment","DONUT_SECTOR_ANIM_DELAY","DonutChart","totalSize","seriesWithoutSize","holeSize","currentSize","currentSeries$1","DonutPlotArea","createDonutChart","donutChart","DEFAULT_PADDING","PolarPlotAreaBase","createPolarAxis","createValueAxis","polarAxis","valueAxisOptions","axisDefaultRange","RadarLogarithmicAxis","RadarNumericAxis","valueAxisBox","heightDiff","PolarScatterChart","valueRadius","onCircle","PolarLineChart","SplinePolarAreaSegment","_polarAxisCenter","PolarAreaSegment","centerSegment","PolarAreaChart","_hasMissingValuesGap","xComparer","PolarPlotArea","PolarAxis","majorGridLines","minorGridLines","scatterChart","xValue","yValue","groupBySeriesIx","seriesSegments","RadarLineChart","isFirstDataPoint","isLastDataPoint","SplineRadarAreaSegment","RadarAreaSegment","RadarAreaChart","RadarSegment","RadarClusterLayout","slotAngle","slotSector","RadarStackLayout","childSector","RadarBarChart","RadarPlotArea","RadarCategoryAxis","_hasBarCharts","_isStacked100","chartOptions","FunnelSegment","chartBox","createPath","FunnelChart","labelPadding","dynamicSlopeReflow","totalHeight","firstSegment","maxSegment","lastUpperSide","previousOffset","previousHeight","nextSegment","nextPercentage","dynamicHeight","segmentSpacing","constantSlopeReflow","decreasingWidth","neckRatio","topMostWidth","finalNarrow","dynamicSlope","FunnelPlotArea","createFunnelChart","funnelChart","colorScale","minLightnessOffset","parseColor","hsl","toHSL","l","toCss","HeatmapPoint","labelColor","isRoundRect","ROUNDED_RECT","halfBorderWidth","borderRadius","HeatmapChart","setRange","indexX","indexY","xRange","yRange","ref$2","xIndex","yIndex","xIn","yIn","HeatmapPlotArea","bindCategories","createAxisLabels","xCategories","createHashSet","yCategories","has","add","createHeatmapChart","firstCategory","updateAxisOptions$2","COLOR","FIRST","FROM","MAX","MIN","NOTE_TEXT","SUMMARY_FIELD","TO","errorLow","errorHigh","AXIS_NAMES","MOUSEMOVE","CONTEXTMENU","MOUSELEAVE","MOUSEMOVE_DELAY","Chart","userOptions","themeOptions","observers","addObserver","ChartService","_initElement","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","FontLoader","preloadFonts","fontLoaded","_destroyed","_redraw","_attachEvents","_setElementClass","firstChild","seriesCopies","resolveAxisAliases","applyDefaults","applySeriesColors","getSize","chartArea","offsetWidth","resize","force","_size","hasSize","_resize","_selections","_destroySelections","_setupSelection","_noTransitionsRedraw","_model","findPaneByName","findPaneByIndex","filter","seriesName","categoryName","pointByCategoryName","togglePointsHighlight","_highlight","_sharedTooltip","_tooltip","hideTooltip","surface","_surfaceWrap","elementSize","renderAs","_destroySurface","Surface","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","model","_getModel","_destroyView","traverse","draw","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","_zoomSelection","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","domEvents","toggleDrag","toggleZoom","_createSharedTooltip","applyAxisDefaults","applySeriesDefaults","colors","seriesColor","_createPlotArea","RootElement","_modelOptions","DEFAULT_WIDTH","DEFAULT_HEIGHT","skipSeries","selections","select","_selectStart","_select","_selectEnd","_clickHandler","_click","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","throttle","removeObserver","eventNames","_toDocumentCoordinates","isDefaultPrevented","_shouldAttachMouseMove","obj$1","_hoveredPoint","hovered","cancel","_stopChartHandlers","_gestureDistance","suspendTracking","_zooming","resumeTracking","mousewheelZoom","previousGestureDistance","scaleDelta","_drawingChartElement","leave","_startNavigation","_suppressHover","panning","ranges$1","translateRange","_endNavigation","_mousewheelZoomRate","prevented","totalDelta","scaleRange","chartEvent","_getChartElement","eventTarget","closest","coordinates","eventCoordinates","_elementPadding","_padding","clientX","clientY","inverseTransform","elementScale","invert","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","activePoint","_activePoint","multipleSeries","hasInactiveOpacity","_hasInactiveOpacity","_updateHoveredPoint","_displayTooltip","_displayInactiveOpacity","_activeChartInstance","_updateSeriesOpacity","_applySeriesOpacity","highlightPoints","chartInstance","_chartInstanceFromPoint","inactivePoints","_getInactivePoints","_getInactiveOpacityForSeries","_getAllPointsOfType","constructor","hoveredPoint","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","activeSeries","shouldHighlight","hasDefaultInactiveOpacity","defaultInactiveOpacity","seriesInactiveOpacity","DEFAULT_SERIES_OPACITY","_mouseMoveTrackHandler","_mouseMoveTracking","seriesPoint","_trackCrosshairs","overPlotArea","_tooltipCategoryIx","_sharedHighlight","pointArgs","hoverArgs","hideElements","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","autoBind","bindCategoryAxisFromSeries","seriesLength","uniqueCategories","HashMap","bindable","dataIx","dataRow","uniqueDates","dateComparer","transpose","_isBindable","transitionsState","updateMouseMoveHandler","applyOptions","setOptions","setDirection","setIntlService","noTransitionsRedraw","unbind","aliases","alias","themeAxisDefaults","axisDefaults","mapAxisOptions","axisColor","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","bar","column","rangeColumn","verticalLine","pie","donut","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","sortDates","dates","comparer","srcDates","rows","rowCount","rowIx","colCount","colIx","DATA_FIELDS","fieldValue","originalValue","nullValue","jQuery","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/client/app-router/node_modules/@progress/kendo-ui/js/dataviz/chart/kendo-chart.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 55038:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n        __webpack_require__(33877),\n        __webpack_require__(13298),\n        __webpack_require__(79174),\n        __webpack_require__(32549)\n    ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\n(function($) {\n/* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar dataviz = kendo.dataviz;\nvar Class = dataviz.Class;\nvar isNumber = dataviz.isNumber;\nvar datavizConstants = dataviz.constants;\nvar MAX_VALUE = datavizConstants.MAX_VALUE;\nvar MIN_VALUE = datavizConstants.MIN_VALUE;\nvar VALUE = datavizConstants.VALUE;\nvar CENTER = datavizConstants.CENTER;\nvar TOP = datavizConstants.TOP;\nvar BOTTOM = datavizConstants.BOTTOM;\nvar LEFT = datavizConstants.LEFT;\nvar WHITE = datavizConstants.WHITE;\nvar CIRCLE = datavizConstants.CIRCLE;\nvar X = datavizConstants.X;\nvar Y = datavizConstants.Y;\nvar RIGHT = datavizConstants.RIGHT;\nvar BLACK = datavizConstants.BLACK;\nvar DATE = datavizConstants.DATE;\nvar DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\nvar ARC = datavizConstants.ARC;\nvar defined = dataviz.defined;\nvar getter = dataviz.getter;\nvar isArray = dataviz.isArray;\nvar ChartElement = dataviz.ChartElement;\nvar Point = dataviz.Point;\nvar Box = dataviz.Box;\nvar alignPathToPixel = dataviz.alignPathToPixel;\nvar setDefaultOptions = dataviz.setDefaultOptions;\nvar inArray = dataviz.inArray;\nvar isFunction = dataviz.isFunction;\nvar valueOrDefault = dataviz.valueOrDefault;\nvar isObject = dataviz.isObject;\nvar deepExtend = dataviz.deepExtend;\nvar last = dataviz.last;\nvar eventElement = dataviz.eventElement;\nvar getTemplate = dataviz.getTemplate;\nvar TextBox = dataviz.TextBox;\nvar ShapeElement = dataviz.ShapeElement;\nvar getSpacing = dataviz.getSpacing;\nvar CurveProcessor = dataviz.CurveProcessor;\nvar append = dataviz.append;\nvar isString = dataviz.isString;\nvar parseDate = dataviz.parseDate;\nvar styleValue = dataviz.styleValue;\nvar CategoryAxis = dataviz.CategoryAxis;\nvar BoxElement = dataviz.BoxElement;\nvar round = dataviz.round;\nvar limitValue = dataviz.limitValue;\nvar grep = dataviz.grep;\nvar elementStyles = dataviz.elementStyles;\nvar hasClasses = dataviz.hasClasses;\nvar bindEvents = dataviz.bindEvents;\nvar services = dataviz.services;\nvar unbindEvents = dataviz.unbindEvents;\nvar support = kendo.support;\nvar drawing = kendo.drawing;\nvar Path = drawing.Path;\nvar Animation = drawing.Animation;\nvar AnimationFactory = drawing.AnimationFactory;\nvar Group = drawing.Group;\nvar Color = kendo.Color;\nvar geometry = kendo.geometry;\nvar GeometryPoint = geometry.Point;\nvar transform = geometry.transform;\n\nvar ChartAxis = Class.extend({\n    init: function(axis) {\n\n        this._axis = axis;\n        this.options = axis.options;\n    },\n\n    value: function(point) {\n        var axis = this._axis;\n        var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n\n        return value;\n    },\n\n    slot: function(from, to, limit) {\n        if (limit === void 0) { limit = true; }\n\n        return this._axis.slot(from, to, limit);\n    },\n\n    range: function() {\n        return this._axis.range();\n    },\n\n    valueRange: function() {\n        return this._axis.valueRange();\n    }\n});\n\nfunction findAxisByName(name, axes) {\n    for (var idx = 0; idx < axes.length; idx++) {\n        if (axes[idx].options.name === name) {\n            axes[idx].prepareUserOptions();\n            return new ChartAxis(axes[idx]);\n        }\n    }\n}\n\nvar ChartPane = kendo.Class.extend({\n    init: function(pane) {\n        this.visual = pane.visual;\n        this.chartsVisual = pane.chartContainer.visual;\n        this._pane = pane;\n    },\n\n    findAxisByName: function(name) {\n        return findAxisByName(name, this._pane.axes);\n    }\n});\n\nvar ChartPlotArea = Class.extend({\n    init: function(plotArea) {\n\n        this._plotArea = plotArea;\n        this.visual = plotArea.visual;\n        this.backgroundVisual = plotArea._bgVisual;\n    }\n});\n\nfunction countNumbers(values) {\n    var length = values.length;\n    var count = 0;\n\n    for (var i = 0; i < length; i++) {\n        var num = values[i];\n        if (isNumber(num)) {\n            count++;\n        }\n    }\n\n    return count;\n}\n\nvar Aggregates = {\n    min: function(values) {\n        var length = values.length;\n        var min = MAX_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                min = Math.min(min, value);\n            }\n        }\n\n        return min === MAX_VALUE ? values[0] : min;\n    },\n\n    max: function(values) {\n        var length = values.length;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                max = Math.max(max, value);\n            }\n        }\n\n        return max === MIN_VALUE ? values[0] : max;\n    },\n\n    sum: function(values) {\n        var length = values.length;\n        var sum = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                sum += value;\n            }\n        }\n\n        return sum;\n    },\n\n    sumOrNull: function(values) {\n        var result = null;\n\n        if (countNumbers(values)) {\n            result = Aggregates.sum(values);\n        }\n\n        return result;\n    },\n\n    count: function(values) {\n        var length = values.length;\n        var count = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                count++;\n            }\n        }\n\n        return count;\n    },\n\n    avg: function(values) {\n        var count = countNumbers(values);\n        var result = values[0];\n\n        if (count > 0) {\n            result = Aggregates.sum(values) / count;\n        }\n\n        return result;\n    },\n\n    first: function(values) {\n        var length = values.length;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                return value;\n            }\n        }\n\n        return values[0];\n    }\n};\n\nfunction getField(field, row) {\n    if (row === null) {\n        return row;\n    }\n\n    var get = getter(field, true);\n    return get(row);\n}\n\nvar SeriesBinder = Class.extend({\n    init: function() {\n\n        this._valueFields = {};\n        this._otherFields = {};\n        this._nullValue = {};\n        this._undefinedValue = {};\n    },\n\n    register: function(seriesTypes, valueFields, otherFields) {\n        var this$1 = this;\n        if (valueFields === void 0) { valueFields = [ VALUE ]; }\n        if (otherFields === void 0) { otherFields = {}; }\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            var type = seriesTypes[i];\n\n            this$1._valueFields[type] = valueFields;\n            this$1._otherFields[type] = otherFields;\n            this$1._nullValue[type] = this$1._makeValue(valueFields, null);\n            this$1._undefinedValue[type] = this$1._makeValue(valueFields, undefined);\n        }\n    },\n\n    canonicalFields: function(series) {\n        return this.valueFields(series).concat(this.otherFields(series));\n    },\n\n    valueFields: function(series) {\n        return this._valueFields[series.type] || [ VALUE ];\n    },\n\n    otherFields: function(series) {\n        return this._otherFields[series.type] || [ VALUE ];\n    },\n\n    bindPoint: function(series, pointIx, item) {\n        var data = series.data;\n        var pointData = defined(item) ? item : data[pointIx];\n        var result = { valueFields: { value: pointData } };\n        var valueFields = this.valueFields(series);\n        var otherFields = this._otherFields[series.type];\n        var fields, value;\n\n        if (pointData === null) {\n            value = this._nullValue[series.type];\n        } else if (!defined(pointData)) {\n            value = this._undefinedValue[series.type];\n        } else if (Array.isArray(pointData)) {\n            var fieldData = pointData.slice(valueFields.length);\n            value = this._bindFromArray(pointData, valueFields);\n            fields = this._bindFromArray(fieldData, otherFields);\n        } else if (typeof pointData === \"object\") {\n            var srcValueFields = this.sourceFields(series, valueFields);\n            var srcPointFields = this.sourceFields(series, otherFields);\n\n            value = this._bindFromObject(pointData, valueFields, srcValueFields);\n            fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n        }\n\n        if (defined(value)) {\n            if (valueFields.length === 1) {\n                result.valueFields.value = value[valueFields[0]];\n            } else {\n                result.valueFields = value;\n            }\n        }\n\n        result.fields = fields || {};\n\n        return result;\n    },\n\n    _makeValue: function(fields, initialValue) {\n        var value = {};\n        var length = fields.length;\n\n        for (var i = 0; i < length; i++) {\n            var fieldName = fields[i];\n            value[fieldName] = initialValue;\n        }\n\n        return value;\n    },\n\n    _bindFromArray: function(array, fields) {\n        var value = {};\n\n        if (fields) {\n            var length = Math.min(fields.length, array.length);\n\n            for (var i = 0; i < length; i++) {\n                value[fields[i]] = array[i];\n            }\n        }\n\n        return value;\n    },\n\n    _bindFromObject: function(object, fields, srcFields) {\n        if (srcFields === void 0) { srcFields = fields; }\n\n        var value = {};\n\n        if (fields) {\n            var length = fields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                var srcFieldName = srcFields[i];\n                if (srcFieldName !== null) {\n                    value[fieldName] = getField(srcFieldName, object);\n                }\n            }\n        }\n\n        return value;\n    },\n\n    sourceFields: function(series, canonicalFields) {\n        var sourceFields = [];\n\n        if (canonicalFields) {\n            var length = canonicalFields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = canonicalFields[i];\n                var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n\n                sourceFields.push(series[sourceFieldName] !== null ? (series[sourceFieldName] || fieldName) : null);\n            }\n        }\n\n        return sourceFields;\n    }\n});\n\nSeriesBinder.current = new SeriesBinder();\n\nvar STD_ERR = \"stderr\";\nvar STD_DEV = \"stddev\";\nvar percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\nvar standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n\nvar ErrorRangeCalculator = Class.extend({\n    init: function(errorValue, series, field) {\n\n        this.initGlobalRanges(errorValue, series, field);\n    },\n\n    initGlobalRanges: function(errorValue, series, field) {\n        var data = series.data;\n        var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n        if (deviationMatch) {\n            this.valueGetter = this.createValueGetter(series, field);\n\n            var average = this.getAverage(data);\n            var deviation = this.getStandardDeviation(data, average, false);\n            var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n            var errorRange = { low: average.value - deviation * multiple, high: average.value + deviation * multiple };\n\n            this.globalRange = function() {\n                return errorRange;\n            };\n        } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n            this.valueGetter = this.createValueGetter(series, field);\n            var standardError = this.getStandardError(data, this.getAverage(data));\n\n            this.globalRange = function(value) {\n                return { low: value - standardError, high: value + standardError };\n            };\n        }\n    },\n\n    createValueGetter: function(series, field) {\n        var data = series.data;\n        var binder = SeriesBinder.current;\n        var valueFields = binder.valueFields(series);\n        var item = defined(data[0]) ? data[0] : {};\n        var valueGetter;\n\n        if (isArray(item)) {\n            var index = field ? valueFields.indexOf(field) : 0;\n            valueGetter = getter(\"[\" + index + \"]\");\n        } else if (isNumber(item)) {\n            valueGetter = getter();\n        } else if (typeof item === datavizConstants.OBJECT) {\n            var srcValueFields = binder.sourceFields(series, valueFields);\n            valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n        }\n\n        return valueGetter;\n    },\n\n    getErrorRange: function(pointValue, errorValue) {\n        var low, high, value;\n\n        if (!defined(errorValue)) {\n            return null;\n        }\n\n        if (this.globalRange) {\n            return this.globalRange(pointValue);\n        }\n\n        if (isArray(errorValue)) {\n            low = pointValue - errorValue[0];\n            high = pointValue + errorValue[1];\n        } else if (isNumber(value = parseFloat(errorValue))) {\n            low = pointValue - value;\n            high = pointValue + value;\n        } else if ((value = percentRegex.exec(errorValue))) {\n            var percentValue = pointValue * (parseFloat(value[1]) / 100);\n            low = pointValue - Math.abs(percentValue);\n            high = pointValue + Math.abs(percentValue);\n        } else {\n            throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n        }\n\n        return { low: low, high: high };\n    },\n\n    getStandardError: function(data, average) {\n        return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n    },\n\n    getStandardDeviation: function(data, average, isSample) {\n        var this$1 = this;\n\n        var length = data.length;\n        var total = isSample ? average.count - 1 : average.count;\n        var squareDifferenceSum = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                squareDifferenceSum += Math.pow(value - average.value, 2);\n            }\n        }\n\n        return Math.sqrt(squareDifferenceSum / total);\n    },\n\n    getAverage: function(data) {\n        var this$1 = this;\n\n        var length = data.length;\n        var sum = 0;\n        var count = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                sum += value;\n                count++;\n            }\n        }\n\n        return {\n            value: sum / count,\n            count: count\n        };\n    }\n});\n\nvar browser = support.browser || {};\n\nvar INITIAL_ANIMATION_DURATION = 600;\nvar FADEIN = \"fadeIn\";\n\nvar GLASS = \"glass\";\nvar BORDER_BRIGHTNESS = 0.8;\nvar TOOLTIP_OFFSET = 5;\nvar START_SCALE = browser.msie ? 0.001 : 0;\nvar ERROR_LOW_FIELD = \"errorLow\";\nvar ERROR_HIGH_FIELD = \"errorHigh\";\nvar X_ERROR_LOW_FIELD = \"xErrorLow\";\nvar X_ERROR_HIGH_FIELD = \"xErrorHigh\";\nvar Y_ERROR_LOW_FIELD = \"yErrorLow\";\nvar Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\nvar LINE_MARKER_SIZE = 8;\nvar ZERO = \"zero\";\nvar INTERPOLATE = \"interpolate\";\nvar GAP = \"gap\";\nvar ABOVE = \"above\";\nvar BELOW = \"below\";\n\nvar SMOOTH = \"smooth\";\nvar STEP = \"step\";\n\nvar AREA = \"area\";\nvar BAR = \"bar\";\nvar BOX_PLOT = \"boxPlot\";\nvar BUBBLE = \"bubble\";\nvar BULLET = \"bullet\";\nvar CANDLESTICK = \"candlestick\";\nvar COLUMN = \"column\";\nvar DONUT = \"donut\";\nvar FUNNEL = \"funnel\";\nvar HEATMAP = \"heatmap\";\nvar HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\nvar LINE = \"line\";\nvar OHLC = \"ohlc\";\nvar PIE = \"pie\";\nvar POLAR_AREA = \"polarArea\";\nvar POLAR_LINE = \"polarLine\";\nvar POLAR_SCATTER = \"polarScatter\";\nvar RADAR_AREA = \"radarArea\";\nvar RADAR_COLUMN = \"radarColumn\";\nvar RADAR_LINE = \"radarLine\";\nvar RANGE_AREA = \"rangeArea\";\nvar RANGE_BAR = \"rangeBar\";\nvar RANGE_COLUMN = \"rangeColumn\";\nvar SCATTER = \"scatter\";\nvar SCATTER_LINE = \"scatterLine\";\nvar VERTICAL_AREA = \"verticalArea\";\nvar VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\nvar VERTICAL_BULLET = \"verticalBullet\";\nvar VERTICAL_LINE = \"verticalLine\";\nvar VERTICAL_RANGE_AREA = \"verticalRangeArea\";\nvar WATERFALL = \"waterfall\";\nvar EQUALLY_SPACED_SERIES = [\n    BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT,\n    BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL\n];\n\nvar LEGEND_ITEM_CLICK = \"legendItemClick\";\nvar LEGEND_ITEM_HOVER = \"legendItemHover\";\nvar LEGEND_ITEM_LEAVE = \"legendItemLeave\";\nvar SERIES_CLICK = \"seriesClick\";\nvar SERIES_HOVER = \"seriesHover\";\nvar SERIES_OVER = \"seriesOver\";\nvar SERIES_LEAVE = \"seriesLeave\";\nvar PLOT_AREA_CLICK = \"plotAreaClick\";\nvar PLOT_AREA_HOVER = \"plotAreaHover\";\nvar PLOT_AREA_LEAVE = \"plotAreaLeave\";\nvar DRAG = \"drag\";\nvar DRAG_END = \"dragEnd\";\nvar DRAG_START = \"dragStart\";\nvar ZOOM_START = \"zoomStart\";\nvar ZOOM = \"zoom\";\nvar ZOOM_END = \"zoomEnd\";\nvar SELECT_START = \"selectStart\";\nvar SELECT = \"select\";\nvar SELECT_END = \"selectEnd\";\nvar RENDER = \"render\";\nvar SHOW_TOOLTIP = \"showTooltip\";\nvar HIDE_TOOLTIP = \"hideTooltip\";\nvar PANE_RENDER = \"paneRender\";\n\nvar LOGARITHMIC = \"log\";\nvar CATEGORY = \"category\";\n\nvar INSIDE_END = \"insideEnd\";\nvar INSIDE_BASE = \"insideBase\";\nvar OUTSIDE_END = \"outsideEnd\";\n\nvar MOUSEWHEEL = \"DOMMouseScroll mousewheel\";\nvar MOUSEWHEEL_DELAY = 150;\nvar MOUSEWHEEL_ZOOM_RATE = 0.3;\n\nvar constants = {\n\tINITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n\tFADEIN: FADEIN,\n\tLEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n\tLEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n\tLEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n\tSERIES_CLICK: SERIES_CLICK,\n\tSERIES_HOVER: SERIES_HOVER,\n\tSERIES_OVER: SERIES_OVER,\n\tSERIES_LEAVE: SERIES_LEAVE,\n\tGLASS: GLASS,\n\tBORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n\tTOOLTIP_OFFSET: TOOLTIP_OFFSET,\n\tSTART_SCALE: START_SCALE,\n\tERROR_LOW_FIELD: ERROR_LOW_FIELD,\n\tERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n\tX_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n\tX_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n\tY_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n\tY_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n\tLINE_MARKER_SIZE: LINE_MARKER_SIZE,\n\tINTERPOLATE: INTERPOLATE,\n\tZERO: ZERO,\n\tSMOOTH: SMOOTH,\n\tSTEP: STEP,\n\tCATEGORY: CATEGORY,\n\tFUNNEL: FUNNEL,\n\tBAR: BAR,\n\tCANDLESTICK: CANDLESTICK,\n\tPIE: PIE,\n\tCOLUMN: COLUMN,\n\tAREA: AREA,\n\tVERTICAL_BULLET: VERTICAL_BULLET,\n\tBOX_PLOT: BOX_PLOT,\n\tOHLC: OHLC,\n\tWATERFALL: WATERFALL,\n\tLINE: LINE,\n\tBULLET: BULLET,\n\tVERTICAL_LINE: VERTICAL_LINE,\n\tVERTICAL_AREA: VERTICAL_AREA,\n\tRANGE_AREA: RANGE_AREA,\n\tVERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n\tRANGE_COLUMN: RANGE_COLUMN,\n\tVERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n\tRANGE_BAR: RANGE_BAR,\n\tHORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n\tSCATTER: SCATTER,\n\tSCATTER_LINE: SCATTER_LINE,\n\tBUBBLE: BUBBLE,\n\tRADAR_AREA: RADAR_AREA,\n\tRADAR_LINE: RADAR_LINE,\n\tRADAR_COLUMN: RADAR_COLUMN,\n\tPOLAR_LINE: POLAR_LINE,\n\tPOLAR_AREA: POLAR_AREA,\n\tPOLAR_SCATTER: POLAR_SCATTER,\n\tRENDER: RENDER,\n\tPLOT_AREA_CLICK: PLOT_AREA_CLICK,\n\tPLOT_AREA_HOVER: PLOT_AREA_HOVER,\n\tPLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n\tLOGARITHMIC: LOGARITHMIC,\n\tDRAG: DRAG,\n\tDRAG_START: DRAG_START,\n\tDRAG_END: DRAG_END,\n\tZOOM_START: ZOOM_START,\n\tZOOM: ZOOM,\n\tZOOM_END: ZOOM_END,\n\tSELECT_START: SELECT_START,\n\tSELECT: SELECT,\n\tSELECT_END: SELECT_END,\n\tPANE_RENDER: PANE_RENDER,\n\tGAP: GAP,\n\tDONUT: DONUT,\n\tINSIDE_END: INSIDE_END,\n\tINSIDE_BASE: INSIDE_BASE,\n\tOUTSIDE_END: OUTSIDE_END,\n\tMOUSEWHEEL: MOUSEWHEEL,\n\tMOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n\tMOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n\tSHOW_TOOLTIP: SHOW_TOOLTIP,\n\tHIDE_TOOLTIP: HIDE_TOOLTIP,\n\tEQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n\tABOVE: ABOVE,\n\tBELOW: BELOW,\n\tHEATMAP: HEATMAP\n};\n\nvar DEFAULT_ERROR_BAR_WIDTH = 4;\n\nvar ErrorBarBase = ChartElement.extend({\n    init: function(low, high, isVertical, chart, series, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.low = low;\n        this.high = high;\n        this.isVertical = isVertical;\n        this.chart = chart;\n        this.series = series;\n    },\n\n    reflow: function(targetBox) {\n        var endCaps = this.options.endCaps;\n        var isVertical = this.isVertical;\n        var axis = this.getAxis();\n        var valueBox = axis.getSlot(this.low, this.high);\n        var centerBox = targetBox.center();\n        var capsWidth = this.getCapsWidth(targetBox, isVertical);\n        var capValue = isVertical ? centerBox.x : centerBox.y;\n        var capStart = capValue - capsWidth;\n        var capEnd = capValue + capsWidth;\n        var linePoints;\n\n        if (isVertical) {\n            linePoints = [\n                new Point(centerBox.x, valueBox.y1),\n                new Point(centerBox.x, valueBox.y2)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(capStart, valueBox.y1),\n                    new Point(capEnd, valueBox.y1),\n                    new Point(capStart, valueBox.y2),\n                    new Point(capEnd, valueBox.y2));\n            }\n            this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n        } else {\n            linePoints = [\n                new Point(valueBox.x1, centerBox.y),\n                new Point(valueBox.x2, centerBox.y)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(valueBox.x1, capStart),\n                    new Point(valueBox.x1, capEnd),\n                    new Point(valueBox.x2, capStart),\n                    new Point(valueBox.x2, capEnd));\n            }\n            this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n        }\n\n        this.linePoints = linePoints;\n    },\n\n    getCapsWidth: function(box, isVertical) {\n        var boxSize = isVertical ? box.width() : box.height();\n        var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n\n        return capsWidth;\n    },\n\n    createVisual: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var visual = options.visual;\n\n        if (visual) {\n            this.visual = visual({\n                low: this.low,\n                high: this.high,\n                rect: this.box.toRect(),\n                sender: this.getSender(),\n                options: {\n                    endCaps: options.endCaps,\n                    color: options.color,\n                    line: options.line\n                },\n                createVisual: function () {\n                    this$1.createDefaultVisual();\n                    var defaultVisual = this$1.visual;\n                    delete this$1.visual;\n                    return defaultVisual;\n                }\n            });\n        } else {\n            this.createDefaultVisual();\n        }\n    },\n\n    createDefaultVisual: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var linePoints = ref.linePoints;\n        var lineOptions = {\n            stroke: {\n                color: options.color,\n                width: options.line.width,\n                dashType: options.line.dashType\n            }\n        };\n\n        ChartElement.fn.createVisual.call(this);\n\n        for (var idx = 0; idx < linePoints.length; idx += 2) {\n            var line = new Path(lineOptions)\n                .moveTo(linePoints[idx].x, linePoints[idx].y)\n                .lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n\n            alignPathToPixel(line);\n            this$1.visual.append(line);\n        }\n    }\n});\n\nsetDefaultOptions(ErrorBarBase, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    endCaps: true,\n    line: {\n        width: 2\n    },\n    zIndex: 1\n});\n\nvar CategoricalErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axis = this.chart.seriesValueAxis(this.series);\n\n        return axis;\n    }\n});\n\nvar MAX_EXPAND_DEPTH = 5;\n\nfunction evalOptions(options, context, state, dryRun) {\n    if (state === void 0) { state = {}; }\n    if (dryRun === void 0) { dryRun = false; }\n\n    var defaults = state.defaults = state.defaults || {};\n    var depth = state.depth = state.depth || 0;\n    var needsEval = false;\n\n    state.excluded = state.excluded || [];\n\n    if (depth > MAX_EXPAND_DEPTH) {\n        return null;\n    }\n\n    for (var property in options) {\n        if (!inArray(property, state.excluded) && options.hasOwnProperty(property)) {\n            var propValue = options[property];\n            if (isFunction(propValue)) {\n                needsEval = true;\n                if (!dryRun) {\n                    options[property] = valueOrDefault(propValue(context), defaults[property]);\n                }\n            } else if (isObject(propValue)) {\n                if (!dryRun) {\n                    state.defaults = defaults[property];\n                }\n                state.depth++;\n                needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                state.depth--;\n            }\n        }\n    }\n\n    return needsEval;\n}\n\nfunction categoriesCount(series) {\n    var seriesCount = series.length;\n    var categories = 0;\n\n    for (var i = 0; i < seriesCount; i++) {\n        categories = Math.max(categories, series[i].data.length);\n    }\n\n    return categories;\n}\n\nvar CategoricalChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]);\n\n        // Value axis ranges grouped by axis name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.valueAxisRanges = {};\n\n        this.points = [];\n        this.categoryPoints = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({ }, defaults, {\n                vertical: !this.options.invertAxes\n            }, series);\n        }\n\n        return options;\n    },\n\n    plotValue: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        if (this.options.isStacked100 && isNumber(point.value)) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var otherValues = [];\n            var categorySum = 0;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n                if (other) {\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n\n                    if ((stack && otherStack) && stack.group !== otherStack.group) {\n                        continue;\n                    }\n\n                    if (isNumber(other.value)) {\n                        categorySum += Math.abs(other.value);\n                        otherValues.push(Math.abs(other.value));\n                    }\n                }\n            }\n\n            if (categorySum > 0) {\n                return point.value / categorySum;\n            }\n        }\n\n        return point.value;\n    },\n\n    plotRange: function(point, startValue) {\n        var this$1 = this;\n        if (startValue === void 0) { startValue = 0; }\n\n        var categoryPoints = this.categoryPoints[point.categoryIx];\n\n        if (this.options.isStacked) {\n            var plotValue = this.plotValue(point);\n            var positive = plotValue >= 0;\n            var prevValue = startValue;\n            var isStackedBar = false;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                var stack = point.series.stack;\n                var otherStack = other.series.stack;\n                if (stack && otherStack) {\n                    if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                        continue;\n                    }\n\n                    if (stack.group && stack.group !== otherStack.group) {\n                        continue;\n                    }\n                }\n\n                var otherValue = this$1.plotValue(other);\n                if ((otherValue >= 0 && positive) ||\n                    (otherValue < 0 && !positive)) {\n                    prevValue += otherValue;\n                    plotValue += otherValue;\n                    isStackedBar = true;\n\n                    if (this$1.options.isStacked100) {\n                        plotValue = Math.min(plotValue, 1);\n                    }\n                }\n            }\n\n            if (isStackedBar) {\n                prevValue -= startValue;\n            }\n\n            return [ prevValue, plotValue ];\n        }\n\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue ];\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var this$1 = this;\n\n        var min = MAX_VALUE;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < this.categoryPoints.length; i++) {\n            var categoryPoints = this$1.categoryPoints[i];\n            if (!categoryPoints) {\n                continue;\n            }\n\n            for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                var point = categoryPoints[pIx];\n                if (point) {\n                    if (point.series.stack === stackName || point.series.axis === axisName) {\n                        var to = this$1.plotRange(point, 0)[1];\n                        if (defined(to) && isFinite(to)) {\n                            max = Math.max(max, to);\n                            min = Math.min(min, to);\n                        }\n                    }\n                }\n            }\n        }\n\n        return { min: min, max: max };\n    },\n\n    updateStackRange: function() {\n        var this$1 = this;\n\n        var ref = this.options;\n        var isStacked = ref.isStacked;\n        var chartSeries = ref.series;\n        var limitsCache = {};\n\n        if (isStacked) {\n            for (var i = 0; i < chartSeries.length; i++) {\n                var series = chartSeries[i];\n                var axisName = series.axis;\n                var key = axisName + series.stack;\n\n                var limits = limitsCache[key];\n                if (!limits) {\n                    limits = this$1.stackLimits(axisName, series.stack);\n\n                    var errorTotals = this$1.errorTotals;\n                    if (errorTotals) {\n                        if (errorTotals.negative.length) {\n                            limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                        }\n                        if (errorTotals.positive.length) {\n                            limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                        }\n                    }\n\n                    if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                        limitsCache[key] = limits;\n                    } else {\n                        limits = null;\n                    }\n                }\n\n                if (limits) {\n                    this$1.valueAxisRanges[axisName] = limits;\n                }\n            }\n        }\n    },\n\n    addErrorBar: function(point, data, categoryIx) {\n        var value = point.value;\n        var series = point.series;\n        var seriesIx = point.seriesIx;\n        var errorBars = point.options.errorBars;\n        var lowValue = data.fields[ERROR_LOW_FIELD];\n        var highValue = data.fields[ERROR_HIGH_FIELD];\n        var errorRange;\n\n        if (isNumber(lowValue) && isNumber(highValue)) {\n            errorRange = { low: lowValue, high: highValue };\n        } else if (errorBars && defined(errorBars.value)) {\n            this.seriesErrorRanges = this.seriesErrorRanges || [];\n            this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] ||\n                new ErrorRangeCalculator(errorBars.value, series, VALUE);\n\n            errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n        }\n\n        if (errorRange) {\n            point.low = errorRange.low;\n            point.high = errorRange.high;\n            this.addPointErrorBar(point, categoryIx);\n        }\n    },\n\n    addPointErrorBar: function(point, categoryIx) {\n        var isVertical = !this.options.invertAxes;\n        var options = point.options.errorBars;\n        var series = point.series;\n        var low = point.low;\n        var high = point.high;\n\n        if (this.options.isStacked) {\n            var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n            low = stackedErrorRange.low;\n            high = stackedErrorRange.high;\n        } else {\n            var fields = { categoryIx: categoryIx, series: series };\n            this.updateRange({ value: low }, fields);\n            this.updateRange({ value: high }, fields);\n        }\n\n        var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars = [ errorBar ];\n        point.append(errorBar);\n    },\n\n    stackedErrorRange: function(point, categoryIx) {\n        var plotValue = this.plotRange(point, 0)[1] - point.value;\n        var low = point.low + plotValue;\n        var high = point.high + plotValue;\n\n        this.errorTotals = this.errorTotals || { positive: [], negative: [] };\n\n        if (low < 0) {\n            this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n        }\n\n        if (high > 0) {\n            this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n        }\n\n        return { low: low, high: high };\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n\n        var categoryPoints = this.categoryPoints[categoryIx];\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        var seriesPoints = this.seriesPoints[seriesIx];\n        if (!seriesPoints) {\n            this.seriesPoints[seriesIx] = seriesPoints = [];\n        }\n\n        var point = this.createPoint(data, fields);\n        if (point) {\n            $.extend(point, fields);\n\n            point.owner = this;\n            point.noteText = data.fields.noteText;\n            if (!defined(point.dataItem)) {\n                point.dataItem = series.data[categoryIx];\n            }\n            this.addErrorBar(point, data, categoryIx);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n        categoryPoints.push(point);\n\n        this.updateRange(data.valueFields, fields);\n    },\n\n    evalPointOptions: function(options, value, category, categoryIx, series, seriesIx) {\n        var state = { defaults: series._defaults, excluded: [ \"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\" ] };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, pointOptions);\n            evalOptions(pointOptions, {\n                value: value,\n                category: category,\n                index: categoryIx,\n                series: series,\n                dataItem: series.data[categoryIx]\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    updateRange: function(data, fields) {\n        var axisName = fields.series.axis;\n        var value = data.value;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (isFinite(value) && value !== null) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, value);\n            axisRange.max = Math.max(axisRange.max, value);\n        }\n    },\n\n    seriesValueAxis: function(series) {\n        var plotArea = this.plotArea;\n        var axisName = series.axis;\n        var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate value axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var categorySlots = this.categorySlots = [];\n        var chartPoints = this.points;\n        var categoryAxis = this.categoryAxis;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (data, fields) {\n            var categoryIx = fields.categoryIx;\n            var currentSeries = fields.series;\n\n            var valueAxis = this$1.seriesValueAxis(currentSeries);\n            var point = chartPoints[pointIx++];\n\n            var categorySlot = categorySlots[categoryIx];\n            if (!categorySlot) {\n                categorySlots[categoryIx] = categorySlot =\n                    this$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n            }\n\n            if (point) {\n                var plotRange = this$1.plotRange(point, valueAxis.startValue());\n                var valueSlot = this$1.valueSlot(valueAxis, plotRange);\n                if (valueSlot) {\n                    var pointSlot = this$1.pointSlot(categorySlot, valueSlot);\n\n                    point.aboveAxis = this$1.aboveAxis(point, valueAxis);\n                    point.stackValue = plotRange[1];\n\n                    if (this$1.options.isStacked100) {\n                        point.percentage = this$1.plotValue(point);\n                    }\n\n                    this$1.reflowPoint(point, pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.reflowCategories(categorySlots);\n        if (!this.options.clip && this.options.limitPoints && this.points.length) {\n            this.limitPoints();\n        }\n\n        this.box = targetBox;\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n    },\n\n    limitPoints: function() {\n        var this$1 = this;\n\n        var categoryPoints = this.categoryPoints;\n        var points = categoryPoints[0].concat(last(categoryPoints));\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx]) {\n                this$1.limitPoint(points[idx]);\n            }\n        }\n    },\n\n    limitPoint: function(point) {\n        var limittedSlot = this.categoryAxis.limitSlot(point.box);\n        if (!limittedSlot.equals(point.box)) {\n            point.reflow(limittedSlot);\n        }\n    },\n\n    aboveAxis: function(point, valueAxis) {\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n        var value = point.value;\n\n        return valueAxis.options.reverse ?\n            value < axisCrossingValue : value >= axisCrossingValue;\n    },\n\n    categoryAxisCrossingValue: function(valueAxis) {\n        var categoryAxis = this.categoryAxis;\n        var options = valueAxis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n\n        return crossingValues[categoryAxis.axisIndex || 0] || 0;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.reflow(pointSlot);\n    },\n\n    reflowCategories: function() { },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var options = this.options;\n        var invertAxes = options.invertAxes;\n        var slotX = invertAxes ? valueSlot : categorySlot;\n        var slotY = invertAxes ? categorySlot : valueSlot;\n\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1 = this;\n\n        var series = this.options.series;\n        var count = categoriesCount(series);\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            this$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n        }\n\n        for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n            for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                var currentSeries = series[seriesIx$1];\n                var currentCategory = this$1.categoryAxis.categoryAt(categoryIx);\n                var pointData = this$1._bindPoint(currentSeries, seriesIx$1, categoryIx);\n\n                callback(pointData, {\n                    category: currentCategory,\n                    categoryIx: categoryIx,\n                    categoriesCount: count,\n                    series: currentSeries,\n                    seriesIx: seriesIx$1\n                });\n            }\n        }\n\n        for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n            this$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n        }\n    },\n\n    _outOfRangeCallback: function(series, field, seriesIx, callback) {\n        var outOfRangePoint = series[field];\n        if (outOfRangePoint) {\n            var categoryIx = outOfRangePoint.categoryIx;\n            var pointData = this._bindPoint(series, seriesIx, categoryIx, outOfRangePoint.item);\n\n            callback(pointData, {\n                category: outOfRangePoint.category,\n                categoryIx: categoryIx,\n                series: series,\n                seriesIx: seriesIx,\n                dataItem: outOfRangePoint.item\n            });\n        }\n    },\n\n    _bindPoint: function(series, seriesIx, categoryIx, item) {\n        if (!this._bindCache) {\n            this._bindCache = [];\n        }\n\n        var bindCache = this._bindCache[seriesIx];\n        if (!bindCache) {\n            bindCache = this._bindCache[seriesIx] = [];\n        }\n\n        var data = bindCache[categoryIx];\n        if (!data) {\n            data = bindCache[categoryIx] = SeriesBinder.current.bindPoint(series, categoryIx, item);\n        }\n\n        return data;\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.value;\n    }\n});\n\nsetDefaultOptions(CategoricalChart, {\n    series: [],\n    invertAxes: false,\n    isStacked: false,\n    clip: true,\n    limitPoints: true\n});\n\nvar PointEventsMixin = {\n    click: function(chart, e) {\n        return chart.trigger(\n            SERIES_CLICK,\n            this.eventArgs(e)\n        );\n    },\n\n    hover: function(chart, e) {\n        return chart.trigger(\n            SERIES_HOVER,\n            this.eventArgs(e)\n        );\n    },\n\n    over: function(chart, e) {\n        return chart.trigger(\n            SERIES_OVER,\n            this.eventArgs(e)\n        );\n    },\n\n    out: function(chart, e) {\n        return chart.trigger(\n            SERIES_LEAVE,\n            this.eventArgs(e)\n        );\n    },\n\n    eventArgs: function(e) {\n        return {\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            category: this.category,\n            series: this.series,\n            dataItem: this.dataItem,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            element: eventElement(e),\n            originalEvent: e,\n            point: this\n        };\n    }\n};\n\nvar NoteMixin = {\n    createNote: function() {\n        var options = this.options.notes;\n        var text = this.noteText || options.label.text;\n\n        if (options.visible !== false && defined(text) && text !== null) {\n            this.note = new dataviz.Note({\n                value: this.value,\n                text: text,\n                dataItem: this.dataItem,\n                category: this.category,\n                series: this.series\n            }, this.options.notes, this.owner.chartService);\n\n            this.append(this.note);\n        }\n    }\n};\n\nvar LinePoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n    },\n\n    render: function() {\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        if (markers.visible && markers.size) {\n            this.marker = this.createMarker();\n            this.append(this.marker);\n        }\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var pointData = this.pointData();\n            var labelText = this.value;\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else if (labels.format) {\n                labelText = this.formatValue(labels.format);\n            }\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                }, labels),\n                pointData\n            );\n            this.append(this.label);\n        }\n\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    markerBorder: function() {\n        var options = this.options.markers;\n        var background = options.background;\n        var border = deepExtend({ color: this.color }, options.border);\n\n        if (!defined(border.color)) {\n            border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n        }\n\n        return border;\n    },\n\n    createVisual: function() {},\n\n    createMarker: function() {\n        var options = this.options.markers;\n        var marker = new ShapeElement({\n            type: options.type,\n            width: options.size,\n            height: options.size,\n            rotation: options.rotation,\n            background: options.background,\n            border: this.markerBorder(),\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        return marker;\n    },\n\n    markerBox: function() {\n        if (!this.marker) {\n            this.marker = this.createMarker();\n            this.marker.reflow(this._childBox);\n        }\n\n        return this.marker.box;\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var aboveAxis = ref.aboveAxis;\n        var vertical = options.vertical;\n\n        this.render();\n\n        this.box = targetBox;\n        var childBox = targetBox.clone();\n\n        if (vertical) {\n            if (aboveAxis) {\n                childBox.y1 -= childBox.height();\n            } else {\n                childBox.y2 += childBox.height();\n            }\n        } else {\n            if (aboveAxis) {\n                childBox.x1 += childBox.width();\n            } else {\n                childBox.x2 -= childBox.width();\n            }\n        }\n\n        this._childBox = childBox;\n        if (this.marker) {\n            this.marker.reflow(childBox);\n        }\n\n        this.reflowLabel(childBox);\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1.errorBars[i].reflow(childBox);\n            }\n        }\n\n        if (this.note) {\n            var noteTargetBox = this.markerBox();\n\n            if (!(options.markers.visible && options.markers.size)) {\n                var center = noteTargetBox.center();\n                noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n            }\n\n            this.note.reflow(noteTargetBox);\n        }\n    },\n\n    reflowLabel: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var anchor = options.labels.position;\n\n        if (label) {\n            anchor = anchor === ABOVE ? TOP : anchor;\n            anchor = anchor === BELOW ? BOTTOM : anchor;\n\n            label.reflow(box);\n            label.box.alignTo(this.markerBox(), anchor);\n            label.reflow(label.box);\n        }\n    },\n\n    createHighlight: function() {\n        var markers = this.options.highlight.markers;\n        var defaultColor = this.markerBorder().color;\n        var options = this.options.markers;\n        var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n        var shadow = new ShapeElement({\n            type: options.type,\n            width: size,\n            height: size,\n            rotation: options.rotation,\n            background: markers.color || defaultColor,\n            border: {\n                color: markers.border.color,\n                width: markers.border.width,\n                opacity: valueOrDefault(markers.border.opacity, 1)\n            },\n            opacity: valueOrDefault(markers.opacity, 1)\n        });\n        shadow.reflow(this._childBox);\n\n        return shadow.getElement();\n    },\n\n    highlightVisual: function() {\n        return (this.marker || {}).visual;\n    },\n\n    highlightVisualArgs: function() {\n        var marker = this.marker;\n        var visual, rect;\n\n        if (marker) {\n            rect = marker.paddingBox.toRect();\n            visual = marker.visual;\n        } else {\n            var size = this.options.markers.size;\n            var halfSize = size / 2;\n            var center = this.box.center();\n            rect = new geometry.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n        }\n\n        return {\n            options: this.options,\n            rect: rect,\n            visual: visual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var markerBox = this.markerBox();\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n        if (showTooltip) {\n            var x = markerBox.x2 + TOOLTIP_OFFSET;\n            var horizontalAlign = LEFT;\n            var y, verticalAlign;\n\n            if (this.aboveAxis) {\n                y = markerBox.y1;\n                verticalAlign = BOTTOM;\n            } else {\n                y = markerBox.y2;\n                verticalAlign = TOP;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        var markerBox = this.markerBox();\n        return markerBox.overlaps(box);\n    },\n\n    unclipElements: function() {\n        if (this.label) {\n            this.label.options.noclip = true;\n        }\n\n        if (this.note) {\n            this.note.options.noclip = true;\n        }\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            series: this.series\n        };\n    }\n});\n\nLinePoint.prototype.defaults = {\n    vertical: true,\n    markers: {\n        visible: true,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        position: ABOVE,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: \"#fff\",\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    errorBars: {\n        line: {\n            width: 1\n        }\n    }\n};\n\ndeepExtend(LinePoint.prototype, PointEventsMixin);\ndeepExtend(LinePoint.prototype, NoteMixin);\n\nvar LineSegment = ChartElement.extend({\n    init: function(linePoints, series, seriesIx) {\n        ChartElement.fn.init.call(this);\n\n        this.linePoints = linePoints;\n        this.series = series;\n        this.seriesIx = seriesIx;\n    },\n\n    points: function() {\n        return this.toGeometryPoints(this.linePoints);\n    },\n\n    toGeometryPoints: function(points) {\n        var result = [];\n        for (var i = 0, length = points.length; i < length; i++) {\n            if (points[i] && points[i].visible !== false) {\n                result.push(points[i]._childBox.toRect().center());\n            }\n        }\n\n        return result;\n    },\n\n    createVisual: function() {\n        var this$1 = this;\n\n        var customVisual = this.series.visual;\n        if (customVisual) {\n            this.visual = customVisual({\n                points: this.toGeometryPoints(this.linePoints),\n                series: this.series,\n                sender: this.getSender(),\n                createVisual: function () {\n                    this$1.segmentVisual();\n\n                    return this$1.visual;\n                }\n            });\n            if (this.visual && !defined(this.visual.options.zIndex)) {\n                this.visual.options.zIndex = this.series.zIndex;\n            }\n        } else {\n            this.segmentVisual();\n        }\n    },\n\n    segmentVisual: function() {\n        var ref = this;\n        var options = ref.options;\n        var series = ref.series;\n        var color = series.color;\n        var defaults = series._defaults;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var line = Path.fromPoints(this.points(), {\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        if (options.closed) {\n            line.close();\n        }\n\n        this.visual = line;\n    },\n\n    aliasFor: function(e, coords) {\n        return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n    }\n});\n\nsetDefaultOptions(LineSegment, {\n    closed: false\n});\n\nvar StepLineMixin = {\n    calculateStepPoints: function(points) {\n        var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n        var ref = categoryAxis.options;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n\n        var stepAxis = vertical ? X : Y;\n        var axis = vertical ? Y : X;\n        var stepDir = reverse ? 2 : 1;\n        var dir = stepDir;\n\n        var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n        var result = [ previousPoint ];\n\n        for (var idx = 1; idx < points.length; idx++) {\n            var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n            if (previousPoint[stepAxis] !== point[stepAxis]) {\n                var stepPoint = new GeometryPoint();\n                stepPoint[stepAxis] = previousPoint[stepAxis];\n                stepPoint[axis] = point[axis];\n\n                result.push(stepPoint, point);\n            }\n\n            previousPoint = point;\n        }\n\n        if (!justified) {\n            result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n        } else if (previousPoint !== last(result)) {\n            result.push(previousPoint);\n        }\n\n        return result;\n\n    }\n};\n\nfunction toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n    var box = lintPoint.box;\n    var result = new GeometryPoint();\n\n    result[stepAxis] = box[stepAxis + stepDir];\n    result[axis] = box[axis + dir];\n\n    return result;\n}\n\nvar StepLineSegment = LineSegment.extend({\n    points: function() {\n        return this.calculateStepPoints(this.linePoints);\n    }\n});\n\ndeepExtend(StepLineSegment.prototype, StepLineMixin);\n\nvar SplineSegment = LineSegment.extend({\n    segmentVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var segments = curveProcessor.process(this.points());\n        var curve = new Path({\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        curve.segments.push.apply(curve.segments, segments);\n\n        this.visual = curve;\n    }\n});\n\nvar LineChartMixin = {\n    renderSegments: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesPoints = ref.seriesPoints;\n        var series = options.series;\n        var seriesCount = seriesPoints.length;\n        var lastSegment;\n\n        this._segments = [];\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var sortedPoints = this$1.sortPoints(seriesPoints[seriesIx]);\n            var pointCount = sortedPoints.length;\n            var linePoints = [];\n\n            for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                var point = sortedPoints[pointIx];\n                if (point) {\n                    linePoints.push(point);\n                } else if (this$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                    if (linePoints.length > 1) {\n                        lastSegment = this$1.createSegment(\n                            linePoints, currentSeries, seriesIx, lastSegment\n                        );\n                        this$1._addSegment(lastSegment);\n                    }\n                    linePoints = [];\n                }\n            }\n\n            if (linePoints.length > 1) {\n                lastSegment = this$1.createSegment(\n                    linePoints, currentSeries, seriesIx, lastSegment\n                );\n                this$1._addSegment(lastSegment);\n            }\n        }\n\n        this.children.unshift.apply(this.children, this._segments);\n    },\n\n    _addSegment: function(segment) {\n        this._segments.push(segment);\n        segment.parent = this;\n    },\n\n    sortPoints: function(points) {\n        return points;\n    },\n\n    seriesMissingValues: function(series) {\n        var missingValues = series.missingValues;\n        var assumeZero = !missingValues && this.options.isStacked;\n\n        return assumeZero ? ZERO : missingValues || INTERPOLATE;\n    },\n\n    getNearestPoint: function(x, y, seriesIx) {\n        var target = new Point(x, y);\n        var allPoints = this.seriesPoints[seriesIx];\n        var nearestPointDistance = MAX_VALUE;\n        var nearestPoint;\n\n        for (var i = 0; i < allPoints.length; i++) {\n            var point = allPoints[i];\n\n            if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                var pointBox = point.box;\n                var pointDistance = pointBox.center().distanceTo(target);\n\n                if (pointDistance < nearestPointDistance) {\n                    nearestPoint = point;\n                    nearestPointDistance = pointDistance;\n                }\n            }\n        }\n\n        return nearestPoint;\n    }\n};\n\nvar ClipAnimation = Animation.extend({\n    setup: function() {\n        this._setEnd(this.options.box.x1);\n    },\n\n    step: function(pos) {\n        var box = this.options.box;\n        this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n    },\n\n    _setEnd: function(x) {\n        var element = this.element;\n        var segments = element.segments;\n        var topRight = segments[1].anchor();\n        var bottomRight = segments[2].anchor();\n\n        element.suspend();\n        topRight.setX(x);\n        element.resume();\n        bottomRight.setX(x);\n    }\n});\n\nsetDefaultOptions(ClipAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(\"clip\", ClipAnimation);\n\nfunction anyHasZIndex(elements) {\n    for (var idx = 0; idx < elements.length; idx++) {\n        if (defined(elements[idx].zIndex)) {\n            return true;\n        }\n    }\n}\n\nvar ClipAnimationMixin = {\n    createAnimation: function() {\n        var root = this.getRoot();\n        if (root && (root.options || {}).transitions !== false) {\n            var box = root.size();\n            var clipPath = Path.fromRect(box.toRect());\n            this.visual.clip(clipPath);\n            this.animation = new ClipAnimation(clipPath, {\n                box: box\n            });\n            if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation(clipPath);\n            }\n        }\n    },\n\n    _setChildrenAnimation: function(clipPath) {\n        var points = this.animationPoints();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point && point.visual && defined(point.visual.options.zIndex)) {\n                point.visual.clip(clipPath);\n            }\n        }\n    }\n};\n\nvar LineChart = CategoricalChart.extend({\n    render: function() {\n\n        CategoricalChart.fn.render.call(this);\n\n        this.updateStackRange();\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var missingValues = this.seriesMissingValues(series);\n        var value = data.valueFields.value;\n\n        if (!defined(value) || value === null) {\n            if (missingValues === ZERO) {\n                value = 0;\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(\n            pointOptions, value, category, categoryIx, series, seriesIx\n        );\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    plotRange: function(point) {\n        var this$1 = this;\n\n        var plotValue = this.plotValue(point);\n\n        if (this.options.isStacked) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                plotValue += this$1.plotValue(other);\n\n                if (this$1.options.isStacked100) {\n                    plotValue = Math.min(plotValue, 1);\n                }\n            }\n\n        }\n\n        return [ plotValue, plotValue ];\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === STEP) {\n            pointType = StepLineSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result.concat(this._segments);\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\ndeepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar AreaSegment = LineSegment.extend({\n    init: function(linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n        LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n\n        this.prevSegment = prevSegment;\n        this.stackPoints = stackPoints;\n    },\n\n    createVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var lineOptions = series.line || {};\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        this.visual = new Group({\n            zIndex: series.zIndex\n        });\n\n        this.createFill({\n            fill: {\n                color: color,\n                opacity: series.opacity\n            },\n            stroke: null\n        });\n\n        if (lineOptions.width > 0 && lineOptions.visible !== false) {\n            this.createStroke({\n                stroke: deepExtend({\n                    color: color,\n                    opacity: series.opacity,\n                    lineCap: \"butt\"\n                }, lineOptions)\n            });\n        }\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            segments = this._strokeSegments = this.createStrokeSegments();\n        }\n\n        return segments;\n    },\n\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.points());\n    },\n\n    stackSegments: function() {\n        if (this.prevSegment) {\n            return this.prevSegment.createStackSegments(this.stackPoints);\n        }\n\n        return this.createStackSegments(this.stackPoints);\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n    },\n\n    segmentsFromPoints: function(points) {\n        return points.map(function (point) { return new geometry.Segment(point); });\n    },\n\n    createStroke: function(style) {\n        var stroke = new Path(style);\n        stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n\n        this.visual.append(stroke);\n    },\n\n    hasStackSegment: function() {\n        return this.prevSegment || (this.stackPoints && this.stackPoints.length);\n    },\n\n    createFill: function(style) {\n        var strokeSegments = this.strokeSegments();\n        var fillSegments = strokeSegments.slice(0);\n        var hasStackSegments = this.hasStackSegment();\n\n        if (hasStackSegments) {\n            var stackSegments = this.stackSegments();\n\n            append(fillSegments, stackSegments);\n        }\n\n        var fill = new Path(style);\n        fill.segments.push.apply(fill.segments, fillSegments);\n\n        if (!hasStackSegments && strokeSegments.length > 1) {\n            this.fillToAxes(fill);\n        }\n\n        this.visual.append(fill);\n    },\n\n    fillToAxes: function(fillPath) {\n        var chart = this.parent;\n        var invertAxes = chart.options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.series);\n        var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n        var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n        var segments = this.strokeSegments();\n        var firstPoint = segments[0].anchor();\n        var lastPoint = last(segments).anchor();\n        var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n        if (invertAxes) {\n            fillPath.lineTo(end, lastPoint.y)\n                    .lineTo(end, firstPoint.y);\n        } else {\n            fillPath.lineTo(lastPoint.x, end)\n                    .lineTo(firstPoint.x, end);\n        }\n    }\n});\n\nvar StepAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n    }\n});\n\ndeepExtend(StepAreaSegment.prototype, StepLineMixin);\n\nvar SplineAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var linePoints = this.points();\n\n        return curveProcessor.process(linePoints);\n    },\n\n    createStackSegments: function() {\n        var strokeSegments = this.strokeSegments();\n        var stackSegments = [];\n        for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n            var segment = strokeSegments[idx];\n            stackSegments.push(new geometry.Segment(\n                segment.anchor(),\n                segment.controlOut(),\n                segment.controlIn()\n            ));\n        }\n\n        return stackSegments;\n    }\n});\n\nvar AreaChart = LineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n\n        var stackPoints;\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            var missingValues = this.seriesMissingValues(currentSeries);\n            if (missingValues !== \"gap\") {\n                stackPoints = prevSegment.linePoints;\n                previousSegment = prevSegment;\n            } else {\n                stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n            }\n        }\n\n        var pointType;\n        if (style === STEP) {\n            pointType = StepAreaSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineAreaSegment;\n        } else {\n            pointType = AreaSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        LineChart.fn.reflow.call(this, targetBox);\n\n        var stackPoints = this._stackPoints;\n        if (stackPoints) {\n            for (var idx = 0; idx < stackPoints.length; idx++) {\n                var stackPoint = stackPoints[idx];\n                var pointSlot = this$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                stackPoint.reflow(pointSlot);\n            }\n        }\n    },\n\n    _gapStackPoints: function(linePoints, seriesIx, style) {\n        var this$1 = this;\n\n        var seriesPoints = this.seriesPoints;\n        var startIdx = linePoints[0].categoryIx;\n        var length = linePoints.length;\n        if (startIdx < 0) {\n            startIdx = 0;\n            length--;\n        }\n\n        var endIdx = startIdx + length;\n        var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n        var stackPoints = [];\n\n        this._stackPoints = this._stackPoints || [];\n        for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n            var pointIx = categoryIx + pointOffset;\n            var currentSeriesIx = seriesIx;\n            var point = (void 0);\n\n            do {\n                currentSeriesIx--;\n                point = seriesPoints[currentSeriesIx][pointIx];\n            } while (currentSeriesIx > 0 && !point);\n\n            if (point) {\n                if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                    stackPoints.push(this$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                }\n\n                stackPoints.push(point);\n\n                if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                    stackPoints.push(this$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                }\n            } else {\n                var gapStackPoint = this$1._createGapStackPoint(categoryIx);\n                this$1._stackPoints.push(gapStackPoint);\n                stackPoints.push(gapStackPoint);\n            }\n        }\n\n        return stackPoints;\n    },\n\n    _previousSegmentPoint: function(categoryIx, pointIx, segmentIx, seriesIdx) {\n        var seriesPoints = this.seriesPoints;\n        var index = seriesIdx;\n        var point;\n\n        while (index > 0 && !point) {\n            index--;\n            point = seriesPoints[index][segmentIx];\n        }\n\n        if (!point) {\n            point = this._createGapStackPoint(categoryIx);\n            this._stackPoints.push(point);\n        } else {\n            point = seriesPoints[index][pointIx];\n        }\n\n        return point;\n    },\n\n    _createGapStackPoint: function(categoryIx) {\n        var options = this.pointOptions({}, 0);\n        var point = new LinePoint(0, options);\n        point.categoryIx = categoryIx;\n        point.series = {};\n\n        return point;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar AxisGroupRangeTracker = Class.extend({\n    init: function() {\n\n        this.axisRanges = {};\n    },\n\n    update: function(chartAxisRanges) {\n        var axisRanges = this.axisRanges;\n\n        for (var axisName in chartAxisRanges) {\n            var chartRange = chartAxisRanges[axisName];\n            var range = axisRanges[axisName];\n            axisRanges[axisName] = range = range || { min: MAX_VALUE, max: MIN_VALUE };\n\n            range.min = Math.min(range.min, chartRange.min);\n            range.max = Math.max(range.max, chartRange.max);\n        }\n    },\n\n    reset: function(axisName) {\n        this.axisRanges[axisName] = undefined;\n    },\n\n    query: function(axisName) {\n        return this.axisRanges[axisName];\n    }\n});\n\nvar BarLabel = ChartElement.extend({\n    init: function(content, options, pointData) {\n        ChartElement.fn.init.call(this, options);\n\n        this.textBox = new TextBox(content, this.options, pointData);\n        this.append(this.textBox);\n    },\n\n    createVisual: function() {\n        this.textBox.options.noclip = this.options.noclip;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var aboveAxis = options.aboveAxis;\n        var text = this.children[0];\n        var textOptions = text.options;\n        var box = text.box;\n        var padding = text.options.padding;\n        var labelBox = targetBox;\n\n        textOptions.align = vertical ? CENTER : LEFT;\n        textOptions.vAlign = vertical ? TOP : CENTER;\n\n        if (options.position === INSIDE_END) {\n            if (vertical) {\n                textOptions.vAlign = TOP;\n\n                if (!aboveAxis && box.height() < targetBox.height()) {\n                    textOptions.vAlign = BOTTOM;\n                }\n            } else {\n                textOptions.align = aboveAxis ? RIGHT : LEFT;\n            }\n        } else if (options.position === CENTER) {\n            textOptions.vAlign = CENTER;\n            textOptions.align = CENTER;\n        } else if (options.position === INSIDE_BASE) {\n            if (vertical) {\n                textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n            } else {\n                textOptions.align = aboveAxis ? LEFT : RIGHT;\n            }\n        } else if (options.position === OUTSIDE_END) {\n            if (vertical) {\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y1 - box.height(),\n                        targetBox.x2, targetBox.y1\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y2,\n                        targetBox.x2, targetBox.y2 + box.height()\n                    );\n                }\n            } else {\n                textOptions.align = CENTER;\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x2, targetBox.y1,\n                        targetBox.x2 + box.width(), targetBox.y2\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1 - box.width(), targetBox.y1,\n                        targetBox.x1, targetBox.y2\n                    );\n                }\n            }\n        }\n\n        if (!options.rotation) {\n            if (vertical) {\n                padding.left = padding.right =\n                    (labelBox.width() - text.contentBox.width()) / 2;\n            } else {\n                padding.top = padding.bottom =\n                    (labelBox.height() - text.contentBox.height()) / 2;\n            }\n        }\n\n        text.reflow(labelBox);\n    },\n\n    alignToClipBox: function(clipBox) {\n        var vertical = this.options.vertical;\n        var field = vertical ? Y : X;\n        var start = field + \"1\";\n        var end = field + \"2\";\n        var text = this.children[0];\n        var parentBox = this.parent.box;\n\n        if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n            var targetBox = text.paddingBox.clone();\n            targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n            targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n\n            this.reflow(targetBox);\n        }\n    }\n});\n\nsetDefaultOptions(BarLabel, {\n    position: OUTSIDE_END,\n    margin: getSpacing(3),\n    padding: getSpacing(4),\n    color: BLACK,\n    background: \"\",\n    border: {\n        width: 1,\n        color: \"\"\n    },\n    aboveAxis: true,\n    vertical: false,\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    zIndex: 2\n});\n\nfunction hasGradientOverlay(options) {\n    var overlay = options.overlay;\n\n    return overlay && overlay.gradient && overlay.gradient !== \"none\";\n}\n\nvar BAR_ALIGN_MIN_WIDTH = 6;\n\nvar Bar = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createLabel();\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            this.label = new BarLabel(labelText,\n                deepExtend({\n                    vertical: options.vertical\n                },\n                labels\n            ), pointData);\n            this.append(this.label);\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1.errorBars[i].reflow(targetBox);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var options = ref.options;\n        var customVisual = options.visual;\n\n        if (this.visible !== false) {\n            ChartElement.fn.createVisual.call(this);\n\n            if (customVisual) {\n                var visual = this.rectVisual = customVisual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    sender: this.getSender(),\n                    series: this.series,\n                    percentage: this.percentage,\n                    stackValue: this.stackValue,\n                    runningTotal: this.runningTotal,\n                    total: this.total,\n                    rect: box.toRect(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1.createRect(group);\n                        return group;\n                    },\n                    options: options\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else if (box.width() > 0 && box.height() > 0) {\n                this.createRect(this.visual);\n            }\n        }\n    },\n\n    createRect: function(visual) {\n        var options = this.options;\n        var border = options.border;\n        var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n        var rect = this.box.toRect();\n\n        rect.size.width = Math.round(rect.size.width);\n\n        var path = this.rectVisual = Path.fromRect(rect, {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: this.getBorderColor(),\n                width: border.width,\n                opacity: strokeOpacity,\n                dashType: border.dashType\n            }\n        });\n\n        var width = this.box.width();\n        var height = this.box.height();\n\n        var size = options.vertical ? width : height;\n\n        if (size > BAR_ALIGN_MIN_WIDTH) {\n            alignPathToPixel(path);\n\n            // Fixes lineJoin issue in firefox when the joined lines are parallel\n            if (width < 1 || height < 1) {\n                path.options.stroke.lineJoin = \"round\";\n            }\n        }\n\n        visual.append(path);\n\n        if (hasGradientOverlay(options)) {\n            var overlay = this.createGradientOverlay(path, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay));\n\n            visual.append(overlay);\n        }\n    },\n\n    createHighlight: function(style) {\n        var highlight = Path.fromRect(this.box.toRect(), style);\n\n        return alignPathToPixel(highlight);\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    getBorderColor: function() {\n        var color = this.color;\n        var border = this.options.border;\n        var brightness = border._brightness || BORDER_BRIGHTNESS;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(color).brightness(brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    tooltipAnchor: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var aboveAxis = ref.aboveAxis;\n        var clipBox = this.owner.pane.clipBox() || box;\n        var horizontalAlign = LEFT;\n        var verticalAlign = TOP;\n        var x, y;\n\n        if (options.vertical) {\n            x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n            if (aboveAxis) {\n                y = Math.max(box.y1, clipBox.y1);\n            } else {\n                y = Math.min(box.y2, clipBox.y2);\n                verticalAlign = BOTTOM;\n            }\n        } else {\n            var x1 = Math.max(box.x1, clipBox.x1);\n            var x2 = Math.min(box.x2, clipBox.x2);\n\n            if (options.isStacked) {\n                verticalAlign = BOTTOM;\n                if (aboveAxis) {\n                    horizontalAlign = RIGHT;\n                    x = x2;\n                } else {\n                    x = x1;\n                }\n                y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n            } else {\n                if (aboveAxis) {\n                    x = x2 + TOOLTIP_OFFSET;\n                } else {\n                    x = x1 - TOOLTIP_OFFSET;\n                    horizontalAlign = RIGHT;\n                }\n                y = Math.max(box.y1, clipBox.y1);\n            }\n        }\n\n        return {\n            point: new Point(x, y),\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(Bar.prototype, PointEventsMixin);\ndeepExtend(Bar.prototype, NoteMixin);\n\nBar.prototype.defaults = {\n    border: {\n        width: 1\n    },\n    vertical: true,\n    overlay: {\n        gradient: \"glass\"\n    },\n    labels: {\n        visible: false,\n        format: \"{0}\"\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nfunction forEach(elements, callback) {\n    elements.forEach(callback);\n}\n\nfunction forEachReverse(elements, callback) {\n    var length = elements.length;\n\n    for (var idx = length - 1; idx >= 0; idx--) {\n        callback(elements[idx], idx - length - 1);\n    }\n}\n\nvar ClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(box) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var gap = ref.gap;\n        var spacing = ref.spacing;\n        var children = this.children;\n        var count = children.length;\n        var axis = vertical ? Y : X;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotSize = (vertical ? box.height() : box.width()) / slots;\n        var position = box[axis + 1] + slotSize * (gap / 2);\n\n        this.forEach(children, function (child, idx) {\n            var childBox = (child.box || box).clone();\n\n            childBox[axis + 1] = position;\n            childBox[axis + 2] = position + slotSize;\n\n            child.reflow(childBox);\n            if (idx < count - 1) {\n                position += (slotSize * spacing);\n            }\n\n            position += slotSize;\n        });\n    }\n});\n\nsetDefaultOptions(ClusterLayout, {\n    vertical: false,\n    gap: 0,\n    spacing: 0\n});\n\nvar StackWrap = ChartElement.extend({\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var positionAxis = this.options.vertical ? X : Y;\n        var children = this.children;\n        var childrenCount = children.length;\n        var box = this.box = new Box();\n\n        for (var i = 0; i < childrenCount; i++) {\n            var currentChild = children[i];\n\n            if (currentChild.visible !== false) {\n                var childBox = currentChild.box.clone();\n                childBox.snapTo(targetBox, positionAxis);\n\n                if (i === 0) {\n                    box = this$1.box = childBox.clone();\n                }\n\n                currentChild.reflow(childBox);\n                box.wrap(childBox);\n            }\n        }\n    }\n});\n\nsetDefaultOptions(StackWrap, {\n    vertical: true\n});\n\nvar BarChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n        this.updateStackRange();\n    },\n\n    pointType: function() {\n        return Bar;\n    },\n\n    clusterType: function() {\n        return ClusterLayout;\n    },\n\n    stackType: function() {\n        return StackWrap;\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n\n        return limits;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var isStacked = options.isStacked;\n        var value = this.pointValue(data);\n        var pointOptions = this.pointOptions(series, seriesIx);\n\n        var labelOptions = pointOptions.labels;\n        if (isStacked) {\n            if (labelOptions.position === OUTSIDE_END) {\n                labelOptions.position = INSIDE_END;\n            }\n        }\n\n        pointOptions.isStacked = isStacked;\n\n        var color = data.fields.color || series.color;\n        if (value < 0 && pointOptions.negativeColor) {\n            color = pointOptions.negativeColor;\n        }\n\n        pointOptions = this.evalPointOptions(\n            pointOptions, value, category, categoryIx, series, seriesIx\n        );\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var pointType = this.pointType();\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            var clusterType = this.clusterType();\n            cluster = new clusterType({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (isStacked) {\n            var stackWrap = this.getStackWrap(series, cluster);\n            stackWrap.append(point);\n        } else {\n            cluster.append(point);\n        }\n\n        return point;\n    },\n\n    getStackWrap: function(series, cluster) {\n        var stack = series.stack;\n        var stackGroup = stack ? stack.group || stack : stack;\n        var wraps = cluster.children;\n        var stackWrap;\n\n        if (typeof stackGroup === datavizConstants.STRING) {\n            for (var i = 0; i < wraps.length; i++) {\n                if (wraps[i]._stackGroup === stackGroup) {\n                    stackWrap = wraps[i];\n                    break;\n                }\n            }\n        } else {\n            stackWrap = wraps[0];\n        }\n\n        if (!stackWrap) {\n            var stackType = this.stackType();\n            stackWrap = new stackType({\n                vertical: !this.options.invertAxes\n            });\n            stackWrap._stackGroup = stackGroup;\n            cluster.append(stackWrap);\n        }\n\n        return stackWrap;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx, valueAxis) {\n        var options = this.options;\n        var categorySlot = categoryAxis.getSlot(categoryIx);\n        var startValue = valueAxis.startValue();\n\n        if (options.isStacked) {\n            var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n            var stackAxis = options.invertAxes ? X : Y;\n            categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n        }\n\n        return categorySlot;\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    createAnimation: function() {\n        this._setAnimationOptions();\n        CategoricalChart.fn.createAnimation.call(this);\n\n        if (anyHasZIndex(this.options.series)) {\n            this._setChildrenAnimation();\n        }\n    },\n\n    _setChildrenAnimation: function() {\n        var this$1 = this;\n\n        var points = this.points;\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            var pointVisual = point.visual;\n            if (pointVisual && defined(pointVisual.options.zIndex)) {\n                point.options.animation = this$1.options.animation;\n                point.createAnimation();\n            }\n        }\n    },\n\n    _setAnimationOptions: function() {\n        var options = this.options;\n        var animation = options.animation || {};\n        var origin;\n\n        if (options.isStacked) {\n            var valueAxis = this.seriesValueAxis(options.series[0]);\n            origin = valueAxis.getSlot(valueAxis.startValue());\n        } else {\n            origin = this.categoryAxis.getSlot(0);\n        }\n\n        animation.origin = new GeometryPoint(origin.x1, origin.y1);\n        animation.vertical = !options.invertAxes;\n    }\n});\n\nsetDefaultOptions(BarChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nvar Candlestick = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n        this.value = value;\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var ocSlot = valueAxis.getSlot(value.open, value.close);\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n\n        ocSlot.x1 = lhSlot.x1 = box.x1;\n        ocSlot.x2 = lhSlot.x2 = box.x2;\n\n        this.realBody = ocSlot;\n\n        var mid = lhSlot.center().x;\n        var points = [];\n\n        points.push([ [ mid, lhSlot.y1 ], [ mid, ocSlot.y1 ] ]);\n        points.push([ [ mid, ocSlot.y2 ], [ mid, lhSlot.y2 ] ]);\n\n        this.lines = points;\n\n        this.box = lhSlot.clone().wrap(ocSlot);\n\n        if (!this._rendered) {\n            this._rendered = true;\n            this.createNote();\n        }\n\n        this.reflowNote();\n    },\n\n    reflowNote: function() {\n        if (this.note) {\n            this.note.reflow(this.box);\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n        this._mainVisual = this.mainVisual(this.options);\n        this.visual.append(\n            this._mainVisual\n        );\n\n        this.createOverlay();\n    },\n\n    mainVisual: function(options) {\n        var group = new Group();\n\n        this.createBody(group, options);\n        this.createLines(group, options);\n\n        return group;\n    },\n\n    createBody: function(container, options) {\n        var body = Path.fromRect(this.realBody.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: this.getBorderColor(),\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        alignPathToPixel(body);\n        container.append(body);\n\n        if (hasGradientOverlay(options)) {\n            container.append(this.createGradientOverlay(body, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay)));\n        }\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.lines, options.line);\n    },\n\n    drawLines: function(container, options, lines, lineOptions) {\n        if (!lines) {\n            return;\n        }\n\n        var lineStyle = {\n            stroke: {\n                color: lineOptions.color || this.color,\n                opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                width: lineOptions.width,\n                dashType: lineOptions.dashType,\n                lineCap: \"butt\"\n            }\n        };\n\n        for (var i = 0; i < lines.length; i++) {\n            var line = Path.fromPoints(lines[i], lineStyle);\n            alignPathToPixel(line);\n            container.append(line);\n        }\n    },\n\n    getBorderColor: function() {\n        var border = this.options.border;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(this.color).brightness(border._brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    createOverlay: function() {\n        var overlay = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null\n        });\n\n        this.visual.append(overlay);\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var normalColor = this.color;\n\n        this.color = highlight.color || this.color;\n        var overlay = this.mainVisual(\n            deepExtend({}, this.options, {\n                line: {\n                    color: this.getBorderColor()\n                }\n            }, highlight)\n        );\n        this.color = normalColor;\n\n        return overlay;\n    },\n\n    highlightVisual: function() {\n        return this._mainVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this._mainVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        var clipBox = this.owner.pane.clipBox() || box;\n\n        return {\n            point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n            align: {\n                horizontal: LEFT,\n                vertical: TOP\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    }\n});\n\nsetDefaultOptions(Candlestick, {\n    vertical: true,\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{4:d}</th></tr>\" +\n                    \"<tr><td>Open:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>High:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Low:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Close:</td><td>{3:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    }\n});\n\ndeepExtend(Candlestick.prototype, PointEventsMixin);\ndeepExtend(Candlestick.prototype, NoteMixin);\n\nfunction areNumbers(values) {\n    return countNumbers(values) === values.length;\n}\n\nvar CandlestickChart = CategoricalChart.extend({\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n            point.noteText = data.fields.noteText;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        return Candlestick;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var pointType = this.pointType();\n        var value = data.valueFields;\n        var pointOptions = deepExtend({}, series);\n        var color = data.fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(\n            pointOptions, value, category, categoryIx, series, seriesIx\n        );\n\n        if (series.type === CANDLESTICK) {\n            if (value.open > value.close) {\n                color = data.fields.downColor || series.downColor || series.color;\n            }\n        }\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.vertical = !this.options.invertAxes;\n\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        return point;\n    },\n\n    splitValue: function(value) {\n        return [ value.low, value.open, value.close, value.high ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var parts = this.splitValue(value);\n        var axisRange = this.valueAxisRanges[axisName];\n\n        axisRange = this.valueAxisRanges[axisName] =\n            axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n        axisRange = this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.open, value.high,\n            value.low, value.close, point.category\n        );\n    },\n\n    animationPoints: function() {\n        return this.points;\n    }\n});\n\ndeepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n\nvar BoxPlot = Candlestick.extend({\n    init: function(value, options) {\n        Candlestick.fn.init.call(this, value, options);\n\n        this.createNote();\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var whiskerSlot, boxSlot;\n\n        this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n        this.realBody = boxSlot;\n        this.reflowBoxSlot(box);\n\n        this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n        this.reflowWhiskerSlot(box);\n\n        var medianSlot = valueAxis.getSlot(value.median);\n\n        if (value.mean) {\n            var meanSlot = valueAxis.getSlot(value.mean);\n            this.meanPoints = this.calcMeanPoints(box, meanSlot);\n        }\n\n        this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n        this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n        this.box = whiskerSlot.clone().wrap(boxSlot);\n        this.reflowNote();\n    },\n\n    reflowBoxSlot: function(box) {\n        this.boxSlot.x1 = box.x1;\n        this.boxSlot.x2 = box.x2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.x1 = box.x1;\n        this.whiskerSlot.x2 = box.x2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().x;\n        return [ [\n            [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n            [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n        ], [\n            [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n            [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n        ];\n    },\n\n    renderOutliers: function(options) {\n        var this$1 = this;\n\n        var value = this.value;\n        var outliers = value.outliers || [];\n        var outerFence = Math.abs(value.q3 - value.q1) * 3;\n        var elements = [];\n        var markers = options.markers || {};\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i];\n            if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                markers = options.outliers;\n            } else {\n                markers = options.extremes;\n            }\n            var markersBorder = deepExtend({}, markers.border);\n\n            if (!defined(markersBorder.color)) {\n                if (defined(this$1.color)) {\n                    markersBorder.color = this$1.color;\n                } else {\n                    markersBorder.color =\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                }\n            }\n\n            var shape = new ShapeElement({\n                type: markers.type,\n                width: markers.size,\n                height: markers.size,\n                rotation: markers.rotation,\n                background: markers.background,\n                border: markersBorder,\n                opacity: markers.opacity\n            });\n\n            shape.value = outlierValue;\n\n            elements.push(shape);\n        }\n\n        this.reflowOutliers(elements);\n        return elements;\n    },\n\n    reflowOutliers: function(outliers) {\n        var this$1 = this;\n\n        var valueAxis = this.owner.seriesValueAxis(this.options);\n        var center = this.box.center();\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i].value;\n            var markerBox = valueAxis.getSlot(outlierValue);\n\n            if (this$1.options.vertical) {\n                markerBox.move(center.x);\n            } else {\n                markerBox.move(undefined, center.y);\n            }\n\n            this$1.box = this$1.box.wrap(markerBox);\n            outliers[i].reflow(markerBox);\n        }\n    },\n\n    mainVisual: function(options) {\n        var group = Candlestick.fn.mainVisual.call(this, options);\n        var outliers = this.renderOutliers(options);\n\n        for (var i = 0; i < outliers.length; i++) {\n            var element = outliers[i].getElement();\n            if (element) {\n                group.append(element);\n            }\n        }\n\n        return group;\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n        this.drawLines(container, options, this.medianPoints, options.median);\n        this.drawLines(container, options, this.meanPoints, options.mean);\n    },\n\n    getBorderColor: function() {\n        if ((this.options.border || {}).color) {\n            return this.options.border.color;\n        }\n\n        if (this.color) {\n            return this.color;\n        }\n\n        return Candlestick.fn.getBorderColor.call(this);\n    }\n});\n\nsetDefaultOptions(BoxPlot, {\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    median: {\n        color: \"#f6f6f6\"\n    },\n    mean: {\n        width: 2,\n        dashType: \"dash\",\n        color: \"#f6f6f6\"\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                    \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                    \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                    \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    },\n    outliers: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: datavizConstants.CROSS,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    },\n    extremes: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    }\n});\n\ndeepExtend(BoxPlot.prototype, PointEventsMixin);\n\nvar VerticalBoxPlot = BoxPlot.extend({\n    reflowBoxSlot: function(box) {\n        this.boxSlot.y1 = box.y1;\n        this.boxSlot.y2 = box.y2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.y1 = box.y1;\n        this.whiskerSlot.y2 = box.y2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ meanSlot.x1, box.y1 ], [ meanSlot.x1, box.y2 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().y;\n        return [ [\n            [ whiskerSlot.x1, mid - 5 ], [ whiskerSlot.x1, mid + 5 ],\n            [ whiskerSlot.x1, mid ], [ boxSlot.x1, mid ]\n        ], [\n            [ whiskerSlot.x2, mid - 5 ], [ whiskerSlot.x2, mid + 5 ],\n            [ whiskerSlot.x2, mid ], [ boxSlot.x2, mid ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ medianSlot.x1, box.y1 ], [ medianSlot.x1, box.y2 ] ]\n        ];\n    }\n});\n\nvar BoxPlotChart = CandlestickChart.extend({\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        if (this.options.invertAxes) {\n            return VerticalBoxPlot;\n        }\n\n        return BoxPlot;\n    },\n\n    splitValue: function(value) {\n        return [\n            value.lower, value.q1, value.median,\n            value.q3, value.upper\n        ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n        var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n        if (defined(value.mean)) {\n            parts = parts.concat(value.mean);\n        }\n\n        axisRange = this.valueAxisRanges[axisName] =\n            axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n        axisRange = this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.lower, value.q1, value.median,\n            value.q3, value.upper, value.mean, point.category\n        );\n    },\n\n    filterOutliers: function(items) {\n        var length = (items || []).length;\n        var result = [];\n\n        for (var i = 0; i < length; i++) {\n            var item = items[i];\n            if (defined(item) && item !== null) {\n                result.push(item);\n            }\n        }\n\n        return result;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar ScatterErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axes = this.chart.seriesAxes(this.series);\n        var axis = this.isVertical ? axes.y : axes.x;\n\n        return axis;\n    }\n});\n\nfunction hasValue(value) {\n    return defined(value) && value !== null;\n}\n\nvar ScatterChart = ChartElement.extend({\n    init: function(plotArea, options) {\n\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        // X and Y axis ranges grouped by name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.xAxisRanges = {};\n        this.yAxisRanges = {};\n\n        this.points = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    addErrorBar: function(point, field, fields) {\n        var value = point.value[field];\n        var valueErrorField = field + \"Value\";\n        var lowField = field + \"ErrorLow\";\n        var highField = field + \"ErrorHigh\";\n        var seriesIx = fields.seriesIx;\n        var series = fields.series;\n        var errorBars = point.options.errorBars;\n        var lowValue = fields[lowField];\n        var highValue = fields[highField];\n\n        if (isNumber(value)) {\n            var errorRange;\n            if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = { low: lowValue, high: highValue };\n            }\n\n            if (errorBars && defined(errorBars[valueErrorField])) {\n                this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] };\n                this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] ||\n                    new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n\n                errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n            }\n\n            if (errorRange) {\n                this.addPointErrorBar(errorRange, point, field);\n            }\n        }\n    },\n\n    addPointErrorBar: function(errorRange, point, field) {\n        var low = errorRange.low;\n        var high = errorRange.high;\n        var series = point.series;\n        var options = point.options.errorBars;\n        var isVertical = field === Y;\n        var item = {};\n\n        point[field + \"Low\"] = low;\n        point[field + \"High\"] = high;\n\n        point.errorBars = point.errorBars || [];\n        var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars.push(errorBar);\n        point.append(errorBar);\n\n        item[field] = low;\n        this.updateRange(item, series);\n        item[field] = high;\n        this.updateRange(item, series);\n    },\n\n    addValue: function(value, fields) {\n        var x = value.x;\n        var y = value.y;\n        var seriesIx = fields.seriesIx;\n        var series = this.options.series[seriesIx];\n        var missingValues = this.seriesMissingValues(series);\n        var seriesPoints = this.seriesPoints[seriesIx];\n\n        var pointValue = value;\n        if (!(hasValue(x) && hasValue(y))) {\n            pointValue = this.createMissingValue(pointValue, missingValues);\n        }\n\n        var point;\n        if (pointValue) {\n            point = this.createPoint(pointValue, fields);\n            if (point) {\n                $.extend(point, fields);\n                this.addErrorBar(point, X, fields);\n                this.addErrorBar(point, Y, fields);\n            }\n            this.updateRange(pointValue, fields.series);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues;\n    },\n\n    createMissingValue: function() {},\n\n    updateRange: function(value, series) {\n        var intlService = this.chartService.intl;\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var x = value.x;\n        var y = value.y;\n        var xAxisRange = this.xAxisRanges[xAxisName];\n        var yAxisRange = this.yAxisRanges[yAxisName];\n\n        if (hasValue(x)) {\n            xAxisRange = this.xAxisRanges[xAxisName] =\n                xAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(x)) {\n                x = parseDate(intlService, x);\n            }\n\n            xAxisRange.min = Math.min(xAxisRange.min, x);\n            xAxisRange.max = Math.max(xAxisRange.max, x);\n        }\n\n        if (hasValue(y)) {\n            yAxisRange = this.yAxisRanges[yAxisName] =\n                yAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(y)) {\n                y = parseDate(intlService, y);\n            }\n\n            yAxisRange.min = Math.min(yAxisRange.min, y);\n            yAxisRange.max = Math.max(yAxisRange.max, y);\n        }\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = { defaults: series._defaults, excluded: [ \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\" ] };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return {\n            x: xAxis,\n            y: yAxis\n        };\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var seriesAxes = this$1.seriesAxes(fields.series);\n            var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n            var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var seriesPoints = ref.seriesPoints;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var currentSeriesPoints = seriesPoints[seriesIx];\n            if (!currentSeriesPoints) {\n                seriesPoints[seriesIx] = [];\n            }\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1._bindPoint(currentSeries, seriesIx, pointIx);\n                var value = ref$1.valueFields;\n                var fields = ref$1.fields;\n\n                callback(value, deepExtend({\n                    pointIx: pointIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: currentSeries.data[pointIx],\n                    owner: this$1\n                }, fields));\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(ScatterChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}\"\n    },\n    labels: {\n        format: \"{0}, {1}\"\n    },\n    clip: true\n});\ndeepExtend(ScatterChart.prototype, ClipAnimationMixin, {\n    _bindPoint: CategoricalChart.prototype._bindPoint\n});\n\nvar Bubble = LinePoint.extend({\n    init: function(value, options) {\n        LinePoint.fn.init.call(this, value, options);\n\n        this.category = value.category;\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var border = highlight.border;\n        var markers = this.options.markers;\n        var center = this.box.center();\n        var radius = (markers.size + markers.border.width + border.width) / 2;\n        var highlightGroup = new Group();\n        var shadow = new drawing.Circle(new geometry.Circle([ center.x, center.y + radius / 5 + border.width / 2 ], radius + border.width / 2), {\n            stroke: {\n                color: 'none'\n            },\n            fill: this.createGradient({\n                gradient: 'bubbleShadow',\n                color: markers.background,\n                stops: [ {\n                    offset: 0,\n                    color: markers.background,\n                    opacity: 0.3\n                }, {\n                    offset: 1,\n                    color: markers.background,\n                    opacity: 0\n                } ]\n            })\n        });\n        var overlay = new drawing.Circle(new geometry.Circle([ center.x, center.y ], radius), {\n            stroke: {\n                color: border.color ||\n                    new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                width: border.width,\n                opacity: border.opacity\n            },\n            fill: {\n                color: markers.background,\n                opacity: highlight.opacity\n            }\n        });\n\n        highlightGroup.append(shadow, overlay);\n\n        return highlightGroup;\n    }\n});\n\nBubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n    labels: {\n        position: CENTER\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            color: \"#fff\",\n            width: 2,\n            opacity: 1\n        }\n    }\n});\n\nBubble.prototype.defaults.highlight.zIndex = undefined;\n\nvar BubbleChart = ScatterChart.extend({\n    _initFields: function() {\n        this._maxSize = MIN_VALUE;\n        ScatterChart.fn._initFields.call(this);\n    },\n\n    addValue: function(value, fields) {\n        if (value.size !== null && (value.size > 0 || (value.size < 0 && fields.series.negativeValues.visible))) {\n            this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n            ScatterChart.fn.addValue.call(this, value, fields);\n        } else {\n            this.points.push(null);\n            this.seriesPoints[fields.seriesIx].push(null);\n        }\n    },\n\n    reflow: function(box) {\n        this.updateBubblesSize(box);\n        ScatterChart.fn.reflow.call(this, box);\n    },\n\n    pointType: function() {\n        return Bubble;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointsCount = series.data.length;\n        var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n        var animationOptions = {\n            delay: delay,\n            duration: INITIAL_ANIMATION_DURATION - delay,\n            type: BUBBLE\n        };\n\n        var color = fields.color || series.color;\n        if (value.size < 0 && series.negativeValues.visible) {\n            color = valueOrDefault(\n                series.negativeValues.color, color\n            );\n        }\n\n        var pointOptions = deepExtend({\n            labels: {\n                animation: {\n                    delay: delay,\n                    duration: INITIAL_ANIMATION_DURATION - delay\n                }\n            }\n        }, this.pointOptions(series, fields.seriesIx), {\n            markers: {\n                type: CIRCLE,\n                border: series.border,\n                opacity: series.opacity,\n                animation: animationOptions\n            }\n        });\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.markers.background = color;\n\n        var point = new Bubble(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    updateBubblesSize: function(box) {\n        var this$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var boxSize = Math.min(box.width(), box.height());\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesPoints = this$1.seriesPoints[seriesIx];\n            var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n            var maxSize = currentSeries.maxSize || boxSize * 0.2;\n            var minR = minSize / 2;\n            var maxR = maxSize / 2;\n            var minArea = Math.PI * minR * minR;\n            var maxArea = Math.PI * maxR * maxR;\n            var areaRange = maxArea - minArea;\n            var areaRatio = areaRange / this$1._maxSize;\n\n            for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                var point = seriesPoints[pointIx];\n                if (point) {\n                    var area = Math.abs(point.value.size) * areaRatio;\n                    var radius = Math.sqrt((minArea + area) / Math.PI);\n                    var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                    var zIndex = baseZIndex + (1 - radius / maxR);\n\n                    deepExtend(point.options, {\n                        zIndex: zIndex,\n                        markers: {\n                            size: radius * 2,\n                            zIndex: zIndex\n                        },\n                        labels: {\n                            zIndex: zIndex + 1\n                        }\n                    });\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n    },\n\n    createAnimation: function() {},\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(BubbleChart, {\n    tooltip: {\n        format: \"{3}\"\n    },\n    labels: {\n        format: \"{3}\"\n    }\n});\n\nvar Target = ShapeElement.extend({\n\n});\n\ndeepExtend(Target.prototype, PointEventsMixin);\n\nvar Bullet = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.aboveAxis = this.options.aboveAxis;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        var options = this.options;\n\n        if (!this._rendered) {\n            this._rendered = true;\n\n            if (defined(this.value.target)) {\n                this.target = new Target({\n                    type: options.target.shape,\n                    background: options.target.color || this.color,\n                    opacity: options.opacity,\n                    zIndex: options.zIndex,\n                    border: options.target.border,\n                    vAlign: TOP,\n                    align: RIGHT\n                });\n\n                this.target.value = this.value;\n                this.target.dataItem = this.dataItem;\n                this.target.series = this.series;\n\n                this.append(this.target);\n            }\n\n            this.createNote();\n        }\n    },\n\n    reflow: function(box) {\n        this.render();\n\n        var ref = this;\n        var options = ref.options;\n        var target = ref.target;\n        var chart = ref.owner;\n        var invertAxes = options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.options);\n        var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n        var targetValueSlot = valueAxis.getSlot(this.value.target);\n        var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n        var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n        if (target) {\n            var targetSlot = new Box(\n                targetSlotX.x1, targetSlotY.y1,\n                targetSlotX.x2, targetSlotY.y2\n            );\n            target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n            target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n            target.reflow(targetSlot);\n        }\n\n        if (this.note) {\n            this.note.reflow(box);\n        }\n\n        this.box = box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        var body = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: options.border.color || this.color,\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        this.bodyVisual = body;\n\n        alignPathToPixel(body);\n        this.visual.append(body);\n    },\n\n    createAnimation: function() {\n        if (this.bodyVisual) {\n            this.animation = Animation.create(\n                this.bodyVisual, this.options.animation\n            );\n        }\n    },\n\n    createHighlight: function(style) {\n        return Path.fromRect(this.box.toRect(), style);\n    },\n\n    highlightVisual: function() {\n        return this.bodyVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            rect: this.box.toRect(),\n            visual: this.bodyVisual,\n            options: this.options\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    }\n});\n\nBullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\n\nsetDefaultOptions(Bullet, {\n    border: {\n        width: 1\n    },\n    vertical: false,\n    opacity: 1,\n    target: {\n        shape: \"\",\n        border: {\n            width: 0,\n            color: \"green\"\n        },\n        line: {\n            width: 2\n        }\n    },\n    tooltip: {\n        format: \"Current: {0}<br />Target: {1}\"\n    }\n});\n\ndeepExtend(Bullet.prototype, PointEventsMixin);\ndeepExtend(Bullet.prototype, NoteMixin);\n\nvar BulletChart = CategoricalChart.extend({\n    init: function(plotArea, options) {\n\n        wrapData(options);\n\n        CategoricalChart.fn.init.call(this, plotArea, options);\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    plotRange: function(point) {\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, point.value.current || axisCrossingValue ];\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var value = data.valueFields;\n\n        var bulletOptions = deepExtend({\n            vertical: !options.invertAxes,\n            overlay: series.overlay,\n            categoryIx: categoryIx,\n            invertAxes: options.invertAxes\n        }, series);\n\n        var color = data.fields.color || series.color;\n        bulletOptions = this.evalPointOptions(\n            bulletOptions, value, category, categoryIx, series, seriesIx\n        );\n\n        if (isFunction(series.color)) {\n            color = bulletOptions.color;\n        }\n\n        var bullet = new Bullet(value, bulletOptions);\n        bullet.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        cluster.append(bullet);\n\n        return bullet;\n    },\n\n    updateRange: function(value, fields) {\n        var current = value.current;\n        var target = value.target;\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, current, target);\n            axisRange.max = Math.max(axisRange.max, current, target);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value.current, point.value.target);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.current;\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value.current;\n\n        return value > 0;\n    },\n\n    createAnimation: function() {\n        var this$1 = this;\n\n        var points = this.points;\n\n        this._setAnimationOptions();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            point.options.animation = this$1.options.animation;\n            point.createAnimation();\n        }\n    }\n});\n\nBulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n\nsetDefaultOptions(BulletChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nfunction wrapData(options) {\n    var series = options.series;\n\n    for (var i = 0; i < series.length; i++) {\n        var seriesItem = series[i];\n        var data = seriesItem.data;\n        if (data && !isArray(data[0]) && !isObject(data[0])) {\n            seriesItem.data = [ data ];\n        }\n    }\n}\n\nvar BaseTooltip = Class.extend({\n    init: function(chartService, options) {\n\n        this.chartService = chartService;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    getStyle: function(options, point) {\n        var background = options.background;\n        var border = options.border.color;\n\n        if (point) {\n            var pointColor = point.color || point.options.color;\n            background = valueOrDefault(background, pointColor);\n            border = valueOrDefault(border, pointColor);\n        }\n\n        var padding = getSpacing(options.padding || {}, \"auto\");\n\n        return {\n            backgroundColor: background,\n            borderColor: border,\n            font: options.font,\n            color: options.color,\n            opacity: options.opacity,\n            borderWidth: styleValue(options.border.width),\n            paddingTop: styleValue(padding.top),\n            paddingBottom: styleValue(padding.bottom),\n            paddingLeft: styleValue(padding.left),\n            paddingRight: styleValue(padding.right)\n        };\n    },\n\n    show: function(options, tooltipOptions, point) {\n        options.format = tooltipOptions.format;\n\n        var style = this.getStyle(tooltipOptions, point);\n        options.style = style;\n\n        var background = new Color(style.backgroundColor);\n        if (!defined(tooltipOptions.color) && !background.isDark()) {\n            options.className = \"k-chart-tooltip-inverse\";\n        }\n\n        this.chartService.notify(SHOW_TOOLTIP, options);\n\n        this.visible = true;\n    },\n\n    hide: function() {\n        if (this.chartService) {\n            this.chartService.notify(HIDE_TOOLTIP);\n        }\n\n        this.visible = false;\n    },\n\n    destroy: function() {\n        delete this.chartService;\n    }\n});\n\nsetDefaultOptions(BaseTooltip, {\n    border: {\n        width: 1\n    },\n    opacity: 1\n});\n\nvar CrosshairTooltip = BaseTooltip.extend({\n    init: function(chartService, crosshair, options) {\n        BaseTooltip.fn.init.call(this, chartService, options);\n\n        this.crosshair = crosshair;\n        this.formatService = chartService.format;\n        this.initAxisName();\n    },\n\n    initAxisName: function() {\n        var axis = this.crosshair.axis;\n        var plotArea = axis.plotArea;\n        var name;\n        if (plotArea.categoryAxis) {\n            name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n        } else {\n            name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n        }\n        this.axisName = name;\n    },\n\n    showAt: function(point) {\n        var ref = this;\n        var axis = ref.crosshair.axis;\n        var options = ref.options;\n        var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n        var formattedValue = value;\n\n        if (options.format) {\n            formattedValue = this.formatService.auto(options.format, value);\n        } else if (axis.options.type === DATE) {\n            formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n        }\n\n        this.show({\n            point: point,\n            anchor: this.getAnchor(),\n            crosshair: this.crosshair,\n            value: formattedValue,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        }, this.options);\n    },\n\n    hide: function() {\n        this.chartService.notify(HIDE_TOOLTIP, {\n            crosshair: this.crosshair,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        });\n    },\n\n    getAnchor: function() {\n        var ref = this;\n        var crosshair = ref.crosshair;\n        var ref_options = ref.options;\n        var position = ref_options.position;\n        var padding = ref_options.padding;\n        var vertical = !crosshair.axis.options.vertical;\n        var lineBox = crosshair.line.bbox();\n        var horizontalAlign, verticalAlign, point;\n\n        if (vertical) {\n            horizontalAlign = CENTER;\n            if (position === BOTTOM) {\n                verticalAlign = TOP;\n                point = lineBox.bottomLeft().translate(0, padding);\n            } else {\n                verticalAlign = BOTTOM;\n                point = lineBox.topLeft().translate(0, -padding);\n            }\n        } else {\n            verticalAlign = CENTER;\n            if (position === LEFT) {\n                horizontalAlign = RIGHT;\n                point = lineBox.topLeft().translate(-padding, 0);\n            } else {\n                horizontalAlign = LEFT;\n                point = lineBox.topRight().translate(padding, 0);\n            }\n        }\n\n        return {\n            point: point,\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    }\n});\n\nsetDefaultOptions(CrosshairTooltip, {\n    padding: 10\n});\n\nvar Crosshair = ChartElement.extend({\n    init: function(chartService, axis, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.axis = axis;\n        this.stickyMode = axis instanceof CategoryAxis;\n\n        var tooltipOptions = this.options.tooltip;\n\n        if (tooltipOptions.visible) {\n            this.tooltip = new CrosshairTooltip(chartService, this,\n                deepExtend({}, tooltipOptions, { stickyMode: this.stickyMode })\n            );\n        }\n    },\n\n    showAt: function(point) {\n        this.point = point;\n        this.moveLine();\n        this.line.visible(true);\n\n        if (this.tooltip) {\n            this.tooltip.showAt(point);\n        }\n    },\n\n    hide: function() {\n        this.line.visible(false);\n\n        if (this.tooltip) {\n            this.tooltip.hide();\n        }\n    },\n\n    moveLine: function() {\n        var ref = this;\n        var axis = ref.axis;\n        var point = ref.point;\n        var vertical = axis.options.vertical;\n        var box = this.getBox();\n        var dim = vertical ? Y : X;\n        var lineStart = new GeometryPoint(box.x1, box.y1);\n        var lineEnd;\n\n        if (vertical) {\n            lineEnd = new GeometryPoint(box.x2, box.y1);\n        } else {\n            lineEnd = new GeometryPoint(box.x1, box.y2);\n        }\n\n        if (point) {\n            if (this.stickyMode) {\n                var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n            } else {\n                lineStart[dim] = lineEnd[dim] = point[dim];\n            }\n        }\n\n        this.box = box;\n\n        this.line.moveTo(lineStart).lineTo(lineEnd);\n    },\n\n    getBox: function() {\n        var axis = this.axis;\n        var axes = axis.pane.axes;\n        var length = axes.length;\n        var vertical = axis.options.vertical;\n        var box = axis.lineBox().clone();\n        var dim = vertical ? X : Y;\n        var axisLineBox;\n\n        for (var i = 0; i < length; i++) {\n            var currentAxis = axes[i];\n            if (currentAxis.options.vertical !== vertical) {\n                if (!axisLineBox) {\n                    axisLineBox = currentAxis.lineBox().clone();\n                } else {\n                    axisLineBox.wrap(currentAxis.lineBox());\n                }\n            }\n        }\n\n        box[dim + 1] = axisLineBox[dim + 1];\n        box[dim + 2] = axisLineBox[dim + 2];\n\n        return box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        this.line = new Path({\n            stroke: {\n                color: options.color,\n                width: options.width,\n                opacity: options.opacity,\n                dashType: options.dashType\n            },\n            visible: false\n        });\n\n        this.moveLine();\n        this.visual.append(this.line);\n    },\n\n    destroy: function() {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n\n        ChartElement.fn.destroy.call(this);\n    }\n});\n\nsetDefaultOptions(Crosshair, {\n    color: BLACK,\n    width: 2,\n    zIndex: -1,\n    tooltip: {\n        visible: false\n    }\n});\n\nvar ChartContainer = ChartElement.extend({\n    init: function(options, pane) {\n        ChartElement.fn.init.call(this, options);\n        this.pane = pane;\n    },\n\n    shouldClip: function() {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            if (children[i].options.clip === true) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _clipBox: function() {\n        return this.pane.chartsBox();\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: 0\n        });\n\n        if (this.shouldClip()) {\n            var clipBox = this.clipBox = this._clipBox();\n            var clipRect = clipBox.toRect();\n            var clipPath = Path.fromRect(clipRect);\n            alignPathToPixel(clipPath);\n\n            this.visual.clip(clipPath);\n            this.unclipLabels();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    unclipLabels: function() {\n        var ref = this;\n        var charts = ref.children;\n        var clipBox = ref.clipBox;\n\n        for (var i = 0; i < charts.length; i++) {\n            var points = charts[i].points || {};\n            var length = points.length;\n\n            for (var j = 0; j < length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                    if (point.unclipElements) {\n                        point.unclipElements();\n                    } else {\n                        var label = point.label;\n                        var note = point.note;\n\n                        if (label && label.options.visible) {\n                            if (label.alignToClipBox) {\n                                label.alignToClipBox(clipBox);\n                            }\n                            label.options.noclip = true;\n                        }\n\n                        if (note && note.options.visible) {\n                            note.options.noclip = true;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    destroy: function() {\n        ChartElement.fn.destroy.call(this);\n\n        delete this.parent;\n    }\n});\n\nChartContainer.prototype.isStackRoot = true;\n\nvar Pane = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.id = paneID();\n\n        this.createTitle();\n\n        this.content = new ChartElement();\n\n        this.chartContainer = new ChartContainer({}, this);\n        this.append(this.content);\n\n        this.axes = [];\n        this.charts = [];\n    },\n\n    createTitle: function() {\n        var titleOptions = this.options.title;\n        if (isObject(titleOptions)) {\n            titleOptions = deepExtend({}, titleOptions, {\n                align: titleOptions.position,\n                position: TOP\n            });\n        }\n\n        this.title = dataviz.Title.buildTitle(titleOptions, this, Pane.prototype.options.title);\n    },\n\n    appendAxis: function(axis) {\n        this.content.append(axis);\n        this.axes.push(axis);\n        axis.pane = this;\n    },\n\n    appendAxisAt: function(axis, pos) {\n        this.content.append(axis);\n        this.axes.splice(pos, 0, axis);\n        axis.pane = this;\n    },\n\n    appendChart: function(chart) {\n        if (this.chartContainer.parent !== this.content) {\n            this.content.append(this.chartContainer);\n        }\n\n        this.charts.push(chart);\n        this.chartContainer.append(chart);\n        chart.pane = this;\n    },\n\n    empty: function() {\n        var this$1 = this;\n\n        var plotArea = this.parent;\n\n        if (plotArea) {\n            for (var i = 0; i < this.axes.length; i++) {\n                plotArea.removeAxis(this$1.axes[i]);\n            }\n\n            for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                plotArea.removeChart(this$1.charts[i$1]);\n            }\n        }\n\n        this.axes = [];\n        this.charts = [];\n\n        this.content.destroy();\n        this.content.children = [];\n        this.chartContainer.children = [];\n    },\n\n    reflow: function(targetBox) {\n        // Content (such as charts) is rendered, but excluded from reflows\n        var content;\n        if (last(this.children) === this.content) {\n            content = this.children.pop();\n        }\n\n        BoxElement.fn.reflow.call(this, targetBox);\n\n        if (content) {\n            this.children.push(content);\n        }\n\n        if (this.title) {\n            this.contentBox.y1 += this.title.box.height();\n        }\n    },\n\n    visualStyle: function() {\n        var style = BoxElement.fn.visualStyle.call(this);\n        style.zIndex = -10;\n\n        return style;\n    },\n\n    renderComplete: function() {\n        if (this.options.visible) {\n            this.createGridLines();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    clipRoot: function() {\n        return this;\n    },\n\n    createGridLines: function() {\n        var axes = this.axes;\n        var allAxes = axes.concat(this.parent.axes);\n        var vGridLines = [];\n        var hGridLines = [];\n\n        // TODO\n        // Is full combination really necessary?\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var vertical = axis.options.vertical;\n            var gridLines = vertical ? vGridLines : hGridLines;\n            for (var j = 0; j < allAxes.length; j++) {\n                if (gridLines.length === 0) {\n                    var altAxis = allAxes[j];\n                    if (vertical !== altAxis.options.vertical) {\n                        append(gridLines, axis.createGridLines(altAxis));\n                    }\n                }\n            }\n        }\n    },\n\n    refresh: function() {\n        this.visual.clear();\n\n        this.content.parent = null;\n        this.content.createGradient = this.createGradient.bind(this);\n        this.content.renderVisual();\n        this.content.parent = this;\n\n        if (this.title) {\n            this.visual.append(this.title.visual);\n        }\n\n        this.visual.append(this.content.visual);\n\n        this.renderComplete();\n        this.notifyRender();\n    },\n\n    chartsBox: function() {\n        var axes = this.axes;\n        var length = axes.length;\n        var chartsBox = new Box();\n\n        for (var idx = 0; idx < length; idx++) {\n            var axis = axes[idx];\n            var axisValueField = axis.options.vertical ? Y : X;\n            var lineBox = axis.lineBox();\n            chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n            chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n        }\n\n        if (chartsBox.x2 === 0) {\n            var allAxes = this.parent.axes;\n            var length$1 = allAxes.length;\n\n            for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                var axis$1 = allAxes[idx$1];\n                if (!axis$1.options.vertical) {\n                    var lineBox$1 = axis$1.lineBox();\n                    chartsBox.x1 = lineBox$1.x1;\n                    chartsBox.x2 = lineBox$1.x2;\n                }\n            }\n        }\n        return chartsBox;\n    },\n\n    clipBox: function() {\n        return this.chartContainer.clipBox;\n    },\n\n    notifyRender: function() {\n        var service = this.getService();\n        if (service) {\n            service.notify(PANE_RENDER, {\n                pane: new ChartPane(this),\n                index: this.paneIndex,\n                name: this.options.name\n            });\n        }\n    }\n});\n\nvar ID = 1;\n\nfunction paneID() {\n    return \"pane\" + ID++;\n}\n\nPane.prototype.isStackRoot = true;\n\nsetDefaultOptions(Pane, {\n    zIndex: -1,\n    shrinkToFit: true,\n    title: {\n        align: LEFT\n    },\n    visible: true\n});\n\nfunction appendIfNotNull(array, element) {\n    if (element !== null) {\n        array.push(element);\n    }\n}\n\nfunction segmentVisible(series, fields, index) {\n    var visible = fields.visible;\n    if (defined(visible)) {\n        return visible;\n    }\n\n    var pointVisibility = series.pointVisibility;\n    if (pointVisibility) {\n        return pointVisibility[index];\n    }\n}\n\nfunction bindSegments(series) {\n    var data = series.data;\n    var points = [];\n    var sum = 0;\n    var count = 0;\n\n    for (var idx = 0; idx < data.length; idx++) {\n        var pointData = SeriesBinder.current.bindPoint(series, idx);\n        var value = pointData.valueFields.value;\n\n        if (isString(value)) {\n            value = parseFloat(value);\n        }\n\n        if (isNumber(value)) {\n            pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n\n            pointData.value = Math.abs(value);\n            points.push(pointData);\n\n            if (pointData.visible) {\n                sum += pointData.value;\n            }\n\n            if (value !== 0) {\n                count++;\n            }\n        } else {\n            points.push(null);\n        }\n    }\n\n    return {\n        total: sum,\n        points: points,\n        count: count\n    };\n}\n\nfunction equalsIgnoreCase(a, b) {\n    if (a && b) {\n        return a.toLowerCase() === b.toLowerCase();\n    }\n\n    return a === b;\n}\n\nfunction filterSeriesByType(series, types) {\n    var result = [];\n\n    var seriesTypes = [].concat(types);\n    for (var idx = 0; idx < series.length; idx++) {\n        var currentSeries = series[idx];\n        if (inArray(currentSeries.type, seriesTypes)) {\n            result.push(currentSeries);\n        }\n    }\n\n    return result;\n}\n\nfunction getDateField(field, row, intlService) {\n    if (row === null) {\n        return row;\n    }\n\n    var key = \"_date_\" + field;\n    var value = row[key];\n\n    if (!value) {\n        value = parseDate(intlService, getter(field, true)(row));\n        row[key] = value;\n    }\n\n    return value;\n}\n\nfunction isDateAxis(axisOptions, sampleCategory) {\n    var type = axisOptions.type;\n    var dateCategory = sampleCategory instanceof Date;\n\n    return (!type && dateCategory) || equalsIgnoreCase(type, DATE);\n}\n\nfunction singleItemOrArray(array) {\n    return array.length === 1 ? array[0] : array;\n}\n\nvar AREA_REGEX = /area/i;\n\nfunction seriesMissingValues(series) {\n    if (series.missingValues) {\n        return series.missingValues;\n    }\n\n    return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n}\n\nfunction hasValue$1(series, item) {\n    var fields = SeriesBinder.current.bindPoint(series, null, item);\n    var valueFields = fields.valueFields;\n\n    for (var field in valueFields) {\n        if (dataviz.convertableToNumber(valueFields[field])) {\n            return true;\n        }\n    }\n}\n\nfunction findNext(ref) {\n    var start = ref.start;\n    var dir = ref.dir;\n    var min = ref.min;\n    var max = ref.max;\n    var getter$$1 = ref.getter;\n    var hasItem = ref.hasItem;\n    var series = ref.series;\n\n    var pointHasValue, outPoint;\n    var idx = start;\n    do {\n        idx += dir;\n        //aggregating and binding the item takes too much time for large number of categories\n        //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n        if (hasItem(idx)) {\n            outPoint = getter$$1(idx);\n            pointHasValue = hasValue$1(series, outPoint.item);\n        }\n    } while (min <= idx && idx <= max && !pointHasValue);\n\n    if (pointHasValue) {\n        return outPoint;\n    }\n}\n\nfunction createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n    var min = range.min;\n    var max = range.max;\n    var hasMinPoint = min > 0 && min < count;\n    var hasMaxPoint = max + 1 < count;\n\n    if (hasMinPoint || hasMaxPoint) {\n        var missingValues = seriesMissingValues(series);\n        var minPoint, maxPoint;\n        if (missingValues !== INTERPOLATE) {\n            if (hasMinPoint) {\n                minPoint = getter$$1(min - 1);\n            }\n\n            if (hasMaxPoint) {\n                maxPoint = getter$$1(max + 1);\n            }\n        } else {\n            var outPoint, pointHasValue;\n            if (hasMinPoint) {\n                outPoint = getter$$1(min - 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    minPoint = findNext({\n                        start: min,\n                        dir: -1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    minPoint = outPoint;\n                }\n            }\n\n            if (hasMaxPoint) {\n                outPoint = getter$$1(max + 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    maxPoint = findNext({\n                        start: max,\n                        dir: 1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    maxPoint = outPoint;\n                }\n            }\n        }\n\n        if (minPoint) {\n            series._outOfRangeMinPoint = minPoint;\n        }\n\n        if (maxPoint) {\n            series._outOfRangeMaxPoint = maxPoint;\n        }\n    }\n}\n\nvar PlotAreaBase = ChartElement.extend({\n    init: function(series, options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.initFields(series, options);\n        this.series = series;\n        this.initSeries();\n        this.charts = [];\n        this.options.legend = this.options.legend || {};\n        this.options.legend.items = [];\n        this.axes = [];\n        this.crosshairs = [];\n        this.chartService = chartService;\n        this.originalOptions = options;\n\n        this.createPanes();\n        this.render();\n        this.createCrosshairs();\n    },\n\n    initFields: function() { },\n\n    initSeries: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            series[i].index = i;\n        }\n    },\n\n    createPanes: function() {\n        var this$1 = this;\n\n        var titleOptions = this.options.title || {};\n        var paneDefaults = this.options.paneDefaults;\n        var paneOptions = this.options.panes || [];\n        var panesLength = Math.max(paneOptions.length, 1);\n        var panes = [];\n\n        var defaults = deepExtend({\n            title: {\n                color: titleOptions.color\n            }\n        }, paneDefaults);\n\n        for (var i = 0; i < panesLength; i++) {\n            var options = deepExtend({}, defaults, paneOptions[i]);\n            if (isString(options.title)) {\n                options.title = deepExtend({ text: options.title }, defaults.title);\n            }\n\n            var currentPane = new Pane(options);\n            currentPane.paneIndex = i;\n\n            panes.push(currentPane);\n            this$1.append(currentPane);\n        }\n\n        this.panes = panes;\n    },\n\n    crosshairOptions: function(axis) {\n        return axis.options.crosshair;\n    },\n\n    createCrosshairs: function(panes) {\n        var this$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            for (var j = 0; j < pane.axes.length; j++) {\n                var axis = pane.axes[j];\n                var options = this$1.crosshairOptions(axis);\n                if (options && options.visible) {\n                    var currentCrosshair = new Crosshair(this$1.chartService, axis, options);\n\n                    this$1.crosshairs.push(currentCrosshair);\n                    pane.content.append(currentCrosshair);\n                }\n            }\n        }\n    },\n\n    removeCrosshairs: function(pane) {\n        var crosshairs = this.crosshairs;\n        var axes = pane.axes;\n\n        for (var i = crosshairs.length - 1; i >= 0; i--) {\n            for (var j = 0; j < axes.length; j++) {\n                if (crosshairs[i].axis === axes[j]) {\n                    crosshairs.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    },\n\n    hideCrosshairs: function() {\n        var crosshairs = this.crosshairs;\n        for (var idx = 0; idx < crosshairs.length; idx++) {\n            crosshairs[idx].hide();\n        }\n    },\n\n    findPane: function(name) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].options.name === name) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane || panes[0];\n    },\n\n    findPointPane: function(point) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].box.containsPoint(point)) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane;\n    },\n\n    appendAxis: function(axis) {\n        var pane = this.findPane(axis.options.pane);\n\n        pane.appendAxis(axis);\n        this.axes.push(axis);\n        axis.plotArea = this;\n    },\n\n    removeAxis: function(axisToRemove) {\n        var this$1 = this;\n\n        var filteredAxes = [];\n\n        for (var i = 0; i < this.axes.length; i++) {\n            var axis = this$1.axes[i];\n            if (axisToRemove !== axis) {\n                filteredAxes.push(axis);\n            } else {\n                axis.destroy();\n            }\n        }\n\n        this.axes = filteredAxes;\n    },\n\n    appendChart: function(chart, pane) {\n        this.charts.push(chart);\n        if (pane) {\n            pane.appendChart(chart);\n        } else {\n            this.append(chart);\n        }\n    },\n\n    removeChart: function(chartToRemove) {\n        var this$1 = this;\n\n        var filteredCharts = [];\n\n        for (var i = 0; i < this.charts.length; i++) {\n            var chart = this$1.charts[i];\n            if (chart !== chartToRemove) {\n                filteredCharts.push(chart);\n            } else {\n                chart.destroy();\n            }\n        }\n\n        this.charts = filteredCharts;\n    },\n\n    addToLegend: function(series) {\n        var count = series.length;\n        var legend = this.options.legend;\n        var labels = legend.labels || {};\n        var inactiveItems = legend.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n        var data = [];\n\n        for (var i = 0; i < count; i++) {\n            var currentSeries = series[i];\n            var seriesVisible = currentSeries.visible !== false;\n            if (currentSeries.visibleInLegend === false) {\n                continue;\n            }\n\n            var text = currentSeries.name;\n            var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: hasValue(text) ? text : \"\",\n                    series: currentSeries\n                });\n            }\n\n            var defaults = currentSeries._defaults;\n            var color = currentSeries.color;\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var itemLabelOptions = (void 0), markerColor = (void 0);\n            if (seriesVisible) {\n                itemLabelOptions = {};\n                markerColor = color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = inactiveItems.markers.color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                data.push({\n                    text: text,\n                    labels: itemLabelOptions,\n                    markerColor: markerColor,\n                    series: currentSeries,\n                    active: seriesVisible\n                });\n            }\n        }\n\n        append(legend.items, data);\n    },\n\n    groupAxes: function(panes) {\n        var xAxes = [];\n        var yAxes = [];\n\n        for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n            var paneAxes = panes[paneIx].axes;\n            for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                var axis = paneAxes[axisIx];\n                if (axis.options.vertical) {\n                    yAxes.push(axis);\n                } else {\n                    xAxes.push(axis);\n                }\n            }\n        }\n\n        return { x: xAxes, y: yAxes, any: xAxes.concat(yAxes) };\n    },\n\n    groupSeriesByPane: function() {\n        var this$1 = this;\n\n        var series = this.series;\n        var seriesByPane = {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var pane = this$1.seriesPaneName(currentSeries);\n\n            if (seriesByPane[pane]) {\n                seriesByPane[pane].push(currentSeries);\n            } else {\n                seriesByPane[pane] = [ currentSeries ];\n            }\n        }\n\n        return seriesByPane;\n    },\n\n    filterVisibleSeries: function(series) {\n        var result = [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (currentSeries.visible !== false) {\n                result.push(currentSeries);\n            }\n        }\n\n        return result;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options.plotArea;\n        var panes = this.panes;\n        var margin = getSpacing(options.margin);\n\n        this.box = targetBox.clone().unpad(margin);\n        this.reflowPanes();\n\n        this.detachLabels();\n        this.reflowAxes(panes);\n        this.reflowCharts(panes);\n    },\n\n    redraw: function(panes) {\n        var this$1 = this;\n\n        var panesArray = [].concat(panes);\n        this.initSeries();\n\n        //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n        var root = this.getRoot();\n        if (root) {\n            root.cleanGradients();\n        }\n\n        for (var i = 0; i < panesArray.length; i++) {\n            this$1.removeCrosshairs(panesArray[i]);\n            panesArray[i].empty();\n        }\n\n        this.render(panesArray);\n        this.detachLabels();\n        this.reflowAxes(this.panes);\n        this.reflowCharts(panesArray);\n\n        this.createCrosshairs(panesArray);\n\n        for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n            panesArray[i$1].refresh();\n        }\n    },\n\n    axisCrossingValues: function(axis, crossingAxes) {\n        var options = axis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n        var valuesToAdd = crossingAxes.length - crossingValues.length;\n        var defaultValue = crossingValues[0] || 0;\n\n        for (var i = 0; i < valuesToAdd; i++) {\n            crossingValues.push(defaultValue);\n        }\n\n        return crossingValues;\n    },\n\n    alignAxisTo: function(axis, targetAxis, crossingValue, targetCrossingValue) {\n        var slot = axis.getSlot(crossingValue, crossingValue, true);\n        var slotEdge = axis.options.reverse ? 2 : 1;\n        var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n        var targetEdge = targetAxis.options.reverse ? 2 : 1;\n        var axisBox = axis.box.translate(\n            targetSlot[X + targetEdge] - slot[X + slotEdge],\n            targetSlot[Y + targetEdge] - slot[Y + slotEdge]\n        );\n\n        if (axis.pane !== targetAxis.pane) {\n            axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n        }\n\n        axis.reflow(axisBox);\n    },\n\n    alignAxes: function(xAxes, yAxes) {\n        var this$1 = this;\n\n        var xAnchor = xAxes[0];\n        var yAnchor = yAxes[0];\n        var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n        var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n        var leftAnchors = {};\n        var rightAnchors = {};\n        var topAnchors = {};\n        var bottomAnchors = {};\n\n        for (var i = 0; i < yAxes.length; i++) {\n            var axis = yAxes[i];\n            var pane = axis.pane;\n            var paneId = pane.id;\n            var visible = axis.options.visible !== false;\n\n            // Locate pane anchor, if any, and use its axisCrossingValues\n            var anchor = paneAnchor(xAxes, pane) || xAnchor;\n            var anchorCrossings = xAnchorCrossings;\n\n            if (anchor !== xAnchor) {\n                anchorCrossings = this$1.axisCrossingValues(anchor, yAxes);\n            }\n\n            this$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n            if (axis.options._overlap) {\n                continue;\n            }\n\n            if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                // Push the axis to the left the previous y-axis so they don't overlap\n                if (leftAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(leftAnchors[paneId].box, LEFT)\n                        .translate(-axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    leftAnchors[paneId] = axis;\n                }\n            }\n\n            if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                // Flip the labels on the right if we're at the right end of the pane\n                if (!axis._mirrored) {\n                    axis.options.labels.mirror = !axis.options.labels.mirror;\n                    axis._mirrored = true;\n                }\n\n                this$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                // Push the axis to the right the previous y-axis so they don't overlap\n                if (rightAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(rightAnchors[paneId].box, RIGHT)\n                        .translate(axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    rightAnchors[paneId] = axis;\n                }\n            }\n\n            if (i !== 0 && yAnchor.pane === axis.pane) {\n                axis.alignTo(yAnchor);\n                axis.reflow(axis.box);\n            }\n        }\n\n        for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n            var axis$1 = xAxes[i$1];\n            var pane$1 = axis$1.pane;\n            var paneId$1 = pane$1.id;\n            var visible$1 = axis$1.options.visible !== false;\n\n            // Locate pane anchor and use its axisCrossingValues\n            var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n            var anchorCrossings$1 = yAnchorCrossings;\n            if (anchor$1 !== yAnchor) {\n                anchorCrossings$1 = this$1.axisCrossingValues(anchor$1, xAxes);\n            }\n\n            this$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n            if (axis$1.options._overlap) {\n                continue;\n            }\n\n            if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                // Flip the labels on top if we're at the top of the pane\n                if (!axis$1._mirrored) {\n                    axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                    axis$1._mirrored = true;\n                }\n                this$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                // Push the axis above the previous x-axis so they don't overlap\n                if (topAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(topAnchors[paneId$1].box, TOP)\n                        .translate(0, -axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    topAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (round(axis$1.lineBox().y2, datavizConstants.COORD_PRECISION) === round(anchor$1.lineBox().y2, datavizConstants.COORD_PRECISION)) {\n                // Push the axis below the previous x-axis so they don't overlap\n                if (bottomAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(bottomAnchors[paneId$1].box, BOTTOM)\n                        .translate(0, axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    bottomAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (i$1 !== 0) {\n                axis$1.alignTo(xAnchor);\n                axis$1.reflow(axis$1.box);\n            }\n        }\n    },\n\n    shrinkAxisWidth: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var axisBox = axisGroupBox(axes);\n        var overflowX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n\n            if (currentPane.axes.length > 0) {\n                overflowX = Math.max(\n                    overflowX,\n                    axisBox.width() - currentPane.contentBox.width()\n                );\n            }\n        }\n\n        if (overflowX !== 0) {\n            for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis = axes[i$1];\n\n                if (!currentAxis.options.vertical) {\n                    currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                }\n            }\n        }\n    },\n\n    shrinkAxisHeight: function(panes) {\n        var shrinked;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var axes = currentPane.axes;\n            var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n            if (overflowY !== 0) {\n                for (var j = 0; j < axes.length; j++) {\n                    var currentAxis = axes[j];\n\n                    if (currentAxis.options.vertical) {\n                        currentAxis.reflow(\n                            currentAxis.box.shrink(0, overflowY)\n                        );\n                    }\n                }\n                shrinked = true;\n            }\n        }\n\n        return shrinked;\n    },\n\n    fitAxes: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var offsetX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var paneAxes = currentPane.axes;\n            var paneBox = currentPane.contentBox;\n\n            if (paneAxes.length > 0) {\n                var axisBox = axisGroupBox(paneAxes);\n                // OffsetY is calculated and applied per pane\n                var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2);\n\n                // OffsetX is calculated and applied globally\n                offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                for (var j = 0; j < paneAxes.length; j++) {\n                    var currentAxis = paneAxes[j];\n\n                    currentAxis.reflow(\n                        currentAxis.box.translate(0, offsetY)\n                    );\n                }\n            }\n        }\n\n        for (var i$1 = 0; i$1 < axes.length; i$1++) {\n            var currentAxis$1 = axes[i$1];\n\n            currentAxis$1.reflow(\n                currentAxis$1.box.translate(offsetX, 0)\n            );\n        }\n    },\n\n    reflowAxes: function(panes) {\n        var this$1 = this;\n\n        var axes = this.groupAxes(panes);\n\n        for (var i = 0; i < panes.length; i++) {\n            this$1.reflowPaneAxes(panes[i]);\n        }\n\n        if (axes.x.length > 0 && axes.y.length > 0) {\n            this.alignAxes(axes.x, axes.y);\n            this.shrinkAxisWidth(panes);\n\n            this.autoRotateAxisLabels(axes);\n\n            this.alignAxes(axes.x, axes.y);\n            if (this.shrinkAxisWidth(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.shrinkAxisHeight(panes);\n            this.alignAxes(axes.x, axes.y);\n\n            if (this.shrinkAxisHeight(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.fitAxes(panes);\n        }\n    },\n\n    autoRotateAxisLabels: function(groupedAxes) {\n        var this$1 = this;\n\n        var ref = this;\n        var panes = ref.panes;\n        var axes = allPaneAxes(panes);\n        var rotated;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            if (axis.autoRotateLabels()) {\n                rotated = true;\n            }\n        }\n\n        if (rotated) {\n            for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                this$1.reflowPaneAxes(panes[idx$1]);\n            }\n\n            if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                this.alignAxes(groupedAxes.x, groupedAxes.y);\n                this.shrinkAxisWidth(panes);\n            }\n        }\n    },\n\n    reflowPaneAxes: function(pane) {\n        var axes = pane.axes;\n        var length = axes.length;\n\n        if (length > 0) {\n            for (var i = 0; i < length; i++) {\n                axes[i].reflow(pane.contentBox);\n            }\n        }\n    },\n\n    reflowCharts: function(panes) {\n        var charts = this.charts;\n        var count = charts.length;\n        var box = this.box;\n\n        for (var i = 0; i < count; i++) {\n            var chartPane = charts[i].pane;\n            if (!chartPane || inArray(chartPane, panes)) {\n                charts[i].reflow(box);\n            }\n        }\n    },\n\n    reflowPanes: function() {\n        var ref = this;\n        var box = ref.box;\n        var panes = ref.panes;\n        var panesLength = panes.length;\n        var remainingHeight = box.height();\n        var remainingPanes = panesLength;\n        var autoHeightPanes = 0;\n        var top = box.y1;\n\n        for (var i = 0; i < panesLength; i++) {\n            var currentPane = panes[i];\n            var height = currentPane.options.height;\n\n            currentPane.options.width = box.width();\n\n            if (!currentPane.options.height) {\n                autoHeightPanes++;\n            } else {\n                if (height.indexOf && height.indexOf(\"%\")) {\n                    var percents = parseInt(height, 10) / 100;\n                    currentPane.options.height = percents * box.height();\n                }\n\n                currentPane.reflow(box.clone());\n\n                remainingHeight -= currentPane.options.height;\n            }\n        }\n\n        for (var i$1 = 0; i$1 < panesLength; i$1++) {\n            var currentPane$1 = panes[i$1];\n\n            if (!currentPane$1.options.height) {\n                currentPane$1.options.height = remainingHeight / autoHeightPanes;\n            }\n        }\n\n        for (var i$2 = 0; i$2 < panesLength; i$2++) {\n            var currentPane$2 = panes[i$2];\n            var paneBox = box\n                .clone()\n                .move(box.x1, top);\n\n            currentPane$2.reflow(paneBox);\n\n            remainingPanes--;\n            top += currentPane$2.options.height;\n        }\n    },\n\n    backgroundBox: function() {\n        var axes = this.axes;\n        var axesCount = axes.length;\n        var box;\n\n        for (var i = 0; i < axesCount; i++) {\n            var axisA = axes[i];\n\n            for (var j = 0; j < axesCount; j++) {\n                var axisB = axes[j];\n\n                if (axisA.options.vertical !== axisB.options.vertical) {\n                    var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                    if (!box) {\n                        box = lineBox;\n                    } else {\n                        box = box.wrap(lineBox);\n                    }\n                }\n            }\n        }\n\n        return box || this.box;\n    },\n\n    chartsBoxes: function() {\n        var panes = this.panes;\n        var boxes = [];\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            boxes.push(panes[idx].chartsBox());\n        }\n\n        return boxes;\n    },\n\n    addBackgroundPaths: function(multipath) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n        }\n    },\n\n    backgroundContainsPoint: function(point) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            if (boxes[idx].containsPoint(point)) {\n                return true;\n            }\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options.plotArea;\n        var opacity = options.opacity;\n        var background = options.background;\n        var border = options.border; if (border === void 0) { border = {}; }\n        if (isTransparent(background)) {\n            background = WHITE;\n            opacity = 0;\n        }\n\n        var bg = this._bgVisual = new drawing.MultiPath({\n            fill: {\n                color: background,\n                opacity: opacity\n            },\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            zIndex: -1\n        });\n\n        this.addBackgroundPaths(bg);\n\n        this.appendVisual(bg);\n    },\n\n    pointsByCategoryIndex: function(categoryIndex) {\n        var charts = this.charts;\n        var result = [];\n\n        if (categoryIndex !== null) {\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                if (chart.pane.options.name === \"_navigator\") {\n                    continue;\n                }\n\n                var points = charts[i].categoryPoints[categoryIndex];\n                if (points && points.length) {\n                    for (var j = 0; j < points.length; j++) {\n                        var point = points[j];\n                        if (point && defined(point.value) && point.value !== null) {\n                            result.push(point);\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    },\n\n    pointsBySeriesIndex: function(seriesIndex) {\n        return this.filterPoints(function(point) {\n            return point.series.index === seriesIndex;\n        });\n    },\n\n    pointsBySeriesName: function(name) {\n        return this.filterPoints(function(point) {\n            return point.series.name === name;\n        });\n    },\n\n    filterPoints: function(callback) {\n        var charts = this.charts;\n        var result = [];\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    result.push(point);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    findPoint: function(callback) {\n        var charts = this.charts;\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    return point;\n                }\n            }\n        }\n    },\n\n    paneByPoint: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            if (pane.box.containsPoint(point)) {\n                return pane;\n            }\n        }\n    },\n\n    detachLabels: function() {\n        var axes = this.groupAxes(this.panes);\n        var xAxes = axes.x;\n        var yAxes = axes.y;\n\n        this.detachAxisGroupLabels(yAxes, xAxes);\n        this.detachAxisGroupLabels(xAxes, yAxes);\n    },\n\n    detachAxisGroupLabels: function(axes, crossingAxes) {\n        var this$1 = this;\n\n        var labelAxisCount = 0;\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var pane = axis.pane;\n            var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n            var axisIndex = i + labelAxisCount;\n            var labelAxis = this$1.createLabelAxis(axis, axisIndex, anchor);\n\n            if (labelAxis) {\n                labelAxisCount++;\n\n                var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                pane.appendAxisAt(labelAxis, pos);\n            }\n        }\n    },\n\n    createLabelAxis: function(axis, axisIndex, anchor) {\n        var labelOptions = axis.options.labels;\n        var position = labelOptions.position;\n        var onAxis = position !== datavizConstants.END && position !== datavizConstants.START;\n        var visible = labelOptions.visible;\n\n        if (onAxis || visible === false) {\n            return null;\n        }\n\n        var allAxes = this.groupAxes(this.panes);\n        var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n        var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n        var end = position === datavizConstants.END;\n        var range = anchor.range();\n        var edge = end ? range.max : range.min;\n        var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n        if (crossingValue - edge === 0) {\n            return null;\n        }\n\n        anchorCrossings.splice(axisIndex + 1, 0, edge);\n        anchor.options.axisCrossingValues = anchorCrossings;\n\n        var labelAxis = axis.clone();\n        axis.clear();\n\n        labelAxis.options.name = undefined;\n        labelAxis.options.line.visible = false;\n\n        labelAxis.options.crosshair = undefined;\n        labelAxis.options.notes = undefined;\n        labelAxis.options.plotBands = undefined;\n\n        return labelAxis;\n    }\n});\n\nfunction isSingleAxis(axis) {\n    return !axis.pane.axes.some(function (a) { return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false; }\n    );\n}\n\nfunction axisGroupBox(axes) {\n    var length = axes.length;\n    var box;\n\n    for (var i = 0; i < length; i++) {\n        var axis = axes[i];\n        var visible = axis.options.visible !== false;\n        if (visible || isSingleAxis(axis)) {\n            var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n            if (!box) {\n                box = axisBox.clone();\n            } else {\n                box.wrap(axisBox);\n            }\n        }\n    }\n\n    return box || new Box();\n}\n\nfunction paneAnchor(axes, pane) {\n    for (var i = 0; i < axes.length; i++) {\n        var anchor = axes[i];\n        if (anchor && anchor.pane === pane) {\n            return anchor;\n        }\n    }\n}\n\nfunction isTransparent(color) {\n    return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n}\n\nvar allPaneAxes = function (panes) { return panes.reduce(function (acc, pane) { return acc.concat(pane.axes); }, []); };\n\nsetDefaultOptions(PlotAreaBase, {\n    series: [],\n    plotArea: {\n        margin: {}\n    },\n    background: \"\",\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    paneDefaults: {\n        title: {}\n    },\n    legend: {\n        inactiveItems: {\n            labels: {\n                color: \"#919191\"\n            },\n            markers: {\n                color: \"#919191\"\n            }\n        }\n    }\n});\n\nvar PlotAreaEventsMixin = {\n    hover: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n    },\n\n    click: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n    }\n};\n\nvar SeriesAggregator = Class.extend({\n    init: function(series, binder, defaultAggregates) {\n\n        var canonicalFields = binder.canonicalFields(series);\n        var valueFields = binder.valueFields(series);\n        var sourceFields = binder.sourceFields(series, canonicalFields);\n        var seriesFields = this._seriesFields = [];\n        var defaults = defaultAggregates.query(series.type);\n        var rootAggregate = series.aggregate || defaults;\n\n        this._series = series;\n        this._binder = binder;\n\n        for (var i = 0; i < canonicalFields.length; i++) {\n            var field = canonicalFields[i];\n            var fieldAggregate = (void 0);\n\n            if (isObject(rootAggregate)) {\n                fieldAggregate = rootAggregate[field];\n            } else if (i === 0 || inArray(field, valueFields)) {\n                fieldAggregate = rootAggregate;\n            } else {\n                break;\n            }\n\n            if (fieldAggregate) {\n                seriesFields.push({\n                    canonicalName: field,\n                    name: sourceFields[i],\n                    transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                });\n            }\n        }\n    },\n\n    aggregatePoints: function(srcPoints, group) {\n        var this$1 = this;\n\n        var ref = this;\n        var series = ref._series;\n        var seriesFields = ref._seriesFields;\n        var data = this._bindPoints(srcPoints || []);\n        var firstDataItem = data.dataItems[0];\n        var result = {};\n\n        if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n            var fn = function() {};\n            fn.prototype = firstDataItem;\n            result = new fn();\n        }\n\n        for (var i = 0; i < seriesFields.length; i++) {\n            var field = seriesFields[i];\n            var srcValues = this$1._bindField(data.values, field.canonicalName);\n            var value = field.transform(srcValues, series, data.dataItems, group);\n\n            if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                result = value;\n                break;\n            } else {\n                if (defined(value)) {\n                    setValue(field.name, result, value);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    _bindPoints: function(points) {\n        var ref = this;\n        var binder = ref._binder;\n        var series = ref._series;\n        var values = [];\n        var dataItems = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var pointIx = points[i];\n\n            values.push(binder.bindPoint(series, pointIx));\n            dataItems.push(series.data[pointIx]);\n        }\n\n        return {\n            values: values,\n            dataItems: dataItems\n        };\n    },\n\n    _bindField: function(data, field) {\n        var values = [];\n        var count = data.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = data[i];\n            var valueFields = item.valueFields;\n            var value = (void 0);\n\n            if (defined(valueFields[field])) {\n                value = valueFields[field];\n            } else {\n                value = item.fields[field];\n            }\n\n            values.push(value);\n        }\n\n        return values;\n    }\n});\n\nfunction setValue(fieldName, target, value) {\n    var parentObj = target;\n    var field = fieldName;\n\n    if (fieldName.indexOf(\".\") > -1) {\n        var parts = fieldName.split(\".\");\n\n        while (parts.length > 1) {\n            field = parts.shift();\n            if (!defined(parentObj[field])) {\n                parentObj[field] = {};\n            }\n            parentObj = parentObj[field];\n        }\n        field = parts.shift();\n    }\n\n    parentObj[field] = value;\n}\n\nvar DefaultAggregates = Class.extend({\n    init: function() {\n\n        this._defaults = {};\n    },\n\n    register: function(seriesTypes, aggregates) {\n        var this$1 = this;\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            this$1._defaults[seriesTypes[i]] = aggregates;\n        }\n    },\n\n    query: function(seriesType) {\n        return this._defaults[seriesType];\n    }\n});\n\nDefaultAggregates.current = new DefaultAggregates();\n\nvar RangeBar = Bar.extend({\n    createLabel: function() {\n        var labels = this.options.labels;\n        var fromOptions = deepExtend({}, labels, labels.from);\n        var toOptions = deepExtend({}, labels, labels.to);\n\n        if (fromOptions.visible) {\n            this.labelFrom = this._createLabel(fromOptions);\n            this.append(this.labelFrom);\n        }\n\n        if (toOptions.visible) {\n            this.labelTo = this._createLabel(toOptions);\n            this.append(this.labelTo);\n        }\n    },\n\n    _createLabel: function(options) {\n        var labelTemplate = getTemplate(options);\n        var pointData = this.pointData();\n\n        var labelText;\n\n        if (labelTemplate) {\n            labelText = labelTemplate(pointData);\n        } else {\n            labelText = this.formatValue(options.format);\n        }\n\n        return new BarLabel(labelText,\n            deepExtend({\n                vertical: this.options.vertical\n            },\n            options\n        ), pointData);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var ref = this;\n        var labelFrom = ref.labelFrom;\n        var labelTo = ref.labelTo;\n        var value = ref.value;\n\n        this.box = targetBox;\n\n        if (labelFrom) {\n            labelFrom.options.aboveAxis = value.from > value.to;\n            labelFrom.reflow(targetBox);\n        }\n\n        if (labelTo) {\n            labelTo.options.aboveAxis = value.to > value.from;\n            labelTo.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n    }\n});\n\nRangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n    labels: {\n        format: \"{0} - {1}\"\n    },\n    tooltip: {\n        format: \"{1}\"\n    }\n});\n\nvar RangeBarChart = BarChart.extend({\n    pointType: function() {\n        return RangeBar;\n    },\n\n    pointValue: function(data) {\n        return data.valueFields;\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value.from === null && point.value.to === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value.from, point.value.to);\n    },\n\n    plotRange: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var from = value.from;\n        var to = value.to;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (value !== null && isNumber(from) && isNumber(to)) {\n            axisRange = this.valueAxisRanges[axisName] = axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, from);\n            axisRange.max = Math.max(axisRange.max, from);\n\n            axisRange.min = Math.min(axisRange.min, to);\n            axisRange.max = Math.max(axisRange.max, to);\n        }\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value;\n        return value.from < value.to;\n    }\n});\n\nRangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n\nvar RangeLinePoint = LinePoint.extend({\n    aliasFor: function() {\n        return this.parent;\n    }\n});\n\nvar AUTO = 'auto';\nvar DEFAULT_FROM_FORMAT = '{0}';\nvar DEFAULT_TO_FORMAT = '{1}';\n\nvar RangeAreaPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n        this.initLabelsFormat();\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n        var value = this.value;\n\n        var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.from,\n            markers: markers.from\n        }));\n\n        var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.to,\n            markers: markers.to\n        }));\n\n        this.copyFields(fromPoint);\n        this.copyFields(toPoint);\n\n        this.append(fromPoint);\n        this.append(toPoint);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var fromBox = targetBox.from;\n        var toBox = targetBox.to;\n\n        this.positionLabels(fromBox, toBox);\n\n        this.fromPoint.reflow(fromBox);\n        this.toPoint.reflow(toBox);\n\n        this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n    },\n\n    createHighlight: function() {\n        var group = new Group();\n        group.append(this.fromPoint.createHighlight());\n        group.append(this.toPoint.createHighlight());\n\n        return group;\n    },\n\n    highlightVisual: function() {\n        return this.visual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            from: this.fromPoint.highlightVisualArgs(),\n            to: this.toPoint.highlightVisualArgs()\n        };\n    },\n\n    tooltipAnchor: function() {\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n        if (showTooltip) {\n            var box = this.box;\n            var center = box.center();\n            var horizontalAlign = LEFT;\n            var x, y, verticalAlign;\n\n            if (this.options.vertical) {\n                x = center.x;\n                y = box.y1 - TOOLTIP_OFFSET;\n                verticalAlign = BOTTOM;\n            } else {\n                x = box.x2 + TOOLTIP_OFFSET;\n                y = center.y;\n                verticalAlign = CENTER;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        this.fromPoint.unclipElements();\n        this.toPoint.unclipElements();\n    },\n\n    initLabelsFormat: function() {\n        var labels = this.options.labels;\n        if (!labels.format) {\n            if (!labels.from || !labels.from.format) {\n                labels.from = $.extend({}, labels.from, {\n                    format: DEFAULT_FROM_FORMAT\n                });\n            }\n\n            if (!labels.to || !labels.to.format) {\n                labels.to = $.extend({}, labels.to, {\n                    format: DEFAULT_TO_FORMAT\n                });\n            }\n        }\n    },\n\n    positionLabels: function(fromBox, toBox) {\n        var ref = this.options;\n        var labels = ref.labels;\n        var vertical = ref.vertical;\n\n        if (labels.position === AUTO) {\n            var fromLabelPosition, toLabelPosition;\n            if (vertical) {\n                if (toBox.y1 <= fromBox.y1) {\n                    toLabelPosition = ABOVE;\n                    fromLabelPosition = BELOW;\n                } else {\n                    toLabelPosition = BELOW;\n                    fromLabelPosition = ABOVE;\n                }\n            } else {\n                if (toBox.x1 <= fromBox.x1) {\n                    toLabelPosition = LEFT;\n                    fromLabelPosition = RIGHT;\n                } else {\n                    toLabelPosition = RIGHT;\n                    fromLabelPosition = LEFT;\n                }\n            }\n\n            if (!labels.from || !labels.from.position) {\n                this.fromPoint.options.labels.position = fromLabelPosition;\n            }\n\n            if (!labels.to || !labels.to.position) {\n                this.toPoint.options.labels.position = toLabelPosition;\n            }\n        }\n    },\n\n    copyFields: function(point) {\n        point.dataItem = this.dataItem;\n        point.category = this.category;\n        point.series = this.series;\n        point.color = this.color;\n        point.owner = this.owner;\n    }\n});\n\ndeepExtend(RangeAreaPoint.prototype, PointEventsMixin);\ndeepExtend(RangeAreaPoint.prototype, NoteMixin);\n\nRangeAreaPoint.prototype.defaults = {\n    markers: {\n        visible: false,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        position: AUTO\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: WHITE,\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    tooltip: {\n        format: '{0} - {1}'\n    }\n};\n\nvar RangeAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n        }\n\n        return fromSegments;\n    },\n\n    createStroke: function(style) {\n        var toPath = new Path(style);\n        var fromPath = new Path(style);\n\n        toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n        fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n\n        this.visual.append(toPath);\n        this.visual.append(fromPath);\n    },\n\n    hasStackSegment: function() {\n        return true;\n    },\n\n    fromPoints: function() {\n        return this.linePoints.map(function (point) { return point.fromPoint; });\n    },\n\n    toPoints: function() {\n        return this.linePoints.map(function (point) { return point.toPoint; });\n    }\n});\n\nvar SplineRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.createCurveSegments(this.toPoints());\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n        }\n\n        return fromSegments;\n    },\n\n    createCurveSegments: function(points) {\n        var curveProcessor = new CurveProcessor();\n\n        return curveProcessor.process(this.toGeometryPoints(points));\n    }\n});\n\nvar StepRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n            fromSegments.reverse();\n        }\n\n        return fromSegments;\n    }\n});\n\ndeepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n\nvar RangeAreaChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return RangeAreaPoint;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var value = data.valueFields;\n\n        if (!hasValue(value.from) && !hasValue(value.to)) {\n            if (this.seriesMissingValues(series) === ZERO) {\n                value = {\n                    from: 0,\n                    to: 0\n                };\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(\n            pointOptions, value, category, categoryIx, series, seriesIx\n        );\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new RangeAreaPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segmentType;\n        if (style === \"smooth\") {\n            segmentType = SplineRangeAreaSegment;\n        } else if (style === \"step\") {\n            segmentType = StepRangeAreaSegment;\n        } else {\n            segmentType = RangeAreaSegment;\n        }\n\n        return new segmentType(linePoints, currentSeries, seriesIx);\n    },\n\n    plotRange: function(point, startValue) {\n        if (!point) {\n            return [ startValue, startValue ];\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n        var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n        if (fromSlot && toSlot) {\n            return {\n                from: fromSlot,\n                to: toSlot\n            };\n        }\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var from = valueSlot.from;\n        var to = valueSlot.to;\n        var fromSlot, toSlot;\n\n        if (this.options.invertAxes) {\n            fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n            toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n        } else {\n            fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n            toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n        }\n\n        return {\n            from: fromSlot,\n            to: toSlot\n        };\n    },\n\n    addValue: function(data, fields) {\n        var valueFields = data.valueFields;\n        if (!isNumber(valueFields.from)) {\n            valueFields.from = valueFields.to;\n        }\n\n        if (!isNumber(valueFields.to)) {\n            valueFields.to = valueFields.from;\n        }\n\n        CategoricalChart.fn.addValue.call(this, data, fields);\n    },\n\n    updateRange: function(value, fields) {\n        if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n            var from = value.from;\n            var to = value.to;\n\n            axisRange.min = Math.min(axisRange.min, from, to);\n            axisRange.max = Math.max(axisRange.max, from, to);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format, value.from, value.to);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point) {\n                result.push((point.fromPoint || {}).marker);\n                result.push((point.toPoint || {}).marker);\n            }\n        }\n\n        return result.concat(this._segments);\n    }\n});\n\ndeepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar OHLCPoint = Candlestick.extend({\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var oPoints = [];\n        var cPoints = [];\n        var lhPoints = [];\n\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n        var oSlot = valueAxis.getSlot(value.open, value.open);\n        var cSlot = valueAxis.getSlot(value.close, value.close);\n\n        oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n        oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n\n        var mid = lhSlot.center().x;\n\n        oPoints.push([ oSlot.x1, oSlot.y1 ]);\n        oPoints.push([ mid, oSlot.y1 ]);\n        cPoints.push([ mid, cSlot.y1 ]);\n        cPoints.push([ cSlot.x2, cSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y2 ]);\n\n        this.lines = [\n            oPoints, cPoints, lhPoints\n        ];\n\n        this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n\n        this.reflowNote();\n    },\n\n    createBody: function() {}\n});\n\nvar OHLCChart = CandlestickChart.extend({\n    pointType: function() {\n        return OHLCPoint;\n    }\n});\n\nvar WaterfallSegment = ChartElement.extend({\n    init: function(from, to, series) {\n        ChartElement.fn.init.call(this);\n\n        this.from = from;\n        this.to = to;\n        this.series = series;\n    },\n\n    linePoints: function() {\n        var from = this.from;\n        var ref = this;\n        var fromBox = ref.from.box;\n        var toBox = ref.to.box;\n        var points = [];\n\n        if (from.isVertical) {\n            var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n            points.push(\n                [ fromBox.x1, y ],\n                [ toBox.x2, y ]\n            );\n        } else {\n            var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n            points.push(\n                [ x, fromBox.y1 ],\n                [ x, toBox.y2 ]\n            );\n        }\n\n        return points;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var line = this.series.line || {};\n\n        var path = Path.fromPoints(this.linePoints(), {\n            stroke: {\n                color: line.color,\n                width: line.width,\n                opacity: line.opacity,\n                dashType: line.dashType\n            }\n        });\n\n        alignPathToPixel(path);\n        this.visual.append(path);\n    }\n});\n\nsetDefaultOptions(WaterfallSegment, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    }\n});\n\nvar WaterfallChart = BarChart.extend({\n    render: function() {\n        BarChart.fn.render.call(this);\n        this.createSegments();\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1 = this;\n\n        var series = this.options.series;\n        var totalCategories = categoriesCount(series);\n        var isVertical = !this.options.invertAxes;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var total = 0;\n            var runningTotal = 0;\n\n            for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                var value = data.valueFields.value;\n                var summary = data.fields.summary;\n                var from = total;\n                var to = (void 0);\n\n                if (summary) {\n                    if (summary.toLowerCase() === \"total\") {\n                        data.valueFields.value = total;\n                        from = 0;\n                        to = total;\n                    } else {\n                        data.valueFields.value = runningTotal;\n                        to = from - runningTotal;\n                        runningTotal = 0;\n                    }\n                } else if (isNumber(value)) {\n                    runningTotal += value;\n                    total += value;\n                    to = total;\n                }\n\n                callback(data, {\n                    category: this$1.categoryAxis.categoryAt(categoryIx),\n                    categoryIx: categoryIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    total: total,\n                    runningTotal: runningTotal,\n                    from: from,\n                    to: to,\n                    isVertical: isVertical\n                });\n            }\n        }\n    },\n\n    updateRange: function(value, fields) {\n        BarChart.fn.updateRange.call(this, { value: fields.to }, fields);\n    },\n\n    aboveAxis: function(point) {\n        return point.value >= 0;\n    },\n\n    plotRange: function(point) {\n        return [ point.from, point.to ];\n    },\n\n    createSegments: function() {\n        var this$1 = this;\n\n        var series = this.options.series;\n        var seriesPoints = this.seriesPoints;\n        var segments = this.segments = [];\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var points = seriesPoints[seriesIx];\n\n            if (points) {\n                var prevPoint = (void 0);\n                for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                    var point = points[pointIx];\n\n                    if (point && prevPoint) {\n                        var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                        segments.push(segment);\n                        this$1.append(segment);\n                    }\n\n                    prevPoint = point;\n                }\n            }\n        }\n    }\n});\n\nvar AREA_SERIES = [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA ];\nvar OUT_OF_RANGE_SERIES = [ LINE, VERTICAL_LINE ].concat(AREA_SERIES);\n\nvar CategoricalPlotArea = PlotAreaBase.extend({\n    initFields: function(series) {\n        var this$1 = this;\n\n        this.namedCategoryAxes = {};\n        this.namedValueAxes = {};\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n\n        if (series.length > 0) {\n            this.invertAxes = inArray(\n                series[0].type, [ BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA,\n                                 RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT ]\n            );\n\n            for (var i = 0; i < series.length; i++) {\n                var stack = series[i].stack;\n                if (stack && stack.type === \"100%\") {\n                    this$1.stack100 = true;\n                    break;\n                }\n            }\n        }\n\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.createCategoryAxes(panes);\n        this.aggregateCategories(panes);\n        this.createCategoryAxesLabels(panes);\n        this.createCharts(panes);\n        this.createValueAxes(panes);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis instanceof CategoryAxis) {\n            delete this.namedCategoryAxes[axisName];\n        } else {\n            this.valueAxisRangeTracker.reset(axisName);\n            delete this.namedValueAxes[axisName];\n        }\n\n        if (axis === this.categoryAxis) {\n            delete this.categoryAxis;\n        }\n\n        if (axis === this.valueAxis) {\n            delete this.valueAxis;\n        }\n    },\n\n    createCharts: function(panes) {\n        var this$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1.addToLegend(paneSeries);\n\n            var visibleSeries = this$1.filterVisibleSeries(paneSeries);\n            if (!visibleSeries) {\n                continue;\n            }\n\n            var groups = this$1.groupSeriesByCategoryAxis(visibleSeries);\n            for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                this$1.createChartGroup(groups[groupIx], pane);\n            }\n        }\n    },\n\n    createChartGroup: function(series, pane) {\n        this.createAreaChart(\n            filterSeriesByType(series, [ AREA, VERTICAL_AREA ]), pane\n        );\n\n        this.createRangeAreaChart(\n            filterSeriesByType(series, [ RANGE_AREA, VERTICAL_RANGE_AREA ]), pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ COLUMN, BAR ]), pane\n        );\n\n        this.createRangeBarChart(\n            filterSeriesByType(series, [ RANGE_COLUMN, RANGE_BAR ]), pane\n        );\n\n        this.createBulletChart(\n            filterSeriesByType(series, [ BULLET, VERTICAL_BULLET ]), pane\n        );\n\n        this.createCandlestickChart(\n            filterSeriesByType(series, CANDLESTICK), pane\n        );\n\n        this.createBoxPlotChart(\n            filterSeriesByType(series, [ BOX_PLOT, VERTICAL_BOX_PLOT ]), pane\n        );\n\n        this.createOHLCChart(\n            filterSeriesByType(series, OHLC), pane\n        );\n\n        this.createWaterfallChart(\n            filterSeriesByType(series, [ WATERFALL, HORIZONTAL_WATERFALL ]), pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ LINE, VERTICAL_LINE ]), pane\n        );\n    },\n\n    aggregateCategories: function(panes) {\n        var this$1 = this;\n\n        var series = this.srcSeries || this.series;\n        var processedSeries = [];\n        this._currentPointsCache = {};\n        this._seriesPointsCache = this._seriesPointsCache || {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var categoryAxis = this$1.seriesCategoryAxis(currentSeries);\n            var axisPane = this$1.findPane(categoryAxis.options.pane);\n            var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n            if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                currentSeries = this$1.aggregateSeries(currentSeries, categoryAxis);\n            } else {\n                currentSeries = this$1.filterSeries(currentSeries, categoryAxis);\n            }\n\n            processedSeries.push(currentSeries);\n        }\n\n        this._seriesPointsCache = this._currentPointsCache;\n        this._currentPointsCache = null;\n\n        this.srcSeries = series;\n        this.series = processedSeries;\n    },\n\n    filterSeries: function(series, categoryAxis) {\n        var dataLength = (series.data || {}).length;\n        categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n        if (!(isNumber(categoryAxis.options.min) || isNumber(categoryAxis.options.max))) {\n            return series;\n        }\n\n        var range = categoryAxis.currentRangeIndices();\n        var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n        var currentSeries = deepExtend({}, series);\n\n        currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n        if (outOfRangePoints) {\n            createOutOfRangePoints(currentSeries, range, dataLength, function (idx) { return ({\n                item: series.data[idx],\n                category: categoryAxis.categoryAt(idx, true),\n                categoryIx: idx - range.min\n            }); }, function (idx) { return defined(series.data[idx]); });\n        }\n\n        return currentSeries;\n    },\n\n    clearSeriesPointsCache: function() {\n        this._seriesPointsCache = {};\n    },\n\n    seriesSourcePoints: function(series, categoryAxis) {\n        var this$1 = this;\n\n        var key = (series.index) + \";\" + (categoryAxis.categoriesHash());\n        if (this._seriesPointsCache[key]) {\n            this._currentPointsCache[key] = this._seriesPointsCache[key];\n            return this._seriesPointsCache[key];\n        }\n\n        var axisOptions = categoryAxis.options;\n        var srcCategories = axisOptions.srcCategories;\n        var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n        var srcData = series.data;\n        var getFn = dateAxis ? getDateField : getField;\n        var result = [];\n        if (!dateAxis) {\n            categoryAxis.mapCategories();//fixes major performance issue caused by searching for the index for large data\n        }\n\n        for (var idx = 0; idx < srcData.length; idx++) {\n            var category = (void 0);\n            if (series.categoryField) {\n                category = getFn(series.categoryField, srcData[idx], this$1.chartService.intl);\n            } else {\n                category = srcCategories[idx];\n            }\n\n            if (defined(category) && category !== null) {\n                var categoryIx = categoryAxis.totalIndex(category);\n                result[categoryIx] = result[categoryIx] || { items: [], category: category };\n                result[categoryIx].items.push(idx);\n            }\n        }\n\n        this._currentPointsCache[key] = result;\n\n        return result;\n    },\n\n    aggregateSeries: function(series, categoryAxis) {\n        var srcData = series.data;\n        if (!srcData.length) {\n            return series;\n        }\n\n        var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n        var result = deepExtend({}, series);\n        var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n        var data = result.data = [];\n        var dataItems = categoryAxis.options.dataItems || [];\n\n        var range = categoryAxis.currentRangeIndices();\n        var categoryItem = function (idx) {\n            var categoryIdx = idx - range.min;\n            var point = srcPoints[idx];\n            if (!point) {\n                point = srcPoints[idx] = {};\n            }\n\n            point.categoryIx = categoryIdx;\n\n            if (!point.item) {\n                var category = categoryAxis.categoryAt(idx, true);\n                point.category = category;\n                point.item = aggregator.aggregatePoints(point.items, category);\n            }\n\n            return point;\n        };\n\n        for (var idx = range.min; idx <= range.max; idx++) {\n            var point = categoryItem(idx);\n            data[point.categoryIx] = point.item;\n\n            if (point.items && point.items.length) {\n                dataItems[point.categoryIx] = point.item;\n            }\n        }\n\n        if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n            createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) { return srcPoints[idx]; });\n        }\n\n        categoryAxis.options.dataItems = dataItems;\n\n        return result;\n    },\n\n    appendChart: function(chart, pane) {\n        var series = chart.options.series;\n        var categoryAxis = this.seriesCategoryAxis(series[0]);\n        var categories = categoryAxis.options.categories;\n        var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n        if (categoriesToAdd > 0) {//consider setting an option to axis instead of adding fake categories\n            categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n            while (categoriesToAdd--) {\n                categories.push(\"\");\n            }\n        }\n\n        this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var axisName = series.axis;\n        var axisOptions = [].concat(options.valueAxis);\n        var axis = grep(axisOptions, function(a) { return a.name === axisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = (panes[0] || {}).name || \"default\";\n        var paneName = (axis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesCategoryAxis: function(series) {\n        var axisName = series.categoryAxis;\n        var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate category axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    stackableChartOptions: function(firstSeries, pane) {\n        var stack = firstSeries.stack;\n        var isStacked100 = stack && stack.type === \"100%\";\n        var clip = pane.options.clip;\n\n        return {\n            isStacked: stack,\n            isStacked100: isStacked100,\n            clip: clip\n        };\n    },\n\n    groupSeriesByCategoryAxis: function(series) {\n        var categoryAxes = [];\n        var unique = {};\n        for (var idx = 0; idx < series.length; idx++) {\n            var name = series[idx].categoryAxis || \"$$default$$\";\n            if (!unique.hasOwnProperty(name)) {\n                unique[name] = true;\n                categoryAxes.push(name);\n            }\n        }\n\n        var groups = [];\n        for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n            var axis = categoryAxes[axisIx];\n            var axisSeries = groupSeries(series, axis, axisIx);\n            if (axisSeries.length === 0) {\n                continue;\n            }\n\n            groups.push(axisSeries);\n        }\n\n        return groups;\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var barChart = new BarChart(this, $.extend({\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(barChart, pane);\n    },\n\n    createRangeBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var rangeColumnChart = new RangeBarChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(rangeColumnChart, pane);\n    },\n\n    createBulletChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var bulletChart = new BulletChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(bulletChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var lineChart = new LineChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var areaChart = new AreaChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(areaChart, pane);\n    },\n\n    createRangeAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var rangeAreaChart = new RangeAreaChart(this, {\n            invertAxes: this.invertAxes,\n            series: series,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(rangeAreaChart, pane);\n    },\n\n    createOHLCChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new OHLCChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createCandlestickChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new CandlestickChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createBoxPlotChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new BoxPlotChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createWaterfallChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var waterfallChart = new WaterfallChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(waterfallChart, pane);\n    },\n\n    axisRequiresRounding: function(categoryAxisName, categoryAxisIndex) {\n        var this$1 = this;\n\n        var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n        for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n            var currentSeries = this$1.series[seriesIx];\n            if (inArray(currentSeries.type, AREA_SERIES)) {\n                var line = currentSeries.line;\n                if (line && line.style === STEP) {\n                    centeredSeries.push(currentSeries);\n                }\n            }\n        }\n\n        for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n            var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n            if (seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) {\n                return true;\n            }\n        }\n    },\n\n    aggregatedAxis: function(categoryAxisName, categoryAxisIndex) {\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var seriesAxis = series[seriesIx].categoryAxis || \"\";\n            if ((seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) && series[seriesIx].categoryField) {\n                return true;\n            }\n        }\n    },\n\n    createCategoryAxesLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            if (axes[i] instanceof CategoryAxis) {\n                axes[i].createLabels();\n            }\n        }\n    },\n\n    createCategoryAxes: function(panes) {\n        var this$1 = this;\n\n        var invertAxes = this.invertAxes;\n        var definitions = [].concat(this.options.categoryAxis);\n        var axes = [];\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var categories = axisOptions.categories; if (categories === void 0) { categories = []; }\n                axisOptions = deepExtend({\n                    vertical: invertAxes,\n                    reverse: !invertAxes && this$1.chartService.rtl,\n                    axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                }, axisOptions);\n\n                if (!defined(axisOptions.justified)) {\n                    axisOptions.justified = this$1.isJustified();\n                }\n\n                if (this$1.axisRequiresRounding(name, i)) {\n                    axisOptions.justified = false;\n                }\n\n                var categoryAxis = (void 0);\n\n                if (isDateAxis(axisOptions, categories[0])) {\n                    categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1.chartService);\n                } else {\n                    categoryAxis = new CategoryAxis(axisOptions, this$1.chartService);\n                }\n\n                definitions[i].categories = categoryAxis.options.srcCategories;\n\n                if (name) {\n                    if (this$1.namedCategoryAxes[name]) {\n                        throw new Error((\"Category axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1.namedCategoryAxes[name] = categoryAxis;\n                }\n\n                categoryAxis.axisIndex = i;\n                axes.push(categoryAxis);\n                this$1.appendAxis(categoryAxis);\n            }\n        }\n\n        var primaryAxis = this.categoryAxis || axes[0];\n        this.categoryAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisY = primaryAxis;\n        } else {\n            this.axisX = primaryAxis;\n        }\n    },\n\n    isJustified: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (!inArray(currentSeries.type, AREA_SERIES)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    createValueAxes: function(panes) {\n        var this$1 = this;\n\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var definitions = [].concat(this.options.valueAxis);\n        var invertAxes = this.invertAxes;\n        var baseOptions = { vertical: !invertAxes, reverse: invertAxes && this.chartService.rtl };\n        var axes = [];\n\n        if (this.stack100) {\n            baseOptions.roundToMajorUnit = false;\n            baseOptions.labels = { format: \"P0\" };\n        }\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n                var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                if (i === 0 && range && defaultRange) {\n                    range.min = Math.min(range.min, defaultRange.min);\n                    range.max = Math.max(range.max, defaultRange.max);\n                }\n\n                var axisType = (void 0);\n                if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                    axisType = dataviz.LogarithmicAxis;\n                } else {\n                    axisType = dataviz.NumericAxis;\n                }\n\n                var valueAxis = new axisType(range.min, range.max,\n                    deepExtend({}, baseOptions, axisOptions),\n                    this$1.chartService\n                );\n\n                if (name) {\n                    if (this$1.namedValueAxes[name]) {\n                        throw new Error((\"Value axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1.namedValueAxes[name] = valueAxis;\n                }\n                valueAxis.axisIndex = i;\n\n                axes.push(valueAxis);\n                this$1.appendAxis(valueAxis);\n            }\n        }\n\n        var primaryAxis = this.valueAxis || axes[0];\n        this.valueAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisX = primaryAxis;\n        } else {\n            this.axisY = primaryAxis;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var pane = this.pointPane(point);\n        var categories = [];\n        var values = [];\n\n        if (!pane) {\n            return;\n        }\n\n        var allAxes = pane.axes;\n        for (var i = 0; i < allAxes.length; i++) {\n            var axis = allAxes[i];\n            if (axis.getValue) {\n                appendIfNotNull(values, axis.getValue(point));\n            } else {\n                appendIfNotNull(categories, axis.getCategory(point));\n            }\n        }\n\n        if (categories.length === 0) {\n            appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n        }\n\n        if (categories.length > 0 && values.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                category: singleItemOrArray(categories),\n                value: singleItemOrArray(values)\n            });\n        }\n    },\n\n    pointPane: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            if (currentPane.contentBox.containsPoint(point)) {\n                return currentPane;\n            }\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        updateAxisOptions(this.options, axis, options);\n        updateAxisOptions(this.originalOptions, axis, options);\n    }\n});\n\nfunction updateAxisOptions(targetOptions, axis, options) {\n    var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n    deepExtend(axesOptions[axis.axisIndex], options);\n}\n\nfunction groupSeries(series, axis, axisIx) {\n    return grep(series, function(s) {\n        return (axisIx === 0 && !s.categoryAxis) || (s.categoryAxis === axis);\n    });\n}\n\nsetDefaultOptions(CategoricalPlotArea, {\n    categoryAxis: {},\n    valueAxis: {}\n});\n\ndeepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n\nvar Highlight = Class.extend({\n    init: function() {\n\n        this._points = [];\n    },\n\n    destroy: function() {\n        this._points = [];\n    },\n\n    show: function(points, opacity) {\n        var this$1 = this;\n\n        var arrayPoints = [].concat(points);\n        this.hide();\n\n        for (var i = 0; i < arrayPoints.length; i++) {\n            var point = arrayPoints[i];\n            if (point && point.toggleHighlight && point.hasHighlight()) {\n                this$1.togglePointHighlight(point, true, opacity);\n                this$1._points.push(point);\n            }\n        }\n    },\n\n    togglePointHighlight: function(point, show, opacity) {\n        var toggleHandler = (point.options.highlight || {}).toggle;\n        if (toggleHandler) {\n            var eventArgs = {\n                category: point.category,\n                series: point.series,\n                dataItem: point.dataItem,\n                value: point.value,\n                stackValue: point.stackValue,\n                preventDefault: preventDefault,\n                visual: point.highlightVisual(),\n                show: show\n            };\n            toggleHandler(eventArgs);\n            if (!eventArgs._defaultPrevented) {\n                point.toggleHighlight(show, opacity);\n            }\n        } else {\n            point.toggleHighlight(show, opacity);\n        }\n    },\n\n    hide: function() {\n        var this$1 = this;\n\n        var points = this._points;\n        while (points.length) {\n            this$1.togglePointHighlight(points.pop(), false);\n        }\n    },\n\n    isHighlighted: function(element) {\n        var points = this._points;\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            if (element === point) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n});\n\nfunction preventDefault() {\n    this._defaultPrevented = true;\n}\n\nfunction acceptKey(e, mouseKey) {\n    var key = (mouseKey || \"\").toLowerCase();\n    var event = e.event;\n    var accept = (key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey)) || event[key + \"Key\"];\n\n    return accept;\n}\n\nfunction toChartAxisRanges(axisRanges) {\n    var ranges = {};\n    for (var idx = 0; idx < axisRanges.length; idx++) {\n        var axisRange = axisRanges[idx];\n        if (axisRange.axis.options.name) {\n            ranges[axisRange.axis.options.name] = {\n                min: axisRange.range.min,\n                max: axisRange.range.max\n            };\n        }\n    }\n    return ranges;\n}\n\nvar Pannable = Class.extend({\n    init: function(plotArea, options) {\n\n        this.plotArea = plotArea;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    start: function(e) {\n        this._active = acceptKey(e, this.options.key);\n        return this._active;\n    },\n\n    move: function(e) {\n        if (this._active) {\n            var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n            if (axisRanges.length) {\n                this.axisRanges = axisRanges;\n                return toChartAxisRanges(axisRanges);\n            }\n        }\n    },\n\n    end: function() {\n        var active = this._active;\n        this._active = false;\n\n        return active;\n    },\n\n    pan: function() {\n        var ref = this;\n        var plotArea = ref.plotArea;\n        var axisRanges = ref.axisRanges;\n        if (axisRanges.length) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var range = axisRanges[idx];\n                plotArea.updateAxisOptions(range.axis, range.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.plotArea;\n    },\n\n    _panAxes: function(e, position) {\n        var plotArea = this.plotArea;\n        var delta = -e[position].delta;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var updatedAxes = [];\n\n        if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n            var axes = plotArea.axes;\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n\n                if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                    var range = axis.pan(delta);\n\n                    if (range) {\n                        range.limitRange = true;\n                        updatedAxes.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n        }\n\n        return updatedAxes;\n    }\n});\n\nPannable.prototype.options = {\n    key: \"none\",\n    lock: \"none\"\n};\n\nvar ZoomSelection = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({}, this.options, options);\n        this.createElement();\n    },\n\n    createElement: function() {\n        var marquee = this._marquee = document.createElement(\"div\");\n        marquee.className = \"k-marquee\";\n        var marqueeColor = document.createElement(\"div\");\n        marqueeColor.className = \"k-marquee-color\";\n        marquee.appendChild(marqueeColor);\n    },\n\n    removeElement: function() {\n        if (this._marquee.parentNode) {\n            this._marquee.parentNode.removeChild(this._marquee);\n        }\n    },\n\n    setStyles: function(styles) {\n        elementStyles(this._marquee, styles);\n    },\n\n    start: function(e) {\n        if (acceptKey(e, this.options.key)) {\n            var chart = this.chart;\n            var point = chart._eventCoordinates(e);\n            var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n            var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n            if (zoomPane && clipBox) {\n                var offset = this._elementOffset();\n\n                clipBox.translate(offset.left, offset.top);\n                this._zoomPaneClipBox = clipBox;\n\n                document.body.appendChild(this._marquee);\n                this.setStyles({\n                    left: e.pageX + 1,\n                    top: e.pageY + 1,\n                    width: 0,\n                    height: 0\n                });\n\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _elementOffset: function() {\n        var chartElement = this.chart.element;\n        var ref = elementStyles(chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref.paddingLeft;\n        var paddingTop = ref.paddingTop;\n        var offset = dataviz.elementOffset(chartElement);\n\n        return {\n            left: paddingLeft + offset.left,\n            top: paddingTop + offset.top\n        };\n    },\n\n    move: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            this.setStyles(this._selectionPosition(e));\n        }\n    },\n\n    end: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            var elementOffset$$1 = this._elementOffset();\n            var selectionPosition = this._selectionPosition(e);\n            selectionPosition.left -= elementOffset$$1.left;\n            selectionPosition.top -= elementOffset$$1.top;\n\n            var start = { x: selectionPosition.left, y: selectionPosition.top };\n            var end = { x: selectionPosition.left + selectionPosition.width, y: selectionPosition.top + selectionPosition.height };\n            this._updateAxisRanges(start, end);\n\n            this.removeElement();\n            delete this._zoomPane;\n\n            return toChartAxisRanges(this.axisRanges);\n        }\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        if (axisRanges && axisRanges.length) {\n            var plotArea = this.chart._plotArea;\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        this.removeElement();\n        delete this._marquee;\n        delete this.chart;\n    },\n\n    _updateAxisRanges: function(start, end) {\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n\n        var axes = this._zoomPane.axes;\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                var range = axis.pointsRange(start, end);\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n    },\n\n    _selectionPosition: function(e) {\n        var clipBox = this._zoomPaneClipBox;\n        var startLocation = {\n            x: e.x.startLocation,\n            y: e.y.startLocation\n        };\n        var pageX = e.x.location;\n        var pageY = e.y.location;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var left = Math.min(startLocation.x, pageX);\n        var top = Math.min(startLocation.y, pageY);\n        var width = Math.abs(startLocation.x - pageX);\n        var height = Math.abs(startLocation.y - pageY);\n\n        if (lock === X) {\n            left = clipBox.x1;\n            width = clipBox.width();\n        }\n        if (lock === Y) {\n            top = clipBox.y1;\n            height = clipBox.height();\n        }\n\n        if (pageX > clipBox.x2) {\n            width = clipBox.x2 - startLocation.x;\n        }\n\n        if (pageX < clipBox.x1) {\n            width = startLocation.x - clipBox.x1;\n        }\n\n        if (pageY > clipBox.y2) {\n            height = clipBox.y2 - startLocation.y;\n        }\n\n        if (pageY < clipBox.y1) {\n            height = startLocation.y - clipBox.y1;\n        }\n\n        return {\n            left: Math.max(left, clipBox.x1),\n            top: Math.max(top, clipBox.y1),\n            width: width,\n            height: height\n        };\n    }\n});\n\nZoomSelection.prototype.options = {\n    key: \"shift\",\n    lock: \"none\"\n};\n\nvar ref = drawing.util;\nvar limitValue$1 = ref.limitValue;\n\n// Limit the zoom rate between 1% and 90% per mousewheel event.\n// At zoom rates close to 100% the axis range quickly becomes 0.\nvar MIN_RATE = 0.01;\nvar MAX_RATE = 0.9;\nvar DEFAULT_RATE = 0.3;\n\nvar MousewheelZoom = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({\n            rate: DEFAULT_RATE\n        }, this.options, options);\n    },\n\n    updateRanges: function(delta, coords) {\n        var this$1 = this;\n\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n        var axes = this.chart._plotArea.axes;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                var rate = limitValue$1(this$1.options.rate, MIN_RATE, MAX_RATE);\n                var range = axis.zoomRange(-delta * rate, coords);\n\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n        return toChartAxisRanges(axisRanges);\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        var plotArea = this.chart._plotArea;\n\n        if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.chart;\n    }\n});\n\nvar LegendLayout = ChartElement.extend({\n    init: function(options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n    },\n\n    render: function() {\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var vertical = options.vertical;\n\n        this.visual = new drawing.Layout(null, {\n            spacing: vertical ? 0 : options.spacing,\n            lineSpacing: vertical ? options.spacing : 0,\n            orientation: vertical ? \"vertical\" : \"horizontal\",\n            reverse: options.rtl,\n            alignItems: vertical ? \"start\" : \"center\"\n        });\n\n        for (var idx = 0; idx < children.length; idx++) {\n            var legendItem = children[idx];\n            legendItem.reflow(new Box());\n            legendItem.renderVisual();\n        }\n    },\n\n    reflow: function(box) {\n        this.visual.rect(box.toRect());\n        this.visual.reflow();\n        var bbox = this.visual.clippedBBox();\n\n        if (bbox) {\n            this.box = dataviz.rectToBox(bbox);\n        } else {\n            this.box = new Box();\n        }\n    },\n\n    renderVisual: function() {\n        this.addVisual();\n    },\n\n    createVisual: function() {}\n});\n\nvar LegendItem = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.createContainer();\n        if (!options.rtl) {\n            this.createMarker();\n            this.createLabel();\n        } else {\n            this.createLabel();\n            this.createMarker();\n        }\n    },\n\n    createContainer: function() {\n        this.container = new dataviz.FloatElement({ vertical: false, wrap: false, align: CENTER, spacing: this.options.spacing });\n        this.append(this.container);\n    },\n\n    createMarker: function() {\n        this.container.append(new ShapeElement(this.markerOptions()));\n    },\n\n    markerOptions: function() {\n        var options = this.options;\n        var markerColor = options.markerColor;\n        return deepExtend({}, options.markers, {\n            background: markerColor,\n            border: {\n                color: markerColor\n            }\n        });\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labelOptions = deepExtend({}, options.labels);\n\n        this.container.append(new TextBox(options.text, labelOptions));\n    },\n\n    renderComplete: function() {\n        BoxElement.fn.renderComplete.call(this);\n\n        var cursor = this.options.cursor || {};\n        var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null,\n            cursor: cursor.style || cursor\n        });\n\n        this.appendVisual(eventSink);\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n            widget._legendItemHover(args.seriesIndex, args.pointIndex);\n        }\n\n        // Don't trigger point hover for legend items\n        return true;\n    },\n\n    out: function(widget, e) {\n        widget._unsetActivePoint();\n\n        widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return {\n            element: eventElement(e),\n            text: options.text,\n            series: options.series,\n            seriesIndex: options.series.index,\n            pointIndex: options.pointIndex\n        };\n    },\n\n    renderVisual: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n\n        if (customVisual) {\n            this.visual = customVisual({\n                active: options.active,\n                series: options.series,\n                sender: this.getSender(),\n                pointIndex: options.pointIndex,\n                options: {\n                    markers: this.markerOptions(),\n                    labels: options.labels\n                },\n                createVisual: function () {\n                    this$1.createVisual();\n                    this$1.renderChildren();\n                    this$1.renderComplete();\n\n                    var defaultVisual = this$1.visual;\n\n                    delete this$1.visual;\n\n                    return defaultVisual;\n                }\n            });\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    }\n});\n\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = {}; }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n            this.options.position = RIGHT;\n        }\n\n        this.createContainers();\n\n        this.createLegendTitle(options.title);\n\n        this.createItems();\n    },\n\n    createContainers: function() {\n        var options = this.options;\n        var position = options.position;\n        var userAlign = options.align;\n        var align = position;\n        var vAlign = CENTER;\n\n        if (position === CUSTOM) {\n            align = LEFT;\n        } else if (inArray(position, [ TOP, BOTTOM ])) {\n            if (userAlign === \"start\") {\n                align = LEFT;\n            } else if (userAlign === \"end\") {\n                align = RIGHT;\n            } else {\n                align = CENTER;\n            }\n            vAlign = position;\n        } else if (userAlign) {\n            if (userAlign === \"start\") {\n                vAlign = TOP;\n            } else if (userAlign === \"end\") {\n                vAlign = BOTTOM;\n            }\n        }\n\n        this.container = new BoxElement({\n            margin: options.margin,\n            padding: options.padding,\n            background: options.background,\n            border: options.border,\n            vAlign: vAlign,\n            align: align,\n            zIndex: options.zIndex,\n            shrinkToFit: true\n        });\n\n        if (this.hasTitle()) {\n            this.itemsContainer = new BoxElement({\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n        } else {\n            this.itemsContainer = this.container;\n        }\n\n        this.append(this.container);\n    },\n\n    createItems: function() {\n        var chartService = this.getService();\n        var options = this.options;\n        var vertical = this.isVertical();\n        var innerElement = new LegendLayout({\n            vertical: vertical,\n            spacing: options.spacing,\n            rtl: chartService.rtl\n        }, chartService);\n        var items = options.items;\n\n        if (options.reverse) {\n            items = items.slice(0).reverse();\n        }\n\n        var count = items.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = items[i];\n\n            innerElement.append(new LegendItem(deepExtend({}, {\n                markers: options.markers,\n                labels: options.labels,\n                rtl: chartService.rtl\n            }, options.item, item)));\n        }\n\n        innerElement.render();\n        this.itemsContainer.append(innerElement);\n    },\n\n    isVertical: function() {\n        var ref = this.options;\n        var orientation = ref.orientation;\n        var position = ref.position;\n        var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n               (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n        return vertical;\n    },\n\n    hasItems: function() {\n        return this.container.children[0].children.length > 0;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var legendBox = targetBox.clone();\n\n        if (!this.hasItems()) {\n            this.box = legendBox;\n            return;\n        }\n\n        if (options.position === CUSTOM) {\n            this.containerCustomReflow(legendBox);\n            this.box = legendBox;\n        } else {\n            this.containerReflow(legendBox);\n        }\n\n        if (this.hasTitle()) {\n            this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n        }\n    },\n\n    containerReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var position = options.position;\n        var width = options.width;\n        var height = options.height;\n        var pos = position === TOP || position === BOTTOM ? X : Y;\n        var vertical = this.isVertical();\n        var alignTarget = targetBox.clone();\n        var containerBox = targetBox.clone();\n\n        if (position === LEFT || position === RIGHT) {\n            containerBox.y1 = alignTarget.y1 = 0;\n        }\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n            containerBox.align(alignTarget, Y, container.options.vAlign);\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n            containerBox.align(alignTarget, X, container.options.align);\n        }\n\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        var box = containerBox.clone();\n\n        if (options.offsetX || options.offsetY) {\n            containerBox.translate(options.offsetX, options.offsetY);\n            container.reflow(containerBox);\n        }\n\n        box[pos + 1] = targetBox[pos + 1];\n        box[pos + 2] = targetBox[pos + 2];\n\n        this.box = box;\n    },\n\n    containerCustomReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var offsetX = options.offsetX;\n        var offsetY = options.offsetY;\n        var width = options.width;\n        var height = options.height;\n        var vertical = this.isVertical();\n        var containerBox = targetBox.clone();\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n        }\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        container.reflow(new Box(\n            offsetX, offsetY,\n            offsetX + containerBox.width(), offsetY + containerBox.height()\n        ));\n    },\n\n    renderVisual: function() {\n        if (this.hasItems()) {\n            ChartElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLegendTitle: function(title) {\n        var titleOptions = deepExtend({}, {\n            color: BLACK,\n            position: TOP,\n            align: CENTER\n        }, title);\n        var text = titleOptions.text;\n\n        if (!title || title.visible === false) {\n            return;\n        }\n\n        if (defined(titleOptions) && titleOptions.visible) {\n            var labelTemplate = getTemplate(titleOptions);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text });\n            } else if (titleOptions.format) {\n                text = this.chartService.format.auto(titleOptions.format, text);\n            }\n        }\n\n        this.title = new TextBox(text, titleOptions);\n\n        this.createTitleLayout();\n\n        this.appendTitleLayoutContent();\n    },\n\n    createTitleLayout: function() {\n        this.layout = new dataviz.FloatElement({\n            vertical: true,\n            wrap: false\n        });\n\n        this.container.append(this.layout);\n    },\n\n    hasTitle: function() {\n        return Boolean(this.options.title && this.options.title.visible !== false);\n    },\n\n    appendTitleLayoutContent: function() {\n        var options = this.options;\n\n        if (options.title.position === BOTTOM) {\n            this.layout.append(this.itemsContainer);\n            this.layout.append(this.title);\n        } else {\n            this.layout.append(this.title);\n            this.layout.append(this.itemsContainer);\n        }\n    }\n});\n\nsetDefaultOptions(Legend, {\n    position: RIGHT,\n    items: [],\n    offsetX: 0,\n    offsetY: 0,\n    margin: getSpacing(5),\n    padding: getSpacing(5),\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    item: {\n        cursor: POINTER,\n        spacing: 6\n    },\n    spacing: 6,\n    background: \"\",\n    zIndex: 1,\n    markers: {\n        border: {\n            width: 0\n        },\n        width: 15,\n        height: 3,\n        type: \"rect\",\n        align: LEFT,\n        vAlign: CENTER\n    }\n});\n\nvar PlotAreaFactory = Class.extend({\n    init: function() {\n\n        this._registry = [];\n    },\n\n    register: function(type, seriesTypes) {\n        this._registry.push({\n            type: type,\n            seriesTypes: seriesTypes\n        });\n    },\n\n    create: function(srcSeries, options, chartService) {\n        var registry = this._registry;\n        var match = registry[0];\n        var series;\n\n        for (var idx = 0; idx < registry.length; idx++) {\n            var entry = registry[idx];\n            series = filterSeriesByType(srcSeries, entry.seriesTypes);\n\n            if (series.length > 0) {\n                match = entry;\n                break;\n            }\n        }\n\n        return new match.type(series, options, chartService);\n    }\n});\n\nPlotAreaFactory.current = new PlotAreaFactory();\n\nvar ZOOM_ACCELERATION = 3;\nvar SELECTOR_HEIGHT_ADJUST = 0.1;\n\nfunction createDiv(className) {\n    var element = document.createElement(\"div\");\n    if (className) {\n        element.className = className;\n    }\n\n    return element;\n}\n\nfunction closestHandle(element) {\n    var current = element;\n    while (current && !hasClasses(current, \"k-handle\")) {\n        current = current.parentNode;\n    }\n\n    return current;\n}\n\nvar Selection = Class.extend({\n    init: function(chart, categoryAxis, options, observer) {\n\n        var chartElement = chart.element;\n\n        this.options = deepExtend({}, this.options, options);\n        this.chart = chart;\n        this.observer = observer;\n        this.chartElement = chartElement;\n        this.categoryAxis = categoryAxis;\n        this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n\n        this.initOptions();\n\n        this.visible = this.options.visible && chartElement.offsetHeight;\n\n        if (this.visible) {\n            this.createElements();\n\n            this.set(this._index(this.options.from), this._index(this.options.to));\n\n            this.bindEvents();\n        }\n    },\n\n    onPane: function(pane) {\n        return this.categoryAxis.pane === pane;\n    },\n\n    createElements: function() {\n        var options = this.options;\n        var wrapper = this.wrapper = createDiv(\"k-selector\");\n        elementStyles(wrapper, {\n            top: options.offset.top,\n            left: options.offset.left,\n            width: options.width,\n            height: options.height,\n            direction: 'ltr'\n        });\n        var selection = this.selection = createDiv(\"k-selection\");\n        this.leftMask = createDiv(\"k-mask\");\n        this.rightMask = createDiv(\"k-mask\");\n\n        wrapper.appendChild(this.leftMask);\n        wrapper.appendChild(this.rightMask);\n        wrapper.appendChild(selection);\n\n        selection.appendChild(createDiv(\"k-selection-bg\"));\n\n        var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle\");\n        var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle\");\n        leftHandle.appendChild(createDiv());\n        rightHandle.appendChild(createDiv());\n\n        selection.appendChild(leftHandle);\n        selection.appendChild(rightHandle);\n\n        this.chartElement.appendChild(wrapper);\n        var selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n        var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n        var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n        options.selection = {\n            border: {\n                left: selectionStyles.borderLeftWidth,\n                right: selectionStyles.borderRightWidth\n            }\n        };\n\n        elementStyles(leftHandle, {\n            top: (selectionStyles.height - leftHandleHeight) / 2\n        });\n\n        elementStyles(rightHandle, {\n            top: (selectionStyles.height - rightHandleHeight) / 2\n        });\n\n        wrapper.style.cssText = wrapper.style.cssText;\n    },\n\n    bindEvents: function() {\n        if (this.options.mousewheel !== false) {\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            var obj;\n            bindEvents(this.wrapper, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n        }\n\n        this._domEvents = services.DomEventsBuilder.create(this.wrapper, {\n            stopPropagation: true, // applicable for the jQuery UserEvents\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            press: this._press.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n    },\n\n    initOptions: function() {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var box = categoryAxis.pane.chartsBox();\n        var intlService = this.chart.chartService.intl;\n\n        if (this._dateAxis) {\n            deepExtend(options, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                from: parseDate(intlService, options.from),\n                to: parseDate(intlService, options.to)\n            });\n        }\n\n        var ref$1 = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref$1.paddingLeft;\n        var paddingTop = ref$1.paddingTop;\n\n        this.options = deepExtend({}, {\n            width: box.width(),\n            height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n            padding: {\n                left: paddingLeft,\n                top: paddingTop\n            },\n            offset: {\n                left: box.x1 + paddingLeft,\n                top: box.y1 + paddingTop\n            },\n            from: options.min,\n            to: options.max\n        }, options);\n    },\n\n    destroy: function() {\n        if (this._domEvents) {\n            this._domEvents.destroy();\n            delete this._domEvents;\n        }\n\n        clearTimeout(this._mwTimeout);\n        this._state = null;\n\n        if (this.wrapper) {\n            if (this._mousewheelHandler) {\n                var obj;\n                unbindEvents(this.wrapper, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n                this._mousewheelHandler = null;\n            }\n            this.chartElement.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    },\n\n    _rangeEventArgs: function(range) {\n\n        return {\n            axis: this.categoryAxis.options,\n            from: this._value(range.from),\n            to: this._value(range.to)\n        };\n    },\n\n    _start: function(e) {\n        var options = this.options;\n        var target = eventElement(e);\n\n        if (this._state || !target) {\n            return;\n        }\n\n        this.chart._unsetActivePoint();\n        this._state = {\n            moveTarget: closestHandle(target) || target,\n            startLocation: e.x ? e.x.location : 0,\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n\n        var args = this._rangeEventArgs({\n            from: this._index(options.from),\n            to: this._index(options.to)\n        });\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        }\n    },\n\n    _press: function(e) {\n        var handle;\n        if (this._state) {\n            handle = this._state.moveTarget;\n        } else {\n            handle = closestHandle(eventElement(e));\n        }\n        if (handle) {\n            dataviz.addClass(handle, \"k-handle-active\");\n        }\n    },\n\n    _move: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var target = state.moveTarget;\n        var reverse = categoryAxis.options.reverse;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var delta = state.startLocation - e.x.location;\n        var oldRange = { from: range.from, to: range.to };\n        var span = range.to - range.from;\n        var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n        var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n        if (!target) {\n            return;\n        }\n\n        var leftHandle = hasClasses(target, \"k-left-handle\");\n        var rightHandle = hasClasses(target, \"k-right-handle\");\n\n        if (hasClasses(target, \"k-selection k-selection-bg\")) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n            range.to = Math.min(\n                range.from + span,\n                max\n            );\n        } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - 1\n            );\n            range.to = Math.max(range.from + 1, range.to);\n        } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n            range.to = Math.min(\n                Math.max(min + 1, to - offset),\n                max\n            );\n            range.from = Math.min(range.to - 1, range.from);\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.move(range.from, range.to);\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        }\n    },\n\n    _end: function() {\n        if (this._state) {\n            var moveTarget = this._state.moveTarget;\n            if (moveTarget) {\n                dataviz.removeClass(moveTarget, \"k-handle-active\");\n            }\n\n            var range = this._state.range;\n            this.set(range.from, range.to);\n            this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n            delete this._state;\n        }\n    },\n\n    _tap: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var coords = this.chart._eventCoordinates(e);\n        var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var span = to - from;\n        var mid = from + span / 2;\n        var range = {};\n        var rightClick = e.event.which === 3;\n        var offset = Math.round(mid - categoryIx);\n\n        if (this._state || rightClick) {\n            return;\n        }\n\n        this.chart._unsetActivePoint();\n\n        if (!categoryAxis.options.justified) {\n            offset--;\n        }\n\n        range.from = Math.min(\n            Math.max(min, from - offset),\n            max - span\n        );\n\n        range.to = Math.min(range.from + span, max);\n\n        this._start(e);\n        if (this._state) {\n            this._state.range = range;\n            this.trigger(SELECT, this._rangeEventArgs(range));\n            this._end();\n        }\n    },\n\n    _mousewheel: function(e) {\n        var this$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n\n        this._start({ target: this.selection });\n\n        if (this._state) {\n            var range = this._state.range;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (Math.abs(delta) > 1) {\n                delta *= ZOOM_ACCELERATION;\n            }\n\n            if (this.options.mousewheel.reverse) {\n                delta *= -1;\n            }\n\n            if (this.expand(delta)) {\n                this.trigger(SELECT, {\n                    axis: this.categoryAxis.options,\n                    delta: delta,\n                    originalEvent: e,\n                    from: this._value(range.from),\n                    to: this._value(range.to)\n                });\n            }\n\n            if (this._mwTimeout) {\n                clearTimeout(this._mwTimeout);\n            }\n\n            this._mwTimeout = setTimeout(function () {\n                this$1._end();\n            }, MOUSEWHEEL_DELAY);\n        }\n    },\n\n    _gesturestart: function(e) {\n        var options = this.options;\n\n        this._state = {\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n        var args = this._rangeEventArgs(this._state.range);\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        } else {\n            e.preventDefault();\n        }\n    },\n\n    _gestureend: function() {\n        if (this._state) {\n            this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n            delete this._state;\n        }\n    },\n\n    _gesturechange: function(e) {\n        var ref = this;\n        var chart = ref.chart;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n        var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n        var left = Math.min(p0, p1);\n        var right = Math.max(p0, p1);\n\n        e.preventDefault();\n\n        range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n        range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n        this.move(range.from, range.to);\n\n        this.trigger(SELECT, this._rangeEventArgs(range));\n    },\n\n    _index: function(value) {\n        var index = value;\n\n        if (value instanceof Date) {\n            index = this.categoryAxis.categoryIndex(value);\n        }\n\n        return index;\n    },\n\n    _value: function(index) {\n        var value = index;\n        if (this._dateAxis) {\n            value = this.categoryAxis.categoryAt(index);\n            if (value > this.options.max) {\n                value = this.options.max;\n            }\n        }\n\n        return value;\n    },\n\n    _slot: function(value) {\n        var categoryAxis = this.categoryAxis;\n        var index = this._index(value);\n\n        return categoryAxis.getSlot(index, index, true);\n    },\n\n    move: function(from, to) {\n        var options = this.options;\n        var reverse = this.categoryAxis.options.reverse;\n        var offset = options.offset;\n        var padding = options.padding;\n        var border = options.selection.border;\n        var left = reverse ? to : from;\n        var right = reverse ? from : to;\n        var edge = 'x' + (reverse ? 2 : 1);\n\n        var box = this._slot(left);\n        var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n        elementStyles(this.leftMask, {\n            width: leftMaskWidth\n        });\n        elementStyles(this.selection, {\n            left: leftMaskWidth\n        });\n\n        box = this._slot(right);\n\n        var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n        elementStyles(this.rightMask, {\n            width: rightMaskWidth\n        });\n\n        var distance = options.width - rightMaskWidth;\n        if (distance !== options.width) {\n            distance += border.right;\n        }\n\n        elementStyles(this.rightMask, {\n            left: distance\n        });\n        elementStyles(this.selection, {\n            width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n        });\n    },\n\n    set: function(from, to) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var fromValue = limitValue(this._index(from), min, max);\n        var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n        if (options.visible) {\n            this.move(fromValue, toValue);\n        }\n\n        options.from = this._value(fromValue);\n        options.to = this._value(toValue);\n    },\n\n    expand: function(delta) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var zDir = options.mousewheel.zoom;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        if (zDir !== RIGHT) {\n            range.from = limitValue(\n                limitValue(from - delta, 0, to - 1),\n                min, max\n            );\n        }\n\n        if (zDir !== LEFT) {\n            range.to = limitValue(\n                limitValue(to + delta, range.from + 1, max),\n                min,\n                max\n             );\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    zoom: function(delta, coords) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        var ref = this.categoryAxis.options;\n        var reverse = ref.reverse;\n        var origin = X + (reverse ? '2' : '1');\n        var lineBox = this.categoryAxis.lineBox();\n        var relative = Math.abs(lineBox[origin] - coords[X]);\n        var size = lineBox.width();\n        var position = round(relative / size, 2);\n        var minDelta = round(position * delta);\n        var maxDelta = round((1 - position) * delta);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        range.from = limitValue(\n            limitValue(from - minDelta, 0, to - 1),\n            min, max\n        );\n\n        range.to = limitValue(\n            limitValue(to + maxDelta, range.from + 1, max),\n            min,\n            max\n        );\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    trigger: function(name, args) {\n        return (this.observer || this.chart).trigger(name, args);\n    }\n});\n\nsetDefaultOptions(Selection, {\n    visible: true,\n    mousewheel: {\n        zoom: \"both\"\n    },\n    min: MIN_VALUE,\n    max: MAX_VALUE\n});\n\nvar Tooltip = BaseTooltip.extend({\n    show: function(point) {\n        if (!point || !point.tooltipAnchor || (this._current && this._current === point)) {\n            return;\n        }\n\n        var options = deepExtend({}, this.options, point.options.tooltip);\n        var anchor = point.tooltipAnchor();\n\n        if (anchor) {\n            this._current = point;\n            BaseTooltip.fn.show.call(this, {\n                point: point,\n                anchor: anchor\n            }, options, point);\n        } else {\n            this.hide();\n        }\n    },\n\n    hide: function() {\n        delete this._current;\n        BaseTooltip.fn.hide.call(this);\n    }\n});\n\nvar SharedTooltip = BaseTooltip.extend({\n    init: function(plotArea, options) {\n        BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n\n        this.plotArea = plotArea;\n        this.formatService = plotArea.chartService.format;\n    },\n\n    showAt: function(points, coords) {\n        var tooltipPoints = grep(points, function(point) {\n            var tooltip = point.series.tooltip;\n            var excluded = tooltip && tooltip.visible === false;\n\n            return !excluded;\n        });\n\n        if (tooltipPoints.length > 0) {\n            var point = tooltipPoints[0];\n            var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n            var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n            this.show({\n                anchor: anchor,\n                shared: true,\n                points: points,\n                category: point.category,\n                categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                series: this.plotArea.series\n            }, this.options);\n        }\n    },\n\n    _slotAnchor: function(point, slot) {\n        var axis = this.plotArea.categoryAxis;\n        var align = {\n            horizontal: \"left\",\n            vertical: \"center\"\n        };\n\n        if (!axis.options.vertical) {\n            point.x = slot.center().x;\n        }\n\n        return {\n            point: point,\n            align: align\n        };\n    },\n\n    _defaultAnchor: function(point, slot) {\n        var box = point.owner.pane.chartsBox();\n        var vertical = this.plotArea.categoryAxis.options.vertical;\n        var center = box.center();\n        var slotCenter = slot.center();\n        var align = {\n            horizontal: \"center\",\n            vertical: \"center\"\n        };\n\n        var centerPoint;\n        if (vertical) {\n            centerPoint = new Point(center.x, slotCenter.y);\n        } else {\n            centerPoint = new Point(slotCenter.x, center.y);\n        }\n\n        return {\n            point: centerPoint,\n            align: align\n        };\n    }\n});\n\nsetDefaultOptions(SharedTooltip, {\n    categoryFormat: '{0:d}'\n});\n\nvar BarChartAnimation = Animation.extend({\n    setup: function() {\n        var ref = this;\n        var element = ref.element;\n        var options = ref.options;\n        var bbox = element.bbox();\n\n        if (bbox) {\n            this.origin = options.origin;\n            var axis = options.vertical ? Y : X;\n\n            var fromScale = this.fromScale = new GeometryPoint(1, 1);\n            fromScale[axis] = START_SCALE;\n\n            element.transform(transform()\n                .scale(fromScale.x, fromScale.y)\n            );\n        } else {\n            this.abort();\n        }\n    },\n\n    step: function(pos) {\n        var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n        var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n\n        this.element.transform(transform()\n            .scale(scaleX, scaleY, this.origin)\n        );\n    },\n\n    abort: function() {\n        Animation.fn.abort.call(this);\n        this.element.transform(null);\n    }\n});\n\nsetDefaultOptions(BarChartAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(BAR, BarChartAnimation);\n\nvar BubbleAnimation = Animation.extend({\n    setup: function() {\n        var center = this.center = this.element.bbox().center();\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.center)\n        );\n    }\n});\n\nsetDefaultOptions(BubbleAnimation, {\n    easing: \"easeOutElastic\"\n});\n\nAnimationFactory.current.register(BUBBLE, BubbleAnimation);\n\nvar FadeInAnimation = Animation.extend({\n    setup: function() {\n        this.fadeTo = this.element.opacity();\n        this.element.opacity(0);\n    },\n\n    step: function(pos) {\n        this.element.opacity(pos * this.fadeTo);\n    }\n});\n\nsetDefaultOptions(FadeInAnimation, {\n    duration: 200,\n    easing: \"linear\"\n});\n\nAnimationFactory.current.register(FADEIN, FadeInAnimation);\n\nvar PieAnimation = Animation.extend({\n    setup: function() {\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, this.options.center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.options.center)\n        );\n    }\n});\n\nsetDefaultOptions(PieAnimation, {\n    easing: \"easeOutElastic\",\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(PIE, PieAnimation);\n\nvar ScatterLineChart = ScatterChart.extend({\n    render: function() {\n        ScatterChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = ScatterChart.fn.animationPoints.call(this);\n        return points.concat(this._segments);\n    },\n\n    createMissingValue: function(value, missingValues) {\n        if (missingValues === ZERO) {\n            var missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (!hasValue(missingValue.x)) {\n                missingValue.x = 0;\n            }\n            if (!hasValue(missingValue.y)) {\n                missingValue.y = 0;\n            }\n            return missingValue;\n        }\n    }\n});\n\ndeepExtend(ScatterLineChart.prototype, LineChartMixin);\n\nvar XYPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n\n        this.xAxisRangeTracker = new AxisGroupRangeTracker();\n        this.yAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function(panes) {\n        var this$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1.addToLegend(paneSeries);\n            var filteredSeries = this$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1.createScatterChart(\n                filterSeriesByType(filteredSeries, SCATTER),\n                pane\n            );\n\n            this$1.createScatterLineChart(\n                filterSeriesByType(filteredSeries, SCATTER_LINE),\n                pane\n            );\n\n            this$1.createBubbleChart(\n                filterSeriesByType(filteredSeries, BUBBLE),\n                pane\n            );\n        }\n\n        this.createAxes(panes);\n    },\n\n    appendChart: function(chart, pane) {\n        this.xAxisRangeTracker.update(chart.xAxisRanges);\n        this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            this.yAxisRangeTracker.reset(axisName);\n            delete this.namedYAxes[axisName];\n        } else {\n            this.xAxisRangeTracker.reset(axisName);\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createScatterLineChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createBubbleChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n        var axisOptions = deepExtend({ reverse: !vertical && this.chartService.rtl }, options, { vertical: vertical });\n        var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n        var defaultRange = tracker.query();\n        var defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n        var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n        var typeSamples = [ axisOptions.min, axisOptions.max ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        if (axisIndex === 0 && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateValueAxis;\n        } else if (isLog) {\n            axisType = dataviz.LogarithmicAxis;\n        } else {\n            axisType = dataviz.NumericAxis;\n        }\n\n        var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            var currentValue = axis.getValue(point);\n            if (currentValue !== null) {\n                values.push(currentValue);\n            }\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$1(this.options, index, vertical, options);\n        updateAxisOptions$1(this.originalOptions, index, vertical, options);\n    }\n});\n\nfunction updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(XYPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\nvar PieSegment = ChartElement.extend({\n    init: function(value, sector, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.sector = sector;\n    },\n\n    render: function() {\n        var labels = this.options.labels;\n        var chartService = this.owner.chartService;\n        var labelText = this.value;\n\n        if (this._rendered || this.visible === false) {\n            return;\n        }\n        this._rendered = true;\n\n        var labelTemplate = getTemplate(labels);\n        var pointData = this.pointData();\n\n        if (labelTemplate) {\n            labelText = labelTemplate(pointData);\n        } else if (labels.format) {\n            labelText = chartService.format.auto(labels.format, labelText);\n        }\n\n        if (labels.visible && (labelText || labelText === 0)) {\n            if (labels.position === CENTER || labels.position === INSIDE_END) {\n                if (!labels.color) {\n                    labels.color = dataviz.autoTextColor(this.options.color);\n                }\n                if (!labels.background) {\n                    labels.background = this.options.color;\n                }\n            } else {\n                var themeLabels = chartService.theme.seriesDefaults.labels;\n                labels.color = labels.color || themeLabels.color;\n                labels.background = labels.background || themeLabels.background;\n            }\n\n            this.label = new TextBox(labelText, deepExtend({}, labels, {\n                align: CENTER,\n                vAlign: \"\",\n                animation: {\n                    type: FADEIN,\n                    delay: this.animationDelay\n                }\n            }), pointData);\n\n            this.append(this.label);\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n        this.box = targetBox;\n        this.reflowLabel();\n    },\n\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var labelsDistance = labelsOptions.distance;\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            var labelWidth = label.box.width();\n            var lp;\n\n            if (labelsOptions.position === CENTER) {\n                sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else if (labelsOptions.position === INSIDE_END) {\n                sector.radius = sector.radius - labelHeight / 2;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                var x1;\n                lp = sector.clone().expand(labelsDistance).point(angle);\n                if (lp.x >= sector.center.x) {\n                    x1 = lp.x + labelWidth;\n                    label.orientation = RIGHT;\n                } else {\n                    x1 = lp.x - labelWidth;\n                    label.orientation = LEFT;\n                }\n                label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n\n        ChartElement.fn.createVisual.call(this);\n\n        if (this.value) {\n            if (options.visual) {\n                var startAngle = (sector.startAngle + 180) % 360;\n                var visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    center: new GeometryPoint(sector.center.x, sector.center.y),\n                    radius: sector.radius,\n                    innerRadius: sector.innerRadius,\n                    startAngle: startAngle,\n                    endAngle: startAngle + sector.angle,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1.createSegmentVisual(group);\n\n                        return group;\n                    }\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else {\n                this.createSegmentVisual(this.visual);\n            }\n        }\n    },\n\n    createSegmentVisual: function(group) {\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n        var borderOptions = options.border || {};\n        var border = borderOptions.width > 0 ? {\n            stroke: {\n                color: borderOptions.color,\n                width: borderOptions.width,\n                opacity: borderOptions.opacity,\n                dashType: borderOptions.dashType\n            }\n        } : {};\n        var color = options.color;\n        var fill = {\n            color: color,\n            opacity: options.opacity\n        };\n        var visual = this.createSegment(sector, deepExtend({\n            fill: fill,\n            stroke: {\n                opacity: options.opacity\n            },\n            zIndex: options.zIndex\n        }, border));\n\n        group.append(visual);\n\n        if (hasGradientOverlay(options)) {\n            group.append(this.createGradientOverlay(visual, {\n                baseColor: color,\n                fallbackFill: fill\n            }, deepExtend({\n                center: [ sector.center.x, sector.center.y ],\n                innerRadius: sector.innerRadius,\n                radius: sector.radius,\n                userSpace: true\n            }, options.overlay)));\n        }\n    },\n\n    createSegment: function(sector, options) {\n        if (options.singleSegment) {\n            return new drawing.Circle(new geometry.Circle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n        }\n\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    },\n\n    createAnimation: function() {\n        var ref = this;\n        var options = ref.options;\n        var center = ref.sector.center;\n\n        deepExtend(options, {\n            animation: {\n                center: [ center.x, center.y ],\n                delay: this.animationDelay\n            }\n        });\n\n        ChartElement.fn.createAnimation.call(this);\n    },\n\n    createHighlight: function(options) {\n        var highlight = this.options.highlight || {};\n        var border = highlight.border || {};\n\n        return this.createSegment(this.sector, deepExtend({}, options, {\n            fill: {\n                color: highlight.color,\n                opacity: highlight.opacity\n            },\n            stroke: {\n                opacity: border.opacity,\n                width: border.width,\n                color: border.color\n            }\n        }));\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var sector = this.sector;\n\n        return {\n            options: this.options,\n            radius: sector.radius,\n            innerRadius: sector.innerRadius,\n            center: new GeometryPoint(sector.center.x, sector.center.y),\n            startAngle: sector.startAngle,\n            endAngle: sector.angle + sector.startAngle,\n            visual: this.visual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n\n        return {\n            point: midPoint,\n            align: tooltipAlignment(midAndle + 180)\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series,\n            percentage: this.percentage\n        };\n    }\n});\n\nvar RAD_30 = round(dataviz.rad(30), DEFAULT_PRECISION);\nvar RAD_60 = round(dataviz.rad(60), DEFAULT_PRECISION);\n\nfunction tooltipAlignment(angle) {\n    var radians = dataviz.rad(angle);\n    var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n    var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n\n    var horizontal;\n    if (Math.abs(sine) > RAD_60) {\n        horizontal = CENTER;\n    } else if (cosine < 0) {\n        horizontal = RIGHT;\n    } else {\n        horizontal = LEFT;\n    }\n\n    var vertical;\n    if (Math.abs(sine) < RAD_30) {\n        vertical = CENTER;\n    } else if (sine < 0) {\n        vertical = BOTTOM;\n    } else {\n        vertical = TOP;\n    }\n\n    return {\n        horizontal: horizontal,\n        vertical: vertical\n    };\n}\n\nsetDefaultOptions(PieSegment, {\n    color: WHITE,\n    overlay: {\n        gradient: \"roundedBevel\"\n    },\n    border: {\n        width: 0.5\n    },\n    labels: {\n        visible: false,\n        distance: 35,\n        font: datavizConstants.DEFAULT_FONT,\n        margin: getSpacing(0.5),\n        align: CIRCLE,\n        zIndex: 1,\n        position: OUTSIDE_END\n    },\n    animation: {\n        type: PIE\n    },\n    highlight: {\n        visible: true,\n        border: {\n            width: 1\n        }\n    },\n    visible: true\n});\n\ndeepExtend(PieSegment.prototype, PointEventsMixin);\n\nvar PieChartMixin = {\n    createLegendItem: function(value, point, options) {\n        var legendOptions = this.options.legend || {};\n        var labelsOptions = legendOptions.labels || {};\n        var inactiveItems = legendOptions.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n\n        if (options && options.visibleInLegend !== false) {\n            var pointVisible = options.visible !== false;\n            var labelTemplate = pointVisible ? getTemplate(labelsOptions) :\n                getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n            var text = options.category;\n\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: text,\n                    series: options.series,\n                    dataItem: options.dataItem,\n                    percentage: options.percentage,\n                    value: value\n                });\n            }\n\n            var itemLabelOptions, markerColor;\n            if (pointVisible) {\n                itemLabelOptions = {};\n                markerColor = point.color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = (inactiveItems.markers || {}).color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                this.legendItems.push({\n                    active: pointVisible,\n                    pointIndex: options.index,\n                    text: text,\n                    series: options.series,\n                    markerColor: markerColor,\n                    labels: itemLabelOptions\n                });\n            }\n        }\n    }\n};\n\nvar PIE_SECTOR_ANIM_DELAY = 70;\n\nvar PieChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.points = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var colorsCount = seriesColors.length;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var data = currentSeries.data;\n            var ref$1 = bindSegments(currentSeries);\n            var total = ref$1.total;\n            var points = ref$1.points;\n            var count = ref$1.count;\n            var anglePerValue = 360 / total;\n            var constantAngle = (void 0);\n            if (!isFinite(anglePerValue)) {\n                constantAngle = 360 / count;\n            }\n            var currentAngle = (void 0);\n\n            if (defined(currentSeries.startAngle)) {\n                currentAngle = currentSeries.startAngle;\n            } else {\n                currentAngle = options.startAngle;\n            }\n\n            if (seriesIx !== seriesCount - 1) {\n                if (currentSeries.labels.position === OUTSIDE_END) {\n                    currentSeries.labels.position = CENTER;\n                }\n            }\n\n            for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n                if (!pointData) {\n                    continue;\n                }\n\n                var fields = pointData.fields;\n                var value = pointData.value;\n                var visible = pointData.visible;\n                var angle = value !== 0 ? (constantAngle || (value * anglePerValue)) : 0;\n                var explode = data.length !== 1 && Boolean(fields.explode);\n\n                if (!isFunction(currentSeries.color)) {\n                    currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                }\n\n                callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                    owner: this$1,\n                    category: defined(fields.category) ? fields.category : \"\",\n                    index: i,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: data[i],\n                    percentage: total !== 0 ? value / total : 0,\n                    explode: explode,\n                    visibleInLegend: fields.visibleInLegend,\n                    visible: visible,\n                    zIndex: seriesCount - seriesIx,\n                    animationDelay: this$1.animationDelay(i, seriesIx, seriesCount)\n                });\n\n                if (visible !== false) {\n                    currentAngle += angle;\n                }\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            category: fields.category,\n            percentage: fields.percentage\n        }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"visual\", \"toggle\" ] });\n    },\n\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new PieSegment(value, sector, segmentOptions);\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var points = ref.points;\n        var seriesConfigs = ref.seriesConfigs; if (seriesConfigs === void 0) { seriesConfigs = []; }\n        var count = points.length;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n        var newBoxCenter = newBox.center();\n        var boxCenter = box.center();\n        var seriesCount = options.series.length;\n        var leftSideLabels = [];\n        var rightSideLabels = [];\n        var padding = valueOrDefault(options.padding, defaultPadding);\n\n        this.targetBox = targetBox;\n\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n        newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n\n        var radius = halfMinWidth - padding;\n        var center = new Point(\n            radius + newBox.x1 + padding,\n            radius + newBox.y1 + padding\n        );\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var seriesIndex = segment.seriesIx;\n            sector.radius = radius;\n            sector.center = center;\n\n            if (seriesConfigs.length) {\n                var seriesConfig = seriesConfigs[seriesIndex];\n                sector.innerRadius = seriesConfig.innerRadius;\n                sector.radius = seriesConfig.radius;\n            }\n\n            if (seriesIndex === seriesCount - 1 && segment.explode) {\n                sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n            }\n\n            segment.reflow(newBox);\n\n            var label = segment.label;\n            if (label) {\n                if (label.options.position === OUTSIDE_END) {\n                    if (seriesIndex === seriesCount - 1) {\n                        if (label.orientation === RIGHT) {\n                            rightSideLabels.push(label);\n                        } else {\n                            leftSideLabels.push(label);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (leftSideLabels.length > 0) {\n            leftSideLabels.sort(this.labelComparator(true));\n            this.leftLabelsReflow(leftSideLabels);\n        }\n\n        if (rightSideLabels.length > 0) {\n            rightSideLabels.sort(this.labelComparator(false));\n            this.rightLabelsReflow(rightSideLabels);\n        }\n\n        this.box = newBox;\n    },\n\n    leftLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    rightLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    distanceBetweenLabels: function(labels) {\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var count = labels.length - 1;\n        var lr = sector.radius + segment.options.labels.distance;\n        var distances = [];\n        var firstBox = labels[0].box;\n        var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n\n        distances.push(distance);\n\n        for (var i = 0; i < count; i++) {\n            var secondBox = labels[i + 1].box;\n\n            firstBox = labels[i].box;\n            distance = round(secondBox.y1 - firstBox.y2);\n            distances.push(distance);\n        }\n        distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n        distances.push(distance);\n\n        return distances;\n    },\n\n    distributeLabels: function(distances, labels) {\n        var this$1 = this;\n\n        var count = distances.length;\n        var left, right, remaining;\n\n        for (var i = 0; i < count; i++) {\n            remaining = -distances[i];\n            left = right = i;\n\n            while (remaining > 0 && (left >= 0 || right < count)) {\n                remaining = this$1._takeDistance(distances, i, --left, remaining);\n                remaining = this$1._takeDistance(distances, i, ++right, remaining);\n            }\n        }\n\n        this.reflowLabels(distances, labels);\n    },\n\n    _takeDistance: function(distances, anchor, position, amount) {\n        var result = amount;\n        if (distances[position] > 0) {\n            var available = Math.min(distances[position], result);\n            result -= available;\n            distances[position] -= available;\n            distances[anchor] += available;\n        }\n\n        return result;\n    },\n\n    reflowLabels: function(distances, labels) {\n        var this$1 = this;\n\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var labelOptions = segment.options.labels;\n        var labelsCount = labels.length;\n        var labelDistance = labelOptions.distance;\n        var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n        var boxX;\n\n        distances[0] += 2;\n        for (var i = 0; i < labelsCount; i++) {\n            var label = labels[i];\n            var box = label.box;\n\n            boxY += distances[i];\n            boxX = this$1.hAlignLabel(\n                box.x2,\n                sector.clone().expand(labelDistance),\n                boxY,\n                boxY + box.height(),\n                label.orientation === RIGHT);\n\n            if (label.orientation === RIGHT) {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.radius + sector.center.x + labelDistance;\n                }\n                label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n            } else {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.center.x - sector.radius - labelDistance;\n                }\n                label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n            }\n\n            boxY += box.height();\n        }\n    },\n\n    createVisual: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var connectors = ref.options.connectors;\n        var points = ref.points;\n        var count = points.length;\n        var space = 4;\n\n        ChartElement.fn.createVisual.call(this);\n\n        this._connectorLines = [];\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var label = segment.label;\n            var angle = sector.middle();\n            var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n            if (label) {\n                var connectorLine = new Path({\n                    stroke: {\n                        color: connectorsColor,\n                        width: connectors.width\n                    },\n                    animation: {\n                        type: FADEIN,\n                        delay: segment.animationDelay\n                    }\n                });\n\n                if (label.options.position === OUTSIDE_END) {\n                    var box = label.box;\n                    var centerPoint = sector.center;\n                    var start = sector.point(angle);\n                    var middle = new Point(box.x1, box.center().y);\n                    var sr = (void 0), end = (void 0), crossing = (void 0);\n\n                    start = sector.clone().expand(connectors.padding).point(angle);\n                    connectorLine.moveTo(start.x, start.y);\n                    // TODO: Extract into a method to remove duplication\n                    if (label.orientation === RIGHT) {\n                        end = new Point(box.x1 - connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x - space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.min(crossing.x, middle.x);\n\n                        if (this$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x < sector.center.x) {\n                            sr = sector.center.x + sector.radius + space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr < middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x + space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    } else {\n                        end = new Point(box.x2 + connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x + space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.max(crossing.x, middle.x);\n\n                        if (this$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x > sector.center.x) {\n                            sr = sector.center.x - sector.radius - space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr > middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x - space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    }\n\n                    connectorLine.lineTo(end.x, end.y);\n\n                    this$1._connectorLines.push(connectorLine);\n                    this$1.visual.append(connectorLine);\n                }\n            }\n        }\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        if (dataviz.find(this.options.series, function (options) { return options.autoFit; })) {\n            var targetBox = this.targetBox;\n            var pieCenter = this.box.center();\n            var bbox = this.visual.bbox();\n            if (!bbox) {\n                return;\n            }\n\n            var bboxBottom = bbox.bottomRight();\n\n            var scale = Math.min(\n                (pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y),\n                (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y),\n                (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x),\n                (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x)\n            );\n\n            if (scale < 1) {\n                this.visual.transform(transform().scale(scale, scale, [ pieCenter.x, pieCenter.y ]));\n            }\n        }\n    },\n\n    labelComparator: function(reverse) {\n        var reverseValue = reverse ? -1 : 1;\n\n        return function(a, b) {\n            var first = (a.parent.sector.middle() + 270) % 360;\n            var second = (b.parent.sector.middle() + 270) % 360;\n            return (first - second) * reverseValue;\n        };\n    },\n\n    hAlignLabel: function(originalX, sector, y1, y2, direction) {\n        var radius = sector.radius;\n        var sector_center = sector.center;\n        var cx = sector_center.x;\n        var cy = sector_center.y;\n        var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n        if (t > radius) {\n            return originalX;\n        }\n\n        return cx + Math.sqrt((radius * radius) - (t * t)) * (direction ? 1 : -1);\n    },\n\n    pointInCircle: function(point, center, radius) {\n        return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    animationDelay: function(categoryIndex) {\n        return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n    },\n\n    stackRoot: function() {\n        return this;\n    }\n});\n\nfunction intersection(a1, a2, b1, b2) {\n    var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n    var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n    var result;\n    if (ub !== 0) {\n        var ua = (uat / ub);\n\n        result = new Point(\n            a1.x + ua * (a2.x - a1.x),\n            a1.y + ua * (a2.y - a1.y)\n        );\n    }\n\n    return result;\n}\n\nsetDefaultOptions(PieChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    },\n    inactiveItems: {\n        markers: {},\n        labels: {}\n    }\n});\n\ndeepExtend(PieChart.prototype, PieChartMixin);\n\nPieChart.prototype.isStackRoot = true;\n\nvar PiePlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createPieChart(this.series);\n    },\n\n    createPieChart: function(series) {\n        var firstSeries = series[0];\n        var pieChart = new PieChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            startAngle: firstSeries.startAngle,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(pieChart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.items, chart.legendItems);\n    }\n});\n\nvar DonutSegment = PieSegment.extend({\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            if (labelsOptions.position === CENTER) {\n                sector.radius -= (sector.radius - sector.innerRadius) / 2;\n\n                var lp = sector.point(angle);\n\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                PieSegment.fn.reflowLabel.call(this);\n            }\n        }\n    },\n\n    createSegment: function(sector, options) {\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    }\n});\n\nsetDefaultOptions(DonutSegment, {\n    overlay: {\n        gradient: \"roundedGlass\"\n    },\n    labels: {\n        position: CENTER\n    },\n    animation: {\n        type: PIE\n    }\n});\n\ndeepExtend(DonutSegment.prototype, PointEventsMixin);\n\nvar DONUT_SECTOR_ANIM_DELAY = 50;\n\nvar DonutChart = PieChart.extend({\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new DonutSegment(value, sector, segmentOptions);\n\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var options = this.options;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        var padding = valueOrDefault(options.padding, defaultPadding);\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n\n        var totalSize = halfMinWidth - padding;\n        var seriesWithoutSize = 0;\n        var holeSize;\n\n        for (var i = 0; i < seriesCount; i++) {\n            var currentSeries = series[i];\n            if (i === 0) {\n                if (defined(currentSeries.holeSize)) {\n                    holeSize = currentSeries.holeSize;\n                    totalSize -= currentSeries.holeSize;\n                }\n            }\n\n            if (defined(currentSeries.size)) {\n                totalSize -= currentSeries.size;\n            } else {\n                seriesWithoutSize++;\n            }\n\n            if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                totalSize -= currentSeries.margin;\n            }\n        }\n\n        if (!defined(holeSize)) {\n            var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n            holeSize = currentSize * 0.75;\n            totalSize -= holeSize;\n        }\n\n        var innerRadius = holeSize;\n        var margin = 0;\n        var size, radius;\n\n        this.seriesConfigs = [];\n\n        for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n            var currentSeries$1 = series[i$1];\n            size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n            innerRadius += margin;\n            radius = innerRadius + size;\n            this$1.seriesConfigs.push({ innerRadius: innerRadius, radius: radius });\n            margin = currentSeries$1.margin || 0;\n            innerRadius = radius;\n        }\n\n        PieChart.fn.reflow.call(this, targetBox);\n    },\n\n    animationDelay: function(categoryIndex, seriesIndex, seriesCount) {\n        return categoryIndex * DONUT_SECTOR_ANIM_DELAY +\n            (INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1));\n    }\n});\n\nsetDefaultOptions(DonutChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    }\n});\n\nvar DonutPlotArea = PiePlotArea.extend({\n    render: function() {\n        this.createDonutChart(this.series);\n    },\n\n    createDonutChart: function(series) {\n        var firstSeries = series[0];\n        var donutChart = new DonutChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(donutChart);\n    }\n});\n\nvar DEFAULT_PADDING = 0.15;\n\nvar PolarPlotAreaBase = PlotAreaBase.extend({\n    initFields: function() {\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function() {\n        this.addToLegend(this.series);\n        this.createPolarAxis();\n        this.createCharts();\n        this.createValueAxis();\n    },\n\n    alignAxes: function() {\n        var axis = this.valueAxis;\n        var range = axis.range();\n        var crossingValue = axis.options.reverse ? range.max : range.min;\n        var slot = axis.getSlot(crossingValue);\n        var center = this.polarAxis.getSlot(0).center;\n        var axisBox = axis.box.translate(\n            center.x - slot.x1,\n            center.y - slot.y1\n        );\n\n        axis.reflow(axisBox);\n    },\n\n    createValueAxis: function() {\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var axisOptions = this.valueAxisOptions({\n            roundToMajorUnit: false,\n            zIndex: -1\n        });\n        var axisType, axisDefaultRange;\n\n        if (axisOptions.type === LOGARITHMIC) {\n            axisType = dataviz.RadarLogarithmicAxis;\n            axisDefaultRange = { min: 0.1, max: 1 };\n        } else {\n            axisType = dataviz.RadarNumericAxis;\n            axisDefaultRange = { min: 0, max: 1 };\n        }\n\n        var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n        if (range && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var valueAxis = new axisType(\n            range.min, range.max,\n            axisOptions,\n            this.chartService\n        );\n\n        this.valueAxis = valueAxis;\n        this.appendAxis(valueAxis);\n    },\n\n    reflowAxes: function() {\n        var ref = this;\n        var options = ref.options.plotArea;\n        var valueAxis = ref.valueAxis;\n        var polarAxis = ref.polarAxis;\n        var box = ref.box;\n        var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n        var padding = getSpacing(options.padding || {}, defaultPadding);\n        var paddingBox = box.clone().unpad(padding);\n        var axisBox = paddingBox.clone();\n\n        axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n        axisBox.align(paddingBox, Y, CENTER);\n\n        var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n        polarAxis.reflow(axisBox);\n        valueAxis.reflow(valueAxisBox);\n        var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n        valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n        this.axisBox = axisBox;\n        this.alignAxes(axisBox);\n    },\n\n    backgroundBox: function() {\n        return this.box;\n    },\n\n    detachLabels: function() {}\n});\n\nvar PolarScatterChart = ScatterChart.extend({\n    pointSlot: function(slotX, slotY) {\n        var valueRadius = slotX.center.y - slotY.y1;\n        var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    }\n});\n\nsetDefaultOptions(PolarScatterChart, {\n    clip: false\n});\n\nvar PolarLineChart = ScatterLineChart.extend({\n\n});\n\nPolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n\nsetDefaultOptions(PolarLineChart, {\n    clip: false\n});\n\nvar SplinePolarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var center = this._polarAxisCenter();\n        fillPath.lineTo(center.x, center.y);\n    },\n\n    _polarAxisCenter: function() {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        return center;\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            var center = this._polarAxisCenter();\n            var curveProcessor = new CurveProcessor(false);\n            var linePoints = this.points();\n\n            linePoints.push(center);\n            segments = this._strokeSegments = curveProcessor.process(linePoints);\n            segments.pop();\n        }\n\n        return segments;\n    }\n});\n\nvar PolarAreaSegment = AreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        var centerSegment = new geometry.Segment([ center.x, center.y ]);\n\n        fillPath.segments.unshift(centerSegment);\n        fillPath.segments.push(centerSegment);\n    }\n});\n\nvar PolarAreaChart = PolarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segment;\n\n        if (style === SMOOTH) {\n            segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n        } else {\n            segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n        }\n        return segment;\n    },\n\n    createMissingValue: function(value, missingValues) {\n        var missingValue;\n\n        if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n            missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (missingValues === ZERO) {\n                missingValue.y = 0;\n            }\n        }\n\n        return missingValue;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    _hasMissingValuesGap: function() {\n        var this$1 = this;\n\n        var series = this.options.series;\n\n        for (var idx = 0; idx < series.length; idx++) {\n            if (this$1.seriesMissingValues(series[idx]) === GAP) {\n                return true;\n            }\n        }\n    },\n\n    sortPoints: function(points) {\n        var this$1 = this;\n\n        points.sort(xComparer);\n\n        if (this._hasMissingValuesGap()) {\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point) {\n                    var value = point.value;\n                    if (!hasValue(value.y) && this$1.seriesMissingValues(point.series) === GAP) {\n                        delete points[idx];\n                    }\n                }\n            }\n        }\n\n        return points;\n    }\n});\n\nfunction xComparer(a, b) {\n    return a.value.x - b.value.x;\n}\n\nvar PolarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n\n        this.polarAxis = polarAxis;\n        this.axisX = polarAxis;\n        this.appendAxis(polarAxis);\n    },\n\n    valueAxisOptions: function(defaults) {\n        return deepExtend(defaults, {\n            majorGridLines: { type: ARC },\n            minorGridLines: { type: ARC }\n        }, this.options.yAxis);\n    },\n\n    createValueAxis: function() {\n        PolarPlotAreaBase.fn.createValueAxis.call(this);\n        this.axisY = this.valueAxis;\n    },\n\n    appendChart: function(chart, pane) {\n        this.valueAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createLineChart(\n            filterSeriesByType(series, [ POLAR_LINE ]),\n            pane\n        );\n\n        this.createScatterChart(\n            filterSeriesByType(series, [ POLAR_SCATTER ]),\n            pane\n        );\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ POLAR_AREA ]),\n            pane\n        );\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new PolarLineChart(this, { series: series });\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var scatterChart = new PolarScatterChart(this, { series: series });\n\n        this.appendChart(scatterChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new PolarAreaChart(this, { series: series });\n\n        this.appendChart(areaChart, pane);\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var xValue = this.axisX.getValue(point);\n        var yValue = this.axisY.getValue(point);\n\n        if (xValue !== null && yValue !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                x: xValue,\n                y: yValue\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\nsetDefaultOptions(PolarPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin);\n\nfunction groupBySeriesIx(segments) {\n    var seriesSegments = [];\n    for (var idx = 0; idx < segments.length; idx++) {\n        var segment = segments[idx];\n        seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n        seriesSegments[segment.seriesIx].push(segment);\n    }\n\n    return seriesSegments;\n}\n\nvar RadarLineChart = LineChart.extend({\n    pointSlot: function(categorySlot, valueSlot) {\n        var valueRadius = categorySlot.center.y - valueSlot.y1;\n        var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    },\n\n    renderSegments: function() {\n        LineChart.fn.renderSegments.call(this);\n\n        if (this._segments && this._segments.length > 1) {\n            var seriesSegments = groupBySeriesIx(this._segments);\n\n            for (var idx = 0; idx < seriesSegments.length; idx++) {\n                var segments = seriesSegments[idx];\n                if (segments && segments.length > 1) {\n                    var firstPoint = segments[0].linePoints[0];\n                    var lastSegment = last(segments);\n                    var lastPoint = last(lastSegment.linePoints);\n                    var isFirstDataPoint = firstPoint.categoryIx === 0;\n                    var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n                    if (isFirstDataPoint && isLastDataPoint) {\n                        last(segments).linePoints.push(firstPoint);\n                    }\n                }\n            }\n        }\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        var segment = new pointType(linePoints, currentSeries, seriesIx);\n        var missingValues = this.seriesMissingValues(currentSeries);\n\n        if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n            segment.options.closed = true;\n        }\n\n        return segment;\n    }\n});\n\nsetDefaultOptions(RadarLineChart, {\n    clip: false,\n    limitPoints: false\n});\n\nvar SplineRadarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaSegment = AreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaChart = RadarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n        var stackPoints;\n        var segment;\n\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            stackPoints = prevSegment.linePoints.slice(0);\n            previousSegment = prevSegment;\n        }\n\n        if (style === SMOOTH) {\n            segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            segment.options.closed = true;\n        } else {\n            linePoints.push(linePoints[0]);\n            segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n        }\n\n        return segment;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    }\n});\n\nvar RadarSegment = DonutSegment.extend({\n    init: function(value, options) {\n        DonutSegment.fn.init.call(this, value, null, options);\n    }\n});\n\nsetDefaultOptions(RadarSegment, {\n    overlay: {\n        gradient: \"none\"\n    },\n    labels: {\n        distance: 10\n    }\n});\n\nvar RadarClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(sector) {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var gap = options.gap;\n        var spacing = options.spacing;\n        var count = children.length;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotAngle = sector.angle / slots;\n        var angle = sector.startAngle + slotAngle * (gap / 2);\n\n        this.forEach(children, function (child) {\n            var slotSector = sector.clone();\n            slotSector.startAngle = angle;\n            slotSector.angle = slotAngle;\n\n            if (child.sector) {\n                slotSector.radius = child.sector.radius;\n            }\n\n            child.reflow(slotSector);\n            child.sector = slotSector;\n\n            angle += slotAngle + (slotAngle * spacing);\n        });\n    }\n});\n\nsetDefaultOptions(RadarClusterLayout, {\n    gap: 1,\n    spacing: 0\n});\n\nvar RadarStackLayout = ChartElement.extend({\n    reflow: function(sector) {\n        var ref = this;\n        var reverse = ref.options.reverse;\n        var children = ref.children;\n        var childrenCount = children.length;\n        var first = reverse ? childrenCount - 1 : 0;\n        var step = reverse ? -1 : 1;\n\n        this.box = new Box();\n\n        for (var i = first; i >= 0 && i < childrenCount; i += step) {\n            var childSector = children[i].sector;\n            childSector.startAngle = sector.startAngle;\n            childSector.angle = sector.angle;\n        }\n    }\n});\n\nvar RadarBarChart = BarChart.extend({\n    pointType: function() {\n        return RadarSegment;\n    },\n\n    clusterType: function() {\n        return RadarClusterLayout;\n    },\n\n    stackType: function() {\n        return RadarStackLayout;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var slot = categorySlot.clone();\n        var y = categorySlot.center.y;\n\n        slot.radius = y - valueSlot.y1;\n        slot.innerRadius = y - valueSlot.y2;\n\n        return slot;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.sector = pointSlot;\n        point.reflow();\n    },\n\n    createAnimation: function() {\n        this.options.animation.center = this.box.toRect().center();\n        BarChart.fn.createAnimation.call(this);\n    }\n});\n\nRadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n\nsetDefaultOptions(RadarBarChart, {\n    clip: false,\n    limitPoints: false,\n    animation: {\n        type: \"pie\"\n    }\n});\n\nvar RadarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n\n        this.polarAxis = categoryAxis;\n        this.categoryAxis = categoryAxis;\n        this.appendAxis(categoryAxis);\n        this.aggregateCategories();\n        this.createCategoryAxesLabels();\n    },\n\n    valueAxisOptions: function(defaults) {\n        if (this._hasBarCharts) {\n            deepExtend(defaults, {\n                majorGridLines: { type: ARC },\n                minorGridLines: { type: ARC }\n            });\n        }\n\n        if (this._isStacked100) {\n            deepExtend(defaults, {\n                roundToMajorUnit: false,\n                labels: { format: \"P0\" }\n            });\n        }\n\n        return deepExtend(defaults, this.options.valueAxis);\n    },\n\n    aggregateCategories: function() {\n        // No separate panes in radar charts\n        CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n    },\n\n    createCategoryAxesLabels: function() {\n        CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n    },\n\n    filterSeries: function(currentSeries) {\n        // Not supported for radar charts\n        return currentSeries;\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ RADAR_AREA ]),\n            pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ RADAR_LINE ]),\n            pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ RADAR_COLUMN ]),\n            pane\n        );\n    },\n\n    chartOptions: function(series) {\n        var options = { series: series };\n        var firstSeries = series[0];\n        if (firstSeries) {\n            var filteredSeries = this.filterVisibleSeries(series);\n            var stack = firstSeries.stack;\n            options.isStacked = stack && filteredSeries.length > 1;\n            options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n            if (options.isStacked100) {\n                this._isStacked100 = true;\n            }\n        }\n\n        return options;\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n        this.appendChart(areaChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new RadarLineChart(this, this.chartOptions(series));\n        this.appendChart(lineChart, pane);\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var options = this.chartOptions(series);\n        options.gap = firstSeries.gap;\n        options.spacing = firstSeries.spacing;\n\n        var barChart = new RadarBarChart(this, options);\n        this.appendChart(barChart, pane);\n\n        this._hasBarCharts = true;\n    },\n\n    seriesCategoryAxis: function() {\n        return this.categoryAxis;\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var category = this.categoryAxis.getCategory(point);\n        var value = this.valueAxis.getValue(point);\n\n        if (category !== null && value !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                category: category,\n                value: value\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\ndeepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n    appendChart: CategoricalPlotArea.prototype.appendChart,\n    aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n    seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints\n});\n\nsetDefaultOptions(RadarPlotArea, {\n    categoryAxis: {\n        categories: []\n    },\n    valueAxis: {}\n});\n\nvar FunnelSegment = ChartElement.extend({\n    init: function(value, options, segmentOptions) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.options.index = segmentOptions.index;\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var label = this.children[0];\n\n        this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n        if (label) {\n            label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n        }\n    },\n\n    createVisual: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var visual;\n\n        ChartElement.fn.createVisual.call(this);\n\n        if (options.visual) {\n            visual = options.visual({\n                category: this.category,\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage,\n                points: this.points,\n                options: options,\n                sender: this.getSender(),\n                createVisual: function () { return this$1.createPath(); }\n            });\n        } else {\n            visual = this.createPath();\n        }\n\n        if (visual) {\n            this.visual.append(visual);\n        }\n    },\n\n    createPath: function() {\n        var options = this.options;\n        var border = options.border;\n        var path = Path.fromPoints(this.points, {\n            fill: {\n                color: options.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: border.color,\n                opacity: border.opacity,\n                width: border.width\n            }\n        }).close();\n\n        return path;\n    },\n\n    createHighlight: function(style) {\n        return Path.fromPoints(this.points, style);\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var path = Path.fromPoints(this.points).close();\n\n        return {\n            options: this.options,\n            path: path\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        return {\n            point: new Point(box.center().x, box.y1),\n            align: {\n                horizontal: \"center\",\n                vertical: \"top\"\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        var point = this;\n        return point.owner.formatPointValue(point, format);\n    }\n});\n\nsetDefaultOptions(FunnelSegment, {\n    color: WHITE,\n    border: {\n        width: 1\n    }\n});\n\ndeepExtend(FunnelSegment.prototype, PointEventsMixin);\n\nvar FunnelChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.points = [];\n        this.labels = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format,point.value);\n    },\n\n    render: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var series = options.series[0];\n        var data = series.data;\n\n        if (!data) {\n            return;\n        }\n\n        var ref$1 = bindSegments(series);\n        var total = ref$1.total;\n        var points = ref$1.points;\n\n        for (var i = 0; i < points.length; i++) {\n            var pointData = points[i];\n\n            if (!pointData) {\n                continue;\n            }\n\n            var fields = pointData.fields;\n\n            if (!isFunction(series.color)) {\n                series.color = fields.color || seriesColors[i % seriesColors.length];\n            }\n\n            fields = deepExtend({\n                index: i,\n                owner: this$1,\n                series: series,\n                dataItem: data[i],\n                percentage: pointData.value / total\n            }, fields, { visible: pointData.visible });\n\n            var value = pointData.valueFields.value;\n            var segment = this$1.createSegment(value, fields);\n            var label = this$1.createLabel(value, fields);\n\n            if (segment && label) {\n                segment.append(label);\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            index: fields.index\n        }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"toggle\", \"visual\" ] });\n    },\n\n    createSegment: function(value, fields) {\n        var seriesOptions = deepExtend({}, fields.series);\n        this.evalSegmentOptions(seriesOptions, value, fields);\n\n        this.createLegendItem(value, seriesOptions, fields);\n\n        if (fields.visible !== false) {\n\n            var segment = new FunnelSegment(value, seriesOptions, fields);\n            $.extend(segment, fields);\n\n            this.append(segment);\n            this.points.push(segment);\n\n            return segment;\n        }\n    },\n\n    createLabel: function(value, fields) {\n        var series = fields.series;\n        var dataItem = fields.dataItem;\n        var labels = deepExtend({}, this.options.labels, series.labels);\n        var text = value;\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var data = {\n                dataItem: dataItem,\n                value: value,\n                percentage: fields.percentage,\n                category: fields.category,\n                series: series\n            };\n            if (labelTemplate) {\n                text = labelTemplate(data);\n            } else if (labels.format) {\n                text = this.plotArea.chartService.format.auto(labels.format, text);\n            }\n\n            if (!labels.color) {\n                labels.color = dataviz.autoTextColor(series.color);\n                if (!labels.background) {\n                    labels.background = series.color;\n                }\n            }\n\n            this.evalSegmentOptions(labels, value, fields);\n            var textBox = new TextBox(text, deepExtend({\n                vAlign: labels.position\n            }, labels), data);\n\n            this.labels.push(textBox);\n\n            return textBox;\n        }\n    },\n\n    labelPadding: function() {\n        var labels = this.labels;\n        var padding = { left: 0, right: 0 };\n\n        for (var i = 0; i < labels.length; i++) {\n            var label = labels[i];\n            var align = label.options.align;\n            if (align !== CENTER) {\n                var width = labels[i].box.width();\n\n                if (align === LEFT) {\n                    padding.left = Math.max(padding.left, width);\n                } else {\n                    padding.right = Math.max(padding.right, width);\n                }\n            }\n        }\n\n        return padding;\n    },\n\n    dynamicSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var firstSegment = segments[0];\n        var maxSegment = firstSegment;\n\n        for (var idx = 0; idx < segments.length; idx++) {\n            if (segments[idx].percentage > maxSegment.percentage) {\n                maxSegment = segments[idx];\n            }\n        }\n\n        var lastUpperSide = (firstSegment.percentage / maxSegment.percentage) * width;\n        var previousOffset = (width - lastUpperSide) / 2;\n        var previousHeight = 0;\n\n        for (var idx$1 = 0; idx$1 < count; idx$1++) {\n            var percentage = segments[idx$1].percentage;\n            var nextSegment = segments[idx$1 + 1];\n            var nextPercentage = (nextSegment ? nextSegment.percentage : percentage);\n            var points = segments[idx$1].points = [];\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n            var offset = (void 0);\n\n            if (!percentage) {\n                offset = nextPercentage ? 0 : width / 2;\n            } else {\n                offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n            }\n\n            offset = limitValue(offset, 0, width);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n\n            previousOffset = offset;\n            previousHeight += height + options.segmentSpacing;\n            lastUpperSide = limitValue(width - 2 * offset, 0, width);\n        }\n    },\n\n    constantSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var decreasingWidth = options.neckRatio <= 1;\n        var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n        var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n        var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n        var finalNarrow = (topMostWidth - neckRatio) / 2;\n        var previousHeight = 0;\n\n        for (var idx = 0; idx < count; idx++) {\n            var points = segments[idx].points = [];\n            var percentage = segments[idx].percentage;\n            var offset = (options.dynamicHeight) ? (finalNarrow * percentage) : (finalNarrow / count);\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + previousOffset + offset,box.y1 + height + previousHeight));\n            previousOffset += offset;\n            previousHeight += height + options.segmentSpacing;\n        }\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var count = points.length;\n\n        if (!count) {\n            return;\n        }\n\n        var options = this.options;\n        var box = chartBox.clone().unpad(this.labelPadding());\n        var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n        var width = box.width();\n\n        if (options.dynamicSlope) {\n            this.dynamicSlopeReflow(box, width, totalHeight);\n        } else {\n            this.constantSlopeReflow(box, width, totalHeight);\n        }\n\n        for (var idx = 0; idx < count; idx++) {\n            points[idx].reflow(chartBox);\n        }\n    }\n});\n\nsetDefaultOptions(FunnelChart, {\n    neckRatio: 0.3,\n    width: 300,\n    dynamicSlope: false,\n    dynamicHeight: true,\n    segmentSpacing: 0,\n    labels: {\n        visible: false,\n        align: CENTER,\n        position: CENTER,\n        zIndex: 1\n    }\n});\n\ndeepExtend(FunnelChart.prototype, PieChartMixin);\n\nvar FunnelPlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createFunnelChart(this.series);\n    },\n\n    createFunnelChart: function(series) {\n        var firstSeries = series[0];\n        var funnelChart = new FunnelChart(this, {\n            series: series,\n            legend: this.options.legend,\n            neckRatio: firstSeries.neckRatio,\n            dynamicHeight: firstSeries.dynamicHeight,\n            dynamicSlope: firstSeries.dynamicSlope,\n            segmentSpacing: firstSeries.segmentSpacing,\n            highlight: firstSeries.highlight\n        });\n\n        this.appendChart(funnelChart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.items, chart.legendItems);\n    }\n});\n\n// Linear color scale from the given color to white minus minimum lightness offset.\nvar colorScale = function (color, minLightnessOffset) {\n    if (minLightnessOffset === void 0) { minLightnessOffset = 0.05; }\n\n    var baseColor = kendo.parseColor(color);\n    var offset = 1 - minLightnessOffset;\n\n    return function (value) {\n        var hsl = baseColor.toHSL();\n        var range = 100 - hsl.l;\n        var point = offset - value;\n        hsl.l += Math.min(point * range, range);\n\n        return hsl.toCss();\n    };\n};\n\nvar HeatmapPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createMarker();\n        this.createLabel();\n        this.createNote();\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n            var labelColor = labels.color;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            if (!labelColor) {\n                labelColor = dataviz.autoTextColor(this.color);\n            }\n\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                },\n                labels, {\n                    color: labelColor\n                }),\n                pointData\n            );\n            this.append(this.label);\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.reflow(this.markerBox());\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        this.marker.reflow(this.markerBox());\n    },\n\n    markerBox: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var rect = this.box.toRect();\n        var type = valueOrDefault(markers.type, 'rect');\n        var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n        var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n        var halfBorderWidth = Math.round(borderWidth / 2);\n\n        if (markers.size) {\n            var center = rect.center();\n            rect.size.width = rect.size.height = markers.size;\n            rect.origin.x = Math.round(center.x - rect.size.width / 2);\n            rect.origin.y = Math.round(center.y - rect.size.height / 2);\n        }\n\n        rect.size.width -= borderWidth;\n        rect.size.height -= borderWidth;\n        rect.origin.y += halfBorderWidth + 0.5;\n        rect.origin.x += halfBorderWidth + 0.5;\n\n        return dataviz.rectToBox(rect);\n    },\n\n    markerBorder: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var opacity = valueOrDefault(border.opacity, options.opacity);\n\n        return {\n            color: border.color || this.color,\n            width: border.width,\n            opacity: opacity,\n            dashType: border.dashType\n        };\n    },\n\n    createMarker: function() {\n        var options = this.options;\n        var markerOptions = options.markers;\n        var marker = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        this.marker = marker;\n        this.append(marker);\n    },\n\n    createHighlight: function(style) {\n        var options = this.options;\n        var markerOptions = this.options.highlight.markers || this.options.markers;\n\n        var highlight = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: markerOptions.color || this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n        });\n\n        highlight.reflow(this.markerBox());\n        var visual = highlight.getElement();\n\n        visual.options.fill = style.fill;\n        visual.options.stroke = style.stroke;\n\n        return visual;\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var left = this.box.center().x;\n        var top = this.box.y1 - TOOLTIP_OFFSET;\n\n        return {\n            point: new Point(left, top),\n            align: {\n                horizontal: CENTER,\n                vertical: BOTTOM\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        /* noop, clip labels */\n    },\n\n    pointData: function() {\n        return {\n            x: this.value.x,\n            y: this.value.y,\n            value: this.value.value,\n            dataItem: this.dataItem,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(HeatmapPoint.prototype, PointEventsMixin);\ndeepExtend(HeatmapPoint.prototype, NoteMixin);\n\nHeatmapPoint.prototype.defaults = {\n    markers: {\n        type: 'rect',\n        borderRadius: 4,\n        border: {\n            color: 'transparent'\n        }\n    },\n    padding: { top: 1 },\n    labels: {\n        visible: false,\n        padding: 3\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nvar HeatmapChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        this.points = [];\n        this.seriesOptions = [];\n        this.valueRange = { min: MAX_VALUE, max: MIN_VALUE };\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.setRange();\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    setRange: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1._bindPoint(currentSeries, seriesIx, pointIx);\n                var valueFields = ref$1.valueFields;\n                if (defined(valueFields.value) && valueFields.value !== null) {\n                    this$1.valueRange.min = Math.min(this$1.valueRange.min, valueFields.value);\n                    this$1.valueRange.max = Math.max(this$1.valueRange.max, valueFields.value);\n                }\n            }\n        }\n    },\n\n    addValue: function(value, fields) {\n        var point;\n        if (value && defined(value.value) && value.value !== null) {\n            point = this.createPoint(value, fields);\n            if (point) {\n                $.extend(point, fields);\n            }\n        }\n\n        this.points.push(point);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = { defaults: series._defaults, excluded: [ \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\" ] };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                min: this.valueRange.min,\n                max: this.valueRange.max\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return HeatmapPoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        } else if (this.valueRange.max !== 0) {\n            var scale = colorScale(color);\n            color = scale(value.value / this.valueRange.max);\n        }\n\n        var point = new HeatmapPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var ref = this$1.seriesAxes(fields.series);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n            var indexX = xAxis.categoryIndex(value.x);\n            var indexY = yAxis.categoryIndex(value.y);\n            var slotX = xAxis.getSlot(indexX, indexX, limit);\n            var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var ref$1 = this$1.seriesAxes(currentSeries);\n            var xAxis = ref$1.xAxis;\n            var yAxis = ref$1.yAxis;\n            var xRange = xAxis.currentRangeIndices();\n            var yRange = yAxis.currentRangeIndices();\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$2 = this$1._bindPoint(currentSeries, seriesIx, pointIx);\n                var value = ref$2.valueFields;\n                var fields = ref$2.fields;\n                var xIndex = xAxis.totalIndex(value.x);\n                var yIndex = yAxis.totalIndex(value.y);\n                var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                if (xIn && yIn) {\n                    callback(value, deepExtend({\n                        pointIx: pointIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: currentSeries.data[pointIx],\n                        owner: this$1\n                    }, fields));\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.value);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(HeatmapChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}: {2}\"\n    },\n    labels: {\n        format: \"{2}\"\n    },\n    clip: true\n});\ndeepExtend(HeatmapChart.prototype, {\n    _bindPoint: CategoricalChart.prototype._bindPoint\n});\n\nvar HeatmapPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.bindCategories();\n        this.createAxes(panes);\n        this.createCharts(panes);\n        this.createAxisLabels();\n    },\n\n    bindCategories: function() {\n        var this$1 = this;\n\n        var series = this.srcSeries || this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var data = currentSeries.data || [];\n            var ref = this$1.seriesAxes(currentSeries);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n\n            var xCategories = dataviz.createHashSet(xAxis.categories || []);\n            var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n            for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                var x = ref$1.x;\n                var y = ref$1.y;\n\n                if (!xCategories.has(x)) {\n                    xCategories.add(x);\n                }\n\n                if (!yCategories.has(y)) {\n                    yCategories.add(y);\n                }\n            }\n\n            xAxis.categories = xCategories.values();\n            yAxis.categories = yCategories.values();\n        }\n    },\n\n    createCharts: function(panes) {\n        var this$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1.addToLegend(paneSeries);\n            var filteredSeries = this$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1.createHeatmapChart(\n                filterSeriesByType(filteredSeries, [ HEATMAP ]),\n                pane\n            );\n        }\n    },\n\n    createHeatmapChart: function(series, pane) {\n        var chart = new HeatmapChart(this, {\n            series: series\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesAxes: function(series) {\n        var xAxis;\n        var yAxis;\n\n        var options = this.options;\n\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxisName = series.xAxis;\n        if (xAxisName) {\n            xAxis = xAxisOptions.find(function (axis) { return axis.name === xAxisName; });\n        } else {\n            xAxis = xAxisOptions[0];\n        }\n\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxisName = series.yAxis;\n        if (yAxisName) {\n            yAxis = yAxisOptions.find(function (axis) { return axis.name === yAxisName; });\n        } else {\n            yAxis = yAxisOptions[0];\n        }\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    createAxisLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            axes[i].createLabels();\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var axisOptions = $.extend({\n            axisCrossingValue: 0\n        }, options, {\n            vertical: vertical,\n            reverse: (vertical || this.chartService.rtl) ? !options.reverse : options.reverse,\n            justified: false\n        });\n        var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n        var typeSamples = [ axisOptions.min, axisOptions.max, firstCategory ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateCategoryAxis;\n        } else {\n            axisType = CategoryAxis;\n        }\n\n        var axis = new axisType(axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n        axis.mapCategories();\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            delete this.namedYAxes[axisName];\n        } else {\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            appendIfNotNull(values, axis.getCategory(point));\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$2(this.options, index, vertical, options);\n        updateAxisOptions$2(this.originalOptions, index, vertical, options);\n    },\n\n    crosshairOptions: function(axis) {\n        // Stack the crosshair above the series points.\n        return $.extend({}, axis.options.crosshair, { zIndex: 0 });\n    }\n});\n\nfunction updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(HeatmapPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n\nvar COLOR = \"color\";\nvar FIRST = \"first\";\nvar FROM = \"from\";\nvar MAX = \"max\";\nvar MIN = \"min\";\nvar NOTE_TEXT = \"noteText\";\nvar SUMMARY_FIELD = \"summary\";\nvar TO = \"to\";\n\nPlotAreaFactory.current.register(CategoricalPlotArea, [\n    BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA,\n    CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT,\n    RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA\n]);\n\nPlotAreaFactory.current.register(XYPlotArea, [\n    SCATTER, SCATTER_LINE, BUBBLE\n]);\n\nPlotAreaFactory.current.register(PiePlotArea, [ PIE ]);\nPlotAreaFactory.current.register(DonutPlotArea, [ DONUT ]);\nPlotAreaFactory.current.register(FunnelPlotArea, [ FUNNEL ]);\n\nPlotAreaFactory.current.register(PolarPlotArea, [ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ]);\nPlotAreaFactory.current.register(RadarPlotArea, [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ]);\n\nPlotAreaFactory.current.register(HeatmapPlotArea, [ HEATMAP ]);\n\nSeriesBinder.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    [ FROM, TO ], [ CATEGORY, COLOR, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ WATERFALL, HORIZONTAL_WATERFALL ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD ]\n);\n\nSeriesBinder.current.register([ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ], [ X, Y ], [ COLOR ]);\nSeriesBinder.current.register([ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ], [ VALUE ], [ COLOR ]);\n\nSeriesBinder.current.register(\n    [ FUNNEL ],\n    [ VALUE ], [ CATEGORY, COLOR, \"visibleInLegend\", \"visible\" ]\n);\n\nDefaultAggregates.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL ],\n    { value: MAX, color: FIRST, noteText: FIRST, errorLow: MIN, errorHigh: MAX }\n);\n\nDefaultAggregates.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    { from: MIN, to: MAX, color: FIRST, noteText: FIRST }\n);\n\nDefaultAggregates.current.register(\n    [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ],\n    { value: MAX, color: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ SCATTER, SCATTER_LINE, BUBBLE ],\n    [ X, Y ], [ COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ BUBBLE ], [ X, Y, \"size\" ], [ COLOR, CATEGORY, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ HEATMAP ],\n    [ X, Y, VALUE ], [ COLOR, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ CANDLESTICK, OHLC ],\n    [ \"open\", \"high\", \"low\", \"close\" ], [ CATEGORY, COLOR, \"downColor\", NOTE_TEXT ]\n);\n\nDefaultAggregates.current.register(\n    [ CANDLESTICK, OHLC ],\n    { open: MAX, high: MAX, low: MIN, close: MAX,\n      color: FIRST, downColor: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    [ \"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\" ], [ CATEGORY, COLOR, NOTE_TEXT ]\n);\n\nDefaultAggregates.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    { lower: MAX, q1: MAX, median: MAX, q3: MAX, upper: MAX, mean: MAX, outliers: FIRST,\n      color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    [ \"current\", \"target\" ], [ CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT ]\n);\n\nDefaultAggregates.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    { current: MAX, target: MAX, color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ PIE, DONUT ],\n    [ VALUE ], [ CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\" ]\n);\n\nvar AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = Class.extend({\n    init: function(element, userOptions, themeOptions, context) {\n        var this$1 = this;\n        if (context === void 0) { context = {}; }\n\n        this.observers = [];\n        this.addObserver(context.observer);\n        this.chartService = new services.ChartService(this, context);\n        this.chartService.theme = themeOptions;\n\n        this._initElement(element);\n\n        var options = deepExtend({}, this.options, userOptions);\n        this._originalOptions = deepExtend({}, options);\n        this._theme = themeOptions;\n        this._initTheme(options, themeOptions);\n\n        this._initHandlers();\n        this._initSurface();\n\n        this.bindCategories();\n        dataviz.FontLoader.preloadFonts(userOptions, function () {\n            this$1.fontLoaded = true;\n            if (!this$1._destroyed) {\n                this$1.trigger('init');\n                this$1._redraw();\n                this$1._attachEvents();\n            }\n        });\n    },\n\n    _initElement: function(element) {\n        this._setElementClass(element);\n        element.style.position = \"relative\";\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n        this.element = element;\n    },\n\n    _setElementClass: function(element) {\n        dataviz.addClass(element, \"k-chart\");\n    },\n\n    _initTheme: function(options, themeOptions) {\n        var seriesCopies = [];\n        var series = options.series || [];\n\n        for (var i = 0; i < series.length; i++) {\n            seriesCopies.push($.extend({}, series[i]));\n        }\n        options.series = seriesCopies;\n\n        resolveAxisAliases(options);\n        this.applyDefaults(options, themeOptions);\n\n        // Clean up default if not overriden by data attributes\n        if (options.seriesColors === null) {\n            delete options.seriesColors;\n        }\n\n        this.options = deepExtend({}, themeOptions, options);\n        this.applySeriesColors();\n    },\n\n    getSize: function() {\n        var chartArea = this.options.chartArea || {};\n        var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n        var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n        return {\n            width: width,\n            height: height\n        };\n    },\n\n    resize: function(force) {\n        var size = this.getSize();\n        var currentSize = this._size;\n        var hasSize = size.width > 0 || size.height > 0;\n\n        if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n            this._size = size;\n            this._resize(size, force);\n            this.trigger(\"resize\", size);\n        } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) { return !s.visible; })) {\n            this._destroySelections();\n            this._setupSelection();\n        }\n    },\n\n    _resize: function() {\n        this._noTransitionsRedraw();\n    },\n\n    redraw: function(paneName) {\n        this.applyDefaults(this.options);\n        this.applySeriesColors();\n\n        if (paneName) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPane(paneName);\n            plotArea.redraw(pane);\n        } else {\n            this._redraw();\n        }\n    },\n\n    getAxis: function(name) {\n        return findAxisByName(name, this._plotArea.axes);\n    },\n\n    findAxisByName: function(name) {\n        return this.getAxis(name);\n    },\n\n    findPaneByName: function(name) {\n        var panes = this._plotArea.panes;\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            if (panes[idx].options.name === name) {\n                return new ChartPane(panes[idx]);\n            }\n        }\n    },\n\n    findPaneByIndex: function(idx) {\n        var panes = this._plotArea.panes;\n        if (panes[idx]) {\n            return new ChartPane(panes[idx]);\n        }\n    },\n\n    plotArea: function() {\n        return new ChartPlotArea(this._plotArea);\n    },\n\n    toggleHighlight: function(show, filter) {\n        var plotArea = this._plotArea;\n        var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n        var points;\n\n        if (isFunction(filter)) {\n            points = plotArea.filterPoints(filter);\n        } else {\n            var seriesName, categoryName;\n            if (isObject(filter)) {\n                seriesName = filter.series;\n                categoryName = filter.category;\n            } else {\n                seriesName = categoryName = filter;\n            }\n\n            if (firstSeries.type === DONUT) {\n                points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n            } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\n                points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n            } else {\n                points = plotArea.pointsBySeriesName(seriesName);\n            }\n        }\n\n        if (points) {\n            this.togglePointsHighlight(show, points);\n        }\n    },\n\n    togglePointsHighlight: function(show, points) {\n        var highlight = this._highlight;\n        for (var idx = 0; idx < points.length; idx++) {\n            highlight.togglePointHighlight(points[idx], show);\n        }\n    },\n\n    showTooltip: function(filter) {\n        var shared = this._sharedTooltip();\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var plotArea = ref._plotArea;\n        var point, categoryIndex;\n\n        if (isFunction(filter)) {\n            point = plotArea.findPoint(filter);\n            if (point && shared) {\n                categoryIndex = point.categoryIx;\n            }\n        } else if (shared && defined(filter)) {\n            categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n        }\n\n        if (shared) {\n            if (categoryIndex >= 0) {\n                var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                tooltip.showAt(points);\n            }\n        } else if (point) {\n            tooltip.show(point);\n        }\n    },\n\n    hideTooltip: function() {\n        this._tooltip.hide();\n    },\n\n    _initSurface: function() {\n        var surface = this.surface;\n        var wrap = this._surfaceWrap();\n\n        var chartArea = this.options.chartArea || {};\n        if (chartArea.width) {\n            dataviz.elementSize(wrap, { width: chartArea.width });\n        }\n        if (chartArea.height) {\n            dataviz.elementSize(wrap, { height: chartArea.height });\n        }\n\n        if (!surface || surface.options.type !== this.options.renderAs) {\n            this._destroySurface();\n\n            this.surface = drawing.Surface.create(wrap, {\n                type: this.options.renderAs\n            });\n\n            this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n            this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n        } else {\n            this.surface.clear();\n            this.surface.resize();\n        }\n    },\n\n    _surfaceWrap: function() {\n        return this.element;\n    },\n\n    _redraw: function() {\n        var model = this._getModel();\n        this._size = {\n            width: model.options.width,\n            height: model.options.height\n        };\n\n        this._destroyView();\n\n        this._model = model;\n        this._plotArea = model._plotArea;\n\n        model.renderVisual();\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.setup();\n                }\n            });\n        }\n\n        this._initSurface();\n        this.surface.draw(model.visual);\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.play();\n                }\n            });\n        }\n\n        this._tooltip = this._createTooltip();\n        this._highlight = new Highlight();\n        this._setupSelection();\n        this._createPannable();\n        this._createZoomSelection();\n        this._createMousewheelZoom();\n\n        this.trigger(RENDER);\n        triggerPaneRender(this._plotArea.panes);\n\n        if (!this._navState) {\n            this._cancelDomEvents();\n        }\n    },\n\n    exportVisual: function(exportOptions) {\n        var visual;\n        if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n            var currentOptions = this.options;\n            var options = deepExtend({}, exportOptions.options, {\n                chartArea: {\n                    width: exportOptions.width,\n                    height: exportOptions.height\n                }\n            });\n\n            clearMissingValues(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions, options);\n            this._initTheme(this.options, this._theme);\n            this.bindCategories();\n\n            var model = this._getModel();\n\n            model.renderVisual();\n            triggerPaneRender(model._plotArea.panes);\n\n            visual = model.visual;\n\n            this.options = currentOptions;\n        } else {\n            visual = this.surface.exportVisual();\n        }\n\n        return visual;\n    },\n\n    _sharedTooltip: function() {\n        return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n    },\n\n    _createPannable: function() {\n        var options = this.options;\n        if (options.pannable !== false) {\n            this._pannable = new Pannable(this._plotArea, options.pannable);\n        }\n    },\n\n    _createZoomSelection: function() {\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        if (zoomable !== false && selection !== false) {\n            this._zoomSelection = new ZoomSelection(this, selection);\n        }\n    },\n\n    _createMousewheelZoom: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel;\n        if (zoomable !== false && mousewheel !== false) {\n            this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n        }\n    },\n\n    _toggleDragZoomEvents: function() {\n        var pannable = this.options.pannable;\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        var mousewheel = (zoomable || {}).mousewheel;\n        var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n        var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n        var element = this.element;\n\n        if (this._dragZoomEnabled && allowDrag && allowZoom) {\n            element.style.touchAction = this._touchAction || '';\n            this._dragZoomEnabled = false;\n        } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n            element.style.touchAction = \"none\";\n\n            this._dragZoomEnabled = true;\n        }\n\n        this._toggleDomEvents(!allowDrag, !allowZoom);\n    },\n\n    _toggleDomEvents: function(drag, zoom) {\n        var domEvents = this.domEvents;\n        if (!domEvents) {\n            return;\n        }\n\n        if (domEvents.toggleDrag) {\n            domEvents.toggleDrag(drag);\n        }\n\n        if (domEvents.toggleZoom) {\n            domEvents.toggleZoom(zoom);\n        }\n    },\n\n    _createTooltip: function() {\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var tooltip;\n\n        if (this._sharedTooltip()) {\n            tooltip = this._createSharedTooltip(tooltipOptions);\n        } else {\n            tooltip = new Tooltip(this.chartService, tooltipOptions);\n        }\n\n        return tooltip;\n    },\n\n    _createSharedTooltip: function(options) {\n        return new SharedTooltip(this._plotArea, options);\n    },\n\n    applyDefaults: function(options, themeOptions) {\n        applyAxisDefaults(options, themeOptions);\n        applySeriesDefaults(options, themeOptions);\n    },\n\n    applySeriesColors: function() {\n        var options = this.options;\n        var series = options.series;\n        var colors = options.seriesColors || [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var seriesColor = colors[i % colors.length];\n            var defaults = currentSeries._defaults;\n\n            currentSeries.color = currentSeries.color || seriesColor;\n            if (defaults) {\n                defaults.color = defaults.color || seriesColor;\n            }\n        }\n    },\n\n    _getModel: function() {\n        var options = this.options;\n        var plotArea = this._createPlotArea();\n        var model = new dataviz.RootElement(this._modelOptions());\n        model.chart = this;\n        model._plotArea = plotArea;\n\n        dataviz.Title.buildTitle(options.title, model);\n\n        if (options.legend && options.legend.visible) {\n            model.append(new Legend(plotArea.options.legend, this.chartService));\n        }\n        model.append(plotArea);\n        model.reflow();\n\n        return model;\n    },\n\n    _modelOptions: function() {\n        var options = this.options;\n        var size = this.getSize();\n\n        return deepExtend({\n            transitions: options.transitions,\n            width: size.width || datavizConstants.DEFAULT_WIDTH,\n            height: size.height || datavizConstants.DEFAULT_HEIGHT\n        }, options.chartArea);\n    },\n\n    _createPlotArea: function(skipSeries) {\n        var options = this.options;\n\n        var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n        return plotArea;\n    },\n\n    _setupSelection: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var axes = ref._plotArea.axes;\n        var selections = this._selections = [];\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var options = axis.options;\n            if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                var range = axis.range();\n\n                var selection = new Selection(this$1, axis,\n                    deepExtend({ min: range.min, max: range.max }, options.select)\n                );\n\n                selections.push(selection);\n            }\n        }\n    },\n\n    _selectStart: function(e) {\n        return this.trigger(SELECT_START, e);\n    },\n\n    _select: function(e) {\n        return this.trigger(SELECT, e);\n    },\n\n    _selectEnd: function(e) {\n        return this.trigger(SELECT_END, e);\n    },\n\n    _initHandlers: function() {\n        this._clickHandler = this._click.bind(this);\n        this._mousewheelHandler = this._mousewheel.bind(this);\n        this._mouseleaveHandler = this._mouseleave.bind(this);\n        this._surfaceMouseenterHandler = this._mouseover.bind(this);\n        this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n        this._mousemove = kendo.throttle(\n            this._mousemove.bind(this),\n            MOUSEMOVE_DELAY\n        );\n    },\n\n    addObserver: function(observer) {\n        if (observer) {\n            this.observers.push(observer);\n        }\n    },\n\n    removeObserver: function(observer) {\n        var index = this.observers.indexOf(observer);\n        if (index >= 0) {\n            this.observers.splice(index, 1);\n        }\n    },\n\n    requiresHandlers: function(eventNames) {\n        var observers = this.observers;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].requiresHandlers(eventNames)) {\n                return true;\n            }\n        }\n    },\n\n    trigger: function(name, args) {\n        if (args === void 0) { args = {}; }\n\n        if (name === SHOW_TOOLTIP) {\n            args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n        }\n        args.sender = this;\n\n        var observers = this.observers;\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, args)) {\n                isDefaultPrevented = true;\n            }\n        }\n\n        return isDefaultPrevented;\n    },\n\n    _attachEvents: function() {\n        var element = this.element;\n\n        this._touchAction = element.style.touchAction;\n\n        var obj;\n        bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n\n        this.domEvents = services.DomEventsBuilder.create(this.element, {\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n\n        this._toggleDragZoomEvents();\n    },\n\n    _mouseleave: function(e) {\n        if (this._hoveredPoint) {\n            this._hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (this._plotArea.hovered) {\n            this.trigger(PLOT_AREA_LEAVE);\n            this._plotArea.hovered = false;\n        }\n    },\n\n    _cancelDomEvents: function() {\n        if (this.domEvents && this.domEvents.cancel) {\n            this.domEvents.cancel();\n        }\n    },\n\n    _gesturestart: function(e) {\n        if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n            this._gestureDistance = e.distance;\n            this._unsetActivePoint();\n            this.surface.suspendTracking();\n        }\n    },\n\n    _gestureend: function(e) {\n        if (this._zooming && !this._stopChartHandlers(e)) {\n            if (this.surface) {\n                this.surface.resumeTracking();\n            }\n            this._zooming = false;\n            this.trigger(ZOOM_END, {});\n        }\n    },\n\n    _gesturechange: function(e) {\n        var mousewheelZoom = this._mousewheelZoom;\n\n        if (mousewheelZoom && !this._stopChartHandlers(e)) {\n            e.preventDefault();\n            var previousGestureDistance = this._gestureDistance;\n            var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n            if (Math.abs(scaleDelta) >= 0.1) {\n                scaleDelta = Math.round(scaleDelta * 10);\n\n                this._gestureDistance = e.distance;\n                var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    var coords = this._eventCoordinates(e);\n\n                    if (!this._zooming) {\n                        this._zooming = true;\n                    }\n\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                    if (ranges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n                }\n            }\n        }\n    },\n\n    _mouseout: function(e) {\n        if (e.element) {\n            var element = this._drawingChartElement(e.element, e);\n\n            if (element && element.leave) {\n                element.leave(this, e.originalEvent);\n            }\n        }\n    },\n\n    _start: function(e) {\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n            this._startNavigation(e, coords, DRAG_START);\n        }\n\n        if (this._pannable && this._pannable.start(e)) {\n            this.surface.suspendTracking();\n            this._unsetActivePoint();\n            this._suppressHover = true;\n            this.chartService.panning = true;\n        }\n\n        if (this._zoomSelection) {\n            if (this._zoomSelection.start(e)) {\n                this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n            }\n        }\n    },\n\n    _move: function(e) {\n        var ref = this;\n        var state = ref._navState;\n        var pannable = ref._pannable;\n\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        if (pannable) {\n            var ranges = pannable.move(e);\n\n            if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                pannable.pan();\n            }\n        } else if (state) {\n            var ranges$1 = {};\n            var axes = state.axes;\n\n            for (var i = 0; i < axes.length; i++) {\n                var currentAxis = axes[i];\n                var axisName = currentAxis.options.name;\n                if (axisName) {\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\n                    var delta = axis.startLocation - axis.location;\n\n                    if (delta !== 0) {\n                        ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                    }\n                }\n            }\n\n            state.axisRanges = ranges$1;\n            this.trigger(DRAG, {\n                axisRanges: ranges$1,\n                originalEvent: e\n            });\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.move(e);\n        }\n    },\n\n    _end: function(e) {\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        var pannable = this._pannable;\n        if (pannable && pannable.end(e)) {\n            this.surface.resumeTracking();\n            this.trigger(DRAG_END, {\n                axisRanges: axisRanges(this._plotArea.axes),\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this.chartService.panning = false;\n        } else {\n            this._endNavigation(e, DRAG_END);\n        }\n\n        if (this._zoomSelection) {\n            var ranges = this._zoomSelection.end(e);\n            if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                this._zoomSelection.zoom();\n                this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n            }\n        }\n    },\n\n    _stopChartHandlers: function(e) {\n        var selections = this._selections || [];\n        if (!selections.length) {\n            return false;\n        }\n\n        var coords = this._eventCoordinates(e);\n        var pane = this._plotArea.paneByPoint(coords);\n        if (pane) {\n            for (var idx = 0; idx < selections.length; idx++) {\n                if (selections[idx].onPane(pane)) {\n                    return true;\n                }\n            }\n        }\n    },\n\n    _mousewheelZoomRate: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel || {};\n        return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n    },\n\n    _mousewheel: function(e) {\n        var this$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n        var mousewheelZoom = this._mousewheelZoom;\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (mousewheelZoom) {\n            var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n            if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                e.preventDefault();\n\n                if (!this._zooming) {\n                    this._unsetActivePoint();\n                    this.surface.suspendTracking();\n                    this._zooming = true;\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                    mousewheelZoom.zoom();\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1.trigger(ZOOM_END, args);\n                    this$1._zooming = false;\n                    if (this$1.surface) {\n                        this$1.surface.resumeTracking();\n                    }\n                }, MOUSEWHEEL_DELAY);\n            }\n        } else {\n            var state = this._navState;\n            if (!state) {\n                var prevented = this._startNavigation(e, coords, ZOOM_START);\n                if (!prevented) {\n                    state = this._navState;\n                }\n            }\n\n            if (state) {\n                var totalDelta = state.totalDelta || delta;\n                state.totalDelta = totalDelta + delta;\n\n                var axes = this._navState.axes;\n                var ranges = {};\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1._mousewheelZoomRate(), coords);\n                    }\n                }\n\n                this.trigger(ZOOM, {\n                    delta: delta,\n                    axisRanges: ranges,\n                    originalEvent: e\n                });\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1._endNavigation(e, ZOOM_END);\n                }, MOUSEWHEEL_DELAY);\n            }\n        }\n    },\n\n    _startNavigation: function(e, coords, chartEvent) {\n        var plotArea = this._model._plotArea;\n        var pane = plotArea.findPointPane(coords);\n        var axes = plotArea.axes.slice(0);\n\n        if (!pane) {\n            return;\n        }\n\n        var ranges = axisRanges(axes);\n\n        var prevented = this.trigger(chartEvent, {\n            axisRanges: ranges,\n            originalEvent: e\n        });\n\n        if (prevented) {\n            this._cancelDomEvents();\n        } else {\n            this._suppressHover = true;\n            this._unsetActivePoint();\n            this._navState = {\n                axisRanges: ranges,\n                pane: pane,\n                axes: axes\n            };\n        }\n    },\n\n    _endNavigation: function(e, chartEvent) {\n        if (this._navState) {\n            this.trigger(chartEvent, {\n                axisRanges: this._navState.axisRanges,\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this._navState = null;\n        }\n    },\n\n    _getChartElement: function(e, match) {\n        var element = this.surface.eventTarget(e);\n        if (element) {\n            return this._drawingChartElement(element, e, match);\n        }\n    },\n\n    _drawingChartElement: function(element, e, match) {\n        var current = element;\n        var chartElement;\n        while (current && !chartElement) {\n            chartElement = current.chartElement;\n            current = current.parent;\n        }\n\n        if (chartElement) {\n            if (chartElement.aliasFor) {\n                chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n            }\n\n            if (match) {\n                chartElement = chartElement.closest(match);\n                if (chartElement && chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor();\n                }\n            }\n\n            return chartElement;\n        }\n    },\n\n    _eventCoordinates: function(e) {\n        var coordinates = dataviz.eventCoordinates(e);\n        return this._toModelCoordinates(coordinates.x, coordinates.y);\n    },\n\n    _elementPadding: function() {\n        if (!this._padding) {\n            var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            this._padding = {\n                top: paddingTop,\n                left: paddingLeft\n            };\n        }\n\n        return this._padding;\n    },\n\n    _toDocumentCoordinates: function(point) {\n        var padding = this._elementPadding();\n        var offset = dataviz.elementOffset(this.element);\n\n        return {\n            left: round(point.x + padding.left + offset.left),\n            top: round(point.y + padding.top + offset.top)\n        };\n    },\n\n    _toModelCoordinates: function(clientX, clientY) {\n        var element = this.element;\n        var offset = dataviz.elementOffset(element);\n        var padding = this._elementPadding();\n        var inverseTransform = dataviz.elementScale(element).invert();\n        var point = new GeometryPoint(\n            clientX - offset.left - padding.left,\n            clientY - offset.top - padding.top\n        ).transform(inverseTransform);\n\n        return new Point(point.x, point.y);\n    },\n\n    _tap: function(e) {\n        var this$1 = this;\n\n        var drawingElement = this.surface.eventTarget(e);\n        var element = this._drawingChartElement(drawingElement, e);\n        var sharedTooltip = this._sharedTooltip();\n\n        if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n            this._unsetActivePoint();\n        }\n\n        if (sharedTooltip) {\n            this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n        }\n\n        this._propagateClick(element, e);\n\n        //part of fix for hover issue on windows touch\n        this.handlingTap = true;\n        setTimeout(function () {\n            this$1.handlingTap = false;\n        }, 0);\n    },\n\n    _click: function(e) {\n        var element = this._getChartElement(e);\n        this._propagateClick(element, e);\n    },\n\n    _propagateClick: function(element, e) {\n        var this$1 = this;\n\n        var current = element;\n        while (current) {\n            if (current.click) {\n                current.click(this$1, e);\n            }\n\n            current = current.parent;\n        }\n    },\n\n    _startHover: function(element, e) {\n        if (this._suppressHover) {\n            return false;\n        }\n\n        var point = this._drawingChartElement(element, e, function(element) {\n            return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n        });\n\n        var activePoint = this._activePoint;\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n\n        this._updateHoveredPoint(point, e);\n\n        if (point && activePoint !== point && point.hover) {\n            this._activePoint = point;\n\n            if (!this._sharedTooltip() && !point.hover(this, e)) {\n                this._displayTooltip(point);\n\n                if (hasInactiveOpacity) {\n                    this._displayInactiveOpacity(point, multipleSeries);\n                } else {\n                    this._highlight.show(point);\n                }\n            }\n        } else if (!point && hasInactiveOpacity) {\n            if (multipleSeries && this._activeChartInstance) {\n                this._updateSeriesOpacity(point, true);\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                this._activeChartInstance = null;\n            }\n            this._highlight && this._highlight.hide();\n            this._activePoint = null;\n        }\n\n        return point;\n    },\n\n    _displayTooltip: function(point) {\n        var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n        if (tooltipOptions.visible) {\n            this._tooltip.show(point);\n        }\n    },\n\n    _displayInactiveOpacity: function(activePoint, multipleSeries, highlightPoints) {\n        var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n        if (!chartInstance) {\n            return;\n        }\n\n        if (multipleSeries) {\n            this._updateSeriesOpacity(activePoint);\n            this._applySeriesOpacity(chartInstance.children, null, true);\n            this._applySeriesOpacity(chartInstance.children, activePoint.series);\n            this._highlight.show(highlightPoints || activePoint);\n        } else {\n            var inactivePoints;\n\n            if (!chartInstance.supportsPointInactiveOpacity()) {\n                this._highlight.show(activePoint);\n                return;\n            }\n\n            inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n            if (inactivePoints && inactivePoints.length) {\n                this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n            }\n        }\n    },\n\n    _getInactivePoints: function(activePoint, chartInstance) {\n        var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n        return allPoints.filter(function (point) { return point !== activePoint; });\n    },\n\n    _getAllPointsOfType: function(container, type) {\n        var this$1 = this;\n\n        var points = [];\n\n        for (var i = 0; i < container.children.length; i++) {\n            var element = container.children[i];\n\n            if (element.constructor === type) {\n                points.push(element);\n            } else if (element.children && element.children.length) {\n                points = points.concat(this$1._getAllPointsOfType(element, type));\n            }\n        }\n\n        return points;\n    },\n\n    _updateHoveredPoint: function(point, e) {\n        var hoveredPoint = this._hoveredPoint;\n\n        if (hoveredPoint && hoveredPoint !== point) {\n            hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (point && hoveredPoint !== point && point.over) {\n            this._hoveredPoint = point;\n            point.over(this, e);\n        }\n    },\n\n    _updateSeriesOpacity: function(point, resetOpacity) {\n        var this$1 = this;\n\n        var plotArea = this._plotArea;\n        var length = plotArea.series.length;\n\n        for (var i = 0; i < length; i++) {\n            var currSeries = plotArea.series[i];\n            var defaultOpacity = this$1._getDefaultOpacityForSeries(currSeries);\n            var inactiveOpacity = this$1._getInactiveOpacityForSeries(currSeries);\n\n            if (!resetOpacity && currSeries !== point.series) {\n                currSeries.defaultOpacity = defaultOpacity;\n                currSeries.opacity = inactiveOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = inactiveOpacity;\n                }\n            } else {\n                currSeries.opacity = defaultOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = defaultOpacity;\n                }\n            }\n        }\n    },\n\n    _applySeriesOpacity: function(elements, activeSeries, reset, series) {\n        var this$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var currSeries = element.series || series;\n            var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n            if (shouldHighlight && element.visual) {\n                var opacity = series ? series.opacity : element.series.opacity;\n                if (currSeries !== activeSeries || reset) {\n                    element.visual.opacity(reset ? 1 : opacity);\n                }\n            }\n\n            if (element.children && element.children.length) {\n                this$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n            }\n        }\n    },\n\n    _chartInstanceFromPoint: function(point) {\n        var chartInstance = point.parent;\n\n        while (chartInstance && !chartInstance.plotArea) {\n            chartInstance = chartInstance.parent;\n        }\n\n        return chartInstance;\n    },\n\n    _hasInactiveOpacity: function() {\n        var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n        var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n        return hasDefaultInactiveOpacity || hasInactiveOpacity;\n    },\n\n    _getInactiveOpacityForSeries: function(series) {\n        var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n        var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n        return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _getDefaultOpacityForSeries: function(series) {\n        return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _mouseover: function(e) {\n        var point = this._startHover(e.element, e.originalEvent);\n\n        if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n            this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n            var obj;\n            bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n        }\n    },\n\n    _mouseMoveTracking: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n        var point = ref._activePoint;\n        var coords = this._eventCoordinates(e);\n\n        if (this._plotArea.box.containsPoint(coords)) {\n            if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                if (seriesPoint && seriesPoint !== point) {\n                    this._activePoint = seriesPoint;\n\n                    if (!seriesPoint.hover(this, e)) {\n                        var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                        if (tooltipOptions.visible) {\n                            tooltip.show(seriesPoint);\n                        }\n\n                        highlight.show(seriesPoint);\n                    }\n                }\n            }\n        } else {\n            var obj;\n            unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            this._unsetActivePoint();\n            this._mouseMoveTrackHandler = null;\n        }\n    },\n\n    _mousemove: function(e) {\n        var coords = this._eventCoordinates(e);\n        var plotArea = this._plotArea;\n\n        this._trackCrosshairs(coords);\n\n        if (plotArea.hover) {\n            var overPlotArea = plotArea.backgroundContainsPoint(coords);\n            if (overPlotArea) {\n                plotArea.hovered = true;\n                this._plotArea.hover(this, e);\n            } else if (plotArea.hovered && !overPlotArea) {\n                this.trigger(PLOT_AREA_LEAVE);\n                plotArea.hovered = false;\n            }\n        }\n\n        if (this._sharedTooltip()) {\n            this._trackSharedTooltip(coords, e);\n        }\n    },\n\n    _trackCrosshairs: function(coords) {\n        var crosshairs = this._plotArea.crosshairs;\n\n        for (var i = 0; i < crosshairs.length; i++) {\n            var current = crosshairs[i];\n\n            if (current.box.containsPoint(coords)) {\n                current.showAt(coords);\n            } else {\n                current.hide();\n            }\n        }\n    },\n\n    _trackSharedTooltip: function(coords, e, toggle) {\n        if (this._suppressHover) {\n            return;\n        }\n\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var plotArea = ref._plotArea;\n        var categoryAxis = ref._plotArea.categoryAxis;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        if (plotArea.backgroundContainsPoint(coords)) {\n            var index = categoryAxis.pointCategoryIndex(coords);\n            if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                var points = plotArea.pointsByCategoryIndex(index);\n                var pointArgs = points.map(function(point) {\n                    return point.eventArgs(e);\n                });\n                var hoverArgs = pointArgs[0] || {};\n                hoverArgs.categoryPoints = pointArgs;\n\n                if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                    if (tooltipOptions.visible) {\n                        tooltip.showAt(points, coords);\n                    }\n\n                    highlight.show(points);\n\n                    this._sharedHighlight = true;\n                } else {\n                    tooltip.hide();\n                }\n\n                this._tooltipCategoryIx = index;\n            } else if (toggle && this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._sharedHighlight = false;\n            }\n        } else if (this._sharedHighlight) {\n            highlight.hide();\n            tooltip.hide();\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n        }\n    },\n\n    hideElements: function(options) {\n        var plotArea = this._plotArea;\n        this._mousemove.cancel();\n\n        plotArea.hideCrosshairs();\n\n        this._unsetActivePoint(options);\n    },\n\n    _unsetActivePoint: function(options) {\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        this._activePoint = null;\n        this._hoveredPoint = null;\n\n        if (tooltip && !(options && options.keepTooltipOpen)) {\n            tooltip.hide();\n        }\n\n        this._tooltipCategoryIx = null;\n        this._sharedHighlight = false;\n\n        if (highlight) {\n            highlight.hide();\n        }\n    },\n\n    _deferRedraw: function() {\n        this._redraw();\n    },\n\n    _clearRedrawTimeout: function() {\n        if (this._redrawTimeout) {\n            clearInterval(this._redrawTimeout);\n            this._redrawTimeout = null;\n        }\n    },\n\n    bindCategories: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var definitions = [].concat(options.categoryAxis);\n\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n            var axis = definitions[axisIx];\n            if (axis.autoBind !== false) {\n                this$1.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        }\n    },\n\n    bindCategoryAxisFromSeries: function(axis, axisIx) {\n        var this$1 = this;\n\n        var series = this.options.series;\n        var seriesLength = series.length;\n        var uniqueCategories = new dataviz.HashMap();//perf improvement in case type category with dates\n        var items = [];\n        var bindable = false;\n        var dateAxis;\n\n        for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n            var s = series[seriesIx];\n            var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\n            var data = s.data;\n            var dataLength = data.length;\n            var bind = s.categoryField && onAxis;\n            bindable = bind || bindable;\n\n            if (bind && dataLength > 0) {\n                dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n\n                var getFn = dateAxis ? getDateField : getField;\n\n                for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                    var dataRow = data[dataIx];\n                    var category = getFn(s.categoryField, dataRow, this$1.chartService.intl);\n\n                    if (dateAxis || !uniqueCategories.get(category)) {\n                        items.push([ category, dataRow ]);\n\n                        if (!dateAxis) {\n                            uniqueCategories.set(category, true);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (items.length > 0) {\n            if (dateAxis) {\n                items = uniqueDates(items, function(a, b) {\n                    return dataviz.dateComparer(a[0], b[0]);\n                });\n            }\n\n            var result = transpose(items);\n            axis.categories = result[0];\n        } else if (bindable) {\n            axis.categories = [];\n        }\n    },\n\n    _isBindable: function(series) {\n        var valueFields = SeriesBinder.current.valueFields(series);\n        var result = true;\n\n        for (var i = 0; i < valueFields.length; i++) {\n            var field = valueFields[i];\n            if (field === VALUE) {\n                field = \"field\";\n            } else {\n                field = field + \"Field\";\n            }\n\n            if (!defined(series[field])) {\n                result = false;\n                break;\n            }\n        }\n\n        return result;\n    },\n\n    _noTransitionsRedraw: function() {\n        var options = this.options;\n        var transitionsState;\n\n        if (options.transitions !== false) {\n            options.transitions = false;\n            transitionsState = true;\n        }\n\n        this._redraw();\n\n        if (transitionsState) {\n            options.transitions = true;\n        }\n    },\n\n    _legendItemHover: function(seriesIndex, pointIndex) {\n        var ref = this;\n        var plotArea = ref._plotArea;\n        var highlight = ref._highlight;\n        var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n        var items;\n\n        if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL ])) {\n            items = plotArea.findPoint(function(point) {\n                return point.series.index === seriesIndex && point.index === pointIndex;\n            });\n        } else {\n            items = plotArea.pointsBySeriesIndex(seriesIndex);\n        }\n\n        if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n            var multipleSeries = plotArea.series.length > 1;\n            var point = items.length ? items[0] : items;\n\n            this._displayInactiveOpacity(point, multipleSeries, items);\n        } else {\n            highlight.show(items);\n        }\n    },\n\n    _shouldAttachMouseMove: function() {\n        return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n    },\n\n    updateMouseMoveHandler: function() {\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n    },\n\n    applyOptions: function(options, theme) {\n        clearMissingValues(this._originalOptions, options);\n        this._originalOptions = deepExtend(this._originalOptions, options);\n        this.options = deepExtend({}, this._originalOptions);\n\n        if (theme) {\n            this._theme = theme;\n            this.chartService.theme = theme;\n        }\n        this._initTheme(this.options, this._theme);\n\n        this._toggleDragZoomEvents();\n    },\n\n    setOptions: function(options, theme) {\n        this.applyOptions(options, theme);\n        this.bindCategories();\n        this.redraw();\n        this.updateMouseMoveHandler();\n    },\n\n    setDirection: function(rtl) {\n        this.chartService.rtl = Boolean(rtl);\n        if (this.surface && this.surface.type === 'svg') {\n            this._destroySurface();\n        }\n    },\n\n    setIntlService: function(intl) {\n        this.chartService.intl = intl;\n    },\n\n    noTransitionsRedraw: function() {\n        this._noTransitionsRedraw();\n    },\n\n    destroy: function() {\n        this._destroyed = true;\n\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this.domEvents) {\n            this.domEvents.destroy();\n            delete this.domEvents;\n        }\n\n        if (this._mouseMoveTrackHandler) {\n            var obj$1;\n            unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n        }\n\n        this._destroyView();\n\n        this._destroySurface();\n\n        this._clearRedrawTimeout();\n    },\n\n    _destroySurface: function() {\n        var surface = this.surface;\n        if (surface) {\n            surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n            surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n            surface.destroy();\n\n            this.surface = null;\n        }\n    },\n\n    _destroySelections: function() {\n        var selections = this._selections;\n\n        if (selections) {\n            while (selections.length > 0) {\n                selections.shift().destroy();\n            }\n        }\n    },\n\n    _destroyView: function() {\n        var model = this._model;\n\n        if (model) {\n            model.destroy();\n            this._model = null;\n        }\n\n        this._unsetActivePoint();\n\n        this._destroySelections();\n\n        if (this._tooltip) {\n            this._tooltip.destroy();\n        }\n\n        if (this._highlight) {\n            this._highlight.destroy();\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.destroy();\n            delete this._zoomSelection;\n        }\n\n        if (this._pannable) {\n            this._pannable.destroy();\n            delete this._pannable;\n        }\n\n        if (this._mousewheelZoom) {\n            this._mousewheelZoom.destroy();\n            delete this._mousewheelZoom;\n        }\n    }\n});\n\nfunction resolveAxisAliases(options) {\n    var aliases = AXIS_NAMES;\n\n    for (var idx = 0; idx < aliases.length; idx++) {\n        var alias = aliases[idx] + \"Axes\";\n        if (options[alias]) {\n            options[aliases[idx] + \"Axis\"] = options[alias];\n            delete options[alias];\n        }\n    }\n}\n\nfunction pointByCategoryName(points, name) {\n    if (points) {\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx].category === name) {\n                return [ points[idx] ];\n            }\n        }\n    }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n    var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n    var axisName, axisDefaults, axes;\n\n    function mapAxisOptions(axisOptions) {\n        var axisColor = (axisOptions || {}).color || axisDefaults.color;\n        var result = deepExtend({},\n            themeAxisDefaults,\n            themeAxisDefaults[axisName],\n            axisDefaults,\n            axisDefaults[axisName], {\n                line: { color: axisColor },\n                labels: { color: axisColor },\n                title: { color: axisColor }\n            },\n            axisOptions\n        );\n\n        delete result[axisName];\n\n        return result;\n    }\n\n    for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n        axisName = AXIS_NAMES[idx] + \"Axis\";\n        axisDefaults = options.axisDefaults || {};\n        axes = [].concat(options[axisName]);\n\n        axes = axes.map(mapAxisOptions);\n\n        options[axisName] = axes.length > 1 ? axes : axes[0];\n    }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n    var series = options.series;\n    var seriesLength = series.length;\n    var seriesDefaults = options.seriesDefaults;\n    var commonDefaults = deepExtend({}, options.seriesDefaults);\n    var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n    var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n    cleanupNestedSeriesDefaults(commonDefaults);\n    cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n    for (var i = 0; i < seriesLength; i++) {\n        var seriesType = series[i].type || options.seriesDefaults.type;\n\n        var baseOptions = deepExtend(\n            { data: [] },\n            commonThemeDefaults,\n            themeSeriesDefaults[seriesType],\n            { tooltip: options.tooltip },\n            commonDefaults,\n            seriesDefaults[seriesType]\n        );\n\n        series[i]._defaults = baseOptions;\n        series[i] = deepExtend({}, baseOptions, series[i]);\n        series[i].data = series[i].data || [];\n    }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n    delete seriesDefaults.bar;\n    delete seriesDefaults.column;\n    delete seriesDefaults.rangeColumn;\n    delete seriesDefaults.line;\n    delete seriesDefaults.verticalLine;\n    delete seriesDefaults.pie;\n    delete seriesDefaults.donut;\n    delete seriesDefaults.area;\n    delete seriesDefaults.verticalArea;\n    delete seriesDefaults.scatter;\n    delete seriesDefaults.scatterLine;\n    delete seriesDefaults.bubble;\n    delete seriesDefaults.candlestick;\n    delete seriesDefaults.ohlc;\n    delete seriesDefaults.boxPlot;\n    delete seriesDefaults.bullet;\n    delete seriesDefaults.verticalBullet;\n    delete seriesDefaults.polarArea;\n    delete seriesDefaults.polarLine;\n    delete seriesDefaults.radarArea;\n    delete seriesDefaults.radarLine;\n    delete seriesDefaults.waterfall;\n}\n\nfunction axisRanges(axes) {\n    var ranges = {};\n\n    for (var i = 0; i < axes.length; i++) {\n        var axis = axes[i];\n        var axisName = axis.options.name;\n        if (axisName) {\n            ranges[axisName] = axis.range();\n        }\n    }\n\n    return ranges;\n}\n\nfunction sortDates(dates, comparer) {\n    if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n    for (var i = 1, length = dates.length; i < length; i++) {\n        if (comparer(dates[i], dates[i - 1]) < 0) {\n            dates.sort(comparer);\n            break;\n        }\n    }\n\n    return dates;\n}\n\nfunction uniqueDates(srcDates, comparer) {\n    if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n    var dates = sortDates(srcDates, comparer);\n    var length = dates.length;\n    var result = length > 0 ? [ dates[0] ] : [];\n\n    for (var i = 1; i < length; i++) {\n        if (comparer(dates[i], last(result)) !== 0) {\n            result.push(dates[i]);\n        }\n    }\n\n    return result;\n}\n\nfunction transpose(rows) {\n    var rowCount = rows.length;\n    var result = [];\n\n    for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n        var row = rows[rowIx];\n        var colCount = row.length;\n\n        for (var colIx = 0; colIx < colCount; colIx++) {\n            result[colIx] = result[colIx] || [];\n            result[colIx].push(row[colIx]);\n        }\n    }\n\n    return result;\n}\n\nvar DATA_FIELDS = [ 'data', 'categories' ];\n\nfunction clearMissingValues(originalOptions, options) {\n    for (var field in options) {\n        if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n            var fieldValue = options[field];\n            var originalValue = originalOptions[field];\n            if (defined(originalValue)) {\n                var nullValue = fieldValue === null;\n                if ((nullValue || !defined(fieldValue))) {\n                    delete originalOptions[field];\n                    if (nullValue) {\n                        delete options[field];\n                    }\n                } else if (originalValue && isObject(fieldValue)) {\n                    if (isObject(originalValue)) {\n                        clearMissingValues(originalValue, fieldValue);\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction triggerPaneRender(panes) {\n    for (var idx = 0; idx < panes.length; idx++) {\n        panes[idx].notifyRender();\n    }\n}\n\nsetDefaultOptions(Chart, {\n    renderAs: \"\",\n    chartArea: {},\n    legend: {\n        visible: true,\n        labels: {}\n    },\n    categoryAxis: {},\n    seriesDefaults: {\n        type: COLUMN,\n        data: [],\n        highlight: {\n            visible: true\n        },\n        labels: {},\n        negativeValues: {\n            visible: false\n        }\n    },\n    series: [],\n    seriesColors: null,\n    tooltip: {\n        visible: false\n    },\n    transitions: true,\n    valueAxis: {},\n    plotArea: {},\n    title: {},\n    xAxis: {},\n    yAxis: {},\n    panes: [ {} ],\n    pannable: false,\n    zoomable: false\n});\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    Aggregates: Aggregates,\n    AreaChart: AreaChart,\n    AreaSegment: AreaSegment,\n    AxisGroupRangeTracker: AxisGroupRangeTracker,\n    Bar: Bar,\n    BarChart: BarChart,\n    BarLabel: BarLabel,\n    BoxPlotChart: BoxPlotChart,\n    BoxPlot: BoxPlot,\n    BubbleChart: BubbleChart,\n    Bullet: Bullet,\n    BulletChart: BulletChart,\n    CandlestickChart: CandlestickChart,\n    Candlestick: Candlestick,\n    CategoricalChart: CategoricalChart,\n    CategoricalErrorBar: CategoricalErrorBar,\n    CategoricalPlotArea: CategoricalPlotArea,\n    Chart: Chart,\n    ChartContainer: ChartContainer,\n    ClipAnimation: ClipAnimation,\n    ClusterLayout: ClusterLayout,\n    Crosshair: Crosshair,\n    CrosshairTooltip: CrosshairTooltip,\n    DefaultAggregates: DefaultAggregates,\n    DonutChart: DonutChart,\n    DonutPlotArea: DonutPlotArea,\n    DonutSegment: DonutSegment,\n    ErrorBarBase: ErrorBarBase,\n    ErrorRangeCalculator: ErrorRangeCalculator,\n    Highlight: Highlight,\n    SharedTooltip: SharedTooltip,\n    Legend: Legend,\n    LegendItem: LegendItem,\n    LegendLayout: LegendLayout,\n    LineChart: LineChart,\n    LinePoint: LinePoint,\n    LineSegment: LineSegment,\n    Pane: Pane,\n    PieAnimation: PieAnimation,\n    PieChart: PieChart,\n    PieChartMixin: PieChartMixin,\n    PiePlotArea: PiePlotArea,\n    PieSegment: PieSegment,\n    PlotAreaBase: PlotAreaBase,\n    PlotAreaEventsMixin: PlotAreaEventsMixin,\n    PlotAreaFactory: PlotAreaFactory,\n    PointEventsMixin: PointEventsMixin,\n    RangeBar: RangeBar,\n    RangeBarChart: RangeBarChart,\n    RangeAreaPoint: RangeAreaPoint,\n    RangeAreaChart: RangeAreaChart,\n    ScatterChart: ScatterChart,\n    ScatterErrorBar: ScatterErrorBar,\n    ScatterLineChart: ScatterLineChart,\n    Selection: Selection,\n    SeriesAggregator: SeriesAggregator,\n    SeriesBinder: SeriesBinder,\n    SplineSegment: SplineSegment,\n    SplineAreaSegment: SplineAreaSegment,\n    StackWrap: StackWrap,\n    Tooltip: Tooltip,\n    OHLCChart: OHLCChart,\n    OHLCPoint: OHLCPoint,\n    WaterfallChart: WaterfallChart,\n    WaterfallSegment: WaterfallSegment,\n    XYPlotArea: XYPlotArea,\n    MousewheelZoom: MousewheelZoom,\n    ZoomSelection: ZoomSelection,\n    Pannable: Pannable,\n    ChartAxis: ChartAxis,\n    ChartPane: ChartPane,\n    ChartPlotArea: ChartPlotArea,\n    findAxisByName: findAxisByName,\n    anyHasZIndex: anyHasZIndex,\n    appendIfNotNull: appendIfNotNull,\n    areNumbers: areNumbers,\n    bindSegments: bindSegments,\n    categoriesCount: categoriesCount,\n    countNumbers: countNumbers,\n    equalsIgnoreCase: equalsIgnoreCase,\n    evalOptions: evalOptions,\n    filterSeriesByType: filterSeriesByType,\n    getDateField: getDateField,\n    getField: getField,\n    hasGradientOverlay: hasGradientOverlay,\n    hasValue: hasValue,\n    isDateAxis: isDateAxis,\n    segmentVisible: segmentVisible,\n    singleItemOrArray: singleItemOrArray,\n    createOutOfRangePoints: createOutOfRangePoints\n});\n\n})(window.kendo.jQuery);\n\n}, __webpack_require__.amdD);\n\n/***/ }),\n\n/***/ 13298:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../../kendo.color\");\n\n/***/ }),\n\n/***/ 33877:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../../kendo.core\");\n\n/***/ }),\n\n/***/ 32549:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../../kendo.dataviz.core\");\n\n/***/ }),\n\n/***/ 79174:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../../kendo.drawing\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(55038);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}