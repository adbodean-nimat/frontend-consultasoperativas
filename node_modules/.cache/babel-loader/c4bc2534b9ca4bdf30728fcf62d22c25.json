{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    5519:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n      /***********************************************************************\n      * WARNING: this file is auto-generated.  If you change it directly,\n      * your modifications will eventually be lost.  The source code is in\n      * `kendo-drawing` repository, you should make your changes there and\n      * run `src-modules/sync.sh` in this repository.\n      */\n\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(49454), __webpack_require__(97757), __webpack_require__(4199)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        (function ($) {\n          /* eslint-disable space-before-blocks, space-before-function-paren */\n          window.kendo = window.kendo || {};\n          var kendoDrawing = kendo.drawing;\n          var kendoDrawingUtil = kendoDrawing.util;\n          var extendStatic = kendoDrawingUtil.extendStatic;\n          var Class = kendo.Class;\n          var kendoUtil = kendo.util;\n          var support = kendo.support;\n          var supportBrowser = support.browser;\n          var createPromise = kendoDrawingUtil.createPromise;\n          var promiseAll = kendoDrawingUtil.promiseAll;\n\n          var HasObservers = function (Class$$1) {\n            function HasObservers() {\n              Class$$1.apply(this, arguments);\n            }\n\n            extendStatic(HasObservers, Class$$1);\n            HasObservers.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            HasObservers.prototype.constructor = HasObservers;\n            HasObservers.fn = HasObservers.prototype;\n            HasObservers.fn.init = HasObservers.fn.constructor;\n\n            HasObservers.prototype.observers = function observers() {\n              this._observers = this._observers || [];\n              return this._observers;\n            };\n\n            HasObservers.prototype.addObserver = function addObserver(element) {\n              if (!this._observers) {\n                this._observers = [element];\n              } else {\n                this._observers.push(element);\n              }\n\n              return this;\n            };\n\n            HasObservers.prototype.removeObserver = function removeObserver(element) {\n              var observers = this.observers();\n              var index = observers.indexOf(element);\n\n              if (index !== -1) {\n                observers.splice(index, 1);\n              }\n\n              return this;\n            };\n\n            HasObservers.prototype.trigger = function trigger(methodName, event) {\n              var observers = this._observers;\n\n              if (observers && !this._suspended) {\n                for (var idx = 0; idx < observers.length; idx++) {\n                  var observer = observers[idx];\n\n                  if (observer[methodName]) {\n                    observer[methodName](event);\n                  }\n                }\n              }\n\n              return this;\n            };\n\n            HasObservers.prototype.optionsChange = function optionsChange(e) {\n              if (e === void 0) {\n                e = {};\n              }\n\n              e.element = this;\n              this.trigger(\"optionsChange\", e);\n            };\n\n            HasObservers.prototype.geometryChange = function geometryChange() {\n              this.trigger(\"geometryChange\", {\n                element: this\n              });\n            };\n\n            HasObservers.prototype.suspend = function suspend() {\n              this._suspended = (this._suspended || 0) + 1;\n              return this;\n            };\n\n            HasObservers.prototype.resume = function resume() {\n              this._suspended = Math.max((this._suspended || 0) - 1, 0);\n              return this;\n            };\n\n            HasObservers.prototype._observerField = function _observerField(field, value) {\n              if (this[field]) {\n                this[field].removeObserver(this);\n              }\n\n              this[field] = value;\n              value.addObserver(this);\n            };\n\n            return HasObservers;\n          }(Class);\n\n          function append$1$1(first, second) {\n            first.push.apply(first, second);\n            return first;\n          }\n          /* eslint-disable key-spacing,no-multi-spaces,no-param-reassign */\n\n\n          var literals = {\n            1: \"i\",\n            10: \"x\",\n            100: \"c\",\n            2: \"ii\",\n            20: \"xx\",\n            200: \"cc\",\n            3: \"iii\",\n            30: \"xxx\",\n            300: \"ccc\",\n            4: \"iv\",\n            40: \"xl\",\n            400: \"cd\",\n            5: \"v\",\n            50: \"l\",\n            500: \"d\",\n            6: \"vi\",\n            60: \"lx\",\n            600: \"dc\",\n            7: \"vii\",\n            70: \"lxx\",\n            700: \"dcc\",\n            8: \"viii\",\n            80: \"lxxx\",\n            800: \"dccc\",\n            9: \"ix\",\n            90: \"xc\",\n            900: \"cm\",\n            1000: \"m\"\n          };\n\n          function arabicToRoman(n) {\n            var values = [1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1];\n            var roman = \"\";\n\n            while (n > 0) {\n              if (n < values[0]) {\n                values.shift();\n              } else {\n                roman += literals[values[0]];\n                n -= values[0];\n              }\n            }\n\n            return roman;\n          }\n\n          var UNDEFINED = \"undefined\";\n\n          function defined(value) {\n            return typeof value !== UNDEFINED;\n          }\n\n          var defId = 1;\n\n          function definitionId() {\n            return \"kdef\" + defId++;\n          }\n\n          var DEG_TO_RAD = Math.PI / 180;\n          var MAX_NUM = Number.MAX_VALUE;\n          var MIN_NUM = -Number.MAX_VALUE;\n\n          function deg(radians) {\n            return radians / DEG_TO_RAD;\n          }\n\n          var fromCharCode = String.fromCharCode; // Encodes a string as UTF-8\n\n          function encodeUTF8(input) {\n            var output = \"\";\n\n            for (var i = 0; i < input.length; i++) {\n              var code = input.charCodeAt(i);\n\n              if (0xD800 <= code && code <= 0xDBFF) {\n                var hi = code;\n                var low = input.charCodeAt(++i);\n\n                if (!isNaN(low)) {\n                  // Combine high and low surrogate\n                  // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt\n                  code = (hi - 0xD800) * 0x400 + (low - 0xDC00) + 0x10000;\n                }\n              }\n\n              if (code < 0x80) {\n                // One byte\n                output += fromCharCode(code);\n              } else if (code < 0x800) {\n                // Two bytes\n                output += fromCharCode(0xC0 | code >>> 6);\n                output += fromCharCode(0x80 | code & 0x3f);\n              } else if (code < 0x10000) {\n                // Three bytes\n                output += fromCharCode(0xE0 | code >>> 12);\n                output += fromCharCode(0x80 | code >>> 6 & 0x3f);\n                output += fromCharCode(0x80 | code & 0x3f);\n              } else if (code < 0x10FFFF) {\n                // Four bytes\n                output += fromCharCode(0xF0 | code >>> 18);\n                output += fromCharCode(0x80 | code >>> 12 & 0x3f);\n                output += fromCharCode(0x80 | code >>> 6 & 0x3f);\n                output += fromCharCode(0x80 | code & 0x3f);\n              }\n            }\n\n            return output;\n          } // Encodes a string as UTF-16 big-endian\n\n\n          var KEY_STR = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n          function encodeBase64(input) {\n            var output = \"\";\n            var i = 0;\n            var utfInput = encodeUTF8(input);\n\n            while (i < utfInput.length) {\n              var chr1 = utfInput.charCodeAt(i++);\n              var chr2 = utfInput.charCodeAt(i++);\n              var chr3 = utfInput.charCodeAt(i++);\n              var enc1 = chr1 >> 2;\n              var enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n              var enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n              var enc4 = chr3 & 63;\n\n              if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n              } else if (isNaN(chr3)) {\n                enc4 = 64;\n              }\n\n              output = output + KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) + KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\n            }\n\n            return output;\n          }\n\n          function eventCoordinates(e) {\n            if (defined((e.x || {}).location)) {\n              return {\n                x: e.x.location,\n                y: e.y.location\n              };\n            }\n\n            return {\n              x: e.pageX || e.clientX || 0,\n              y: e.pageY || e.clientY || 0\n            };\n          }\n\n          function eventElement(e) {\n            if (e === void 0) {\n              e = {};\n            }\n\n            return e.touch ? e.touch.initialTouch : e.target;\n          }\n\n          function isTransparent(color) {\n            return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n          }\n\n          function last(array) {\n            if (array) {\n              return array[array.length - 1];\n            }\n          }\n\n          function limitValue(value, min, max) {\n            return Math.max(Math.min(value, max), min);\n          }\n          /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n\n          /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n\n          /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n\n          /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n          // mergeSort is stable.\n\n\n          function mergeSort(a, cmp) {\n            if (a.length < 2) {\n              return a.slice();\n            }\n\n            function merge(a, b) {\n              var r = [],\n                  ai = 0,\n                  bi = 0,\n                  i = 0;\n\n              while (ai < a.length && bi < b.length) {\n                if (cmp(a[ai], b[bi]) <= 0) {\n                  r[i++] = a[ai++];\n                } else {\n                  r[i++] = b[bi++];\n                }\n              }\n\n              if (ai < a.length) {\n                r.push.apply(r, a.slice(ai));\n              }\n\n              if (bi < b.length) {\n                r.push.apply(r, b.slice(bi));\n              }\n\n              return r;\n            }\n\n            return function sort(a) {\n              if (a.length <= 1) {\n                return a;\n              }\n\n              var m = Math.floor(a.length / 2);\n              var left = a.slice(0, m);\n              var right = a.slice(m);\n              left = sort(left);\n              right = sort(right);\n              return merge(left, right);\n            }(a);\n          }\n\n          var now = Date.now || function () {\n            return new Date().getTime();\n          };\n\n          function rad(degrees) {\n            return degrees * DEG_TO_RAD;\n          }\n\n          function pow(p) {\n            if (p) {\n              return Math.pow(10, p);\n            }\n\n            return 1;\n          }\n\n          function round(value, precision) {\n            var power = pow(precision);\n            return Math.round(value * power) / power;\n          }\n\n          function valueOrDefault(value, defaultValue) {\n            return defined(value) ? value : defaultValue;\n          }\n\n          function bindEvents(element, events) {\n            for (var eventName in events) {\n              var eventNames = eventName.trim().split(\" \");\n\n              for (var idx = 0; idx < eventNames.length; idx++) {\n                element.addEventListener(eventNames[idx], events[eventName], false);\n              }\n            }\n          }\n\n          function elementOffset(element) {\n            var box = element.getBoundingClientRect();\n            var documentElement = document.documentElement;\n            return {\n              top: box.top + (window.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0),\n              left: box.left + (window.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0)\n            };\n          }\n\n          function elementStyles(element, styles) {\n            var result = {};\n            var style = window.getComputedStyle(element) || {};\n            var stylesArray = Array.isArray(styles) ? styles : [styles];\n\n            for (var idx = 0; idx < stylesArray.length; idx++) {\n              var field = stylesArray[idx];\n              result[field] = style[field];\n            }\n\n            return result;\n          }\n\n          function getPixels(value) {\n            if (isNaN(value)) {\n              return value;\n            }\n\n            return value + \"px\";\n          }\n\n          function elementSize(element, size) {\n            if (size) {\n              var width = size.width;\n              var height = size.height;\n\n              if (defined(width)) {\n                element.style.width = getPixels(width);\n              }\n\n              if (defined(height)) {\n                element.style.height = getPixels(height);\n              }\n            } else {\n              var size$1 = elementStyles(element, ['width', 'height']);\n              return {\n                width: parseInt(size$1.width, 10),\n                height: parseInt(size$1.height, 10)\n              };\n            }\n          }\n\n          function unbindEvents(element, events) {\n            if (events === void 0) {\n              events = {};\n            }\n\n            for (var name in events) {\n              var eventNames = name.trim().split(\" \");\n\n              for (var idx = 0; idx < eventNames.length; idx++) {\n                element.removeEventListener(eventNames[idx], events[name], false);\n              }\n            }\n          }\n\n          function elementPadding(element) {\n            var ref = elementStyles(element, [\"paddingLeft\", \"paddingTop\"]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            return {\n              top: parseFloat(paddingTop),\n              left: parseFloat(paddingLeft)\n            };\n          }\n\n          var Matrix = function (Class$$1) {\n            function Matrix(a, b, c, d, e, f) {\n              if (a === void 0) {\n                a = 0;\n              }\n\n              if (b === void 0) {\n                b = 0;\n              }\n\n              if (c === void 0) {\n                c = 0;\n              }\n\n              if (d === void 0) {\n                d = 0;\n              }\n\n              if (e === void 0) {\n                e = 0;\n              }\n\n              if (f === void 0) {\n                f = 0;\n              }\n\n              Class$$1.call(this);\n              this.a = a;\n              this.b = b;\n              this.c = c;\n              this.d = d;\n              this.e = e;\n              this.f = f;\n            }\n\n            extendStatic(Matrix, Class$$1);\n            Matrix.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            Matrix.prototype.constructor = Matrix;\n            Matrix.fn = Matrix.prototype;\n            Matrix.fn.init = Matrix.fn.constructor;\n\n            Matrix.prototype.multiplyCopy = function multiplyCopy(matrix) {\n              return new Matrix(this.a * matrix.a + this.c * matrix.b, this.b * matrix.a + this.d * matrix.b, this.a * matrix.c + this.c * matrix.d, this.b * matrix.c + this.d * matrix.d, this.a * matrix.e + this.c * matrix.f + this.e, this.b * matrix.e + this.d * matrix.f + this.f);\n            };\n\n            Matrix.prototype.invert = function invert() {\n              var ref = this;\n              var a = ref.a;\n              var b = ref.b;\n              var d = ref.c;\n              var e = ref.d;\n              var g = ref.e;\n              var h = ref.f;\n              var det = a * e - b * d;\n\n              if (det === 0) {\n                return null;\n              }\n\n              return new Matrix(e / det, -b / det, -d / det, a / det, (d * h - e * g) / det, (b * g - a * h) / det);\n            };\n\n            Matrix.prototype.clone = function clone() {\n              return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n            };\n\n            Matrix.prototype.equals = function equals(other) {\n              if (!other) {\n                return false;\n              }\n\n              return this.a === other.a && this.b === other.b && this.c === other.c && this.d === other.d && this.e === other.e && this.f === other.f;\n            };\n\n            Matrix.prototype.round = function round$1(precision) {\n              this.a = round(this.a, precision);\n              this.b = round(this.b, precision);\n              this.c = round(this.c, precision);\n              this.d = round(this.d, precision);\n              this.e = round(this.e, precision);\n              this.f = round(this.f, precision);\n              return this;\n            };\n\n            Matrix.prototype.toArray = function toArray(precision) {\n              var result = [this.a, this.b, this.c, this.d, this.e, this.f];\n\n              if (defined(precision)) {\n                for (var i = 0; i < result.length; i++) {\n                  result[i] = round(result[i], precision);\n                }\n              }\n\n              return result;\n            };\n\n            Matrix.prototype.toString = function toString(precision, separator) {\n              if (separator === void 0) {\n                separator = \",\";\n              }\n\n              return this.toArray(precision).join(separator);\n            };\n\n            Matrix.translate = function translate(x, y) {\n              return new Matrix(1, 0, 0, 1, x, y);\n            };\n\n            Matrix.unit = function unit() {\n              return new Matrix(1, 0, 0, 1, 0, 0);\n            };\n\n            Matrix.rotate = function rotate(angle, x, y) {\n              var matrix = new Matrix();\n              matrix.a = Math.cos(rad(angle));\n              matrix.b = Math.sin(rad(angle));\n              matrix.c = -matrix.b;\n              matrix.d = matrix.a;\n              matrix.e = x - x * matrix.a + y * matrix.b || 0;\n              matrix.f = y - y * matrix.a - x * matrix.b || 0;\n              return matrix;\n            };\n\n            Matrix.scale = function scale(scaleX, scaleY) {\n              return new Matrix(scaleX, 0, 0, scaleY, 0, 0);\n            };\n\n            return Matrix;\n          }(Class);\n\n          Matrix.IDENTITY = Matrix.unit();\n          var matrixRegexp = /matrix\\((.*)\\)/;\n\n          function parseMatrix(matrixString) {\n            var match = matrixString.match(matrixRegexp);\n\n            if (match === null || match.length !== 2) {\n              return Matrix.unit();\n            }\n\n            var members = match[1].split(',').map(function (x) {\n              return parseFloat(x);\n            });\n            return new (Function.prototype.bind.apply(Matrix, [null].concat(members)))();\n          }\n\n          function transformMatrix(element) {\n            var transform = getComputedStyle(element).transform;\n\n            if (transform === 'none') {\n              return Matrix.unit();\n            }\n\n            return parseMatrix(transform);\n          }\n\n          function elementScale(element) {\n            if (!element) {\n              return Matrix.unit();\n            }\n\n            var matrix = transformMatrix(element);\n            var parent = element.parentElement;\n\n            while (parent) {\n              var parentMatrix = transformMatrix(parent);\n              matrix = matrix.multiplyCopy(parentMatrix);\n              parent = parent.parentElement;\n            }\n\n            matrix.b = matrix.c = matrix.e = matrix.f = 0;\n            return matrix;\n          }\n\n          var util = {\n            append: append$1$1,\n            arabicToRoman: arabicToRoman,\n            createPromise: createPromise,\n            defined: defined,\n            definitionId: definitionId,\n            deg: deg,\n            encodeBase64: encodeBase64,\n            eventCoordinates: eventCoordinates,\n            eventElement: eventElement,\n            isTransparent: isTransparent,\n            last: last,\n            limitValue: limitValue,\n            mergeSort: mergeSort,\n            now: now,\n            promiseAll: promiseAll,\n            rad: rad,\n            round: round,\n            valueOrDefault: valueOrDefault,\n            bindEvents: bindEvents,\n            elementOffset: elementOffset,\n            elementSize: elementSize,\n            elementStyles: elementStyles,\n            unbindEvents: unbindEvents,\n            elementPadding: elementPadding,\n            elementScale: elementScale,\n            DEG_TO_RAD: DEG_TO_RAD,\n            MAX_NUM: MAX_NUM,\n            MIN_NUM: MIN_NUM\n          };\n          var toString$1 = {}.toString;\n\n          var OptionsStore = function (HasObservers$$1) {\n            function OptionsStore(options, prefix) {\n              var this$1 = this;\n\n              if (prefix === void 0) {\n                prefix = \"\";\n              }\n\n              HasObservers$$1.call(this);\n              this.prefix = prefix;\n\n              for (var field in options) {\n                var member = options[field];\n                member = this$1._wrap(member, field);\n                this$1[field] = member;\n              }\n            }\n\n            extendStatic(OptionsStore, HasObservers$$1);\n            OptionsStore.prototype = Object.create(HasObservers$$1 && HasObservers$$1.prototype);\n            OptionsStore.prototype.constructor = OptionsStore;\n            OptionsStore.fn = OptionsStore.prototype;\n            OptionsStore.fn.init = OptionsStore.fn.constructor;\n\n            OptionsStore.prototype.get = function get(field) {\n              var parts = field.split(\".\");\n              var result = this;\n\n              while (parts.length && result) {\n                var part = parts.shift();\n                result = result[part];\n              }\n\n              return result;\n            };\n\n            OptionsStore.prototype.set = function set(field, value) {\n              var current = this.get(field);\n\n              if (current !== value) {\n                this._set(field, this._wrap(value, field));\n\n                this.optionsChange({\n                  field: this.prefix + field,\n                  value: value\n                });\n              }\n            };\n\n            OptionsStore.prototype._set = function _set(field, value) {\n              var this$1 = this;\n              var composite = field.indexOf(\".\") >= 0;\n              var parentObj = this;\n              var fieldName = field;\n\n              if (composite) {\n                var parts = fieldName.split(\".\");\n                var prefix = this.prefix;\n\n                while (parts.length > 1) {\n                  fieldName = parts.shift();\n                  prefix += fieldName + \".\";\n                  var obj = parentObj[fieldName];\n\n                  if (!obj) {\n                    obj = new OptionsStore({}, prefix);\n                    obj.addObserver(this$1);\n                    parentObj[fieldName] = obj;\n                  }\n\n                  parentObj = obj;\n                }\n\n                fieldName = parts[0];\n              }\n\n              parentObj._clear(fieldName);\n\n              parentObj[fieldName] = value;\n            };\n\n            OptionsStore.prototype._clear = function _clear(field) {\n              var current = this[field];\n\n              if (current && current.removeObserver) {\n                current.removeObserver(this);\n              }\n            };\n\n            OptionsStore.prototype._wrap = function _wrap(object, field) {\n              var type = toString$1.call(object);\n              var wrapped = object;\n\n              if (wrapped !== null && defined(wrapped) && type === \"[object Object]\") {\n                if (!(object instanceof OptionsStore) && !(object instanceof Class)) {\n                  wrapped = new OptionsStore(wrapped, this.prefix + field + \".\");\n                }\n\n                wrapped.addObserver(this);\n              }\n\n              return wrapped;\n            };\n\n            return OptionsStore;\n          }(HasObservers);\n\n          function setAccessor(field) {\n            return function (value) {\n              if (this[field] !== value) {\n                this[field] = value;\n                this.geometryChange();\n              }\n\n              return this;\n            };\n          }\n\n          function getAccessor(field) {\n            return function () {\n              return this[field];\n            };\n          }\n\n          function defineAccessors(fn, fields) {\n            for (var i = 0; i < fields.length; i++) {\n              var name = fields[i];\n              var capitalized = name.charAt(0).toUpperCase() + name.substring(1, name.length);\n              fn[\"set\" + capitalized] = setAccessor(name);\n              fn[\"get\" + capitalized] = getAccessor(name);\n            }\n          }\n\n          var withAccessors = function (TBase, names) {\n            var result = function (TBase) {\n              function result() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(result, TBase);\n              result.prototype = Object.create(TBase && TBase.prototype);\n              result.prototype.constructor = result;\n              result.fn = result.prototype;\n              result.fn.init = result.fn.constructor;\n              return result;\n            }(TBase);\n\n            defineAccessors(result.prototype, names);\n            return result;\n          };\n\n          function toMatrix(transformation) {\n            if (transformation && typeof transformation.matrix === \"function\") {\n              return transformation.matrix();\n            }\n\n            return transformation;\n          }\n\n          var Point = function (superclass) {\n            function Point(x, y) {\n              superclass.call(this);\n              this.x = x || 0;\n              this.y = y || 0;\n            }\n\n            extendStatic(Point, superclass);\n            Point.prototype = Object.create(superclass && superclass.prototype);\n            Point.prototype.constructor = Point;\n            Point.fn = Point.prototype;\n            Point.fn.init = Point.fn.constructor;\n            var staticAccessors = {\n              ZERO: {}\n            };\n\n            Point.prototype.equals = function equals(other) {\n              return other && other.x === this.x && other.y === this.y;\n            };\n\n            Point.prototype.clone = function clone() {\n              return new Point(this.x, this.y);\n            };\n\n            Point.prototype.rotate = function rotate(angle, origin) {\n              var originPoint = Point.create(origin) || Point.ZERO;\n              return this.transform(Matrix.rotate(angle, originPoint.x, originPoint.y));\n            };\n\n            Point.prototype.translate = function translate(x, y) {\n              this.x += x;\n              this.y += y;\n              this.geometryChange();\n              return this;\n            };\n\n            Point.prototype.translateWith = function translateWith(point) {\n              return this.translate(point.x, point.y);\n            };\n\n            Point.prototype.move = function move(x, y) {\n              this.x = this.y = 0;\n              return this.translate(x, y);\n            };\n\n            Point.prototype.scale = function scale(scaleX, scaleY) {\n              if (scaleY === void 0) {\n                scaleY = scaleX;\n              }\n\n              this.x *= scaleX;\n              this.y *= scaleY;\n              this.geometryChange();\n              return this;\n            };\n\n            Point.prototype.scaleCopy = function scaleCopy(scaleX, scaleY) {\n              return this.clone().scale(scaleX, scaleY);\n            };\n\n            Point.prototype.transform = function transform(transformation) {\n              var matrix = toMatrix(transformation);\n              var ref = this;\n              var x = ref.x;\n              var y = ref.y;\n              this.x = matrix.a * x + matrix.c * y + matrix.e;\n              this.y = matrix.b * x + matrix.d * y + matrix.f;\n              this.geometryChange();\n              return this;\n            };\n\n            Point.prototype.transformCopy = function transformCopy(transformation) {\n              var point = this.clone();\n\n              if (transformation) {\n                point.transform(transformation);\n              }\n\n              return point;\n            };\n\n            Point.prototype.distanceTo = function distanceTo(point) {\n              var dx = this.x - point.x;\n              var dy = this.y - point.y;\n              return Math.sqrt(dx * dx + dy * dy);\n            };\n\n            Point.prototype.round = function round$1(digits) {\n              this.x = round(this.x, digits);\n              this.y = round(this.y, digits);\n              this.geometryChange();\n              return this;\n            };\n\n            Point.prototype.toArray = function toArray(digits) {\n              var doRound = defined(digits);\n              var x = doRound ? round(this.x, digits) : this.x;\n              var y = doRound ? round(this.y, digits) : this.y;\n              return [x, y];\n            };\n\n            Point.prototype.toString = function toString(digits, separator) {\n              if (separator === void 0) {\n                separator = \" \";\n              }\n\n              var ref = this;\n              var x = ref.x;\n              var y = ref.y;\n\n              if (defined(digits)) {\n                x = round(x, digits);\n                y = round(y, digits);\n              }\n\n              return x + separator + y;\n            };\n\n            Point.create = function create(arg0, arg1) {\n              if (defined(arg0)) {\n                if (arg0 instanceof Point) {\n                  return arg0;\n                } else if (arguments.length === 1 && arg0.length === 2) {\n                  return new Point(arg0[0], arg0[1]);\n                }\n\n                return new Point(arg0, arg1);\n              }\n            };\n\n            Point.min = function min() {\n              var arguments$1 = arguments;\n              var minX = MAX_NUM;\n              var minY = MAX_NUM;\n\n              for (var i = 0; i < arguments.length; i++) {\n                var point = arguments$1[i];\n                minX = Math.min(point.x, minX);\n                minY = Math.min(point.y, minY);\n              }\n\n              return new Point(minX, minY);\n            };\n\n            Point.max = function max() {\n              var arguments$1 = arguments;\n              var maxX = MIN_NUM;\n              var maxY = MIN_NUM;\n\n              for (var i = 0; i < arguments.length; i++) {\n                var point = arguments$1[i];\n                maxX = Math.max(point.x, maxX);\n                maxY = Math.max(point.y, maxY);\n              }\n\n              return new Point(maxX, maxY);\n            };\n\n            Point.minPoint = function minPoint() {\n              return new Point(MIN_NUM, MIN_NUM);\n            };\n\n            Point.maxPoint = function maxPoint() {\n              return new Point(MAX_NUM, MAX_NUM);\n            };\n\n            staticAccessors.ZERO.get = function () {\n              return new Point(0, 0);\n            };\n\n            Object.defineProperties(Point, staticAccessors);\n            return Point;\n          }(withAccessors(HasObservers, [\"x\", \"y\"]));\n\n          var Size = function (superclass) {\n            function Size(width, height) {\n              superclass.call(this);\n              this.width = width || 0;\n              this.height = height || 0;\n            }\n\n            extendStatic(Size, superclass);\n            Size.prototype = Object.create(superclass && superclass.prototype);\n            Size.prototype.constructor = Size;\n            Size.fn = Size.prototype;\n            Size.fn.init = Size.fn.constructor;\n            var staticAccessors = {\n              ZERO: {}\n            };\n\n            Size.prototype.equals = function equals(other) {\n              return other && other.width === this.width && other.height === this.height;\n            };\n\n            Size.prototype.clone = function clone() {\n              return new Size(this.width, this.height);\n            };\n\n            Size.prototype.toArray = function toArray(digits) {\n              var doRound = defined(digits);\n              var width = doRound ? round(this.width, digits) : this.width;\n              var height = doRound ? round(this.height, digits) : this.height;\n              return [width, height];\n            };\n\n            Size.create = function create(arg0, arg1) {\n              if (defined(arg0)) {\n                if (arg0 instanceof Size) {\n                  return arg0;\n                } else if (arguments.length === 1 && arg0.length === 2) {\n                  return new Size(arg0[0], arg0[1]);\n                }\n\n                return new Size(arg0, arg1);\n              }\n            };\n\n            staticAccessors.ZERO.get = function () {\n              return new Size(0, 0);\n            };\n\n            Object.defineProperties(Size, staticAccessors);\n            return Size;\n          }(withAccessors(HasObservers, [\"width\", \"height\"]));\n\n          var Rect = function (HasObservers$$1) {\n            function Rect(origin, size, cornerRadius) {\n              if (origin === void 0) {\n                origin = new Point();\n              }\n\n              if (size === void 0) {\n                size = new Size();\n              }\n\n              if (cornerRadius === void 0) {\n                cornerRadius = 0;\n              }\n\n              HasObservers$$1.call(this);\n              this.setOrigin(origin);\n              this.setSize(size);\n              this.setCornerRadius(cornerRadius);\n            }\n\n            extendStatic(Rect, HasObservers$$1);\n            Rect.prototype = Object.create(HasObservers$$1 && HasObservers$$1.prototype);\n            Rect.prototype.constructor = Rect;\n            Rect.fn = Rect.prototype;\n            Rect.fn.init = Rect.fn.constructor;\n\n            Rect.prototype.clone = function clone() {\n              return new Rect(this.origin.clone(), this.size.clone());\n            };\n\n            Rect.prototype.equals = function equals(other) {\n              return other && other.origin.equals(this.origin) && other.size.equals(this.size);\n            };\n\n            Rect.prototype.setOrigin = function setOrigin(value) {\n              this._observerField(\"origin\", Point.create(value));\n\n              this.geometryChange();\n              return this;\n            };\n\n            Rect.prototype.getOrigin = function getOrigin() {\n              return this.origin;\n            };\n\n            Rect.prototype.setCornerRadius = function setCornerRadius(radius) {\n              this.cornerRadius = Array.isArray(radius) ? radius : [radius, radius];\n              this.geometryChange();\n              return this;\n            };\n\n            Rect.prototype.getCornerRadius = function getCornerRadius() {\n              return this.cornerRadius;\n            };\n\n            Rect.prototype.setSize = function setSize(value) {\n              this._observerField(\"size\", Size.create(value));\n\n              this.geometryChange();\n              return this;\n            };\n\n            Rect.prototype.getSize = function getSize() {\n              return this.size;\n            };\n\n            Rect.prototype.width = function width() {\n              return this.size.width;\n            };\n\n            Rect.prototype.height = function height() {\n              return this.size.height;\n            };\n\n            Rect.prototype.topLeft = function topLeft() {\n              return this.origin.clone();\n            };\n\n            Rect.prototype.bottomRight = function bottomRight() {\n              return this.origin.clone().translate(this.width(), this.height());\n            };\n\n            Rect.prototype.topRight = function topRight() {\n              return this.origin.clone().translate(this.width(), 0);\n            };\n\n            Rect.prototype.bottomLeft = function bottomLeft() {\n              return this.origin.clone().translate(0, this.height());\n            };\n\n            Rect.prototype.center = function center() {\n              return this.origin.clone().translate(this.width() / 2, this.height() / 2);\n            };\n\n            Rect.prototype.bbox = function bbox(matrix) {\n              var tl = this.topLeft().transformCopy(matrix);\n              var tr = this.topRight().transformCopy(matrix);\n              var br = this.bottomRight().transformCopy(matrix);\n              var bl = this.bottomLeft().transformCopy(matrix);\n              return Rect.fromPoints(tl, tr, br, bl);\n            };\n\n            Rect.prototype.transformCopy = function transformCopy(m) {\n              return Rect.fromPoints(this.topLeft().transform(m), this.bottomRight().transform(m));\n            };\n\n            Rect.prototype.expand = function expand(x, y) {\n              if (y === void 0) {\n                y = x;\n              }\n\n              this.size.width += 2 * x;\n              this.size.height += 2 * y;\n              this.origin.translate(-x, -y);\n              return this;\n            };\n\n            Rect.prototype.expandCopy = function expandCopy(x, y) {\n              return this.clone().expand(x, y);\n            };\n\n            Rect.prototype.containsPoint = function containsPoint(point) {\n              var origin = this.origin;\n              var bottomRight = this.bottomRight();\n              return !(point.x < origin.x || point.y < origin.y || bottomRight.x < point.x || bottomRight.y < point.y);\n            };\n\n            Rect.prototype._isOnPath = function _isOnPath(point, width) {\n              var rectOuter = this.expandCopy(width, width);\n              var rectInner = this.expandCopy(-width, -width);\n              return rectOuter.containsPoint(point) && !rectInner.containsPoint(point);\n            };\n\n            Rect.fromPoints = function fromPoints() {\n              var topLeft = Point.min.apply(null, arguments);\n              var bottomRight = Point.max.apply(null, arguments);\n              var size = new Size(bottomRight.x - topLeft.x, bottomRight.y - topLeft.y);\n              return new Rect(topLeft, size);\n            };\n\n            Rect.union = function union(a, b) {\n              return Rect.fromPoints(Point.min(a.topLeft(), b.topLeft()), Point.max(a.bottomRight(), b.bottomRight()));\n            };\n\n            Rect.intersect = function intersect(a, b) {\n              var rect1 = {\n                left: a.topLeft().x,\n                top: a.topLeft().y,\n                right: a.bottomRight().x,\n                bottom: a.bottomRight().y\n              };\n              var rect2 = {\n                left: b.topLeft().x,\n                top: b.topLeft().y,\n                right: b.bottomRight().x,\n                bottom: b.bottomRight().y\n              };\n\n              if (rect1.left <= rect2.right && rect2.left <= rect1.right && rect1.top <= rect2.bottom && rect2.top <= rect1.bottom) {\n                return Rect.fromPoints(new Point(Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)), new Point(Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom)));\n              }\n            };\n\n            return Rect;\n          }(HasObservers);\n\n          var Transformation = function (HasObservers$$1) {\n            function Transformation(matrix) {\n              if (matrix === void 0) {\n                matrix = Matrix.unit();\n              }\n\n              HasObservers$$1.call(this);\n              this._matrix = matrix;\n            }\n\n            extendStatic(Transformation, HasObservers$$1);\n            Transformation.prototype = Object.create(HasObservers$$1 && HasObservers$$1.prototype);\n            Transformation.prototype.constructor = Transformation;\n            Transformation.fn = Transformation.prototype;\n            Transformation.fn.init = Transformation.fn.constructor;\n\n            Transformation.prototype.clone = function clone() {\n              return new Transformation(this._matrix.clone());\n            };\n\n            Transformation.prototype.equals = function equals(other) {\n              return other && other._matrix.equals(this._matrix);\n            };\n\n            Transformation.prototype.translate = function translate(x, y) {\n              this._matrix = this._matrix.multiplyCopy(Matrix.translate(x, y));\n\n              this._optionsChange();\n\n              return this;\n            };\n\n            Transformation.prototype.scale = function scale(scaleX, scaleY, origin) {\n              if (scaleY === void 0) {\n                scaleY = scaleX;\n              }\n\n              if (origin === void 0) {\n                origin = null;\n              }\n\n              var originPoint = origin;\n\n              if (originPoint) {\n                originPoint = Point.create(originPoint);\n                this._matrix = this._matrix.multiplyCopy(Matrix.translate(originPoint.x, originPoint.y));\n              }\n\n              this._matrix = this._matrix.multiplyCopy(Matrix.scale(scaleX, scaleY));\n\n              if (originPoint) {\n                this._matrix = this._matrix.multiplyCopy(Matrix.translate(-originPoint.x, -originPoint.y));\n              }\n\n              this._optionsChange();\n\n              return this;\n            };\n\n            Transformation.prototype.rotate = function rotate(angle, origin) {\n              var originPoint = Point.create(origin) || Point.ZERO;\n              this._matrix = this._matrix.multiplyCopy(Matrix.rotate(angle, originPoint.x, originPoint.y));\n\n              this._optionsChange();\n\n              return this;\n            };\n\n            Transformation.prototype.multiply = function multiply(transformation) {\n              var matrix = toMatrix(transformation);\n              this._matrix = this._matrix.multiplyCopy(matrix);\n\n              this._optionsChange();\n\n              return this;\n            };\n\n            Transformation.prototype.matrix = function matrix(value) {\n              if (value) {\n                this._matrix = value;\n\n                this._optionsChange();\n\n                return this;\n              }\n\n              return this._matrix;\n            };\n\n            Transformation.prototype._optionsChange = function _optionsChange() {\n              this.optionsChange({\n                field: \"transform\",\n                value: this\n              });\n            };\n\n            return Transformation;\n          }(HasObservers);\n\n          function transform$1(matrix) {\n            if (matrix === null) {\n              return null;\n            }\n\n            if (matrix instanceof Transformation) {\n              return matrix;\n            }\n\n            return new Transformation(matrix);\n          }\n\n          var Element$1 = function (HasObservers$$1) {\n            function Element(options) {\n              HasObservers$$1.call(this);\n\n              this._initOptions(options);\n            }\n\n            extendStatic(Element, HasObservers$$1);\n            Element.prototype = Object.create(HasObservers$$1 && HasObservers$$1.prototype);\n            Element.prototype.constructor = Element;\n            Element.fn = Element.prototype;\n            Element.fn.init = Element.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Rect\";\n            };\n\n            Element.prototype._initOptions = function _initOptions(options) {\n              if (options === void 0) {\n                options = {};\n              }\n\n              var clip = options.clip;\n              var transform = options.transform;\n\n              if (transform) {\n                options.transform = transform$1(transform);\n              }\n\n              if (clip && !clip.id) {\n                clip.id = definitionId();\n              }\n\n              this.options = new OptionsStore(options);\n              this.options.addObserver(this);\n            };\n\n            Element.prototype.transform = function transform(value) {\n              if (defined(value)) {\n                this.options.set(\"transform\", transform$1(value));\n              } else {\n                return this.options.get(\"transform\");\n              }\n            };\n\n            Element.prototype.parentTransform = function parentTransform() {\n              var element = this;\n              var parentMatrix;\n\n              while (element.parent) {\n                element = element.parent;\n                var transformation = element.transform();\n\n                if (transformation) {\n                  parentMatrix = transformation.matrix().multiplyCopy(parentMatrix || Matrix.unit());\n                }\n              }\n\n              if (parentMatrix) {\n                return transform$1(parentMatrix);\n              }\n            };\n\n            Element.prototype.currentTransform = function currentTransform(parentTransform) {\n              if (parentTransform === void 0) {\n                parentTransform = this.parentTransform();\n              }\n\n              var elementTransform = this.transform();\n              var elementMatrix = toMatrix(elementTransform);\n              var parentMatrix = toMatrix(parentTransform);\n              var combinedMatrix;\n\n              if (elementMatrix && parentMatrix) {\n                combinedMatrix = parentMatrix.multiplyCopy(elementMatrix);\n              } else {\n                combinedMatrix = elementMatrix || parentMatrix;\n              }\n\n              if (combinedMatrix) {\n                return transform$1(combinedMatrix);\n              }\n            };\n\n            Element.prototype.visible = function visible(value) {\n              if (defined(value)) {\n                this.options.set(\"visible\", value);\n                return this;\n              }\n\n              return this.options.get(\"visible\") !== false;\n            };\n\n            Element.prototype.clip = function clip(value) {\n              var options = this.options;\n\n              if (defined(value)) {\n                if (value && !value.id) {\n                  value.id = definitionId();\n                }\n\n                options.set(\"clip\", value);\n                return this;\n              }\n\n              return options.get(\"clip\");\n            };\n\n            Element.prototype.opacity = function opacity(value) {\n              if (defined(value)) {\n                this.options.set(\"opacity\", value);\n                return this;\n              }\n\n              return valueOrDefault(this.options.get(\"opacity\"), 1);\n            };\n\n            Element.prototype.clippedBBox = function clippedBBox(transformation) {\n              var bbox = this._clippedBBox(transformation);\n\n              if (bbox) {\n                var clip = this.clip();\n                return clip ? Rect.intersect(bbox, clip.bbox(transformation)) : bbox;\n              }\n            };\n\n            Element.prototype.containsPoint = function containsPoint(point, parentTransform) {\n              if (this.visible()) {\n                var transform = this.currentTransform(parentTransform);\n                var transformedPoint = point;\n\n                if (transform) {\n                  transformedPoint = point.transformCopy(transform.matrix().invert());\n                }\n\n                return this._hasFill() && this._containsPoint(transformedPoint) || this._isOnPath && this._hasStroke() && this._isOnPath(transformedPoint);\n              }\n\n              return false;\n            };\n\n            Element.prototype._hasFill = function _hasFill() {\n              var fill = this.options.fill;\n              return fill && !isTransparent(fill.color);\n            };\n\n            Element.prototype._hasStroke = function _hasStroke() {\n              var stroke = this.options.stroke;\n              return stroke && stroke.width > 0 && !isTransparent(stroke.color);\n            };\n\n            Element.prototype._clippedBBox = function _clippedBBox(transformation) {\n              return this.bbox(transformation);\n            };\n\n            Object.defineProperties(Element.prototype, prototypeAccessors);\n            return Element;\n          }(HasObservers);\n\n          function ellipseExtremeAngles(center, rx, ry, matrix) {\n            var extremeX = 0;\n            var extremeY = 0;\n\n            if (matrix) {\n              extremeX = Math.atan2(matrix.c * ry, matrix.a * rx);\n\n              if (matrix.b !== 0) {\n                extremeY = Math.atan2(matrix.d * ry, matrix.b * rx);\n              }\n            }\n\n            return {\n              x: extremeX,\n              y: extremeY\n            };\n          }\n\n          var PI_DIV_2 = Math.PI / 2;\n\n          var Circle$2 = function (superclass) {\n            function Circle(center, radius) {\n              if (center === void 0) {\n                center = new Point();\n              }\n\n              if (radius === void 0) {\n                radius = 0;\n              }\n\n              superclass.call(this);\n              this.setCenter(center);\n              this.setRadius(radius);\n            }\n\n            extendStatic(Circle, superclass);\n            Circle.prototype = Object.create(superclass && superclass.prototype);\n            Circle.prototype.constructor = Circle;\n            Circle.fn = Circle.prototype;\n            Circle.fn.init = Circle.fn.constructor;\n\n            Circle.prototype.setCenter = function setCenter(value) {\n              this._observerField(\"center\", Point.create(value));\n\n              this.geometryChange();\n              return this;\n            };\n\n            Circle.prototype.getCenter = function getCenter() {\n              return this.center;\n            };\n\n            Circle.prototype.equals = function equals(other) {\n              return other && other.center.equals(this.center) && other.radius === this.radius;\n            };\n\n            Circle.prototype.clone = function clone() {\n              return new Circle(this.center.clone(), this.radius);\n            };\n\n            Circle.prototype.pointAt = function pointAt(angle) {\n              return this._pointAt(rad(angle));\n            };\n\n            Circle.prototype.bbox = function bbox(matrix) {\n              var this$1 = this;\n              var extremeAngles = ellipseExtremeAngles(this.center, this.radius, this.radius, matrix);\n              var minPoint = Point.maxPoint();\n              var maxPoint = Point.minPoint();\n\n              for (var i = 0; i < 4; i++) {\n                var currentPointX = this$1._pointAt(extremeAngles.x + i * PI_DIV_2).transformCopy(matrix);\n\n                var currentPointY = this$1._pointAt(extremeAngles.y + i * PI_DIV_2).transformCopy(matrix);\n\n                var currentPoint = new Point(currentPointX.x, currentPointY.y);\n                minPoint = Point.min(minPoint, currentPoint);\n                maxPoint = Point.max(maxPoint, currentPoint);\n              }\n\n              return Rect.fromPoints(minPoint, maxPoint);\n            };\n\n            Circle.prototype._pointAt = function _pointAt(angle) {\n              var ref = this;\n              var center = ref.center;\n              var radius = ref.radius;\n              return new Point(center.x + radius * Math.cos(angle), center.y + radius * Math.sin(angle));\n            };\n\n            Circle.prototype.containsPoint = function containsPoint(point) {\n              var ref = this;\n              var center = ref.center;\n              var radius = ref.radius;\n              var inCircle = Math.pow(point.x - center.x, 2) + Math.pow(point.y - center.y, 2) <= Math.pow(radius, 2);\n              return inCircle;\n            };\n\n            Circle.prototype._isOnPath = function _isOnPath(point, width) {\n              var ref = this;\n              var center = ref.center;\n              var radius = ref.radius;\n              var pointDistance = center.distanceTo(point);\n              return radius - width <= pointDistance && pointDistance <= radius + width;\n            };\n\n            return Circle;\n          }(withAccessors(HasObservers, [\"radius\"]));\n\n          var GRADIENT = \"Gradient\";\n\n          var paintable = function (TBase) {\n            return function (TBase) {\n              function anonymous() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(anonymous, TBase);\n              anonymous.prototype = Object.create(TBase && TBase.prototype);\n              anonymous.prototype.constructor = anonymous;\n              anonymous.fn = anonymous.prototype;\n              anonymous.fn.init = anonymous.fn.constructor;\n\n              anonymous.prototype.fill = function fill(color, opacity) {\n                var options = this.options;\n\n                if (defined(color)) {\n                  if (color && color.nodeType !== GRADIENT) {\n                    var newFill = {\n                      color: color\n                    };\n\n                    if (defined(opacity)) {\n                      newFill.opacity = opacity;\n                    }\n\n                    options.set(\"fill\", newFill);\n                  } else {\n                    options.set(\"fill\", color);\n                  }\n\n                  return this;\n                }\n\n                return options.get(\"fill\");\n              };\n\n              anonymous.prototype.stroke = function stroke(color, width, opacity) {\n                if (defined(color)) {\n                  this.options.set(\"stroke.color\", color);\n\n                  if (defined(width)) {\n                    this.options.set(\"stroke.width\", width);\n                  }\n\n                  if (defined(opacity)) {\n                    this.options.set(\"stroke.opacity\", opacity);\n                  }\n\n                  return this;\n                }\n\n                return this.options.get(\"stroke\");\n              };\n\n              return anonymous;\n            }(TBase);\n          };\n\n          var IDENTITY_MATRIX_HASH = Matrix.IDENTITY.toString();\n\n          var measurable = function (TBase) {\n            return function (TBase) {\n              function anonymous() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(anonymous, TBase);\n              anonymous.prototype = Object.create(TBase && TBase.prototype);\n              anonymous.prototype.constructor = anonymous;\n              anonymous.fn = anonymous.prototype;\n              anonymous.fn.init = anonymous.fn.constructor;\n\n              anonymous.prototype.bbox = function bbox(transformation) {\n                var combinedMatrix = toMatrix(this.currentTransform(transformation));\n                var matrixHash = combinedMatrix ? combinedMatrix.toString() : IDENTITY_MATRIX_HASH;\n                var bbox;\n\n                if (this._bboxCache && this._matrixHash === matrixHash) {\n                  bbox = this._bboxCache.clone();\n                } else {\n                  bbox = this._bbox(combinedMatrix);\n                  this._bboxCache = bbox ? bbox.clone() : null;\n                  this._matrixHash = matrixHash;\n                }\n\n                var strokeWidth = this.options.get(\"stroke.width\");\n\n                if (strokeWidth && bbox) {\n                  bbox.expand(strokeWidth / 2);\n                }\n\n                return bbox;\n              };\n\n              anonymous.prototype.geometryChange = function geometryChange() {\n                delete this._bboxCache;\n                this.trigger(\"geometryChange\", {\n                  element: this\n                });\n              };\n\n              return anonymous;\n            }(TBase);\n          };\n\n          function geometryAccessor(name) {\n            var fieldName = \"_\" + name;\n            return function (value) {\n              if (defined(value)) {\n                this._observerField(fieldName, value);\n\n                this.geometryChange();\n                return this;\n              }\n\n              return this[fieldName];\n            };\n          }\n\n          function defineGeometryAccessors(fn, names) {\n            for (var i = 0; i < names.length; i++) {\n              fn[names[i]] = geometryAccessor(names[i]);\n            }\n          }\n\n          var withGeometry = function (TBase, names) {\n            if (names === void 0) {\n              names = [\"geometry\"];\n            }\n\n            var result = function (TBase) {\n              function result() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(result, TBase);\n              result.prototype = Object.create(TBase && TBase.prototype);\n              result.prototype.constructor = result;\n              result.fn = result.prototype;\n              result.fn.init = result.fn.constructor;\n              return result;\n            }(TBase);\n\n            defineGeometryAccessors(result.prototype, names);\n            return result;\n          };\n\n          var DEFAULT_STROKE = \"#000\";\n\n          var Circle = function (superclass) {\n            function Circle(geometry, options) {\n              if (geometry === void 0) {\n                geometry = new Circle$2();\n              }\n\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.geometry(geometry);\n\n              if (!defined(this.options.stroke)) {\n                this.stroke(DEFAULT_STROKE);\n              }\n            }\n\n            extendStatic(Circle, superclass);\n            Circle.prototype = Object.create(superclass && superclass.prototype);\n            Circle.prototype.constructor = Circle;\n            Circle.fn = Circle.prototype;\n            Circle.fn.init = Circle.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Circle\";\n            };\n\n            Circle.prototype.rawBBox = function rawBBox() {\n              return this._geometry.bbox();\n            };\n\n            Circle.prototype._bbox = function _bbox(matrix) {\n              return this._geometry.bbox(matrix);\n            };\n\n            Circle.prototype._containsPoint = function _containsPoint(point) {\n              return this.geometry().containsPoint(point);\n            };\n\n            Circle.prototype._isOnPath = function _isOnPath(point) {\n              return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n            };\n\n            Object.defineProperties(Circle.prototype, prototypeAccessors);\n            return Circle;\n          }(paintable(measurable(withGeometry(Element$1))));\n\n          var PRECISION = 10;\n\n          function close$1(a, b, tolerance) {\n            if (tolerance === void 0) {\n              tolerance = PRECISION;\n            }\n\n            return round(Math.abs(a - b), tolerance) === 0;\n          }\n\n          function closeOrLess(a, b, tolerance) {\n            return a < b || close$1(a, b, tolerance);\n          }\n\n          function lineIntersection(p0, p1, p2, p3) {\n            var s1x = p1.x - p0.x;\n            var s2x = p3.x - p2.x;\n            var s1y = p1.y - p0.y;\n            var s2y = p3.y - p2.y;\n            var nx = p0.x - p2.x;\n            var ny = p0.y - p2.y;\n            var d = s1x * s2y - s2x * s1y;\n            var s = (s1x * ny - s1y * nx) / d;\n            var t = (s2x * ny - s2y * nx) / d;\n\n            if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n              return new Point(p0.x + t * s1x, p0.y + t * s1y);\n            }\n          }\n\n          var MAX_INTERVAL = 45;\n          var pow$1 = Math.pow;\n          var accessors = [\"radiusX\", \"radiusY\", \"startAngle\", \"endAngle\", \"anticlockwise\"];\n\n          var Arc$2 = function (superclass) {\n            function Arc(center, options) {\n              if (center === void 0) {\n                center = new Point();\n              }\n\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this);\n              this.setCenter(center);\n              this.radiusX = options.radiusX;\n              this.radiusY = options.radiusY || options.radiusX;\n              this.startAngle = options.startAngle;\n              this.endAngle = options.endAngle;\n              this.anticlockwise = options.anticlockwise || false;\n              this.xRotation = options.xRotation;\n            }\n\n            extendStatic(Arc, superclass);\n            Arc.prototype = Object.create(superclass && superclass.prototype);\n            Arc.prototype.constructor = Arc;\n            Arc.fn = Arc.prototype;\n            Arc.fn.init = Arc.fn.constructor;\n\n            Arc.prototype.clone = function clone() {\n              return new Arc(this.center, {\n                radiusX: this.radiusX,\n                radiusY: this.radiusY,\n                startAngle: this.startAngle,\n                endAngle: this.endAngle,\n                anticlockwise: this.anticlockwise\n              });\n            };\n\n            Arc.prototype.setCenter = function setCenter(value) {\n              this._observerField(\"center\", Point.create(value));\n\n              this.geometryChange();\n              return this;\n            };\n\n            Arc.prototype.getCenter = function getCenter() {\n              return this.center;\n            };\n\n            Arc.prototype.pointAt = function pointAt(angle) {\n              var center = this.center;\n              var radian = rad(angle);\n              return new Point(center.x + this.radiusX * Math.cos(radian), center.y + this.radiusY * Math.sin(radian));\n            };\n\n            Arc.prototype.curvePoints = function curvePoints() {\n              var this$1 = this;\n              var startAngle = this.startAngle;\n              var dir = this.anticlockwise ? -1 : 1;\n              var curvePoints = [this.pointAt(startAngle)];\n\n              var interval = this._arcInterval();\n\n              var intervalAngle = interval.endAngle - interval.startAngle;\n              var subIntervalsCount = Math.ceil(intervalAngle / MAX_INTERVAL);\n              var subIntervalAngle = intervalAngle / subIntervalsCount;\n              var currentAngle = startAngle;\n              var transformation;\n\n              if (this.xRotation) {\n                transformation = transform$1().rotate(this.xRotation, this.center);\n              }\n\n              for (var i = 1; i <= subIntervalsCount; i++) {\n                var nextAngle = currentAngle + dir * subIntervalAngle;\n\n                var points = this$1._intervalCurvePoints(currentAngle, nextAngle, transformation);\n\n                curvePoints.push(points.cp1, points.cp2, points.p2);\n                currentAngle = nextAngle;\n              }\n\n              return curvePoints;\n            };\n\n            Arc.prototype.bbox = function bbox(matrix) {\n              var this$1 = this;\n\n              var interval = this._arcInterval();\n\n              var startAngle = interval.startAngle;\n              var endAngle = interval.endAngle;\n              var extremeAngles = ellipseExtremeAngles(this.center, this.radiusX, this.radiusY, matrix);\n              var extremeX = deg(extremeAngles.x);\n              var extremeY = deg(extremeAngles.y);\n              var endPoint = this.pointAt(endAngle).transformCopy(matrix);\n              var currentAngleX = bboxStartAngle(extremeX, startAngle);\n              var currentAngleY = bboxStartAngle(extremeY, startAngle);\n              var currentPoint = this.pointAt(startAngle).transformCopy(matrix);\n              var minPoint = Point.min(currentPoint, endPoint);\n              var maxPoint = Point.max(currentPoint, endPoint);\n\n              while (currentAngleX < endAngle || currentAngleY < endAngle) {\n                var currentPointX = void 0;\n\n                if (currentAngleX < endAngle) {\n                  currentPointX = this$1.pointAt(currentAngleX).transformCopy(matrix);\n                  currentAngleX += 90;\n                }\n\n                var currentPointY = void 0;\n\n                if (currentAngleY < endAngle) {\n                  currentPointY = this$1.pointAt(currentAngleY).transformCopy(matrix);\n                  currentAngleY += 90;\n                }\n\n                currentPoint = new Point(currentPointX.x, currentPointY.y);\n                minPoint = Point.min(minPoint, currentPoint);\n                maxPoint = Point.max(maxPoint, currentPoint);\n              }\n\n              return Rect.fromPoints(minPoint, maxPoint);\n            };\n\n            Arc.prototype._arcInterval = function _arcInterval() {\n              var ref = this;\n              var startAngle = ref.startAngle;\n              var endAngle = ref.endAngle;\n              var anticlockwise = ref.anticlockwise;\n\n              if (anticlockwise) {\n                var oldStart = startAngle;\n                startAngle = endAngle;\n                endAngle = oldStart;\n              }\n\n              if (startAngle > endAngle || anticlockwise && startAngle === endAngle) {\n                endAngle += 360;\n              }\n\n              return {\n                startAngle: startAngle,\n                endAngle: endAngle\n              };\n            };\n\n            Arc.prototype._intervalCurvePoints = function _intervalCurvePoints(startAngle, endAngle, transformation) {\n              var p1 = this.pointAt(startAngle);\n              var p2 = this.pointAt(endAngle);\n\n              var p1Derivative = this._derivativeAt(startAngle);\n\n              var p2Derivative = this._derivativeAt(endAngle);\n\n              var t = (rad(endAngle) - rad(startAngle)) / 3;\n              var cp1 = new Point(p1.x + t * p1Derivative.x, p1.y + t * p1Derivative.y);\n              var cp2 = new Point(p2.x - t * p2Derivative.x, p2.y - t * p2Derivative.y);\n\n              if (transformation) {\n                p1.transform(transformation);\n                p2.transform(transformation);\n                cp1.transform(transformation);\n                cp2.transform(transformation);\n              }\n\n              return {\n                p1: p1,\n                cp1: cp1,\n                cp2: cp2,\n                p2: p2\n              };\n            };\n\n            Arc.prototype._derivativeAt = function _derivativeAt(angle) {\n              var radian = rad(angle);\n              return new Point(-this.radiusX * Math.sin(radian), this.radiusY * Math.cos(radian));\n            };\n\n            Arc.prototype.containsPoint = function containsPoint(point) {\n              var interval = this._arcInterval();\n\n              var intervalAngle = interval.endAngle - interval.startAngle;\n              var ref = this;\n              var center = ref.center;\n              var radiusX = ref.radiusX;\n              var radiusY = ref.radiusY;\n              var distance = center.distanceTo(point);\n              var angleRad = Math.atan2(point.y - center.y, point.x - center.x);\n              var pointRadius = radiusX * radiusY / Math.sqrt(pow$1(radiusX, 2) * pow$1(Math.sin(angleRad), 2) + pow$1(radiusY, 2) * pow$1(Math.cos(angleRad), 2));\n              var startPoint = this.pointAt(this.startAngle).round(PRECISION);\n              var endPoint = this.pointAt(this.endAngle).round(PRECISION);\n              var intersection = lineIntersection(center, point.round(PRECISION), startPoint, endPoint);\n              var containsPoint;\n\n              if (intervalAngle < 180) {\n                containsPoint = intersection && closeOrLess(center.distanceTo(intersection), distance) && closeOrLess(distance, pointRadius);\n              } else {\n                var angle = calculateAngle(center.x, center.y, radiusX, radiusY, point.x, point.y);\n\n                if (angle !== 360) {\n                  angle = (360 + angle) % 360;\n                }\n\n                var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n                containsPoint = inAngleRange && closeOrLess(distance, pointRadius) || !inAngleRange && (!intersection || intersection.equals(point));\n              }\n\n              return containsPoint;\n            };\n\n            Arc.prototype._isOnPath = function _isOnPath(point, width) {\n              var interval = this._arcInterval();\n\n              var center = this.center;\n              var angle = calculateAngle(center.x, center.y, this.radiusX, this.radiusY, point.x, point.y);\n\n              if (angle !== 360) {\n                angle = (360 + angle) % 360;\n              }\n\n              var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n              return inAngleRange && this.pointAt(angle).distanceTo(point) <= width;\n            };\n\n            Arc.fromPoints = function fromPoints(start, end, rx, ry, largeArc, swipe, rotation) {\n              // eslint-disable-line max-params\n              var arcParameters = normalizeArcParameters({\n                x1: start.x,\n                y1: start.y,\n                x2: end.x,\n                y2: end.y,\n                rx: rx,\n                ry: ry,\n                largeArc: largeArc,\n                swipe: swipe,\n                rotation: rotation\n              });\n              return new Arc(arcParameters.center, {\n                startAngle: arcParameters.startAngle,\n                endAngle: arcParameters.endAngle,\n                radiusX: arcParameters.radiusX,\n                radiusY: arcParameters.radiusY,\n                xRotation: arcParameters.xRotation,\n                anticlockwise: swipe === 0\n              });\n            };\n\n            return Arc;\n          }(withAccessors(HasObservers, accessors));\n\n          function calculateAngle(cx, cy, rx, ry, x, y) {\n            var cos = round((x - cx) / rx, 3);\n            var sin = round((y - cy) / ry, 3);\n            return round(deg(Math.atan2(sin, cos)));\n          }\n\n          function normalizeArcParameters(parameters) {\n            var x1 = parameters.x1;\n            var y1 = parameters.y1;\n            var x2 = parameters.x2;\n            var y2 = parameters.y2;\n            var rx = parameters.rx;\n            var ry = parameters.ry;\n            var largeArc = parameters.largeArc;\n            var swipe = parameters.swipe;\n            var rotation = parameters.rotation;\n\n            if (rotation === void 0) {\n              rotation = 0;\n            }\n\n            var radians = rad(rotation);\n            var cosine = Math.cos(radians);\n            var sine = Math.sin(radians);\n            var xT = cosine * (x1 - x2) / 2 + sine * (y1 - y2) / 2;\n            var yT = -sine * (x1 - x2) / 2 + cosine * (y1 - y2) / 2;\n            var sign = largeArc !== swipe ? 1 : -1;\n            var xt2 = Math.pow(xT, 2);\n            var yt2 = Math.pow(yT, 2);\n            var rx2 = Math.pow(rx, 2);\n            var ry2 = Math.pow(ry, 2);\n            var delta = xt2 / rx2 + yt2 / ry2;\n\n            if (delta > 1) {\n              delta = Math.sqrt(xt2 / rx2 + yt2 / ry2);\n              rx = delta * rx;\n              rx2 = Math.pow(rx, 2);\n              ry = delta * ry;\n              ry2 = Math.pow(ry, 2);\n            }\n\n            var constT = sign * Math.sqrt((rx2 * ry2 - rx2 * yt2 - ry2 * xt2) / (rx2 * yt2 + ry2 * xt2)); // due to rounding errors the value could become NaN even after radii correction\n\n            if (isNaN(constT)) {\n              constT = 0;\n            }\n\n            var cxT = constT * (rx * yT) / ry;\n            var cyT = -constT * (ry * xT) / rx;\n            var cx = cosine * cxT - sine * cyT + (x1 + x2) / 2;\n            var cy = sine * cxT + cosine * cyT + (y1 + y2) / 2;\n            var uX = (xT - cxT) / rx;\n            var uY = (yT - cyT) / ry;\n            var vX = -(xT + cxT) / rx;\n            var vY = -(yT + cyT) / ry;\n            var startAngle = (uY >= 0 ? 1 : -1) * deg(Math.acos(uX / Math.sqrt(uX * uX + uY * uY)));\n            var angleCosine = round((uX * vX + uY * vY) / (Math.sqrt(uX * uX + uY * uY) * Math.sqrt(vX * vX + vY * vY)), 10);\n            var angle = (uX * vY - uY * vX >= 0 ? 1 : -1) * deg(Math.acos(angleCosine));\n\n            if (!swipe && angle > 0) {\n              angle -= 360;\n            }\n\n            if (swipe && angle < 0) {\n              angle += 360;\n            }\n\n            var endAngle = startAngle + angle;\n            var signEndAngle = endAngle >= 0 ? 1 : -1;\n            endAngle = Math.abs(endAngle) % 360 * signEndAngle;\n            return {\n              center: new Point(cx, cy),\n              startAngle: startAngle,\n              endAngle: endAngle,\n              radiusX: rx,\n              radiusY: ry,\n              xRotation: rotation\n            };\n          }\n\n          function bboxStartAngle(angle, start) {\n            var startAngle = angle;\n\n            while (startAngle < start) {\n              startAngle += 90;\n            }\n\n            return startAngle;\n          }\n\n          var push = [].push;\n          var pop = [].pop;\n          var splice = [].splice;\n          var shift = [].shift;\n          var slice = [].slice;\n          var unshift = [].unshift;\n\n          var ElementsArray = function (HasObservers$$1) {\n            function ElementsArray(array) {\n              if (array === void 0) {\n                array = [];\n              }\n\n              HasObservers$$1.call(this);\n              this.length = 0;\n\n              this._splice(0, array.length, array);\n            }\n\n            extendStatic(ElementsArray, HasObservers$$1);\n            ElementsArray.prototype = Object.create(HasObservers$$1 && HasObservers$$1.prototype);\n            ElementsArray.prototype.constructor = ElementsArray;\n            ElementsArray.fn = ElementsArray.prototype;\n            ElementsArray.fn.init = ElementsArray.fn.constructor;\n\n            ElementsArray.prototype.elements = function elements(value) {\n              if (value) {\n                this._splice(0, this.length, value);\n\n                this._change();\n\n                return this;\n              }\n\n              return this.slice(0);\n            };\n\n            ElementsArray.prototype.push = function push$1() {\n              var elements = arguments;\n              var result = push.apply(this, elements);\n\n              this._add(elements);\n\n              return result;\n            };\n\n            ElementsArray.prototype.slice = function slice$1() {\n              return slice.call(this);\n            };\n\n            ElementsArray.prototype.pop = function pop$1() {\n              var length = this.length;\n              var result = pop.apply(this);\n\n              if (length) {\n                this._remove([result]);\n              }\n\n              return result;\n            };\n\n            ElementsArray.prototype.splice = function splice$1(index, howMany) {\n              var elements = slice.call(arguments, 2);\n\n              var result = this._splice(index, howMany, elements);\n\n              this._change();\n\n              return result;\n            };\n\n            ElementsArray.prototype.shift = function shift$1() {\n              var length = this.length;\n              var result = shift.apply(this);\n\n              if (length) {\n                this._remove([result]);\n              }\n\n              return result;\n            };\n\n            ElementsArray.prototype.unshift = function unshift$1() {\n              var elements = arguments;\n              var result = unshift.apply(this, elements);\n\n              this._add(elements);\n\n              return result;\n            };\n\n            ElementsArray.prototype.indexOf = function indexOf(element) {\n              var this$1 = this;\n              var length = this.length;\n\n              for (var idx = 0; idx < length; idx++) {\n                if (this$1[idx] === element) {\n                  return idx;\n                }\n              }\n\n              return -1;\n            };\n\n            ElementsArray.prototype._splice = function _splice(index, howMany, elements) {\n              var result = splice.apply(this, [index, howMany].concat(elements));\n\n              this._clearObserver(result);\n\n              this._setObserver(elements);\n\n              return result;\n            };\n\n            ElementsArray.prototype._add = function _add(elements) {\n              this._setObserver(elements);\n\n              this._change();\n            };\n\n            ElementsArray.prototype._remove = function _remove(elements) {\n              this._clearObserver(elements);\n\n              this._change();\n            };\n\n            ElementsArray.prototype._setObserver = function _setObserver(elements) {\n              var this$1 = this;\n\n              for (var idx = 0; idx < elements.length; idx++) {\n                elements[idx].addObserver(this$1);\n              }\n            };\n\n            ElementsArray.prototype._clearObserver = function _clearObserver(elements) {\n              var this$1 = this;\n\n              for (var idx = 0; idx < elements.length; idx++) {\n                elements[idx].removeObserver(this$1);\n              }\n            };\n\n            ElementsArray.prototype._change = function _change() {};\n\n            return ElementsArray;\n          }(HasObservers);\n\n          var GeometryElementsArray = function (ElementsArray$$1) {\n            function GeometryElementsArray() {\n              ElementsArray$$1.apply(this, arguments);\n            }\n\n            extendStatic(GeometryElementsArray, ElementsArray$$1);\n            GeometryElementsArray.prototype = Object.create(ElementsArray$$1 && ElementsArray$$1.prototype);\n            GeometryElementsArray.prototype.constructor = GeometryElementsArray;\n            GeometryElementsArray.fn = GeometryElementsArray.prototype;\n            GeometryElementsArray.fn.init = GeometryElementsArray.fn.constructor;\n\n            GeometryElementsArray.prototype._change = function _change() {\n              this.geometryChange();\n            };\n\n            return GeometryElementsArray;\n          }(ElementsArray);\n\n          function isOutOfEndPoint(endPoint, controlPoint, point) {\n            var angle = deg(Math.atan2(controlPoint.y - endPoint.y, controlPoint.x - endPoint.x));\n            var rotatedPoint = point.transformCopy(transform$1().rotate(-angle, endPoint));\n            return rotatedPoint.x < endPoint.x;\n          }\n\n          function calculateCurveAt(t, field, points) {\n            var t1 = 1 - t;\n            return Math.pow(t1, 3) * points[0][field] + 3 * Math.pow(t1, 2) * t * points[1][field] + 3 * Math.pow(t, 2) * t1 * points[2][field] + Math.pow(t, 3) * points[3][field];\n          }\n\n          function toCubicPolynomial(points, field) {\n            return [-points[0][field] + 3 * points[1][field] - 3 * points[2][field] + points[3][field], 3 * (points[0][field] - 2 * points[1][field] + points[2][field]), 3 * (-points[0][field] + points[1][field]), points[0][field]];\n          }\n\n          var ComplexNumber = function (Class$$1) {\n            function ComplexNumber(real, img) {\n              if (real === void 0) {\n                real = 0;\n              }\n\n              if (img === void 0) {\n                img = 0;\n              }\n\n              Class$$1.call(this);\n              this.real = real;\n              this.img = img;\n            }\n\n            extendStatic(ComplexNumber, Class$$1);\n            ComplexNumber.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            ComplexNumber.prototype.constructor = ComplexNumber;\n            ComplexNumber.fn = ComplexNumber.prototype;\n            ComplexNumber.fn.init = ComplexNumber.fn.constructor;\n\n            ComplexNumber.prototype.add = function add(cNumber) {\n              return new ComplexNumber(round(this.real + cNumber.real, PRECISION), round(this.img + cNumber.img, PRECISION));\n            };\n\n            ComplexNumber.prototype.addConstant = function addConstant(value) {\n              return new ComplexNumber(this.real + value, this.img);\n            };\n\n            ComplexNumber.prototype.negate = function negate() {\n              return new ComplexNumber(-this.real, -this.img);\n            };\n\n            ComplexNumber.prototype.multiply = function multiply(cNumber) {\n              return new ComplexNumber(this.real * cNumber.real - this.img * cNumber.img, this.real * cNumber.img + this.img * cNumber.real);\n            };\n\n            ComplexNumber.prototype.multiplyConstant = function multiplyConstant(value) {\n              return new ComplexNumber(this.real * value, this.img * value);\n            };\n\n            ComplexNumber.prototype.nthRoot = function nthRoot(n) {\n              var rad$$1 = Math.atan2(this.img, this.real);\n              var r = Math.sqrt(Math.pow(this.img, 2) + Math.pow(this.real, 2));\n              var nthR = Math.pow(r, 1 / n);\n              return new ComplexNumber(nthR * Math.cos(rad$$1 / n), nthR * Math.sin(rad$$1 / n)); //Moivre's formula\n            };\n\n            ComplexNumber.prototype.equals = function equals(cNumber) {\n              return this.real === cNumber.real && this.img === cNumber.img;\n            };\n\n            ComplexNumber.prototype.isReal = function isReal() {\n              return this.img === 0;\n            };\n\n            return ComplexNumber;\n          }(Class);\n\n          function numberSign(x) {\n            return x < 0 ? -1 : 1;\n          }\n\n          function solveQuadraticEquation(a, b, c) {\n            var squareRoot = Math.sqrt(Math.pow(b, 2) - 4 * a * c);\n            return [(-b + squareRoot) / (2 * a), (-b - squareRoot) / (2 * a)];\n          } //Cardano's formula\n\n\n          function solveCubicEquation(a, b, c, d) {\n            if (a === 0) {\n              return solveQuadraticEquation(b, c, d);\n            }\n\n            var p = (3 * a * c - Math.pow(b, 2)) / (3 * Math.pow(a, 2));\n            var q = (2 * Math.pow(b, 3) - 9 * a * b * c + 27 * Math.pow(a, 2) * d) / (27 * Math.pow(a, 3));\n            var Q = Math.pow(p / 3, 3) + Math.pow(q / 2, 2);\n            var i = new ComplexNumber(0, 1);\n            var b3a = -b / (3 * a);\n            var x1, x2, y1, y2, y3, z1, z2;\n\n            if (Q < 0) {\n              x1 = new ComplexNumber(-q / 2, Math.sqrt(-Q)).nthRoot(3);\n              x2 = new ComplexNumber(-q / 2, -Math.sqrt(-Q)).nthRoot(3);\n            } else {\n              x1 = -q / 2 + Math.sqrt(Q);\n              x1 = new ComplexNumber(numberSign(x1) * Math.pow(Math.abs(x1), 1 / 3));\n              x2 = -q / 2 - Math.sqrt(Q);\n              x2 = new ComplexNumber(numberSign(x2) * Math.pow(Math.abs(x2), 1 / 3));\n            }\n\n            y1 = x1.add(x2);\n            z1 = x1.add(x2).multiplyConstant(-1 / 2);\n            z2 = x1.add(x2.negate()).multiplyConstant(Math.sqrt(3) / 2);\n            y2 = z1.add(i.multiply(z2));\n            y3 = z1.add(i.negate().multiply(z2));\n            var result = [];\n\n            if (y1.isReal()) {\n              result.push(round(y1.real + b3a, PRECISION));\n            }\n\n            if (y2.isReal()) {\n              result.push(round(y2.real + b3a, PRECISION));\n            }\n\n            if (y3.isReal()) {\n              result.push(round(y3.real + b3a, PRECISION));\n            }\n\n            return result;\n          }\n\n          function hasRootsInRange(points, point, field, rootField, range) {\n            var polynomial = toCubicPolynomial(points, rootField);\n            var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point[rootField]);\n            var intersection;\n\n            for (var idx = 0; idx < roots.length; idx++) {\n              if (0 <= roots[idx] && roots[idx] <= 1) {\n                intersection = calculateCurveAt(roots[idx], field, points);\n\n                if (Math.abs(intersection - point[field]) <= range) {\n                  return true;\n                }\n              }\n            }\n          }\n\n          function curveIntersectionsCount(points, point, bbox) {\n            var polynomial = toCubicPolynomial(points, \"x\");\n            var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point.x);\n            var rayIntersection, intersectsRay;\n            var count = 0;\n\n            for (var i = 0; i < roots.length; i++) {\n              rayIntersection = calculateCurveAt(roots[i], \"y\", points);\n              intersectsRay = close$1(rayIntersection, point.y) || rayIntersection > point.y;\n\n              if (intersectsRay && ((roots[i] === 0 || roots[i] === 1) && bbox.bottomRight().x > point.x || 0 < roots[i] && roots[i] < 1)) {\n                count++;\n              }\n            }\n\n            return count;\n          }\n\n          function lineIntersectionsCount(a, b, point) {\n            var intersects;\n\n            if (a.x !== b.x) {\n              var minX = Math.min(a.x, b.x);\n              var maxX = Math.max(a.x, b.x);\n              var minY = Math.min(a.y, b.y);\n              var maxY = Math.max(a.y, b.y);\n              var inRange = minX <= point.x && point.x < maxX;\n\n              if (minY === maxY) {\n                intersects = point.y <= minY && inRange;\n              } else {\n                intersects = inRange && (maxY - minY) * ((a.x - b.x) * (a.y - b.y) > 0 ? point.x - minX : maxX - point.x) / (maxX - minX) + minY - point.y >= 0;\n              }\n            }\n\n            return intersects ? 1 : 0;\n          }\n\n          function pointAccessor(name) {\n            var fieldName = \"_\" + name;\n            return function (value) {\n              if (defined(value)) {\n                this._observerField(fieldName, Point.create(value));\n\n                this.geometryChange();\n                return this;\n              }\n\n              return this[fieldName];\n            };\n          }\n\n          function definePointAccessors(fn, names) {\n            for (var i = 0; i < names.length; i++) {\n              fn[names[i]] = pointAccessor(names[i]);\n            }\n          }\n\n          var withPoints = function (TBase, names) {\n            var result = function (TBase) {\n              function result() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(result, TBase);\n              result.prototype = Object.create(TBase && TBase.prototype);\n              result.prototype.constructor = result;\n              result.fn = result.prototype;\n              result.fn.init = result.fn.constructor;\n              return result;\n            }(TBase);\n\n            definePointAccessors(result.prototype, names);\n            return result;\n          };\n\n          var points = [\"anchor\", \"controlIn\", \"controlOut\"];\n\n          var Segment = function (superclass) {\n            function Segment(anchor, controlIn, controlOut) {\n              superclass.call(this);\n              this.anchor(anchor || new Point());\n              this.controlIn(controlIn);\n              this.controlOut(controlOut);\n            }\n\n            extendStatic(Segment, superclass);\n            Segment.prototype = Object.create(superclass && superclass.prototype);\n            Segment.prototype.constructor = Segment;\n            Segment.fn = Segment.prototype;\n            Segment.fn.init = Segment.fn.constructor;\n\n            Segment.prototype.bboxTo = function bboxTo(toSegment, matrix) {\n              var segmentAnchor = this.anchor().transformCopy(matrix);\n              var toSegmentAnchor = toSegment.anchor().transformCopy(matrix);\n              var rect;\n\n              if (this.controlOut() && toSegment.controlIn()) {\n                rect = this._curveBoundingBox(segmentAnchor, this.controlOut().transformCopy(matrix), toSegment.controlIn().transformCopy(matrix), toSegmentAnchor);\n              } else {\n                rect = this._lineBoundingBox(segmentAnchor, toSegmentAnchor);\n              }\n\n              return rect;\n            };\n\n            Segment.prototype._lineBoundingBox = function _lineBoundingBox(p1, p2) {\n              return Rect.fromPoints(p1, p2);\n            };\n\n            Segment.prototype._curveBoundingBox = function _curveBoundingBox(p1, cp1, cp2, p2) {\n              var points = [p1, cp1, cp2, p2];\n\n              var extremesX = this._curveExtremesFor(points, \"x\");\n\n              var extremesY = this._curveExtremesFor(points, \"y\");\n\n              var xLimits = arrayLimits([extremesX.min, extremesX.max, p1.x, p2.x]);\n              var yLimits = arrayLimits([extremesY.min, extremesY.max, p1.y, p2.y]);\n              return Rect.fromPoints(new Point(xLimits.min, yLimits.min), new Point(xLimits.max, yLimits.max));\n            };\n\n            Segment.prototype._curveExtremesFor = function _curveExtremesFor(points, field) {\n              var extremes = this._curveExtremes(points[0][field], points[1][field], points[2][field], points[3][field]);\n\n              return {\n                min: calculateCurveAt(extremes.min, field, points),\n                max: calculateCurveAt(extremes.max, field, points)\n              };\n            };\n\n            Segment.prototype._curveExtremes = function _curveExtremes(x1, x2, x3, x4) {\n              var a = x1 - 3 * x2 + 3 * x3 - x4;\n              var b = -2 * (x1 - 2 * x2 + x3);\n              var c = x1 - x2;\n              var sqrt = Math.sqrt(b * b - 4 * a * c);\n              var t1 = 0;\n              var t2 = 1;\n\n              if (a === 0) {\n                if (b !== 0) {\n                  t1 = t2 = -c / b;\n                }\n              } else if (!isNaN(sqrt)) {\n                t1 = (-b + sqrt) / (2 * a);\n                t2 = (-b - sqrt) / (2 * a);\n              }\n\n              var min = Math.max(Math.min(t1, t2), 0);\n\n              if (min < 0 || min > 1) {\n                min = 0;\n              }\n\n              var max = Math.min(Math.max(t1, t2), 1);\n\n              if (max > 1 || max < 0) {\n                max = 1;\n              }\n\n              return {\n                min: min,\n                max: max\n              };\n            };\n\n            Segment.prototype._intersectionsTo = function _intersectionsTo(segment, point) {\n              var intersectionsCount;\n\n              if (this.controlOut() && segment.controlIn()) {\n                intersectionsCount = curveIntersectionsCount([this.anchor(), this.controlOut(), segment.controlIn(), segment.anchor()], point, this.bboxTo(segment));\n              } else {\n                intersectionsCount = lineIntersectionsCount(this.anchor(), segment.anchor(), point);\n              }\n\n              return intersectionsCount;\n            };\n\n            Segment.prototype._isOnCurveTo = function _isOnCurveTo(segment, point, width, endSegment) {\n              var bbox = this.bboxTo(segment).expand(width, width);\n\n              if (bbox.containsPoint(point)) {\n                var p1 = this.anchor();\n                var p2 = this.controlOut();\n                var p3 = segment.controlIn();\n                var p4 = segment.anchor();\n\n                if (endSegment === \"start\" && p1.distanceTo(point) <= width) {\n                  return !isOutOfEndPoint(p1, p2, point);\n                } else if (endSegment === \"end\" && p4.distanceTo(point) <= width) {\n                  return !isOutOfEndPoint(p4, p3, point);\n                } //the approach is not entirely correct but is close and the alternatives are solving a 6th degree polynomial or testing the segment points\n\n\n                var points = [p1, p2, p3, p4];\n\n                if (hasRootsInRange(points, point, \"x\", \"y\", width) || hasRootsInRange(points, point, \"y\", \"x\", width)) {\n                  return true;\n                }\n\n                var rotation = transform$1().rotate(45, point);\n                var rotatedPoints = [p1.transformCopy(rotation), p2.transformCopy(rotation), p3.transformCopy(rotation), p4.transformCopy(rotation)];\n                return hasRootsInRange(rotatedPoints, point, \"x\", \"y\", width) || hasRootsInRange(rotatedPoints, point, \"y\", \"x\", width);\n              }\n            };\n\n            Segment.prototype._isOnLineTo = function _isOnLineTo(segment, point, width) {\n              var p1 = this.anchor();\n              var p2 = segment.anchor();\n              var angle = deg(Math.atan2(p2.y - p1.y, p2.x - p1.x));\n              var rect = new Rect([p1.x, p1.y - width / 2], [p1.distanceTo(p2), width]);\n              return rect.containsPoint(point.transformCopy(transform$1().rotate(-angle, p1)));\n            };\n\n            Segment.prototype._isOnPathTo = function _isOnPathTo(segment, point, width, endSegment) {\n              var isOnPath;\n\n              if (this.controlOut() && segment.controlIn()) {\n                isOnPath = this._isOnCurveTo(segment, point, width / 2, endSegment);\n              } else {\n                isOnPath = this._isOnLineTo(segment, point, width);\n              }\n\n              return isOnPath;\n            };\n\n            return Segment;\n          }(withPoints(HasObservers, points));\n\n          function arrayLimits(arr) {\n            var length = arr.length;\n            var min = MAX_NUM;\n            var max = MIN_NUM;\n\n            for (var i = 0; i < length; i++) {\n              max = Math.max(max, arr[i]);\n              min = Math.min(min, arr[i]);\n            }\n\n            return {\n              min: min,\n              max: max\n            };\n          }\n\n          var ShapeMap = {\n            l: function (path, options) {\n              var parameters = options.parameters;\n              var position = options.position;\n\n              for (var i = 0; i < parameters.length; i += 2) {\n                var point = new Point(parameters[i], parameters[i + 1]);\n\n                if (options.isRelative) {\n                  point.translateWith(position);\n                }\n\n                path.lineTo(point.x, point.y);\n                position.x = point.x;\n                position.y = point.y;\n              }\n            },\n            c: function (path, options) {\n              var parameters = options.parameters;\n              var position = options.position;\n\n              for (var i = 0; i < parameters.length; i += 6) {\n                var controlOut = new Point(parameters[i], parameters[i + 1]);\n                var controlIn = new Point(parameters[i + 2], parameters[i + 3]);\n                var point = new Point(parameters[i + 4], parameters[i + 5]);\n\n                if (options.isRelative) {\n                  controlIn.translateWith(position);\n                  controlOut.translateWith(position);\n                  point.translateWith(position);\n                }\n\n                path.curveTo(controlOut, controlIn, point);\n                position.x = point.x;\n                position.y = point.y;\n              }\n            },\n            v: function (path, options) {\n              var value = options.isRelative ? 0 : options.position.x;\n              toLineParamaters(options.parameters, true, value);\n              this.l(path, options);\n            },\n            h: function (path, options) {\n              var value = options.isRelative ? 0 : options.position.y;\n              toLineParamaters(options.parameters, false, value);\n              this.l(path, options);\n            },\n            a: function (path, options) {\n              var parameters = options.parameters;\n              var position = options.position;\n\n              for (var i = 0; i < parameters.length; i += 7) {\n                var radiusX = parameters[i];\n                var radiusY = parameters[i + 1];\n                var rotation = parameters[i + 2];\n                var largeArc = parameters[i + 3];\n                var swipe = parameters[i + 4];\n                var endPoint = new Point(parameters[i + 5], parameters[i + 6]);\n\n                if (options.isRelative) {\n                  endPoint.translateWith(position);\n                }\n\n                if (position.x !== endPoint.x || position.y !== endPoint.y) {\n                  path.arcTo(endPoint, radiusX, radiusY, largeArc, swipe, rotation);\n                  position.x = endPoint.x;\n                  position.y = endPoint.y;\n                }\n              }\n            },\n            s: function (path, options) {\n              var parameters = options.parameters;\n              var position = options.position;\n              var previousCommand = options.previousCommand;\n              var lastControlIn;\n\n              if (previousCommand === \"s\" || previousCommand === \"c\") {\n                lastControlIn = last(last(path.paths).segments).controlIn();\n              }\n\n              for (var i = 0; i < parameters.length; i += 4) {\n                var controlIn = new Point(parameters[i], parameters[i + 1]);\n                var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n                var controlOut = void 0;\n\n                if (options.isRelative) {\n                  controlIn.translateWith(position);\n                  endPoint.translateWith(position);\n                }\n\n                if (lastControlIn) {\n                  controlOut = reflectionPoint(lastControlIn, position);\n                } else {\n                  controlOut = position.clone();\n                }\n\n                lastControlIn = controlIn;\n                path.curveTo(controlOut, controlIn, endPoint);\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n              }\n            },\n            q: function (path, options) {\n              var parameters = options.parameters;\n              var position = options.position;\n\n              for (var i = 0; i < parameters.length; i += 4) {\n                var controlPoint = new Point(parameters[i], parameters[i + 1]);\n                var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n\n                if (options.isRelative) {\n                  controlPoint.translateWith(position);\n                  endPoint.translateWith(position);\n                }\n\n                var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n                path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n              }\n            },\n            t: function (path, options) {\n              var parameters = options.parameters;\n              var position = options.position;\n              var previousCommand = options.previousCommand;\n              var controlPoint;\n\n              if (previousCommand === \"q\" || previousCommand === \"t\") {\n                var lastSegment = last(last(path.paths).segments);\n                controlPoint = lastSegment.controlIn().clone().translateWith(position.scaleCopy(-1 / 3)).scale(3 / 2);\n              }\n\n              for (var i = 0; i < parameters.length; i += 2) {\n                var endPoint = new Point(parameters[i], parameters[i + 1]);\n\n                if (options.isRelative) {\n                  endPoint.translateWith(position);\n                }\n\n                if (controlPoint) {\n                  controlPoint = reflectionPoint(controlPoint, position);\n                } else {\n                  controlPoint = position.clone();\n                }\n\n                var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n                path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n              }\n            }\n          };\n\n          function toLineParamaters(parameters, isVertical, value) {\n            var insertPosition = isVertical ? 0 : 1;\n\n            for (var i = 0; i < parameters.length; i += 2) {\n              parameters.splice(i + insertPosition, 0, value);\n            }\n          }\n\n          function reflectionPoint(point, center) {\n            if (point && center) {\n              return center.scaleCopy(2).translate(-point.x, -point.y);\n            }\n          }\n\n          var third = 1 / 3;\n\n          function quadraticToCubicControlPoints(position, controlPoint, endPoint) {\n            var scaledPoint = controlPoint.clone().scale(2 / 3);\n            return {\n              controlOut: scaledPoint.clone().translateWith(position.scaleCopy(third)),\n              controlIn: scaledPoint.translateWith(endPoint.scaleCopy(third))\n            };\n          }\n\n          var SEGMENT_REGEX = /([a-df-z]{1})([^a-df-z]*)(z)?/gi;\n          var SPLIT_REGEX = /[,\\s]?([+\\-]?(?:\\d*\\.\\d+|\\d+)(?:[eE][+\\-]?\\d+)?)/g;\n          var MOVE = \"m\";\n          var CLOSE = \"z\";\n\n          function parseParameters(str) {\n            var parameters = [];\n            str.replace(SPLIT_REGEX, function (match, number) {\n              parameters.push(parseFloat(number));\n            });\n            return parameters;\n          }\n\n          function parsePath(pathInstance, str) {\n            var position = new Point();\n            var previousCommand;\n            str.replace(SEGMENT_REGEX, function (match, element, params, closePath) {\n              var command = element.toLowerCase();\n              var isRelative = command === element;\n              var parameters = parseParameters(params.trim());\n\n              if (command === MOVE) {\n                if (isRelative) {\n                  position.x += parameters[0];\n                  position.y += parameters[1];\n                } else {\n                  position.x = parameters[0];\n                  position.y = parameters[1];\n                }\n\n                pathInstance.moveTo(position.x, position.y);\n\n                if (parameters.length > 2) {\n                  command = \"l\";\n                  parameters.splice(0, 2);\n                }\n              }\n\n              if (ShapeMap[command]) {\n                ShapeMap[command](pathInstance, {\n                  parameters: parameters,\n                  position: position,\n                  isRelative: isRelative,\n                  previousCommand: previousCommand\n                });\n\n                if (closePath && closePath.toLowerCase() === CLOSE) {\n                  pathInstance.close();\n                }\n              } else if (command !== MOVE) {\n                throw new Error(\"Error while parsing SVG path. Unsupported command: \" + command);\n              }\n\n              previousCommand = command;\n            });\n            return pathInstance;\n          }\n\n          function elementsBoundingBox(elements, applyTransform, transformation) {\n            var boundingBox;\n\n            for (var i = 0; i < elements.length; i++) {\n              var element = elements[i];\n\n              if (element.visible()) {\n                var elementBoundingBox = applyTransform ? element.bbox(transformation) : element.rawBBox();\n\n                if (elementBoundingBox) {\n                  if (boundingBox) {\n                    boundingBox = Rect.union(boundingBox, elementBoundingBox);\n                  } else {\n                    boundingBox = elementBoundingBox;\n                  }\n                }\n              }\n            }\n\n            return boundingBox;\n          }\n\n          function elementsClippedBoundingBox(elements, transformation) {\n            var boundingBox;\n\n            for (var i = 0; i < elements.length; i++) {\n              var element = elements[i];\n\n              if (element.visible()) {\n                var elementBoundingBox = element.clippedBBox(transformation);\n\n                if (elementBoundingBox) {\n                  if (boundingBox) {\n                    boundingBox = Rect.union(boundingBox, elementBoundingBox);\n                  } else {\n                    boundingBox = elementBoundingBox;\n                  }\n                }\n              }\n            }\n\n            return boundingBox;\n          }\n\n          var Path = function (superclass) {\n            function Path(options) {\n              superclass.call(this, options);\n              this.segments = new GeometryElementsArray();\n              this.segments.addObserver(this);\n\n              if (!defined(this.options.stroke)) {\n                this.stroke(\"#000\");\n\n                if (!defined(this.options.stroke.lineJoin)) {\n                  this.options.set(\"stroke.lineJoin\", \"miter\");\n                }\n              }\n            }\n\n            extendStatic(Path, superclass);\n            Path.prototype = Object.create(superclass && superclass.prototype);\n            Path.prototype.constructor = Path;\n            Path.fn = Path.prototype;\n            Path.fn.init = Path.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            Path.parse = function parse(str, options) {\n              return MultiPath.parse(str, options);\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Path\";\n            };\n\n            Path.prototype.moveTo = function moveTo(x, y) {\n              this.suspend();\n              this.segments.elements([]);\n              this.resume();\n              this.lineTo(x, y);\n              return this;\n            };\n\n            Path.prototype.lineTo = function lineTo(x, y) {\n              var point = defined(y) ? new Point(x, y) : x;\n              var segment = new Segment(point);\n              this.segments.push(segment);\n              return this;\n            };\n\n            Path.prototype.curveTo = function curveTo(controlOut, controlIn, point) {\n              if (this.segments.length > 0) {\n                var lastSegment = last(this.segments);\n                var segment = new Segment(point, controlIn);\n                this.suspend();\n                lastSegment.controlOut(controlOut);\n                this.resume();\n                this.segments.push(segment);\n              }\n\n              return this;\n            };\n\n            Path.prototype.arc = function arc(startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n              if (this.segments.length > 0) {\n                var lastSegment = last(this.segments);\n                var anchor = lastSegment.anchor();\n                var start = rad(startAngle);\n                var center = new Point(anchor.x - radiusX * Math.cos(start), anchor.y - radiusY * Math.sin(start));\n                var arc = new Arc$2(center, {\n                  startAngle: startAngle,\n                  endAngle: endAngle,\n                  radiusX: radiusX,\n                  radiusY: radiusY,\n                  anticlockwise: anticlockwise\n                });\n\n                this._addArcSegments(arc);\n              }\n\n              return this;\n            };\n\n            Path.prototype.arcTo = function arcTo(end, rx, ry, largeArc, swipe, rotation) {\n              if (this.segments.length > 0) {\n                var lastSegment = last(this.segments);\n                var anchor = lastSegment.anchor();\n                var arc = Arc$2.fromPoints(anchor, Point.create(end), rx, ry, largeArc, swipe, rotation);\n\n                this._addArcSegments(arc);\n              }\n\n              return this;\n            };\n\n            Path.prototype._addArcSegments = function _addArcSegments(arc) {\n              var this$1 = this;\n              this.suspend();\n              var curvePoints = arc.curvePoints();\n\n              for (var i = 1; i < curvePoints.length; i += 3) {\n                this$1.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n              }\n\n              this.resume();\n              this.geometryChange();\n            };\n\n            Path.prototype.close = function close() {\n              this.options.closed = true;\n              this.geometryChange();\n              return this;\n            };\n\n            Path.prototype.rawBBox = function rawBBox() {\n              return this._bbox();\n            };\n\n            Path.prototype._containsPoint = function _containsPoint(point) {\n              var segments = this.segments;\n              var length = segments.length;\n              var intersectionsCount = 0;\n              var previous, current;\n\n              for (var idx = 1; idx < length; idx++) {\n                previous = segments[idx - 1];\n                current = segments[idx];\n                intersectionsCount += previous._intersectionsTo(current, point);\n              }\n\n              if (this.options.closed || !segments[0].anchor().equals(segments[length - 1].anchor())) {\n                intersectionsCount += lineIntersectionsCount(segments[0].anchor(), segments[length - 1].anchor(), point);\n              }\n\n              return intersectionsCount % 2 !== 0;\n            };\n\n            Path.prototype._isOnPath = function _isOnPath(point, width) {\n              var segments = this.segments;\n              var length = segments.length;\n              var pathWidth = width || this.options.stroke.width;\n\n              if (length > 1) {\n                if (segments[0]._isOnPathTo(segments[1], point, pathWidth, \"start\")) {\n                  return true;\n                }\n\n                for (var idx = 2; idx <= length - 2; idx++) {\n                  if (segments[idx - 1]._isOnPathTo(segments[idx], point, pathWidth)) {\n                    return true;\n                  }\n                }\n\n                if (segments[length - 2]._isOnPathTo(segments[length - 1], point, pathWidth, \"end\")) {\n                  return true;\n                }\n              }\n\n              return false;\n            };\n\n            Path.prototype._bbox = function _bbox(matrix) {\n              var segments = this.segments;\n              var length = segments.length;\n              var boundingBox;\n\n              if (length === 1) {\n                var anchor = segments[0].anchor().transformCopy(matrix);\n                boundingBox = new Rect(anchor, Size.ZERO);\n              } else if (length > 0) {\n                for (var i = 1; i < length; i++) {\n                  var segmentBox = segments[i - 1].bboxTo(segments[i], matrix);\n\n                  if (boundingBox) {\n                    boundingBox = Rect.union(boundingBox, segmentBox);\n                  } else {\n                    boundingBox = segmentBox;\n                  }\n                }\n              }\n\n              return boundingBox;\n            };\n\n            Path.fromRect = function fromRect(rect, options) {\n              var path = new Path(options);\n              var ref = rect.cornerRadius;\n              var rx = ref[0];\n              var ry = ref[1];\n\n              if (rx === 0 && ry === 0) {\n                path.moveTo(rect.topLeft()).lineTo(rect.topRight()).lineTo(rect.bottomRight()).lineTo(rect.bottomLeft()).close();\n              } else {\n                var origin = rect.origin;\n                var x = origin.x;\n                var y = origin.y;\n                var width = rect.width();\n                var height = rect.height();\n                rx = limitValue(rx, 0, width / 2);\n                ry = limitValue(ry, 0, height / 2);\n                path.moveTo(x + rx, y).lineTo(x + width - rx, y).arcTo([x + width, y + ry], rx, ry, false).lineTo(x + width, y + height - ry).arcTo([x + width - rx, y + height], rx, ry, false).lineTo(x + rx, y + height).arcTo([x, y + height - ry], rx, ry, false).lineTo(x, y + ry).arcTo([x + rx, y], rx, ry, false);\n              }\n\n              return path;\n            };\n\n            Path.fromPoints = function fromPoints(points, options) {\n              if (points) {\n                var path = new Path(options);\n\n                for (var i = 0; i < points.length; i++) {\n                  var point = Point.create(points[i]);\n\n                  if (point) {\n                    if (i === 0) {\n                      path.moveTo(point);\n                    } else {\n                      path.lineTo(point);\n                    }\n                  }\n                }\n\n                return path;\n              }\n            };\n\n            Path.fromArc = function fromArc(arc, options) {\n              var path = new Path(options);\n              var startAngle = arc.startAngle;\n              var start = arc.pointAt(startAngle);\n              path.moveTo(start.x, start.y);\n              path.arc(startAngle, arc.endAngle, arc.radiusX, arc.radiusY, arc.anticlockwise);\n              return path;\n            };\n\n            Object.defineProperties(Path.prototype, prototypeAccessors);\n            return Path;\n          }(paintable(measurable(Element$1)));\n\n          var MultiPath = function (superclass) {\n            function MultiPath(options) {\n              superclass.call(this, options);\n              this.paths = new GeometryElementsArray();\n              this.paths.addObserver(this);\n\n              if (!defined(this.options.stroke)) {\n                this.stroke(\"#000\");\n              }\n            }\n\n            extendStatic(MultiPath, superclass);\n            MultiPath.prototype = Object.create(superclass && superclass.prototype);\n            MultiPath.prototype.constructor = MultiPath;\n            MultiPath.fn = MultiPath.prototype;\n            MultiPath.fn.init = MultiPath.fn.constructor;\n            var prototypeAccessors$1 = {\n              nodeType: {}\n            };\n\n            MultiPath.parse = function parse(str, options) {\n              var instance = new MultiPath(options);\n              return parsePath(instance, str);\n            };\n\n            prototypeAccessors$1.nodeType.get = function () {\n              return \"MultiPath\";\n            };\n\n            MultiPath.prototype.moveTo = function moveTo(x, y) {\n              var path = new Path();\n              path.moveTo(x, y);\n              this.paths.push(path);\n              return this;\n            };\n\n            MultiPath.prototype.lineTo = function lineTo(x, y) {\n              if (this.paths.length > 0) {\n                last(this.paths).lineTo(x, y);\n              }\n\n              return this;\n            };\n\n            MultiPath.prototype.curveTo = function curveTo(controlOut, controlIn, point) {\n              if (this.paths.length > 0) {\n                last(this.paths).curveTo(controlOut, controlIn, point);\n              }\n\n              return this;\n            };\n\n            MultiPath.prototype.arc = function arc(startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n              if (this.paths.length > 0) {\n                last(this.paths).arc(startAngle, endAngle, radiusX, radiusY, anticlockwise);\n              }\n\n              return this;\n            };\n\n            MultiPath.prototype.arcTo = function arcTo(end, rx, ry, largeArc, swipe, rotation) {\n              if (this.paths.length > 0) {\n                last(this.paths).arcTo(end, rx, ry, largeArc, swipe, rotation);\n              }\n\n              return this;\n            };\n\n            MultiPath.prototype.close = function close() {\n              if (this.paths.length > 0) {\n                last(this.paths).close();\n              }\n\n              return this;\n            };\n\n            MultiPath.prototype._bbox = function _bbox(matrix) {\n              return elementsBoundingBox(this.paths, true, matrix);\n            };\n\n            MultiPath.prototype.rawBBox = function rawBBox() {\n              return elementsBoundingBox(this.paths, false);\n            };\n\n            MultiPath.prototype._containsPoint = function _containsPoint(point) {\n              var paths = this.paths;\n\n              for (var idx = 0; idx < paths.length; idx++) {\n                if (paths[idx]._containsPoint(point)) {\n                  return true;\n                }\n              }\n\n              return false;\n            };\n\n            MultiPath.prototype._isOnPath = function _isOnPath(point) {\n              var paths = this.paths;\n              var width = this.options.stroke.width;\n\n              for (var idx = 0; idx < paths.length; idx++) {\n                if (paths[idx]._isOnPath(point, width)) {\n                  return true;\n                }\n              }\n\n              return false;\n            };\n\n            MultiPath.prototype._clippedBBox = function _clippedBBox(transformation) {\n              return elementsClippedBoundingBox(this.paths, this.currentTransform(transformation));\n            };\n\n            Object.defineProperties(MultiPath.prototype, prototypeAccessors$1);\n            return MultiPath;\n          }(paintable(measurable(Element$1)));\n\n          var DEFAULT_STROKE$1 = \"#000\";\n\n          var Arc = function (superclass) {\n            function Arc(geometry, options) {\n              if (geometry === void 0) {\n                geometry = new Arc$2();\n              }\n\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.geometry(geometry);\n\n              if (!defined(this.options.stroke)) {\n                this.stroke(DEFAULT_STROKE$1);\n              }\n            }\n\n            extendStatic(Arc, superclass);\n            Arc.prototype = Object.create(superclass && superclass.prototype);\n            Arc.prototype.constructor = Arc;\n            Arc.fn = Arc.prototype;\n            Arc.fn.init = Arc.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Arc\";\n            };\n\n            Arc.prototype._bbox = function _bbox(matrix) {\n              return this._geometry.bbox(matrix);\n            };\n\n            Arc.prototype.rawBBox = function rawBBox() {\n              return this.geometry().bbox();\n            };\n\n            Arc.prototype.toPath = function toPath() {\n              var path = new Path();\n              var curvePoints = this.geometry().curvePoints();\n\n              if (curvePoints.length > 0) {\n                path.moveTo(curvePoints[0].x, curvePoints[0].y);\n\n                for (var i = 1; i < curvePoints.length; i += 3) {\n                  path.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n                }\n              }\n\n              return path;\n            };\n\n            Arc.prototype._containsPoint = function _containsPoint(point) {\n              return this.geometry().containsPoint(point);\n            };\n\n            Arc.prototype._isOnPath = function _isOnPath(point) {\n              return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n            };\n\n            Object.defineProperties(Arc.prototype, prototypeAccessors);\n            return Arc;\n          }(paintable(measurable(withGeometry(Element$1))));\n\n          var DEFAULT_FONT = \"12px sans-serif\";\n          var DEFAULT_FILL = \"#000\";\n\n          var Text = function (superclass) {\n            function Text(content, position, options) {\n              if (position === void 0) {\n                position = new Point();\n              }\n\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.content(content);\n              this.position(position);\n\n              if (!this.options.font) {\n                this.options.font = DEFAULT_FONT;\n              }\n\n              if (!defined(this.options.fill)) {\n                this.fill(DEFAULT_FILL);\n              }\n            }\n\n            extendStatic(Text, superclass);\n            Text.prototype = Object.create(superclass && superclass.prototype);\n            Text.prototype.constructor = Text;\n            Text.fn = Text.prototype;\n            Text.fn.init = Text.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Text\";\n            };\n\n            Text.prototype.content = function content(value) {\n              if (defined(value)) {\n                this.options.set(\"content\", value);\n                return this;\n              }\n\n              return this.options.get(\"content\");\n            };\n\n            Text.prototype.measure = function measure() {\n              var metrics = kendoUtil.measureText(this.content(), {\n                font: this.options.get(\"font\")\n              });\n              return metrics;\n            };\n\n            Text.prototype.rect = function rect() {\n              var size = this.measure();\n              var pos = this.position().clone();\n              return new Rect(pos, [size.width, size.height]);\n            };\n\n            Text.prototype.bbox = function bbox(transformation) {\n              var combinedMatrix = toMatrix(this.currentTransform(transformation));\n              return this.rect().bbox(combinedMatrix);\n            };\n\n            Text.prototype.rawBBox = function rawBBox() {\n              return this.rect().bbox();\n            };\n\n            Text.prototype._containsPoint = function _containsPoint(point) {\n              return this.rect().containsPoint(point);\n            };\n\n            Object.defineProperties(Text.prototype, prototypeAccessors);\n            return Text;\n          }(paintable(withPoints(Element$1, [\"position\"])));\n\n          var Image$1 = function (superclass) {\n            function Image(src, rect, options) {\n              if (rect === void 0) {\n                rect = new Rect();\n              }\n\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.src(src);\n              this.rect(rect);\n            }\n\n            extendStatic(Image, superclass);\n            Image.prototype = Object.create(superclass && superclass.prototype);\n            Image.prototype.constructor = Image;\n            Image.fn = Image.prototype;\n            Image.fn.init = Image.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Image\";\n            };\n\n            Image.prototype.src = function src(value) {\n              if (defined(value)) {\n                this.options.set(\"src\", value);\n                return this;\n              }\n\n              return this.options.get(\"src\");\n            };\n\n            Image.prototype.bbox = function bbox(transformation) {\n              var combinedMatrix = toMatrix(this.currentTransform(transformation));\n              return this._rect.bbox(combinedMatrix);\n            };\n\n            Image.prototype.rawBBox = function rawBBox() {\n              return this._rect.bbox();\n            };\n\n            Image.prototype._containsPoint = function _containsPoint(point) {\n              return this._rect.containsPoint(point);\n            };\n\n            Image.prototype._hasFill = function _hasFill() {\n              return this.src();\n            };\n\n            Object.defineProperties(Image.prototype, prototypeAccessors);\n            return Image;\n          }(withGeometry(Element$1, [\"rect\"]));\n\n          var traversable = function (TBase, childrenField) {\n            return function (TBase) {\n              function anonymous() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(anonymous, TBase);\n              anonymous.prototype = Object.create(TBase && TBase.prototype);\n              anonymous.prototype.constructor = anonymous;\n              anonymous.fn = anonymous.prototype;\n              anonymous.fn.init = anonymous.fn.constructor;\n\n              anonymous.prototype.traverse = function traverse(callback) {\n                var children = this[childrenField];\n\n                for (var i = 0; i < children.length; i++) {\n                  var child = children[i];\n\n                  if (child.traverse) {\n                    child.traverse(callback);\n                  } else {\n                    callback(child);\n                  }\n                }\n\n                return this;\n              };\n\n              return anonymous;\n            }(TBase);\n          };\n\n          var Group = function (superclass) {\n            function Group(options) {\n              superclass.call(this, options);\n              this.children = [];\n            }\n\n            extendStatic(Group, superclass);\n            Group.prototype = Object.create(superclass && superclass.prototype);\n            Group.prototype.constructor = Group;\n            Group.fn = Group.prototype;\n            Group.fn.init = Group.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Group\";\n            };\n\n            Group.prototype.childrenChange = function childrenChange(action, items, index) {\n              this.trigger(\"childrenChange\", {\n                action: action,\n                items: items,\n                index: index\n              });\n            };\n\n            Group.prototype.append = function append$1() {\n              append$1$1(this.children, arguments);\n\n              this._reparent(arguments, this);\n\n              this.childrenChange(\"add\", arguments);\n              return this;\n            };\n\n            Group.prototype.insert = function insert(index, element) {\n              this.children.splice(index, 0, element);\n              element.parent = this;\n              this.childrenChange(\"add\", [element], index);\n              return this;\n            };\n\n            Group.prototype.insertAt = function insertAt(element, index) {\n              return this.insert(index, element);\n            };\n\n            Group.prototype.remove = function remove(element) {\n              var index = this.children.indexOf(element);\n\n              if (index >= 0) {\n                this.children.splice(index, 1);\n                element.parent = null;\n                this.childrenChange(\"remove\", [element], index);\n              }\n\n              return this;\n            };\n\n            Group.prototype.removeAt = function removeAt(index) {\n              if (0 <= index && index < this.children.length) {\n                var element = this.children[index];\n                this.children.splice(index, 1);\n                element.parent = null;\n                this.childrenChange(\"remove\", [element], index);\n              }\n\n              return this;\n            };\n\n            Group.prototype.clear = function clear() {\n              var items = this.children;\n              this.children = [];\n\n              this._reparent(items, null);\n\n              this.childrenChange(\"remove\", items, 0);\n              return this;\n            };\n\n            Group.prototype.bbox = function bbox(transformation) {\n              return elementsBoundingBox(this.children, true, this.currentTransform(transformation));\n            };\n\n            Group.prototype.rawBBox = function rawBBox() {\n              return elementsBoundingBox(this.children, false);\n            };\n\n            Group.prototype._clippedBBox = function _clippedBBox(transformation) {\n              return elementsClippedBoundingBox(this.children, this.currentTransform(transformation));\n            };\n\n            Group.prototype.currentTransform = function currentTransform(transformation) {\n              return Element$1.prototype.currentTransform.call(this, transformation) || null;\n            };\n\n            Group.prototype.containsPoint = function containsPoint(point, parentTransform) {\n              if (this.visible()) {\n                var children = this.children;\n                var transform = this.currentTransform(parentTransform);\n\n                for (var idx = 0; idx < children.length; idx++) {\n                  if (children[idx].containsPoint(point, transform)) {\n                    return true;\n                  }\n                }\n              }\n\n              return false;\n            };\n\n            Group.prototype._reparent = function _reparent(elements, newParent) {\n              var this$1 = this;\n\n              for (var i = 0; i < elements.length; i++) {\n                var child = elements[i];\n                var parent = child.parent;\n\n                if (parent && parent !== this$1 && parent.remove) {\n                  parent.remove(child);\n                }\n\n                child.parent = newParent;\n              }\n            };\n\n            Object.defineProperties(Group.prototype, prototypeAccessors);\n            return Group;\n          }(traversable(Element$1, \"children\"));\n\n          function translateToPoint(point, bbox, element) {\n            var transofrm = element.transform() || transform$1();\n            var matrix = transofrm.matrix();\n            matrix.e += point.x - bbox.origin.x;\n            matrix.f += point.y - bbox.origin.y;\n            transofrm.matrix(matrix);\n            element.transform(transofrm);\n          }\n\n          function alignStart(size, rect, align, axis, sizeField) {\n            var start;\n\n            if (align === \"start\") {\n              start = rect.origin[axis];\n            } else if (align === \"end\") {\n              start = rect.origin[axis] + rect.size[sizeField] - size;\n            } else {\n              start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n            }\n\n            return start;\n          }\n\n          function alignStartReverse(size, rect, align, axis, sizeField) {\n            var start;\n\n            if (align === \"start\") {\n              start = rect.origin[axis] + rect.size[sizeField] - size;\n            } else if (align === \"end\") {\n              start = rect.origin[axis];\n            } else {\n              start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n            }\n\n            return start;\n          }\n\n          var DEFAULT_OPTIONS = {\n            alignContent: \"start\",\n            justifyContent: \"start\",\n            alignItems: \"start\",\n            spacing: 0,\n            orientation: \"horizontal\",\n            lineSpacing: 0,\n            wrap: true,\n            revers: false\n          };\n\n          var forEach = function (elements, callback) {\n            elements.forEach(callback);\n          };\n\n          var forEachReverse = function (elements, callback) {\n            var length = elements.length;\n\n            for (var idx = length - 1; idx >= 0; idx--) {\n              callback(elements[idx], idx);\n            }\n          };\n\n          var Layout = function (Group$$1) {\n            function Layout(rect, options) {\n              Group$$1.call(this, $.extend({}, DEFAULT_OPTIONS, options));\n              this._rect = rect;\n              this._fieldMap = {};\n            }\n\n            extendStatic(Layout, Group$$1);\n            Layout.prototype = Object.create(Group$$1 && Group$$1.prototype);\n            Layout.prototype.constructor = Layout;\n            Layout.fn = Layout.prototype;\n            Layout.fn.init = Layout.fn.constructor;\n\n            Layout.prototype.rect = function rect(value) {\n              if (value) {\n                this._rect = value;\n                return this;\n              }\n\n              return this._rect;\n            };\n\n            Layout.prototype._initMap = function _initMap() {\n              var options = this.options;\n              var fieldMap = this._fieldMap;\n\n              if (options.orientation === \"horizontal\") {\n                fieldMap.sizeField = \"width\";\n                fieldMap.groupsSizeField = \"height\";\n                fieldMap.groupAxis = \"x\";\n                fieldMap.groupsAxis = \"y\";\n              } else {\n                fieldMap.sizeField = \"height\";\n                fieldMap.groupsSizeField = \"width\";\n                fieldMap.groupAxis = \"y\";\n                fieldMap.groupsAxis = \"x\";\n              }\n\n              if (options.reverse) {\n                this.forEach = forEachReverse;\n                this.justifyAlign = alignStartReverse;\n              } else {\n                this.forEach = forEach;\n                this.justifyAlign = alignStart;\n              }\n            };\n\n            Layout.prototype.reflow = function reflow() {\n              var this$1 = this;\n\n              if (!this._rect || this.children.length === 0) {\n                return;\n              }\n\n              this._initMap();\n\n              if (this.options.transform) {\n                this.transform(null);\n              }\n\n              var options = this.options;\n              var rect = this._rect;\n\n              var ref = this._initGroups();\n\n              var groups = ref.groups;\n              var groupsSize = ref.groupsSize;\n              var ref$1 = this._fieldMap;\n              var sizeField = ref$1.sizeField;\n              var groupsSizeField = ref$1.groupsSizeField;\n              var groupAxis = ref$1.groupAxis;\n              var groupsAxis = ref$1.groupsAxis;\n              var groupOrigin = new Point();\n              var elementOrigin = new Point();\n              var size = new Size();\n              var groupStart = alignStart(groupsSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n              var elementStart, group, groupBox;\n\n              var arrangeElements = function (bbox, idx) {\n                var element = group.elements[idx];\n                elementOrigin[groupAxis] = elementStart;\n                elementOrigin[groupsAxis] = alignStart(bbox.size[groupsSizeField], groupBox, options.alignItems, groupsAxis, groupsSizeField);\n                translateToPoint(elementOrigin, bbox, element);\n                elementStart += bbox.size[sizeField] + options.spacing;\n              };\n\n              for (var groupIdx = 0; groupIdx < groups.length; groupIdx++) {\n                group = groups[groupIdx];\n                groupOrigin[groupAxis] = elementStart = this$1.justifyAlign(group.size, rect, options.justifyContent, groupAxis, sizeField);\n                groupOrigin[groupsAxis] = groupStart;\n                size[sizeField] = group.size;\n                size[groupsSizeField] = group.lineSize;\n                groupBox = new Rect(groupOrigin, size);\n                this$1.forEach(group.bboxes, arrangeElements);\n                groupStart += group.lineSize + options.lineSpacing;\n              }\n\n              if (!options.wrap && group.size > rect.size[sizeField]) {\n                var scale = rect.size[sizeField] / groupBox.size[sizeField];\n                var scaledStart = groupBox.topLeft().scale(scale, scale);\n                var scaledSize = groupBox.size[groupsSizeField] * scale;\n                var newStart = alignStart(scaledSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n                var transform = transform$1();\n\n                if (groupAxis === \"x\") {\n                  transform.translate(rect.origin.x - scaledStart.x, newStart - scaledStart.y);\n                } else {\n                  transform.translate(newStart - scaledStart.x, rect.origin.y - scaledStart.y);\n                }\n\n                transform.scale(scale, scale);\n                this.transform(transform);\n              }\n            };\n\n            Layout.prototype._initGroups = function _initGroups() {\n              var this$1 = this;\n              var ref = this;\n              var options = ref.options;\n              var children = ref.children;\n              var lineSpacing = options.lineSpacing;\n              var wrap = options.wrap;\n              var spacing = options.spacing;\n              var sizeField = this._fieldMap.sizeField;\n\n              var group = this._newGroup();\n\n              var groups = [];\n\n              var addGroup = function () {\n                groups.push(group);\n                groupsSize += group.lineSize + lineSpacing;\n              };\n\n              var groupsSize = -lineSpacing;\n\n              for (var idx = 0; idx < children.length; idx++) {\n                var element = children[idx];\n                var bbox = children[idx].clippedBBox();\n\n                if (element.visible() && bbox) {\n                  if (wrap && group.size + bbox.size[sizeField] + spacing > this$1._rect.size[sizeField]) {\n                    if (group.bboxes.length === 0) {\n                      this$1._addToGroup(group, bbox, element);\n\n                      addGroup();\n                      group = this$1._newGroup();\n                    } else {\n                      addGroup();\n                      group = this$1._newGroup();\n\n                      this$1._addToGroup(group, bbox, element);\n                    }\n                  } else {\n                    this$1._addToGroup(group, bbox, element);\n                  }\n                }\n              }\n\n              if (group.bboxes.length) {\n                addGroup();\n              }\n\n              return {\n                groups: groups,\n                groupsSize: groupsSize\n              };\n            };\n\n            Layout.prototype._addToGroup = function _addToGroup(group, bbox, element) {\n              group.size += bbox.size[this._fieldMap.sizeField] + this.options.spacing;\n              group.lineSize = Math.max(bbox.size[this._fieldMap.groupsSizeField], group.lineSize);\n              group.bboxes.push(bbox);\n              group.elements.push(element);\n            };\n\n            Layout.prototype._newGroup = function _newGroup() {\n              return {\n                lineSize: 0,\n                size: -this.options.spacing,\n                bboxes: [],\n                elements: []\n              };\n            };\n\n            return Layout;\n          }(Group);\n\n          var Rect$2 = function (superclass) {\n            function Rect$$1(geometry, options) {\n              if (geometry === void 0) {\n                geometry = new Rect();\n              }\n\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.geometry(geometry);\n\n              if (!defined(this.options.stroke)) {\n                this.stroke(\"#000\");\n              }\n            }\n\n            extendStatic(Rect$$1, superclass);\n            Rect$$1.prototype = Object.create(superclass && superclass.prototype);\n            Rect$$1.prototype.constructor = Rect$$1;\n            Rect$$1.fn = Rect$$1.prototype;\n            Rect$$1.fn.init = Rect$$1.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Rect\";\n            };\n\n            Rect$$1.prototype._bbox = function _bbox(matrix) {\n              return this._geometry.bbox(matrix);\n            };\n\n            Rect$$1.prototype.rawBBox = function rawBBox() {\n              return this._geometry.bbox();\n            };\n\n            Rect$$1.prototype._containsPoint = function _containsPoint(point) {\n              return this._geometry.containsPoint(point);\n            };\n\n            Rect$$1.prototype._isOnPath = function _isOnPath(point) {\n              return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n            };\n\n            Object.defineProperties(Rect$$1.prototype, prototypeAccessors);\n            return Rect$$1;\n          }(paintable(measurable(withGeometry(Element$1))));\n\n          function alignElements(elements, rect, alignment, axis, sizeField) {\n            for (var idx = 0; idx < elements.length; idx++) {\n              var bbox = elements[idx].clippedBBox();\n\n              if (bbox) {\n                var point = bbox.origin.clone();\n                point[axis] = alignStart(bbox.size[sizeField], rect, alignment || \"start\", axis, sizeField);\n                translateToPoint(point, bbox, elements[idx]);\n              }\n            }\n          }\n\n          function align(elements, rect, alignment) {\n            alignElements(elements, rect, alignment, \"x\", \"width\");\n          }\n\n          function vAlign(elements, rect, alignment) {\n            alignElements(elements, rect, alignment, \"y\", \"height\");\n          }\n\n          function stackElements(elements, stackAxis, otherAxis, sizeField) {\n            if (elements.length > 1) {\n              var origin = new Point();\n              var previousBBox = elements[0].bbox;\n\n              for (var idx = 1; idx < elements.length; idx++) {\n                var element = elements[idx].element;\n                var bbox = elements[idx].bbox;\n                origin[stackAxis] = previousBBox.origin[stackAxis] + previousBBox.size[sizeField];\n                origin[otherAxis] = bbox.origin[otherAxis];\n                translateToPoint(origin, bbox, element);\n                bbox.origin[stackAxis] = origin[stackAxis];\n                previousBBox = bbox;\n              }\n            }\n          }\n\n          function createStackElements(elements) {\n            var stackElements = [];\n\n            for (var idx = 0; idx < elements.length; idx++) {\n              var element = elements[idx];\n              var bbox = element.clippedBBox();\n\n              if (bbox) {\n                stackElements.push({\n                  element: element,\n                  bbox: bbox\n                });\n              }\n            }\n\n            return stackElements;\n          }\n\n          function stack(elements) {\n            stackElements(createStackElements(elements), \"x\", \"y\", \"width\");\n          }\n\n          function vStack(elements) {\n            stackElements(createStackElements(elements), \"y\", \"x\", \"height\");\n          }\n\n          function getStacks(elements, rect, sizeField) {\n            var maxSize = rect.size[sizeField];\n            var stacks = [];\n            var stack = [];\n            var stackSize = 0;\n            var element, bbox;\n\n            var addElementToStack = function () {\n              stack.push({\n                element: element,\n                bbox: bbox\n              });\n            };\n\n            for (var idx = 0; idx < elements.length; idx++) {\n              element = elements[idx];\n              bbox = element.clippedBBox();\n\n              if (bbox) {\n                var size = bbox.size[sizeField];\n\n                if (stackSize + size > maxSize) {\n                  if (stack.length) {\n                    stacks.push(stack);\n                    stack = [];\n                    addElementToStack();\n                    stackSize = size;\n                  } else {\n                    addElementToStack();\n                    stacks.push(stack);\n                    stack = [];\n                    stackSize = 0;\n                  }\n                } else {\n                  addElementToStack();\n                  stackSize += size;\n                }\n              }\n            }\n\n            if (stack.length) {\n              stacks.push(stack);\n            }\n\n            return stacks;\n          }\n\n          function wrapElements(elements, rect, axis, otherAxis, sizeField) {\n            var stacks = getStacks(elements, rect, sizeField);\n            var origin = rect.origin.clone();\n            var result = [];\n\n            for (var idx = 0; idx < stacks.length; idx++) {\n              var stack = stacks[idx];\n              var startElement = stack[0];\n              origin[otherAxis] = startElement.bbox.origin[otherAxis];\n              translateToPoint(origin, startElement.bbox, startElement.element);\n              startElement.bbox.origin[axis] = origin[axis];\n              stackElements(stack, axis, otherAxis, sizeField);\n              result.push([]);\n\n              for (var elementIdx = 0; elementIdx < stack.length; elementIdx++) {\n                result[idx].push(stack[elementIdx].element);\n              }\n            }\n\n            return result;\n          }\n\n          function wrap(elements, rect) {\n            return wrapElements(elements, rect, \"x\", \"y\", \"width\");\n          }\n\n          function vWrap(elements, rect) {\n            return wrapElements(elements, rect, \"y\", \"x\", \"height\");\n          }\n\n          function fit(element, rect) {\n            var bbox = element.clippedBBox();\n\n            if (bbox) {\n              var elementSize = bbox.size;\n              var rectSize = rect.size;\n\n              if (rectSize.width < elementSize.width || rectSize.height < elementSize.height) {\n                var scale = Math.min(rectSize.width / elementSize.width, rectSize.height / elementSize.height);\n                var transform = element.transform() || transform$1();\n                transform.scale(scale, scale);\n                element.transform(transform);\n              }\n            }\n          }\n\n          var StopsArray = function (ElementsArray$$1) {\n            function StopsArray() {\n              ElementsArray$$1.apply(this, arguments);\n            }\n\n            extendStatic(StopsArray, ElementsArray$$1);\n            StopsArray.prototype = Object.create(ElementsArray$$1 && ElementsArray$$1.prototype);\n            StopsArray.prototype.constructor = StopsArray;\n            StopsArray.fn = StopsArray.prototype;\n            StopsArray.fn.init = StopsArray.fn.constructor;\n\n            StopsArray.prototype._change = function _change() {\n              this.optionsChange({\n                field: \"stops\"\n              });\n            };\n\n            return StopsArray;\n          }(ElementsArray);\n\n          function optionsAccessor(name) {\n            return function (value) {\n              if (defined(value)) {\n                this.options.set(name, value);\n                return this;\n              }\n\n              return this.options.get(name);\n            };\n          }\n\n          function defineOptionsAccessors(fn, names) {\n            for (var i = 0; i < names.length; i++) {\n              fn[names[i]] = optionsAccessor(names[i]);\n            }\n          }\n\n          var withOptions = function (TBase, names) {\n            var result = function (TBase) {\n              function result() {\n                TBase.apply(this, arguments);\n              }\n\n              extendStatic(result, TBase);\n              result.prototype = Object.create(TBase && TBase.prototype);\n              result.prototype.constructor = result;\n              result.fn = result.prototype;\n              result.fn.init = result.fn.constructor;\n              return result;\n            }(TBase);\n\n            defineOptionsAccessors(result.prototype, names);\n            return result;\n          };\n\n          var options = [\"offset\", \"color\", \"opacity\"];\n\n          var GradientStop = function (superclass) {\n            function GradientStop(offset, color, opacity) {\n              superclass.call(this);\n              this.options = new OptionsStore({\n                offset: offset,\n                color: color,\n                opacity: defined(opacity) ? opacity : 1\n              });\n              this.options.addObserver(this);\n            }\n\n            extendStatic(GradientStop, superclass);\n            GradientStop.prototype = Object.create(superclass && superclass.prototype);\n            GradientStop.prototype.constructor = GradientStop;\n            GradientStop.fn = GradientStop.prototype;\n            GradientStop.fn.init = GradientStop.fn.constructor;\n\n            GradientStop.create = function create(arg) {\n              if (defined(arg)) {\n                var stop;\n\n                if (arg instanceof GradientStop) {\n                  stop = arg;\n                } else if (arg.length > 1) {\n                  stop = new GradientStop(arg[0], arg[1], arg[2]);\n                } else {\n                  stop = new GradientStop(arg.offset, arg.color, arg.opacity);\n                }\n\n                return stop;\n              }\n            };\n\n            return GradientStop;\n          }(withOptions(HasObservers, options));\n\n          var Gradient = function (HasObservers$$1) {\n            function Gradient(options) {\n              if (options === void 0) {\n                options = {};\n              }\n\n              HasObservers$$1.call(this);\n              this.stops = new StopsArray(this._createStops(options.stops));\n              this.stops.addObserver(this);\n              this._userSpace = options.userSpace;\n              this.id = definitionId();\n            }\n\n            extendStatic(Gradient, HasObservers$$1);\n            Gradient.prototype = Object.create(HasObservers$$1 && HasObservers$$1.prototype);\n            Gradient.prototype.constructor = Gradient;\n            Gradient.fn = Gradient.prototype;\n            Gradient.fn.init = Gradient.fn.constructor;\n            var prototypeAccessors = {\n              nodeType: {}\n            };\n\n            prototypeAccessors.nodeType.get = function () {\n              return \"Gradient\";\n            };\n\n            Gradient.prototype.userSpace = function userSpace(value) {\n              if (defined(value)) {\n                this._userSpace = value;\n                this.optionsChange();\n                return this;\n              }\n\n              return this._userSpace;\n            };\n\n            Gradient.prototype._createStops = function _createStops(stops) {\n              if (stops === void 0) {\n                stops = [];\n              }\n\n              var result = [];\n\n              for (var idx = 0; idx < stops.length; idx++) {\n                result.push(GradientStop.create(stops[idx]));\n              }\n\n              return result;\n            };\n\n            Gradient.prototype.addStop = function addStop(offset, color, opacity) {\n              this.stops.push(new GradientStop(offset, color, opacity));\n            };\n\n            Gradient.prototype.removeStop = function removeStop(stop) {\n              var index = this.stops.indexOf(stop);\n\n              if (index >= 0) {\n                this.stops.splice(index, 1);\n              }\n            };\n\n            Gradient.prototype.optionsChange = function optionsChange(e) {\n              this.trigger(\"optionsChange\", {\n                field: \"gradient\" + (e ? \".\" + e.field : \"\"),\n                value: this\n              });\n            };\n\n            Gradient.prototype.geometryChange = function geometryChange() {\n              this.optionsChange();\n            };\n\n            Object.defineProperties(Gradient.prototype, prototypeAccessors);\n            return Gradient;\n          }(HasObservers);\n\n          var points$1 = [\"start\", \"end\"];\n\n          var LinearGradient = function (superclass) {\n            function LinearGradient(options) {\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.start(options.start || new Point());\n              this.end(options.end || new Point(1, 0));\n            }\n\n            extendStatic(LinearGradient, superclass);\n            LinearGradient.prototype = Object.create(superclass && superclass.prototype);\n            LinearGradient.prototype.constructor = LinearGradient;\n            LinearGradient.fn = LinearGradient.prototype;\n            LinearGradient.fn.init = LinearGradient.fn.constructor;\n            return LinearGradient;\n          }(withPoints(Gradient, points$1));\n\n          var RadialGradient = function (superclass) {\n            function RadialGradient(options) {\n              if (options === void 0) {\n                options = {};\n              }\n\n              superclass.call(this, options);\n              this.center(options.center || new Point());\n              this._radius = defined(options.radius) ? options.radius : 1;\n              this._fallbackFill = options.fallbackFill;\n            }\n\n            extendStatic(RadialGradient, superclass);\n            RadialGradient.prototype = Object.create(superclass && superclass.prototype);\n            RadialGradient.prototype.constructor = RadialGradient;\n            RadialGradient.fn = RadialGradient.prototype;\n            RadialGradient.fn.init = RadialGradient.fn.constructor;\n\n            RadialGradient.prototype.radius = function radius(value) {\n              if (defined(value)) {\n                this._radius = value;\n                this.geometryChange();\n                return this;\n              }\n\n              return this._radius;\n            };\n\n            RadialGradient.prototype.fallbackFill = function fallbackFill(value) {\n              if (defined(value)) {\n                this._fallbackFill = value;\n                this.optionsChange();\n                return this;\n              }\n\n              return this._fallbackFill;\n            };\n\n            return RadialGradient;\n          }(withPoints(Gradient, [\"center\"]));\n\n          function swing(position) {\n            return 0.5 - Math.cos(position * Math.PI) / 2;\n          }\n\n          function linear(position) {\n            return position;\n          }\n\n          function easeOutElastic(position, time, start, diff) {\n            var s = 1.70158,\n                p = 0,\n                a = diff;\n\n            if (position === 0) {\n              return start;\n            }\n\n            if (position === 1) {\n              return start + diff;\n            }\n\n            if (!p) {\n              p = 0.5;\n            }\n\n            if (a < Math.abs(diff)) {\n              a = diff;\n              s = p / 4;\n            } else {\n              s = p / (2 * Math.PI) * Math.asin(diff / a);\n            }\n\n            return a * Math.pow(2, -10 * position) * Math.sin((Number(position) - s) * (1.1 * Math.PI) / p) + diff + start;\n          }\n\n          var easingFunctions = {\n            swing: swing,\n            linear: linear,\n            easeOutElastic: easeOutElastic\n          };\n          var instance;\n\n          var AnimationFactory = function (Class$$1) {\n            function AnimationFactory() {\n              Class$$1.call(this);\n              this._items = [];\n            }\n\n            extendStatic(AnimationFactory, Class$$1);\n            AnimationFactory.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            AnimationFactory.prototype.constructor = AnimationFactory;\n            AnimationFactory.fn = AnimationFactory.prototype;\n            AnimationFactory.fn.init = AnimationFactory.fn.constructor;\n            var staticAccessors = {\n              current: {}\n            };\n\n            staticAccessors.current.get = function () {\n              if (!instance) {\n                instance = new AnimationFactory();\n              }\n\n              return instance;\n            };\n\n            AnimationFactory.prototype.register = function register(name, type) {\n              this._items.push({\n                name: name,\n                type: type\n              });\n            };\n\n            AnimationFactory.prototype.create = function create(element, options) {\n              var items = this._items;\n              var match;\n\n              if (options && options.type) {\n                var type = options.type.toLowerCase();\n\n                for (var i = 0; i < items.length; i++) {\n                  if (items[i].name.toLowerCase() === type) {\n                    match = items[i];\n                    break;\n                  }\n                }\n              }\n\n              if (match) {\n                return new match.type(element, options);\n              }\n            };\n\n            Object.defineProperties(AnimationFactory, staticAccessors);\n            return AnimationFactory;\n          }(Class);\n\n          var Animation = function (Class$$1) {\n            function Animation(element, options) {\n              Class$$1.call(this);\n              this.options = $.extend({}, this.options, options);\n              this.element = element;\n            }\n\n            extendStatic(Animation, Class$$1);\n            Animation.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            Animation.prototype.constructor = Animation;\n            Animation.fn = Animation.prototype;\n            Animation.fn.init = Animation.fn.constructor;\n            var prototypeAccessors = {\n              options: {}\n            };\n\n            Animation.create = function create(type, element, options) {\n              return AnimationFactory.current.create(type, element, options);\n            };\n\n            prototypeAccessors.options.get = function () {\n              return this._options || {\n                duration: 500,\n                easing: \"swing\"\n              };\n            };\n\n            prototypeAccessors.options.set = function (value) {\n              this._options = value;\n            };\n\n            Animation.prototype.setup = function setup() {};\n\n            Animation.prototype.step = function step() {};\n\n            Animation.prototype.play = function play() {\n              var this$1 = this;\n              var options = this.options;\n              var duration = options.duration;\n              var delay = options.delay;\n\n              if (delay === void 0) {\n                delay = 0;\n              }\n\n              var easing = easingFunctions[options.easing];\n              var start = now() + delay;\n              var finish = start + duration;\n\n              if (duration === 0) {\n                this.step(1);\n                this.abort();\n              } else {\n                setTimeout(function () {\n                  var loop = function () {\n                    if (this$1._stopped) {\n                      return;\n                    }\n\n                    var wallTime = now();\n                    var time = limitValue(wallTime - start, 0, duration);\n                    var position = time / duration;\n                    var easingPosition = easing(position, time, 0, 1, duration);\n                    this$1.step(easingPosition);\n\n                    if (wallTime < finish) {\n                      kendo.animationFrame(loop);\n                    } else {\n                      this$1.abort();\n                    }\n                  };\n\n                  loop();\n                }, delay);\n              }\n            };\n\n            Animation.prototype.abort = function abort() {\n              this._stopped = true;\n            };\n\n            Animation.prototype.destroy = function destroy() {\n              this.abort();\n            };\n\n            Object.defineProperties(Animation.prototype, prototypeAccessors);\n            return Animation;\n          }(Class);\n\n          var instance$1;\n\n          var PathParser = function (Class$$1) {\n            function PathParser() {\n              Class$$1.apply(this, arguments);\n            }\n\n            extendStatic(PathParser, Class$$1);\n            PathParser.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            PathParser.prototype.constructor = PathParser;\n            PathParser.fn = PathParser.prototype;\n            PathParser.fn.init = PathParser.fn.constructor;\n            var staticAccessors = {\n              current: {}\n            };\n\n            staticAccessors.current.get = function () {\n              if (!instance$1) {\n                instance$1 = new PathParser();\n              }\n\n              return instance$1;\n            };\n\n            PathParser.prototype.parse = function parse(str, options) {\n              var multiPath = new MultiPath(options);\n              return parsePath(multiPath, str);\n            };\n\n            Object.defineProperties(PathParser, staticAccessors);\n            return PathParser;\n          }(Class);\n\n          var BaseNode = function (Class$$1) {\n            function BaseNode(srcElement) {\n              Class$$1.call(this);\n              this.childNodes = [];\n              this.parent = null;\n\n              if (srcElement) {\n                this.srcElement = srcElement;\n                this.observe();\n              }\n            }\n\n            extendStatic(BaseNode, Class$$1);\n            BaseNode.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            BaseNode.prototype.constructor = BaseNode;\n            BaseNode.fn = BaseNode.prototype;\n            BaseNode.fn.init = BaseNode.fn.constructor;\n\n            BaseNode.prototype.destroy = function destroy() {\n              var this$1 = this;\n\n              if (this.srcElement) {\n                this.srcElement.removeObserver(this);\n              }\n\n              var children = this.childNodes;\n\n              for (var i = 0; i < children.length; i++) {\n                this$1.childNodes[i].destroy();\n              }\n\n              this.parent = null;\n            };\n\n            BaseNode.prototype.load = function load() {};\n\n            BaseNode.prototype.observe = function observe() {\n              if (this.srcElement) {\n                this.srcElement.addObserver(this);\n              }\n            };\n\n            BaseNode.prototype.append = function append(node) {\n              this.childNodes.push(node);\n              node.parent = this;\n            };\n\n            BaseNode.prototype.insertAt = function insertAt(node, pos) {\n              this.childNodes.splice(pos, 0, node);\n              node.parent = this;\n            };\n\n            BaseNode.prototype.remove = function remove(index, count) {\n              var this$1 = this;\n              var end = index + count;\n\n              for (var i = index; i < end; i++) {\n                this$1.childNodes[i].removeSelf();\n              }\n\n              this.childNodes.splice(index, count);\n            };\n\n            BaseNode.prototype.removeSelf = function removeSelf() {\n              this.clear();\n              this.destroy();\n            };\n\n            BaseNode.prototype.clear = function clear() {\n              this.remove(0, this.childNodes.length);\n            };\n\n            BaseNode.prototype.invalidate = function invalidate() {\n              if (this.parent) {\n                this.parent.invalidate();\n              }\n            };\n\n            BaseNode.prototype.geometryChange = function geometryChange() {\n              this.invalidate();\n            };\n\n            BaseNode.prototype.optionsChange = function optionsChange() {\n              this.invalidate();\n            };\n\n            BaseNode.prototype.childrenChange = function childrenChange(e) {\n              if (e.action === \"add\") {\n                this.load(e.items, e.index);\n              } else if (e.action === \"remove\") {\n                this.remove(e.index, e.items.length);\n              }\n\n              this.invalidate();\n            };\n\n            return BaseNode;\n          }(Class);\n\n          var events = [\"click\", \"mouseenter\", \"mouseleave\", \"mousemove\", \"resize\"];\n\n          var Surface$2 = function (Observable$$1) {\n            function Surface(element, options) {\n              Observable$$1.call(this);\n              this.options = $.extend({}, options);\n              this.element = element;\n              this.element._kendoExportVisual = this.exportVisual.bind(this);\n              this._click = this._handler(\"click\");\n              this._mouseenter = this._handler(\"mouseenter\");\n              this._mouseleave = this._handler(\"mouseleave\");\n              this._mousemove = this._handler(\"mousemove\");\n              this._visual = new Group();\n              elementSize(element, this.options);\n              this.bind(events, this.options);\n\n              this._enableTracking();\n            }\n\n            extendStatic(Surface, Observable$$1);\n            Surface.prototype = Object.create(Observable$$1 && Observable$$1.prototype);\n            Surface.prototype.constructor = Surface;\n            Surface.fn = Surface.prototype;\n            Surface.fn.init = Surface.fn.constructor;\n\n            Surface.prototype.draw = function draw(element) {\n              this._visual.children.push(element);\n            };\n\n            Surface.prototype.clear = function clear() {\n              this._visual.children = [];\n            };\n\n            Surface.prototype.destroy = function destroy() {\n              this._visual = null;\n              this.element._kendoExportVisual = null;\n              this.unbind();\n            };\n\n            Surface.prototype.eventTarget = function eventTarget(e) {\n              var this$1 = this;\n              var domNode = eventElement(e);\n              var node;\n\n              while (!node && domNode) {\n                node = domNode._kendoNode;\n\n                if (domNode === this$1.element) {\n                  break;\n                }\n\n                domNode = domNode.parentElement;\n              }\n\n              if (node) {\n                return node.srcElement;\n              }\n            };\n\n            Surface.prototype.exportVisual = function exportVisual() {\n              return this._visual;\n            };\n\n            Surface.prototype.getSize = function getSize() {\n              return elementSize(this.element);\n            };\n\n            Surface.prototype.currentSize = function currentSize(size) {\n              if (size) {\n                this._size = size;\n              } else {\n                return this._size;\n              }\n            };\n\n            Surface.prototype.setSize = function setSize(size) {\n              elementSize(this.element, size);\n              this.currentSize(size);\n\n              this._resize();\n            };\n\n            Surface.prototype.resize = function resize(force) {\n              var size = this.getSize();\n              var currentSize = this.currentSize();\n\n              if (force || (size.width > 0 || size.height > 0) && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n                this.currentSize(size);\n\n                this._resize(size, force);\n\n                this.trigger(\"resize\", size);\n              }\n            };\n\n            Surface.prototype.size = function size(value) {\n              if (!value) {\n                return this.getSize();\n              }\n\n              this.setSize(value);\n            };\n\n            Surface.prototype.suspendTracking = function suspendTracking() {\n              this._suspendedTracking = true;\n            };\n\n            Surface.prototype.resumeTracking = function resumeTracking() {\n              this._suspendedTracking = false;\n            };\n\n            Surface.prototype._enableTracking = function _enableTracking() {};\n\n            Surface.prototype._resize = function _resize() {};\n\n            Surface.prototype._handler = function _handler(eventName) {\n              var this$1 = this;\n              return function (e) {\n                var node = this$1.eventTarget(e);\n\n                if (node && !this$1._suspendedTracking) {\n                  this$1.trigger(eventName, {\n                    element: node,\n                    originalEvent: e,\n                    type: eventName\n                  });\n                }\n              };\n            };\n\n            Surface.prototype._elementOffset = function _elementOffset() {\n              var element = this.element;\n              var padding = elementPadding(element);\n              var ref = elementOffset(element);\n              var left = ref.left;\n              var top = ref.top;\n              return {\n                left: left + padding.left,\n                top: top + padding.top\n              };\n            };\n\n            Surface.prototype._surfacePoint = function _surfacePoint(e) {\n              var offset = this._elementOffset();\n\n              var coord = eventCoordinates(e);\n              var x = coord.x - offset.left;\n              var y = coord.y - offset.top;\n              var inverseTransform = elementScale(this.element).invert();\n              var point = new Point(x, y).transform(inverseTransform);\n              return point;\n            };\n\n            return Surface;\n          }(kendo.Observable);\n\n          function renderAttr(name, value) {\n            return defined(value) && value !== null ? \" \" + name + \"=\\\"\" + value + \"\\\" \" : \"\";\n          }\n\n          function renderAllAttr(attrs) {\n            var output = \"\";\n\n            for (var i = 0; i < attrs.length; i++) {\n              output += renderAttr(attrs[i][0], attrs[i][1]);\n            }\n\n            return output;\n          }\n\n          function renderStyle(attrs) {\n            var output = \"\";\n\n            for (var i = 0; i < attrs.length; i++) {\n              var value = attrs[i][1];\n\n              if (defined(value)) {\n                output += attrs[i][0] + \":\" + value + \";\";\n              }\n            }\n\n            if (output !== \"\") {\n              return output;\n            }\n          }\n\n          var NODE_MAP = {};\n          var SVG_NS = \"http://www.w3.org/2000/svg\";\n          var NONE = \"none\";\n\n          var renderSVG = function (container, svg) {\n            container.innerHTML = svg;\n          };\n\n          if (typeof document !== \"undefined\") {\n            var testFragment = \"<svg xmlns='\" + SVG_NS + \"'></svg>\";\n            var testContainer = document.createElement(\"div\");\n            var hasParser = typeof DOMParser !== \"undefined\";\n            testContainer.innerHTML = testFragment;\n\n            if (hasParser && testContainer.firstChild.namespaceURI !== SVG_NS) {\n              renderSVG = function (container, svg) {\n                var parser = new DOMParser();\n                var chartDoc = parser.parseFromString(svg, \"text/xml\");\n                var importedDoc = document.adoptNode(chartDoc.documentElement);\n                container.innerHTML = \"\";\n                container.appendChild(importedDoc);\n              };\n            }\n          }\n\n          var renderSVG$1 = renderSVG;\n          var TRANSFORM = \"transform\";\n          var DefinitionMap = {\n            clip: \"clip-path\",\n            fill: \"fill\"\n          };\n\n          function isDefinition(type, value) {\n            return type === \"clip\" || type === \"fill\" && (!value || value.nodeType === \"Gradient\");\n          }\n\n          function baseUrl() {\n            var base = document.getElementsByTagName(\"base\")[0];\n            var href = document.location.href;\n            var url = \"\";\n\n            if (base && !(supportBrowser || {}).msie) {\n              var hashIndex = href.indexOf(\"#\");\n\n              if (hashIndex !== -1) {\n                href = href.substring(0, hashIndex);\n              }\n\n              url = href;\n            }\n\n            return url;\n          }\n\n          var Node = function (BaseNode$$1) {\n            function Node(srcElement, options) {\n              BaseNode$$1.call(this, srcElement);\n              this.definitions = {};\n              this.options = options;\n            }\n\n            extendStatic(Node, BaseNode$$1);\n            Node.prototype = Object.create(BaseNode$$1 && BaseNode$$1.prototype);\n            Node.prototype.constructor = Node;\n            Node.fn = Node.prototype;\n            Node.fn.init = Node.fn.constructor;\n\n            Node.prototype.destroy = function destroy() {\n              if (this.element) {\n                this.element._kendoNode = null;\n                this.element = null;\n              }\n\n              this.clearDefinitions();\n              BaseNode$$1.prototype.destroy.call(this);\n            };\n\n            Node.prototype.load = function load(elements, pos) {\n              var this$1 = this;\n\n              for (var i = 0; i < elements.length; i++) {\n                var srcElement = elements[i];\n                var children = srcElement.children;\n                var childNode = new NODE_MAP[srcElement.nodeType](srcElement, this$1.options);\n\n                if (defined(pos)) {\n                  this$1.insertAt(childNode, pos);\n                } else {\n                  this$1.append(childNode);\n                }\n\n                childNode.createDefinitions();\n\n                if (children && children.length > 0) {\n                  childNode.load(children);\n                }\n\n                var element = this$1.element;\n\n                if (element) {\n                  childNode.attachTo(element, pos);\n                }\n              }\n            };\n\n            Node.prototype.root = function root() {\n              var root = this;\n\n              while (root.parent) {\n                root = root.parent;\n              }\n\n              return root;\n            };\n\n            Node.prototype.attachTo = function attachTo(domElement, pos) {\n              var container = document.createElement(\"div\");\n              renderSVG$1(container, \"<svg xmlns='\" + SVG_NS + \"' version='1.1'>\" + this.render() + \"</svg>\");\n              var element = container.firstChild.firstChild;\n\n              if (element) {\n                if (defined(pos)) {\n                  domElement.insertBefore(element, domElement.childNodes[pos] || null);\n                } else {\n                  domElement.appendChild(element);\n                }\n\n                this.setElement(element);\n              }\n            };\n\n            Node.prototype.setElement = function setElement(element) {\n              if (this.element) {\n                this.element._kendoNode = null;\n              }\n\n              this.element = element;\n              this.element._kendoNode = this;\n              var nodes = this.childNodes;\n\n              for (var i = 0; i < nodes.length; i++) {\n                var childElement = element.childNodes[i];\n                nodes[i].setElement(childElement);\n              }\n            };\n\n            Node.prototype.clear = function clear() {\n              this.clearDefinitions();\n\n              if (this.element) {\n                this.element.innerHTML = \"\";\n              }\n\n              var children = this.childNodes;\n\n              for (var i = 0; i < children.length; i++) {\n                children[i].destroy();\n              }\n\n              this.childNodes = [];\n            };\n\n            Node.prototype.removeSelf = function removeSelf() {\n              if (this.element) {\n                var parentNode = this.element.parentNode;\n\n                if (parentNode) {\n                  parentNode.removeChild(this.element);\n                }\n\n                this.element = null;\n              }\n\n              BaseNode$$1.prototype.removeSelf.call(this);\n            };\n\n            Node.prototype.template = function template() {\n              return this.renderChildren();\n            };\n\n            Node.prototype.render = function render() {\n              return this.template();\n            };\n\n            Node.prototype.renderChildren = function renderChildren() {\n              var nodes = this.childNodes;\n              var output = \"\";\n\n              for (var i = 0; i < nodes.length; i++) {\n                output += nodes[i].render();\n              }\n\n              return output;\n            };\n\n            Node.prototype.optionsChange = function optionsChange(e) {\n              var field = e.field;\n              var value = e.value;\n\n              if (field === \"visible\") {\n                this.css(\"display\", value ? \"\" : NONE);\n              } else if (DefinitionMap[field] && isDefinition(field, value)) {\n                this.updateDefinition(field, value);\n              } else if (field === \"opacity\") {\n                this.attr(\"opacity\", value);\n              } else if (field === \"cursor\") {\n                this.css(\"cursor\", value);\n              } else if (field === \"id\") {\n                if (value) {\n                  this.attr(\"id\", value);\n                } else {\n                  this.removeAttr(\"id\");\n                }\n              }\n\n              BaseNode$$1.prototype.optionsChange.call(this, e);\n            };\n\n            Node.prototype.attr = function attr(name, value) {\n              if (this.element) {\n                this.element.setAttribute(name, value);\n              }\n            };\n\n            Node.prototype.allAttr = function allAttr(attrs) {\n              var this$1 = this;\n\n              for (var i = 0; i < attrs.length; i++) {\n                this$1.attr(attrs[i][0], attrs[i][1]);\n              }\n            };\n\n            Node.prototype.css = function css(name, value) {\n              if (this.element) {\n                this.element.style[name] = value;\n              }\n            };\n\n            Node.prototype.allCss = function allCss(styles) {\n              var this$1 = this;\n\n              for (var i = 0; i < styles.length; i++) {\n                this$1.css(styles[i][0], styles[i][1]);\n              }\n            };\n\n            Node.prototype.removeAttr = function removeAttr(name) {\n              if (this.element) {\n                this.element.removeAttribute(name);\n              }\n            };\n\n            Node.prototype.mapTransform = function mapTransform(transform) {\n              var attrs = [];\n\n              if (transform) {\n                attrs.push([TRANSFORM, \"matrix(\" + transform.matrix().toString(6) + \")\"]);\n              }\n\n              return attrs;\n            };\n\n            Node.prototype.renderTransform = function renderTransform() {\n              return renderAllAttr(this.mapTransform(this.srcElement.transform()));\n            };\n\n            Node.prototype.transformChange = function transformChange(value) {\n              if (value) {\n                this.allAttr(this.mapTransform(value));\n              } else {\n                this.removeAttr(TRANSFORM);\n              }\n            };\n\n            Node.prototype.mapStyle = function mapStyle() {\n              var options = this.srcElement.options;\n              var style = [[\"cursor\", options.cursor]];\n\n              if (options.visible === false) {\n                style.push([\"display\", NONE]);\n              }\n\n              return style;\n            };\n\n            Node.prototype.renderStyle = function renderStyle$1() {\n              return renderAttr(\"style\", renderStyle(this.mapStyle(true)));\n            };\n\n            Node.prototype.renderOpacity = function renderOpacity() {\n              return renderAttr(\"opacity\", this.srcElement.options.opacity);\n            };\n\n            Node.prototype.renderId = function renderId() {\n              return renderAttr(\"id\", this.srcElement.options.id);\n            };\n\n            Node.prototype.createDefinitions = function createDefinitions() {\n              var srcElement = this.srcElement;\n              var definitions = this.definitions;\n\n              if (srcElement) {\n                var options = srcElement.options;\n                var hasDefinitions;\n\n                for (var field in DefinitionMap) {\n                  var definition = options.get(field);\n\n                  if (definition && isDefinition(field, definition)) {\n                    definitions[field] = definition;\n                    hasDefinitions = true;\n                  }\n                }\n\n                if (hasDefinitions) {\n                  this.definitionChange({\n                    action: \"add\",\n                    definitions: definitions\n                  });\n                }\n              }\n            };\n\n            Node.prototype.definitionChange = function definitionChange(e) {\n              if (this.parent) {\n                this.parent.definitionChange(e);\n              }\n            };\n\n            Node.prototype.updateDefinition = function updateDefinition(type, value) {\n              var definitions = this.definitions;\n              var current = definitions[type];\n              var attr = DefinitionMap[type];\n              var definition = {};\n\n              if (current) {\n                definition[type] = current;\n                this.definitionChange({\n                  action: \"remove\",\n                  definitions: definition\n                });\n                delete definitions[type];\n              }\n\n              if (!value) {\n                if (current) {\n                  this.removeAttr(attr);\n                }\n              } else {\n                definition[type] = value;\n                this.definitionChange({\n                  action: \"add\",\n                  definitions: definition\n                });\n                definitions[type] = value;\n                this.attr(attr, this.refUrl(value.id));\n              }\n            };\n\n            Node.prototype.clearDefinitions = function clearDefinitions() {\n              var definitions = this.definitions;\n              this.definitionChange({\n                action: \"remove\",\n                definitions: definitions\n              });\n              this.definitions = {};\n            };\n\n            Node.prototype.renderDefinitions = function renderDefinitions() {\n              return renderAllAttr(this.mapDefinitions());\n            };\n\n            Node.prototype.mapDefinitions = function mapDefinitions() {\n              var this$1 = this;\n              var definitions = this.definitions;\n              var attrs = [];\n\n              for (var field in definitions) {\n                attrs.push([DefinitionMap[field], this$1.refUrl(definitions[field].id)]);\n              }\n\n              return attrs;\n            };\n\n            Node.prototype.refUrl = function refUrl(id) {\n              var skipBaseHref = (this.options || {}).skipBaseHref;\n              var baseHref = this.baseUrl().replace(/'/g, \"\\\\'\");\n              var base = skipBaseHref ? '' : baseHref;\n              return \"url(\" + base + \"#\" + id + \")\";\n            };\n\n            Node.prototype.baseUrl = function baseUrl$1() {\n              return baseUrl();\n            };\n\n            return Node;\n          }(BaseNode);\n\n          var GradientStopNode = function (Node$$1) {\n            function GradientStopNode() {\n              Node$$1.apply(this, arguments);\n            }\n\n            extendStatic(GradientStopNode, Node$$1);\n            GradientStopNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            GradientStopNode.prototype.constructor = GradientStopNode;\n            GradientStopNode.fn = GradientStopNode.prototype;\n            GradientStopNode.fn.init = GradientStopNode.fn.constructor;\n\n            GradientStopNode.prototype.template = function template() {\n              return \"<stop \" + this.renderOffset() + \" \" + this.renderStyle() + \" />\";\n            };\n\n            GradientStopNode.prototype.renderOffset = function renderOffset() {\n              return renderAttr(\"offset\", this.srcElement.offset());\n            };\n\n            GradientStopNode.prototype.mapStyle = function mapStyle() {\n              var srcElement = this.srcElement;\n              return [[\"stop-color\", srcElement.color()], [\"stop-opacity\", srcElement.opacity()]];\n            };\n\n            GradientStopNode.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"offset\") {\n                this.attr(e.field, e.value);\n              } else if (e.field === \"color\" || e.field === \"opacity\") {\n                this.css(\"stop-\" + e.field, e.value);\n              }\n            };\n\n            return GradientStopNode;\n          }(Node);\n\n          var GradientNode = function (Node$$1) {\n            function GradientNode(srcElement) {\n              Node$$1.call(this, srcElement);\n              this.id = srcElement.id;\n              this.loadStops();\n            }\n\n            extendStatic(GradientNode, Node$$1);\n            GradientNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            GradientNode.prototype.constructor = GradientNode;\n            GradientNode.fn = GradientNode.prototype;\n            GradientNode.fn.init = GradientNode.fn.constructor;\n\n            GradientNode.prototype.loadStops = function loadStops() {\n              var this$1 = this;\n              var stops = this.srcElement.stops;\n              var element = this.element;\n\n              for (var idx = 0; idx < stops.length; idx++) {\n                var stopNode = new GradientStopNode(stops[idx]);\n                this$1.append(stopNode);\n\n                if (element) {\n                  stopNode.attachTo(element);\n                }\n              }\n            };\n\n            GradientNode.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"gradient.stops\") {\n                BaseNode.prototype.clear.call(this);\n                this.loadStops();\n              } else if (e.field === \"gradient\") {\n                this.allAttr(this.mapCoordinates());\n              }\n            };\n\n            GradientNode.prototype.renderCoordinates = function renderCoordinates() {\n              return renderAllAttr(this.mapCoordinates());\n            };\n\n            GradientNode.prototype.mapSpace = function mapSpace() {\n              return [\"gradientUnits\", this.srcElement.userSpace() ? \"userSpaceOnUse\" : \"objectBoundingBox\"];\n            };\n\n            return GradientNode;\n          }(Node);\n\n          var LinearGradientNode = function (GradientNode$$1) {\n            function LinearGradientNode() {\n              GradientNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(LinearGradientNode, GradientNode$$1);\n            LinearGradientNode.prototype = Object.create(GradientNode$$1 && GradientNode$$1.prototype);\n            LinearGradientNode.prototype.constructor = LinearGradientNode;\n            LinearGradientNode.fn = LinearGradientNode.prototype;\n            LinearGradientNode.fn.init = LinearGradientNode.fn.constructor;\n\n            LinearGradientNode.prototype.template = function template() {\n              return \"<linearGradient id='\" + this.id + \"' \" + this.renderCoordinates() + \">\" + this.renderChildren() + \"</linearGradient>\";\n            };\n\n            LinearGradientNode.prototype.mapCoordinates = function mapCoordinates() {\n              var srcElement = this.srcElement;\n              var start = srcElement.start();\n              var end = srcElement.end();\n              var attrs = [[\"x1\", start.x], [\"y1\", start.y], [\"x2\", end.x], [\"y2\", end.y], this.mapSpace()];\n              return attrs;\n            };\n\n            return LinearGradientNode;\n          }(GradientNode);\n\n          var RadialGradientNode = function (GradientNode$$1) {\n            function RadialGradientNode() {\n              GradientNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(RadialGradientNode, GradientNode$$1);\n            RadialGradientNode.prototype = Object.create(GradientNode$$1 && GradientNode$$1.prototype);\n            RadialGradientNode.prototype.constructor = RadialGradientNode;\n            RadialGradientNode.fn = RadialGradientNode.prototype;\n            RadialGradientNode.fn.init = RadialGradientNode.fn.constructor;\n\n            RadialGradientNode.prototype.template = function template() {\n              return \"<radialGradient id='\" + this.id + \"' \" + this.renderCoordinates() + \">\" + this.renderChildren() + \"</radialGradient>\";\n            };\n\n            RadialGradientNode.prototype.mapCoordinates = function mapCoordinates() {\n              var srcElement = this.srcElement;\n              var center = srcElement.center();\n              var radius = srcElement.radius();\n              var attrs = [[\"cx\", center.x], [\"cy\", center.y], [\"r\", radius], this.mapSpace()];\n              return attrs;\n            };\n\n            return RadialGradientNode;\n          }(GradientNode);\n\n          var ClipNode = function (Node$$1) {\n            function ClipNode(srcElement) {\n              Node$$1.call(this);\n              this.srcElement = srcElement;\n              this.id = srcElement.id;\n              this.load([srcElement]);\n            }\n\n            extendStatic(ClipNode, Node$$1);\n            ClipNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            ClipNode.prototype.constructor = ClipNode;\n            ClipNode.fn = ClipNode.prototype;\n            ClipNode.fn.init = ClipNode.fn.constructor;\n\n            ClipNode.prototype.template = function template() {\n              return \"<clipPath id='\" + this.id + \"'>\" + this.renderChildren() + \"</clipPath>\";\n            };\n\n            return ClipNode;\n          }(Node);\n\n          var DefinitionNode = function (Node$$1) {\n            function DefinitionNode() {\n              Node$$1.call(this);\n              this.definitionMap = {};\n            }\n\n            extendStatic(DefinitionNode, Node$$1);\n            DefinitionNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            DefinitionNode.prototype.constructor = DefinitionNode;\n            DefinitionNode.fn = DefinitionNode.prototype;\n            DefinitionNode.fn.init = DefinitionNode.fn.constructor;\n\n            DefinitionNode.prototype.attachTo = function attachTo(domElement) {\n              this.element = domElement;\n            };\n\n            DefinitionNode.prototype.template = function template() {\n              return \"<defs>\" + this.renderChildren() + \"</defs>\";\n            };\n\n            DefinitionNode.prototype.definitionChange = function definitionChange(e) {\n              var definitions = e.definitions;\n              var action = e.action;\n\n              if (action === \"add\") {\n                this.addDefinitions(definitions);\n              } else if (action === \"remove\") {\n                this.removeDefinitions(definitions);\n              }\n            };\n\n            DefinitionNode.prototype.createDefinition = function createDefinition(type, item) {\n              var nodeType;\n\n              if (type === \"clip\") {\n                nodeType = ClipNode;\n              } else if (type === \"fill\") {\n                if (item instanceof LinearGradient) {\n                  nodeType = LinearGradientNode;\n                } else if (item instanceof RadialGradient) {\n                  nodeType = RadialGradientNode;\n                }\n              }\n\n              return new nodeType(item);\n            };\n\n            DefinitionNode.prototype.addDefinitions = function addDefinitions(definitions) {\n              var this$1 = this;\n\n              for (var field in definitions) {\n                this$1.addDefinition(field, definitions[field]);\n              }\n            };\n\n            DefinitionNode.prototype.addDefinition = function addDefinition(type, srcElement) {\n              var ref = this;\n              var element = ref.element;\n              var definitionMap = ref.definitionMap;\n              var id = srcElement.id;\n              var mapItem = definitionMap[id];\n\n              if (!mapItem) {\n                var node = this.createDefinition(type, srcElement);\n                definitionMap[id] = {\n                  element: node,\n                  count: 1\n                };\n                this.append(node);\n\n                if (element) {\n                  node.attachTo(this.element);\n                }\n              } else {\n                mapItem.count++;\n              }\n            };\n\n            DefinitionNode.prototype.removeDefinitions = function removeDefinitions(definitions) {\n              var this$1 = this;\n\n              for (var field in definitions) {\n                this$1.removeDefinition(definitions[field]);\n              }\n            };\n\n            DefinitionNode.prototype.removeDefinition = function removeDefinition(srcElement) {\n              var definitionMap = this.definitionMap;\n              var id = srcElement.id;\n              var mapItem = definitionMap[id];\n\n              if (mapItem) {\n                mapItem.count--;\n\n                if (mapItem.count === 0) {\n                  this.remove(this.childNodes.indexOf(mapItem.element), 1);\n                  delete definitionMap[id];\n                }\n              }\n            };\n\n            return DefinitionNode;\n          }(Node);\n\n          var RootNode = function (Node$$1) {\n            function RootNode(options) {\n              Node$$1.call(this);\n              this.options = options;\n              this.defs = new DefinitionNode();\n            }\n\n            extendStatic(RootNode, Node$$1);\n            RootNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            RootNode.prototype.constructor = RootNode;\n            RootNode.fn = RootNode.prototype;\n            RootNode.fn.init = RootNode.fn.constructor;\n\n            RootNode.prototype.attachTo = function attachTo(domElement) {\n              this.element = domElement;\n              this.defs.attachTo(domElement.firstElementChild);\n            };\n\n            RootNode.prototype.clear = function clear() {\n              BaseNode.prototype.clear.call(this);\n            };\n\n            RootNode.prototype.template = function template() {\n              return this.defs.render() + this.renderChildren();\n            };\n\n            RootNode.prototype.definitionChange = function definitionChange(e) {\n              this.defs.definitionChange(e);\n            };\n\n            return RootNode;\n          }(Node);\n\n          var DASH_ARRAYS = {\n            dot: [1.5, 3.5],\n            dash: [4, 3.5],\n            longdash: [8, 3.5],\n            dashdot: [3.5, 3.5, 1.5, 3.5],\n            longdashdot: [8, 3.5, 1.5, 3.5],\n            longdashdotdot: [8, 3.5, 1.5, 3.5, 1.5, 3.5]\n          };\n          var SOLID = \"solid\";\n          var BUTT = \"butt\";\n          var ATTRIBUTE_MAP = {\n            \"fill.opacity\": \"fill-opacity\",\n            \"stroke.color\": \"stroke\",\n            \"stroke.width\": \"stroke-width\",\n            \"stroke.opacity\": \"stroke-opacity\"\n          };\n          var SPACE = \" \";\n\n          var PathNode = function (Node$$1) {\n            function PathNode() {\n              Node$$1.apply(this, arguments);\n            }\n\n            extendStatic(PathNode, Node$$1);\n            PathNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            PathNode.prototype.constructor = PathNode;\n            PathNode.fn = PathNode.prototype;\n            PathNode.fn.init = PathNode.fn.constructor;\n\n            PathNode.prototype.geometryChange = function geometryChange() {\n              this.attr(\"d\", this.renderData());\n              this.invalidate();\n            };\n\n            PathNode.prototype.optionsChange = function optionsChange(e) {\n              switch (e.field) {\n                case \"fill\":\n                  if (e.value) {\n                    this.allAttr(this.mapFill(e.value));\n                  } else {\n                    this.removeAttr(\"fill\");\n                  }\n\n                  break;\n\n                case \"fill.color\":\n                  this.allAttr(this.mapFill({\n                    color: e.value\n                  }));\n                  break;\n\n                case \"stroke\":\n                  if (e.value) {\n                    this.allAttr(this.mapStroke(e.value));\n                  } else {\n                    this.removeAttr(\"stroke\");\n                  }\n\n                  break;\n\n                case \"transform\":\n                  this.transformChange(e.value);\n                  break;\n\n                default:\n                  var name = ATTRIBUTE_MAP[e.field];\n\n                  if (name) {\n                    this.attr(name, e.value);\n                  }\n\n                  break;\n              }\n\n              Node$$1.prototype.optionsChange.call(this, e);\n            };\n\n            PathNode.prototype.content = function content() {\n              if (this.element) {\n                this.element.textContent = this.srcElement.content();\n              }\n            };\n\n            PathNode.prototype.renderData = function renderData() {\n              return this.printPath(this.srcElement);\n            };\n\n            PathNode.prototype.printPath = function printPath(path) {\n              var this$1 = this;\n              var segments = path.segments;\n              var length = segments.length;\n\n              if (length > 0) {\n                var parts = [];\n                var output, currentType;\n\n                for (var i = 1; i < length; i++) {\n                  var segmentType = this$1.segmentType(segments[i - 1], segments[i]);\n\n                  if (segmentType !== currentType) {\n                    currentType = segmentType;\n                    parts.push(segmentType);\n                  }\n\n                  if (segmentType === \"L\") {\n                    parts.push(this$1.printPoints(segments[i].anchor()));\n                  } else {\n                    parts.push(this$1.printPoints(segments[i - 1].controlOut(), segments[i].controlIn(), segments[i].anchor()));\n                  }\n                }\n\n                output = \"M\" + this.printPoints(segments[0].anchor()) + SPACE + parts.join(SPACE);\n\n                if (path.options.closed) {\n                  output += \"Z\";\n                }\n\n                return output;\n              }\n            };\n\n            PathNode.prototype.printPoints = function printPoints() {\n              var points = arguments;\n              var length = points.length;\n              var result = [];\n\n              for (var i = 0; i < length; i++) {\n                result.push(points[i].toString(3));\n              }\n\n              return result.join(\" \");\n            };\n\n            PathNode.prototype.segmentType = function segmentType(segmentStart, segmentEnd) {\n              return segmentStart.controlOut() && segmentEnd.controlIn() ? \"C\" : \"L\";\n            };\n\n            PathNode.prototype.mapStroke = function mapStroke(stroke) {\n              var attrs = [];\n\n              if (stroke && !isTransparent(stroke.color)) {\n                attrs.push([\"stroke\", stroke.color]);\n                attrs.push([\"stroke-width\", stroke.width]);\n                attrs.push([\"stroke-linecap\", this.renderLinecap(stroke)]);\n                attrs.push([\"stroke-linejoin\", stroke.lineJoin]);\n\n                if (defined(stroke.opacity)) {\n                  attrs.push([\"stroke-opacity\", stroke.opacity]);\n                }\n\n                if (defined(stroke.dashType)) {\n                  attrs.push([\"stroke-dasharray\", this.renderDashType(stroke)]);\n                }\n              } else {\n                attrs.push([\"stroke\", NONE]);\n              }\n\n              return attrs;\n            };\n\n            PathNode.prototype.renderStroke = function renderStroke() {\n              return renderAllAttr(this.mapStroke(this.srcElement.options.stroke));\n            };\n\n            PathNode.prototype.renderDashType = function renderDashType(stroke) {\n              var dashType = stroke.dashType;\n              var width = stroke.width;\n\n              if (width === void 0) {\n                width = 1;\n              }\n\n              if (dashType && dashType !== SOLID) {\n                var dashArray = DASH_ARRAYS[dashType.toLowerCase()];\n                var result = [];\n\n                for (var i = 0; i < dashArray.length; i++) {\n                  result.push(dashArray[i] * width);\n                }\n\n                return result.join(\" \");\n              }\n            };\n\n            PathNode.prototype.renderLinecap = function renderLinecap(stroke) {\n              var dashType = stroke.dashType;\n              var lineCap = stroke.lineCap;\n              return dashType && dashType !== \"solid\" ? BUTT : lineCap;\n            };\n\n            PathNode.prototype.mapFill = function mapFill(fill) {\n              var attrs = [];\n\n              if (!(fill && fill.nodeType === \"Gradient\")) {\n                if (fill && !isTransparent(fill.color)) {\n                  attrs.push([\"fill\", fill.color]);\n\n                  if (defined(fill.opacity)) {\n                    attrs.push([\"fill-opacity\", fill.opacity]);\n                  }\n                } else {\n                  attrs.push([\"fill\", NONE]);\n                }\n              }\n\n              return attrs;\n            };\n\n            PathNode.prototype.renderFill = function renderFill() {\n              return renderAllAttr(this.mapFill(this.srcElement.options.fill));\n            };\n\n            PathNode.prototype.template = function template() {\n              return \"<path \" + this.renderId() + \" \" + this.renderStyle() + \" \" + this.renderOpacity() + \" \" + renderAttr('d', this.renderData()) + \"\" + this.renderStroke() + this.renderFill() + this.renderDefinitions() + this.renderTransform() + \"></path>\";\n            };\n\n            return PathNode;\n          }(Node);\n\n          var ArcNode = function (PathNode$$1) {\n            function ArcNode() {\n              PathNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(ArcNode, PathNode$$1);\n            ArcNode.prototype = Object.create(PathNode$$1 && PathNode$$1.prototype);\n            ArcNode.prototype.constructor = ArcNode;\n            ArcNode.fn = ArcNode.prototype;\n            ArcNode.fn.init = ArcNode.fn.constructor;\n\n            ArcNode.prototype.renderData = function renderData() {\n              return this.printPath(this.srcElement.toPath());\n            };\n\n            return ArcNode;\n          }(PathNode);\n\n          var CircleNode = function (PathNode$$1) {\n            function CircleNode() {\n              PathNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(CircleNode, PathNode$$1);\n            CircleNode.prototype = Object.create(PathNode$$1 && PathNode$$1.prototype);\n            CircleNode.prototype.constructor = CircleNode;\n            CircleNode.fn = CircleNode.prototype;\n            CircleNode.fn.init = CircleNode.fn.constructor;\n\n            CircleNode.prototype.geometryChange = function geometryChange() {\n              var center = this.center();\n              this.attr(\"cx\", center.x);\n              this.attr(\"cy\", center.y);\n              this.attr(\"r\", this.radius());\n              this.invalidate();\n            };\n\n            CircleNode.prototype.center = function center() {\n              return this.srcElement.geometry().center;\n            };\n\n            CircleNode.prototype.radius = function radius() {\n              return this.srcElement.geometry().radius;\n            };\n\n            CircleNode.prototype.template = function template() {\n              return \"<circle \" + this.renderId() + \" \" + this.renderStyle() + \" \" + this.renderOpacity() + \"cx='\" + this.center().x + \"' cy='\" + this.center().y + \"' r='\" + this.radius() + \"'\" + this.renderStroke() + \" \" + this.renderFill() + \" \" + this.renderDefinitions() + this.renderTransform() + \" ></circle>\";\n            };\n\n            return CircleNode;\n          }(PathNode);\n\n          var GroupNode = function (Node$$1) {\n            function GroupNode() {\n              Node$$1.apply(this, arguments);\n            }\n\n            extendStatic(GroupNode, Node$$1);\n            GroupNode.prototype = Object.create(Node$$1 && Node$$1.prototype);\n            GroupNode.prototype.constructor = GroupNode;\n            GroupNode.fn = GroupNode.prototype;\n            GroupNode.fn.init = GroupNode.fn.constructor;\n\n            GroupNode.prototype.template = function template() {\n              return \"<g\" + (this.renderId() + this.renderTransform() + this.renderStyle() + this.renderOpacity() + this.renderDefinitions()) + \">\" + this.renderChildren() + \"</g>\";\n            };\n\n            GroupNode.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"transform\") {\n                this.transformChange(e.value);\n              }\n\n              Node$$1.prototype.optionsChange.call(this, e);\n            };\n\n            return GroupNode;\n          }(Node);\n\n          var ImageNode = function (PathNode$$1) {\n            function ImageNode() {\n              PathNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(ImageNode, PathNode$$1);\n            ImageNode.prototype = Object.create(PathNode$$1 && PathNode$$1.prototype);\n            ImageNode.prototype.constructor = ImageNode;\n            ImageNode.fn = ImageNode.prototype;\n            ImageNode.fn.init = ImageNode.fn.constructor;\n\n            ImageNode.prototype.geometryChange = function geometryChange() {\n              this.allAttr(this.mapPosition());\n              this.invalidate();\n            };\n\n            ImageNode.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"src\") {\n                this.allAttr(this.mapSource());\n              }\n\n              PathNode$$1.prototype.optionsChange.call(this, e);\n            };\n\n            ImageNode.prototype.mapPosition = function mapPosition() {\n              var rect = this.srcElement.rect();\n              var tl = rect.topLeft();\n              return [[\"x\", tl.x], [\"y\", tl.y], [\"width\", rect.width() + \"px\"], [\"height\", rect.height() + \"px\"]];\n            };\n\n            ImageNode.prototype.renderPosition = function renderPosition() {\n              return renderAllAttr(this.mapPosition());\n            };\n\n            ImageNode.prototype.mapSource = function mapSource(encode) {\n              var src = this.srcElement.src();\n\n              if (encode) {\n                src = kendo.htmlEncode(src);\n              }\n\n              return [[\"xlink:href\", src]];\n            };\n\n            ImageNode.prototype.renderSource = function renderSource() {\n              return renderAllAttr(this.mapSource(true));\n            };\n\n            ImageNode.prototype.template = function template() {\n              return \"<image preserveAspectRatio='none' \" + this.renderId() + \" \" + this.renderStyle() + \" \" + this.renderTransform() + \" \" + this.renderOpacity() + this.renderPosition() + \" \" + this.renderSource() + \" \" + this.renderDefinitions() + \">\" + \"</image>\";\n            };\n\n            return ImageNode;\n          }(PathNode);\n\n          var MultiPathNode = function (PathNode$$1) {\n            function MultiPathNode() {\n              PathNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(MultiPathNode, PathNode$$1);\n            MultiPathNode.prototype = Object.create(PathNode$$1 && PathNode$$1.prototype);\n            MultiPathNode.prototype.constructor = MultiPathNode;\n            MultiPathNode.fn = MultiPathNode.prototype;\n            MultiPathNode.fn.init = MultiPathNode.fn.constructor;\n\n            MultiPathNode.prototype.renderData = function renderData() {\n              var this$1 = this;\n              var paths = this.srcElement.paths;\n\n              if (paths.length > 0) {\n                var result = [];\n\n                for (var i = 0; i < paths.length; i++) {\n                  result.push(this$1.printPath(paths[i]));\n                }\n\n                return result.join(\" \");\n              }\n            };\n\n            return MultiPathNode;\n          }(PathNode);\n\n          var RectNode = function (PathNode$$1) {\n            function RectNode() {\n              PathNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(RectNode, PathNode$$1);\n            RectNode.prototype = Object.create(PathNode$$1 && PathNode$$1.prototype);\n            RectNode.prototype.constructor = RectNode;\n            RectNode.fn = RectNode.prototype;\n            RectNode.fn.init = RectNode.fn.constructor;\n\n            RectNode.prototype.geometryChange = function geometryChange() {\n              var geometry = this.srcElement.geometry();\n              this.attr(\"x\", geometry.origin.x);\n              this.attr(\"y\", geometry.origin.y);\n              this.attr(\"width\", geometry.size.width);\n              this.attr(\"height\", geometry.size.height);\n              this.attr(\"rx\", geometry.cornerRadius[0]);\n              this.attr(\"ry\", geometry.cornerRadius[1]);\n              this.invalidate();\n            };\n\n            RectNode.prototype.size = function size() {\n              return this.srcElement.geometry().size;\n            };\n\n            RectNode.prototype.origin = function origin() {\n              return this.srcElement.geometry().origin;\n            };\n\n            RectNode.prototype.rx = function rx() {\n              return this.srcElement.geometry().cornerRadius[0];\n            };\n\n            RectNode.prototype.ry = function ry() {\n              return this.srcElement.geometry().cornerRadius[1];\n            };\n\n            RectNode.prototype.template = function template() {\n              return \"<rect \" + this.renderId() + \" \" + this.renderStyle() + \" \" + this.renderOpacity() + \" x='\" + this.origin().x + \"' y='\" + this.origin().y + \"' \" + \"rx='\" + this.rx() + \"' ry='\" + this.ry() + \"' \" + \"width='\" + this.size().width + \"' height='\" + this.size().height + \"' \" + this.renderStroke() + \" \" + this.renderFill() + \" \" + this.renderDefinitions() + \" \" + this.renderTransform() + \" />\";\n            };\n\n            return RectNode;\n          }(PathNode);\n\n          var ENTITY_REGEX = /&(?:[a-zA-Z]+|#\\d+);/g;\n\n          function decodeEntities(text) {\n            if (!text || typeof text !== \"string\" || !ENTITY_REGEX.test(text)) {\n              return text;\n            }\n\n            var element = decodeEntities._element;\n            ENTITY_REGEX.lastIndex = 0;\n            return text.replace(ENTITY_REGEX, function (match) {\n              element.innerHTML = match;\n              return element.textContent || element.innerText;\n            });\n          }\n\n          if (typeof document !== \"undefined\") {\n            decodeEntities._element = document.createElement(\"span\");\n          }\n\n          var TextNode = function (PathNode$$1) {\n            function TextNode() {\n              PathNode$$1.apply(this, arguments);\n            }\n\n            extendStatic(TextNode, PathNode$$1);\n            TextNode.prototype = Object.create(PathNode$$1 && PathNode$$1.prototype);\n            TextNode.prototype.constructor = TextNode;\n            TextNode.fn = TextNode.prototype;\n            TextNode.fn.init = TextNode.fn.constructor;\n\n            TextNode.prototype.geometryChange = function geometryChange() {\n              var pos = this.pos();\n              this.attr(\"x\", pos.x);\n              this.attr(\"y\", pos.y);\n              this.invalidate();\n            };\n\n            TextNode.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"font\") {\n                this.attr(\"style\", renderStyle(this.mapStyle()));\n                this.geometryChange();\n              } else if (e.field === \"content\") {\n                PathNode$$1.prototype.content.call(this, this.srcElement.content());\n              }\n\n              PathNode$$1.prototype.optionsChange.call(this, e);\n            };\n\n            TextNode.prototype.mapStyle = function mapStyle(encode) {\n              var style = PathNode$$1.prototype.mapStyle.call(this, encode);\n              var font = this.srcElement.options.font;\n\n              if (encode) {\n                font = kendo.htmlEncode(font);\n              }\n\n              style.push([\"font\", font], [\"white-space\", \"pre\"]);\n              return style;\n            };\n\n            TextNode.prototype.pos = function pos() {\n              var pos = this.srcElement.position();\n              var size = this.srcElement.measure();\n              return pos.clone().setY(pos.y + size.baseline);\n            };\n\n            TextNode.prototype.renderContent = function renderContent() {\n              var content = this.srcElement.content();\n              content = decodeEntities(content);\n              content = kendo.htmlEncode(content);\n              return kendoUtil.normalizeText(content);\n            };\n\n            TextNode.prototype.renderTextAnchor = function renderTextAnchor() {\n              var anchor;\n\n              if ((this.options || {}).rtl && !(supportBrowser.msie || supportBrowser.edge)) {\n                anchor = 'end';\n              }\n\n              return renderAttr(\"text-anchor\", anchor);\n            };\n\n            TextNode.prototype.template = function template() {\n              return \"<text \" + this.renderId() + \" \" + this.renderTextAnchor() + \" \" + this.renderStyle() + \" \" + this.renderOpacity() + \"x='\" + this.pos().x + \"' y='\" + this.pos().y + \"' \" + this.renderStroke() + \" \" + this.renderTransform() + \" \" + this.renderDefinitions() + this.renderFill() + \">\" + this.renderContent() + \"</text>\";\n            };\n\n            return TextNode;\n          }(PathNode);\n\n          NODE_MAP.Arc = ArcNode;\n          NODE_MAP.Circle = CircleNode;\n          NODE_MAP.Group = GroupNode;\n          NODE_MAP.Image = ImageNode;\n          NODE_MAP.MultiPath = MultiPathNode;\n          NODE_MAP.Path = PathNode;\n          NODE_MAP.Rect = RectNode;\n          NODE_MAP.Text = TextNode;\n          var RTL = 'rtl';\n\n          function alignToScreen(element) {\n            var ctm;\n\n            try {\n              ctm = element.getScreenCTM ? element.getScreenCTM() : null;\n            } catch (e) {} // eslint-disable-line no-empty\n\n\n            if (ctm) {\n              var left = -ctm.e % 1;\n              var top = -ctm.f % 1;\n              var style = element.style;\n\n              if (left !== 0 || top !== 0) {\n                style.left = left + \"px\";\n                style.top = top + \"px\";\n              }\n            }\n          }\n\n          var Surface$3 = function (BaseSurface) {\n            function Surface(element, options) {\n              BaseSurface.call(this, element, options);\n              this._root = new RootNode($.extend({\n                rtl: elementStyles(element, 'direction').direction === RTL\n              }, this.options));\n              renderSVG$1(this.element, this._template());\n              this._rootElement = this.element.firstElementChild;\n              alignToScreen(this._rootElement);\n\n              this._root.attachTo(this._rootElement);\n\n              bindEvents(this.element, {\n                click: this._click,\n                mouseover: this._mouseenter,\n                mouseout: this._mouseleave,\n                mousemove: this._mousemove\n              });\n              this.resize();\n            }\n\n            extendStatic(Surface, BaseSurface);\n            Surface.prototype = Object.create(BaseSurface && BaseSurface.prototype);\n            Surface.prototype.constructor = Surface;\n            Surface.fn = Surface.prototype;\n            Surface.fn.init = Surface.fn.constructor;\n            var prototypeAccessors = {\n              type: {}\n            };\n\n            prototypeAccessors.type.get = function () {\n              return \"svg\";\n            };\n\n            Surface.prototype.destroy = function destroy() {\n              if (this._root) {\n                this._root.destroy();\n\n                this._root = null;\n                this._rootElement = null;\n                unbindEvents(this.element, {\n                  click: this._click,\n                  mouseover: this._mouseenter,\n                  mouseout: this._mouseleave,\n                  mousemove: this._mousemove\n                });\n              }\n\n              BaseSurface.prototype.destroy.call(this);\n            };\n\n            Surface.prototype.translate = function translate(offset) {\n              var viewBox = Math.round(offset.x) + \" \" + Math.round(offset.y) + \" \" + this._size.width + \" \" + this._size.height;\n\n              this._offset = offset;\n\n              this._rootElement.setAttribute(\"viewBox\", viewBox);\n            };\n\n            Surface.prototype.draw = function draw(element) {\n              BaseSurface.prototype.draw.call(this, element);\n\n              this._root.load([element]);\n            };\n\n            Surface.prototype.clear = function clear() {\n              BaseSurface.prototype.clear.call(this);\n\n              this._root.clear();\n            };\n\n            Surface.prototype.svg = function svg() {\n              return \"<?xml version='1.0' ?>\" + this._template();\n            };\n\n            Surface.prototype.exportVisual = function exportVisual() {\n              var ref = this;\n              var visual = ref._visual;\n              var offset = ref._offset;\n\n              if (offset) {\n                var wrap = new Group();\n                wrap.children.push(visual);\n                wrap.transform(transform$1().translate(-offset.x, -offset.y));\n                visual = wrap;\n              }\n\n              return visual;\n            };\n\n            Surface.prototype._resize = function _resize() {\n              if (this._offset) {\n                this.translate(this._offset);\n              }\n            };\n\n            Surface.prototype._template = function _template() {\n              return \"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + this._root.render() + \"</svg>\";\n            };\n\n            Object.defineProperties(Surface.prototype, prototypeAccessors);\n            return Surface;\n          }(Surface$2);\n\n          var NODE_MAP$2 = {};\n\n          function renderPath(ctx, path) {\n            var segments = path.segments;\n\n            if (segments.length === 0) {\n              return;\n            }\n\n            var segment = segments[0];\n            var anchor = segment.anchor();\n            ctx.moveTo(anchor.x, anchor.y);\n\n            for (var i = 1; i < segments.length; i++) {\n              segment = segments[i];\n              anchor = segment.anchor();\n              var prevSeg = segments[i - 1];\n              var prevOut = prevSeg.controlOut();\n              var controlIn = segment.controlIn();\n\n              if (prevOut && controlIn) {\n                ctx.bezierCurveTo(prevOut.x, prevOut.y, controlIn.x, controlIn.y, anchor.x, anchor.y);\n              } else {\n                ctx.lineTo(anchor.x, anchor.y);\n              }\n            }\n\n            if (path.options.closed) {\n              ctx.closePath();\n            }\n          }\n\n          var Node$2 = function (BaseNode$$1) {\n            function Node(srcElement) {\n              BaseNode$$1.call(this, srcElement);\n\n              if (srcElement) {\n                this.initClip();\n              }\n            }\n\n            extendStatic(Node, BaseNode$$1);\n            Node.prototype = Object.create(BaseNode$$1 && BaseNode$$1.prototype);\n            Node.prototype.constructor = Node;\n            Node.fn = Node.prototype;\n            Node.fn.init = Node.fn.constructor;\n\n            Node.prototype.initClip = function initClip() {\n              var clip = this.srcElement.clip();\n\n              if (clip) {\n                this.clip = clip;\n                clip.addObserver(this);\n              }\n            };\n\n            Node.prototype.clear = function clear() {\n              if (this.srcElement) {\n                this.srcElement.removeObserver(this);\n              }\n\n              this.clearClip();\n              BaseNode$$1.prototype.clear.call(this);\n            };\n\n            Node.prototype.clearClip = function clearClip() {\n              if (this.clip) {\n                this.clip.removeObserver(this);\n                delete this.clip;\n              }\n            };\n\n            Node.prototype.setClip = function setClip(ctx) {\n              if (this.clip) {\n                ctx.beginPath();\n                renderPath(ctx, this.clip);\n                ctx.clip();\n              }\n            };\n\n            Node.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"clip\") {\n                this.clearClip();\n                this.initClip();\n              }\n\n              BaseNode$$1.prototype.optionsChange.call(this, e);\n            };\n\n            Node.prototype.setTransform = function setTransform(ctx) {\n              if (this.srcElement) {\n                var transform = this.srcElement.transform();\n\n                if (transform) {\n                  ctx.transform.apply(ctx, transform.matrix().toArray(6));\n                }\n              }\n            };\n\n            Node.prototype.loadElements = function loadElements(elements, pos, cors) {\n              var this$1 = this;\n\n              for (var i = 0; i < elements.length; i++) {\n                var srcElement = elements[i];\n                var children = srcElement.children;\n                var childNode = new NODE_MAP$2[srcElement.nodeType](srcElement, cors);\n\n                if (children && children.length > 0) {\n                  childNode.load(children, pos, cors);\n                }\n\n                if (defined(pos)) {\n                  this$1.insertAt(childNode, pos);\n                } else {\n                  this$1.append(childNode);\n                }\n              }\n            };\n\n            Node.prototype.load = function load(elements, pos, cors) {\n              this.loadElements(elements, pos, cors);\n              this.invalidate();\n            };\n\n            Node.prototype.setOpacity = function setOpacity(ctx) {\n              if (this.srcElement) {\n                var opacity = this.srcElement.opacity();\n\n                if (defined(opacity)) {\n                  this.globalAlpha(ctx, opacity);\n                }\n              }\n            };\n\n            Node.prototype.globalAlpha = function globalAlpha(ctx, value) {\n              var opactity = value;\n\n              if (opactity && ctx.globalAlpha) {\n                opactity *= ctx.globalAlpha;\n              }\n\n              ctx.globalAlpha = opactity;\n            };\n\n            Node.prototype.visible = function visible() {\n              var src = this.srcElement;\n              return !src || src && src.options.visible !== false;\n            };\n\n            return Node;\n          }(BaseNode);\n\n          var GroupNode$2 = function (superclass) {\n            function GroupNode() {\n              superclass.apply(this, arguments);\n            }\n\n            extendStatic(GroupNode, superclass);\n            GroupNode.prototype = Object.create(superclass && superclass.prototype);\n            GroupNode.prototype.constructor = GroupNode;\n            GroupNode.fn = GroupNode.prototype;\n            GroupNode.fn.init = GroupNode.fn.constructor;\n\n            GroupNode.prototype.renderTo = function renderTo(ctx) {\n              if (!this.visible()) {\n                return;\n              }\n\n              ctx.save();\n              this.setTransform(ctx);\n              this.setClip(ctx);\n              this.setOpacity(ctx);\n              var childNodes = this.childNodes;\n\n              for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n\n                if (child.visible()) {\n                  child.renderTo(ctx);\n                }\n              }\n\n              ctx.restore();\n            };\n\n            return GroupNode;\n          }(traversable(Node$2, \"childNodes\"));\n\n          var FRAME_DELAY = 1000 / 60;\n\n          var RootNode$2 = function (superclass) {\n            function RootNode(canvas, size) {\n              superclass.call(this);\n              this.canvas = canvas;\n              this.size = size;\n              this.ctx = canvas.getContext(\"2d\");\n\n              var invalidateHandler = this._invalidate.bind(this);\n\n              this.invalidate = kendo.throttle(function () {\n                kendo.animationFrame(invalidateHandler);\n              }, FRAME_DELAY);\n            }\n\n            extendStatic(RootNode, superclass);\n            RootNode.prototype = Object.create(superclass && superclass.prototype);\n            RootNode.prototype.constructor = RootNode;\n            RootNode.fn = RootNode.prototype;\n            RootNode.fn.init = RootNode.fn.constructor;\n\n            RootNode.prototype.destroy = function destroy() {\n              superclass.prototype.destroy.call(this);\n              this.canvas = null;\n              this.ctx = null;\n            };\n\n            RootNode.prototype.load = function load(elements, pos, cors) {\n              this.loadElements(elements, pos, cors);\n\n              this._invalidate();\n            };\n\n            RootNode.prototype._rescale = function _rescale(scale) {\n              var ref = this;\n              var canvas = ref.canvas;\n              var size = ref.size;\n              canvas.width = size.width * scale;\n              canvas.height = size.height * scale;\n              this.ctx.scale(scale, scale);\n            };\n\n            RootNode.prototype._devicePixelRatio = function _devicePixelRatio() {\n              if (typeof window.devicePixelRatio === 'number') {\n                return window.devicePixelRatio;\n              }\n\n              return 1;\n            };\n\n            RootNode.prototype._invalidate = function _invalidate(options) {\n              if (!this.ctx) {\n                return;\n              }\n\n              var fixedScale = options && options.fixedScale;\n              var scale = fixedScale ? 1 : this._devicePixelRatio();\n\n              this._rescale(scale);\n\n              this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n              this.renderTo(this.ctx);\n            };\n\n            return RootNode;\n          }(traversable(GroupNode$2, \"childNodes\"));\n\n          var QuadRoot = function (Class$$1) {\n            function QuadRoot() {\n              Class$$1.call(this);\n              this.shapes = [];\n            }\n\n            extendStatic(QuadRoot, Class$$1);\n            QuadRoot.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            QuadRoot.prototype.constructor = QuadRoot;\n            QuadRoot.fn = QuadRoot.prototype;\n            QuadRoot.fn.init = QuadRoot.fn.constructor;\n\n            QuadRoot.prototype._add = function _add(shape, bbox) {\n              this.shapes.push({\n                bbox: bbox,\n                shape: shape\n              });\n              shape._quadNode = this;\n            };\n\n            QuadRoot.prototype.pointShapes = function pointShapes(point) {\n              var shapes = this.shapes;\n              var length = shapes.length;\n              var result = [];\n\n              for (var idx = 0; idx < length; idx++) {\n                if (shapes[idx].bbox.containsPoint(point)) {\n                  result.push(shapes[idx].shape);\n                }\n              }\n\n              return result;\n            };\n\n            QuadRoot.prototype.insert = function insert(shape, bbox) {\n              this._add(shape, bbox);\n            };\n\n            QuadRoot.prototype.remove = function remove(shape) {\n              var shapes = this.shapes;\n              var length = shapes.length;\n\n              for (var idx = 0; idx < length; idx++) {\n                if (shapes[idx].shape === shape) {\n                  shapes.splice(idx, 1);\n                  break;\n                }\n              }\n            };\n\n            return QuadRoot;\n          }(Class);\n\n          var geometry = {\n            Circle: Circle$2,\n            Arc: Arc$2,\n            Rect: Rect,\n            Point: Point,\n            Segment: Segment,\n            Matrix: Matrix,\n            Size: Size,\n            toMatrix: toMatrix,\n            Transformation: Transformation,\n            transform: transform$1\n          };\n\n          var QuadNode = function (QuadRoot$$1) {\n            function QuadNode(rect) {\n              QuadRoot$$1.call(this);\n              this.children = [];\n              this.rect = rect;\n            }\n\n            extendStatic(QuadNode, QuadRoot$$1);\n            QuadNode.prototype = Object.create(QuadRoot$$1 && QuadRoot$$1.prototype);\n            QuadNode.prototype.constructor = QuadNode;\n            QuadNode.fn = QuadNode.prototype;\n            QuadNode.fn.init = QuadNode.fn.constructor;\n\n            QuadNode.prototype.inBounds = function inBounds(rect) {\n              var nodeRect = this.rect;\n              var nodeBottomRight = nodeRect.bottomRight();\n              var bottomRight = rect.bottomRight();\n              var inBounds = nodeRect.origin.x <= rect.origin.x && nodeRect.origin.y <= rect.origin.y && bottomRight.x <= nodeBottomRight.x && bottomRight.y <= nodeBottomRight.y;\n              return inBounds;\n            };\n\n            QuadNode.prototype.pointShapes = function pointShapes(point) {\n              var children = this.children;\n              var length = children.length;\n              var result = QuadRoot$$1.prototype.pointShapes.call(this, point);\n\n              for (var idx = 0; idx < length; idx++) {\n                append$1$1(result, children[idx].pointShapes(point));\n              }\n\n              return result;\n            };\n\n            QuadNode.prototype.insert = function insert(shape, bbox) {\n              var children = this.children;\n              var inserted = false;\n\n              if (this.inBounds(bbox)) {\n                if (this.shapes.length < 4) {\n                  this._add(shape, bbox);\n                } else {\n                  if (!children.length) {\n                    this._initChildren();\n                  }\n\n                  for (var idx = 0; idx < children.length; idx++) {\n                    if (children[idx].insert(shape, bbox)) {\n                      inserted = true;\n                      break;\n                    }\n                  }\n\n                  if (!inserted) {\n                    this._add(shape, bbox);\n                  }\n                }\n\n                inserted = true;\n              }\n\n              return inserted;\n            };\n\n            QuadNode.prototype._initChildren = function _initChildren() {\n              var ref = this;\n              var rect = ref.rect;\n              var children = ref.children;\n              var center = rect.center();\n              var halfWidth = rect.width() / 2;\n              var halfHeight = rect.height() / 2;\n              children.push(new QuadNode(new Rect([rect.origin.x, rect.origin.y], [halfWidth, halfHeight])), new QuadNode(new Rect([center.x, rect.origin.y], [halfWidth, halfHeight])), new QuadNode(new Rect([rect.origin.x, center.y], [halfWidth, halfHeight])), new QuadNode(new Rect([center.x, center.y], [halfWidth, halfHeight])));\n            };\n\n            return QuadNode;\n          }(QuadRoot);\n\n          var ROOT_SIZE = 3000;\n          var LEVEL_STEP = 10000;\n          var MAX_LEVEL = 75;\n\n          var ShapesQuadTree = function (Class$$1) {\n            function ShapesQuadTree() {\n              Class$$1.call(this);\n              this.initRoots();\n            }\n\n            extendStatic(ShapesQuadTree, Class$$1);\n            ShapesQuadTree.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            ShapesQuadTree.prototype.constructor = ShapesQuadTree;\n            ShapesQuadTree.fn = ShapesQuadTree.prototype;\n            ShapesQuadTree.fn.init = ShapesQuadTree.fn.constructor;\n\n            ShapesQuadTree.prototype.initRoots = function initRoots() {\n              this.rootMap = {};\n              this.root = new QuadRoot();\n              this.rootElements = [];\n            };\n\n            ShapesQuadTree.prototype.clear = function clear() {\n              var this$1 = this;\n              var rootElements = this.rootElements;\n\n              for (var idx = 0; idx < rootElements.length; idx++) {\n                this$1.remove(rootElements[idx]);\n              }\n\n              this.initRoots();\n            };\n\n            ShapesQuadTree.prototype.pointShape = function pointShape(point) {\n              var sectorRoot = (this.rootMap[Math.floor(point.x / ROOT_SIZE)] || {})[Math.floor(point.y / ROOT_SIZE)];\n              var result = this.root.pointShapes(point);\n\n              if (sectorRoot) {\n                result = result.concat(sectorRoot.pointShapes(point));\n              }\n\n              this.assignZindex(result);\n              result.sort(zIndexComparer);\n\n              for (var idx = 0; idx < result.length; idx++) {\n                if (result[idx].containsPoint(point)) {\n                  return result[idx];\n                }\n              }\n            };\n\n            ShapesQuadTree.prototype.assignZindex = function assignZindex(elements) {\n              var this$1 = this;\n\n              for (var idx = 0; idx < elements.length; idx++) {\n                var element = elements[idx];\n                var zIndex = 0;\n                var levelWeight = Math.pow(LEVEL_STEP, MAX_LEVEL);\n                var parents = [];\n\n                while (element) {\n                  parents.push(element);\n                  element = element.parent;\n                }\n\n                while (parents.length) {\n                  element = parents.pop();\n                  zIndex += ((element.parent ? element.parent.children : this$1.rootElements).indexOf(element) + 1) * levelWeight;\n                  levelWeight /= LEVEL_STEP;\n                }\n\n                elements[idx]._zIndex = zIndex;\n              }\n            };\n\n            ShapesQuadTree.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"transform\" || e.field === \"stroke.width\") {\n                this.bboxChange(e.element);\n              }\n            };\n\n            ShapesQuadTree.prototype.geometryChange = function geometryChange(e) {\n              this.bboxChange(e.element);\n            };\n\n            ShapesQuadTree.prototype.bboxChange = function bboxChange(element) {\n              var this$1 = this;\n\n              if (element.nodeType === \"Group\") {\n                for (var idx = 0; idx < element.children.length; idx++) {\n                  this$1.bboxChange(element.children[idx]);\n                }\n              } else {\n                if (element._quadNode) {\n                  element._quadNode.remove(element);\n                }\n\n                this._insertShape(element);\n              }\n            };\n\n            ShapesQuadTree.prototype.add = function add(elements) {\n              var elementsArray = Array.isArray(elements) ? elements.slice(0) : [elements];\n              append$1$1(this.rootElements, elementsArray);\n\n              this._insert(elementsArray);\n            };\n\n            ShapesQuadTree.prototype.childrenChange = function childrenChange(e) {\n              var this$1 = this;\n\n              if (e.action === \"remove\") {\n                for (var idx = 0; idx < e.items.length; idx++) {\n                  this$1.remove(e.items[idx]);\n                }\n              } else {\n                this._insert(Array.prototype.slice.call(e.items, 0));\n              }\n            };\n\n            ShapesQuadTree.prototype._insert = function _insert(elements) {\n              var this$1 = this;\n              var element;\n\n              while (elements.length > 0) {\n                element = elements.pop();\n                element.addObserver(this$1);\n\n                if (element.nodeType === \"Group\") {\n                  append$1$1(elements, element.children);\n                } else {\n                  this$1._insertShape(element);\n                }\n              }\n            };\n\n            ShapesQuadTree.prototype._insertShape = function _insertShape(shape) {\n              var bbox = shape.bbox();\n\n              if (bbox) {\n                var sectors = this.getSectors(bbox);\n                var x = sectors[0][0];\n                var y = sectors[1][0];\n\n                if (this.inRoot(sectors)) {\n                  this.root.insert(shape, bbox);\n                } else {\n                  var rootMap = this.rootMap;\n\n                  if (!rootMap[x]) {\n                    rootMap[x] = {};\n                  }\n\n                  if (!rootMap[x][y]) {\n                    rootMap[x][y] = new QuadNode(new Rect([x * ROOT_SIZE, y * ROOT_SIZE], [ROOT_SIZE, ROOT_SIZE]));\n                  }\n\n                  rootMap[x][y].insert(shape, bbox);\n                }\n              }\n            };\n\n            ShapesQuadTree.prototype.remove = function remove(element) {\n              var this$1 = this;\n              element.removeObserver(this);\n\n              if (element.nodeType === \"Group\") {\n                var children = element.children;\n\n                for (var idx = 0; idx < children.length; idx++) {\n                  this$1.remove(children[idx]);\n                }\n              } else if (element._quadNode) {\n                element._quadNode.remove(element);\n\n                delete element._quadNode;\n              }\n            };\n\n            ShapesQuadTree.prototype.inRoot = function inRoot(sectors) {\n              return sectors[0].length > 1 || sectors[1].length > 1;\n            };\n\n            ShapesQuadTree.prototype.getSectors = function getSectors(rect) {\n              var bottomRight = rect.bottomRight();\n              var bottomX = Math.floor(bottomRight.x / ROOT_SIZE);\n              var bottomY = Math.floor(bottomRight.y / ROOT_SIZE);\n              var sectors = [[], []];\n\n              for (var x = Math.floor(rect.origin.x / ROOT_SIZE); x <= bottomX; x++) {\n                sectors[0].push(x);\n              }\n\n              for (var y = Math.floor(rect.origin.y / ROOT_SIZE); y <= bottomY; y++) {\n                sectors[1].push(y);\n              }\n\n              return sectors;\n            };\n\n            return ShapesQuadTree;\n          }(Class);\n\n          function zIndexComparer(x1, x2) {\n            if (x1._zIndex < x2._zIndex) {\n              return 1;\n            }\n\n            if (x1._zIndex > x2._zIndex) {\n              return -1;\n            }\n\n            return 0;\n          }\n\n          var SurfaceCursor = function SurfaceCursor(surface) {\n            surface.bind(\"mouseenter\", this._mouseenter.bind(this));\n            surface.bind(\"mouseleave\", this._mouseleave.bind(this));\n            this.element = surface.element;\n          };\n\n          SurfaceCursor.prototype.clear = function clear() {\n            this._resetCursor();\n          };\n\n          SurfaceCursor.prototype.destroy = function destroy() {\n            this._resetCursor();\n\n            delete this.element;\n          };\n\n          SurfaceCursor.prototype._mouseenter = function _mouseenter(e) {\n            var cursor = this._shapeCursor(e);\n\n            if (!cursor) {\n              this._resetCursor();\n            } else {\n              if (!this._current) {\n                this._defaultCursor = this._getCursor();\n              }\n\n              this._setCursor(cursor);\n            }\n          };\n\n          SurfaceCursor.prototype._mouseleave = function _mouseleave() {\n            this._resetCursor();\n          };\n\n          SurfaceCursor.prototype._shapeCursor = function _shapeCursor(e) {\n            var shape = e.element;\n\n            while (shape && !defined(shape.options.cursor)) {\n              shape = shape.parent;\n            }\n\n            if (shape) {\n              return shape.options.cursor;\n            }\n          };\n\n          SurfaceCursor.prototype._getCursor = function _getCursor() {\n            if (this.element) {\n              return this.element.style.cursor;\n            }\n          };\n\n          SurfaceCursor.prototype._setCursor = function _setCursor(cursor) {\n            if (this.element) {\n              this.element.style.cursor = cursor;\n              this._current = cursor;\n            }\n          };\n\n          SurfaceCursor.prototype._resetCursor = function _resetCursor() {\n            if (this._current) {\n              this._setCursor(this._defaultCursor || \"\");\n\n              delete this._current;\n            }\n          };\n\n          function addGradientStops(gradient, stops) {\n            for (var idx = 0; idx < stops.length; idx++) {\n              var stop = stops[idx];\n              var color = kendo.parseColor(stop.color());\n              color.a *= stop.opacity();\n              gradient.addColorStop(stop.offset(), color.toCssRgba());\n            }\n          }\n\n          var PathNode$2 = function (Node) {\n            function PathNode() {\n              Node.apply(this, arguments);\n            }\n\n            extendStatic(PathNode, Node);\n            PathNode.prototype = Object.create(Node && Node.prototype);\n            PathNode.prototype.constructor = PathNode;\n            PathNode.fn = PathNode.prototype;\n            PathNode.fn.init = PathNode.fn.constructor;\n\n            PathNode.prototype.renderTo = function renderTo(ctx) {\n              ctx.save();\n              this.setTransform(ctx);\n              this.setClip(ctx);\n              this.setOpacity(ctx);\n              ctx.beginPath();\n              this.renderPoints(ctx, this.srcElement);\n              this.setLineDash(ctx);\n              this.setLineCap(ctx);\n              this.setLineJoin(ctx);\n              this.setFill(ctx);\n              this.setStroke(ctx);\n              ctx.restore();\n            };\n\n            PathNode.prototype.setFill = function setFill(ctx) {\n              var fill = this.srcElement.options.fill;\n              var hasFill = false;\n\n              if (fill) {\n                if (fill.nodeType === \"Gradient\") {\n                  this.setGradientFill(ctx, fill);\n                  hasFill = true;\n                } else if (!isTransparent(fill.color)) {\n                  ctx.fillStyle = fill.color;\n                  ctx.save();\n                  this.globalAlpha(ctx, fill.opacity);\n                  ctx.fill();\n                  ctx.restore();\n                  hasFill = true;\n                }\n              }\n\n              return hasFill;\n            };\n\n            PathNode.prototype.setGradientFill = function setGradientFill(ctx, fill) {\n              var bbox = this.srcElement.rawBBox();\n              var gradient;\n\n              if (fill instanceof LinearGradient) {\n                var start = fill.start();\n                var end = fill.end();\n                gradient = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n              } else if (fill instanceof RadialGradient) {\n                var center = fill.center();\n                gradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, fill.radius());\n              }\n\n              addGradientStops(gradient, fill.stops);\n              ctx.save();\n\n              if (!fill.userSpace()) {\n                ctx.transform(bbox.width(), 0, 0, bbox.height(), bbox.origin.x, bbox.origin.y);\n              }\n\n              ctx.fillStyle = gradient;\n              ctx.fill();\n              ctx.restore();\n            };\n\n            PathNode.prototype.setStroke = function setStroke(ctx) {\n              var stroke = this.srcElement.options.stroke;\n\n              if (stroke && !isTransparent(stroke.color) && stroke.width > 0) {\n                ctx.strokeStyle = stroke.color;\n                ctx.lineWidth = valueOrDefault(stroke.width, 1);\n                ctx.save();\n                this.globalAlpha(ctx, stroke.opacity);\n                ctx.stroke();\n                ctx.restore();\n                return true;\n              }\n            };\n\n            PathNode.prototype.dashType = function dashType() {\n              var stroke = this.srcElement.options.stroke;\n\n              if (stroke && stroke.dashType) {\n                return stroke.dashType.toLowerCase();\n              }\n            };\n\n            PathNode.prototype.setLineDash = function setLineDash(ctx) {\n              var dashType = this.dashType();\n\n              if (dashType && dashType !== SOLID) {\n                var dashArray = DASH_ARRAYS[dashType];\n\n                if (ctx.setLineDash) {\n                  ctx.setLineDash(dashArray);\n                } else {\n                  ctx.mozDash = dashArray;\n                  ctx.webkitLineDash = dashArray;\n                }\n              }\n            };\n\n            PathNode.prototype.setLineCap = function setLineCap(ctx) {\n              var dashType = this.dashType();\n              var stroke = this.srcElement.options.stroke;\n\n              if (dashType && dashType !== SOLID) {\n                ctx.lineCap = BUTT;\n              } else if (stroke && stroke.lineCap) {\n                ctx.lineCap = stroke.lineCap;\n              }\n            };\n\n            PathNode.prototype.setLineJoin = function setLineJoin(ctx) {\n              var stroke = this.srcElement.options.stroke;\n\n              if (stroke && stroke.lineJoin) {\n                ctx.lineJoin = stroke.lineJoin;\n              }\n            };\n\n            PathNode.prototype.renderPoints = function renderPoints(ctx, path) {\n              renderPath(ctx, path);\n            };\n\n            return PathNode;\n          }(Node$2);\n\n          var ArcNode$2 = function (PathNode) {\n            function ArcNode() {\n              PathNode.apply(this, arguments);\n            }\n\n            extendStatic(ArcNode, PathNode);\n            ArcNode.prototype = Object.create(PathNode && PathNode.prototype);\n            ArcNode.prototype.constructor = ArcNode;\n            ArcNode.fn = ArcNode.prototype;\n            ArcNode.fn.init = ArcNode.fn.constructor;\n\n            ArcNode.prototype.renderPoints = function renderPoints(ctx) {\n              var path = this.srcElement.toPath();\n              renderPath(ctx, path);\n            };\n\n            return ArcNode;\n          }(PathNode$2);\n\n          var CircleNode$2 = function (PathNode) {\n            function CircleNode() {\n              PathNode.apply(this, arguments);\n            }\n\n            extendStatic(CircleNode, PathNode);\n            CircleNode.prototype = Object.create(PathNode && PathNode.prototype);\n            CircleNode.prototype.constructor = CircleNode;\n            CircleNode.fn = CircleNode.prototype;\n            CircleNode.fn.init = CircleNode.fn.constructor;\n\n            CircleNode.prototype.renderPoints = function renderPoints(ctx) {\n              var ref = this.srcElement.geometry();\n              var center = ref.center;\n              var radius = ref.radius;\n              ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n            };\n\n            return CircleNode;\n          }(PathNode$2);\n\n          var ImageNode$2 = function (PathNode) {\n            function ImageNode(srcElement, cors) {\n              PathNode.call(this, srcElement);\n              this.onLoad = this.onLoad.bind(this);\n              this.onError = this.onError.bind(this);\n              this.loading = createPromise();\n              var img = this.img = new Image();\n\n              if (cors && !/^data:/i.test(srcElement.src())) {\n                img.crossOrigin = cors;\n              }\n\n              img.src = srcElement.src();\n\n              if (img.complete) {\n                this.onLoad();\n              } else {\n                img.onload = this.onLoad;\n                img.onerror = this.onError;\n              }\n            }\n\n            extendStatic(ImageNode, PathNode);\n            ImageNode.prototype = Object.create(PathNode && PathNode.prototype);\n            ImageNode.prototype.constructor = ImageNode;\n            ImageNode.fn = ImageNode.prototype;\n            ImageNode.fn.init = ImageNode.fn.constructor;\n\n            ImageNode.prototype.renderTo = function renderTo(ctx) {\n              if (this.loading.state() === \"resolved\") {\n                ctx.save();\n                this.setTransform(ctx);\n                this.setClip(ctx);\n                this.drawImage(ctx);\n                ctx.restore();\n              }\n            };\n\n            ImageNode.prototype.optionsChange = function optionsChange(e) {\n              if (e.field === \"src\") {\n                this.loading = createPromise();\n                this.img.src = this.srcElement.src();\n              } else {\n                PathNode.prototype.optionsChange.call(this, e);\n              }\n            };\n\n            ImageNode.prototype.onLoad = function onLoad() {\n              this.loading.resolve();\n              this.invalidate();\n            };\n\n            ImageNode.prototype.onError = function onError() {\n              this.loading.reject(new Error(\"Unable to load image '\" + this.img.src + \"'. Check for connectivity and verify CORS headers.\"));\n            };\n\n            ImageNode.prototype.drawImage = function drawImage(ctx) {\n              var rect = this.srcElement.rect();\n              var topLeft = rect.topLeft();\n              ctx.drawImage(this.img, topLeft.x, topLeft.y, rect.width(), rect.height());\n            };\n\n            return ImageNode;\n          }(PathNode$2);\n\n          var MultiPathNode$2 = function (PathNode) {\n            function MultiPathNode() {\n              PathNode.apply(this, arguments);\n            }\n\n            extendStatic(MultiPathNode, PathNode);\n            MultiPathNode.prototype = Object.create(PathNode && PathNode.prototype);\n            MultiPathNode.prototype.constructor = MultiPathNode;\n            MultiPathNode.fn = MultiPathNode.prototype;\n            MultiPathNode.fn.init = MultiPathNode.fn.constructor;\n\n            MultiPathNode.prototype.renderPoints = function renderPoints(ctx) {\n              var paths = this.srcElement.paths;\n\n              for (var i = 0; i < paths.length; i++) {\n                renderPath(ctx, paths[i]);\n              }\n            };\n\n            return MultiPathNode;\n          }(PathNode$2);\n\n          var RectNode$2 = function (PathNode) {\n            function RectNode() {\n              PathNode.apply(this, arguments);\n            }\n\n            extendStatic(RectNode, PathNode);\n            RectNode.prototype = Object.create(PathNode && PathNode.prototype);\n            RectNode.prototype.constructor = RectNode;\n            RectNode.fn = RectNode.prototype;\n            RectNode.fn.init = RectNode.fn.constructor;\n\n            RectNode.prototype.renderPoints = function renderPoints(ctx) {\n              var geometry = this.srcElement.geometry();\n              var ref = geometry.cornerRadius;\n              var rx = ref[0];\n              var ry = ref[1];\n\n              if (rx === 0 && ry === 0) {\n                var origin = geometry.origin;\n                var size = geometry.size;\n                ctx.rect(origin.x, origin.y, size.width, size.height);\n              } else {\n                PathNode.prototype.renderPoints.call(this, ctx, Path.fromRect(geometry));\n              }\n            };\n\n            return RectNode;\n          }(PathNode$2);\n\n          var TextNode$2 = function (PathNode) {\n            function TextNode() {\n              PathNode.apply(this, arguments);\n            }\n\n            extendStatic(TextNode, PathNode);\n            TextNode.prototype = Object.create(PathNode && PathNode.prototype);\n            TextNode.prototype.constructor = TextNode;\n            TextNode.fn = TextNode.prototype;\n            TextNode.fn.init = TextNode.fn.constructor;\n\n            TextNode.prototype.renderTo = function renderTo(ctx) {\n              var text = this.srcElement;\n              var pos = text.position();\n              var size = text.measure();\n              ctx.save();\n              this.setTransform(ctx);\n              this.setClip(ctx);\n              this.setOpacity(ctx);\n              ctx.beginPath();\n              ctx.font = text.options.font;\n              ctx.textAlign = 'left';\n\n              if (this.setFill(ctx)) {\n                ctx.fillText(text.content(), pos.x, pos.y + size.baseline);\n              }\n\n              if (this.setStroke(ctx)) {\n                this.setLineDash(ctx);\n                ctx.strokeText(text.content(), pos.x, pos.y + size.baseline);\n              }\n\n              ctx.restore();\n            };\n\n            return TextNode;\n          }(PathNode$2);\n\n          NODE_MAP$2.Arc = ArcNode$2;\n          NODE_MAP$2.Circle = CircleNode$2;\n          NODE_MAP$2.Group = GroupNode$2;\n          NODE_MAP$2.Image = ImageNode$2;\n          NODE_MAP$2.MultiPath = MultiPathNode$2;\n          NODE_MAP$2.Path = PathNode$2;\n          NODE_MAP$2.Rect = RectNode$2;\n          NODE_MAP$2.Text = TextNode$2;\n\n          var Surface$4 = function (BaseSurface) {\n            function Surface(element, options) {\n              BaseSurface.call(this, element, options);\n              this.element.innerHTML = this._template(this);\n              var canvas = this.element.firstElementChild;\n              var size = elementSize(element);\n              canvas.width = size.width;\n              canvas.height = size.height;\n              this._rootElement = canvas;\n              this._root = new RootNode$2(canvas, size);\n              this._mouseTrackHandler = this._trackMouse.bind(this);\n              bindEvents(this.element, {\n                click: this._mouseTrackHandler,\n                mousemove: this._mouseTrackHandler\n              });\n            }\n\n            extendStatic(Surface, BaseSurface);\n            Surface.prototype = Object.create(BaseSurface && BaseSurface.prototype);\n            Surface.prototype.constructor = Surface;\n            Surface.fn = Surface.prototype;\n            Surface.fn.init = Surface.fn.constructor;\n            var prototypeAccessors = {\n              type: {}\n            };\n\n            prototypeAccessors.type.get = function () {\n              return \"canvas\";\n            };\n\n            Surface.prototype.destroy = function destroy() {\n              BaseSurface.prototype.destroy.call(this);\n\n              if (this._root) {\n                this._root.destroy();\n\n                this._root = null;\n              }\n\n              if (this._searchTree) {\n                this._searchTree.clear();\n\n                delete this._searchTree;\n              }\n\n              if (this._cursor) {\n                this._cursor.destroy();\n\n                delete this._cursor;\n              }\n\n              unbindEvents(this.element, {\n                click: this._mouseTrackHandler,\n                mousemove: this._mouseTrackHandler\n              });\n            };\n\n            Surface.prototype.draw = function draw(element) {\n              BaseSurface.prototype.draw.call(this, element);\n\n              this._root.load([element], undefined, this.options.cors);\n\n              if (this._searchTree) {\n                this._searchTree.add([element]);\n              }\n            };\n\n            Surface.prototype.clear = function clear() {\n              BaseSurface.prototype.clear.call(this);\n\n              this._root.clear();\n\n              if (this._searchTree) {\n                this._searchTree.clear();\n              }\n\n              if (this._cursor) {\n                this._cursor.clear();\n              }\n            };\n\n            Surface.prototype.eventTarget = function eventTarget(e) {\n              if (this._searchTree) {\n                var point = this._surfacePoint(e);\n\n                var shape = this._searchTree.pointShape(point);\n\n                return shape;\n              }\n            };\n\n            Surface.prototype.image = function image() {\n              var ref = this;\n              var root = ref._root;\n              var rootElement = ref._rootElement;\n              var loadingStates = [];\n              root.traverse(function (childNode) {\n                if (childNode.loading) {\n                  loadingStates.push(childNode.loading);\n                }\n              });\n              var promise = createPromise();\n\n              var resolveDataURL = function () {\n                root._invalidate({\n                  fixedScale: true\n                });\n\n                try {\n                  var data = rootElement.toDataURL();\n                  promise.resolve(data);\n                } catch (e) {\n                  promise.reject(e);\n                }\n              };\n\n              promiseAll(loadingStates).then(resolveDataURL, resolveDataURL);\n              return promise;\n            };\n\n            Surface.prototype.suspendTracking = function suspendTracking() {\n              BaseSurface.prototype.suspendTracking.call(this);\n\n              if (this._searchTree) {\n                this._searchTree.clear();\n\n                delete this._searchTree;\n              }\n            };\n\n            Surface.prototype.resumeTracking = function resumeTracking() {\n              BaseSurface.prototype.resumeTracking.call(this);\n\n              if (!this._searchTree) {\n                this._searchTree = new ShapesQuadTree();\n                var childNodes = this._root.childNodes;\n                var rootElements = [];\n\n                for (var idx = 0; idx < childNodes.length; idx++) {\n                  rootElements.push(childNodes[idx].srcElement);\n                }\n\n                this._searchTree.add(rootElements);\n              }\n            };\n\n            Surface.prototype._resize = function _resize() {\n              this._rootElement.width = this._size.width;\n              this._rootElement.height = this._size.height;\n              this._root.size = this._size;\n\n              this._root.invalidate();\n            };\n\n            Surface.prototype._template = function _template() {\n              return \"<canvas style='width: 100%; height: 100%;'></canvas>\";\n            };\n\n            Surface.prototype._enableTracking = function _enableTracking() {\n              this._searchTree = new ShapesQuadTree();\n              this._cursor = new SurfaceCursor(this);\n\n              BaseSurface.prototype._enableTracking.call(this);\n            };\n\n            Surface.prototype._trackMouse = function _trackMouse(e) {\n              if (this._suspendedTracking) {\n                return;\n              }\n\n              var shape = this.eventTarget(e);\n\n              if (e.type !== \"click\") {\n                var currentShape = this._currentShape;\n\n                if (currentShape && currentShape !== shape) {\n                  this.trigger(\"mouseleave\", {\n                    element: currentShape,\n                    originalEvent: e,\n                    type: \"mouseleave\"\n                  });\n                }\n\n                if (shape && currentShape !== shape) {\n                  this.trigger(\"mouseenter\", {\n                    element: shape,\n                    originalEvent: e,\n                    type: \"mouseenter\"\n                  });\n                }\n\n                this.trigger(\"mousemove\", {\n                  element: shape,\n                  originalEvent: e,\n                  type: \"mousemove\"\n                });\n                this._currentShape = shape;\n              } else if (shape) {\n                this.trigger(\"click\", {\n                  element: shape,\n                  originalEvent: e,\n                  type: \"click\"\n                });\n              }\n            };\n\n            Object.defineProperties(Surface.prototype, prototypeAccessors);\n            return Surface;\n          }(Surface$2);\n\n          var instance$2;\n          var support$1;\n\n          var hasDocument = function () {\n            return typeof document !== \"undefined\";\n          };\n\n          var supportsCanvas = function () {\n            return hasDocument() && document.createElement(\"canvas\").getContext;\n          };\n\n          var supportsSVG = function () {\n            return hasDocument() && document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\");\n          };\n\n          var SurfaceFactory = function (Class$$1) {\n            function SurfaceFactory() {\n              Class$$1.call(this);\n              this._items = [{\n                name: \"svg\",\n                type: Surface$3\n              }, {\n                name: \"canvas\",\n                type: Surface$4\n              }];\n            }\n\n            extendStatic(SurfaceFactory, Class$$1);\n            SurfaceFactory.prototype = Object.create(Class$$1 && Class$$1.prototype);\n            SurfaceFactory.prototype.constructor = SurfaceFactory;\n            SurfaceFactory.fn = SurfaceFactory.prototype;\n            SurfaceFactory.fn.init = SurfaceFactory.fn.constructor;\n            var staticAccessors = {\n              support: {},\n              current: {}\n            };\n\n            staticAccessors.support.get = function () {\n              if (!support$1) {\n                support$1 = {\n                  canvas: supportsCanvas(),\n                  svg: supportsSVG()\n                };\n              }\n\n              return support$1;\n            };\n\n            staticAccessors.current.get = function () {\n              if (!instance$2) {\n                instance$2 = new SurfaceFactory();\n              }\n\n              return instance$2;\n            };\n\n            SurfaceFactory.prototype.create = function create(element, options) {\n              var items = this._items;\n              var match = items[0];\n\n              if (options && options.type) {\n                var preferred = options.type.toLowerCase();\n\n                for (var i = 0; i < items.length; i++) {\n                  if (items[i].name === preferred) {\n                    match = items[i];\n                    break;\n                  }\n                }\n              }\n\n              if (match) {\n                return new match.type(element, options);\n              }\n\n              kendo.logToConsole(\"Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\\n\" + \"- The browser does not support SVG and Canvas. User agent: \" + navigator.userAgent);\n            };\n\n            Object.defineProperties(SurfaceFactory, staticAccessors);\n            return SurfaceFactory;\n          }(Class);\n\n          var Surface = function (BaseSurface) {\n            function Surface() {\n              BaseSurface.apply(this, arguments);\n            }\n\n            extendStatic(Surface, BaseSurface);\n            Surface.prototype = Object.create(BaseSurface && BaseSurface.prototype);\n            Surface.prototype.constructor = Surface;\n            Surface.fn = Surface.prototype;\n            Surface.fn.init = Surface.fn.constructor;\n            var staticAccessors = {\n              support: {}\n            };\n\n            staticAccessors.support.get = function () {\n              return SurfaceFactory.support;\n            };\n\n            Surface.create = function create(element, options) {\n              return SurfaceFactory.current.create(element, options);\n            };\n\n            Object.defineProperties(Surface, staticAccessors);\n            return Surface;\n          }(Surface$2);\n\n          function exportGroup(group) {\n            var root = new RootNode({\n              skipBaseHref: true\n            });\n            var bbox = group.clippedBBox();\n            var rootGroup = group;\n\n            if (bbox) {\n              var origin = bbox.getOrigin();\n              var exportRoot = new Group();\n              exportRoot.transform(transform$1().translate(-origin.x, -origin.y));\n              exportRoot.children.push(group);\n              rootGroup = exportRoot;\n            }\n\n            root.load([rootGroup]);\n            var svg = \"<?xml version='1.0' ?><svg xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + root.render() + \"</svg>\";\n            root.destroy();\n            return svg;\n          }\n\n          var svg$1 = {\n            Surface: Surface$3,\n            RootNode: RootNode,\n            Node: Node,\n            GroupNode: GroupNode,\n            ArcNode: ArcNode,\n            CircleNode: CircleNode,\n            RectNode: RectNode,\n            ImageNode: ImageNode,\n            TextNode: TextNode,\n            PathNode: PathNode,\n            MultiPathNode: MultiPathNode,\n            DefinitionNode: DefinitionNode,\n            ClipNode: ClipNode,\n            GradientStopNode: GradientStopNode,\n            LinearGradientNode: LinearGradientNode,\n            RadialGradientNode: RadialGradientNode,\n            exportGroup: exportGroup\n          };\n          var canvas = {\n            Surface: Surface$4,\n            RootNode: RootNode$2,\n            Node: Node$2,\n            GroupNode: GroupNode$2,\n            ArcNode: ArcNode$2,\n            CircleNode: CircleNode$2,\n            RectNode: RectNode$2,\n            ImageNode: ImageNode$2,\n            TextNode: TextNode$2,\n            PathNode: PathNode$2,\n            MultiPathNode: MultiPathNode$2\n          };\n\n          function exportImage(group, options) {\n            var defaults = {\n              width: \"800px\",\n              height: \"600px\",\n              cors: \"Anonymous\"\n            };\n            var exportRoot = group;\n            var bbox = group.clippedBBox();\n\n            if (bbox) {\n              var origin = bbox.getOrigin();\n              exportRoot = new Group();\n              exportRoot.transform(transform$1().translate(-origin.x, -origin.y));\n              exportRoot.children.push(group);\n              var size = bbox.getSize();\n              defaults.width = size.width + \"px\";\n              defaults.height = size.height + \"px\";\n            }\n\n            var surfaceOptions = $.extend(defaults, options);\n            var container = document.createElement(\"div\");\n            var style = container.style;\n            style.display = \"none\";\n            style.width = surfaceOptions.width;\n            style.height = surfaceOptions.height;\n            document.body.appendChild(container);\n            var surface = new Surface$4(container, surfaceOptions);\n            surface.suspendTracking();\n            surface.draw(exportRoot);\n            var promise = surface.image();\n\n            var destroy = function () {\n              surface.destroy();\n              document.body.removeChild(container);\n            };\n\n            promise.then(destroy, destroy);\n            return promise;\n          }\n\n          function exportSVG(group, options) {\n            var svg = exportGroup(group);\n\n            if (!options || !options.raw) {\n              svg = \"data:image/svg+xml;base64,\" + encodeBase64(svg);\n            }\n\n            return createPromise().resolve(svg);\n          }\n          /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n\n          /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n\n          /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty, yoda */\n\n          /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n\n          var browser = supportBrowser || {};\n          /*\n          \n            XXX: to test:\n          \n            - cloneNodes function:\n              - drawing document containing canvas with page breaking\n              - drawing document with named radio <input>-s (should not clear selection)\n              - IE9/IE10 don't support el.dataset; do they copy user data?\n          \n            - repeating table headers/footers on page breaking\n          \n            - forceBreak, keepTogether\n          \n            - avoidLinks\n          \n           */\n\n          /* -----[ local vars ]----- */\n\n          function slice$1$1(thing) {\n            return Array.prototype.slice.call(thing);\n          }\n\n          var KENDO_PSEUDO_ELEMENT = \"KENDO-PSEUDO-ELEMENT\";\n          var IMAGE_CACHE = {};\n          var nodeInfo = {};\n          nodeInfo._root = nodeInfo;\n          /* -----[ Custom Text node to speed up rendering in kendo.pdf ]----- */\n\n          var inBrowser = typeof window !== 'undefined';\n          var microsoft = inBrowser ? browser.msie || browser.edge : false;\n\n          var TextRect = function (Text$$1) {\n            function TextRect(str, rect, options) {\n              Text$$1.call(this, str, rect.getOrigin(), options);\n              this._pdfRect = rect;\n            }\n\n            extendStatic(TextRect, Text$$1);\n            TextRect.prototype = Object.create(Text$$1 && Text$$1.prototype);\n            TextRect.prototype.constructor = TextRect;\n            TextRect.fn = TextRect.prototype;\n            TextRect.fn.init = TextRect.fn.constructor;\n\n            TextRect.prototype.rect = function rect() {\n              // this is the crux of it: we can avoid a call to\n              // measure(), which is what the base class does, since we\n              // already know the rect.  measure() is s-l-o-w.\n              return this._pdfRect;\n            };\n\n            TextRect.prototype.rawBBox = function rawBBox() {\n              // also let's avoid creating a new rectangle.\n              return this._pdfRect;\n            };\n\n            return TextRect;\n          }(Text);\n\n          function addClass(el, cls) {\n            if (el.classList) {\n              el.classList.add(cls);\n            } else {\n              el.className += \" \" + cls;\n            }\n          }\n\n          function removeClass(el, cls) {\n            if (el.classList) {\n              el.classList.remove(cls);\n            } else {\n              el.className = el.className.split(/\\s+/).reduce(function (a, word) {\n                if (word != cls) {\n                  a.push(word);\n                }\n\n                return a;\n              }, []).join(\" \");\n            }\n          }\n\n          function setCSS(el, styles) {\n            Object.keys(styles).forEach(function (key) {\n              el.style[key] = styles[key];\n            });\n          }\n\n          var matches = typeof Element !== \"undefined\" && Element.prototype && function (p) {\n            if (p.matches) {\n              return function (el, selector) {\n                return el.matches(selector);\n              };\n            }\n\n            if (p.webkitMatchesSelector) {\n              return function (el, selector) {\n                return el.webkitMatchesSelector(selector);\n              };\n            }\n\n            if (p.mozMatchesSelector) {\n              return function (el, selector) {\n                return el.mozMatchesSelector(selector);\n              };\n            }\n\n            if (p.msMatchesSelector) {\n              return function (el, selector) {\n                return el.msMatchesSelector(selector);\n              };\n            }\n\n            return function (s) {\n              return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n            };\n          }(Element.prototype);\n\n          function closest(el, selector) {\n            if (el.closest) {\n              return el.closest(selector);\n            } // IE: stringifying rather than simply comparing with `document`,\n            // which is not iframe-proof and fails in editor export \n            // https://github.com/telerik/kendo/issues/6721\n\n\n            while (el && !/^\\[object (?:HTML)?Document\\]$/.test(String(el))) {\n              if (el.nodeType == 1\n              /* Element */\n              && matches(el, selector)) {\n                return el;\n              }\n\n              el = el.parentNode;\n            }\n          } // clone nodes ourselves, so that we redraw <canvas> (DOM or\n          // jQuery clone will not)\n\n\n          var cloneNodes = function ($) {\n            if ($) {\n              // if we have Kendo and jQuery, use this version as it will\n              // maintain proper links between cloned element and Kendo\n              // widgets (i.e. it clones jQuery data(), which isn't the same\n              // as element's data attributes).\n              // https://github.com/telerik/kendo-ui-core/issues/2750\n              return function cloneNodes(el) {\n                var clone = el.cloneNode(false);\n\n                if (el.nodeType == 1\n                /* Element */\n                ) {\n                  var $el = $(el),\n                      $clone = $(clone),\n                      i;\n                  var data = $el.data();\n\n                  for (i in data) {\n                    $clone.data(i, data[i]);\n                  }\n\n                  if (/^canvas$/i.test(el.tagName)) {\n                    clone.getContext(\"2d\").drawImage(el, 0, 0);\n                  } else if (/^(?:input|select|textarea|option)$/i.test(el.tagName)) {\n                    // drop the name attributes so that we don't affect the selection of the\n                    // original nodes (i.e. checked status of radio buttons) when we insert our copy\n                    // into the DOM.  https://github.com/telerik/kendo/issues/5409\n                    clone.removeAttribute(\"id\");\n                    clone.removeAttribute(\"name\");\n\n                    if (!/^textarea$/i.test(el.tagName)) {\n                      clone.value = el.value;\n                    }\n\n                    clone.checked = el.checked;\n                    clone.selected = el.selected;\n                  }\n\n                  for (i = el.firstChild; i; i = i.nextSibling) {\n                    clone.appendChild(cloneNodes(i));\n                  }\n                }\n\n                return clone;\n              };\n            } else {\n              // the no-jQuery version\n              return function cloneNodes(el) {\n                var clone = function dive(node) {\n                  var clone = node.cloneNode(false);\n\n                  if (node._kendoExportVisual) {\n                    clone._kendoExportVisual = node._kendoExportVisual;\n                  }\n\n                  for (var i = node.firstChild; i; i = i.nextSibling) {\n                    clone.appendChild(dive(i));\n                  }\n\n                  return clone;\n                }(el); // re-draw canvases - https://github.com/telerik/kendo/issues/4872\n\n\n                var canvases = el.querySelectorAll(\"canvas\");\n\n                if (canvases.length) {\n                  slice$1$1(clone.querySelectorAll(\"canvas\")).forEach(function (canvas$$1, i) {\n                    canvas$$1.getContext(\"2d\").drawImage(canvases[i], 0, 0);\n                  });\n                } // remove \"name\" attributes from <input> elements -\n                // https://github.com/telerik/kendo/issues/5409\n\n\n                var orig = el.querySelectorAll(\"input, select, textarea, option\");\n                slice$1$1(clone.querySelectorAll(\"input, select, textarea, option\")).forEach(function (el, i) {\n                  el.removeAttribute(\"id\");\n                  el.removeAttribute(\"name\");\n\n                  if (!/^textarea$/i.test(el.tagName)) {\n                    el.value = orig[i].value;\n                  }\n\n                  el.checked = orig[i].checked;\n                  el.selected = orig[i].selected;\n                });\n                return clone;\n              };\n            }\n          }(typeof window !== \"undefined\" && window.kendo && window.kendo.jQuery);\n\n          function getXY(thing) {\n            if (typeof thing == \"number\") {\n              return {\n                x: thing,\n                y: thing\n              };\n            }\n\n            if (Array.isArray(thing)) {\n              return {\n                x: thing[0],\n                y: thing[1]\n              };\n            }\n\n            return {\n              x: thing.x,\n              y: thing.y\n            };\n          }\n\n          function drawDOM(element, options) {\n            if (!options) {\n              options = {};\n            }\n\n            var promise = createPromise();\n\n            if (!element) {\n              return promise.reject(\"No element to export\");\n            }\n\n            if (typeof window.getComputedStyle != \"function\") {\n              throw new Error(\"window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.\");\n            }\n\n            kendo.pdf.defineFont(getFontFaces(element.ownerDocument));\n            var scale = getXY(options.scale || 1);\n\n            function doOne(element) {\n              var group = new Group(); // translate to start of page\n\n              var pos = element.getBoundingClientRect();\n              setTransform$1(group, [scale.x, 0, 0, scale.y, -pos.left * scale.x, -pos.top * scale.y]);\n              nodeInfo._clipbox = false;\n              nodeInfo._matrix = Matrix.unit();\n              nodeInfo._stackingContext = {\n                element: element,\n                group: group\n              };\n\n              if (options.avoidLinks === true) {\n                nodeInfo._avoidLinks = \"a\";\n              } else {\n                nodeInfo._avoidLinks = options.avoidLinks;\n              }\n\n              addClass(element, \"k-pdf-export\");\n              renderElement(element, group);\n              removeClass(element, \"k-pdf-export\");\n              return group;\n            }\n\n            cacheImages([element], function () {\n              var forceBreak = options && options.forcePageBreak;\n              var hasPaperSize = options && options.paperSize && options.paperSize != \"auto\";\n              var paperOptions = kendo.pdf.getPaperOptions(function (key, def) {\n                if (key == \"paperSize\") {\n                  // PDF.getPaperOptions croaks on \"auto\", just pass dummy A4 as we might\n                  // still be interested in margins.\n                  return hasPaperSize ? options[key] : \"A4\";\n                }\n\n                return key in options ? options[key] : def;\n              });\n              var pageWidth = hasPaperSize && paperOptions.paperSize[0];\n              var pageHeight = hasPaperSize && paperOptions.paperSize[1];\n              var margin = options.margin && paperOptions.margin;\n              var hasMargin = Boolean(margin);\n\n              if (forceBreak || pageHeight) {\n                if (!margin) {\n                  margin = {\n                    left: 0,\n                    top: 0,\n                    right: 0,\n                    bottom: 0\n                  };\n                } // we want paper size and margin to be unaffected by\n                // scaling in the output, so we have to reverse-scale\n                // before our calculations begin.\n\n\n                if (pageWidth) {\n                  pageWidth /= scale.x;\n                }\n\n                if (pageHeight) {\n                  pageHeight /= scale.y;\n                }\n\n                margin.left /= scale.x;\n                margin.right /= scale.x;\n                margin.top /= scale.y;\n                margin.bottom /= scale.y;\n                var group = new Group({\n                  pdf: {\n                    multiPage: true,\n                    paperSize: hasPaperSize ? paperOptions.paperSize : \"auto\",\n                    _ignoreMargin: hasMargin // HACK!  see exportPDF in pdf/drawing.js\n\n                  }\n                });\n                handlePageBreaks(function (x) {\n                  if (options.progress) {\n                    var canceled = false,\n                        pageNum = 0;\n\n                    (function next() {\n                      if (pageNum < x.pages.length) {\n                        var page = doOne(x.pages[pageNum]);\n                        group.append(page);\n                        options.progress({\n                          page: page,\n                          pageNum: ++pageNum,\n                          totalPages: x.pages.length,\n                          cancel: function () {\n                            canceled = true;\n                          }\n                        });\n\n                        if (!canceled) {\n                          setTimeout(next);\n                        } else {\n                          // XXX: should we also fail() the deferred object?\n                          x.container.parentNode.removeChild(x.container);\n                        }\n                      } else {\n                        x.container.parentNode.removeChild(x.container);\n                        promise.resolve(group);\n                      }\n                    })();\n                  } else {\n                    x.pages.forEach(function (page) {\n                      group.append(doOne(page));\n                    });\n                    x.container.parentNode.removeChild(x.container);\n                    promise.resolve(group);\n                  }\n                }, element, forceBreak, pageWidth ? pageWidth - margin.left - margin.right : null, pageHeight ? pageHeight - margin.top - margin.bottom : null, margin, options);\n              } else {\n                promise.resolve(doOne(element));\n              }\n            });\n\n            function makeTemplate(template) {\n              if (template != null) {\n                if (typeof template == \"string\") {\n                  template = kendo.template(template.replace(/^\\s+|\\s+$/g, \"\"));\n                }\n\n                if (typeof template == \"function\") {\n                  return function (data) {\n                    var el = template(data);\n\n                    if (el && typeof el == \"string\") {\n                      var div = document.createElement(\"div\");\n                      div.innerHTML = el;\n                      el = div.firstElementChild;\n                    }\n\n                    return el;\n                  };\n                } // assumed DOM element\n\n\n                return function () {\n                  return template.cloneNode(true);\n                };\n              }\n            }\n\n            function handlePageBreaks(callback, element, forceBreak, pageWidth, pageHeight, margin, options) {\n              var template = makeTemplate(options.template);\n              var doc = element.ownerDocument;\n              var pages = [];\n              var copy = options._destructive ? element : cloneNodes(element);\n              var container = doc.createElement(\"KENDO-PDF-DOCUMENT\");\n              var adjust = 0; // make sure <tfoot> elements are at the end (Grid widget\n              // places TFOOT before TBODY, tricking our algorithm to\n              // insert a page break right after the header).\n              // https://github.com/telerik/kendo/issues/4699\n\n              slice$1$1(copy.querySelectorAll(\"tfoot\")).forEach(function (tfoot) {\n                tfoot.parentNode.appendChild(tfoot);\n              }); // remember the index of each LI from an ordered list.\n              // we'll use it to reconstruct the proper numbering.\n\n              slice$1$1(copy.querySelectorAll(\"ol\")).forEach(function (ol) {\n                slice$1$1(ol.children).forEach(function (li, index) {\n                  li.setAttribute(\"kendo-split-index\", index);\n                });\n              });\n              setCSS(container, {\n                display: \"block\",\n                position: \"absolute\",\n                boxSizing: \"content-box\",\n                left: \"-10000px\",\n                top: \"-10000px\"\n              });\n\n              if (pageWidth) {\n                // subtle: if we don't set the width *and* margins here, the layout in this\n                // container will be different from the one in our final page elements, and we'll\n                // split at the wrong places.\n                setCSS(container, {\n                  width: pageWidth + \"px\",\n                  paddingLeft: margin.left + \"px\",\n                  paddingRight: margin.right + \"px\"\n                }); // when the first element has a margin-top (i.e. a <h1>) the page will be\n                // inadvertently enlarged by that number (the browser will report the container's\n                // bounding box top to start at the element's top, rather than including its\n                // margin).  Adding overflow: hidden seems to fix it.\n                //\n                // to understand the difference, try the following snippets in your browser:\n                //\n                // 1. <div style=\"background: yellow\">\n                //      <h1 style=\"margin: 3em\">Foo</h1>\n                //    </div>\n                //\n                // 2. <div style=\"background: yellow; overflow: hidden\">\n                //      <h1 style=\"margin: 3em\">Foo</h1>\n                //    </div>\n                //\n                // this detail is not important when automatic page breaking is not requested, hence\n                // doing it only if pageWidth is defined.\n\n                setCSS(copy, {\n                  overflow: \"hidden\"\n                });\n              }\n\n              element.parentNode.insertBefore(container, element);\n              container.appendChild(copy); // With cache disabled, images will still have height zero until their `complete` attribute\n              // is true.  `whenImagesAreActuallyLoaded` will wait for it.\n\n              if (options.beforePageBreak) {\n                whenImagesAreActuallyLoaded([container], function () {\n                  options.beforePageBreak(container, doPageBreak);\n                });\n              } else {\n                whenImagesAreActuallyLoaded([container], doPageBreak);\n              }\n\n              function doPageBreak() {\n                if (forceBreak != \"-\" || pageHeight) {\n                  splitElement(copy);\n                }\n\n                {\n                  var page = makePage();\n                  copy.parentNode.insertBefore(page, copy);\n                  page.appendChild(copy);\n                }\n\n                if (template) {\n                  pages.forEach(function (page, i) {\n                    var el = template({\n                      element: page,\n                      pageNum: i + 1,\n                      totalPages: pages.length\n                    });\n\n                    if (el) {\n                      page.appendChild(el);\n                    }\n                  });\n                }\n\n                cacheImages(pages, callback.bind(null, {\n                  pages: pages,\n                  container: container\n                }));\n              }\n\n              function keepTogether(el) {\n                if (options.keepTogether && matches(el, options.keepTogether) && el.offsetHeight <= pageHeight - adjust) {\n                  return true;\n                }\n\n                var tag = el.tagName;\n\n                if (/^h[1-6]$/i.test(tag) && el.offsetHeight >= pageHeight - adjust) {\n                  return false;\n                }\n\n                return el.getAttribute(\"data-kendo-chart\") || /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName);\n              }\n\n              function splitElement(element) {\n                if (element.tagName == \"TABLE\") {\n                  setCSS(element, {\n                    tableLayout: \"fixed\"\n                  });\n                }\n\n                if (keepTogether(element)) {\n                  return;\n                }\n\n                var style = getComputedStyle$1(element);\n                var bottomPadding = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n                var bottomBorder = parseFloat(getPropertyValue(style, \"border-bottom-width\"));\n                var saveAdjust = adjust;\n                adjust += bottomPadding + bottomBorder;\n                var isFirst = true;\n\n                for (var el = element.firstChild; el; el = el.nextSibling) {\n                  if (el.nodeType == 1\n                  /* Element */\n                  ) {\n                    isFirst = false;\n\n                    if (matches(el, forceBreak)) {\n                      breakAtElement(el);\n                      continue;\n                    }\n\n                    if (!pageHeight) {\n                      // we're in \"manual breaks mode\"\n                      splitElement(el);\n                      continue;\n                    }\n\n                    if (!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle$1(el), \"position\"))) {\n                      continue;\n                    }\n\n                    var fall = fallsOnMargin(el);\n\n                    if (fall == 1) {\n                      // element starts on next page, break before anyway.\n                      breakAtElement(el);\n                    } else if (fall) {\n                      // elements ends up on next page, or possibly doesn't fit on a page at\n                      // all.  break before it anyway if it's an <img> or <tr>, otherwise\n                      // attempt to split.\n                      if (keepTogether(el)) {\n                        breakAtElement(el);\n                      } else {\n                        splitElement(el);\n                      }\n                    } else {\n                      splitElement(el);\n                    }\n                  } else if (el.nodeType == 3\n                  /* Text */\n                  && pageHeight) {\n                    splitText(el, isFirst);\n                    isFirst = false;\n                  }\n                }\n\n                adjust = saveAdjust;\n              }\n\n              function firstInParent(el) {\n                var p = el.parentNode,\n                    first = p.firstChild;\n\n                if (el === first) {\n                  return true;\n                }\n\n                if (el === p.children[0]) {\n                  if (first.nodeType == 7\n                  /* comment */\n                  || first.nodeType == 8\n                  /* processing instruction */\n                  ) {\n                    return true;\n                  }\n\n                  if (first.nodeType == 3\n                  /* text */\n                  ) {\n                    // if whitespace only we can probably consider it's first\n                    return !/\\S/.test(first.data);\n                  }\n                }\n\n                return false;\n              }\n\n              function breakAtElement(el) {\n                if (el.nodeType == 1 && el !== copy && firstInParent(el)) {\n                  return breakAtElement(el.parentNode);\n                }\n\n                var table, colgroup, thead, grid, gridHead;\n                table = closest(el, \"table\");\n                colgroup = table && table.querySelector(\"colgroup\");\n\n                if (options.repeatHeaders) {\n                  thead = table && table.querySelector(\"thead\"); // If we break page in a Kendo Grid, repeat its header.  This ugly hack is\n                  // necessary because a scrollable grid will keep the header in a separate\n                  // <table> element from its content.\n                  //\n                  // XXX: This is likely to break as soon as the widget HTML is modified.\n\n                  grid = closest(el, \".k-grid.k-widget\");\n\n                  if (grid && grid.querySelector(\".k-auto-scrollable\")) {\n                    gridHead = grid.querySelector(\".k-grid-header\");\n                  }\n                }\n\n                var page = makePage();\n                var range = doc.createRange();\n                range.setStartBefore(copy);\n                range.setEndBefore(el);\n                page.appendChild(range.extractContents());\n                copy.parentNode.insertBefore(page, copy);\n                preventBulletOnListItem(el.parentNode);\n\n                if (table) {\n                  table = closest(el, \"table\"); // that's the <table> on next page!\n\n                  if (options.repeatHeaders && thead) {\n                    table.insertBefore(thead.cloneNode(true), table.firstChild);\n                  }\n\n                  if (colgroup) {\n                    table.insertBefore(colgroup.cloneNode(true), table.firstChild);\n                  }\n                }\n\n                if (options.repeatHeaders && gridHead) {\n                  grid = closest(el, \".k-grid.k-widget\");\n                  grid.insertBefore(gridHead.cloneNode(true), grid.firstChild);\n                }\n              }\n\n              function makePage() {\n                var page = doc.createElement(\"KENDO-PDF-PAGE\");\n                setCSS(page, {\n                  display: \"block\",\n                  boxSizing: \"content-box\",\n                  width: pageWidth ? pageWidth + \"px\" : \"auto\",\n                  padding: margin.top + \"px \" + margin.right + \"px \" + margin.bottom + \"px \" + margin.left + \"px\",\n                  // allow absolutely positioned elements to be relative to current page\n                  position: \"relative\",\n                  // without the following we might affect layout of subsequent pages\n                  height: pageHeight ? pageHeight + \"px\" : \"auto\",\n                  overflow: pageHeight || pageWidth ? \"hidden\" : \"visible\",\n                  clear: \"both\"\n                }); // debug\n                // $(\"<div>\").css({\n                //     position  : \"absolute\",\n                //     left      : margin.left,\n                //     top       : margin.top,\n                //     width     : pageWidth,\n                //     height    : pageHeight,\n                //     boxSizing : \"border-box\",\n                //     background: \"rgba(255, 255, 0, 0.5)\"\n                //     //border    : \"1px solid red\"\n                // }).appendTo(page);\n\n                if (options && options.pageClassName) {\n                  page.className = options.pageClassName;\n                }\n\n                pages.push(page);\n                return page;\n              }\n\n              function fallsOnMargin(thing) {\n                var box = thing.getBoundingClientRect();\n\n                if (box.width === 0 || box.height === 0) {\n                  // I'd say an element with dimensions zero fits on current page.\n                  return 0;\n                }\n\n                var top = copy.getBoundingClientRect().top;\n                var available = pageHeight - adjust;\n                return box.height > available ? 3 : box.top - top > available ? 1 : box.bottom - top > available ? 2 : 0;\n              }\n\n              function splitText(node, isFirst) {\n                if (!/\\S/.test(node.data)) {\n                  return;\n                }\n\n                var len = node.data.length;\n                var range = doc.createRange();\n                range.selectNodeContents(node);\n                var fall = fallsOnMargin(range);\n\n                if (!fall) {\n                  return; // the whole text fits on current page\n                }\n\n                var nextnode = node;\n\n                if (fall == 1) {\n                  // starts on next page, break before anyway.\n                  if (isFirst) {\n                    // avoid leaving an empty <p>, <li>, etc. on previous page.\n                    breakAtElement(node.parentNode);\n                  } else {\n                    breakAtElement(node);\n                  }\n                } else {\n                  (function findEOP(min, pos, max) {\n                    range.setEnd(node, pos);\n\n                    if (min == pos || pos == max) {\n                      return pos;\n                    }\n\n                    if (fallsOnMargin(range)) {\n                      return findEOP(min, min + pos >> 1, pos);\n                    } else {\n                      return findEOP(pos, pos + max >> 1, max);\n                    }\n                  })(0, len >> 1, len);\n\n                  if (!/\\S/.test(range.toString()) && isFirst) {\n                    // avoid leaving an empty <p>, <li>, etc. on previous page.\n                    breakAtElement(node.parentNode);\n                  } else {\n                    // This is only needed for IE, but it feels cleaner to do it anyway.  Without\n                    // it, IE will truncate a very long text (playground/pdf-long-text-2.html).\n                    nextnode = node.splitText(range.endOffset);\n                    var page = makePage();\n                    range.setStartBefore(copy);\n                    page.appendChild(range.extractContents());\n                    copy.parentNode.insertBefore(page, copy);\n                    preventBulletOnListItem(nextnode.parentNode);\n                  }\n                }\n\n                splitText(nextnode);\n              }\n\n              function preventBulletOnListItem(el) {\n                // set a hint on continued LI elements, to tell the\n                // renderer not to draw the bullet again.\n                // https://github.com/telerik/kendo-ui-core/issues/2732\n                var li = closest(el, \"li\");\n\n                if (li) {\n                  li.setAttribute(\"kendo-no-bullet\", \"1\");\n                  preventBulletOnListItem(li.parentNode);\n                }\n              }\n            }\n\n            return promise;\n          } // This is needed for the Spreadsheet print functionality.  Since\n          // there we only need to draw text, this cuts through the ceremony\n          // of drawDOM/renderElement and renders the text node directly.\n\n\n          function drawText(element) {\n            var group = new Group();\n            nodeInfo._clipbox = false;\n            nodeInfo._matrix = Matrix.unit();\n            nodeInfo._stackingContext = {\n              element: element,\n              group: group\n            };\n            pushNodeInfo(element, getComputedStyle$1(element), group);\n\n            if (element.firstChild.nodeType == 3\n            /* Text */\n            ) {\n              // avoid the penalty of renderElement\n              renderText(element, element.firstChild, group);\n            } else {\n              _renderElement(element, group);\n            }\n\n            popNodeInfo();\n            return group;\n          }\n\n          var parseBackgroundImage = function () {\n            var tok_linear_gradient = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\\s*)\\(/; //var tok_radial_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?radial-gradient\\s*)\\(/;\n\n            var tok_percent = /^([-0-9.]+%)/;\n            var tok_length = /^([-0-9.]+px)/;\n            var tok_keyword = /^(left|right|top|bottom|to|center)\\W/;\n            var tok_angle = /^([-0-9.]+(deg|grad|rad|turn)|0)/;\n            var tok_whitespace = /^(\\s+)/;\n            var tok_popen = /^(\\()/;\n            var tok_pclose = /^(\\))/;\n            var tok_comma = /^(,)/;\n            var tok_url = /^(url)\\(/;\n            var tok_content = /^(.*?)\\)/;\n            var cache1 = {},\n                cache2 = {};\n\n            function parse(input) {\n              var orig = input;\n\n              if (hasOwnProperty(cache1, orig)) {\n                return cache1[orig];\n              }\n\n              function skip_ws() {\n                var m = tok_whitespace.exec(input);\n\n                if (m) {\n                  input = input.substr(m[1].length);\n                }\n              }\n\n              function read(token) {\n                skip_ws();\n                var m = token.exec(input);\n\n                if (m) {\n                  input = input.substr(m[1].length);\n                  return m[1];\n                }\n              }\n\n              function read_stop() {\n                var color = kendo.parseColor(input, true);\n                var length, percent;\n\n                if (color) {\n                  var match = /^#[0-9a-f]+/i.exec(input) || /^rgba?\\(.*?\\)/i.exec(input) || /^..*?\\b/.exec(input); // maybe named color\n\n                  input = input.substr(match[0].length);\n                  color = color.toRGB();\n\n                  if (!(length = read(tok_length))) {\n                    percent = read(tok_percent);\n                  }\n\n                  return {\n                    color: color,\n                    length: length,\n                    percent: percent\n                  };\n                }\n              }\n\n              function read_linear_gradient(propName) {\n                var angle;\n                var to1, to2;\n                var stops = [];\n                var reverse = false;\n\n                if (read(tok_popen)) {\n                  // 1. [ <angle> || to <side-or-corner>, ]?\n                  angle = read(tok_angle);\n\n                  if (angle == \"0\") {\n                    angle = \"0deg\"; // Edge\n                  }\n\n                  if (angle) {\n                    angle = parseAngle(angle);\n                    read(tok_comma);\n                  } else {\n                    to1 = read(tok_keyword);\n\n                    if (to1 == \"to\") {\n                      to1 = read(tok_keyword);\n                    } else if (to1 && /^-/.test(propName)) {\n                      reverse = true;\n                    }\n\n                    to2 = read(tok_keyword);\n                    read(tok_comma);\n                  }\n\n                  if (/-moz-/.test(propName) && angle == null && to1 == null) {\n                    var x = read(tok_percent),\n                        y = read(tok_percent);\n                    reverse = true;\n\n                    if (x == \"0%\") {\n                      to1 = \"left\";\n                    } else if (x == \"100%\") {\n                      to1 = \"right\";\n                    }\n\n                    if (y == \"0%\") {\n                      to2 = \"top\";\n                    } else if (y == \"100%\") {\n                      to2 = \"bottom\";\n                    }\n\n                    read(tok_comma);\n                  } // 2. color stops\n\n\n                  while (input && !read(tok_pclose)) {\n                    var stop = read_stop();\n\n                    if (!stop) {\n                      break;\n                    }\n\n                    stops.push(stop);\n                    read(tok_comma);\n                  }\n\n                  return {\n                    type: \"linear\",\n                    angle: angle,\n                    to: to1 && to2 ? to1 + \" \" + to2 : to1 ? to1 : to2 ? to2 : null,\n                    stops: stops,\n                    reverse: reverse\n                  };\n                }\n              }\n\n              function read_url() {\n                if (read(tok_popen)) {\n                  var url = read(tok_content);\n                  url = url.replace(/^['\"]+|[\"']+$/g, \"\");\n                  read(tok_pclose);\n                  return {\n                    type: \"url\",\n                    url: url\n                  };\n                }\n              }\n\n              var tok;\n\n              if (tok = read(tok_linear_gradient)) {\n                tok = read_linear_gradient(tok);\n              } else if (tok = read(tok_url)) {\n                tok = read_url();\n              }\n\n              return cache1[orig] = tok || {\n                type: \"none\"\n              };\n            }\n\n            return function (input) {\n              if (hasOwnProperty(cache2, input)) {\n                return cache2[input];\n              }\n\n              return cache2[input] = splitProperty(input).map(parse);\n            };\n          }();\n\n          var splitProperty = function () {\n            var cache = {};\n            return function (input, separator) {\n              if (!separator) {\n                separator = /^\\s*,\\s*/;\n              }\n\n              var cacheKey = input + separator;\n\n              if (hasOwnProperty(cache, cacheKey)) {\n                return cache[cacheKey];\n              }\n\n              var ret = [];\n              var last$$1 = 0,\n                  pos = 0;\n              var in_paren = 0;\n              var in_string = false;\n              var m;\n\n              function looking_at(rx) {\n                return m = rx.exec(input.substr(pos));\n              }\n\n              function trim(str) {\n                return str.replace(/^\\s+|\\s+$/g, \"\");\n              }\n\n              while (pos < input.length) {\n                if (!in_string && looking_at(/^[\\(\\[\\{]/)) {\n                  in_paren++;\n                  pos++;\n                } else if (!in_string && looking_at(/^[\\)\\]\\}]/)) {\n                  in_paren--;\n                  pos++;\n                } else if (!in_string && looking_at(/^[\\\"\\']/)) {\n                  in_string = m[0];\n                  pos++;\n                } else if (in_string == \"'\" && looking_at(/^\\\\\\'/)) {\n                  pos += 2;\n                } else if (in_string == '\"' && looking_at(/^\\\\\\\"/)) {\n                  pos += 2;\n                } else if (in_string == \"'\" && looking_at(/^\\'/)) {\n                  in_string = false;\n                  pos++;\n                } else if (in_string == '\"' && looking_at(/^\\\"/)) {\n                  in_string = false;\n                  pos++;\n                } else if (looking_at(separator)) {\n                  if (!in_string && !in_paren && pos > last$$1) {\n                    ret.push(trim(input.substring(last$$1, pos)));\n                    last$$1 = pos + m[0].length;\n                  }\n\n                  pos += m[0].length;\n                } else {\n                  pos++;\n                }\n              }\n\n              if (last$$1 < pos) {\n                ret.push(trim(input.substring(last$$1, pos)));\n              }\n\n              return cache[cacheKey] = ret;\n            };\n          }();\n\n          var getFontURL = function (cache) {\n            return function (el) {\n              // XXX: for IE we get here the whole cssText of the rule,\n              // because the computedStyle.src is empty.  Next time we need\n              // to fix these regexps we better write a CSS parser. :-\\\n              var url = cache[el];\n\n              if (!url) {\n                var m;\n\n                if (m = /url\\((['\"]?)([^'\")]*?)\\1\\)\\s+format\\((['\"]?)truetype\\3\\)/.exec(el)) {\n                  url = cache[el] = m[2];\n                } else if (m = /url\\((['\"]?)([^'\")]*?\\.ttf)\\1\\)/.exec(el)) {\n                  url = cache[el] = m[2];\n                }\n              }\n\n              return url;\n            };\n          }(Object.create ? Object.create(null) : {});\n\n          var getFontHeight = function (cache) {\n            return function (font) {\n              var height = cache[font];\n\n              if (height == null) {\n                height = cache[font] = kendoUtil.measureText(\"Mapq\", {\n                  font: font\n                }).height;\n              }\n\n              return height;\n            };\n          }(Object.create ? Object.create(null) : {});\n\n          function getFontFaces(doc) {\n            if (doc == null) {\n              doc = document;\n            }\n\n            var result = {};\n\n            for (var i = 0; i < doc.styleSheets.length; ++i) {\n              doStylesheet(doc.styleSheets[i]);\n            }\n\n            return result;\n\n            function doStylesheet(ss) {\n              if (ss) {\n                var rules = null;\n\n                try {\n                  rules = ss.cssRules;\n                } catch (ex) {}\n\n                if (rules) {\n                  addRules(ss, rules);\n                }\n              }\n            }\n\n            function findFonts(rule) {\n              var src = getPropertyValue(rule.style, \"src\");\n\n              if (src) {\n                return splitProperty(src).reduce(function (a, el) {\n                  var font = getFontURL(el);\n\n                  if (font) {\n                    a.push(font);\n                  }\n\n                  return a;\n                }, []);\n              } else {\n                // Internet Explorer\n                // XXX: this is gross.  should work though for valid CSS.\n                var font = getFontURL(rule.cssText);\n                return font ? [font] : [];\n              }\n            }\n\n            function addRules(styleSheet, rules) {\n              for (var i = 0; i < rules.length; ++i) {\n                var r = rules[i];\n\n                switch (r.type) {\n                  case 3:\n                    // CSSImportRule\n                    doStylesheet(r.styleSheet);\n                    break;\n\n                  case 5:\n                    // CSSFontFaceRule\n                    var style = r.style;\n                    var family = splitProperty(getPropertyValue(style, \"font-family\"));\n                    var bold = /^([56789]00|bold)$/i.test(getPropertyValue(style, \"font-weight\"));\n                    var italic = \"italic\" == getPropertyValue(style, \"font-style\");\n                    var src = findFonts(r);\n\n                    if (src.length > 0) {\n                      addRule(styleSheet, family, bold, italic, src[0]);\n                    }\n\n                }\n              }\n            }\n\n            function addRule(styleSheet, names, bold, italic, url) {\n              // We get full resolved absolute URLs in Chrome, but sadly\n              // not in Firefox.\n              if (!/^data:/i.test(url)) {\n                if (!(/^[^\\/:]+:\\/\\//.test(url) || /^\\//.test(url))) {\n                  url = String(styleSheet.href).replace(/[^\\/]*$/, \"\") + url;\n                }\n              }\n\n              names.forEach(function (name) {\n                name = name.replace(/^(['\"]?)(.*?)\\1$/, \"$2\"); // it's quoted\n\n                if (bold) {\n                  name += \"|bold\";\n                }\n\n                if (italic) {\n                  name += \"|italic\";\n                }\n\n                result[name] = url;\n              });\n            }\n          }\n\n          function hasOwnProperty(obj, key) {\n            return Object.prototype.hasOwnProperty.call(obj, key);\n          }\n\n          function getCounter(name) {\n            name = \"_counter_\" + name;\n            return nodeInfo[name];\n          }\n\n          function getAllCounters(name) {\n            var values = [],\n                p = nodeInfo;\n            name = \"_counter_\" + name;\n\n            while (p) {\n              if (hasOwnProperty(p, name)) {\n                values.push(p[name]);\n              }\n\n              p = Object.getPrototypeOf(p);\n            }\n\n            return values.reverse();\n          }\n\n          function incCounter(name, inc) {\n            var p = nodeInfo;\n            name = \"_counter_\" + name;\n\n            while (p && !hasOwnProperty(p, name)) {\n              p = Object.getPrototypeOf(p);\n            }\n\n            if (!p) {\n              p = nodeInfo._root;\n            }\n\n            p[name] = (p[name] || 0) + (inc == null ? 1 : inc);\n          }\n\n          function resetCounter(name, val) {\n            name = \"_counter_\" + name;\n            nodeInfo[name] = val == null ? 0 : val;\n          }\n\n          function doCounters(a, f, def) {\n            for (var i = 0; i < a.length;) {\n              var name = a[i++];\n              var val = parseFloat(a[i]);\n\n              if (isNaN(val)) {\n                f(name, def);\n              } else {\n                f(name, val);\n                ++i;\n              }\n            }\n          }\n\n          function updateCounters(style) {\n            var counterReset = getPropertyValue(style, \"counter-reset\");\n\n            if (counterReset) {\n              doCounters(splitProperty(counterReset, /^\\s+/), resetCounter, 0);\n            }\n\n            var counterIncrement = getPropertyValue(style, \"counter-increment\");\n\n            if (counterIncrement) {\n              doCounters(splitProperty(counterIncrement, /^\\s+/), incCounter, 1);\n            }\n          }\n\n          function parseColor$1(str, css) {\n            var color = kendo.parseColor(str, true);\n\n            if (color) {\n              color = color.toRGB();\n\n              if (css) {\n                color = color.toCssRgba();\n              } else if (color.a === 0) {\n                color = null;\n              }\n            }\n\n            return color;\n          }\n\n          function whenImagesAreActuallyLoaded(elements, callback) {\n            var pending = 0;\n            elements.forEach(function (el) {\n              var images = el.querySelectorAll(\"img\");\n\n              for (var i = 0; i < images.length; ++i) {\n                var img = images[i];\n\n                if (!img.complete) {\n                  pending++;\n                  img.onload = img.onerror = next;\n                }\n              }\n            });\n\n            if (!pending) {\n              next();\n            }\n\n            function next() {\n              if (--pending <= 0) {\n                callback();\n              }\n            }\n          }\n\n          function cacheImages(elements, callback) {\n            var urls = [];\n\n            function add(url) {\n              if (!IMAGE_CACHE[url]) {\n                IMAGE_CACHE[url] = true;\n                urls.push(url);\n              }\n            }\n\n            elements.forEach(function dive(element) {\n              if (/^img$/i.test(element.tagName)) {\n                add(element.src);\n              }\n\n              parseBackgroundImage(getPropertyValue(getComputedStyle$1(element), \"background-image\")).forEach(function (bg) {\n                if (bg.type == \"url\") {\n                  add(bg.url);\n                }\n              });\n\n              if (element.children) {\n                slice$1$1(element.children).forEach(dive);\n              }\n            });\n            var count = urls.length;\n\n            function next() {\n              if (--count <= 0) {\n                // Even though we cached them, they simply won't be available immediately in the newly\n                // created DOM.  Previously we'd allow a 10ms timeout, but that's arbitrary and clearly\n                // not working in all cases (https://github.com/telerik/kendo/issues/5399), so this\n                // function will wait for their .complete attribute.\n                whenImagesAreActuallyLoaded(elements, callback);\n              }\n            }\n\n            if (count === 0) {\n              next();\n            }\n\n            urls.forEach(function (url) {\n              var img = IMAGE_CACHE[url] = new window.Image();\n\n              if (!/^data:/i.test(url)) {\n                img.crossOrigin = \"Anonymous\";\n              }\n\n              img.src = url;\n\n              if (img.complete) {\n                next();\n              } else {\n                img.onload = next;\n\n                img.onerror = function () {\n                  IMAGE_CACHE[url] = null;\n                  next();\n                };\n              }\n            });\n          }\n\n          function alphaNumeral(n) {\n            var result = \"\";\n\n            do {\n              var r = n % 26;\n              result = String.fromCharCode(97 + r) + result;\n              n = Math.floor(n / 26);\n            } while (n > 0);\n\n            return result;\n          }\n\n          function pushNodeInfo(element, style, group) {\n            nodeInfo = Object.create(nodeInfo);\n            nodeInfo[element.tagName.toLowerCase()] = {\n              element: element,\n              style: style\n            };\n            var decoration = getPropertyValue(style, \"text-decoration\");\n\n            if (decoration && decoration != \"none\") {\n              var color = getPropertyValue(style, \"color\");\n              decoration.split(/\\s+/g).forEach(function (name) {\n                if (!nodeInfo[name]) {\n                  nodeInfo[name] = color;\n                }\n              });\n            }\n\n            if (createsStackingContext(style)) {\n              nodeInfo._stackingContext = {\n                element: element,\n                group: group\n              };\n            }\n          }\n\n          function popNodeInfo() {\n            nodeInfo = Object.getPrototypeOf(nodeInfo);\n          }\n\n          function updateClipbox(path) {\n            if (nodeInfo._clipbox != null) {\n              var box = path.bbox(nodeInfo._matrix);\n\n              if (nodeInfo._clipbox) {\n                nodeInfo._clipbox = Rect.intersect(nodeInfo._clipbox, box);\n              } else {\n                nodeInfo._clipbox = box;\n              }\n            }\n          }\n\n          function emptyClipbox() {\n            var cb = nodeInfo._clipbox;\n\n            if (cb == null) {\n              return true;\n            }\n\n            if (cb) {\n              return cb.width() === 0 || cb.height() === 0;\n            }\n          }\n\n          function createsStackingContext(style) {\n            function prop(name) {\n              return getPropertyValue(style, name);\n            }\n\n            if (prop(\"transform\") != \"none\" || prop(\"position\") != \"static\" || prop(\"z-index\") != \"auto\" || prop(\"opacity\") < 1) {\n              return true;\n            }\n          }\n\n          function getComputedStyle$1(element, pseudoElt) {\n            return window.getComputedStyle(element, pseudoElt || null);\n          }\n\n          function getPropertyValue(style, prop, defa) {\n            var val = style.getPropertyValue(prop);\n\n            if (val == null || val === \"\") {\n              if (browser.webkit) {\n                val = style.getPropertyValue(\"-webkit-\" + prop);\n              } else if (browser.mozilla) {\n                val = style.getPropertyValue(\"-moz-\" + prop);\n              } else if (browser.opera) {\n                val = style.getPropertyValue(\"-o-\" + prop);\n              } else if (microsoft) {\n                val = style.getPropertyValue(\"-ms-\" + prop);\n              }\n            }\n\n            if (arguments.length > 2 && (val == null || val === \"\")) {\n              return defa;\n            } else {\n              return val;\n            }\n          }\n\n          function pleaseSetPropertyValue(style, prop, value, important) {\n            style.setProperty(prop, value, important);\n\n            if (browser.webkit) {\n              style.setProperty(\"-webkit-\" + prop, value, important);\n            } else if (browser.mozilla) {\n              style.setProperty(\"-moz-\" + prop, value, important);\n            } else if (browser.opera) {\n              style.setProperty(\"-o-\" + prop, value, important);\n            } else if (microsoft) {\n              style.setProperty(\"-ms-\" + prop, value, important);\n              prop = \"ms\" + prop.replace(/(^|-)([a-z])/g, function (s, p1, p2) {\n                return p1 + p2.toUpperCase();\n              });\n              style[prop] = value;\n            }\n          }\n\n          function getBorder(style, side) {\n            side = \"border-\" + side;\n            return {\n              width: parseFloat(getPropertyValue(style, side + \"-width\")),\n              style: getPropertyValue(style, side + \"-style\"),\n              color: parseColor$1(getPropertyValue(style, side + \"-color\"), true)\n            };\n          }\n\n          function saveStyle(element, func) {\n            var prev = element.style.cssText;\n            var result = func();\n            element.style.cssText = prev;\n            return result;\n          }\n\n          function getBorderRadius(style, side) {\n            var r = getPropertyValue(style, \"border-\" + side + \"-radius\").split(/\\s+/g).map(parseFloat);\n\n            if (r.length == 1) {\n              r.push(r[0]);\n            }\n\n            return sanitizeRadius({\n              x: r[0],\n              y: r[1]\n            });\n          }\n\n          function getContentBox(element) {\n            var box = element.getBoundingClientRect();\n            box = innerBox(box, \"border-*-width\", element);\n            box = innerBox(box, \"padding-*\", element);\n            return box;\n          }\n\n          function innerBox(box, prop, element) {\n            var style, wt, wr, wb, wl;\n\n            if (typeof prop == \"string\") {\n              style = getComputedStyle$1(element);\n              wt = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"top\")));\n              wr = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"right\")));\n              wb = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"bottom\")));\n              wl = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"left\")));\n            } else if (typeof prop == \"number\") {\n              wt = wr = wb = wl = prop;\n            }\n\n            return {\n              top: box.top + wt,\n              right: box.right - wr,\n              bottom: box.bottom - wb,\n              left: box.left + wl,\n              width: box.right - box.left - wr - wl,\n              height: box.bottom - box.top - wb - wt\n            };\n          }\n\n          function getTransform(style) {\n            var transform$$1 = getPropertyValue(style, \"transform\");\n\n            if (transform$$1 == \"none\") {\n              return null;\n            }\n\n            var matrix = /^\\s*matrix\\(\\s*(.*?)\\s*\\)\\s*$/.exec(transform$$1);\n\n            if (matrix) {\n              var origin = getPropertyValue(style, \"transform-origin\");\n              matrix = matrix[1].split(/\\s*,\\s*/g).map(parseFloat);\n              origin = origin.split(/\\s+/g).map(parseFloat);\n              return {\n                matrix: matrix,\n                origin: origin\n              };\n            }\n          }\n\n          function radiansToDegrees(radians) {\n            return 180 * radians / Math.PI % 360;\n          }\n\n          function parseAngle(angle) {\n            var num = parseFloat(angle);\n\n            if (/grad$/.test(angle)) {\n              return Math.PI * num / 200;\n            } else if (/rad$/.test(angle)) {\n              return num;\n            } else if (/turn$/.test(angle)) {\n              return Math.PI * num * 2;\n            } else if (/deg$/.test(angle)) {\n              return Math.PI * num / 180;\n            }\n          }\n\n          function setTransform$1(shape, m) {\n            m = new Matrix(m[0], m[1], m[2], m[3], m[4], m[5]);\n            shape.transform(m);\n            return m;\n          }\n\n          function setClipping(shape, clipPath) {\n            shape.clip(clipPath);\n          }\n\n          function addArcToPath(path, x, y, options) {\n            var points = new Arc$2([x, y], options).curvePoints(),\n                i = 1;\n\n            while (i < points.length) {\n              path.curveTo(points[i++], points[i++], points[i++]);\n            }\n          }\n\n          function sanitizeRadius(r) {\n            if (r.x <= 0 || r.y <= 0) {\n              r.x = r.y = 0;\n            }\n\n            return r;\n          }\n\n          function adjustBorderRadiusForBox(box, rTL, rTR, rBR, rBL) {\n            // adjust border radiuses such that the sum of adjacent\n            // radiuses is not bigger than the length of the side.\n            // seems the correct algorithm is variant (3) from here:\n            // http://www.w3.org/Style/CSS/Tracker/issues/29?changelog\n            var tl_x = Math.max(0, rTL.x),\n                tl_y = Math.max(0, rTL.y);\n            var tr_x = Math.max(0, rTR.x),\n                tr_y = Math.max(0, rTR.y);\n            var br_x = Math.max(0, rBR.x),\n                br_y = Math.max(0, rBR.y);\n            var bl_x = Math.max(0, rBL.x),\n                bl_y = Math.max(0, rBL.y);\n            var f = Math.min(box.width / (tl_x + tr_x), box.height / (tr_y + br_y), box.width / (br_x + bl_x), box.height / (bl_y + tl_y));\n\n            if (f < 1) {\n              tl_x *= f;\n              tl_y *= f;\n              tr_x *= f;\n              tr_y *= f;\n              br_x *= f;\n              br_y *= f;\n              bl_x *= f;\n              bl_y *= f;\n            }\n\n            return {\n              tl: {\n                x: tl_x,\n                y: tl_y\n              },\n              tr: {\n                x: tr_x,\n                y: tr_y\n              },\n              br: {\n                x: br_x,\n                y: br_y\n              },\n              bl: {\n                x: bl_x,\n                y: bl_y\n              }\n            };\n          }\n\n          function elementRoundBox(element, box, type) {\n            var style = getComputedStyle$1(element);\n            var rTL = getBorderRadius(style, \"top-left\");\n            var rTR = getBorderRadius(style, \"top-right\");\n            var rBL = getBorderRadius(style, \"bottom-left\");\n            var rBR = getBorderRadius(style, \"bottom-right\");\n\n            if (type == \"padding\" || type == \"content\") {\n              var bt = getBorder(style, \"top\");\n              var br = getBorder(style, \"right\");\n              var bb = getBorder(style, \"bottom\");\n              var bl = getBorder(style, \"left\");\n              rTL.x -= bl.width;\n              rTL.y -= bt.width;\n              rTR.x -= br.width;\n              rTR.y -= bt.width;\n              rBR.x -= br.width;\n              rBR.y -= bb.width;\n              rBL.x -= bl.width;\n              rBL.y -= bb.width;\n\n              if (type == \"content\") {\n                var pt = parseFloat(getPropertyValue(style, \"padding-top\"));\n                var pr = parseFloat(getPropertyValue(style, \"padding-right\"));\n                var pb = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n                var pl = parseFloat(getPropertyValue(style, \"padding-left\"));\n                rTL.x -= pl;\n                rTL.y -= pt;\n                rTR.x -= pr;\n                rTR.y -= pt;\n                rBR.x -= pr;\n                rBR.y -= pb;\n                rBL.x -= pl;\n                rBL.y -= pb;\n              }\n            }\n\n            if (typeof type == \"number\") {\n              rTL.x -= type;\n              rTL.y -= type;\n              rTR.x -= type;\n              rTR.y -= type;\n              rBR.x -= type;\n              rBR.y -= type;\n              rBL.x -= type;\n              rBL.y -= type;\n            }\n\n            return roundBox(box, rTL, rTR, rBR, rBL);\n          } // Create a drawing.Path for a rounded rectangle.  Receives the\n          // bounding box and the border-radiuses in CSS order (top-left,\n          // top-right, bottom-right, bottom-left).  The radiuses must be\n          // objects containing x (horiz. radius) and y (vertical radius).\n\n\n          function roundBox(box, rTL0, rTR0, rBR0, rBL0) {\n            var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n            var rTL = tmp.tl;\n            var rTR = tmp.tr;\n            var rBR = tmp.br;\n            var rBL = tmp.bl;\n            var path = new Path({\n              fill: null,\n              stroke: null\n            });\n            path.moveTo(box.left, box.top + rTL.y);\n\n            if (rTL.x) {\n              addArcToPath(path, box.left + rTL.x, box.top + rTL.y, {\n                startAngle: -180,\n                endAngle: -90,\n                radiusX: rTL.x,\n                radiusY: rTL.y\n              });\n            }\n\n            path.lineTo(box.right - rTR.x, box.top);\n\n            if (rTR.x) {\n              addArcToPath(path, box.right - rTR.x, box.top + rTR.y, {\n                startAngle: -90,\n                endAngle: 0,\n                radiusX: rTR.x,\n                radiusY: rTR.y\n              });\n            }\n\n            path.lineTo(box.right, box.bottom - rBR.y);\n\n            if (rBR.x) {\n              addArcToPath(path, box.right - rBR.x, box.bottom - rBR.y, {\n                startAngle: 0,\n                endAngle: 90,\n                radiusX: rBR.x,\n                radiusY: rBR.y\n              });\n            }\n\n            path.lineTo(box.left + rBL.x, box.bottom);\n\n            if (rBL.x) {\n              addArcToPath(path, box.left + rBL.x, box.bottom - rBL.y, {\n                startAngle: 90,\n                endAngle: 180,\n                radiusX: rBL.x,\n                radiusY: rBL.y\n              });\n            }\n\n            return path.close();\n          }\n\n          function formatCounter(val, style) {\n            var str = String(parseFloat(val));\n\n            switch (style) {\n              case \"decimal-leading-zero\":\n                if (str.length < 2) {\n                  str = \"0\" + str;\n                }\n\n                return str;\n\n              case \"lower-roman\":\n                return arabicToRoman(val).toLowerCase();\n\n              case \"upper-roman\":\n                return arabicToRoman(val).toUpperCase();\n\n              case \"lower-latin\":\n              case \"lower-alpha\":\n                return alphaNumeral(val - 1);\n\n              case \"upper-latin\":\n              case \"upper-alpha\":\n                return alphaNumeral(val - 1).toUpperCase();\n\n              default:\n                return str;\n            }\n          }\n\n          function evalPseudoElementContent(element, content) {\n            function displayCounter(name, style, separator) {\n              if (!separator) {\n                return formatCounter(getCounter(name) || 0, style);\n              }\n\n              separator = separator.replace(/^\\s*([\"'])(.*)\\1\\s*$/, \"$2\");\n              return getAllCounters(name).map(function (val) {\n                return formatCounter(val, style);\n              }).join(separator);\n            }\n\n            var a = splitProperty(content, /^\\s+/);\n            var result = [],\n                m;\n            a.forEach(function (el) {\n              var tmp;\n\n              if (m = /^\\s*([\"'])(.*)\\1\\s*$/.exec(el)) {\n                result.push(m[2].replace(/\\\\([0-9a-f]{4})/gi, function (s, p) {\n                  return String.fromCharCode(parseInt(p, 16));\n                }));\n              } else if (m = /^\\s*counter\\((.*?)\\)\\s*$/.exec(el)) {\n                tmp = splitProperty(m[1]);\n                result.push(displayCounter(tmp[0], tmp[1]));\n              } else if (m = /^\\s*counters\\((.*?)\\)\\s*$/.exec(el)) {\n                tmp = splitProperty(m[1]);\n                result.push(displayCounter(tmp[0], tmp[2], tmp[1]));\n              } else if (m = /^\\s*attr\\((.*?)\\)\\s*$/.exec(el)) {\n                result.push(element.getAttribute(m[1]) || \"\");\n              } else {\n                result.push(el);\n              }\n            });\n            return result.join(\"\");\n          }\n\n          function getCssText(style) {\n            if (style.cssText) {\n              return style.cssText;\n            } // Status: NEW.  Report year: 2002.  Current year: 2014.\n            // Nice played, Mozillians.\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n\n\n            var result = [];\n\n            for (var i = 0; i < style.length; ++i) {\n              result.push(style[i] + \": \" + getPropertyValue(style, style[i]));\n            }\n\n            return result.join(\";\\n\");\n          }\n\n          function _renderWithPseudoElements(element, group) {\n            if (element.tagName == KENDO_PSEUDO_ELEMENT) {\n              _renderElement(element, group);\n\n              return;\n            }\n\n            var fake = [];\n\n            function pseudo(kind, place) {\n              var style = getComputedStyle$1(element, kind),\n                  content = style.content;\n              updateCounters(style);\n\n              if (content && content != \"normal\" && content != \"none\" && style.width != \"0px\") {\n                var psel = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                psel.style.cssText = getCssText(style);\n                psel.textContent = evalPseudoElementContent(element, content);\n                element.insertBefore(psel, place);\n                fake.push(psel);\n              }\n            }\n\n            pseudo(\":before\", element.firstChild);\n            pseudo(\":after\", null);\n\n            if (fake.length > 0) {\n              var saveClass = element.className;\n              element.className += \" kendo-pdf-hide-pseudo-elements\";\n\n              _renderElement(element, group);\n\n              element.className = saveClass;\n              fake.forEach(function (el) {\n                element.removeChild(el);\n              });\n            } else {\n              _renderElement(element, group);\n            }\n          }\n\n          function _renderElement(element, group) {\n            var style = getComputedStyle$1(element);\n            var top = getBorder(style, \"top\");\n            var right = getBorder(style, \"right\");\n            var bottom = getBorder(style, \"bottom\");\n            var left = getBorder(style, \"left\");\n            var rTL0 = getBorderRadius(style, \"top-left\");\n            var rTR0 = getBorderRadius(style, \"top-right\");\n            var rBL0 = getBorderRadius(style, \"bottom-left\");\n            var rBR0 = getBorderRadius(style, \"bottom-right\");\n            var dir = getPropertyValue(style, \"direction\");\n            var backgroundColor = getPropertyValue(style, \"background-color\");\n            backgroundColor = parseColor$1(backgroundColor);\n            var backgroundImage = parseBackgroundImage(getPropertyValue(style, \"background-image\"));\n            var backgroundRepeat = splitProperty(getPropertyValue(style, \"background-repeat\"));\n            var backgroundPosition = splitProperty(getPropertyValue(style, \"background-position\"));\n            var backgroundOrigin = splitProperty(getPropertyValue(style, \"background-origin\"));\n            var backgroundSize = splitProperty(getPropertyValue(style, \"background-size\")); // IE shrinks the text with text-overflow: ellipsis,\n            // apparently because the returned bounding box for the range\n            // is limited to the visible area minus space for the dots,\n            // instead of being the full width of the text.\n            //\n            // https://github.com/telerik/kendo/issues/5232\n            // https://github.com/telerik/kendo-ui-core/issues/1868\n            //\n            // We have to test it here rather than in renderText because\n            // text-overflow: ellipsis could be set on a parent element (not\n            // necessarily the one containing the text); in this case,\n            // getComputedStyle(elementWithTheText) will return \"clip\", not\n            // \"ellipsis\" (which is probably a bug, but oh well...)\n\n            var textOverflow, saveTextOverflow;\n\n            if (microsoft) {\n              textOverflow = style.textOverflow; // computed style\n\n              if (textOverflow == \"ellipsis\") {\n                saveTextOverflow = element.style.textOverflow; // own style.\n\n                element.style.textOverflow = \"clip\";\n              }\n            }\n\n            if (browser.msie && browser.version < 10) {\n              // IE9 hacks.  getPropertyValue won't return the correct\n              // value.  Sucks that we have to do it here, I'd prefer to\n              // move it in getPropertyValue, but we don't have the\n              // element.\n              backgroundPosition = splitProperty(element.currentStyle.backgroundPosition);\n            }\n\n            var innerbox = innerBox(element.getBoundingClientRect(), \"border-*-width\", element); // CSS \"clip\" property - if present, replace the group with a\n            // new one which is clipped.  This must happen before drawing\n            // the borders and background.\n\n            (function () {\n              var clip = getPropertyValue(style, \"clip\");\n              var m = /^\\s*rect\\((.*)\\)\\s*$/.exec(clip);\n\n              if (m) {\n                var a = m[1].split(/[ ,]+/g);\n                var top = a[0] == \"auto\" ? innerbox.top : parseFloat(a[0]) + innerbox.top;\n                var right = a[1] == \"auto\" ? innerbox.right : parseFloat(a[1]) + innerbox.left;\n                var bottom = a[2] == \"auto\" ? innerbox.bottom : parseFloat(a[2]) + innerbox.top;\n                var left = a[3] == \"auto\" ? innerbox.left : parseFloat(a[3]) + innerbox.left;\n                var tmp = new Group();\n                var clipPath = new Path().moveTo(left, top).lineTo(right, top).lineTo(right, bottom).lineTo(left, bottom).close();\n                setClipping(tmp, clipPath);\n                group.append(tmp);\n                group = tmp;\n                updateClipbox(clipPath);\n              }\n            })();\n\n            var boxes, i, cells;\n            var display = getPropertyValue(style, \"display\");\n\n            if (display == \"table-row\") {\n              // because of rowspan/colspan, we shouldn't draw background of table row elements on the\n              // box given by its getBoundingClientRect, because if we do we risk overwritting a\n              // previously rendered cell.  https://github.com/telerik/kendo/issues/4881\n              boxes = [];\n\n              for (i = 0, cells = element.children; i < cells.length; ++i) {\n                boxes.push(cells[i].getBoundingClientRect());\n              }\n            } else {\n              boxes = element.getClientRects();\n\n              if (boxes.length == 1) {\n                // Workaround the missing borders in Chrome!  getClientRects() boxes contains values\n                // rounded to integer.  getBoundingClientRect() appears to work fine.  We still need\n                // getClientRects() to support cases where there are more boxes (continued inline\n                // elements that might have border/background).\n                boxes = [element.getBoundingClientRect()];\n              }\n            } // This function workarounds another Chrome bug, where boxes returned for a table with\n            // border-collapse: collapse will overlap the table border.  Our rendering is not perfect in\n            // such case anyway, but with this is better than without it.\n\n\n            boxes = adjustBoxes(boxes);\n\n            for (i = 0; i < boxes.length; ++i) {\n              drawOneBox(boxes[i], i === 0, i == boxes.length - 1);\n            } // Render links as separate groups.  We can't use boxes returned by element's getClientRects\n            // because if display type is \"inline\" (default for <a>), boxes will not include the height of\n            // images inside.  https://github.com/telerik/kendo-ui-core/issues/3359\n\n\n            if (element.tagName == \"A\" && element.href && !/^#?$/.test(element.getAttribute(\"href\"))) {\n              if (!nodeInfo._avoidLinks || !matches(element, nodeInfo._avoidLinks)) {\n                var r = document.createRange();\n                r.selectNodeContents(element);\n                slice$1$1(r.getClientRects()).forEach(function (box) {\n                  var g = new Group();\n                  g._pdfLink = {\n                    url: element.href,\n                    top: box.top,\n                    right: box.right,\n                    bottom: box.bottom,\n                    left: box.left\n                  };\n                  group.append(g);\n                });\n              }\n            }\n\n            if (boxes.length > 0 && display == \"list-item\" && !element.getAttribute(\"kendo-no-bullet\")) {\n              drawBullet(boxes[0]);\n            } // overflow: hidden/auto - if present, replace the group with\n            // a new one clipped by the inner box.\n\n\n            (function () {\n              function clipit() {\n                var clipPath = elementRoundBox(element, innerbox, \"padding\");\n                var tmp = new Group();\n                setClipping(tmp, clipPath);\n                group.append(tmp);\n                group = tmp;\n                updateClipbox(clipPath);\n              }\n\n              if (isFormField(element)) {\n                clipit();\n              } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow\"))) {\n                clipit();\n              } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-x\"))) {\n                clipit();\n              } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-y\"))) {\n                clipit();\n              }\n            })();\n\n            if (!maybeRenderWidget(element, group)) {\n              renderContents(element, group);\n            }\n\n            if (microsoft && textOverflow == \"ellipsis\") {\n              element.style.textOverflow = saveTextOverflow;\n            }\n\n            return group; // only utility functions after this line.\n\n            function adjustBoxes(boxes) {\n              if (/^td$/i.test(element.tagName)) {\n                var table = nodeInfo.table;\n\n                if (table && getPropertyValue(table.style, \"border-collapse\") == \"collapse\") {\n                  var tableBorderLeft = getBorder(table.style, \"left\").width;\n                  var tableBorderTop = getBorder(table.style, \"top\").width; // check if we need to adjust\n\n                  if (tableBorderLeft === 0 && tableBorderTop === 0) {\n                    return boxes; // nope\n                  }\n\n                  var tableBox = table.element.getBoundingClientRect();\n                  var firstCell = table.element.rows[0].cells[0];\n                  var firstCellBox = firstCell.getBoundingClientRect();\n\n                  if (firstCellBox.top == tableBox.top || firstCellBox.left == tableBox.left) {\n                    return slice$1$1(boxes).map(function (box) {\n                      return {\n                        left: box.left + tableBorderLeft,\n                        top: box.top + tableBorderTop,\n                        right: box.right + tableBorderLeft,\n                        bottom: box.bottom + tableBorderTop,\n                        height: box.height,\n                        width: box.width\n                      };\n                    });\n                  }\n                }\n              }\n\n              return boxes;\n            } // this function will be called to draw each border.  it\n            // draws starting at origin and the resulted path must be\n            // translated/rotated to be placed in the proper position.\n            //\n            // arguments are named as if it draws the top border:\n            //\n            //    - `len` the length of the edge\n            //    - `Wtop` the width of the edge (i.e. border-top-width)\n            //    - `Wleft` the width of the left edge (border-left-width)\n            //    - `Wright` the width of the right edge\n            //    - `rl` and `rl` -- the border radius on the left and right\n            //      (objects containing x and y, for horiz/vertical radius)\n            //    - `transform` -- transformation to apply\n            //\n\n\n            function drawEdge(color, len, Wtop, Wleft, Wright, rl, rr, transform$$1) {\n              if (Wtop <= 0) {\n                return;\n              }\n\n              var path,\n                  edge = new Group();\n              setTransform$1(edge, transform$$1);\n              group.append(edge);\n              sanitizeRadius(rl);\n              sanitizeRadius(rr); // draw main border.  this is the area without the rounded corners\n\n              path = new Path({\n                fill: {\n                  color: color\n                },\n                stroke: null\n              });\n              edge.append(path);\n              path.moveTo(rl.x ? Math.max(rl.x, Wleft) : 0, 0).lineTo(len - (rr.x ? Math.max(rr.x, Wright) : 0), 0).lineTo(len - Math.max(rr.x, Wright), Wtop).lineTo(Math.max(rl.x, Wleft), Wtop).close();\n\n              if (rl.x) {\n                drawRoundCorner(Wleft, rl, [-1, 0, 0, 1, rl.x, 0]);\n              }\n\n              if (rr.x) {\n                drawRoundCorner(Wright, rr, [1, 0, 0, 1, len - rr.x, 0]);\n              } // draws one round corner, starting at origin (needs to be\n              // translated/rotated to be placed properly).\n\n\n              function drawRoundCorner(Wright, r, transform$$1) {\n                var angle = Math.PI / 2 * Wright / (Wright + Wtop); // not sanitizing this one, because negative values\n                // are useful to fill the box correctly.\n\n                var ri = {\n                  x: r.x - Wright,\n                  y: r.y - Wtop\n                };\n                var path = new Path({\n                  fill: {\n                    color: color\n                  },\n                  stroke: null\n                }).moveTo(0, 0);\n                setTransform$1(path, transform$$1);\n                addArcToPath(path, 0, r.y, {\n                  startAngle: -90,\n                  endAngle: -radiansToDegrees(angle),\n                  radiusX: r.x,\n                  radiusY: r.y\n                });\n\n                if (ri.x > 0 && ri.y > 0) {\n                  path.lineTo(ri.x * Math.cos(angle), r.y - ri.y * Math.sin(angle));\n                  addArcToPath(path, 0, r.y, {\n                    startAngle: -radiansToDegrees(angle),\n                    endAngle: -90,\n                    radiusX: ri.x,\n                    radiusY: ri.y,\n                    anticlockwise: true\n                  });\n                } else if (ri.x > 0) {\n                  path.lineTo(ri.x, Wtop).lineTo(0, Wtop);\n                } else {\n                  path.lineTo(ri.x, Wtop).lineTo(ri.x, 0);\n                }\n\n                edge.append(path.close());\n              }\n            }\n\n            function drawBackground(box) {\n              var background = new Group();\n              setClipping(background, roundBox(box, rTL0, rTR0, rBR0, rBL0));\n              group.append(background);\n\n              if (backgroundColor) {\n                var path = new Path({\n                  fill: {\n                    color: backgroundColor.toCssRgba()\n                  },\n                  stroke: null\n                });\n                path.moveTo(box.left, box.top).lineTo(box.right, box.top).lineTo(box.right, box.bottom).lineTo(box.left, box.bottom).close();\n                background.append(path);\n              }\n\n              for (var i = backgroundImage.length; --i >= 0;) {\n                drawOneBackground(background, box, backgroundImage[i], backgroundRepeat[i % backgroundRepeat.length], backgroundPosition[i % backgroundPosition.length], backgroundOrigin[i % backgroundOrigin.length], backgroundSize[i % backgroundSize.length]);\n              }\n            }\n\n            function drawOneBackground(group, box, background, backgroundRepeat, backgroundPosition, backgroundOrigin, backgroundSize) {\n              if (!background || background == \"none\") {\n                return;\n              }\n\n              if (background.type == \"url\") {\n                var img = IMAGE_CACHE[background.url];\n\n                if (img && img.width > 0 && img.height > 0) {\n                  drawBackgroundImage(group, box, img.width, img.height, function (group, rect) {\n                    group.append(new Image$1(background.url, rect));\n                  });\n                }\n              } else if (background.type == \"linear\") {\n                drawBackgroundImage(group, box, box.width, box.height, gradientRenderer(background));\n              } else {\n                return;\n              }\n\n              function drawBackgroundImage(group, box, img_width, img_height, renderBG) {\n                var aspect_ratio = img_width / img_height,\n                    f; // for background-origin: border-box the box is already appropriate\n\n                var orgBox = box;\n\n                if (backgroundOrigin == \"content-box\") {\n                  orgBox = innerBox(orgBox, \"border-*-width\", element);\n                  orgBox = innerBox(orgBox, \"padding-*\", element);\n                } else if (backgroundOrigin == \"padding-box\") {\n                  orgBox = innerBox(orgBox, \"border-*-width\", element);\n                }\n\n                if (!/^\\s*auto(\\s+auto)?\\s*$/.test(backgroundSize)) {\n                  if (backgroundSize == \"contain\") {\n                    f = Math.min(orgBox.width / img_width, orgBox.height / img_height);\n                    img_width *= f;\n                    img_height *= f;\n                  } else if (backgroundSize == \"cover\") {\n                    f = Math.max(orgBox.width / img_width, orgBox.height / img_height);\n                    img_width *= f;\n                    img_height *= f;\n                  } else {\n                    var size = backgroundSize.split(/\\s+/g); // compute width\n\n                    if (/%$/.test(size[0])) {\n                      img_width = orgBox.width * parseFloat(size[0]) / 100;\n                    } else {\n                      img_width = parseFloat(size[0]);\n                    } // compute height\n\n\n                    if (size.length == 1 || size[1] == \"auto\") {\n                      img_height = img_width / aspect_ratio;\n                    } else if (/%$/.test(size[1])) {\n                      img_height = orgBox.height * parseFloat(size[1]) / 100;\n                    } else {\n                      img_height = parseFloat(size[1]);\n                    }\n                  }\n                }\n\n                var pos = String(backgroundPosition); // IE sometimes reports single-word positions\n                // https://github.com/telerik/kendo-ui-core/issues/2786\n                //\n                // it seems to switch to percentages when the horizontal\n                // position is not \"center\", therefore we don't handle\n                // multi-word cases here.  All other browsers return\n                // percentages or pixels instead of keywords.  At least\n                // for now...\n\n                switch (pos) {\n                  case \"bottom\":\n                    pos = \"50% 100%\";\n                    break;\n\n                  case \"top\":\n                    pos = \"50% 0\";\n                    break;\n\n                  case \"left\":\n                    pos = \"0 50%\";\n                    break;\n\n                  case \"right\":\n                    pos = \"100% 50%\";\n                    break;\n\n                  case \"center\":\n                    pos = \"50% 50%\";\n                    break;\n                }\n\n                pos = pos.split(/\\s+/);\n\n                if (pos.length == 1) {\n                  pos[1] = \"50%\";\n                }\n\n                if (/%$/.test(pos[0])) {\n                  pos[0] = parseFloat(pos[0]) / 100 * (orgBox.width - img_width);\n                } else {\n                  pos[0] = parseFloat(pos[0]);\n                }\n\n                if (/%$/.test(pos[1])) {\n                  pos[1] = parseFloat(pos[1]) / 100 * (orgBox.height - img_height);\n                } else {\n                  pos[1] = parseFloat(pos[1]);\n                }\n\n                var rect = new Rect([orgBox.left + pos[0], orgBox.top + pos[1]], [img_width, img_height]); // XXX: background-repeat could be implemented more\n                //      efficiently as a fill pattern (at least for PDF\n                //      output, probably SVG too).\n\n                function rewX() {\n                  while (rect.origin.x > box.left) {\n                    rect.origin.x -= img_width;\n                  }\n                }\n\n                function rewY() {\n                  while (rect.origin.y > box.top) {\n                    rect.origin.y -= img_height;\n                  }\n                }\n\n                function repeatX() {\n                  while (rect.origin.x < box.right) {\n                    renderBG(group, rect.clone());\n                    rect.origin.x += img_width;\n                  }\n                }\n\n                if (backgroundRepeat == \"no-repeat\") {\n                  renderBG(group, rect);\n                } else if (backgroundRepeat == \"repeat-x\") {\n                  rewX();\n                  repeatX();\n                } else if (backgroundRepeat == \"repeat-y\") {\n                  rewY();\n\n                  while (rect.origin.y < box.bottom) {\n                    renderBG(group, rect.clone());\n                    rect.origin.y += img_height;\n                  }\n                } else if (backgroundRepeat == \"repeat\") {\n                  rewX();\n                  rewY();\n                  var origin = rect.origin.clone();\n\n                  while (rect.origin.y < box.bottom) {\n                    rect.origin.x = origin.x;\n                    repeatX();\n                    rect.origin.y += img_height;\n                  }\n                }\n              }\n            }\n\n            function drawBullet() {\n              var listStyleType = getPropertyValue(style, \"list-style-type\");\n\n              if (listStyleType == \"none\") {\n                return;\n              }\n\n              var listStylePosition = getPropertyValue(style, \"list-style-position\");\n\n              function _drawBullet(f) {\n                saveStyle(element, function () {\n                  element.style.position = \"relative\";\n                  var bullet = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                  bullet.style.position = \"absolute\";\n                  bullet.style.boxSizing = \"border-box\";\n\n                  if (listStylePosition == \"outside\") {\n                    bullet.style.width = \"6em\";\n                    bullet.style.left = \"-6.8em\";\n                    bullet.style.textAlign = \"right\";\n                  } else {\n                    bullet.style.left = \"0px\";\n                  }\n\n                  f(bullet);\n                  element.insertBefore(bullet, element.firstChild);\n                  renderElement(bullet, group);\n                  element.removeChild(bullet);\n                });\n              }\n\n              function elementIndex(f) {\n                var a = element.parentNode.children;\n                var k = element.getAttribute(\"kendo-split-index\");\n\n                if (k != null) {\n                  return f(k | 0, a.length);\n                }\n\n                for (var i = 0; i < a.length; ++i) {\n                  if (a[i] === element) {\n                    return f(i, a.length);\n                  }\n                }\n              }\n\n              switch (listStyleType) {\n                case \"circle\":\n                case \"disc\":\n                case \"square\":\n                  _drawBullet(function (bullet) {\n                    // XXX: the science behind these values is called \"trial and error\".\n                    bullet.style.fontSize = \"60%\";\n                    bullet.style.lineHeight = \"200%\";\n                    bullet.style.paddingRight = \"0.5em\";\n                    bullet.style.fontFamily = \"DejaVu Serif\";\n                    bullet.innerHTML = {\n                      \"disc\": \"\\u25cf\",\n                      \"circle\": \"\\u25ef\",\n                      \"square\": \"\\u25a0\"\n                    }[listStyleType];\n                  });\n\n                  break;\n\n                case \"decimal\":\n                case \"decimal-leading-zero\":\n                  _drawBullet(function (bullet) {\n                    elementIndex(function (idx) {\n                      ++idx;\n\n                      if (listStyleType == \"decimal-leading-zero\" && idx < 10) {\n                        idx = \"0\" + idx;\n                      }\n\n                      bullet.innerHTML = idx + \".\";\n                    });\n                  });\n\n                  break;\n\n                case \"lower-roman\":\n                case \"upper-roman\":\n                  _drawBullet(function (bullet) {\n                    elementIndex(function (idx) {\n                      idx = arabicToRoman(idx + 1);\n\n                      if (listStyleType == \"upper-roman\") {\n                        idx = idx.toUpperCase();\n                      }\n\n                      bullet.innerHTML = idx + \".\";\n                    });\n                  });\n\n                  break;\n\n                case \"lower-latin\":\n                case \"lower-alpha\":\n                case \"upper-latin\":\n                case \"upper-alpha\":\n                  _drawBullet(function (bullet) {\n                    elementIndex(function (idx) {\n                      idx = alphaNumeral(idx);\n\n                      if (/^upper/i.test(listStyleType)) {\n                        idx = idx.toUpperCase();\n                      }\n\n                      bullet.innerHTML = idx + \".\";\n                    });\n                  });\n\n                  break;\n              }\n            } // draws a single border box\n\n\n            function drawOneBox(box, isFirst, isLast) {\n              if (box.width === 0 || box.height === 0) {\n                return;\n              }\n\n              drawBackground(box);\n              var shouldDrawLeft = left.width > 0 && (isFirst && dir == \"ltr\" || isLast && dir == \"rtl\");\n              var shouldDrawRight = right.width > 0 && (isLast && dir == \"ltr\" || isFirst && dir == \"rtl\"); // The most general case is that the 4 borders have different widths and border\n              // radiuses.  The way that is handled is by drawing 3 Paths for each border: the\n              // straight line, and two round corners which represent half of the entire rounded\n              // corner.  To simplify code those shapes are drawed at origin (by the drawEdge\n              // function), then translated/rotated into the right position.\n              //\n              // However, this leads to poor results due to rounding in the simpler cases where\n              // borders are straight lines.  Therefore we handle a few such cases separately with\n              // straight lines. C^wC^wC^w -- nope, scratch that.  poor rendering was because of a bug\n              // in Chrome (getClientRects() returns rounded integer values rather than exact floats.\n              // web dev is still a ghetto.)\n              // first, just in case there is no border...\n\n              if (top.width === 0 && left.width === 0 && right.width === 0 && bottom.width === 0) {\n                return;\n              } // START paint borders\n              // if all borders have equal colors...\n\n\n              if (top.color == right.color && top.color == bottom.color && top.color == left.color) {\n                // if same widths too, we can draw the whole border by stroking a single path.\n                if (top.width == right.width && top.width == bottom.width && top.width == left.width) {\n                  if (shouldDrawLeft && shouldDrawRight) {\n                    // reduce box by half the border width, so we can draw it by stroking.\n                    box = innerBox(box, top.width / 2); // adjust the border radiuses, again by top.width/2, and make the path element.\n\n                    var path = elementRoundBox(element, box, top.width / 2);\n                    path.options.stroke = {\n                      color: top.color,\n                      width: top.width\n                    };\n                    group.append(path);\n                    return;\n                  }\n                }\n              } // if border radiuses are zero and widths are at most one pixel, we can again use simple\n              // paths.\n\n\n              if (rTL0.x === 0 && rTR0.x === 0 && rBR0.x === 0 && rBL0.x === 0) {\n                // alright, 1.9px will do as well.  the difference in color blending should not be\n                // noticeable.\n                if (top.width < 2 && left.width < 2 && right.width < 2 && bottom.width < 2) {\n                  // top border\n                  if (top.width > 0) {\n                    group.append(new Path({\n                      stroke: {\n                        width: top.width,\n                        color: top.color\n                      }\n                    }).moveTo(box.left, box.top + top.width / 2).lineTo(box.right, box.top + top.width / 2));\n                  } // bottom border\n\n\n                  if (bottom.width > 0) {\n                    group.append(new Path({\n                      stroke: {\n                        width: bottom.width,\n                        color: bottom.color\n                      }\n                    }).moveTo(box.left, box.bottom - bottom.width / 2).lineTo(box.right, box.bottom - bottom.width / 2));\n                  } // left border\n\n\n                  if (shouldDrawLeft) {\n                    group.append(new Path({\n                      stroke: {\n                        width: left.width,\n                        color: left.color\n                      }\n                    }).moveTo(box.left + left.width / 2, box.top).lineTo(box.left + left.width / 2, box.bottom));\n                  } // right border\n\n\n                  if (shouldDrawRight) {\n                    group.append(new Path({\n                      stroke: {\n                        width: right.width,\n                        color: right.color\n                      }\n                    }).moveTo(box.right - right.width / 2, box.top).lineTo(box.right - right.width / 2, box.bottom));\n                  }\n\n                  return;\n                }\n              } // END paint borders\n\n\n              var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n              var rTL = tmp.tl;\n              var rTR = tmp.tr;\n              var rBR = tmp.br;\n              var rBL = tmp.bl; // top border\n\n              drawEdge(top.color, box.width, top.width, left.width, right.width, rTL, rTR, [1, 0, 0, 1, box.left, box.top]); // bottom border\n\n              drawEdge(bottom.color, box.width, bottom.width, right.width, left.width, rBR, rBL, [-1, 0, 0, -1, box.right, box.bottom]); // for left/right borders we need to invert the border-radiuses\n\n              function inv(p) {\n                return {\n                  x: p.y,\n                  y: p.x\n                };\n              } // left border\n\n\n              drawEdge(left.color, box.height, left.width, bottom.width, top.width, inv(rBL), inv(rTL), [0, -1, 1, 0, box.left, box.bottom]); // right border\n\n              drawEdge(right.color, box.height, right.width, top.width, bottom.width, inv(rTR), inv(rBR), [0, 1, -1, 0, box.right, box.top]);\n            }\n          }\n\n          function gradientRenderer(gradient) {\n            return function (group, rect) {\n              var width = rect.width(),\n                  height = rect.height();\n\n              switch (gradient.type) {\n                case \"linear\":\n                  // figure out the angle.\n                  var angle = gradient.angle != null ? gradient.angle : Math.PI;\n\n                  switch (gradient.to) {\n                    case \"top\":\n                      angle = 0;\n                      break;\n\n                    case \"left\":\n                      angle = -Math.PI / 2;\n                      break;\n\n                    case \"bottom\":\n                      angle = Math.PI;\n                      break;\n\n                    case \"right\":\n                      angle = Math.PI / 2;\n                      break;\n\n                    case \"top left\":\n                    case \"left top\":\n                      angle = -Math.atan2(height, width);\n                      break;\n\n                    case \"top right\":\n                    case \"right top\":\n                      angle = Math.atan2(height, width);\n                      break;\n\n                    case \"bottom left\":\n                    case \"left bottom\":\n                      angle = Math.PI + Math.atan2(height, width);\n                      break;\n\n                    case \"bottom right\":\n                    case \"right bottom\":\n                      angle = Math.PI - Math.atan2(height, width);\n                      break;\n                  }\n\n                  if (gradient.reverse) {\n                    angle -= Math.PI;\n                  } // limit the angle between 0..2PI\n\n\n                  angle %= 2 * Math.PI;\n\n                  if (angle < 0) {\n                    angle += 2 * Math.PI;\n                  } // compute gradient's start/end points.  here len is the length of the gradient line\n                  // and x,y is the end point relative to the center of the rectangle in conventional\n                  // (math) axis direction.\n                  // this is the original (unscaled) length of the gradient line.  needed to deal with\n                  // absolutely positioned color stops.  formula from the CSS spec:\n                  // http://dev.w3.org/csswg/css-images-3/#linear-gradient-syntax\n\n\n                  var pxlen = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle)); // The math below is pretty simple, but it took a while to figure out.  We compute x\n                  // and y, the *end* of the gradient line.  However, we want to transform them into\n                  // element-based coordinates (SVG's gradientUnits=\"objectBoundingBox\").  That means,\n                  // x=0 is the left edge, x=1 is the right edge, y=0 is the top edge and y=1 is the\n                  // bottom edge.\n                  //\n                  // A naive approach would use the original angle for these calculations.  Say we'd\n                  // like to draw a gradient angled at 45deg in a 100x400 box.  When we use\n                  // objectBoundingBox, the renderer will draw it in a 1x1 *square* box, and then\n                  // scale that to the desired dimensions.  The 45deg angle will look more like 70deg\n                  // after scaling.  SVG (http://www.w3.org/TR/SVG/pservers.html#LinearGradients) says\n                  // the following:\n                  //\n                  //     When gradientUnits=\"objectBoundingBox\" and 'gradientTransform' is the\n                  //     identity matrix, the normal of the linear gradient is perpendicular to the\n                  //     gradient vector in object bounding box space (i.e., the abstract coordinate\n                  //     system where (0,0) is at the top/left of the object bounding box and (1,1) is\n                  //     at the bottom/right of the object bounding box). When the object's bounding\n                  //     box is not square, the gradient normal which is initially perpendicular to\n                  //     the gradient vector within object bounding box space may render\n                  //     non-perpendicular relative to the gradient vector in user space. If the\n                  //     gradient vector is parallel to one of the axes of the bounding box, the\n                  //     gradient normal will remain perpendicular. This transformation is due to\n                  //     application of the non-uniform scaling transformation from bounding box space\n                  //     to user space.\n                  //\n                  // which is an extremely long and confusing way to tell what I just said above.\n                  //\n                  // For this reason we need to apply the reverse scaling to the original angle, so\n                  // that when it'll finally be rendered it'll actually be at the desired slope.  Now\n                  // I'll let you figure out the math yourself.\n\n                  var scaledAngle = Math.atan(width * Math.tan(angle) / height);\n                  var sin = Math.sin(scaledAngle),\n                      cos = Math.cos(scaledAngle);\n                  var len = Math.abs(sin) + Math.abs(cos);\n                  var x = len / 2 * sin;\n                  var y = len / 2 * cos; // Because of the arctangent, our scaledAngle ends up between -PI/2..PI/2, possibly\n                  // losing the intended direction of the gradient.  The following fixes it.\n\n                  if (angle > Math.PI / 2 && angle <= 3 * Math.PI / 2) {\n                    x = -x;\n                    y = -y;\n                  } // compute the color stops.\n\n\n                  var implicit = [],\n                      right = 0;\n                  var stops = gradient.stops.map(function (s, i) {\n                    var offset = s.percent;\n\n                    if (offset) {\n                      offset = parseFloat(offset) / 100;\n                    } else if (s.length) {\n                      offset = parseFloat(s.length) / pxlen;\n                    } else if (i === 0) {\n                      offset = 0;\n                    } else if (i == gradient.stops.length - 1) {\n                      offset = 1;\n                    }\n\n                    var stop = {\n                      color: s.color.toCssRgba(),\n                      offset: offset\n                    };\n\n                    if (offset != null) {\n                      right = offset; // fix implicit offsets\n\n                      implicit.forEach(function (s, i) {\n                        var stop = s.stop;\n                        stop.offset = s.left + (right - s.left) * (i + 1) / (implicit.length + 1);\n                      });\n                      implicit = [];\n                    } else {\n                      implicit.push({\n                        left: right,\n                        stop: stop\n                      });\n                    }\n\n                    return stop;\n                  });\n                  var start = [0.5 - x, 0.5 + y];\n                  var end = [0.5 + x, 0.5 - y]; // finally, draw it.\n\n                  group.append(Path.fromRect(rect).stroke(null).fill(new LinearGradient({\n                    start: start,\n                    end: end,\n                    stops: stops,\n                    userSpace: false\n                  })));\n                  break;\n\n                case \"radial\":\n                  // XXX:\n                  if (window.console && window.console.log) {\n                    window.console.log(\"Radial gradients are not yet supported in HTML renderer\");\n                  }\n\n                  break;\n              }\n            };\n          }\n\n          function maybeRenderWidget(element, group) {\n            var visual;\n\n            if (element._kendoExportVisual) {\n              visual = element._kendoExportVisual();\n            } else if (window.kendo && window.kendo.jQuery && element.getAttribute(window.kendo.attr(\"role\"))) {\n              var widget = window.kendo.widgetInstance(window.kendo.jQuery(element));\n\n              if (widget && (widget.exportDOMVisual || widget.exportVisual)) {\n                if (widget.exportDOMVisual) {\n                  visual = widget.exportDOMVisual();\n                } else {\n                  visual = widget.exportVisual();\n                }\n              }\n            }\n\n            if (!visual) {\n              return false;\n            }\n\n            var wrap$$1 = new Group();\n            wrap$$1.children.push(visual);\n            var bbox = element.getBoundingClientRect();\n            wrap$$1.transform(transform$1().translate(bbox.left, bbox.top));\n            group.append(wrap$$1);\n            return true;\n          }\n\n          function renderImage(element, url, group) {\n            var box = getContentBox(element);\n            var rect = new Rect([box.left, box.top], [box.width, box.height]);\n            var image = new Image$1(url, rect);\n            setClipping(image, elementRoundBox(element, box, \"content\"));\n            group.append(image);\n          }\n\n          function zIndexSort(a, b) {\n            var sa = getComputedStyle$1(a);\n            var sb = getComputedStyle$1(b);\n            var za = parseFloat(getPropertyValue(sa, \"z-index\"));\n            var zb = parseFloat(getPropertyValue(sb, \"z-index\"));\n            var pa = getPropertyValue(sa, \"position\");\n            var pb = getPropertyValue(sb, \"position\");\n\n            if (isNaN(za) && isNaN(zb)) {\n              if (/static|absolute/.test(pa) && /static|absolute/.test(pb)) {\n                return 0;\n              }\n\n              if (pa == \"static\") {\n                return -1;\n              }\n\n              if (pb == \"static\") {\n                return 1;\n              }\n\n              return 0;\n            }\n\n            if (isNaN(za)) {\n              return zb === 0 ? 0 : zb > 0 ? -1 : 1;\n            }\n\n            if (isNaN(zb)) {\n              return za === 0 ? 0 : za > 0 ? 1 : -1;\n            }\n\n            return parseFloat(za) - parseFloat(zb);\n          }\n\n          function isFormField(element) {\n            return /^(?:textarea|select|input)$/i.test(element.tagName);\n          }\n\n          function getSelectedOption(element) {\n            if (element.selectedOptions && element.selectedOptions.length > 0) {\n              return element.selectedOptions[0];\n            }\n\n            return element.options[element.selectedIndex];\n          }\n\n          function renderCheckbox(element, group) {\n            var style = getComputedStyle$1(element);\n            var color = getPropertyValue(style, \"color\");\n            var box = element.getBoundingClientRect();\n\n            if (element.type == \"checkbox\") {\n              group.append(Path.fromRect(new Rect([box.left + 1, box.top + 1], [box.width - 2, box.height - 2])).stroke(color, 1));\n\n              if (element.checked) {\n                // fill a rectangle inside?  looks kinda ugly.\n                // group.append(\n                //     Path.fromRect(\n                //         new geo.Rect([ box.left+4, box.top+4 ],\n                //                      [ box.width-8, box.height-8])\n                //     ).fill(color).stroke(null)\n                // );\n                // let's draw a checkmark instead.  artistic, eh?\n                group.append(new Path().stroke(color, 1.2).moveTo(box.left + 0.22 * box.width, box.top + 0.55 * box.height).lineTo(box.left + 0.45 * box.width, box.top + 0.75 * box.height).lineTo(box.left + 0.78 * box.width, box.top + 0.22 * box.width));\n              }\n            } else {\n              group.append(new Circle(new Circle$2([(box.left + box.right) / 2, (box.top + box.bottom) / 2], Math.min(box.width - 2, box.height - 2) / 2)).stroke(color, 1));\n\n              if (element.checked) {\n                group.append(new Circle(new Circle$2([(box.left + box.right) / 2, (box.top + box.bottom) / 2], Math.min(box.width - 8, box.height - 8) / 2)).fill(color).stroke(null));\n              }\n            }\n          }\n\n          function renderFormField(element, group) {\n            var tag = element.tagName.toLowerCase();\n\n            if (tag == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n              return renderCheckbox(element, group);\n            }\n\n            var p = element.parentNode;\n            var doc = element.ownerDocument;\n            var el = doc.createElement(KENDO_PSEUDO_ELEMENT);\n            var option;\n            el.style.cssText = getCssText(getComputedStyle$1(element));\n\n            if (tag == \"input\") {\n              el.style.whiteSpace = \"pre\";\n            }\n\n            if (tag == \"select\" || tag == \"textarea\") {\n              el.style.overflow = \"auto\";\n            }\n\n            if (tag == \"select\") {\n              if (element.multiple) {\n                for (var i = 0; i < element.options.length; ++i) {\n                  option = doc.createElement(KENDO_PSEUDO_ELEMENT);\n                  option.style.cssText = getCssText(getComputedStyle$1(element.options[i]));\n                  option.style.display = \"block\"; // IE9 messes up without this\n\n                  option.textContent = element.options[i].textContent;\n                  el.appendChild(option);\n                }\n              } else {\n                option = getSelectedOption(element);\n\n                if (option) {\n                  el.textContent = option.textContent;\n                }\n              }\n            } else {\n              el.textContent = element.value;\n            }\n\n            p.insertBefore(el, element);\n            el.scrollLeft = element.scrollLeft;\n            el.scrollTop = element.scrollTop; // must temporarily hide the original element, otherwise it\n            // may affect layout of the fake element we want to render.\n\n            element.style.display = \"none\";\n            renderContents(el, group);\n            element.style.display = \"\";\n            p.removeChild(el);\n          }\n\n          function serializeSVG(element) {\n            var serializer = new window.XMLSerializer();\n            var xml = serializer.serializeToString(element);\n\n            if (browser.mozilla && !(element.getAttribute(\"width\") && element.getAttribute(\"height\"))) {\n              var doc = new window.DOMParser().parseFromString(xml, \"image/svg+xml\");\n              var svg$$1 = doc.documentElement;\n              var box = getContentBox(element);\n              svg$$1.setAttribute(\"width\", box.width);\n              svg$$1.setAttribute(\"height\", box.height);\n              xml = serializer.serializeToString(svg$$1);\n            }\n\n            return xml;\n          }\n\n          function renderContents(element, group) {\n            if (nodeInfo._stackingContext.element === element) {\n              // the group that was set in pushNodeInfo might have\n              // changed due to clipping/transforms, update it here.\n              nodeInfo._stackingContext.group = group;\n            }\n\n            switch (element.tagName.toLowerCase()) {\n              case \"img\":\n                renderImage(element, element.src, group);\n                break;\n\n              case \"svg\":\n                var xml = serializeSVG(element);\n                var dataURL = \"data:image/svg+xml;base64,\" + encodeBase64(xml);\n                renderImage(element, dataURL, group);\n                break;\n\n              case \"canvas\":\n                try {\n                  renderImage(element, element.toDataURL(\"image/png\"), group);\n                } catch (ex) {// tainted; can't draw it, ignore.\n                }\n\n                break;\n\n              case \"textarea\":\n              case \"input\":\n              case \"select\":\n                renderFormField(element, group);\n                break;\n\n              default:\n                var children = [],\n                    floats = [],\n                    positioned = [];\n\n                for (var i = element.firstChild; i; i = i.nextSibling) {\n                  switch (i.nodeType) {\n                    case 3:\n                      // Text\n                      if (/\\S/.test(i.data)) {\n                        renderText(element, i, group);\n                      }\n\n                      break;\n\n                    case 1:\n                      // Element\n                      var style = getComputedStyle$1(i);\n                      var floating = getPropertyValue(style, \"float\");\n                      var position = getPropertyValue(style, \"position\");\n\n                      if (position != \"static\") {\n                        positioned.push(i);\n                      } else if (floating != \"none\") {\n                        floats.push(i);\n                      } else {\n                        children.push(i);\n                      }\n\n                      break;\n                  }\n                }\n\n                mergeSort(children, zIndexSort).forEach(function (el) {\n                  renderElement(el, group);\n                });\n                mergeSort(floats, zIndexSort).forEach(function (el) {\n                  renderElement(el, group);\n                });\n                mergeSort(positioned, zIndexSort).forEach(function (el) {\n                  renderElement(el, group);\n                });\n            }\n          }\n\n          function renderText(element, node, group) {\n            if (emptyClipbox()) {\n              return;\n            }\n\n            var style = getComputedStyle$1(element);\n\n            if (parseFloat(getPropertyValue(style, \"text-indent\")) < -500) {\n              // assume it should not be displayed.  the slider's\n              // draggable handle displays a Drag text for some reason,\n              // having text-indent: -3333px.\n              return;\n            }\n\n            var text = node.data;\n            var start = 0;\n            var end = text.search(/\\S\\s*$/) + 1;\n\n            if (!end) {\n              return; // whitespace-only node\n            }\n\n            var fontSize = getPropertyValue(style, \"font-size\");\n            var lineHeight = getPropertyValue(style, \"line-height\"); // simply getPropertyValue(\"font\") doesn't work in Firefox :-\\\n\n            var font = [getPropertyValue(style, \"font-style\"), getPropertyValue(style, \"font-variant\"), getPropertyValue(style, \"font-weight\"), fontSize, // no need for line height here; it breaks layout in FF\n            getPropertyValue(style, \"font-family\")].join(\" \");\n            fontSize = parseFloat(fontSize);\n            lineHeight = parseFloat(lineHeight);\n\n            if (fontSize === 0) {\n              return;\n            }\n\n            var color = getPropertyValue(style, \"color\");\n            var range = element.ownerDocument.createRange();\n            var align$$1 = getPropertyValue(style, \"text-align\");\n            var isJustified = align$$1 == \"justify\";\n            var columnCount = getPropertyValue(style, \"column-count\", 1);\n            var whiteSpace = getPropertyValue(style, \"white-space\");\n            var textTransform = getPropertyValue(style, \"text-transform\"); // A line of 500px, with a font of 12px, contains an average of 80 characters, but since we\n            // err, we'd like to guess a bigger number rather than a smaller one.  Multiplying by 5\n            // seems to be a good option.\n\n            var estimateLineLength = element.getBoundingClientRect().width / fontSize * 5;\n\n            if (estimateLineLength === 0) {\n              estimateLineLength = 500;\n            } // we'll maintain this so we can workaround bugs in Chrome's Range.getClientRects\n            // https://github.com/telerik/kendo/issues/5740\n\n\n            var prevLineBottom = null;\n            var underline = nodeInfo[\"underline\"];\n            var lineThrough = nodeInfo[\"line-through\"];\n            var overline = nodeInfo[\"overline\"];\n            var hasDecoration = underline || lineThrough || overline; // doChunk returns true when all text has been rendered\n\n            while (!doChunk()) {}\n\n            if (hasDecoration) {\n              range.selectNode(node);\n              slice$1$1(range.getClientRects()).forEach(decorate);\n            }\n\n            return; // only function declarations after this line\n\n            function actuallyGetRangeBoundingRect(range) {\n              // XXX: to be revised when this Chrome bug is fixed:\n              // https://bugs.chromium.org/p/chromium/issues/detail?id=612459\n              if (microsoft || browser.chrome || browser.safari) {\n                // Workaround browser bugs: IE and Chrome would sometimes\n                // return 0 or 1-width rectangles before or after the main\n                // one.  https://github.com/telerik/kendo/issues/4674\n                // Actually Chrome 50 got worse, since the rectangles can now have the width of a\n                // full character, making it hard to tell whether it's a bogus rectangle or valid\n                // selection location.  The workaround is to ignore rectangles that fall on the\n                // previous line.  https://github.com/telerik/kendo/issues/5740\n                var rectangles = range.getClientRects(),\n                    box = {\n                  top: Infinity,\n                  right: -Infinity,\n                  bottom: -Infinity,\n                  left: Infinity\n                },\n                    done = false;\n\n                for (var i = 0; i < rectangles.length; ++i) {\n                  var b = rectangles[i];\n\n                  if (b.width <= 1 || b.bottom === prevLineBottom) {\n                    continue; // bogus rectangle\n                  }\n\n                  box.left = Math.min(b.left, box.left);\n                  box.top = Math.min(b.top, box.top);\n                  box.right = Math.max(b.right, box.right);\n                  box.bottom = Math.max(b.bottom, box.bottom);\n                  done = true;\n                }\n\n                if (!done) {\n                  return range.getBoundingClientRect();\n                }\n\n                box.width = box.right - box.left;\n                box.height = box.bottom - box.top;\n                return box;\n              }\n\n              return range.getBoundingClientRect();\n            } // Render a chunk of text, typically one line (but for justified text we render each word as\n            // a separate Text object, because spacing is variable).  Returns true when it finished the\n            // current node.  After each chunk it updates `start` to just after the last rendered\n            // character.\n\n\n            function doChunk() {\n              var origStart = start;\n              var box,\n                  pos = text.substr(start).search(/\\S/);\n              start += pos;\n\n              if (pos < 0 || start >= end) {\n                return true;\n              } // Select a single character to determine the height of a line of text.  The box.bottom\n              // will be essential for us to figure out where the next line begins.\n\n\n              range.setStart(node, start);\n              range.setEnd(node, start + 1);\n              box = actuallyGetRangeBoundingRect(range); // for justified text we must split at each space, because space has variable width.\n\n              var found = false;\n\n              if (isJustified || columnCount > 1) {\n                pos = text.substr(start).search(/\\s/);\n\n                if (pos >= 0) {\n                  // we can only split there if it's on the same line, otherwise we'll fall back\n                  // to the default mechanism (see findEOL below).\n                  range.setEnd(node, start + pos);\n                  var r = actuallyGetRangeBoundingRect(range);\n\n                  if (r.bottom == box.bottom) {\n                    box = r;\n                    found = true;\n                    start += pos;\n                  }\n                }\n              }\n\n              if (!found) {\n                // This code does three things: (1) it selects one line of text in `range`, (2) it\n                // leaves the bounding rect of that line in `box` and (3) it returns the position\n                // just after the EOL.  We know where the line starts (`start`) but we don't know\n                // where it ends.  To figure this out, we select a piece of text and look at the\n                // bottom of the bounding box.  If it changes, we have more than one line selected\n                // and should retry with a smaller selection.\n                //\n                // To speed things up, we first try to select all text in the node (`start` ->\n                // `end`).  If there's more than one line there, then select only half of it.  And\n                // so on.  When we find a value for `end` that fits in one line, we try increasing\n                // it (also in halves) until we get to the next line.  The algorithm stops when the\n                // right side of the bounding box does not change.\n                //\n                // One more thing to note is that everything happens in a single Text DOM node.\n                // There's no other tags inside it, therefore the left/top coordinates of the\n                // bounding box will not change.\n                pos = function findEOL(min, eol, max) {\n                  range.setEnd(node, eol);\n                  var r = actuallyGetRangeBoundingRect(range);\n\n                  if (r.bottom != box.bottom && min < eol) {\n                    return findEOL(min, min + eol >> 1, eol);\n                  } else if (r.right != box.right) {\n                    box = r;\n\n                    if (eol < max) {\n                      return findEOL(eol, eol + max >> 1, max);\n                    } else {\n                      return eol;\n                    }\n                  } else {\n                    return eol;\n                  }\n                }(start, Math.min(end, start + estimateLineLength), end);\n\n                if (pos == start) {\n                  // if EOL is at the start, then no more text fits on this line.  Skip the\n                  // remainder of this node entirely to avoid a stack overflow.\n                  return true;\n                }\n\n                start = pos;\n                pos = range.toString().search(/\\s+$/);\n\n                if (pos === 0) {\n                  return false; // whitespace only; we should not get here.\n                }\n\n                if (pos > 0) {\n                  // eliminate trailing whitespace\n                  range.setEnd(node, range.startOffset + pos);\n                  box = actuallyGetRangeBoundingRect(range);\n                }\n              } // another workaround for IE: if we rely on getBoundingClientRect() we'll overlap with the bullet for LI\n              // elements.  Calling getClientRects() and using the *first* rect appears to give us the correct location.\n              // Note: not to be used in Chrome as it randomly returns a zero-width rectangle from the previous line.\n\n\n              if (microsoft) {\n                box = range.getClientRects()[0];\n              }\n\n              var str = range.toString();\n\n              if (!/^(?:pre|pre-wrap)$/i.test(whiteSpace)) {\n                // node with non-significant space -- collapse whitespace.\n                str = str.replace(/\\s+/g, \" \");\n              } else if (/\\t/.test(str)) {\n                // with significant whitespace we need to do something about literal TAB characters.\n                // There's no TAB glyph in a font so they would be rendered in PDF as an empty box,\n                // and the whole text will stretch to fill the original width.  The core PDF lib\n                // does not have sufficient context to deal with it.\n                // calculate the starting column here, since we initially discarded any whitespace.\n                var cc = 0;\n\n                for (pos = origStart; pos < range.startOffset; ++pos) {\n                  var code = text.charCodeAt(pos);\n\n                  if (code == 9) {\n                    // when we meet a TAB we must round up to the next tab stop.\n                    // in all browsers TABs seem to be 8 characters.\n                    cc += 8 - cc % 8;\n                  } else if (code == 10 || code == 13) {\n                    // just in case we meet a newline we must restart.\n                    cc = 0;\n                  } else {\n                    // ordinary character --> advance one column\n                    cc++;\n                  }\n                } // based on starting column, replace any TAB characters in the string we actually\n                // have to display with spaces so that they align to columns multiple of 8.\n\n\n                while ((pos = str.search(\"\\t\")) >= 0) {\n                  var indent = \"        \".substr(0, 8 - (cc + pos) % 8);\n                  str = str.substr(0, pos) + indent + str.substr(pos + 1);\n                }\n              }\n\n              if (!found) {\n                prevLineBottom = box.bottom;\n              }\n\n              drawText(str, box);\n            }\n\n            function drawText(str, box) {\n              // In IE the box height will be approximately lineHeight, while in\n              // other browsers it'll (correctly) be the height of the bounding\n              // box for the current text/font.  Which is to say, IE sucks again.\n              // The only good solution I can think of is to measure the text\n              // ourselves and center the bounding box.\n              if (microsoft && !isNaN(lineHeight)) {\n                var height = getFontHeight(font);\n                var top = (box.top + box.bottom - height) / 2;\n                box = {\n                  top: top,\n                  right: box.right,\n                  bottom: top + height,\n                  left: box.left,\n                  height: height,\n                  width: box.right - box.left\n                };\n              } // var path = new Path({ stroke: { color: \"red\" }});\n              // path.moveTo(box.left, box.top)\n              //     .lineTo(box.right, box.top)\n              //     .lineTo(box.right, box.bottom)\n              //     .lineTo(box.left, box.bottom)\n              //     .close();\n              // group.append(path);\n\n\n              switch (textTransform) {\n                case \"uppercase\":\n                  str = str.toUpperCase();\n                  break;\n\n                case \"lowercase\":\n                  str = str.toLowerCase();\n                  break;\n\n                case \"capitalize\":\n                  str = str.replace(/(?:^|\\s)\\S/g, function (l) {\n                    return l.toUpperCase();\n                  });\n                  break;\n              }\n\n              var text = new TextRect(str, new Rect([box.left, box.top], [box.width, box.height]), {\n                font: font,\n                fill: {\n                  color: color\n                }\n              });\n              group.append(text);\n            }\n\n            function decorate(box) {\n              line(underline, box.bottom);\n              line(lineThrough, box.bottom - box.height / 2.7);\n              line(overline, box.top);\n\n              function line(color, ypos) {\n                if (color) {\n                  var width = fontSize / 12;\n                  var path = new Path({\n                    stroke: {\n                      width: width,\n                      color: color\n                    }\n                  });\n                  ypos -= width;\n                  path.moveTo(box.left, ypos).lineTo(box.right, ypos);\n                  group.append(path);\n                }\n              }\n            }\n          }\n\n          function groupInStackingContext(element, group, zIndex) {\n            var main;\n\n            if (zIndex != \"auto\") {\n              // use the current stacking context\n              main = nodeInfo._stackingContext.group;\n              zIndex = parseFloat(zIndex);\n            } else {\n              // normal flow  use given container.  we still have to\n              // figure out where should we insert this element with the\n              // assumption that its z-index is zero, as the group might\n              // already contain elements with higher z-index.\n              main = group;\n              zIndex = 0;\n            }\n\n            var a = main.children;\n\n            for (var i = 0; i < a.length; ++i) {\n              if (a[i]._dom_zIndex != null && a[i]._dom_zIndex > zIndex) {\n                break;\n              }\n            }\n\n            var tmp = new Group();\n            main.insert(i, tmp);\n            tmp._dom_zIndex = zIndex;\n\n            if (main !== group) {\n              // console.log(\"Placing\", element, \"in\", nodeInfo._stackingContext.element, \"at position\", i, \" / \", a.length);\n              // console.log(a.slice(i+1));\n              // if (nodeInfo._matrix) {\n              //     tmp.transform(nodeInfo._matrix);\n              // }\n              if (nodeInfo._clipbox) {\n                var m = nodeInfo._matrix.invert();\n\n                var r = nodeInfo._clipbox.transformCopy(m);\n\n                setClipping(tmp, Path.fromRect(r)); // console.log(r);\n                // tmp.append(Path.fromRect(r));\n                // tmp.append(new Text(element.className || element.id, r.topLeft()));\n              }\n            }\n\n            return tmp;\n          }\n\n          function renderElement(element, container) {\n            var style = getComputedStyle$1(element);\n            updateCounters(style);\n\n            if (/^(style|script|link|meta|iframe|col|colgroup)$/i.test(element.tagName)) {\n              return;\n            }\n\n            if (nodeInfo._clipbox == null) {\n              return;\n            }\n\n            var opacity = parseFloat(getPropertyValue(style, \"opacity\"));\n            var visibility = getPropertyValue(style, \"visibility\");\n            var display = getPropertyValue(style, \"display\");\n\n            if (opacity === 0 || visibility == \"hidden\" || display == \"none\") {\n              return;\n            }\n\n            var tr = getTransform(style);\n            var group;\n            var zIndex = getPropertyValue(style, \"z-index\");\n\n            if ((tr || opacity < 1) && zIndex == \"auto\") {\n              zIndex = 0;\n            }\n\n            group = groupInStackingContext(element, container, zIndex); // XXX: remove at some point\n            // group._pdfElement = element;\n            // group.options._pdfDebug = \"\";\n            // if (element.id) {\n            //     group.options._pdfDebug = \"#\" + element.id;\n            // }\n            // if (element.className) {\n            //     group.options._pdfDebug += \".\" + element.className.split(\" \").join(\".\");\n            // }\n\n            if (opacity < 1) {\n              group.opacity(opacity * group.opacity());\n            }\n\n            pushNodeInfo(element, style, group);\n\n            if (!tr) {\n              _renderWithPseudoElements(element, group);\n            } else {\n              saveStyle(element, function () {\n                // must clear transform, so getBoundingClientRect returns correct values.\n                pleaseSetPropertyValue(element.style, \"transform\", \"none\", \"important\"); // must also clear transitions, so correct values are returned *immediately*\n\n                pleaseSetPropertyValue(element.style, \"transition\", \"none\", \"important\"); // the presence of any transform makes it behave like it had position: relative,\n                // because why not.\n                // http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n\n                if (getPropertyValue(style, \"position\") == \"static\") {\n                  // but only if it's not already positioned. :-/\n                  pleaseSetPropertyValue(element.style, \"position\", \"relative\", \"important\");\n                } // must translate to origin before applying the CSS\n                // transformation, then translate back.\n\n\n                var bbox = element.getBoundingClientRect();\n                var x = bbox.left + tr.origin[0];\n                var y = bbox.top + tr.origin[1];\n                var m = [1, 0, 0, 1, -x, -y];\n                m = mmul(m, tr.matrix);\n                m = mmul(m, [1, 0, 0, 1, x, y]);\n                m = setTransform$1(group, m);\n                nodeInfo._matrix = nodeInfo._matrix.multiplyCopy(m);\n\n                _renderWithPseudoElements(element, group);\n              });\n            }\n\n            popNodeInfo(); //drawDebugBox(element.getBoundingClientRect(), container);\n          } // function drawDebugBox(box, group, color) {\n          //     var path = Path.fromRect(new geo.Rect([ box.left, box.top ], [ box.width, box.height ]));\n          //     if (color) {\n          //         path.stroke(color);\n          //     }\n          //     group.append(path);\n          // }\n          // function dumpTextNode(node) {\n          //     var txt = node.data.replace(/^\\s+/, \"\");\n          //     if (txt.length < 100) {\n          //         console.log(node.data.length + \": |\" + txt);\n          //     } else {\n          //         console.log(node.data.length + \": |\" + txt.substr(0, 50) + \"|...|\" + txt.substr(-50));\n          //     }\n          // }\n\n\n          function mmul(a, b) {\n            var a1 = a[0],\n                b1 = a[1],\n                c1 = a[2],\n                d1 = a[3],\n                e1 = a[4],\n                f1 = a[5];\n            var a2 = b[0],\n                b2 = b[1],\n                c2 = b[2],\n                d2 = b[3],\n                e2 = b[4],\n                f2 = b[5];\n            return [a1 * a2 + b1 * c2, a1 * b2 + b1 * d2, c1 * a2 + d1 * c2, c1 * b2 + d1 * d2, e1 * a2 + f1 * c2 + e2, e1 * b2 + f1 * d2 + f2];\n          }\n\n          var drawing = {\n            svg: svg$1,\n            canvas: canvas,\n            util: util,\n            HasObservers: HasObservers,\n            PathParser: PathParser,\n            parsePath: parsePath,\n            BaseNode: BaseNode,\n            OptionsStore: OptionsStore,\n            Surface: Surface,\n            SurfaceFactory: SurfaceFactory,\n            exportImage: exportImage,\n            exportSVG: exportSVG,\n            QuadNode: QuadNode,\n            ShapesQuadTree: ShapesQuadTree,\n            Element: Element$1,\n            Circle: Circle,\n            Arc: Arc,\n            Path: Path,\n            MultiPath: MultiPath,\n            Text: Text,\n            Image: Image$1,\n            Group: Group,\n            Layout: Layout,\n            Rect: Rect$2,\n            align: align,\n            vAlign: vAlign,\n            stack: stack,\n            vStack: vStack,\n            wrap: wrap,\n            vWrap: vWrap,\n            fit: fit,\n            LinearGradient: LinearGradient,\n            RadialGradient: RadialGradient,\n            GradientStop: GradientStop,\n            Gradient: Gradient,\n            Animation: Animation,\n            AnimationFactory: AnimationFactory,\n            drawDOM: drawDOM,\n            drawText: drawText,\n            getFontFaces: getFontFaces\n          };\n          kendo.deepExtend(kendo, {\n            drawing: drawing,\n            geometry: geometry\n          });\n          kendo.drawing.Segment = kendo.geometry.Segment;\n          kendo.dataviz.drawing = kendo.drawing;\n          kendo.dataviz.geometry = kendo.geometry;\n          kendo.drawing.util.measureText = kendo.util.measureText;\n          kendo.drawing.util.objectKey = kendo.util.objectKey;\n          kendo.drawing.Color = kendo.Color;\n          kendo.util.encodeBase64 = kendo.drawing.util.encodeBase64;\n        })(window.kendo.jQuery);\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    97757:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../kendo.color\");\n      /***/\n    },\n\n    /***/\n    4199:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../util/text-metrics\");\n      /***/\n    },\n\n    /***/\n    49454:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./util\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(5519);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","$","window","kendo","kendoDrawing","drawing","kendoDrawingUtil","util","extendStatic","Class","kendoUtil","support","supportBrowser","browser","createPromise","promiseAll","HasObservers","Class$$1","arguments","prototype","Object","create","constructor","fn","init","observers","_observers","addObserver","element","push","removeObserver","index","indexOf","splice","trigger","methodName","event","_suspended","idx","length","observer","optionsChange","e","geometryChange","suspend","resume","Math","max","_observerField","field","value","append$1$1","first","second","literals","arabicToRoman","n","values","roman","shift","UNDEFINED","defined","defId","definitionId","DEG_TO_RAD","PI","MAX_NUM","Number","MAX_VALUE","MIN_NUM","deg","radians","fromCharCode","String","encodeUTF8","input","output","i","code","charCodeAt","hi","low","isNaN","KEY_STR","encodeBase64","utfInput","chr1","chr2","chr3","enc1","enc2","enc3","enc4","charAt","eventCoordinates","x","location","y","pageX","clientX","pageY","clientY","eventElement","touch","initialTouch","target","isTransparent","color","last","array","limitValue","min","mergeSort","a","cmp","slice","merge","b","r","ai","bi","sort","m","floor","left","right","now","Date","getTime","rad","degrees","pow","p","round","precision","power","valueOrDefault","defaultValue","bindEvents","events","eventName","eventNames","trim","split","addEventListener","elementOffset","box","getBoundingClientRect","documentElement","document","top","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","elementStyles","styles","result","style","getComputedStyle","stylesArray","Array","isArray","getPixels","elementSize","size","width","height","size$1","parseInt","unbindEvents","name","removeEventListener","elementPadding","ref","paddingLeft","paddingTop","parseFloat","Matrix","c","d","call","multiplyCopy","matrix","invert","g","h","det","clone","equals","other","round$1","toArray","toString","separator","join","translate","unit","rotate","angle","cos","sin","scale","scaleX","scaleY","IDENTITY","matrixRegexp","parseMatrix","matrixString","match","members","map","Function","bind","concat","transformMatrix","transform","elementScale","parent","parentElement","parentMatrix","append","toString$1","OptionsStore","HasObservers$$1","options","prefix","this$1","member","_wrap","get","parts","part","set","current","_set","composite","parentObj","fieldName","obj","_clear","object","type","wrapped","setAccessor","getAccessor","defineAccessors","fields","capitalized","toUpperCase","substring","withAccessors","TBase","names","toMatrix","transformation","Point","superclass","staticAccessors","ZERO","origin","originPoint","translateWith","point","move","scaleCopy","transformCopy","distanceTo","dx","dy","sqrt","digits","doRound","arg0","arg1","arguments$1","minX","minY","maxX","maxY","minPoint","maxPoint","defineProperties","Size","Rect","cornerRadius","setOrigin","setSize","setCornerRadius","getOrigin","radius","getCornerRadius","getSize","topLeft","bottomRight","topRight","bottomLeft","center","bbox","tl","tr","br","bl","fromPoints","expand","expandCopy","containsPoint","_isOnPath","rectOuter","rectInner","union","intersect","rect1","bottom","rect2","Transformation","_matrix","_optionsChange","multiply","transform$1","Element$1","Element","_initOptions","prototypeAccessors","nodeType","clip","id","parentTransform","currentTransform","elementTransform","elementMatrix","combinedMatrix","visible","opacity","clippedBBox","_clippedBBox","transformedPoint","_hasFill","_containsPoint","_hasStroke","fill","stroke","ellipseExtremeAngles","rx","ry","extremeX","extremeY","atan2","PI_DIV_2","Circle$2","Circle","setCenter","setRadius","getCenter","pointAt","_pointAt","extremeAngles","currentPointX","currentPointY","currentPoint","inCircle","pointDistance","GRADIENT","paintable","anonymous","newFill","IDENTITY_MATRIX_HASH","measurable","matrixHash","_bboxCache","_matrixHash","_bbox","strokeWidth","geometryAccessor","defineGeometryAccessors","withGeometry","DEFAULT_STROKE","geometry","rawBBox","_geometry","PRECISION","close$1","tolerance","abs","closeOrLess","lineIntersection","p0","p1","p2","p3","s1x","s2x","s1y","s2y","nx","ny","s","t","MAX_INTERVAL","pow$1","accessors","Arc$2","Arc","radiusX","radiusY","startAngle","endAngle","anticlockwise","xRotation","radian","curvePoints","dir","interval","_arcInterval","intervalAngle","subIntervalsCount","ceil","subIntervalAngle","currentAngle","nextAngle","points","_intervalCurvePoints","cp1","cp2","endPoint","currentAngleX","bboxStartAngle","currentAngleY","oldStart","p1Derivative","_derivativeAt","p2Derivative","distance","angleRad","pointRadius","startPoint","intersection","calculateAngle","inAngleRange","start","end","largeArc","swipe","rotation","arcParameters","normalizeArcParameters","x1","y1","x2","y2","cx","cy","parameters","cosine","sine","xT","yT","sign","xt2","yt2","rx2","ry2","delta","constT","cxT","cyT","uX","uY","vX","vY","acos","angleCosine","signEndAngle","pop","unshift","ElementsArray","_splice","elements","_change","push$1","_add","slice$1","pop$1","_remove","splice$1","howMany","shift$1","unshift$1","_clearObserver","_setObserver","GeometryElementsArray","ElementsArray$$1","isOutOfEndPoint","controlPoint","rotatedPoint","calculateCurveAt","t1","toCubicPolynomial","ComplexNumber","real","img","add","cNumber","addConstant","negate","multiplyConstant","nthRoot","rad$$1","nthR","isReal","numberSign","solveQuadraticEquation","squareRoot","solveCubicEquation","q","Q","b3a","y3","z1","z2","hasRootsInRange","rootField","range","polynomial","roots","curveIntersectionsCount","rayIntersection","intersectsRay","count","lineIntersectionsCount","intersects","inRange","pointAccessor","definePointAccessors","withPoints","Segment","anchor","controlIn","controlOut","bboxTo","toSegment","segmentAnchor","toSegmentAnchor","rect","_curveBoundingBox","_lineBoundingBox","extremesX","_curveExtremesFor","extremesY","xLimits","arrayLimits","yLimits","extremes","_curveExtremes","x3","x4","t2","_intersectionsTo","segment","intersectionsCount","_isOnCurveTo","endSegment","p4","rotatedPoints","_isOnLineTo","_isOnPathTo","isOnPath","arr","ShapeMap","l","path","position","isRelative","lineTo","curveTo","v","toLineParamaters","arcTo","previousCommand","lastControlIn","paths","segments","reflectionPoint","cubicControlPoints","quadraticToCubicControlPoints","lastSegment","isVertical","insertPosition","third","scaledPoint","SEGMENT_REGEX","SPLIT_REGEX","MOVE","CLOSE","parseParameters","str","replace","number","parsePath","pathInstance","params","closePath","command","toLowerCase","moveTo","close","Error","elementsBoundingBox","applyTransform","boundingBox","elementBoundingBox","elementsClippedBoundingBox","Path","lineJoin","parse","MultiPath","arc","_addArcSegments","closed","previous","pathWidth","segmentBox","fromRect","fromArc","prototypeAccessors$1","instance","DEFAULT_STROKE$1","toPath","DEFAULT_FONT","DEFAULT_FILL","Text","content","font","measure","metrics","measureText","pos","Image$1","Image","src","_rect","traversable","childrenField","traverse","callback","children","child","Group","childrenChange","action","items","append$1","_reparent","insert","insertAt","remove","removeAt","clear","newParent","translateToPoint","transofrm","alignStart","align","axis","sizeField","alignStartReverse","DEFAULT_OPTIONS","alignContent","justifyContent","alignItems","spacing","orientation","lineSpacing","wrap","revers","forEach","forEachReverse","Layout","Group$$1","extend","_fieldMap","_initMap","fieldMap","groupsSizeField","groupAxis","groupsAxis","reverse","justifyAlign","reflow","_initGroups","groups","groupsSize","ref$1","groupOrigin","elementOrigin","groupStart","elementStart","group","groupBox","arrangeElements","groupIdx","lineSize","bboxes","scaledStart","scaledSize","newStart","_newGroup","addGroup","_addToGroup","Rect$2","Rect$$1","alignElements","alignment","vAlign","stackElements","stackAxis","otherAxis","previousBBox","createStackElements","stack","vStack","getStacks","maxSize","stacks","stackSize","addElementToStack","wrapElements","startElement","elementIdx","vWrap","fit","rectSize","StopsArray","optionsAccessor","defineOptionsAccessors","withOptions","GradientStop","offset","arg","stop","Gradient","stops","_createStops","_userSpace","userSpace","addStop","removeStop","points$1","LinearGradient","RadialGradient","_radius","_fallbackFill","fallbackFill","swing","linear","easeOutElastic","time","diff","asin","easingFunctions","AnimationFactory","_items","register","Animation","_options","duration","easing","setup","step","play","delay","finish","abort","setTimeout","loop","_stopped","wallTime","easingPosition","animationFrame","destroy","instance$1","PathParser","multiPath","BaseNode","srcElement","childNodes","observe","load","node","removeSelf","invalidate","Surface$2","Observable$$1","Surface","_kendoExportVisual","exportVisual","_click","_handler","_mouseenter","_mouseleave","_mousemove","_visual","_enableTracking","draw","unbind","eventTarget","domNode","_kendoNode","currentSize","_size","_resize","resize","force","suspendTracking","_suspendedTracking","resumeTracking","originalEvent","_elementOffset","padding","_surfacePoint","coord","inverseTransform","Observable","renderAttr","renderAllAttr","attrs","renderStyle","NODE_MAP","SVG_NS","NONE","renderSVG","container","svg","innerHTML","testFragment","testContainer","createElement","hasParser","DOMParser","firstChild","namespaceURI","parser","chartDoc","parseFromString","importedDoc","adoptNode","appendChild","renderSVG$1","TRANSFORM","DefinitionMap","isDefinition","baseUrl","base","getElementsByTagName","href","url","msie","hashIndex","Node","BaseNode$$1","definitions","clearDefinitions","childNode","createDefinitions","attachTo","root","domElement","render","insertBefore","setElement","nodes","childElement","parentNode","removeChild","template","renderChildren","css","updateDefinition","attr","removeAttr","setAttribute","allAttr","allCss","removeAttribute","mapTransform","renderTransform","transformChange","mapStyle","cursor","renderStyle$1","renderOpacity","renderId","hasDefinitions","definition","definitionChange","refUrl","renderDefinitions","mapDefinitions","skipBaseHref","baseHref","baseUrl$1","GradientStopNode","Node$$1","renderOffset","GradientNode","loadStops","stopNode","mapCoordinates","renderCoordinates","mapSpace","LinearGradientNode","GradientNode$$1","RadialGradientNode","ClipNode","DefinitionNode","definitionMap","addDefinitions","removeDefinitions","createDefinition","item","addDefinition","mapItem","removeDefinition","RootNode","defs","firstElementChild","DASH_ARRAYS","dot","dash","longdash","dashdot","longdashdot","longdashdotdot","SOLID","BUTT","ATTRIBUTE_MAP","SPACE","PathNode","renderData","mapFill","mapStroke","textContent","printPath","currentType","segmentType","printPoints","segmentStart","segmentEnd","renderLinecap","dashType","renderDashType","renderStroke","dashArray","lineCap","renderFill","ArcNode","PathNode$$1","CircleNode","GroupNode","ImageNode","mapPosition","mapSource","renderPosition","encode","htmlEncode","renderSource","MultiPathNode","RectNode","ENTITY_REGEX","decodeEntities","text","test","_element","lastIndex","innerText","TextNode","setY","baseline","renderContent","normalizeText","renderTextAnchor","rtl","edge","RTL","alignToScreen","ctm","getScreenCTM","Surface$3","BaseSurface","_root","direction","_template","_rootElement","click","mouseover","mouseout","mousemove","viewBox","_offset","visual","NODE_MAP$2","renderPath","ctx","prevSeg","prevOut","bezierCurveTo","Node$2","initClip","clearClip","setClip","beginPath","setTransform","loadElements","cors","setOpacity","globalAlpha","opactity","GroupNode$2","renderTo","save","restore","FRAME_DELAY","RootNode$2","canvas","getContext","invalidateHandler","_invalidate","throttle","_rescale","_devicePixelRatio","devicePixelRatio","fixedScale","clearRect","QuadRoot","shapes","shape","_quadNode","pointShapes","QuadNode","QuadRoot$$1","inBounds","nodeRect","nodeBottomRight","inserted","_initChildren","halfWidth","halfHeight","ROOT_SIZE","LEVEL_STEP","MAX_LEVEL","ShapesQuadTree","initRoots","rootMap","rootElements","pointShape","sectorRoot","assignZindex","zIndexComparer","zIndex","levelWeight","parents","_zIndex","bboxChange","_insertShape","elementsArray","_insert","sectors","getSectors","inRoot","bottomX","bottomY","SurfaceCursor","surface","_resetCursor","_shapeCursor","_current","_defaultCursor","_getCursor","_setCursor","addGradientStops","gradient","parseColor","addColorStop","toCssRgba","PathNode$2","renderPoints","setLineDash","setLineCap","setLineJoin","setFill","setStroke","hasFill","setGradientFill","fillStyle","createLinearGradient","createRadialGradient","strokeStyle","lineWidth","mozDash","webkitLineDash","ArcNode$2","CircleNode$2","ImageNode$2","onLoad","onError","loading","crossOrigin","complete","onload","onerror","state","drawImage","resolve","reject","MultiPathNode$2","RectNode$2","TextNode$2","textAlign","fillText","strokeText","Surface$4","_mouseTrackHandler","_trackMouse","_searchTree","_cursor","image","rootElement","loadingStates","promise","resolveDataURL","data","toDataURL","then","currentShape","_currentShape","instance$2","support$1","hasDocument","supportsCanvas","supportsSVG","implementation","hasFeature","SurfaceFactory","preferred","logToConsole","navigator","userAgent","exportGroup","rootGroup","exportRoot","svg$1","exportImage","defaults","surfaceOptions","display","body","exportSVG","raw","slice$1$1","thing","KENDO_PSEUDO_ELEMENT","IMAGE_CACHE","nodeInfo","inBrowser","microsoft","TextRect","Text$$1","_pdfRect","addClass","el","cls","classList","className","removeClass","reduce","word","setCSS","keys","key","matches","selector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","querySelectorAll","closest","cloneNodes","cloneNode","$el","$clone","tagName","checked","selected","nextSibling","dive","canvases","canvas$$1","orig","jQuery","getXY","drawDOM","pdf","defineFont","getFontFaces","ownerDocument","doOne","setTransform$1","_clipbox","_stackingContext","avoidLinks","_avoidLinks","renderElement","cacheImages","forceBreak","forcePageBreak","hasPaperSize","paperSize","paperOptions","getPaperOptions","def","pageWidth","pageHeight","margin","hasMargin","Boolean","multiPage","_ignoreMargin","handlePageBreaks","progress","canceled","pageNum","next","pages","page","totalPages","cancel","makeTemplate","div","doc","copy","_destructive","adjust","tfoot","ol","li","boxSizing","paddingRight","overflow","beforePageBreak","whenImagesAreActuallyLoaded","doPageBreak","splitElement","makePage","keepTogether","offsetHeight","tag","getAttribute","tableLayout","getComputedStyle$1","bottomPadding","getPropertyValue","bottomBorder","saveAdjust","isFirst","breakAtElement","fall","fallsOnMargin","splitText","firstInParent","table","colgroup","thead","grid","gridHead","querySelector","repeatHeaders","createRange","setStartBefore","setEndBefore","extractContents","preventBulletOnListItem","pageClassName","available","len","selectNodeContents","nextnode","findEOP","setEnd","endOffset","drawText","pushNodeInfo","renderText","_renderElement","popNodeInfo","parseBackgroundImage","tok_linear_gradient","tok_percent","tok_length","tok_keyword","tok_angle","tok_whitespace","tok_popen","tok_pclose","tok_comma","tok_url","tok_content","cache1","cache2","hasOwnProperty","skip_ws","exec","substr","read","token","read_stop","percent","toRGB","read_linear_gradient","propName","to1","to2","parseAngle","to","read_url","tok","splitProperty","cache","cacheKey","ret","last$$1","in_paren","in_string","looking_at","getFontURL","getFontHeight","styleSheets","doStylesheet","ss","rules","cssRules","ex","addRules","findFonts","rule","cssText","styleSheet","family","bold","italic","addRule","getCounter","getAllCounters","getPrototypeOf","incCounter","inc","resetCounter","val","doCounters","updateCounters","counterReset","counterIncrement","parseColor$1","pending","images","urls","bg","alphaNumeral","decoration","createsStackingContext","updateClipbox","emptyClipbox","cb","prop","pseudoElt","defa","webkit","mozilla","opera","pleaseSetPropertyValue","important","setProperty","getBorder","side","saveStyle","func","prev","getBorderRadius","sanitizeRadius","getContentBox","innerBox","wt","wr","wb","wl","getTransform","transform$$1","radiansToDegrees","num","setClipping","clipPath","addArcToPath","adjustBorderRadiusForBox","rTL","rTR","rBR","rBL","tl_x","tl_y","tr_x","tr_y","br_x","br_y","bl_x","bl_y","elementRoundBox","bt","bb","pt","pr","pb","pl","roundBox","rTL0","rTR0","rBR0","rBL0","tmp","formatCounter","evalPseudoElementContent","displayCounter","getCssText","_renderWithPseudoElements","fake","pseudo","kind","place","psel","saveClass","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundOrigin","backgroundSize","textOverflow","saveTextOverflow","version","currentStyle","innerbox","boxes","cells","getClientRects","adjustBoxes","drawOneBox","_pdfLink","drawBullet","clipit","isFormField","maybeRenderWidget","renderContents","tableBorderLeft","tableBorderTop","tableBox","firstCell","rows","firstCellBox","drawEdge","Wtop","Wleft","Wright","rl","rr","drawRoundCorner","ri","drawBackground","background","drawOneBackground","drawBackgroundImage","gradientRenderer","img_width","img_height","renderBG","aspect_ratio","orgBox","rewX","rewY","repeatX","listStyleType","listStylePosition","_drawBullet","bullet","elementIndex","k","fontSize","lineHeight","fontFamily","isLast","shouldDrawLeft","shouldDrawRight","inv","pxlen","scaledAngle","atan","tan","implicit","console","log","widget","widgetInstance","exportDOMVisual","wrap$$1","renderImage","zIndexSort","sa","sb","za","zb","pa","getSelectedOption","selectedOptions","selectedIndex","renderCheckbox","renderFormField","option","whiteSpace","multiple","serializeSVG","serializer","XMLSerializer","xml","serializeToString","svg$$1","dataURL","floats","positioned","floating","search","align$$1","isJustified","columnCount","textTransform","estimateLineLength","prevLineBottom","underline","lineThrough","overline","hasDecoration","doChunk","selectNode","decorate","actuallyGetRangeBoundingRect","chrome","safari","rectangles","Infinity","done","origStart","setStart","found","findEOL","eol","startOffset","cc","indent","line","ypos","groupInStackingContext","main","_dom_zIndex","visibility","mmul","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","deepExtend","dataviz","objectKey","Color","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/client/app-router/node_modules/@progress/kendo-ui/js/drawing/kendo-drawing.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 5519:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-drawing` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(49454), __webpack_require__(97757), __webpack_require__(4199) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\n(function($) {\n/* eslint-disable space-before-blocks, space-before-function-paren */\n\nwindow.kendo = window.kendo || {};\nvar kendoDrawing = kendo.drawing;\nvar kendoDrawingUtil = kendoDrawing.util;\nvar extendStatic = kendoDrawingUtil.extendStatic;\nvar Class = kendo.Class;\nvar kendoUtil = kendo.util;\nvar support = kendo.support;\nvar supportBrowser = support.browser;\n\nvar createPromise = kendoDrawingUtil.createPromise;\nvar promiseAll = kendoDrawingUtil.promiseAll;\n\nvar HasObservers = (function (Class$$1) {\n    function HasObservers () {\n        Class$$1.apply(this, arguments);\n    }\n\n    extendStatic(HasObservers, Class$$1);\n    HasObservers.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    HasObservers.prototype.constructor = HasObservers;\n    HasObservers.fn = HasObservers.prototype;\n    HasObservers.fn.init = HasObservers.fn.constructor;\n\n    HasObservers.prototype.observers = function observers () {\n        this._observers = this._observers || [];\n        return this._observers;\n    };\n\n    HasObservers.prototype.addObserver = function addObserver (element) {\n        if (!this._observers) {\n            this._observers = [ element ];\n        } else {\n            this._observers.push(element);\n        }\n        return this;\n    };\n\n    HasObservers.prototype.removeObserver = function removeObserver (element) {\n        var observers = this.observers();\n        var index = observers.indexOf(element);\n        if (index !== -1) {\n            observers.splice(index, 1);\n        }\n        return this;\n    };\n\n    HasObservers.prototype.trigger = function trigger (methodName, event) {\n        var observers = this._observers;\n\n        if (observers && !this._suspended) {\n            for (var idx = 0; idx < observers.length; idx++) {\n                var observer = observers[idx];\n                if (observer[methodName]) {\n                    observer[methodName](event);\n                }\n            }\n        }\n        return this;\n    };\n\n    HasObservers.prototype.optionsChange = function optionsChange (e) {\n        if (e === void 0) { e = {}; }\n\n        e.element = this;\n        this.trigger(\"optionsChange\", e);\n    };\n\n    HasObservers.prototype.geometryChange = function geometryChange () {\n        this.trigger(\"geometryChange\", {\n            element: this\n        });\n    };\n\n    HasObservers.prototype.suspend = function suspend () {\n        this._suspended = (this._suspended || 0) + 1;\n        return this;\n    };\n\n    HasObservers.prototype.resume = function resume () {\n        this._suspended = Math.max((this._suspended || 0) - 1, 0);\n        return this;\n    };\n\n    HasObservers.prototype._observerField = function _observerField (field, value) {\n        if (this[field]) {\n            this[field].removeObserver(this);\n        }\n        this[field] = value;\n        value.addObserver(this);\n    };\n\n    return HasObservers;\n}(Class));\n\nfunction append$1$1(first, second) {\n    first.push.apply(first, second);\n    return first;\n}\n\n/* eslint-disable key-spacing,no-multi-spaces,no-param-reassign */\n\nvar literals = {\n    1    : \"i\",       10   : \"x\",       100  : \"c\",\n    2    : \"ii\",      20   : \"xx\",      200  : \"cc\",\n    3    : \"iii\",     30   : \"xxx\",     300  : \"ccc\",\n    4    : \"iv\",      40   : \"xl\",      400  : \"cd\",\n    5    : \"v\",       50   : \"l\",       500  : \"d\",\n    6    : \"vi\",      60   : \"lx\",      600  : \"dc\",\n    7    : \"vii\",     70   : \"lxx\",     700  : \"dcc\",\n    8    : \"viii\",    80   : \"lxxx\",    800  : \"dccc\",\n    9    : \"ix\",      90   : \"xc\",      900  : \"cm\",\n    1000 : \"m\"\n};\n\nfunction arabicToRoman(n) {\n    var values = [ 1000,\n                   900 , 800, 700, 600, 500, 400, 300, 200, 100,\n                   90  , 80 , 70 , 60 , 50 , 40 , 30 , 20 , 10 ,\n                   9   , 8  , 7  , 6  , 5  , 4  , 3  , 2  , 1 ];\n\n    var roman = \"\";\n    while (n > 0) {\n        if (n < values[0]) {\n            values.shift();\n        } else {\n            roman += literals[values[0]];\n            n -= values[0];\n        }\n    }\n    return roman;\n}\n\nvar UNDEFINED = \"undefined\";\n\nfunction defined(value) {\n    return typeof value !== UNDEFINED;\n}\n\nvar defId = 1;\n\nfunction definitionId() {\n    return \"kdef\" + defId++;\n}\n\nvar DEG_TO_RAD = Math.PI / 180;\nvar MAX_NUM = Number.MAX_VALUE;\nvar MIN_NUM = -Number.MAX_VALUE;\n\nfunction deg(radians) {\n    return radians / DEG_TO_RAD;\n}\n\nvar fromCharCode = String.fromCharCode;\n\n// Encodes a string as UTF-8\nfunction encodeUTF8(input) {\n    var output = \"\";\n\n    for (var i = 0; i < input.length; i++) {\n        var code = input.charCodeAt(i);\n\n        if (0xD800 <= code && code <= 0xDBFF) {\n            var hi = code;\n            var low = input.charCodeAt(++i);\n\n            if (!isNaN(low)) {\n                // Combine high and low surrogate\n                // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt\n                code = (hi - 0xD800) * 0x400 +\n                       (low - 0xDC00) + 0x10000;\n            }\n        }\n\n        if (code < 0x80) {\n            // One byte\n            output += fromCharCode(code);\n        } else if (code < 0x800) {\n            // Two bytes\n            output += fromCharCode(0xC0 | (code >>> 6));\n            output += fromCharCode(0x80 | (code & 0x3f));\n        } else if (code < 0x10000) {\n            // Three bytes\n            output += fromCharCode(0xE0 | (code >>> 12));\n            output += fromCharCode(0x80 | (code >>> 6 & 0x3f));\n            output += fromCharCode(0x80 | (code & 0x3f));\n        } else if (code < 0x10FFFF) {\n            // Four bytes\n            output += fromCharCode(0xF0 | (code >>> 18));\n            output += fromCharCode(0x80 | (code >>> 12 & 0x3f));\n            output += fromCharCode(0x80 | (code >>> 6 & 0x3f));\n            output += fromCharCode(0x80 | (code & 0x3f));\n        }\n    }\n\n    return output;\n}\n\n// Encodes a string as UTF-16 big-endian\n\nvar KEY_STR = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nfunction encodeBase64(input) {\n    var output = \"\";\n    var i = 0;\n\n    var utfInput = encodeUTF8(input);\n\n    while (i < utfInput.length) {\n        var chr1 = utfInput.charCodeAt(i++);\n        var chr2 = utfInput.charCodeAt(i++);\n        var chr3 = utfInput.charCodeAt(i++);\n\n        var enc1 = chr1 >> 2;\n        var enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        var enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n        var enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n            enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n            enc4 = 64;\n        }\n\n        output = output +\n            KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) +\n            KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\n    }\n\n    return output;\n}\n\nfunction eventCoordinates(e) {\n    if (defined((e.x || {}).location)) {\n        return {\n            x: e.x.location,\n            y: e.y.location\n        };\n    }\n\n    return {\n        x: e.pageX || e.clientX || 0,\n        y: e.pageY || e.clientY || 0\n    };\n}\n\nfunction eventElement(e) {\n    if (e === void 0) { e = {}; }\n\n    return e.touch ? e.touch.initialTouch : e.target;\n}\n\nfunction isTransparent(color) {\n    return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n}\n\nfunction last(array) {\n    if (array) {\n        return array[array.length - 1];\n    }\n}\n\nfunction limitValue(value, min, max) {\n    return Math.max(Math.min(value, max), min);\n}\n\n/* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n/* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n/* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n/* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n// mergeSort is stable.\nfunction mergeSort(a, cmp) {\n    if (a.length < 2) {\n        return a.slice();\n    }\n    function merge(a, b) {\n        var r = [], ai = 0, bi = 0, i = 0;\n        while (ai < a.length && bi < b.length) {\n            if (cmp(a[ai], b[bi]) <= 0) {\n                r[i++] = a[ai++];\n            } else {\n                r[i++] = b[bi++];\n            }\n        }\n        if (ai < a.length) {\n            r.push.apply(r, a.slice(ai));\n        }\n        if (bi < b.length) {\n            r.push.apply(r, b.slice(bi));\n        }\n        return r;\n    }\n    return (function sort(a) {\n        if (a.length <= 1) {\n            return a;\n        }\n        var m = Math.floor(a.length / 2);\n        var left = a.slice(0, m);\n        var right = a.slice(m);\n        left = sort(left);\n        right = sort(right);\n        return merge(left, right);\n    })(a);\n}\n\nvar now = Date.now || function() {\n    return new Date().getTime();\n};\n\nfunction rad(degrees) {\n    return degrees * DEG_TO_RAD;\n}\n\nfunction pow(p) {\n    if (p) {\n        return Math.pow(10, p);\n    }\n\n    return 1;\n}\n\nfunction round(value, precision) {\n    var power = pow(precision);\n    return Math.round(value * power) / power;\n}\n\nfunction valueOrDefault(value, defaultValue) {\n    return defined(value) ? value : defaultValue;\n}\n\nfunction bindEvents(element, events) {\n    for (var eventName in events) {\n        var eventNames = eventName.trim().split(\" \");\n        for (var idx = 0; idx < eventNames.length; idx++) {\n            element.addEventListener(eventNames[idx], events[eventName], false);\n        }\n    }\n}\n\nfunction elementOffset(element) {\n    var box = element.getBoundingClientRect();\n\n    var documentElement = document.documentElement;\n\n    return {\n        top: box.top + (window.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0),\n        left: box.left + (window.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0)\n    };\n}\n\nfunction elementStyles(element, styles) {\n    var result = {};\n    var style = window.getComputedStyle(element) || {};\n    var stylesArray = Array.isArray(styles) ? styles : [ styles ];\n\n    for (var idx = 0; idx < stylesArray.length; idx++) {\n        var field = stylesArray[idx];\n        result[field] = style[field];\n    }\n\n    return result;\n}\n\nfunction getPixels(value) {\n    if (isNaN(value)) {\n        return value;\n    }\n    return value + \"px\";\n}\n\nfunction elementSize(element, size) {\n    if (size) {\n        var width = size.width;\n        var height = size.height;\n\n        if (defined(width)) {\n            element.style.width = getPixels(width);\n        }\n\n        if (defined(height)) {\n            element.style.height = getPixels(height);\n        }\n\n    } else {\n        var size$1 = elementStyles(element, [ 'width', 'height' ]);\n\n        return {\n            width: parseInt(size$1.width, 10),\n            height: parseInt(size$1.height, 10)\n        };\n    }\n}\n\nfunction unbindEvents(element, events) {\n    if (events === void 0) { events = {}; }\n\n    for (var name in events) {\n        var eventNames = name.trim().split(\" \");\n        for (var idx = 0; idx < eventNames.length; idx++) {\n            element.removeEventListener(eventNames[idx], events[name], false);\n        }\n    }\n}\n\nfunction elementPadding(element) {\n    var ref = elementStyles(element, [ \"paddingLeft\", \"paddingTop\" ]);\n    var paddingLeft = ref.paddingLeft;\n    var paddingTop = ref.paddingTop;\n    return {\n        top: parseFloat(paddingTop),\n        left: parseFloat(paddingLeft)\n    };\n}\n\nvar Matrix = (function (Class$$1) {\n    function Matrix(a, b, c, d, e, f) {\n        if (a === void 0) { a = 0; }\n        if (b === void 0) { b = 0; }\n        if (c === void 0) { c = 0; }\n        if (d === void 0) { d = 0; }\n        if (e === void 0) { e = 0; }\n        if (f === void 0) { f = 0; }\n\n        Class$$1.call(this);\n\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.e = e;\n        this.f = f;\n    }\n\n    extendStatic(Matrix, Class$$1);\n    Matrix.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    Matrix.prototype.constructor = Matrix;\n    Matrix.fn = Matrix.prototype;\n    Matrix.fn.init = Matrix.fn.constructor;\n\n    Matrix.prototype.multiplyCopy = function multiplyCopy (matrix) {\n        return new Matrix(\n            this.a * matrix.a + this.c * matrix.b,\n            this.b * matrix.a + this.d * matrix.b,\n            this.a * matrix.c + this.c * matrix.d,\n            this.b * matrix.c + this.d * matrix.d,\n            this.a * matrix.e + this.c * matrix.f + this.e,\n            this.b * matrix.e + this.d * matrix.f + this.f\n        );\n    };\n\n    Matrix.prototype.invert = function invert () {\n        var ref = this;\n        var a = ref.a;\n        var b = ref.b;\n        var d = ref.c;\n        var e = ref.d;\n        var g = ref.e;\n        var h = ref.f;\n        var det = a * e - b * d;\n\n        if (det === 0) {\n            return null;\n        }\n\n        return new Matrix(e / det, -b / det, -d / det, a / det,\n                          (d * h - e * g) / det, (b * g - a * h) / det);\n    };\n\n    Matrix.prototype.clone = function clone () {\n        return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n    };\n\n    Matrix.prototype.equals = function equals (other) {\n        if (!other) {\n            return false;\n        }\n\n        return this.a === other.a && this.b === other.b &&\n               this.c === other.c && this.d === other.d &&\n               this.e === other.e && this.f === other.f;\n    };\n\n    Matrix.prototype.round = function round$1 (precision) {\n        this.a = round(this.a, precision);\n        this.b = round(this.b, precision);\n        this.c = round(this.c, precision);\n        this.d = round(this.d, precision);\n        this.e = round(this.e, precision);\n        this.f = round(this.f, precision);\n\n        return this;\n    };\n\n    Matrix.prototype.toArray = function toArray (precision) {\n        var result = [ this.a, this.b, this.c, this.d, this.e, this.f ];\n\n        if (defined(precision)) {\n            for (var i = 0; i < result.length; i++) {\n                result[i] = round(result[i], precision);\n            }\n        }\n\n        return result;\n    };\n\n    Matrix.prototype.toString = function toString (precision, separator) {\n        if (separator === void 0) { separator = \",\"; }\n\n        return this.toArray(precision).join(separator);\n    };\n\n    Matrix.translate = function translate (x, y) {\n        return new Matrix(1, 0, 0, 1, x, y);\n    };\n\n    Matrix.unit = function unit () {\n        return new Matrix(1, 0, 0, 1, 0, 0);\n    };\n\n    Matrix.rotate = function rotate (angle, x, y) {\n        var matrix = new Matrix();\n        matrix.a = Math.cos(rad(angle));\n        matrix.b = Math.sin(rad(angle));\n        matrix.c = -matrix.b;\n        matrix.d = matrix.a;\n        matrix.e = (x - x * matrix.a + y * matrix.b) || 0;\n        matrix.f = (y - y * matrix.a - x * matrix.b) || 0;\n\n        return matrix;\n    };\n\n    Matrix.scale = function scale (scaleX, scaleY) {\n        return new Matrix(scaleX, 0, 0, scaleY, 0, 0);\n    };\n\n    return Matrix;\n}(Class));\n\nMatrix.IDENTITY = Matrix.unit();\n\nvar matrixRegexp = /matrix\\((.*)\\)/;\n\nfunction parseMatrix(matrixString) {\n    var match = matrixString.match(matrixRegexp);\n    if (match === null || match.length !== 2) {\n        return Matrix.unit();\n    }\n\n    var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n    return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n}\n\nfunction transformMatrix(element) {\n    var transform = getComputedStyle(element).transform;\n\n    if (transform === 'none') {\n        return Matrix.unit();\n    }\n\n    return parseMatrix(transform);\n}\n\nfunction elementScale(element) {\n    if (!element) {\n        return Matrix.unit();\n    }\n\n    var matrix = transformMatrix(element);\n    var parent = element.parentElement;\n    while (parent) {\n        var parentMatrix = transformMatrix(parent);\n        matrix = matrix.multiplyCopy(parentMatrix);\n        parent = parent.parentElement;\n    }\n\n    matrix.b = matrix.c = matrix.e = matrix.f = 0;\n    return matrix;\n}\n\nvar util = {\n\tappend: append$1$1,\n\tarabicToRoman: arabicToRoman,\n\tcreatePromise: createPromise,\n\tdefined: defined,\n\tdefinitionId: definitionId,\n\tdeg: deg,\n\tencodeBase64: encodeBase64,\n\teventCoordinates: eventCoordinates,\n\teventElement: eventElement,\n\tisTransparent: isTransparent,\n\tlast: last,\n\tlimitValue: limitValue,\n\tmergeSort: mergeSort,\n\tnow: now,\n\tpromiseAll: promiseAll,\n\trad: rad,\n\tround: round,\n\tvalueOrDefault: valueOrDefault,\n\tbindEvents: bindEvents,\n\telementOffset: elementOffset,\n\telementSize: elementSize,\n\telementStyles: elementStyles,\n\tunbindEvents: unbindEvents,\n\telementPadding: elementPadding,\n\telementScale: elementScale,\n\tDEG_TO_RAD: DEG_TO_RAD,\n\tMAX_NUM: MAX_NUM,\n\tMIN_NUM: MIN_NUM\n};\n\nvar toString$1 = {}.toString;\n\nvar OptionsStore = (function (HasObservers$$1) {\n    function OptionsStore(options, prefix) {\n        var this$1 = this;\n        if (prefix === void 0) { prefix = \"\"; }\n\n        HasObservers$$1.call(this);\n\n        this.prefix = prefix;\n\n        for (var field in options) {\n            var member = options[field];\n            member = this$1._wrap(member, field);\n            this$1[field] = member;\n        }\n    }\n\n    extendStatic(OptionsStore, HasObservers$$1);\n    OptionsStore.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n    OptionsStore.prototype.constructor = OptionsStore;\n    OptionsStore.fn = OptionsStore.prototype;\n    OptionsStore.fn.init = OptionsStore.fn.constructor;\n\n    OptionsStore.prototype.get = function get (field) {\n        var parts = field.split(\".\");\n        var result = this;\n\n        while (parts.length && result) {\n            var part = parts.shift();\n            result = result[part];\n        }\n\n        return result;\n    };\n\n    OptionsStore.prototype.set = function set (field, value) {\n        var current = this.get(field);\n\n        if (current !== value) {\n            this._set(field, this._wrap(value, field));\n            this.optionsChange({\n                field: this.prefix + field,\n                value: value\n            });\n        }\n    };\n\n    OptionsStore.prototype._set = function _set (field, value) {\n        var this$1 = this;\n\n        var composite = field.indexOf(\".\") >= 0;\n        var parentObj = this;\n        var fieldName = field;\n\n        if (composite) {\n            var parts = fieldName.split(\".\");\n            var prefix = this.prefix;\n\n            while (parts.length > 1) {\n                fieldName = parts.shift();\n                prefix += fieldName + \".\";\n\n                var obj = parentObj[fieldName];\n\n                if (!obj) {\n                    obj = new OptionsStore({}, prefix);\n                    obj.addObserver(this$1);\n                    parentObj[fieldName] = obj;\n                }\n                parentObj = obj;\n            }\n            fieldName = parts[0];\n        }\n\n        parentObj._clear(fieldName);\n        parentObj[fieldName] = value;\n    };\n\n    OptionsStore.prototype._clear = function _clear (field) {\n        var current = this[field];\n        if (current && current.removeObserver) {\n            current.removeObserver(this);\n        }\n    };\n\n    OptionsStore.prototype._wrap = function _wrap (object, field) {\n        var type = toString$1.call(object);\n        var wrapped = object;\n\n        if (wrapped !== null && defined(wrapped) && type === \"[object Object]\") {\n            if (!(object instanceof OptionsStore) && !(object instanceof Class)) {\n                wrapped = new OptionsStore(wrapped, this.prefix + field + \".\");\n            }\n\n            wrapped.addObserver(this);\n        }\n\n        return wrapped;\n    };\n\n    return OptionsStore;\n}(HasObservers));\n\nfunction setAccessor(field) {\n    return function(value) {\n        if (this[field] !== value) {\n            this[field] = value;\n            this.geometryChange();\n        }\n\n        return this;\n    };\n}\n\nfunction getAccessor(field) {\n    return function() {\n        return this[field];\n    };\n}\n\nfunction defineAccessors(fn, fields) {\n    for (var i = 0; i < fields.length; i++) {\n        var name = fields[i];\n        var capitalized = name.charAt(0).toUpperCase() +\n                          name.substring(1, name.length);\n\n        fn[\"set\" + capitalized] = setAccessor(name);\n        fn[\"get\" + capitalized] = getAccessor(name);\n    }\n}\n\nvar withAccessors = function (TBase, names) {\n    var result = (function (TBase) {\n        function result () {\n            TBase.apply(this, arguments);\n        }extendStatic(result, TBase);\n        result.prototype = Object.create( TBase && TBase.prototype );\n        result.prototype.constructor = result;\n        result.fn = result.prototype;\n        result.fn.init = result.fn.constructor;\n\n        return result;\n    }(TBase));\n    defineAccessors(result.prototype, names);\n\n    return result;\n};\n\nfunction toMatrix(transformation) {\n    if (transformation && typeof transformation.matrix === \"function\") {\n        return transformation.matrix();\n    }\n\n    return transformation;\n}\n\nvar Point = (function (superclass) {\n    function Point(x, y) {\n        superclass.call(this);\n\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n\n    extendStatic(Point, superclass);\n    Point.prototype = Object.create( superclass && superclass.prototype );\n    Point.prototype.constructor = Point;\n    Point.fn = Point.prototype;\n    Point.fn.init = Point.fn.constructor;\n\n    var staticAccessors = { ZERO: {} };\n\n    Point.prototype.equals = function equals (other) {\n        return other && other.x === this.x && other.y === this.y;\n    };\n\n    Point.prototype.clone = function clone () {\n        return new Point(this.x, this.y);\n    };\n\n    Point.prototype.rotate = function rotate (angle, origin) {\n        var originPoint = Point.create(origin) || Point.ZERO;\n\n        return this.transform(Matrix.rotate(angle, originPoint.x, originPoint.y));\n    };\n\n    Point.prototype.translate = function translate (x, y) {\n        this.x += x;\n        this.y += y;\n\n        this.geometryChange();\n\n        return this;\n    };\n\n    Point.prototype.translateWith = function translateWith (point) {\n        return this.translate(point.x, point.y);\n    };\n\n    Point.prototype.move = function move (x, y) {\n        this.x = this.y = 0;\n        return this.translate(x, y);\n    };\n\n    Point.prototype.scale = function scale (scaleX, scaleY) {\n        if (scaleY === void 0) { scaleY = scaleX; }\n\n        this.x *= scaleX;\n        this.y *= scaleY;\n\n        this.geometryChange();\n\n        return this;\n    };\n\n    Point.prototype.scaleCopy = function scaleCopy (scaleX, scaleY) {\n        return this.clone().scale(scaleX, scaleY);\n    };\n\n    Point.prototype.transform = function transform (transformation) {\n        var matrix = toMatrix(transformation);\n        var ref = this;\n        var x = ref.x;\n        var y = ref.y;\n\n        this.x = matrix.a * x + matrix.c * y + matrix.e;\n        this.y = matrix.b * x + matrix.d * y + matrix.f;\n\n        this.geometryChange();\n\n        return this;\n    };\n\n    Point.prototype.transformCopy = function transformCopy (transformation) {\n        var point = this.clone();\n\n        if (transformation) {\n            point.transform(transformation);\n        }\n\n        return point;\n    };\n\n    Point.prototype.distanceTo = function distanceTo (point) {\n        var dx = this.x - point.x;\n        var dy = this.y - point.y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n\n    Point.prototype.round = function round$1 (digits) {\n        this.x = round(this.x, digits);\n        this.y = round(this.y, digits);\n\n        this.geometryChange();\n\n        return this;\n    };\n\n    Point.prototype.toArray = function toArray (digits) {\n        var doRound = defined(digits);\n        var x = doRound ? round(this.x, digits) : this.x;\n        var y = doRound ? round(this.y, digits) : this.y;\n\n        return [ x, y ];\n    };\n\n    Point.prototype.toString = function toString (digits, separator) {\n        if (separator === void 0) { separator = \" \"; }\n\n        var ref = this;\n        var x = ref.x;\n        var y = ref.y;\n\n        if (defined(digits)) {\n            x = round(x, digits);\n            y = round(y, digits);\n        }\n\n        return x + separator + y;\n    };\n\n    Point.create = function create (arg0, arg1) {\n        if (defined(arg0)) {\n            if (arg0 instanceof Point) {\n                return arg0;\n            } else if (arguments.length === 1 && arg0.length === 2) {\n                return new Point(arg0[0], arg0[1]);\n            }\n\n            return new Point(arg0, arg1);\n        }\n    };\n\n    Point.min = function min () {\n        var arguments$1 = arguments;\n\n        var minX = MAX_NUM;\n        var minY = MAX_NUM;\n\n        for (var i = 0; i < arguments.length; i++) {\n            var point = arguments$1[i];\n            minX = Math.min(point.x, minX);\n            minY = Math.min(point.y, minY);\n        }\n\n        return new Point(minX, minY);\n    };\n\n    Point.max = function max () {\n        var arguments$1 = arguments;\n\n        var maxX = MIN_NUM;\n        var maxY = MIN_NUM;\n\n        for (var i = 0; i < arguments.length; i++) {\n            var point = arguments$1[i];\n            maxX = Math.max(point.x, maxX);\n            maxY = Math.max(point.y, maxY);\n        }\n\n        return new Point(maxX, maxY);\n    };\n\n    Point.minPoint = function minPoint () {\n        return new Point(MIN_NUM, MIN_NUM);\n    };\n\n    Point.maxPoint = function maxPoint () {\n        return new Point(MAX_NUM, MAX_NUM);\n    };\n\n    staticAccessors.ZERO.get = function () {\n        return new Point(0, 0);\n    };\n\n    Object.defineProperties( Point, staticAccessors );\n\n    return Point;\n}(withAccessors(HasObservers, [ \"x\", \"y\" ])));\n\nvar Size = (function (superclass) {\n    function Size(width, height) {\n        superclass.call(this);\n\n        this.width = width || 0;\n        this.height = height || 0;\n    }\n\n    extendStatic(Size, superclass);\n    Size.prototype = Object.create( superclass && superclass.prototype );\n    Size.prototype.constructor = Size;\n    Size.fn = Size.prototype;\n    Size.fn.init = Size.fn.constructor;\n\n    var staticAccessors = { ZERO: {} };\n\n    Size.prototype.equals = function equals (other) {\n        return other && other.width === this.width && other.height === this.height;\n    };\n\n    Size.prototype.clone = function clone () {\n        return new Size(this.width, this.height);\n    };\n\n    Size.prototype.toArray = function toArray (digits) {\n        var doRound = defined(digits);\n        var width = doRound ? round(this.width, digits) : this.width;\n        var height = doRound ? round(this.height, digits) : this.height;\n\n        return [ width, height ];\n    };\n\n    Size.create = function create (arg0, arg1) {\n        if (defined(arg0)) {\n            if (arg0 instanceof Size) {\n                return arg0;\n            } else if (arguments.length === 1 && arg0.length === 2) {\n                return new Size(arg0[0], arg0[1]);\n            }\n\n            return new Size(arg0, arg1);\n        }\n    };\n\n    staticAccessors.ZERO.get = function () {\n        return new Size(0, 0);\n    };\n\n    Object.defineProperties( Size, staticAccessors );\n\n    return Size;\n}(withAccessors(HasObservers, [ \"width\", \"height\" ])));\n\nvar Rect = (function (HasObservers$$1) {\n    function Rect(origin, size, cornerRadius) {\n        if (origin === void 0) { origin = new Point(); }\n        if (size === void 0) { size = new Size(); }\n        if (cornerRadius === void 0) { cornerRadius = 0; }\n\n        HasObservers$$1.call(this);\n\n        this.setOrigin(origin);\n        this.setSize(size);\n        this.setCornerRadius(cornerRadius);\n    }\n\n    extendStatic(Rect, HasObservers$$1);\n    Rect.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n    Rect.prototype.constructor = Rect;\n    Rect.fn = Rect.prototype;\n    Rect.fn.init = Rect.fn.constructor;\n\n    Rect.prototype.clone = function clone () {\n        return new Rect(\n            this.origin.clone(),\n            this.size.clone()\n        );\n    };\n\n    Rect.prototype.equals = function equals (other) {\n        return other &&\n               other.origin.equals(this.origin) &&\n               other.size.equals(this.size);\n    };\n\n    Rect.prototype.setOrigin = function setOrigin (value) {\n        this._observerField(\"origin\", Point.create(value));\n        this.geometryChange();\n        return this;\n    };\n\n    Rect.prototype.getOrigin = function getOrigin () {\n        return this.origin;\n    };\n\n    Rect.prototype.setCornerRadius = function setCornerRadius (radius) {\n        this.cornerRadius = Array.isArray(radius) ? radius : [ radius, radius ];\n\n        this.geometryChange();\n        return this;\n    };\n\n    Rect.prototype.getCornerRadius = function getCornerRadius () {\n        return this.cornerRadius;\n    };\n\n    Rect.prototype.setSize = function setSize (value) {\n        this._observerField(\"size\", Size.create(value));\n        this.geometryChange();\n        return this;\n    };\n\n    Rect.prototype.getSize = function getSize () {\n        return this.size;\n    };\n\n    Rect.prototype.width = function width () {\n        return this.size.width;\n    };\n\n    Rect.prototype.height = function height () {\n        return this.size.height;\n    };\n\n    Rect.prototype.topLeft = function topLeft () {\n        return this.origin.clone();\n    };\n\n    Rect.prototype.bottomRight = function bottomRight () {\n        return this.origin.clone().translate(this.width(), this.height());\n    };\n\n    Rect.prototype.topRight = function topRight () {\n        return this.origin.clone().translate(this.width(), 0);\n    };\n\n    Rect.prototype.bottomLeft = function bottomLeft () {\n        return this.origin.clone().translate(0, this.height());\n    };\n\n    Rect.prototype.center = function center () {\n        return this.origin.clone().translate(this.width() / 2, this.height() / 2);\n    };\n\n    Rect.prototype.bbox = function bbox (matrix) {\n        var tl = this.topLeft().transformCopy(matrix);\n        var tr = this.topRight().transformCopy(matrix);\n        var br = this.bottomRight().transformCopy(matrix);\n        var bl = this.bottomLeft().transformCopy(matrix);\n\n        return Rect.fromPoints(tl, tr, br, bl);\n    };\n\n    Rect.prototype.transformCopy = function transformCopy (m) {\n        return Rect.fromPoints(\n            this.topLeft().transform(m),\n            this.bottomRight().transform(m)\n        );\n    };\n\n    Rect.prototype.expand = function expand (x, y) {\n        if (y === void 0) { y = x; }\n\n        this.size.width += 2 * x;\n        this.size.height += 2 * y;\n\n        this.origin.translate(-x, -y);\n\n        return this;\n    };\n\n    Rect.prototype.expandCopy = function expandCopy (x, y) {\n        return this.clone().expand(x, y);\n    };\n\n    Rect.prototype.containsPoint = function containsPoint (point) {\n        var origin = this.origin;\n        var bottomRight = this.bottomRight();\n        return !(point.x < origin.x || point.y < origin.y || bottomRight.x < point.x || bottomRight.y < point.y);\n    };\n\n    Rect.prototype._isOnPath = function _isOnPath (point, width) {\n        var rectOuter = this.expandCopy(width, width);\n        var rectInner = this.expandCopy(-width, -width);\n\n        return rectOuter.containsPoint(point) && !rectInner.containsPoint(point);\n    };\n\n    Rect.fromPoints = function fromPoints () {\n        var topLeft = Point.min.apply(null, arguments);\n        var bottomRight = Point.max.apply(null, arguments);\n        var size = new Size(\n            bottomRight.x - topLeft.x,\n            bottomRight.y - topLeft.y\n        );\n\n        return new Rect(topLeft, size);\n    };\n\n    Rect.union = function union (a, b) {\n        return Rect.fromPoints(\n            Point.min(a.topLeft(), b.topLeft()),\n            Point.max(a.bottomRight(), b.bottomRight())\n        );\n    };\n\n    Rect.intersect = function intersect (a, b) {\n        var rect1 = {\n            left: a.topLeft().x,\n            top: a.topLeft().y,\n            right: a.bottomRight().x,\n            bottom: a.bottomRight().y\n        };\n\n        var rect2 = {\n            left: b.topLeft().x,\n            top: b.topLeft().y,\n            right: b.bottomRight().x,\n            bottom: b.bottomRight().y\n        };\n\n        if (rect1.left <= rect2.right &&\n            rect2.left <= rect1.right &&\n            rect1.top <= rect2.bottom &&\n            rect2.top <= rect1.bottom) {\n            return Rect.fromPoints(\n                new Point(Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)),\n                new Point(Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom))\n            );\n        }\n    };\n\n    return Rect;\n}(HasObservers));\n\nvar Transformation = (function (HasObservers$$1) {\n    function Transformation(matrix) {\n        if (matrix === void 0) { matrix = Matrix.unit(); }\n\n        HasObservers$$1.call(this);\n\n        this._matrix = matrix;\n    }\n\n    extendStatic(Transformation, HasObservers$$1);\n    Transformation.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n    Transformation.prototype.constructor = Transformation;\n    Transformation.fn = Transformation.prototype;\n    Transformation.fn.init = Transformation.fn.constructor;\n\n    Transformation.prototype.clone = function clone () {\n        return new Transformation(\n            this._matrix.clone()\n        );\n    };\n\n    Transformation.prototype.equals = function equals (other) {\n        return other &&\n               other._matrix.equals(this._matrix);\n    };\n\n    Transformation.prototype.translate = function translate (x, y) {\n        this._matrix = this._matrix.multiplyCopy(Matrix.translate(x, y));\n\n        this._optionsChange();\n        return this;\n    };\n\n    Transformation.prototype.scale = function scale (scaleX, scaleY, origin) {\n        if (scaleY === void 0) { scaleY = scaleX; }\n        if (origin === void 0) { origin = null; }\n\n        var originPoint = origin;\n\n        if (originPoint) {\n            originPoint = Point.create(originPoint);\n            this._matrix = this._matrix.multiplyCopy(Matrix.translate(originPoint.x, originPoint.y));\n        }\n\n        this._matrix = this._matrix.multiplyCopy(Matrix.scale(scaleX, scaleY));\n\n        if (originPoint) {\n            this._matrix = this._matrix.multiplyCopy(Matrix.translate(-originPoint.x, -originPoint.y));\n        }\n\n        this._optionsChange();\n        return this;\n    };\n\n    Transformation.prototype.rotate = function rotate (angle, origin) {\n        var originPoint = Point.create(origin) || Point.ZERO;\n\n        this._matrix = this._matrix.multiplyCopy(Matrix.rotate(angle, originPoint.x, originPoint.y));\n\n        this._optionsChange();\n        return this;\n    };\n\n    Transformation.prototype.multiply = function multiply (transformation) {\n        var matrix = toMatrix(transformation);\n\n        this._matrix = this._matrix.multiplyCopy(matrix);\n\n        this._optionsChange();\n        return this;\n    };\n\n    Transformation.prototype.matrix = function matrix (value) {\n        if (value) {\n            this._matrix = value;\n            this._optionsChange();\n            return this;\n        }\n\n        return this._matrix;\n    };\n\n    Transformation.prototype._optionsChange = function _optionsChange () {\n        this.optionsChange({\n            field: \"transform\",\n            value: this\n        });\n    };\n\n    return Transformation;\n}(HasObservers));\n\nfunction transform$1(matrix) {\n    if (matrix === null) {\n        return null;\n    }\n\n    if (matrix instanceof Transformation) {\n        return matrix;\n    }\n\n    return new Transformation(matrix);\n}\n\nvar Element$1 = (function (HasObservers$$1) {\n    function Element(options) {\n        HasObservers$$1.call(this);\n\n        this._initOptions(options);\n    }\n\n    extendStatic(Element, HasObservers$$1);\n    Element.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n    Element.prototype.constructor = Element;\n    Element.fn = Element.prototype;\n    Element.fn.init = Element.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Rect\";\n    };\n\n    Element.prototype._initOptions = function _initOptions (options) {\n        if (options === void 0) { options = {}; }\n\n        var clip = options.clip;\n        var transform = options.transform;\n\n        if (transform) {\n            options.transform = transform$1(transform);\n        }\n\n        if (clip && !clip.id) {\n            clip.id = definitionId();\n        }\n\n        this.options = new OptionsStore(options);\n        this.options.addObserver(this);\n    };\n\n    Element.prototype.transform = function transform (value) {\n        if (defined(value)) {\n            this.options.set(\"transform\", transform$1(value));\n        } else {\n            return this.options.get(\"transform\");\n        }\n    };\n\n    Element.prototype.parentTransform = function parentTransform () {\n        var element = this;\n        var parentMatrix;\n\n        while (element.parent) {\n            element = element.parent;\n            var transformation = element.transform();\n            if (transformation) {\n                parentMatrix = transformation.matrix().multiplyCopy(parentMatrix || Matrix.unit());\n            }\n        }\n\n        if (parentMatrix) {\n            return transform$1(parentMatrix);\n        }\n    };\n\n    Element.prototype.currentTransform = function currentTransform (parentTransform) {\n        if (parentTransform === void 0) { parentTransform = this.parentTransform(); }\n\n        var elementTransform = this.transform();\n        var elementMatrix = toMatrix(elementTransform);\n\n        var parentMatrix = toMatrix(parentTransform);\n        var combinedMatrix;\n\n        if (elementMatrix && parentMatrix) {\n            combinedMatrix = parentMatrix.multiplyCopy(elementMatrix);\n        } else {\n            combinedMatrix = elementMatrix || parentMatrix;\n        }\n\n        if (combinedMatrix) {\n            return transform$1(combinedMatrix);\n        }\n    };\n\n    Element.prototype.visible = function visible (value) {\n        if (defined(value)) {\n            this.options.set(\"visible\", value);\n            return this;\n        }\n\n        return this.options.get(\"visible\") !== false;\n    };\n\n    Element.prototype.clip = function clip (value) {\n        var options = this.options;\n        if (defined(value)) {\n            if (value && !value.id) {\n                value.id = definitionId();\n            }\n            options.set(\"clip\", value);\n            return this;\n        }\n\n        return options.get(\"clip\");\n    };\n\n    Element.prototype.opacity = function opacity (value) {\n        if (defined(value)) {\n            this.options.set(\"opacity\", value);\n            return this;\n        }\n\n        return valueOrDefault(this.options.get(\"opacity\"), 1);\n    };\n\n    Element.prototype.clippedBBox = function clippedBBox (transformation) {\n        var bbox = this._clippedBBox(transformation);\n        if (bbox) {\n            var clip = this.clip();\n            return clip ? Rect.intersect(bbox, clip.bbox(transformation)) : bbox;\n        }\n    };\n\n    Element.prototype.containsPoint = function containsPoint (point, parentTransform) {\n        if (this.visible()) {\n            var transform = this.currentTransform(parentTransform);\n            var transformedPoint = point;\n            if (transform) {\n                transformedPoint = point.transformCopy(transform.matrix().invert());\n            }\n            return (this._hasFill() && this._containsPoint(transformedPoint)) || (this._isOnPath && this._hasStroke() && this._isOnPath(transformedPoint));\n        }\n        return false;\n    };\n\n    Element.prototype._hasFill = function _hasFill () {\n        var fill = this.options.fill;\n        return fill && !isTransparent(fill.color);\n    };\n\n    Element.prototype._hasStroke = function _hasStroke () {\n        var stroke = this.options.stroke;\n        return stroke && stroke.width > 0 && !isTransparent(stroke.color);\n    };\n\n    Element.prototype._clippedBBox = function _clippedBBox (transformation) {\n        return this.bbox(transformation);\n    };\n\n    Object.defineProperties( Element.prototype, prototypeAccessors );\n\n    return Element;\n}(HasObservers));\n\nfunction ellipseExtremeAngles(center, rx, ry, matrix) {\n    var extremeX = 0;\n    var extremeY = 0;\n\n    if (matrix) {\n        extremeX = Math.atan2(matrix.c * ry, matrix.a * rx);\n        if (matrix.b !== 0) {\n            extremeY = Math.atan2(matrix.d * ry, matrix.b * rx);\n        }\n    }\n\n    return {\n        x: extremeX,\n        y: extremeY\n    };\n}\n\nvar PI_DIV_2 = Math.PI / 2;\n\nvar Circle$2 = (function (superclass) {\n    function Circle(center, radius) {\n        if (center === void 0) { center = new Point(); }\n        if (radius === void 0) { radius = 0; }\n\n        superclass.call(this);\n\n        this.setCenter(center);\n        this.setRadius(radius);\n    }\n\n    extendStatic(Circle, superclass);\n    Circle.prototype = Object.create( superclass && superclass.prototype );\n    Circle.prototype.constructor = Circle;\n    Circle.fn = Circle.prototype;\n    Circle.fn.init = Circle.fn.constructor;\n\n    Circle.prototype.setCenter = function setCenter (value) {\n        this._observerField(\"center\", Point.create(value));\n        this.geometryChange();\n        return this;\n    };\n\n    Circle.prototype.getCenter = function getCenter () {\n        return this.center;\n    };\n\n    Circle.prototype.equals = function equals (other) {\n        return other &&\n               other.center.equals(this.center) &&\n               other.radius === this.radius;\n    };\n\n    Circle.prototype.clone = function clone () {\n        return new Circle(this.center.clone(), this.radius);\n    };\n\n    Circle.prototype.pointAt = function pointAt (angle) {\n        return this._pointAt(rad(angle));\n    };\n\n    Circle.prototype.bbox = function bbox (matrix) {\n        var this$1 = this;\n\n        var extremeAngles = ellipseExtremeAngles(this.center, this.radius, this.radius, matrix);\n        var minPoint = Point.maxPoint();\n        var maxPoint = Point.minPoint();\n\n        for (var i = 0; i < 4; i++) {\n            var currentPointX = this$1._pointAt(extremeAngles.x + i * PI_DIV_2).transformCopy(matrix);\n            var currentPointY = this$1._pointAt(extremeAngles.y + i * PI_DIV_2).transformCopy(matrix);\n            var currentPoint = new Point(currentPointX.x, currentPointY.y);\n\n            minPoint = Point.min(minPoint, currentPoint);\n            maxPoint = Point.max(maxPoint, currentPoint);\n        }\n\n        return Rect.fromPoints(minPoint, maxPoint);\n    };\n\n    Circle.prototype._pointAt = function _pointAt (angle) {\n        var ref = this;\n        var center = ref.center;\n        var radius = ref.radius;\n\n        return new Point(\n            center.x + radius * Math.cos(angle),\n            center.y + radius * Math.sin(angle)\n        );\n    };\n\n    Circle.prototype.containsPoint = function containsPoint (point) {\n        var ref = this;\n        var center = ref.center;\n        var radius = ref.radius;\n        var inCircle = Math.pow(point.x - center.x, 2) +\n            Math.pow(point.y - center.y, 2) <= Math.pow(radius, 2);\n        return inCircle;\n    };\n\n    Circle.prototype._isOnPath = function _isOnPath (point, width) {\n        var ref = this;\n        var center = ref.center;\n        var radius = ref.radius;\n        var pointDistance = center.distanceTo(point);\n\n        return radius - width <= pointDistance && pointDistance <= radius + width;\n    };\n\n    return Circle;\n}(withAccessors(HasObservers, [ \"radius\" ])));\n\nvar GRADIENT = \"Gradient\";\n\nvar paintable = function (TBase) { return (\n    (function (TBase) {\n        function anonymous () {\n            TBase.apply(this, arguments);\n        }\n\n        extendStatic(anonymous, TBase);\n        anonymous.prototype = Object.create( TBase && TBase.prototype );\n        anonymous.prototype.constructor = anonymous;\n        anonymous.fn = anonymous.prototype;\n        anonymous.fn.init = anonymous.fn.constructor;\n\n        anonymous.prototype.fill = function fill (color, opacity) {\n            var options = this.options;\n\n            if (defined(color)) {\n                if (color && color.nodeType !== GRADIENT) {\n                    var newFill = {\n                        color: color\n                    };\n                    if (defined(opacity)) {\n                        newFill.opacity = opacity;\n                    }\n                    options.set(\"fill\", newFill);\n                } else {\n                    options.set(\"fill\", color);\n                }\n\n                return this;\n            }\n\n            return options.get(\"fill\");\n        };\n\n        anonymous.prototype.stroke = function stroke (color, width, opacity) {\n            if (defined(color)) {\n                this.options.set(\"stroke.color\", color);\n\n                if (defined(width)) {\n                    this.options.set(\"stroke.width\", width);\n                }\n\n                if (defined(opacity)) {\n                    this.options.set(\"stroke.opacity\", opacity);\n                }\n\n                return this;\n            }\n\n            return this.options.get(\"stroke\");\n        };\n\n        return anonymous;\n    }(TBase))\n); };\n\nvar IDENTITY_MATRIX_HASH = Matrix.IDENTITY.toString();\n\nvar measurable = function (TBase) { return (\n    (function (TBase) {\n        function anonymous () {\n            TBase.apply(this, arguments);\n        }\n\n        extendStatic(anonymous, TBase);\n        anonymous.prototype = Object.create( TBase && TBase.prototype );\n        anonymous.prototype.constructor = anonymous;\n        anonymous.fn = anonymous.prototype;\n        anonymous.fn.init = anonymous.fn.constructor;\n\n        anonymous.prototype.bbox = function bbox (transformation) {\n            var combinedMatrix = toMatrix(this.currentTransform(transformation));\n            var matrixHash = combinedMatrix ? combinedMatrix.toString() : IDENTITY_MATRIX_HASH;\n            var bbox;\n\n            if (this._bboxCache && this._matrixHash === matrixHash) {\n                bbox = this._bboxCache.clone();\n            } else {\n                bbox = this._bbox(combinedMatrix);\n                this._bboxCache = bbox ? bbox.clone() : null;\n                this._matrixHash = matrixHash;\n            }\n\n            var strokeWidth = this.options.get(\"stroke.width\");\n            if (strokeWidth && bbox) {\n                bbox.expand(strokeWidth / 2);\n            }\n\n            return bbox;\n        };\n\n        anonymous.prototype.geometryChange = function geometryChange () {\n            delete this._bboxCache;\n            this.trigger(\"geometryChange\", {\n                element: this\n            });\n        };\n\n        return anonymous;\n    }(TBase))\n); };\n\nfunction geometryAccessor(name) {\n    var fieldName = \"_\" + name;\n    return function(value) {\n        if (defined(value)) {\n            this._observerField(fieldName, value);\n            this.geometryChange();\n            return this;\n        }\n\n        return this[fieldName];\n    };\n}\n\nfunction defineGeometryAccessors(fn, names) {\n    for (var i = 0; i < names.length; i++) {\n        fn[names[i]] = geometryAccessor(names[i]);\n    }\n}\n\nvar withGeometry = function (TBase, names) {\n    if (names === void 0) { names = [ \"geometry\" ]; }\n\n    var result = (function (TBase) {\n        function result () {\n            TBase.apply(this, arguments);\n        }extendStatic(result, TBase);\n        result.prototype = Object.create( TBase && TBase.prototype );\n        result.prototype.constructor = result;\n        result.fn = result.prototype;\n        result.fn.init = result.fn.constructor;\n\n        return result;\n    }(TBase));\n    defineGeometryAccessors(result.prototype, names);\n\n    return result;\n};\n\nvar DEFAULT_STROKE = \"#000\";\n\nvar Circle = (function (superclass) {\n    function Circle(geometry, options) {\n        if (geometry === void 0) { geometry = new Circle$2(); }\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.geometry(geometry);\n\n        if (!defined(this.options.stroke)) {\n            this.stroke(DEFAULT_STROKE);\n        }\n    }\n\n    extendStatic(Circle, superclass);\n    Circle.prototype = Object.create( superclass && superclass.prototype );\n    Circle.prototype.constructor = Circle;\n    Circle.fn = Circle.prototype;\n    Circle.fn.init = Circle.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Circle\";\n    };\n\n    Circle.prototype.rawBBox = function rawBBox () {\n        return this._geometry.bbox();\n    };\n\n    Circle.prototype._bbox = function _bbox (matrix) {\n        return this._geometry.bbox(matrix);\n    };\n\n    Circle.prototype._containsPoint = function _containsPoint (point) {\n        return this.geometry().containsPoint(point);\n    };\n\n    Circle.prototype._isOnPath = function _isOnPath (point) {\n        return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n    };\n\n    Object.defineProperties( Circle.prototype, prototypeAccessors );\n\n    return Circle;\n}(paintable(measurable(withGeometry(Element$1)))));\n\nvar PRECISION = 10;\n\nfunction close$1(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = PRECISION; }\n\n    return round(Math.abs(a - b), tolerance) === 0;\n}\n\nfunction closeOrLess(a, b, tolerance) {\n    return a < b || close$1(a, b, tolerance);\n}\n\nfunction lineIntersection(p0, p1, p2, p3) {\n    var s1x = p1.x - p0.x;\n    var s2x = p3.x - p2.x;\n    var s1y = p1.y - p0.y;\n    var s2y = p3.y - p2.y;\n    var nx = p0.x - p2.x;\n    var ny = p0.y - p2.y;\n    var d = s1x * s2y - s2x * s1y;\n    var s = (s1x * ny - s1y * nx) / d;\n    var t = (s2x * ny - s2y * nx) / d;\n\n    if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n        return new Point(p0.x + t * s1x, p0.y + t * s1y);\n    }\n}\n\nvar MAX_INTERVAL = 45;\nvar pow$1 = Math.pow;\nvar accessors = [ \"radiusX\", \"radiusY\", \"startAngle\", \"endAngle\", \"anticlockwise\" ];\n\nvar Arc$2 = (function (superclass) {\n    function Arc(center, options) {\n        if (center === void 0) { center = new Point(); }\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this);\n\n        this.setCenter(center);\n\n        this.radiusX = options.radiusX;\n        this.radiusY = options.radiusY || options.radiusX;\n        this.startAngle = options.startAngle;\n        this.endAngle = options.endAngle;\n        this.anticlockwise = options.anticlockwise || false;\n        this.xRotation = options.xRotation;\n    }\n\n    extendStatic(Arc, superclass);\n    Arc.prototype = Object.create( superclass && superclass.prototype );\n    Arc.prototype.constructor = Arc;\n    Arc.fn = Arc.prototype;\n    Arc.fn.init = Arc.fn.constructor;\n\n    Arc.prototype.clone = function clone () {\n        return new Arc(this.center, {\n            radiusX: this.radiusX,\n            radiusY: this.radiusY,\n            startAngle: this.startAngle,\n            endAngle: this.endAngle,\n            anticlockwise: this.anticlockwise\n        });\n    };\n\n    Arc.prototype.setCenter = function setCenter (value) {\n        this._observerField(\"center\", Point.create(value));\n        this.geometryChange();\n        return this;\n    };\n\n    Arc.prototype.getCenter = function getCenter () {\n        return this.center;\n    };\n\n    Arc.prototype.pointAt = function pointAt (angle) {\n        var center = this.center;\n        var radian = rad(angle);\n\n        return new Point(\n            center.x + this.radiusX * Math.cos(radian),\n            center.y + this.radiusY * Math.sin(radian)\n        );\n    };\n\n    Arc.prototype.curvePoints = function curvePoints () {\n        var this$1 = this;\n\n        var startAngle = this.startAngle;\n        var dir = this.anticlockwise ? -1 : 1;\n        var curvePoints = [ this.pointAt(startAngle) ];\n        var interval = this._arcInterval();\n        var intervalAngle = interval.endAngle - interval.startAngle;\n        var subIntervalsCount = Math.ceil(intervalAngle / MAX_INTERVAL);\n        var subIntervalAngle = intervalAngle / subIntervalsCount;\n        var currentAngle = startAngle;\n        var transformation;\n        if (this.xRotation) {\n            transformation = transform$1().rotate(this.xRotation, this.center);\n        }\n\n        for (var i = 1; i <= subIntervalsCount; i++) {\n            var nextAngle = currentAngle + dir * subIntervalAngle;\n            var points = this$1._intervalCurvePoints(currentAngle, nextAngle, transformation);\n\n            curvePoints.push(points.cp1, points.cp2, points.p2);\n            currentAngle = nextAngle;\n        }\n\n        return curvePoints;\n    };\n\n    Arc.prototype.bbox = function bbox (matrix) {\n        var this$1 = this;\n\n        var interval = this._arcInterval();\n        var startAngle = interval.startAngle;\n        var endAngle = interval.endAngle;\n        var extremeAngles = ellipseExtremeAngles(this.center, this.radiusX, this.radiusY, matrix);\n        var extremeX = deg(extremeAngles.x);\n        var extremeY = deg(extremeAngles.y);\n        var endPoint = this.pointAt(endAngle).transformCopy(matrix);\n        var currentAngleX = bboxStartAngle(extremeX, startAngle);\n        var currentAngleY = bboxStartAngle(extremeY, startAngle);\n        var currentPoint = this.pointAt(startAngle).transformCopy(matrix);\n        var minPoint = Point.min(currentPoint, endPoint);\n        var maxPoint = Point.max(currentPoint, endPoint);\n\n        while (currentAngleX < endAngle || currentAngleY < endAngle) {\n            var currentPointX = (void 0);\n            if (currentAngleX < endAngle) {\n                currentPointX = this$1.pointAt(currentAngleX).transformCopy(matrix);\n                currentAngleX += 90;\n            }\n\n            var currentPointY = (void 0);\n            if (currentAngleY < endAngle) {\n                currentPointY = this$1.pointAt(currentAngleY).transformCopy(matrix);\n                currentAngleY += 90;\n            }\n\n            currentPoint = new Point(currentPointX.x, currentPointY.y);\n            minPoint = Point.min(minPoint, currentPoint);\n            maxPoint = Point.max(maxPoint, currentPoint);\n        }\n\n        return Rect.fromPoints(minPoint, maxPoint);\n    };\n\n    Arc.prototype._arcInterval = function _arcInterval () {\n        var ref = this;\n        var startAngle = ref.startAngle;\n        var endAngle = ref.endAngle;\n        var anticlockwise = ref.anticlockwise;\n\n        if (anticlockwise) {\n            var oldStart = startAngle;\n            startAngle = endAngle;\n            endAngle = oldStart;\n        }\n\n        if (startAngle > endAngle || (anticlockwise && startAngle === endAngle)) {\n            endAngle += 360;\n        }\n\n        return {\n            startAngle: startAngle,\n            endAngle: endAngle\n        };\n    };\n\n    Arc.prototype._intervalCurvePoints = function _intervalCurvePoints (startAngle, endAngle, transformation) {\n        var p1 = this.pointAt(startAngle);\n        var p2 = this.pointAt(endAngle);\n        var p1Derivative = this._derivativeAt(startAngle);\n        var p2Derivative = this._derivativeAt(endAngle);\n        var t = (rad(endAngle) - rad(startAngle)) / 3;\n        var cp1 = new Point(p1.x + t * p1Derivative.x, p1.y + t * p1Derivative.y);\n        var cp2 = new Point(p2.x - t * p2Derivative.x, p2.y - t * p2Derivative.y);\n        if (transformation) {\n            p1.transform(transformation);\n            p2.transform(transformation);\n            cp1.transform(transformation);\n            cp2.transform(transformation);\n        }\n\n        return {\n            p1: p1,\n            cp1: cp1,\n            cp2: cp2,\n            p2: p2\n        };\n    };\n\n    Arc.prototype._derivativeAt = function _derivativeAt (angle) {\n        var radian = rad(angle);\n\n        return new Point(-this.radiusX * Math.sin(radian), this.radiusY * Math.cos(radian));\n    };\n\n    Arc.prototype.containsPoint = function containsPoint (point) {\n        var interval = this._arcInterval();\n        var intervalAngle = interval.endAngle - interval.startAngle;\n        var ref = this;\n        var center = ref.center;\n        var radiusX = ref.radiusX;\n        var radiusY = ref.radiusY;\n        var distance = center.distanceTo(point);\n        var angleRad = Math.atan2(point.y - center.y, point.x - center.x);\n        var pointRadius = (radiusX * radiusY) /\n            Math.sqrt(pow$1(radiusX, 2) * pow$1(Math.sin(angleRad), 2) + pow$1(radiusY, 2) * pow$1(Math.cos(angleRad), 2));\n        var startPoint = this.pointAt(this.startAngle).round(PRECISION);\n        var endPoint = this.pointAt(this.endAngle).round(PRECISION);\n        var intersection = lineIntersection(center, point.round(PRECISION), startPoint, endPoint);\n        var containsPoint;\n\n        if (intervalAngle < 180) {\n            containsPoint = intersection && closeOrLess(center.distanceTo(intersection), distance) && closeOrLess(distance, pointRadius);\n        } else {\n            var angle = calculateAngle(center.x, center.y, radiusX, radiusY, point.x, point.y);\n            if (angle !== 360) {\n                angle = (360 + angle) % 360;\n            }\n\n            var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n            containsPoint = (inAngleRange && closeOrLess(distance, pointRadius)) || (!inAngleRange && (!intersection || intersection.equals(point)));\n        }\n        return containsPoint;\n    };\n\n    Arc.prototype._isOnPath = function _isOnPath (point, width) {\n        var interval = this._arcInterval();\n        var center = this.center;\n        var angle = calculateAngle(center.x, center.y, this.radiusX, this.radiusY, point.x, point.y);\n        if (angle !== 360) {\n            angle = (360 + angle) % 360;\n        }\n\n        var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n\n        return inAngleRange && this.pointAt(angle).distanceTo(point) <= width;\n    };\n\n    Arc.fromPoints = function fromPoints (start, end, rx, ry, largeArc, swipe, rotation) {// eslint-disable-line max-params\n        var arcParameters = normalizeArcParameters({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y,\n            rx: rx,\n            ry: ry,\n            largeArc: largeArc,\n            swipe: swipe,\n            rotation: rotation\n        });\n\n        return new Arc(arcParameters.center, {\n            startAngle: arcParameters.startAngle,\n            endAngle: arcParameters.endAngle,\n            radiusX: arcParameters.radiusX,\n            radiusY: arcParameters.radiusY,\n            xRotation: arcParameters.xRotation,\n            anticlockwise: swipe === 0\n        });\n    };\n\n    return Arc;\n}(withAccessors(HasObservers, accessors)));\n\nfunction calculateAngle(cx, cy, rx, ry, x, y) {\n    var cos = round((x - cx) / rx, 3);\n    var sin = round((y - cy) / ry, 3);\n\n    return round(deg(Math.atan2(sin, cos)));\n}\n\nfunction normalizeArcParameters(parameters) {\n    var x1 = parameters.x1;\n    var y1 = parameters.y1;\n    var x2 = parameters.x2;\n    var y2 = parameters.y2;\n    var rx = parameters.rx;\n    var ry = parameters.ry;\n    var largeArc = parameters.largeArc;\n    var swipe = parameters.swipe;\n    var rotation = parameters.rotation; if (rotation === void 0) { rotation = 0; }\n\n    var radians = rad(rotation);\n    var cosine = Math.cos(radians);\n    var sine = Math.sin(radians);\n\n    var xT = cosine * (x1 - x2) / 2 + sine * (y1 - y2) / 2;\n    var yT = -sine * (x1 - x2) / 2 + cosine * (y1 - y2) / 2;\n\n    var sign = largeArc !== swipe ? 1 : -1;\n\n    var xt2 = Math.pow(xT, 2);\n    var yt2 = Math.pow(yT, 2);\n    var rx2 = Math.pow(rx, 2);\n    var ry2 = Math.pow(ry, 2);\n\n    var delta = xt2 / rx2 + yt2 / ry2;\n\n    if (delta > 1) {\n        delta = Math.sqrt(xt2 / rx2 + yt2 / ry2);\n        rx = delta * rx;\n        rx2 = Math.pow(rx, 2);\n\n        ry = delta * ry;\n        ry2 = Math.pow(ry, 2);\n    }\n\n    var constT = sign * Math.sqrt((rx2 * ry2 - rx2 * yt2 - ry2 * xt2) / (rx2 * yt2 + ry2 * xt2));\n    // due to rounding errors the value could become NaN even after radii correction\n    if (isNaN(constT)) {\n        constT = 0;\n    }\n\n    var cxT = constT * (rx * yT) / ry;\n    var cyT = - constT * (ry * xT) / rx;\n\n    var cx = cosine * cxT - sine * cyT + (x1 + x2) / 2;\n    var cy = sine * cxT + cosine * cyT + (y1 + y2) / 2;\n\n    var uX = (xT - cxT) / rx;\n    var uY = (yT - cyT) / ry;\n    var vX = -(xT + cxT) / rx;\n    var vY = -(yT + cyT) / ry;\n\n    var startAngle = (uY >= 0 ? 1 : -1) * deg(Math.acos(uX / Math.sqrt(uX * uX + uY * uY)));\n\n    var angleCosine = round((uX * vX + uY * vY) / (Math.sqrt(uX * uX + uY * uY) * Math.sqrt(vX * vX + vY * vY)), 10);\n    var angle = (uX * vY - uY * vX >= 0 ? 1 : -1) * deg(Math.acos(angleCosine));\n\n    if (!swipe && angle > 0) {\n        angle -= 360;\n    }\n\n    if (swipe && angle < 0) {\n        angle += 360;\n    }\n    var endAngle = startAngle + angle;\n    var signEndAngle = endAngle >= 0 ? 1 : -1;\n    endAngle = (Math.abs(endAngle) % 360) * signEndAngle;\n\n    return {\n        center: new Point(cx, cy),\n        startAngle: startAngle,\n        endAngle: endAngle,\n        radiusX: rx,\n        radiusY: ry,\n        xRotation: rotation\n    };\n}\n\nfunction bboxStartAngle(angle, start) {\n    var startAngle = angle;\n\n    while (startAngle < start) {\n        startAngle += 90;\n    }\n\n    return startAngle;\n}\n\nvar push = [].push;\nvar pop = [].pop;\nvar splice = [].splice;\nvar shift = [].shift;\nvar slice = [].slice;\nvar unshift = [].unshift;\n\nvar ElementsArray = (function (HasObservers$$1) {\n    function ElementsArray(array) {\n        if (array === void 0) { array = []; }\n\n        HasObservers$$1.call(this);\n\n        this.length = 0;\n        this._splice(0, array.length, array);\n    }\n\n    extendStatic(ElementsArray, HasObservers$$1);\n    ElementsArray.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n    ElementsArray.prototype.constructor = ElementsArray;\n    ElementsArray.fn = ElementsArray.prototype;\n    ElementsArray.fn.init = ElementsArray.fn.constructor;\n\n    ElementsArray.prototype.elements = function elements (value) {\n        if (value) {\n            this._splice(0, this.length, value);\n\n            this._change();\n            return this;\n        }\n\n        return this.slice(0);\n    };\n\n    ElementsArray.prototype.push = function push$1 () {\n        var elements = arguments;\n        var result = push.apply(this, elements);\n\n        this._add(elements);\n\n        return result;\n    };\n\n    ElementsArray.prototype.slice = function slice$1 () {\n        return slice.call(this);\n    };\n\n    ElementsArray.prototype.pop = function pop$1 () {\n        var length = this.length;\n        var result = pop.apply(this);\n\n        if (length) {\n            this._remove([ result ]);\n        }\n\n        return result;\n    };\n\n    ElementsArray.prototype.splice = function splice$1 (index, howMany) {\n        var elements = slice.call(arguments, 2);\n        var result = this._splice(index, howMany, elements);\n\n        this._change();\n\n        return result;\n    };\n\n    ElementsArray.prototype.shift = function shift$1 () {\n        var length = this.length;\n        var result = shift.apply(this);\n\n        if (length) {\n            this._remove([ result ]);\n        }\n\n        return result;\n    };\n\n    ElementsArray.prototype.unshift = function unshift$1 () {\n        var elements = arguments;\n        var result = unshift.apply(this, elements);\n\n        this._add(elements);\n\n        return result;\n    };\n\n    ElementsArray.prototype.indexOf = function indexOf (element) {\n        var this$1 = this;\n\n        var length = this.length;\n\n        for (var idx = 0; idx < length; idx++) {\n            if (this$1[idx] === element) {\n                return idx;\n            }\n        }\n        return -1;\n    };\n\n    ElementsArray.prototype._splice = function _splice (index, howMany, elements) {\n        var result = splice.apply(this, [ index, howMany ].concat(elements));\n\n        this._clearObserver(result);\n        this._setObserver(elements);\n\n        return result;\n    };\n\n    ElementsArray.prototype._add = function _add (elements) {\n        this._setObserver(elements);\n        this._change();\n    };\n\n    ElementsArray.prototype._remove = function _remove (elements) {\n        this._clearObserver(elements);\n        this._change();\n    };\n\n    ElementsArray.prototype._setObserver = function _setObserver (elements) {\n        var this$1 = this;\n\n        for (var idx = 0; idx < elements.length; idx++) {\n            elements[idx].addObserver(this$1);\n        }\n    };\n\n    ElementsArray.prototype._clearObserver = function _clearObserver (elements) {\n        var this$1 = this;\n\n        for (var idx = 0; idx < elements.length; idx++) {\n            elements[idx].removeObserver(this$1);\n        }\n    };\n\n    ElementsArray.prototype._change = function _change () {};\n\n    return ElementsArray;\n}(HasObservers));\n\nvar GeometryElementsArray = (function (ElementsArray$$1) {\n    function GeometryElementsArray () {\n        ElementsArray$$1.apply(this, arguments);\n    }\n\n    extendStatic(GeometryElementsArray, ElementsArray$$1);\n    GeometryElementsArray.prototype = Object.create( ElementsArray$$1 && ElementsArray$$1.prototype );\n    GeometryElementsArray.prototype.constructor = GeometryElementsArray;\n    GeometryElementsArray.fn = GeometryElementsArray.prototype;\n    GeometryElementsArray.fn.init = GeometryElementsArray.fn.constructor;\n\n    GeometryElementsArray.prototype._change = function _change () {\n        this.geometryChange();\n    };\n\n    return GeometryElementsArray;\n}(ElementsArray));\n\nfunction isOutOfEndPoint(endPoint, controlPoint, point) {\n    var angle = deg(Math.atan2(controlPoint.y - endPoint.y, controlPoint.x - endPoint.x));\n    var rotatedPoint = point.transformCopy(transform$1().rotate(-angle, endPoint));\n\n    return rotatedPoint.x < endPoint.x;\n}\n\nfunction calculateCurveAt(t, field, points) {\n    var t1 = 1 - t;\n    return Math.pow(t1, 3) * points[0][field] +\n        3 * Math.pow(t1, 2) * t * points[1][field] +\n        3 * Math.pow(t, 2) * t1 * points[2][field] +\n        Math.pow(t, 3) * points[3][field];\n}\n\nfunction toCubicPolynomial(points, field) {\n    return [ -points[0][field] + 3 * points[1][field] - 3 * points[2][field] + points[3][field],\n        3 * (points[0][field] - 2 * points[1][field] + points[2][field]),\n        3 * (-points[0][field] + points[1][field]),\n        points[0][field]\n    ];\n}\n\nvar ComplexNumber = (function (Class$$1) {\n    function ComplexNumber(real, img) {\n        if (real === void 0) { real = 0; }\n        if (img === void 0) { img = 0; }\n\n        Class$$1.call(this);\n\n        this.real = real;\n        this.img = img;\n    }\n\n    extendStatic(ComplexNumber, Class$$1);\n    ComplexNumber.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    ComplexNumber.prototype.constructor = ComplexNumber;\n    ComplexNumber.fn = ComplexNumber.prototype;\n    ComplexNumber.fn.init = ComplexNumber.fn.constructor;\n\n    ComplexNumber.prototype.add = function add (cNumber) {\n        return new ComplexNumber(round(this.real + cNumber.real, PRECISION), round(this.img + cNumber.img, PRECISION));\n    };\n\n    ComplexNumber.prototype.addConstant = function addConstant (value) {\n        return new ComplexNumber(this.real + value, this.img);\n    };\n\n    ComplexNumber.prototype.negate = function negate () {\n        return new ComplexNumber(-this.real, -this.img);\n    };\n\n    ComplexNumber.prototype.multiply = function multiply (cNumber) {\n        return new ComplexNumber(this.real * cNumber.real - this.img * cNumber.img,\n            this.real * cNumber.img + this.img * cNumber.real);\n    };\n\n    ComplexNumber.prototype.multiplyConstant = function multiplyConstant (value) {\n        return new ComplexNumber(this.real * value, this.img * value);\n    };\n\n    ComplexNumber.prototype.nthRoot = function nthRoot (n) {\n        var rad$$1 = Math.atan2(this.img, this.real);\n        var r = Math.sqrt(Math.pow(this.img, 2) + Math.pow(this.real, 2));\n        var nthR = Math.pow(r, 1 / n);\n\n        return new ComplexNumber(nthR * Math.cos(rad$$1 / n), nthR * Math.sin(rad$$1 / n)); //Moivre's formula\n    };\n\n    ComplexNumber.prototype.equals = function equals (cNumber) {\n        return this.real === cNumber.real && this.img === cNumber.img;\n    };\n\n    ComplexNumber.prototype.isReal = function isReal () {\n        return this.img === 0;\n    };\n\n    return ComplexNumber;\n}(Class));\n\nfunction numberSign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction solveQuadraticEquation(a, b, c) {\n    var squareRoot = Math.sqrt(Math.pow(b, 2) - 4 * a * c);\n    return [\n        (-b + squareRoot) / (2 * a),\n        (-b - squareRoot) / (2 * a)\n    ];\n}\n\n//Cardano's formula\nfunction solveCubicEquation(a, b, c, d) {\n    if (a === 0) {\n        return solveQuadraticEquation(b, c, d);\n    }\n\n    var p = (3 * a * c - Math.pow(b, 2)) / (3 * Math.pow(a, 2));\n    var q = (2 * Math.pow(b, 3) - 9 * a * b * c + 27 * Math.pow(a, 2) * d) / (27 * Math.pow(a, 3));\n    var Q = Math.pow(p / 3, 3) + Math.pow(q / 2, 2);\n    var i = new ComplexNumber(0,1);\n    var b3a = -b / (3 * a);\n    var x1, x2, y1, y2, y3, z1, z2;\n\n    if (Q < 0) {\n        x1 = new ComplexNumber(-q / 2, Math.sqrt(-Q)).nthRoot(3);\n        x2 = new ComplexNumber(-q / 2, - Math.sqrt(-Q)).nthRoot(3);\n    } else {\n        x1 = -q / 2 + Math.sqrt(Q);\n        x1 = new ComplexNumber(numberSign(x1) * Math.pow(Math.abs(x1), 1 / 3));\n        x2 = -q / 2 - Math.sqrt(Q);\n        x2 = new ComplexNumber(numberSign(x2) * Math.pow(Math.abs(x2), 1 / 3));\n    }\n\n    y1 = x1.add(x2);\n\n    z1 = x1.add(x2).multiplyConstant(-1 / 2);\n    z2 = x1.add(x2.negate()).multiplyConstant(Math.sqrt(3) / 2);\n\n    y2 = z1.add(i.multiply(z2));\n    y3 = z1.add(i.negate().multiply(z2));\n\n    var result = [];\n\n    if (y1.isReal()) {\n        result.push(round(y1.real + b3a, PRECISION));\n    }\n    if (y2.isReal()) {\n        result.push(round(y2.real + b3a, PRECISION));\n    }\n    if (y3.isReal()) {\n        result.push(round(y3.real + b3a, PRECISION));\n    }\n\n    return result;\n}\n\nfunction hasRootsInRange(points, point, field, rootField, range) {\n    var polynomial = toCubicPolynomial(points, rootField);\n    var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point[rootField]);\n    var intersection;\n\n    for (var idx = 0; idx < roots.length; idx++) {\n        if (0 <= roots[idx] && roots[idx] <= 1) {\n            intersection = calculateCurveAt(roots[idx], field, points);\n            if (Math.abs(intersection - point[field]) <= range) {\n                return true;\n            }\n        }\n    }\n}\n\nfunction curveIntersectionsCount(points, point, bbox) {\n    var polynomial = toCubicPolynomial(points, \"x\");\n    var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point.x);\n    var rayIntersection, intersectsRay;\n    var count = 0;\n    for (var i = 0; i < roots.length; i++) {\n        rayIntersection = calculateCurveAt(roots[i], \"y\", points);\n        intersectsRay = close$1(rayIntersection, point.y) || rayIntersection > point.y;\n        if (intersectsRay && (((roots[i] === 0 || roots[i] === 1) && bbox.bottomRight().x > point.x) || (0 < roots[i] && roots[i] < 1))) {\n            count++;\n        }\n    }\n\n    return count;\n}\n\nfunction lineIntersectionsCount(a, b, point) {\n    var intersects;\n    if (a.x !== b.x) {\n        var minX = Math.min(a.x, b.x);\n        var maxX = Math.max(a.x, b.x);\n        var minY = Math.min(a.y, b.y);\n        var maxY = Math.max(a.y, b.y);\n        var inRange = minX <= point.x && point.x < maxX;\n\n        if (minY === maxY) {\n            intersects = point.y <= minY && inRange;\n        } else {\n            intersects = inRange && (((maxY - minY) * ((a.x - b.x) * (a.y - b.y) > 0 ? point.x - minX : maxX - point.x)) / (maxX - minX) + minY - point.y) >= 0;\n        }\n    }\n\n    return intersects ? 1 : 0;\n}\n\nfunction pointAccessor(name) {\n    var fieldName = \"_\" + name;\n    return function(value) {\n        if (defined(value)) {\n            this._observerField(fieldName, Point.create(value));\n            this.geometryChange();\n            return this;\n        }\n\n        return this[fieldName];\n    };\n}\n\nfunction definePointAccessors(fn, names) {\n    for (var i = 0; i < names.length; i++) {\n        fn[names[i]] = pointAccessor(names[i]);\n    }\n}\n\nvar withPoints = function (TBase, names) {\n    var result = (function (TBase) {\n        function result () {\n            TBase.apply(this, arguments);\n        }extendStatic(result, TBase);\n        result.prototype = Object.create( TBase && TBase.prototype );\n        result.prototype.constructor = result;\n        result.fn = result.prototype;\n        result.fn.init = result.fn.constructor;\n\n        return result;\n    }(TBase));\n    definePointAccessors(result.prototype, names);\n\n    return result;\n};\n\nvar points = [ \"anchor\", \"controlIn\", \"controlOut\" ];\n\nvar Segment = (function (superclass) {\n    function Segment(anchor, controlIn, controlOut) {\n        superclass.call(this);\n\n        this.anchor(anchor || new Point());\n        this.controlIn(controlIn);\n        this.controlOut(controlOut);\n    }\n\n    extendStatic(Segment, superclass);\n    Segment.prototype = Object.create( superclass && superclass.prototype );\n    Segment.prototype.constructor = Segment;\n    Segment.fn = Segment.prototype;\n    Segment.fn.init = Segment.fn.constructor;\n\n    Segment.prototype.bboxTo = function bboxTo (toSegment, matrix) {\n        var segmentAnchor = this.anchor().transformCopy(matrix);\n        var toSegmentAnchor = toSegment.anchor().transformCopy(matrix);\n        var rect;\n\n        if (this.controlOut() && toSegment.controlIn()) {\n            rect = this._curveBoundingBox(\n                segmentAnchor, this.controlOut().transformCopy(matrix),\n                toSegment.controlIn().transformCopy(matrix), toSegmentAnchor\n            );\n        } else {\n            rect = this._lineBoundingBox(segmentAnchor, toSegmentAnchor);\n        }\n\n        return rect;\n    };\n\n    Segment.prototype._lineBoundingBox = function _lineBoundingBox (p1, p2) {\n        return Rect.fromPoints(p1, p2);\n    };\n\n    Segment.prototype._curveBoundingBox = function _curveBoundingBox (p1, cp1, cp2, p2) {\n        var points = [ p1, cp1, cp2, p2 ];\n        var extremesX = this._curveExtremesFor(points, \"x\");\n        var extremesY = this._curveExtremesFor(points, \"y\");\n        var xLimits = arrayLimits([ extremesX.min, extremesX.max, p1.x, p2.x ]);\n        var yLimits = arrayLimits([ extremesY.min, extremesY.max, p1.y, p2.y ]);\n\n        return Rect.fromPoints(new Point(xLimits.min, yLimits.min), new Point(xLimits.max, yLimits.max));\n    };\n\n    Segment.prototype._curveExtremesFor = function _curveExtremesFor (points, field) {\n        var extremes = this._curveExtremes(\n            points[0][field], points[1][field],\n            points[2][field], points[3][field]\n        );\n\n        return {\n            min: calculateCurveAt(extremes.min, field, points),\n            max: calculateCurveAt(extremes.max, field, points)\n        };\n    };\n\n    Segment.prototype._curveExtremes = function _curveExtremes (x1, x2, x3, x4) {\n        var a = x1 - 3 * x2 + 3 * x3 - x4;\n        var b = - 2 * (x1 - 2 * x2 + x3);\n        var c = x1 - x2;\n        var sqrt = Math.sqrt(b * b - 4 * a * c);\n        var t1 = 0;\n        var t2 = 1;\n\n        if (a === 0) {\n            if (b !== 0) {\n                t1 = t2 = -c / b;\n            }\n        } else if (!isNaN(sqrt)) {\n            t1 = (- b + sqrt) / (2 * a);\n            t2 = (- b - sqrt) / (2 * a);\n        }\n\n        var min = Math.max(Math.min(t1, t2), 0);\n        if (min < 0 || min > 1) {\n            min = 0;\n        }\n\n        var max = Math.min(Math.max(t1, t2), 1);\n        if (max > 1 || max < 0) {\n            max = 1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    };\n\n    Segment.prototype._intersectionsTo = function _intersectionsTo (segment, point) {\n        var intersectionsCount;\n        if (this.controlOut() && segment.controlIn()) {\n            intersectionsCount = curveIntersectionsCount([ this.anchor(), this.controlOut(), segment.controlIn(), segment.anchor() ], point, this.bboxTo(segment));\n        } else {\n            intersectionsCount = lineIntersectionsCount(this.anchor(), segment.anchor(), point);\n        }\n        return intersectionsCount;\n    };\n\n    Segment.prototype._isOnCurveTo = function _isOnCurveTo (segment, point, width, endSegment) {\n        var bbox = this.bboxTo(segment).expand(width, width);\n        if (bbox.containsPoint(point)) {\n            var p1 = this.anchor();\n            var p2 = this.controlOut();\n            var p3 = segment.controlIn();\n            var p4 = segment.anchor();\n\n            if (endSegment === \"start\" && p1.distanceTo(point) <= width) {\n                return !isOutOfEndPoint(p1, p2, point);\n            } else if (endSegment === \"end\" && p4.distanceTo(point) <= width) {\n                return !isOutOfEndPoint(p4, p3, point);\n            }\n\n            //the approach is not entirely correct but is close and the alternatives are solving a 6th degree polynomial or testing the segment points\n            var points = [ p1, p2, p3, p4 ];\n            if (hasRootsInRange(points, point, \"x\", \"y\", width) || hasRootsInRange(points, point, \"y\", \"x\", width)) {\n                return true;\n            }\n            var rotation = transform$1().rotate(45, point);\n            var rotatedPoints = [ p1.transformCopy(rotation), p2.transformCopy(rotation), p3.transformCopy(rotation), p4.transformCopy(rotation) ];\n            return hasRootsInRange(rotatedPoints, point, \"x\", \"y\", width) || hasRootsInRange(rotatedPoints, point, \"y\", \"x\", width);\n        }\n    };\n\n    Segment.prototype._isOnLineTo = function _isOnLineTo (segment, point, width) {\n        var p1 = this.anchor();\n        var p2 = segment.anchor();\n        var angle = deg(Math.atan2(p2.y - p1.y, p2.x - p1.x));\n        var rect = new Rect([ p1.x, p1.y - width / 2 ], [ p1.distanceTo(p2), width ]);\n        return rect.containsPoint(point.transformCopy(transform$1().rotate(-angle, p1)));\n    };\n\n    Segment.prototype._isOnPathTo = function _isOnPathTo (segment, point, width, endSegment) {\n        var isOnPath;\n        if (this.controlOut() && segment.controlIn()) {\n            isOnPath = this._isOnCurveTo(segment, point, width / 2, endSegment);\n        } else {\n            isOnPath = this._isOnLineTo(segment, point, width);\n        }\n        return isOnPath;\n    };\n\n    return Segment;\n}(withPoints(HasObservers, points)));\n\nfunction arrayLimits(arr) {\n    var length = arr.length;\n    var min = MAX_NUM;\n    var max = MIN_NUM;\n\n    for (var i = 0; i < length; i ++) {\n        max = Math.max(max, arr[i]);\n        min = Math.min(min, arr[i]);\n    }\n\n    return {\n        min: min,\n        max: max\n    };\n}\n\nvar ShapeMap = {\n    l: function(path, options) {\n        var parameters = options.parameters;\n        var position = options.position;\n\n        for (var i = 0; i < parameters.length; i += 2) {\n            var point = new Point(parameters[i], parameters[i + 1]);\n\n            if (options.isRelative) {\n                point.translateWith(position);\n            }\n\n            path.lineTo(point.x, point.y);\n\n            position.x = point.x;\n            position.y = point.y;\n        }\n    },\n\n    c: function(path, options) {\n        var parameters = options.parameters;\n        var position = options.position;\n\n        for (var i = 0; i < parameters.length; i += 6) {\n            var controlOut = new Point(parameters[i], parameters[i + 1]);\n            var controlIn = new Point(parameters[i + 2], parameters[i + 3]);\n            var point = new Point(parameters[i + 4], parameters[i + 5]);\n            if (options.isRelative) {\n                controlIn.translateWith(position);\n                controlOut.translateWith(position);\n                point.translateWith(position);\n            }\n\n            path.curveTo(controlOut, controlIn, point);\n\n            position.x = point.x;\n            position.y = point.y;\n        }\n    },\n\n    v: function(path, options) {\n        var value = options.isRelative ? 0 : options.position.x;\n\n        toLineParamaters(options.parameters, true, value);\n        this.l(path, options);\n    },\n\n    h: function(path, options) {\n        var value = options.isRelative ? 0 : options.position.y;\n\n        toLineParamaters(options.parameters, false, value);\n        this.l(path, options);\n    },\n\n    a: function(path, options) {\n        var parameters = options.parameters;\n        var position = options.position;\n\n        for (var i = 0; i < parameters.length; i += 7) {\n            var radiusX = parameters[i];\n            var radiusY = parameters[i + 1];\n            var rotation = parameters[i + 2];\n            var largeArc = parameters[i + 3];\n            var swipe = parameters[i + 4];\n            var endPoint = new Point(parameters[i + 5], parameters[i + 6]);\n\n            if (options.isRelative) {\n                endPoint.translateWith(position);\n            }\n            if (position.x !== endPoint.x || position.y !== endPoint.y) {\n                path.arcTo(endPoint, radiusX, radiusY, largeArc, swipe, rotation);\n\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n            }\n        }\n    },\n\n    s: function(path, options) {\n        var parameters = options.parameters;\n        var position = options.position;\n        var previousCommand = options.previousCommand;\n        var lastControlIn;\n\n        if (previousCommand === \"s\" || previousCommand === \"c\") {\n            lastControlIn = last(last(path.paths).segments).controlIn();\n        }\n\n        for (var i = 0; i < parameters.length; i += 4) {\n            var controlIn = new Point(parameters[i], parameters[i + 1]);\n            var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n            var controlOut = (void 0);\n\n            if (options.isRelative) {\n                controlIn.translateWith(position);\n                endPoint.translateWith(position);\n            }\n\n            if (lastControlIn) {\n                controlOut = reflectionPoint(lastControlIn, position);\n            } else {\n                controlOut = position.clone();\n            }\n\n            lastControlIn = controlIn;\n\n            path.curveTo(controlOut, controlIn, endPoint);\n\n            position.x = endPoint.x;\n            position.y = endPoint.y;\n        }\n    },\n\n    q: function(path, options) {\n        var parameters = options.parameters;\n        var position = options.position;\n\n        for (var i = 0; i < parameters.length; i += 4) {\n            var controlPoint = new Point(parameters[i], parameters[i + 1]);\n            var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n\n            if (options.isRelative) {\n                controlPoint.translateWith(position);\n                endPoint.translateWith(position);\n            }\n\n            var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n\n            path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n\n            position.x = endPoint.x;\n            position.y = endPoint.y;\n        }\n    },\n\n    t: function(path, options) {\n        var parameters = options.parameters;\n        var position = options.position;\n        var previousCommand = options.previousCommand;\n        var controlPoint;\n\n        if (previousCommand === \"q\" || previousCommand === \"t\") {\n            var lastSegment = last(last(path.paths).segments);\n            controlPoint = lastSegment.controlIn().clone()\n                .translateWith(position.scaleCopy(-1 / 3))\n                .scale(3 / 2);\n        }\n\n        for (var i = 0; i < parameters.length; i += 2) {\n            var endPoint = new Point(parameters[i], parameters[i + 1]);\n            if (options.isRelative) {\n                endPoint.translateWith(position);\n            }\n\n            if (controlPoint) {\n                controlPoint = reflectionPoint(controlPoint, position);\n            } else {\n                controlPoint = position.clone();\n            }\n\n            var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n\n            path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n\n            position.x = endPoint.x;\n            position.y = endPoint.y;\n        }\n    }\n};\n\nfunction toLineParamaters(parameters, isVertical, value) {\n    var insertPosition = isVertical ? 0 : 1;\n\n    for (var i = 0; i < parameters.length; i += 2) {\n        parameters.splice(i + insertPosition, 0, value);\n    }\n}\n\nfunction reflectionPoint(point, center) {\n    if (point && center) {\n        return center.scaleCopy(2).translate(-point.x, -point.y);\n    }\n}\n\nvar third = 1 / 3;\n\nfunction quadraticToCubicControlPoints(position, controlPoint, endPoint) {\n    var scaledPoint = controlPoint.clone().scale(2 / 3);\n    return {\n        controlOut: scaledPoint.clone().translateWith(position.scaleCopy(third)),\n        controlIn: scaledPoint.translateWith(endPoint.scaleCopy(third))\n    };\n}\n\nvar SEGMENT_REGEX = /([a-df-z]{1})([^a-df-z]*)(z)?/gi;\nvar SPLIT_REGEX = /[,\\s]?([+\\-]?(?:\\d*\\.\\d+|\\d+)(?:[eE][+\\-]?\\d+)?)/g;\nvar MOVE = \"m\";\nvar CLOSE = \"z\";\n\nfunction parseParameters(str) {\n    var parameters = [];\n    str.replace(SPLIT_REGEX, function(match, number) {\n        parameters.push(parseFloat(number));\n    });\n    return parameters;\n}\n\nfunction parsePath(pathInstance, str) {\n    var position = new Point();\n    var previousCommand;\n\n    str.replace(SEGMENT_REGEX, function (match, element, params, closePath) {\n        var command = element.toLowerCase();\n        var isRelative = command === element;\n        var parameters = parseParameters(params.trim());\n\n        if (command === MOVE) {\n            if (isRelative) {\n                position.x += parameters[0];\n                position.y += parameters[1];\n            } else {\n                position.x = parameters[0];\n                position.y = parameters[1];\n            }\n\n            pathInstance.moveTo(position.x, position.y);\n\n            if (parameters.length > 2) {\n                command = \"l\";\n                parameters.splice(0, 2);\n            }\n        }\n\n        if (ShapeMap[command]) {\n            ShapeMap[command](\n                pathInstance, {\n                    parameters: parameters,\n                    position: position,\n                    isRelative: isRelative,\n                    previousCommand: previousCommand\n                }\n            );\n\n            if (closePath && closePath.toLowerCase() === CLOSE) {\n                pathInstance.close();\n            }\n        } else if (command !== MOVE) {\n            throw new Error(\"Error while parsing SVG path. Unsupported command: \" + command);\n        }\n\n        previousCommand = command;\n    });\n\n    return pathInstance;\n}\n\nfunction elementsBoundingBox(elements, applyTransform, transformation) {\n    var boundingBox;\n\n    for (var i = 0; i < elements.length; i++) {\n        var element = elements[i];\n        if (element.visible()) {\n            var elementBoundingBox = applyTransform ? element.bbox(transformation) : element.rawBBox();\n            if (elementBoundingBox) {\n                if (boundingBox) {\n                    boundingBox = Rect.union(boundingBox, elementBoundingBox);\n                } else {\n                    boundingBox = elementBoundingBox;\n                }\n            }\n        }\n    }\n\n    return boundingBox;\n}\n\nfunction elementsClippedBoundingBox(elements, transformation) {\n    var boundingBox;\n\n    for (var i = 0; i < elements.length; i++) {\n        var element = elements[i];\n        if (element.visible()) {\n            var elementBoundingBox = element.clippedBBox(transformation);\n            if (elementBoundingBox) {\n                if (boundingBox) {\n                    boundingBox = Rect.union(boundingBox, elementBoundingBox);\n                } else {\n                    boundingBox = elementBoundingBox;\n                }\n            }\n        }\n    }\n\n    return boundingBox;\n}\n\nvar Path = (function (superclass) {\n    function Path(options) {\n        superclass.call(this, options);\n        this.segments = new GeometryElementsArray();\n        this.segments.addObserver(this);\n\n        if (!defined(this.options.stroke)) {\n            this.stroke(\"#000\");\n\n            if (!defined(this.options.stroke.lineJoin)) {\n                this.options.set(\"stroke.lineJoin\", \"miter\");\n            }\n        }\n    }\n\n    extendStatic(Path, superclass);\n    Path.prototype = Object.create( superclass && superclass.prototype );\n    Path.prototype.constructor = Path;\n    Path.fn = Path.prototype;\n    Path.fn.init = Path.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    Path.parse = function parse (str, options) {\n        return MultiPath.parse(str, options);\n    };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Path\";\n    };\n\n    Path.prototype.moveTo = function moveTo (x, y) {\n        this.suspend();\n        this.segments.elements([]);\n        this.resume();\n\n        this.lineTo(x, y);\n\n        return this;\n    };\n\n    Path.prototype.lineTo = function lineTo (x, y) {\n        var point = defined(y) ? new Point(x, y) : x;\n        var segment = new Segment(point);\n\n        this.segments.push(segment);\n\n        return this;\n    };\n\n    Path.prototype.curveTo = function curveTo (controlOut, controlIn, point) {\n        if (this.segments.length > 0) {\n            var lastSegment = last(this.segments);\n            var segment = new Segment(point, controlIn);\n            this.suspend();\n            lastSegment.controlOut(controlOut);\n            this.resume();\n\n            this.segments.push(segment);\n        }\n\n        return this;\n    };\n\n    Path.prototype.arc = function arc (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n        if (this.segments.length > 0) {\n            var lastSegment = last(this.segments);\n            var anchor = lastSegment.anchor();\n            var start = rad(startAngle);\n            var center = new Point(anchor.x - radiusX * Math.cos(start),\n                anchor.y - radiusY * Math.sin(start));\n            var arc = new Arc$2(center, {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: radiusX,\n                radiusY: radiusY,\n                anticlockwise: anticlockwise\n            });\n\n            this._addArcSegments(arc);\n        }\n\n        return this;\n    };\n\n    Path.prototype.arcTo = function arcTo (end, rx, ry, largeArc, swipe, rotation) {\n        if (this.segments.length > 0) {\n            var lastSegment = last(this.segments);\n            var anchor = lastSegment.anchor();\n            var arc = Arc$2.fromPoints(anchor, Point.create(end), rx, ry, largeArc, swipe, rotation);\n\n            this._addArcSegments(arc);\n        }\n        return this;\n    };\n\n    Path.prototype._addArcSegments = function _addArcSegments (arc) {\n        var this$1 = this;\n\n        this.suspend();\n\n        var curvePoints = arc.curvePoints();\n\n        for (var i = 1; i < curvePoints.length; i += 3) {\n            this$1.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n        }\n\n        this.resume();\n        this.geometryChange();\n    };\n\n    Path.prototype.close = function close () {\n        this.options.closed = true;\n        this.geometryChange();\n\n        return this;\n    };\n\n    Path.prototype.rawBBox = function rawBBox () {\n        return this._bbox();\n    };\n\n    Path.prototype._containsPoint = function _containsPoint (point) {\n        var segments = this.segments;\n        var length = segments.length;\n        var intersectionsCount = 0;\n        var previous, current;\n\n        for (var idx = 1; idx < length; idx++) {\n            previous = segments[idx - 1];\n            current = segments[idx];\n            intersectionsCount += previous._intersectionsTo(current, point);\n        }\n\n        if (this.options.closed || !segments[0].anchor().equals(segments[length - 1].anchor())) {\n            intersectionsCount += lineIntersectionsCount(segments[0].anchor(), segments[length - 1].anchor(), point);\n        }\n\n        return intersectionsCount % 2 !== 0;\n    };\n\n    Path.prototype._isOnPath = function _isOnPath (point, width) {\n        var segments = this.segments;\n        var length = segments.length;\n        var pathWidth = width || this.options.stroke.width;\n\n        if (length > 1) {\n            if (segments[0]._isOnPathTo(segments[1], point, pathWidth, \"start\")) {\n                return true;\n            }\n\n            for (var idx = 2; idx <= length - 2; idx++) {\n                if (segments[idx - 1]._isOnPathTo(segments[idx], point, pathWidth)) {\n                    return true;\n                }\n            }\n\n            if (segments[length - 2]._isOnPathTo(segments[length - 1], point, pathWidth, \"end\")) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    Path.prototype._bbox = function _bbox (matrix) {\n        var segments = this.segments;\n        var length = segments.length;\n        var boundingBox;\n\n        if (length === 1) {\n            var anchor = segments[0].anchor().transformCopy(matrix);\n            boundingBox = new Rect(anchor, Size.ZERO);\n        } else if (length > 0) {\n            for (var i = 1; i < length; i++) {\n                var segmentBox = segments[i - 1].bboxTo(segments[i], matrix);\n                if (boundingBox) {\n                    boundingBox = Rect.union(boundingBox, segmentBox);\n                } else {\n                    boundingBox = segmentBox;\n                }\n            }\n        }\n\n        return boundingBox;\n    };\n\n    Path.fromRect = function fromRect (rect, options) {\n        var path = new Path(options);\n        var ref = rect.cornerRadius;\n        var rx = ref[0];\n        var ry = ref[1];\n\n        if (rx === 0 && ry === 0) {\n            path.moveTo(rect.topLeft())\n                .lineTo(rect.topRight())\n                .lineTo(rect.bottomRight())\n                .lineTo(rect.bottomLeft())\n                .close();\n        } else {\n            var origin = rect.origin;\n            var x = origin.x;\n            var y = origin.y;\n            var width = rect.width();\n            var height = rect.height();\n            rx = limitValue(rx, 0, width / 2);\n            ry = limitValue(ry, 0, height / 2);\n\n            path.moveTo(x + rx, y)\n                .lineTo(x + width - rx, y)\n                .arcTo([ x + width, y + ry ], rx, ry, false)\n                .lineTo(x + width, y + height - ry)\n                .arcTo([ x + width - rx, y + height ], rx, ry, false)\n                .lineTo(x + rx, y + height)\n                .arcTo([ x, y + height - ry ], rx, ry, false)\n                .lineTo(x, y + ry)\n                .arcTo([ x + rx, y ], rx, ry, false);\n        }\n\n        return path;\n    };\n\n    Path.fromPoints = function fromPoints (points, options) {\n        if (points) {\n            var path = new Path(options);\n\n            for (var i = 0; i < points.length; i++) {\n                var point = Point.create(points[i]);\n                if (point) {\n                    if (i === 0) {\n                        path.moveTo(point);\n                    } else {\n                        path.lineTo(point);\n                    }\n                }\n            }\n\n            return path;\n        }\n    };\n\n    Path.fromArc = function fromArc (arc, options) {\n        var path = new Path(options);\n        var startAngle = arc.startAngle;\n        var start = arc.pointAt(startAngle);\n        path.moveTo(start.x, start.y);\n        path.arc(startAngle, arc.endAngle, arc.radiusX, arc.radiusY, arc.anticlockwise);\n        return path;\n    };\n\n    Object.defineProperties( Path.prototype, prototypeAccessors );\n\n    return Path;\n}(paintable(measurable(Element$1))));\n\nvar MultiPath = (function (superclass) {\n    function MultiPath(options) {\n        superclass.call(this, options);\n        this.paths = new GeometryElementsArray();\n        this.paths.addObserver(this);\n\n        if (!defined(this.options.stroke)) {\n            this.stroke(\"#000\");\n        }\n    }\n\n    extendStatic(MultiPath, superclass);\n    MultiPath.prototype = Object.create( superclass && superclass.prototype );\n    MultiPath.prototype.constructor = MultiPath;\n    MultiPath.fn = MultiPath.prototype;\n    MultiPath.fn.init = MultiPath.fn.constructor;\n\n    var prototypeAccessors$1 = { nodeType: {} };\n\n    MultiPath.parse = function parse (str, options) {\n        var instance = new MultiPath(options);\n        return parsePath(instance, str);\n    };\n\n    prototypeAccessors$1.nodeType.get = function () {\n        return \"MultiPath\";\n    };\n\n    MultiPath.prototype.moveTo = function moveTo (x, y) {\n        var path = new Path();\n        path.moveTo(x, y);\n\n        this.paths.push(path);\n\n        return this;\n    };\n\n    MultiPath.prototype.lineTo = function lineTo (x, y) {\n        if (this.paths.length > 0) {\n            last(this.paths).lineTo(x, y);\n        }\n\n        return this;\n    };\n\n    MultiPath.prototype.curveTo = function curveTo (controlOut, controlIn, point) {\n        if (this.paths.length > 0) {\n            last(this.paths).curveTo(controlOut, controlIn, point);\n        }\n\n        return this;\n    };\n\n    MultiPath.prototype.arc = function arc (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n        if (this.paths.length > 0) {\n            last(this.paths).arc(startAngle, endAngle, radiusX, radiusY, anticlockwise);\n        }\n\n        return this;\n    };\n\n    MultiPath.prototype.arcTo = function arcTo (end, rx, ry, largeArc, swipe, rotation) {\n        if (this.paths.length > 0) {\n            last(this.paths).arcTo(end, rx, ry, largeArc, swipe, rotation);\n        }\n\n        return this;\n    };\n\n    MultiPath.prototype.close = function close () {\n        if (this.paths.length > 0) {\n            last(this.paths).close();\n        }\n\n        return this;\n    };\n\n    MultiPath.prototype._bbox = function _bbox (matrix) {\n        return elementsBoundingBox(this.paths, true, matrix);\n    };\n\n    MultiPath.prototype.rawBBox = function rawBBox () {\n        return elementsBoundingBox(this.paths, false);\n    };\n\n    MultiPath.prototype._containsPoint = function _containsPoint (point) {\n        var paths = this.paths;\n\n        for (var idx = 0; idx < paths.length; idx++) {\n            if (paths[idx]._containsPoint(point)) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    MultiPath.prototype._isOnPath = function _isOnPath (point) {\n        var paths = this.paths;\n        var width = this.options.stroke.width;\n\n        for (var idx = 0; idx < paths.length; idx++) {\n            if (paths[idx]._isOnPath(point, width)) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    MultiPath.prototype._clippedBBox = function _clippedBBox (transformation) {\n        return elementsClippedBoundingBox(this.paths, this.currentTransform(transformation));\n    };\n\n    Object.defineProperties( MultiPath.prototype, prototypeAccessors$1 );\n\n    return MultiPath;\n}(paintable(measurable(Element$1))));\n\nvar DEFAULT_STROKE$1 = \"#000\";\n\nvar Arc = (function (superclass) {\n    function Arc(geometry, options) {\n        if (geometry === void 0) { geometry = new Arc$2(); }\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.geometry(geometry);\n\n        if (!defined(this.options.stroke)) {\n            this.stroke(DEFAULT_STROKE$1);\n        }\n    }\n\n    extendStatic(Arc, superclass);\n    Arc.prototype = Object.create( superclass && superclass.prototype );\n    Arc.prototype.constructor = Arc;\n    Arc.fn = Arc.prototype;\n    Arc.fn.init = Arc.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Arc\";\n    };\n\n    Arc.prototype._bbox = function _bbox (matrix) {\n        return this._geometry.bbox(matrix);\n    };\n\n    Arc.prototype.rawBBox = function rawBBox () {\n        return this.geometry().bbox();\n    };\n\n    Arc.prototype.toPath = function toPath () {\n        var path = new Path();\n        var curvePoints = this.geometry().curvePoints();\n\n        if (curvePoints.length > 0) {\n            path.moveTo(curvePoints[0].x, curvePoints[0].y);\n\n            for (var i = 1; i < curvePoints.length; i += 3) {\n                path.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n            }\n        }\n\n        return path;\n    };\n\n    Arc.prototype._containsPoint = function _containsPoint (point) {\n        return this.geometry().containsPoint(point);\n    };\n\n    Arc.prototype._isOnPath = function _isOnPath (point) {\n        return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n    };\n\n    Object.defineProperties( Arc.prototype, prototypeAccessors );\n\n    return Arc;\n}(paintable(measurable(withGeometry(Element$1)))));\n\nvar DEFAULT_FONT = \"12px sans-serif\";\nvar DEFAULT_FILL = \"#000\";\n\nvar Text = (function (superclass) {\n    function Text(content, position, options) {\n        if (position === void 0) { position = new Point(); }\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.content(content);\n        this.position(position);\n\n        if (!this.options.font) {\n            this.options.font = DEFAULT_FONT;\n        }\n\n        if (!defined(this.options.fill)) {\n            this.fill(DEFAULT_FILL);\n        }\n    }\n\n    extendStatic(Text, superclass);\n    Text.prototype = Object.create( superclass && superclass.prototype );\n    Text.prototype.constructor = Text;\n    Text.fn = Text.prototype;\n    Text.fn.init = Text.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Text\";\n    };\n\n    Text.prototype.content = function content (value) {\n        if (defined(value)) {\n            this.options.set(\"content\", value);\n            return this;\n        }\n\n        return this.options.get(\"content\");\n    };\n\n    Text.prototype.measure = function measure () {\n        var metrics = kendoUtil.measureText(this.content(), {\n            font: this.options.get(\"font\")\n        });\n\n        return metrics;\n    };\n\n    Text.prototype.rect = function rect () {\n        var size = this.measure();\n        var pos = this.position().clone();\n        return new Rect(pos, [ size.width, size.height ]);\n    };\n\n    Text.prototype.bbox = function bbox (transformation) {\n        var combinedMatrix = toMatrix(this.currentTransform(transformation));\n        return this.rect().bbox(combinedMatrix);\n    };\n\n    Text.prototype.rawBBox = function rawBBox () {\n        return this.rect().bbox();\n    };\n\n    Text.prototype._containsPoint = function _containsPoint (point) {\n        return this.rect().containsPoint(point);\n    };\n\n    Object.defineProperties( Text.prototype, prototypeAccessors );\n\n    return Text;\n}(paintable(withPoints(Element$1, [ \"position\" ]))));\n\nvar Image$1 = (function (superclass) {\n    function Image(src, rect, options) {\n        if (rect === void 0) { rect = new Rect(); }\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.src(src);\n        this.rect(rect);\n    }\n\n    extendStatic(Image, superclass);\n    Image.prototype = Object.create( superclass && superclass.prototype );\n    Image.prototype.constructor = Image;\n    Image.fn = Image.prototype;\n    Image.fn.init = Image.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Image\";\n    };\n\n    Image.prototype.src = function src (value) {\n        if (defined(value)) {\n            this.options.set(\"src\", value);\n            return this;\n        }\n\n        return this.options.get(\"src\");\n    };\n\n    Image.prototype.bbox = function bbox (transformation) {\n        var combinedMatrix = toMatrix(this.currentTransform(transformation));\n        return this._rect.bbox(combinedMatrix);\n    };\n\n    Image.prototype.rawBBox = function rawBBox () {\n        return this._rect.bbox();\n    };\n\n    Image.prototype._containsPoint = function _containsPoint (point) {\n        return this._rect.containsPoint(point);\n    };\n\n    Image.prototype._hasFill = function _hasFill () {\n        return this.src();\n    };\n\n    Object.defineProperties( Image.prototype, prototypeAccessors );\n\n    return Image;\n}(withGeometry(Element$1, [ \"rect\" ])));\n\nvar traversable = function (TBase, childrenField) { return (\n    (function (TBase) {\n        function anonymous () {\n            TBase.apply(this, arguments);\n        }\n\n        extendStatic(anonymous, TBase);\n        anonymous.prototype = Object.create( TBase && TBase.prototype );\n        anonymous.prototype.constructor = anonymous;\n        anonymous.fn = anonymous.prototype;\n        anonymous.fn.init = anonymous.fn.constructor;\n\n        anonymous.prototype.traverse = function traverse (callback) {\n            var children = this[childrenField];\n\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n\n                if (child.traverse) {\n                    child.traverse(callback);\n                } else {\n                    callback(child);\n                }\n            }\n\n            return this;\n        };\n\n        return anonymous;\n    }(TBase))\n); };\n\nvar Group = (function (superclass) {\n    function Group(options) {\n        superclass.call(this, options);\n        this.children = [];\n    }\n\n    extendStatic(Group, superclass);\n    Group.prototype = Object.create( superclass && superclass.prototype );\n    Group.prototype.constructor = Group;\n    Group.fn = Group.prototype;\n    Group.fn.init = Group.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Group\";\n    };\n\n    Group.prototype.childrenChange = function childrenChange (action, items, index) {\n        this.trigger(\"childrenChange\",{\n            action: action,\n            items: items,\n            index: index\n        });\n    };\n\n    Group.prototype.append = function append$1 () {\n        append$1$1(this.children, arguments);\n        this._reparent(arguments, this);\n\n        this.childrenChange(\"add\", arguments);\n\n        return this;\n    };\n\n    Group.prototype.insert = function insert (index, element) {\n        this.children.splice(index, 0, element);\n        element.parent = this;\n\n        this.childrenChange(\"add\", [ element ], index);\n\n        return this;\n    };\n\n    Group.prototype.insertAt = function insertAt (element, index) {\n        return this.insert(index, element);\n    };\n\n    Group.prototype.remove = function remove (element) {\n        var index = this.children.indexOf(element);\n        if (index >= 0) {\n            this.children.splice(index, 1);\n            element.parent = null;\n            this.childrenChange(\"remove\", [ element ], index);\n        }\n\n        return this;\n    };\n\n    Group.prototype.removeAt = function removeAt (index) {\n        if (0 <= index && index < this.children.length) {\n            var element = this.children[index];\n            this.children.splice(index, 1);\n            element.parent = null;\n            this.childrenChange(\"remove\", [ element ], index);\n        }\n\n        return this;\n    };\n\n    Group.prototype.clear = function clear () {\n        var items = this.children;\n        this.children = [];\n        this._reparent(items, null);\n\n        this.childrenChange(\"remove\", items, 0);\n\n        return this;\n    };\n\n    Group.prototype.bbox = function bbox (transformation) {\n        return elementsBoundingBox(this.children, true, this.currentTransform(transformation));\n    };\n\n    Group.prototype.rawBBox = function rawBBox () {\n        return elementsBoundingBox(this.children, false);\n    };\n\n    Group.prototype._clippedBBox = function _clippedBBox (transformation) {\n        return elementsClippedBoundingBox(this.children, this.currentTransform(transformation));\n    };\n\n    Group.prototype.currentTransform = function currentTransform (transformation) {\n        return Element$1.prototype.currentTransform.call(this, transformation) || null;\n    };\n\n    Group.prototype.containsPoint = function containsPoint (point, parentTransform) {\n        if (this.visible()) {\n            var children = this.children;\n            var transform = this.currentTransform(parentTransform);\n            for (var idx = 0; idx < children.length; idx++) {\n                if (children[idx].containsPoint(point, transform)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    Group.prototype._reparent = function _reparent (elements, newParent) {\n        var this$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var child = elements[i];\n            var parent = child.parent;\n            if (parent && parent !== this$1 && parent.remove) {\n                parent.remove(child);\n            }\n\n            child.parent = newParent;\n        }\n    };\n\n    Object.defineProperties( Group.prototype, prototypeAccessors );\n\n    return Group;\n}(traversable(Element$1, \"children\")));\n\nfunction translateToPoint(point, bbox, element) {\n    var transofrm = element.transform() || transform$1();\n    var matrix = transofrm.matrix();\n    matrix.e += point.x - bbox.origin.x;\n    matrix.f += point.y - bbox.origin.y;\n\n    transofrm.matrix(matrix);\n    element.transform(transofrm);\n}\n\nfunction alignStart(size, rect, align, axis, sizeField) {\n    var start;\n    if (align === \"start\") {\n        start = rect.origin[axis];\n    } else if (align === \"end\") {\n        start = rect.origin[axis] + rect.size[sizeField] - size;\n    } else {\n        start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n    }\n\n    return start;\n}\n\nfunction alignStartReverse(size, rect, align, axis, sizeField) {\n    var start;\n    if (align === \"start\") {\n        start = rect.origin[axis] + rect.size[sizeField] - size;\n    } else if (align === \"end\") {\n        start = rect.origin[axis];\n    } else {\n        start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n    }\n\n    return start;\n}\n\nvar DEFAULT_OPTIONS = {\n    alignContent: \"start\",\n    justifyContent: \"start\",\n    alignItems: \"start\",\n    spacing: 0,\n    orientation: \"horizontal\",\n    lineSpacing: 0,\n    wrap: true,\n    revers: false\n};\n\nvar forEach = function (elements, callback) {\n    elements.forEach(callback);\n};\n\nvar forEachReverse = function (elements, callback) {\n    var length = elements.length;\n\n    for (var idx = length - 1; idx >= 0; idx--) {\n        callback(elements[idx], idx);\n    }\n};\n\nvar Layout = (function (Group$$1) {\n    function Layout(rect, options) {\n        Group$$1.call(this, $.extend({}, DEFAULT_OPTIONS, options));\n        this._rect = rect;\n        this._fieldMap = {};\n    }\n\n    extendStatic(Layout, Group$$1);\n    Layout.prototype = Object.create( Group$$1 && Group$$1.prototype );\n    Layout.prototype.constructor = Layout;\n    Layout.fn = Layout.prototype;\n    Layout.fn.init = Layout.fn.constructor;\n\n    Layout.prototype.rect = function rect (value) {\n        if (value) {\n            this._rect = value;\n            return this;\n        }\n\n        return this._rect;\n    };\n\n    Layout.prototype._initMap = function _initMap () {\n        var options = this.options;\n        var fieldMap = this._fieldMap;\n        if (options.orientation === \"horizontal\") {\n            fieldMap.sizeField = \"width\";\n            fieldMap.groupsSizeField = \"height\";\n            fieldMap.groupAxis = \"x\";\n            fieldMap.groupsAxis = \"y\";\n        } else {\n            fieldMap.sizeField = \"height\";\n            fieldMap.groupsSizeField = \"width\";\n            fieldMap.groupAxis = \"y\";\n            fieldMap.groupsAxis = \"x\";\n        }\n\n        if (options.reverse) {\n            this.forEach = forEachReverse;\n            this.justifyAlign = alignStartReverse;\n        } else {\n            this.forEach = forEach;\n            this.justifyAlign = alignStart;\n        }\n    };\n\n    Layout.prototype.reflow = function reflow () {\n        var this$1 = this;\n\n        if (!this._rect || this.children.length === 0) {\n            return;\n        }\n        this._initMap();\n\n        if (this.options.transform) {\n            this.transform(null);\n        }\n\n        var options = this.options;\n        var rect = this._rect;\n        var ref = this._initGroups();\n        var groups = ref.groups;\n        var groupsSize = ref.groupsSize;\n        var ref$1 = this._fieldMap;\n        var sizeField = ref$1.sizeField;\n        var groupsSizeField = ref$1.groupsSizeField;\n        var groupAxis = ref$1.groupAxis;\n        var groupsAxis = ref$1.groupsAxis;\n        var groupOrigin = new Point();\n        var elementOrigin = new Point();\n        var size = new Size();\n        var groupStart = alignStart(groupsSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n        var elementStart, group, groupBox;\n\n        var arrangeElements = function (bbox, idx) {\n            var element = group.elements[idx];\n\n            elementOrigin[groupAxis] = elementStart;\n            elementOrigin[groupsAxis] = alignStart(bbox.size[groupsSizeField], groupBox, options.alignItems, groupsAxis, groupsSizeField);\n            translateToPoint(elementOrigin, bbox, element);\n            elementStart += bbox.size[sizeField] + options.spacing;\n        };\n\n        for (var groupIdx = 0; groupIdx < groups.length; groupIdx++) {\n            group = groups[groupIdx];\n            groupOrigin[groupAxis] = elementStart = this$1.justifyAlign(group.size, rect, options.justifyContent, groupAxis, sizeField);\n            groupOrigin[groupsAxis] = groupStart;\n            size[sizeField] = group.size;\n            size[groupsSizeField] = group.lineSize;\n            groupBox = new Rect(groupOrigin, size);\n            this$1.forEach(group.bboxes, arrangeElements);\n\n            groupStart += group.lineSize + options.lineSpacing;\n        }\n\n        if (!options.wrap && group.size > rect.size[sizeField]) {\n            var scale = rect.size[sizeField] / groupBox.size[sizeField];\n            var scaledStart = groupBox.topLeft().scale(scale, scale);\n            var scaledSize = groupBox.size[groupsSizeField] * scale;\n            var newStart = alignStart(scaledSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n            var transform = transform$1();\n            if (groupAxis === \"x\") {\n                transform.translate(rect.origin.x - scaledStart.x, newStart - scaledStart.y);\n            } else {\n                transform.translate(newStart - scaledStart.x, rect.origin.y - scaledStart.y);\n            }\n            transform.scale(scale, scale);\n\n            this.transform(transform);\n        }\n    };\n\n    Layout.prototype._initGroups = function _initGroups () {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var lineSpacing = options.lineSpacing;\n        var wrap = options.wrap;\n        var spacing = options.spacing;\n        var sizeField = this._fieldMap.sizeField;\n        var group = this._newGroup();\n        var groups = [];\n        var addGroup = function() {\n            groups.push(group);\n            groupsSize += group.lineSize + lineSpacing;\n        };\n        var groupsSize = -lineSpacing;\n\n        for (var idx = 0; idx < children.length; idx++) {\n            var element = children[idx];\n            var bbox = children[idx].clippedBBox();\n            if (element.visible() && bbox) {\n                if (wrap && group.size + bbox.size[sizeField] + spacing > this$1._rect.size[sizeField]) {\n                    if (group.bboxes.length === 0) {\n                        this$1._addToGroup(group, bbox, element);\n                        addGroup();\n                        group = this$1._newGroup();\n                    } else {\n                        addGroup();\n                        group = this$1._newGroup();\n                        this$1._addToGroup(group, bbox, element);\n                    }\n                } else {\n                    this$1._addToGroup(group, bbox, element);\n                }\n            }\n        }\n\n        if (group.bboxes.length) {\n            addGroup();\n        }\n\n        return {\n            groups: groups,\n            groupsSize: groupsSize\n        };\n    };\n\n    Layout.prototype._addToGroup = function _addToGroup (group, bbox, element) {\n        group.size += bbox.size[this._fieldMap.sizeField] + this.options.spacing;\n        group.lineSize = Math.max(bbox.size[this._fieldMap.groupsSizeField], group.lineSize);\n        group.bboxes.push(bbox);\n        group.elements.push(element);\n    };\n\n    Layout.prototype._newGroup = function _newGroup () {\n        return {\n            lineSize: 0,\n            size: -this.options.spacing,\n            bboxes: [],\n            elements: []\n        };\n    };\n\n    return Layout;\n}(Group));\n\nvar Rect$2 = (function (superclass) {\n    function Rect$$1(geometry, options) {\n        if (geometry === void 0) { geometry = new Rect(); }\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.geometry(geometry);\n\n        if (!defined(this.options.stroke)) {\n            this.stroke(\"#000\");\n        }\n    }\n\n    extendStatic(Rect$$1, superclass);\n    Rect$$1.prototype = Object.create( superclass && superclass.prototype );\n    Rect$$1.prototype.constructor = Rect$$1;\n    Rect$$1.fn = Rect$$1.prototype;\n    Rect$$1.fn.init = Rect$$1.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Rect\";\n    };\n\n    Rect$$1.prototype._bbox = function _bbox (matrix) {\n        return this._geometry.bbox(matrix);\n    };\n\n    Rect$$1.prototype.rawBBox = function rawBBox () {\n        return this._geometry.bbox();\n    };\n\n    Rect$$1.prototype._containsPoint = function _containsPoint (point) {\n        return this._geometry.containsPoint(point);\n    };\n\n    Rect$$1.prototype._isOnPath = function _isOnPath (point) {\n        return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n    };\n\n    Object.defineProperties( Rect$$1.prototype, prototypeAccessors );\n\n    return Rect$$1;\n}(paintable(measurable(withGeometry(Element$1)))));\n\nfunction alignElements(elements, rect, alignment, axis, sizeField) {\n    for (var idx = 0; idx < elements.length; idx++) {\n        var bbox = elements[idx].clippedBBox();\n        if (bbox) {\n            var point = bbox.origin.clone();\n            point[axis] = alignStart(bbox.size[sizeField], rect, alignment || \"start\", axis, sizeField);\n            translateToPoint(point, bbox, elements[idx]);\n        }\n    }\n}\n\nfunction align(elements, rect, alignment) {\n    alignElements(elements, rect, alignment, \"x\", \"width\");\n}\n\nfunction vAlign(elements, rect, alignment) {\n    alignElements(elements, rect, alignment, \"y\", \"height\");\n}\n\nfunction stackElements(elements, stackAxis, otherAxis, sizeField) {\n    if (elements.length > 1) {\n        var origin = new Point();\n        var previousBBox = elements[0].bbox;\n\n        for (var idx = 1; idx < elements.length; idx++) {\n            var element = elements[idx].element;\n            var bbox = elements[idx].bbox;\n            origin[stackAxis] = previousBBox.origin[stackAxis] + previousBBox.size[sizeField];\n            origin[otherAxis] = bbox.origin[otherAxis];\n            translateToPoint(origin, bbox, element);\n            bbox.origin[stackAxis] = origin[stackAxis];\n            previousBBox = bbox;\n        }\n    }\n}\n\nfunction createStackElements(elements) {\n    var stackElements = [];\n\n    for (var idx = 0; idx < elements.length; idx++) {\n        var element = elements[idx];\n        var bbox = element.clippedBBox();\n        if (bbox) {\n            stackElements.push({\n                element: element,\n                bbox: bbox\n            });\n        }\n    }\n\n    return stackElements;\n}\n\nfunction stack(elements) {\n    stackElements(createStackElements(elements), \"x\", \"y\", \"width\");\n}\n\nfunction vStack(elements) {\n    stackElements(createStackElements(elements), \"y\", \"x\", \"height\");\n}\n\nfunction getStacks(elements, rect, sizeField) {\n    var maxSize = rect.size[sizeField];\n    var stacks = [];\n    var stack = [];\n    var stackSize = 0;\n    var element, bbox;\n\n    var addElementToStack = function() {\n        stack.push({\n            element: element,\n            bbox: bbox\n        });\n    };\n\n    for (var idx = 0; idx < elements.length; idx++) {\n        element = elements[idx];\n\n        bbox = element.clippedBBox();\n        if (bbox) {\n            var size = bbox.size[sizeField];\n            if (stackSize + size > maxSize) {\n                if (stack.length) {\n                    stacks.push(stack);\n                    stack = [];\n                    addElementToStack();\n                    stackSize = size;\n                } else {\n                    addElementToStack();\n                    stacks.push(stack);\n                    stack = [];\n                    stackSize = 0;\n                }\n            } else {\n                addElementToStack();\n                stackSize += size;\n            }\n        }\n    }\n\n    if (stack.length) {\n        stacks.push(stack);\n    }\n\n    return stacks;\n}\n\nfunction wrapElements(elements, rect, axis, otherAxis, sizeField) {\n    var stacks = getStacks(elements, rect, sizeField);\n    var origin = rect.origin.clone();\n    var result = [];\n\n    for (var idx = 0; idx < stacks.length; idx++) {\n        var stack = stacks[idx];\n        var startElement = stack[0];\n        origin[otherAxis] = startElement.bbox.origin[otherAxis];\n        translateToPoint(origin, startElement.bbox, startElement.element);\n        startElement.bbox.origin[axis] = origin[axis];\n        stackElements(stack, axis, otherAxis, sizeField);\n        result.push([]);\n        for (var elementIdx = 0; elementIdx < stack.length; elementIdx++) {\n            result[idx].push(stack[elementIdx].element);\n        }\n    }\n    return result;\n}\n\nfunction wrap(elements, rect) {\n    return wrapElements(elements, rect, \"x\", \"y\", \"width\");\n}\n\nfunction vWrap(elements, rect) {\n    return wrapElements(elements, rect, \"y\", \"x\", \"height\");\n}\n\nfunction fit(element, rect) {\n    var bbox = element.clippedBBox();\n    if (bbox) {\n        var elementSize = bbox.size;\n        var rectSize = rect.size;\n        if (rectSize.width < elementSize.width || rectSize.height < elementSize.height) {\n            var scale = Math.min(rectSize.width / elementSize.width, rectSize.height / elementSize.height);\n            var transform = element.transform() || transform$1();\n            transform.scale(scale, scale);\n            element.transform(transform);\n        }\n    }\n}\n\nvar StopsArray = (function (ElementsArray$$1) {\n    function StopsArray () {\n        ElementsArray$$1.apply(this, arguments);\n    }\n\n    extendStatic(StopsArray, ElementsArray$$1);\n    StopsArray.prototype = Object.create( ElementsArray$$1 && ElementsArray$$1.prototype );\n    StopsArray.prototype.constructor = StopsArray;\n    StopsArray.fn = StopsArray.prototype;\n    StopsArray.fn.init = StopsArray.fn.constructor;\n\n    StopsArray.prototype._change = function _change () {\n        this.optionsChange({\n            field: \"stops\"\n        });\n    };\n\n    return StopsArray;\n}(ElementsArray));\n\nfunction optionsAccessor(name) {\n    return function(value) {\n        if (defined(value)) {\n            this.options.set(name, value);\n            return this;\n        }\n\n        return this.options.get(name);\n    };\n}\n\nfunction defineOptionsAccessors(fn, names) {\n    for (var i = 0; i < names.length; i++) {\n        fn[names[i]] = optionsAccessor(names[i]);\n    }\n}\n\nvar withOptions = function (TBase, names) {\n    var result = (function (TBase) {\n        function result () {\n            TBase.apply(this, arguments);\n        }extendStatic(result, TBase);\n        result.prototype = Object.create( TBase && TBase.prototype );\n        result.prototype.constructor = result;\n        result.fn = result.prototype;\n        result.fn.init = result.fn.constructor;\n\n        return result;\n    }(TBase));\n    defineOptionsAccessors(result.prototype, names);\n\n    return result;\n};\n\nvar options = [ \"offset\", \"color\", \"opacity\" ];\n\nvar GradientStop = (function (superclass) {\n    function GradientStop(offset, color, opacity) {\n        superclass.call(this);\n\n        this.options = new OptionsStore({\n            offset: offset,\n            color: color,\n            opacity: defined(opacity) ? opacity : 1\n        });\n\n        this.options.addObserver(this);\n    }\n\n    extendStatic(GradientStop, superclass);\n    GradientStop.prototype = Object.create( superclass && superclass.prototype );\n    GradientStop.prototype.constructor = GradientStop;\n    GradientStop.fn = GradientStop.prototype;\n    GradientStop.fn.init = GradientStop.fn.constructor;\n\n    GradientStop.create = function create (arg) {\n        if (defined(arg)) {\n            var stop;\n            if (arg instanceof GradientStop) {\n                stop = arg;\n            } else if (arg.length > 1) {\n                stop = new GradientStop(arg[0], arg[1], arg[2]);\n            } else {\n                stop = new GradientStop(arg.offset, arg.color, arg.opacity);\n            }\n\n            return stop;\n        }\n    };\n\n    return GradientStop;\n}(withOptions(HasObservers, options)));\n\nvar Gradient = (function (HasObservers$$1) {\n    function Gradient(options) {\n        if (options === void 0) { options = {}; }\n\n        HasObservers$$1.call(this);\n\n        this.stops = new StopsArray(this._createStops(options.stops));\n        this.stops.addObserver(this);\n        this._userSpace = options.userSpace;\n        this.id = definitionId();\n    }\n\n    extendStatic(Gradient, HasObservers$$1);\n    Gradient.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n    Gradient.prototype.constructor = Gradient;\n    Gradient.fn = Gradient.prototype;\n    Gradient.fn.init = Gradient.fn.constructor;\n\n    var prototypeAccessors = { nodeType: {} };\n\n    prototypeAccessors.nodeType.get = function () {\n        return \"Gradient\";\n    };\n\n    Gradient.prototype.userSpace = function userSpace (value) {\n        if (defined(value)) {\n            this._userSpace = value;\n            this.optionsChange();\n            return this;\n        }\n\n        return this._userSpace;\n    };\n\n    Gradient.prototype._createStops = function _createStops (stops) {\n        if (stops === void 0) { stops = []; }\n\n        var result = [];\n        for (var idx = 0; idx < stops.length; idx++) {\n            result.push(GradientStop.create(stops[idx]));\n        }\n\n        return result;\n    };\n\n    Gradient.prototype.addStop = function addStop (offset, color, opacity) {\n        this.stops.push(new GradientStop(offset, color, opacity));\n    };\n\n    Gradient.prototype.removeStop = function removeStop (stop) {\n        var index = this.stops.indexOf(stop);\n        if (index >= 0) {\n            this.stops.splice(index, 1);\n        }\n    };\n\n    Gradient.prototype.optionsChange = function optionsChange (e) {\n        this.trigger(\"optionsChange\", {\n            field: \"gradient\" + (e ? \".\" + e.field : \"\"),\n            value: this\n        });\n    };\n\n    Gradient.prototype.geometryChange = function geometryChange () {\n        this.optionsChange();\n    };\n\n    Object.defineProperties( Gradient.prototype, prototypeAccessors );\n\n    return Gradient;\n}(HasObservers));\n\nvar points$1 = [ \"start\", \"end\" ];\n\nvar LinearGradient = (function (superclass) {\n    function LinearGradient(options) {\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.start(options.start || new Point());\n        this.end(options.end || new Point(1, 0));\n    }\n\n    extendStatic(LinearGradient, superclass);\n    LinearGradient.prototype = Object.create( superclass && superclass.prototype );\n    LinearGradient.prototype.constructor = LinearGradient;\n    LinearGradient.fn = LinearGradient.prototype;\n    LinearGradient.fn.init = LinearGradient.fn.constructor;\n\n    return LinearGradient;\n}(withPoints(Gradient, points$1)));\n\nvar RadialGradient = (function (superclass) {\n    function RadialGradient(options) {\n        if (options === void 0) { options = {}; }\n\n        superclass.call(this, options);\n\n        this.center(options.center || new Point());\n        this._radius = defined(options.radius) ? options.radius : 1;\n        this._fallbackFill = options.fallbackFill;\n    }\n\n    extendStatic(RadialGradient, superclass);\n    RadialGradient.prototype = Object.create( superclass && superclass.prototype );\n    RadialGradient.prototype.constructor = RadialGradient;\n    RadialGradient.fn = RadialGradient.prototype;\n    RadialGradient.fn.init = RadialGradient.fn.constructor;\n\n    RadialGradient.prototype.radius = function radius (value) {\n        if (defined(value)) {\n            this._radius = value;\n            this.geometryChange();\n            return this;\n        }\n\n        return this._radius;\n    };\n\n    RadialGradient.prototype.fallbackFill = function fallbackFill (value) {\n        if (defined(value)) {\n            this._fallbackFill = value;\n            this.optionsChange();\n            return this;\n        }\n\n        return this._fallbackFill;\n    };\n\n    return RadialGradient;\n}(withPoints(Gradient, [ \"center\" ])));\n\nfunction swing(position) {\n    return 0.5 - Math.cos(position * Math.PI) / 2;\n}\n\nfunction linear(position) {\n    return position;\n}\n\nfunction easeOutElastic(position, time, start, diff) {\n    var s = 1.70158,\n        p = 0,\n        a = diff;\n\n    if (position === 0) {\n        return start;\n    }\n\n    if (position === 1) {\n        return start + diff;\n    }\n\n    if (!p) {\n        p = 0.5;\n    }\n\n    if (a < Math.abs(diff)) {\n        a = diff;\n        s = p / 4;\n    } else {\n        s = p / (2 * Math.PI) * Math.asin(diff / a);\n    }\n\n    return a * Math.pow(2, -10 * position) *\n           Math.sin((Number(position) - s) * (1.1 * Math.PI) / p) + diff + start;\n}\n\nvar easingFunctions = {\n\tswing: swing,\n\tlinear: linear,\n\teaseOutElastic: easeOutElastic\n};\n\nvar instance;\n\nvar AnimationFactory = (function (Class$$1) {\n    function AnimationFactory() {\n        Class$$1.call(this);\n\n        this._items = [];\n    }\n\n    extendStatic(AnimationFactory, Class$$1);\n    AnimationFactory.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    AnimationFactory.prototype.constructor = AnimationFactory;\n    AnimationFactory.fn = AnimationFactory.prototype;\n    AnimationFactory.fn.init = AnimationFactory.fn.constructor;\n\n    var staticAccessors = { current: {} };\n\n    staticAccessors.current.get = function () {\n        if (!instance) {\n            instance = new AnimationFactory();\n        }\n\n        return instance;\n    };\n\n    AnimationFactory.prototype.register = function register (name, type) {\n        this._items.push({\n            name: name,\n            type: type\n        });\n    };\n\n    AnimationFactory.prototype.create = function create (element, options) {\n        var items = this._items;\n        var match;\n\n        if (options && options.type) {\n            var type = options.type.toLowerCase();\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].name.toLowerCase() === type) {\n                    match = items[i];\n                    break;\n                }\n            }\n        }\n\n        if (match) {\n            return new match.type(element, options);\n        }\n    };\n\n    Object.defineProperties( AnimationFactory, staticAccessors );\n\n    return AnimationFactory;\n}(Class));\n\nvar Animation = (function (Class$$1) {\n    function Animation(element, options) {\n        Class$$1.call(this);\n\n        this.options = $.extend({}, this.options, options);\n        this.element = element;\n    }\n\n    extendStatic(Animation, Class$$1);\n    Animation.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    Animation.prototype.constructor = Animation;\n    Animation.fn = Animation.prototype;\n    Animation.fn.init = Animation.fn.constructor;\n\n    var prototypeAccessors = { options: {} };\n\n    Animation.create = function create (type, element, options) {\n        return AnimationFactory.current.create(type, element, options);\n    };\n\n    prototypeAccessors.options.get = function () {\n        return this._options || {\n            duration: 500,\n            easing: \"swing\"\n        };\n    };\n\n    prototypeAccessors.options.set = function (value) {\n        this._options = value;\n    };\n\n    Animation.prototype.setup = function setup () {};\n    Animation.prototype.step = function step () {};\n\n    Animation.prototype.play = function play () {\n        var this$1 = this;\n\n        var options = this.options;\n        var duration = options.duration;\n        var delay = options.delay; if (delay === void 0) { delay = 0; }\n        var easing = easingFunctions[options.easing];\n        var start = now() + delay;\n        var finish = start + duration;\n\n        if (duration === 0) {\n            this.step(1);\n            this.abort();\n        } else {\n            setTimeout(function () {\n                var loop = function () {\n                    if (this$1._stopped) {\n                        return;\n                    }\n\n                    var wallTime = now();\n\n                    var time = limitValue(wallTime - start, 0, duration);\n                    var position = time / duration;\n                    var easingPosition = easing(position, time, 0, 1, duration);\n\n                    this$1.step(easingPosition);\n\n                    if (wallTime < finish) {\n                        kendo.animationFrame(loop);\n                    } else {\n                        this$1.abort();\n                    }\n                };\n\n                loop();\n            }, delay);\n        }\n    };\n\n    Animation.prototype.abort = function abort () {\n        this._stopped = true;\n    };\n\n    Animation.prototype.destroy = function destroy () {\n        this.abort();\n    };\n\n    Object.defineProperties( Animation.prototype, prototypeAccessors );\n\n    return Animation;\n}(Class));\n\nvar instance$1;\n\nvar PathParser = (function (Class$$1) {\n    function PathParser () {\n        Class$$1.apply(this, arguments);\n    }\n\n    extendStatic(PathParser, Class$$1);\n    PathParser.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    PathParser.prototype.constructor = PathParser;\n    PathParser.fn = PathParser.prototype;\n    PathParser.fn.init = PathParser.fn.constructor;\n\n    var staticAccessors = { current: {} };\n\n    staticAccessors.current.get = function () {\n        if (!instance$1) {\n            instance$1 = new PathParser();\n        }\n\n        return instance$1;\n    };\n\n    PathParser.prototype.parse = function parse (str, options) {\n        var multiPath = new MultiPath(options);\n        return parsePath(multiPath, str);\n    };\n\n    Object.defineProperties( PathParser, staticAccessors );\n\n    return PathParser;\n}(Class));\n\nvar BaseNode = (function (Class$$1) {\n    function BaseNode(srcElement) {\n        Class$$1.call(this);\n\n        this.childNodes = [];\n        this.parent = null;\n\n        if (srcElement) {\n            this.srcElement = srcElement;\n            this.observe();\n        }\n    }\n\n    extendStatic(BaseNode, Class$$1);\n    BaseNode.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    BaseNode.prototype.constructor = BaseNode;\n    BaseNode.fn = BaseNode.prototype;\n    BaseNode.fn.init = BaseNode.fn.constructor;\n\n    BaseNode.prototype.destroy = function destroy () {\n        var this$1 = this;\n\n        if (this.srcElement) {\n            this.srcElement.removeObserver(this);\n        }\n\n        var children = this.childNodes;\n        for (var i = 0; i < children.length; i++) {\n            this$1.childNodes[i].destroy();\n        }\n\n        this.parent = null;\n    };\n\n    BaseNode.prototype.load = function load () {};\n\n    BaseNode.prototype.observe = function observe () {\n        if (this.srcElement) {\n            this.srcElement.addObserver(this);\n        }\n    };\n\n    BaseNode.prototype.append = function append (node) {\n        this.childNodes.push(node);\n        node.parent = this;\n    };\n\n    BaseNode.prototype.insertAt = function insertAt (node, pos) {\n        this.childNodes.splice(pos, 0, node);\n        node.parent = this;\n    };\n\n    BaseNode.prototype.remove = function remove (index, count) {\n        var this$1 = this;\n\n        var end = index + count;\n        for (var i = index; i < end; i++) {\n            this$1.childNodes[i].removeSelf();\n        }\n        this.childNodes.splice(index, count);\n    };\n\n    BaseNode.prototype.removeSelf = function removeSelf () {\n        this.clear();\n        this.destroy();\n    };\n\n    BaseNode.prototype.clear = function clear () {\n        this.remove(0, this.childNodes.length);\n    };\n\n    BaseNode.prototype.invalidate = function invalidate () {\n        if (this.parent) {\n            this.parent.invalidate();\n        }\n    };\n\n    BaseNode.prototype.geometryChange = function geometryChange () {\n        this.invalidate();\n    };\n\n    BaseNode.prototype.optionsChange = function optionsChange () {\n        this.invalidate();\n    };\n\n    BaseNode.prototype.childrenChange = function childrenChange (e) {\n        if (e.action === \"add\") {\n            this.load(e.items, e.index);\n        } else if (e.action === \"remove\") {\n            this.remove(e.index, e.items.length);\n        }\n\n        this.invalidate();\n    };\n\n    return BaseNode;\n}(Class));\n\nvar events = [\n    \"click\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"mousemove\",\n    \"resize\"\n];\n\nvar Surface$2 = (function (Observable$$1) {\n    function Surface(element, options) {\n        Observable$$1.call(this);\n\n        this.options = $.extend({}, options);\n        this.element = element;\n        this.element._kendoExportVisual = this.exportVisual.bind(this);\n\n        this._click = this._handler(\"click\");\n        this._mouseenter = this._handler(\"mouseenter\");\n        this._mouseleave = this._handler(\"mouseleave\");\n        this._mousemove = this._handler(\"mousemove\");\n\n        this._visual = new Group();\n\n        elementSize(element, this.options);\n\n        this.bind(events, this.options);\n\n        this._enableTracking();\n    }\n\n    extendStatic(Surface, Observable$$1);\n    Surface.prototype = Object.create( Observable$$1 && Observable$$1.prototype );\n    Surface.prototype.constructor = Surface;\n    Surface.fn = Surface.prototype;\n    Surface.fn.init = Surface.fn.constructor;\n\n    Surface.prototype.draw = function draw (element) {\n        this._visual.children.push(element);\n    };\n\n    Surface.prototype.clear = function clear () {\n        this._visual.children = [];\n    };\n\n    Surface.prototype.destroy = function destroy () {\n        this._visual = null;\n        this.element._kendoExportVisual = null;\n        this.unbind();\n    };\n\n    Surface.prototype.eventTarget = function eventTarget (e) {\n        var this$1 = this;\n\n        var domNode = eventElement(e);\n        var node;\n\n        while (!node && domNode) {\n            node = domNode._kendoNode;\n            if (domNode === this$1.element) {\n                break;\n            }\n\n            domNode = domNode.parentElement;\n        }\n\n        if (node) {\n            return node.srcElement;\n        }\n    };\n\n    Surface.prototype.exportVisual = function exportVisual () {\n        return this._visual;\n    };\n\n    Surface.prototype.getSize = function getSize () {\n        return elementSize(this.element);\n    };\n\n    Surface.prototype.currentSize = function currentSize (size) {\n        if (size) {\n            this._size = size;\n        } else {\n            return this._size;\n        }\n    };\n\n    Surface.prototype.setSize = function setSize (size) {\n        elementSize(this.element, size);\n\n        this.currentSize(size);\n        this._resize();\n    };\n\n    Surface.prototype.resize = function resize (force) {\n        var size = this.getSize();\n        var currentSize = this.currentSize();\n\n        if (force || (size.width > 0 || size.height > 0) && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n            this.currentSize(size);\n            this._resize(size, force);\n            this.trigger(\"resize\", size);\n        }\n    };\n\n    Surface.prototype.size = function size (value) {\n        if (!value) {\n            return this.getSize();\n        }\n\n        this.setSize(value);\n    };\n\n    Surface.prototype.suspendTracking = function suspendTracking () {\n        this._suspendedTracking = true;\n    };\n\n    Surface.prototype.resumeTracking = function resumeTracking () {\n        this._suspendedTracking = false;\n    };\n\n    Surface.prototype._enableTracking = function _enableTracking () {};\n\n    Surface.prototype._resize = function _resize () {};\n\n    Surface.prototype._handler = function _handler (eventName) {\n        var this$1 = this;\n\n        return function (e) {\n            var node = this$1.eventTarget(e);\n            if (node && !this$1._suspendedTracking) {\n                this$1.trigger(eventName, {\n                    element: node,\n                    originalEvent: e,\n                    type: eventName\n                });\n            }\n        };\n    };\n\n    Surface.prototype._elementOffset = function _elementOffset () {\n        var element = this.element;\n        var padding = elementPadding(element);\n        var ref = elementOffset(element);\n        var left = ref.left;\n        var top = ref.top;\n\n        return {\n            left: left + padding.left,\n            top: top + padding.top\n        };\n    };\n\n    Surface.prototype._surfacePoint = function _surfacePoint (e) {\n        var offset = this._elementOffset();\n        var coord = eventCoordinates(e);\n        var x = coord.x - offset.left;\n        var y = coord.y - offset.top;\n\n        var inverseTransform = elementScale(this.element).invert();\n        var point = new Point(\n            x,\n            y\n        ).transform(inverseTransform);\n\n        return point;\n    };\n\n    return Surface;\n}(kendo.Observable));\n\nfunction renderAttr(name, value) {\n    return (defined(value) && value !== null) ? (\" \" + name + \"=\\\"\" + value + \"\\\" \") : \"\";\n}\n\nfunction renderAllAttr(attrs) {\n    var output = \"\";\n    for (var i = 0; i < attrs.length; i++) {\n        output += renderAttr(attrs[i][0], attrs[i][1]);\n    }\n\n    return output;\n}\n\nfunction renderStyle(attrs) {\n    var output = \"\";\n    for (var i = 0; i < attrs.length; i++) {\n        var value = attrs[i][1];\n        if (defined(value)) {\n            output += attrs[i][0] + \":\" + value + \";\";\n        }\n    }\n\n    if (output !== \"\") {\n        return output;\n    }\n}\n\nvar NODE_MAP = {};\n\nvar SVG_NS = \"http://www.w3.org/2000/svg\";\nvar NONE = \"none\";\n\nvar renderSVG = function(container, svg) {\n    container.innerHTML = svg;\n};\n\nif (typeof document !== \"undefined\") {\n    var testFragment = \"<svg xmlns='\" + SVG_NS + \"'></svg>\";\n    var testContainer = document.createElement(\"div\");\n    var hasParser = typeof DOMParser !== \"undefined\";\n\n    testContainer.innerHTML = testFragment;\n\n    if (hasParser && testContainer.firstChild.namespaceURI !== SVG_NS) {\n        renderSVG = function(container, svg) {\n            var parser = new DOMParser();\n            var chartDoc = parser.parseFromString(svg, \"text/xml\");\n            var importedDoc = document.adoptNode(chartDoc.documentElement);\n\n            container.innerHTML = \"\";\n            container.appendChild(importedDoc);\n        };\n    }\n}\n\nvar renderSVG$1 = renderSVG;\n\nvar TRANSFORM = \"transform\";\nvar DefinitionMap = {\n    clip: \"clip-path\",\n    fill: \"fill\"\n};\n\nfunction isDefinition(type, value) {\n    return type === \"clip\" || (type === \"fill\" && (!value || value.nodeType === \"Gradient\"));\n}\n\nfunction baseUrl() {\n    var base = document.getElementsByTagName(\"base\")[0];\n    var href = document.location.href;\n    var url = \"\";\n\n    if (base && !(supportBrowser || {}).msie) {\n        var hashIndex = href.indexOf(\"#\");\n        if (hashIndex !== -1) {\n            href = href.substring(0, hashIndex);\n        }\n\n        url = href;\n    }\n\n    return url;\n}\n\nvar Node = (function (BaseNode$$1) {\n    function Node(srcElement, options) {\n        BaseNode$$1.call(this, srcElement);\n        this.definitions = {};\n\n        this.options = options;\n    }\n\n    extendStatic(Node, BaseNode$$1);\n    Node.prototype = Object.create( BaseNode$$1 && BaseNode$$1.prototype );\n    Node.prototype.constructor = Node;\n    Node.fn = Node.prototype;\n    Node.fn.init = Node.fn.constructor;\n\n    Node.prototype.destroy = function destroy () {\n        if (this.element) {\n            this.element._kendoNode = null;\n            this.element = null;\n        }\n\n        this.clearDefinitions();\n        BaseNode$$1.prototype.destroy.call(this);\n    };\n\n    Node.prototype.load = function load (elements, pos) {\n        var this$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var srcElement = elements[i];\n            var children = srcElement.children;\n\n            var childNode = new NODE_MAP[srcElement.nodeType](srcElement, this$1.options);\n\n            if (defined(pos)) {\n                this$1.insertAt(childNode, pos);\n            } else {\n                this$1.append(childNode);\n            }\n\n            childNode.createDefinitions();\n\n            if (children && children.length > 0) {\n                childNode.load(children);\n            }\n\n            var element = this$1.element;\n            if (element) {\n                childNode.attachTo(element, pos);\n            }\n        }\n    };\n\n    Node.prototype.root = function root () {\n        var root = this;\n\n        while (root.parent) {\n            root = root.parent;\n        }\n\n        return root;\n    };\n\n    Node.prototype.attachTo = function attachTo (domElement, pos) {\n        var container = document.createElement(\"div\");\n        renderSVG$1(container,\n            \"<svg xmlns='\" + SVG_NS + \"' version='1.1'>\" +\n                this.render() +\n            \"</svg>\"\n        );\n\n        var element = container.firstChild.firstChild;\n        if (element) {\n            if (defined(pos)) {\n                domElement.insertBefore(element, domElement.childNodes[pos] || null);\n            } else {\n                domElement.appendChild(element);\n            }\n            this.setElement(element);\n        }\n    };\n\n    Node.prototype.setElement = function setElement (element) {\n        if (this.element) {\n            this.element._kendoNode = null;\n        }\n\n        this.element = element;\n        this.element._kendoNode = this;\n\n        var nodes = this.childNodes;\n        for (var i = 0; i < nodes.length; i++) {\n            var childElement = element.childNodes[i];\n            nodes[i].setElement(childElement);\n        }\n    };\n\n    Node.prototype.clear = function clear () {\n        this.clearDefinitions();\n\n        if (this.element) {\n            this.element.innerHTML = \"\";\n        }\n\n        var children = this.childNodes;\n        for (var i = 0; i < children.length; i++) {\n            children[i].destroy();\n        }\n\n        this.childNodes = [];\n    };\n\n    Node.prototype.removeSelf = function removeSelf () {\n        if (this.element) {\n            var parentNode = this.element.parentNode;\n            if (parentNode) {\n                parentNode.removeChild(this.element);\n            }\n            this.element = null;\n        }\n\n        BaseNode$$1.prototype.removeSelf.call(this);\n    };\n\n    Node.prototype.template = function template () {\n        return this.renderChildren();\n    };\n\n    Node.prototype.render = function render () {\n        return this.template();\n    };\n\n    Node.prototype.renderChildren = function renderChildren () {\n        var nodes = this.childNodes;\n        var output = \"\";\n\n        for (var i = 0; i < nodes.length; i++) {\n            output += nodes[i].render();\n        }\n\n        return output;\n    };\n\n    Node.prototype.optionsChange = function optionsChange (e) {\n        var field = e.field;\n        var value = e.value;\n\n        if (field === \"visible\") {\n            this.css(\"display\", value ? \"\" : NONE);\n        } else if (DefinitionMap[field] && isDefinition(field, value)) {\n            this.updateDefinition(field, value);\n        } else if (field === \"opacity\") {\n            this.attr(\"opacity\", value);\n        } else if (field === \"cursor\") {\n            this.css(\"cursor\", value);\n        } else if (field === \"id\") {\n            if (value) {\n                this.attr(\"id\", value);\n            } else {\n                this.removeAttr(\"id\");\n            }\n        }\n\n        BaseNode$$1.prototype.optionsChange.call(this, e);\n    };\n\n    Node.prototype.attr = function attr (name, value) {\n        if (this.element) {\n            this.element.setAttribute(name, value);\n        }\n    };\n\n    Node.prototype.allAttr = function allAttr (attrs) {\n        var this$1 = this;\n\n        for (var i = 0; i < attrs.length; i++) {\n            this$1.attr(attrs[i][0], attrs[i][1]);\n        }\n    };\n\n    Node.prototype.css = function css (name, value) {\n        if (this.element) {\n            this.element.style[name] = value;\n        }\n    };\n\n    Node.prototype.allCss = function allCss (styles) {\n        var this$1 = this;\n\n        for (var i = 0; i < styles.length; i++) {\n            this$1.css(styles[i][0], styles[i][1]);\n        }\n    };\n\n    Node.prototype.removeAttr = function removeAttr (name) {\n        if (this.element) {\n            this.element.removeAttribute(name);\n        }\n    };\n\n    Node.prototype.mapTransform = function mapTransform (transform) {\n        var attrs = [];\n        if (transform) {\n            attrs.push([\n                TRANSFORM,\n                \"matrix(\" + transform.matrix().toString(6) + \")\"\n            ]);\n        }\n\n        return attrs;\n    };\n\n    Node.prototype.renderTransform = function renderTransform () {\n        return renderAllAttr(\n            this.mapTransform(this.srcElement.transform())\n        );\n    };\n\n    Node.prototype.transformChange = function transformChange (value) {\n        if (value) {\n            this.allAttr(this.mapTransform(value));\n        } else {\n            this.removeAttr(TRANSFORM);\n        }\n    };\n\n    Node.prototype.mapStyle = function mapStyle () {\n        var options = this.srcElement.options;\n        var style = [ [ \"cursor\", options.cursor ] ];\n\n        if (options.visible === false) {\n            style.push([ \"display\", NONE ]);\n        }\n\n        return style;\n    };\n\n    Node.prototype.renderStyle = function renderStyle$1 () {\n        return renderAttr(\"style\", renderStyle(this.mapStyle(true)));\n    };\n\n    Node.prototype.renderOpacity = function renderOpacity () {\n        return renderAttr(\"opacity\", this.srcElement.options.opacity);\n    };\n\n    Node.prototype.renderId = function renderId () {\n        return renderAttr(\"id\", this.srcElement.options.id);\n    };\n\n    Node.prototype.createDefinitions = function createDefinitions () {\n        var srcElement = this.srcElement;\n        var definitions = this.definitions;\n        if (srcElement) {\n            var options = srcElement.options;\n            var hasDefinitions;\n\n            for (var field in DefinitionMap) {\n                var definition = options.get(field);\n                if (definition && isDefinition(field, definition)) {\n                    definitions[field] = definition;\n                    hasDefinitions = true;\n                }\n            }\n            if (hasDefinitions) {\n                this.definitionChange({\n                    action: \"add\",\n                    definitions: definitions\n                });\n            }\n        }\n    };\n\n    Node.prototype.definitionChange = function definitionChange (e) {\n        if (this.parent) {\n            this.parent.definitionChange(e);\n        }\n    };\n\n    Node.prototype.updateDefinition = function updateDefinition (type, value) {\n        var definitions = this.definitions;\n        var current = definitions[type];\n        var attr = DefinitionMap[type];\n        var definition = {};\n        if (current) {\n            definition[type] = current;\n            this.definitionChange({\n                action: \"remove\",\n                definitions: definition\n            });\n            delete definitions[type];\n        }\n\n        if (!value) {\n            if (current) {\n                this.removeAttr(attr);\n            }\n        } else {\n            definition[type] = value;\n            this.definitionChange({\n                action: \"add\",\n                definitions: definition\n            });\n            definitions[type] = value;\n            this.attr(attr, this.refUrl(value.id));\n        }\n    };\n\n    Node.prototype.clearDefinitions = function clearDefinitions () {\n        var definitions = this.definitions;\n\n        this.definitionChange({\n            action: \"remove\",\n            definitions: definitions\n        });\n        this.definitions = {};\n    };\n\n    Node.prototype.renderDefinitions = function renderDefinitions () {\n        return renderAllAttr(this.mapDefinitions());\n    };\n\n    Node.prototype.mapDefinitions = function mapDefinitions () {\n        var this$1 = this;\n\n        var definitions = this.definitions;\n        var attrs = [];\n\n        for (var field in definitions) {\n            attrs.push([ DefinitionMap[field], this$1.refUrl(definitions[field].id) ]);\n        }\n\n        return attrs;\n    };\n\n    Node.prototype.refUrl = function refUrl (id) {\n        var skipBaseHref = (this.options || {}).skipBaseHref;\n        var baseHref = this.baseUrl().replace(/'/g, \"\\\\'\");\n        var base = skipBaseHref ? '' : baseHref;\n        return (\"url(\" + base + \"#\" + id + \")\");\n    };\n\n    Node.prototype.baseUrl = function baseUrl$1 () {\n        return baseUrl();\n    };\n\n    return Node;\n}(BaseNode));\n\nvar GradientStopNode = (function (Node$$1) {\n    function GradientStopNode () {\n        Node$$1.apply(this, arguments);\n    }\n\n    extendStatic(GradientStopNode, Node$$1);\n    GradientStopNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    GradientStopNode.prototype.constructor = GradientStopNode;\n    GradientStopNode.fn = GradientStopNode.prototype;\n    GradientStopNode.fn.init = GradientStopNode.fn.constructor;\n\n    GradientStopNode.prototype.template = function template () {\n        return (\"<stop \" + (this.renderOffset()) + \" \" + (this.renderStyle()) + \" />\");\n    };\n\n    GradientStopNode.prototype.renderOffset = function renderOffset () {\n        return renderAttr(\"offset\", this.srcElement.offset());\n    };\n\n    GradientStopNode.prototype.mapStyle = function mapStyle () {\n        var srcElement = this.srcElement;\n        return [\n            [ \"stop-color\", srcElement.color() ],\n            [ \"stop-opacity\", srcElement.opacity() ]\n        ];\n    };\n\n    GradientStopNode.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"offset\") {\n            this.attr(e.field, e.value);\n        } else if (e.field === \"color\" || e.field === \"opacity\") {\n            this.css(\"stop-\" + e.field, e.value);\n        }\n    };\n\n    return GradientStopNode;\n}(Node));\n\nvar GradientNode = (function (Node$$1) {\n    function GradientNode(srcElement) {\n        Node$$1.call(this, srcElement);\n\n        this.id = srcElement.id;\n\n        this.loadStops();\n    }\n\n    extendStatic(GradientNode, Node$$1);\n    GradientNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    GradientNode.prototype.constructor = GradientNode;\n    GradientNode.fn = GradientNode.prototype;\n    GradientNode.fn.init = GradientNode.fn.constructor;\n\n    GradientNode.prototype.loadStops = function loadStops () {\n        var this$1 = this;\n\n        var stops = this.srcElement.stops;\n        var element = this.element;\n\n        for (var idx = 0; idx < stops.length; idx++) {\n            var stopNode = new GradientStopNode(stops[idx]);\n            this$1.append(stopNode);\n            if (element) {\n                stopNode.attachTo(element);\n            }\n        }\n    };\n\n    GradientNode.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"gradient.stops\") {\n            BaseNode.prototype.clear.call(this);\n            this.loadStops();\n        } else if (e.field === \"gradient\") {\n            this.allAttr(this.mapCoordinates());\n        }\n    };\n\n    GradientNode.prototype.renderCoordinates = function renderCoordinates () {\n        return renderAllAttr(this.mapCoordinates());\n    };\n\n    GradientNode.prototype.mapSpace = function mapSpace () {\n        return [ \"gradientUnits\", this.srcElement.userSpace() ? \"userSpaceOnUse\" : \"objectBoundingBox\" ];\n    };\n\n    return GradientNode;\n}(Node));\n\nvar LinearGradientNode = (function (GradientNode$$1) {\n    function LinearGradientNode () {\n        GradientNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(LinearGradientNode, GradientNode$$1);\n    LinearGradientNode.prototype = Object.create( GradientNode$$1 && GradientNode$$1.prototype );\n    LinearGradientNode.prototype.constructor = LinearGradientNode;\n    LinearGradientNode.fn = LinearGradientNode.prototype;\n    LinearGradientNode.fn.init = LinearGradientNode.fn.constructor;\n\n    LinearGradientNode.prototype.template = function template () {\n        return (\"<linearGradient id='\" + (this.id) + \"' \" + (this.renderCoordinates()) + \">\" + (this.renderChildren()) + \"</linearGradient>\");\n    };\n\n    LinearGradientNode.prototype.mapCoordinates = function mapCoordinates () {\n        var srcElement = this.srcElement;\n        var start = srcElement.start();\n        var end = srcElement.end();\n        var attrs = [\n            [ \"x1\", start.x ],\n            [ \"y1\", start.y ],\n            [ \"x2\", end.x ],\n            [ \"y2\", end.y ],\n            this.mapSpace()\n        ];\n\n        return attrs;\n    };\n\n    return LinearGradientNode;\n}(GradientNode));\n\nvar RadialGradientNode = (function (GradientNode$$1) {\n    function RadialGradientNode () {\n        GradientNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(RadialGradientNode, GradientNode$$1);\n    RadialGradientNode.prototype = Object.create( GradientNode$$1 && GradientNode$$1.prototype );\n    RadialGradientNode.prototype.constructor = RadialGradientNode;\n    RadialGradientNode.fn = RadialGradientNode.prototype;\n    RadialGradientNode.fn.init = RadialGradientNode.fn.constructor;\n\n    RadialGradientNode.prototype.template = function template () {\n        return (\"<radialGradient id='\" + (this.id) + \"' \" + (this.renderCoordinates()) + \">\" + (this.renderChildren()) + \"</radialGradient>\");\n    };\n\n    RadialGradientNode.prototype.mapCoordinates = function mapCoordinates () {\n        var srcElement = this.srcElement;\n        var center = srcElement.center();\n        var radius = srcElement.radius();\n        var attrs = [\n            [ \"cx\", center.x ],\n            [ \"cy\", center.y ],\n            [ \"r\", radius ],\n            this.mapSpace()\n        ];\n        return attrs;\n    };\n\n    return RadialGradientNode;\n}(GradientNode));\n\nvar ClipNode = (function (Node$$1) {\n    function ClipNode(srcElement) {\n        Node$$1.call(this);\n\n        this.srcElement = srcElement;\n        this.id = srcElement.id;\n\n        this.load([ srcElement ]);\n    }\n\n    extendStatic(ClipNode, Node$$1);\n    ClipNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    ClipNode.prototype.constructor = ClipNode;\n    ClipNode.fn = ClipNode.prototype;\n    ClipNode.fn.init = ClipNode.fn.constructor;\n\n    ClipNode.prototype.template = function template () {\n        return (\"<clipPath id='\" + (this.id) + \"'>\" + (this.renderChildren()) + \"</clipPath>\");\n    };\n\n    return ClipNode;\n}(Node));\n\nvar DefinitionNode = (function (Node$$1) {\n    function DefinitionNode() {\n        Node$$1.call(this);\n        this.definitionMap = {};\n    }\n\n    extendStatic(DefinitionNode, Node$$1);\n    DefinitionNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    DefinitionNode.prototype.constructor = DefinitionNode;\n    DefinitionNode.fn = DefinitionNode.prototype;\n    DefinitionNode.fn.init = DefinitionNode.fn.constructor;\n\n    DefinitionNode.prototype.attachTo = function attachTo (domElement) {\n        this.element = domElement;\n    };\n\n    DefinitionNode.prototype.template = function template () {\n        return (\"<defs>\" + (this.renderChildren()) + \"</defs>\");\n    };\n\n    DefinitionNode.prototype.definitionChange = function definitionChange (e) {\n        var definitions = e.definitions;\n        var action = e.action;\n\n        if (action === \"add\") {\n            this.addDefinitions(definitions);\n        } else if (action === \"remove\") {\n            this.removeDefinitions(definitions);\n        }\n    };\n\n    DefinitionNode.prototype.createDefinition = function createDefinition (type, item) {\n        var nodeType;\n        if (type === \"clip\") {\n            nodeType = ClipNode;\n        } else if (type === \"fill\") {\n            if (item instanceof LinearGradient) {\n                nodeType = LinearGradientNode;\n            } else if (item instanceof RadialGradient) {\n                nodeType = RadialGradientNode;\n            }\n        }\n        return new nodeType(item);\n    };\n\n    DefinitionNode.prototype.addDefinitions = function addDefinitions (definitions) {\n        var this$1 = this;\n\n        for (var field in definitions) {\n            this$1.addDefinition(field, definitions[field]);\n        }\n    };\n\n    DefinitionNode.prototype.addDefinition = function addDefinition (type, srcElement) {\n        var ref = this;\n        var element = ref.element;\n        var definitionMap = ref.definitionMap;\n        var id = srcElement.id;\n        var mapItem = definitionMap[id];\n        if (!mapItem) {\n            var node = this.createDefinition(type, srcElement);\n            definitionMap[id] = {\n                element: node,\n                count: 1\n            };\n            this.append(node);\n            if (element) {\n                node.attachTo(this.element);\n            }\n        } else {\n            mapItem.count++;\n        }\n    };\n\n    DefinitionNode.prototype.removeDefinitions = function removeDefinitions (definitions) {\n        var this$1 = this;\n\n        for (var field in definitions) {\n            this$1.removeDefinition(definitions[field]);\n        }\n    };\n\n    DefinitionNode.prototype.removeDefinition = function removeDefinition (srcElement) {\n        var definitionMap = this.definitionMap;\n        var id = srcElement.id;\n        var mapItem = definitionMap[id];\n\n        if (mapItem) {\n            mapItem.count--;\n            if (mapItem.count === 0) {\n                this.remove(this.childNodes.indexOf(mapItem.element), 1);\n                delete definitionMap[id];\n            }\n        }\n    };\n\n    return DefinitionNode;\n}(Node));\n\nvar RootNode = (function (Node$$1) {\n    function RootNode(options) {\n        Node$$1.call(this);\n        this.options = options;\n        this.defs = new DefinitionNode();\n    }\n\n    extendStatic(RootNode, Node$$1);\n    RootNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    RootNode.prototype.constructor = RootNode;\n    RootNode.fn = RootNode.prototype;\n    RootNode.fn.init = RootNode.fn.constructor;\n\n    RootNode.prototype.attachTo = function attachTo (domElement) {\n        this.element = domElement;\n        this.defs.attachTo(domElement.firstElementChild);\n    };\n\n    RootNode.prototype.clear = function clear () {\n        BaseNode.prototype.clear.call(this);\n    };\n\n    RootNode.prototype.template = function template () {\n        return this.defs.render() + this.renderChildren();\n    };\n\n    RootNode.prototype.definitionChange = function definitionChange (e) {\n        this.defs.definitionChange(e);\n    };\n\n    return RootNode;\n}(Node));\n\nvar DASH_ARRAYS = {\n    dot: [ 1.5, 3.5 ],\n    dash: [ 4, 3.5 ],\n    longdash: [ 8, 3.5 ],\n    dashdot: [ 3.5, 3.5, 1.5, 3.5 ],\n    longdashdot: [ 8, 3.5, 1.5, 3.5 ],\n    longdashdotdot: [ 8, 3.5, 1.5, 3.5, 1.5, 3.5 ]\n};\n\nvar SOLID = \"solid\";\nvar BUTT = \"butt\";\n\nvar ATTRIBUTE_MAP = {\n    \"fill.opacity\": \"fill-opacity\",\n    \"stroke.color\": \"stroke\",\n    \"stroke.width\": \"stroke-width\",\n    \"stroke.opacity\": \"stroke-opacity\"\n};\nvar SPACE = \" \";\n\nvar PathNode = (function (Node$$1) {\n    function PathNode () {\n        Node$$1.apply(this, arguments);\n    }\n\n    extendStatic(PathNode, Node$$1);\n    PathNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    PathNode.prototype.constructor = PathNode;\n    PathNode.fn = PathNode.prototype;\n    PathNode.fn.init = PathNode.fn.constructor;\n\n    PathNode.prototype.geometryChange = function geometryChange () {\n        this.attr(\"d\", this.renderData());\n        this.invalidate();\n    };\n\n    PathNode.prototype.optionsChange = function optionsChange (e) {\n        switch (e.field) {\n            case \"fill\":\n                if (e.value) {\n                    this.allAttr(this.mapFill(e.value));\n                } else {\n                    this.removeAttr(\"fill\");\n                }\n                break;\n\n            case \"fill.color\":\n                this.allAttr(this.mapFill({ color: e.value }));\n                break;\n\n            case \"stroke\":\n                if (e.value) {\n                    this.allAttr(this.mapStroke(e.value));\n                } else {\n                    this.removeAttr(\"stroke\");\n                }\n                break;\n\n            case \"transform\":\n                this.transformChange(e.value);\n                break;\n\n            default:\n                var name = ATTRIBUTE_MAP[e.field];\n                if (name) {\n                    this.attr(name, e.value);\n                }\n                break;\n        }\n\n        Node$$1.prototype.optionsChange.call(this, e);\n    };\n\n    PathNode.prototype.content = function content () {\n        if (this.element) {\n            this.element.textContent = this.srcElement.content();\n        }\n    };\n\n    PathNode.prototype.renderData = function renderData () {\n        return this.printPath(this.srcElement);\n    };\n\n    PathNode.prototype.printPath = function printPath (path) {\n        var this$1 = this;\n\n        var segments = path.segments;\n        var length = segments.length;\n        if (length > 0) {\n            var parts = [];\n            var output, currentType;\n\n            for (var i = 1; i < length; i++) {\n                var segmentType = this$1.segmentType(segments[i - 1], segments[i]);\n                if (segmentType !== currentType) {\n                    currentType = segmentType;\n                    parts.push(segmentType);\n                }\n\n                if (segmentType === \"L\") {\n                    parts.push(this$1.printPoints(segments[i].anchor()));\n                } else {\n                    parts.push(this$1.printPoints(segments[i - 1].controlOut(), segments[i].controlIn(), segments[i].anchor()));\n                }\n            }\n\n            output = \"M\" + this.printPoints(segments[0].anchor()) + SPACE + parts.join(SPACE);\n            if (path.options.closed) {\n                output += \"Z\";\n            }\n\n            return output;\n        }\n    };\n\n    PathNode.prototype.printPoints = function printPoints () {\n        var points = arguments;\n        var length = points.length;\n        var result = [];\n\n        for (var i = 0; i < length; i++) {\n            result.push(points[i].toString(3));\n        }\n\n        return result.join(\" \");\n    };\n\n    PathNode.prototype.segmentType = function segmentType (segmentStart, segmentEnd) {\n        return segmentStart.controlOut() && segmentEnd.controlIn() ? \"C\" : \"L\";\n    };\n\n    PathNode.prototype.mapStroke = function mapStroke (stroke) {\n        var attrs = [];\n\n        if (stroke && !isTransparent(stroke.color)) {\n            attrs.push([ \"stroke\", stroke.color ]);\n            attrs.push([ \"stroke-width\", stroke.width ]);\n            attrs.push([ \"stroke-linecap\", this.renderLinecap(stroke) ]);\n            attrs.push([ \"stroke-linejoin\", stroke.lineJoin ]);\n\n            if (defined(stroke.opacity)) {\n                attrs.push([ \"stroke-opacity\", stroke.opacity ]);\n            }\n\n            if (defined(stroke.dashType)) {\n                attrs.push([ \"stroke-dasharray\", this.renderDashType(stroke) ]);\n            }\n        } else {\n            attrs.push([ \"stroke\", NONE ]);\n        }\n\n        return attrs;\n    };\n\n    PathNode.prototype.renderStroke = function renderStroke () {\n        return renderAllAttr(\n            this.mapStroke(this.srcElement.options.stroke)\n        );\n    };\n\n    PathNode.prototype.renderDashType = function renderDashType (stroke) {\n        var dashType = stroke.dashType;\n        var width = stroke.width; if (width === void 0) { width = 1; }\n\n        if (dashType && dashType !== SOLID) {\n            var dashArray = DASH_ARRAYS[dashType.toLowerCase()];\n            var result = [];\n\n            for (var i = 0; i < dashArray.length; i++) {\n                result.push(dashArray[i] * width);\n            }\n\n            return result.join(\" \");\n        }\n    };\n\n    PathNode.prototype.renderLinecap = function renderLinecap (stroke) {\n        var dashType = stroke.dashType;\n        var lineCap = stroke.lineCap;\n\n        return (dashType && dashType !== \"solid\") ? BUTT : lineCap;\n    };\n\n    PathNode.prototype.mapFill = function mapFill (fill) {\n        var attrs = [];\n        if (!(fill && fill.nodeType === \"Gradient\")) {\n            if (fill && !isTransparent(fill.color)) {\n                attrs.push([ \"fill\", fill.color ]);\n\n                if (defined(fill.opacity)) {\n                    attrs.push([ \"fill-opacity\", fill.opacity ]);\n                }\n            } else {\n                attrs.push([ \"fill\", NONE ]);\n            }\n        }\n\n        return attrs;\n    };\n\n    PathNode.prototype.renderFill = function renderFill () {\n        return renderAllAttr(\n            this.mapFill(this.srcElement.options.fill)\n        );\n    };\n\n    PathNode.prototype.template = function template () {\n        return \"<path \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) + \" \" + (renderAttr('d', this.renderData())) +\n                    \"\" + (this.renderStroke()) + (this.renderFill()) + (this.renderDefinitions()) + (this.renderTransform()) + \"></path>\";\n    };\n\n    return PathNode;\n}(Node));\n\nvar ArcNode = (function (PathNode$$1) {\n    function ArcNode () {\n        PathNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(ArcNode, PathNode$$1);\n    ArcNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n    ArcNode.prototype.constructor = ArcNode;\n    ArcNode.fn = ArcNode.prototype;\n    ArcNode.fn.init = ArcNode.fn.constructor;\n\n    ArcNode.prototype.renderData = function renderData () {\n        return this.printPath(this.srcElement.toPath());\n    };\n\n    return ArcNode;\n}(PathNode));\n\nvar CircleNode = (function (PathNode$$1) {\n    function CircleNode () {\n        PathNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(CircleNode, PathNode$$1);\n    CircleNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n    CircleNode.prototype.constructor = CircleNode;\n    CircleNode.fn = CircleNode.prototype;\n    CircleNode.fn.init = CircleNode.fn.constructor;\n\n    CircleNode.prototype.geometryChange = function geometryChange () {\n        var center = this.center();\n        this.attr(\"cx\", center.x);\n        this.attr(\"cy\", center.y);\n        this.attr(\"r\", this.radius());\n        this.invalidate();\n    };\n\n    CircleNode.prototype.center = function center () {\n        return this.srcElement.geometry().center;\n    };\n\n    CircleNode.prototype.radius = function radius () {\n        return this.srcElement.geometry().radius;\n    };\n\n    CircleNode.prototype.template = function template () {\n        return \"<circle \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) +\n                    \"cx='\" + (this.center().x) + \"' cy='\" + (this.center().y) + \"' r='\" + (this.radius()) + \"'\" +\n                    (this.renderStroke()) + \" \" + (this.renderFill()) + \" \" + (this.renderDefinitions()) +\n                    (this.renderTransform()) + \" ></circle>\";\n    };\n\n    return CircleNode;\n}(PathNode));\n\nvar GroupNode = (function (Node$$1) {\n    function GroupNode () {\n        Node$$1.apply(this, arguments);\n    }\n\n    extendStatic(GroupNode, Node$$1);\n    GroupNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n    GroupNode.prototype.constructor = GroupNode;\n    GroupNode.fn = GroupNode.prototype;\n    GroupNode.fn.init = GroupNode.fn.constructor;\n\n    GroupNode.prototype.template = function template () {\n        return (\"<g\" + (this.renderId() + this.renderTransform() + this.renderStyle() + this.renderOpacity() + this.renderDefinitions()) + \">\" + (this.renderChildren()) + \"</g>\");\n    };\n\n    GroupNode.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"transform\") {\n            this.transformChange(e.value);\n        }\n\n        Node$$1.prototype.optionsChange.call(this, e);\n    };\n\n    return GroupNode;\n}(Node));\n\nvar ImageNode = (function (PathNode$$1) {\n    function ImageNode () {\n        PathNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(ImageNode, PathNode$$1);\n    ImageNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n    ImageNode.prototype.constructor = ImageNode;\n    ImageNode.fn = ImageNode.prototype;\n    ImageNode.fn.init = ImageNode.fn.constructor;\n\n    ImageNode.prototype.geometryChange = function geometryChange () {\n        this.allAttr(this.mapPosition());\n        this.invalidate();\n    };\n\n    ImageNode.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"src\") {\n            this.allAttr(this.mapSource());\n        }\n\n        PathNode$$1.prototype.optionsChange.call(this, e);\n    };\n\n    ImageNode.prototype.mapPosition = function mapPosition () {\n        var rect = this.srcElement.rect();\n        var tl = rect.topLeft();\n\n        return [\n            [ \"x\", tl.x ],\n            [ \"y\", tl.y ],\n            [ \"width\", rect.width() + \"px\" ],\n            [ \"height\", rect.height() + \"px\" ]\n        ];\n    };\n\n    ImageNode.prototype.renderPosition = function renderPosition () {\n        return renderAllAttr(this.mapPosition());\n    };\n\n    ImageNode.prototype.mapSource = function mapSource (encode) {\n        var src = this.srcElement.src();\n\n        if (encode) {\n            src = kendo.htmlEncode(src);\n        }\n\n        return [ [ \"xlink:href\", src ] ];\n    };\n\n    ImageNode.prototype.renderSource = function renderSource () {\n        return renderAllAttr(this.mapSource(true));\n    };\n\n    ImageNode.prototype.template = function template () {\n        return \"<image preserveAspectRatio='none' \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderTransform()) + \" \" + (this.renderOpacity()) +\n               (this.renderPosition()) + \" \" + (this.renderSource()) + \" \" + (this.renderDefinitions()) + \">\" +\n               \"</image>\";\n    };\n\n    return ImageNode;\n}(PathNode));\n\nvar MultiPathNode = (function (PathNode$$1) {\n    function MultiPathNode () {\n        PathNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(MultiPathNode, PathNode$$1);\n    MultiPathNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n    MultiPathNode.prototype.constructor = MultiPathNode;\n    MultiPathNode.fn = MultiPathNode.prototype;\n    MultiPathNode.fn.init = MultiPathNode.fn.constructor;\n\n    MultiPathNode.prototype.renderData = function renderData () {\n        var this$1 = this;\n\n        var paths = this.srcElement.paths;\n\n        if (paths.length > 0) {\n            var result = [];\n\n            for (var i = 0; i < paths.length; i++) {\n                result.push(this$1.printPath(paths[i]));\n            }\n\n            return result.join(\" \");\n        }\n    };\n\n    return MultiPathNode;\n}(PathNode));\n\nvar RectNode = (function (PathNode$$1) {\n    function RectNode () {\n        PathNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(RectNode, PathNode$$1);\n    RectNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n    RectNode.prototype.constructor = RectNode;\n    RectNode.fn = RectNode.prototype;\n    RectNode.fn.init = RectNode.fn.constructor;\n\n    RectNode.prototype.geometryChange = function geometryChange () {\n        var geometry = this.srcElement.geometry();\n        this.attr(\"x\", geometry.origin.x);\n        this.attr(\"y\", geometry.origin.y);\n        this.attr(\"width\", geometry.size.width);\n        this.attr(\"height\", geometry.size.height);\n        this.attr(\"rx\", geometry.cornerRadius[0]);\n        this.attr(\"ry\", geometry.cornerRadius[1]);\n        this.invalidate();\n    };\n\n    RectNode.prototype.size = function size () {\n        return this.srcElement.geometry().size;\n    };\n\n    RectNode.prototype.origin = function origin () {\n        return this.srcElement.geometry().origin;\n    };\n\n    RectNode.prototype.rx = function rx () {\n        return this.srcElement.geometry().cornerRadius[0];\n    };\n\n    RectNode.prototype.ry = function ry () {\n        return this.srcElement.geometry().cornerRadius[1];\n    };\n\n    RectNode.prototype.template = function template () {\n        return \"<rect \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) + \" x='\" + (this.origin().x) + \"' y='\" + (this.origin().y) + \"' \" +\n                    \"rx='\" + (this.rx()) + \"' ry='\" + (this.ry()) + \"' \" +\n                    \"width='\" + (this.size().width) + \"' height='\" + (this.size().height) + \"' \" + (this.renderStroke()) + \" \" +\n                    (this.renderFill()) + \" \" + (this.renderDefinitions()) + \" \" + (this.renderTransform()) + \" />\";\n    };\n\n    return RectNode;\n}(PathNode));\n\nvar ENTITY_REGEX = /&(?:[a-zA-Z]+|#\\d+);/g;\n\nfunction decodeEntities(text) {\n    if (!text || typeof text !== \"string\" || !ENTITY_REGEX.test(text)) {\n        return text;\n    }\n\n    var element = decodeEntities._element;\n    ENTITY_REGEX.lastIndex = 0;\n\n    return text.replace(ENTITY_REGEX, function (match) {\n        element.innerHTML = match;\n\n        return element.textContent || element.innerText;\n    });\n}\n\nif (typeof document !== \"undefined\") {\n    decodeEntities._element = document.createElement(\"span\");\n}\n\nvar TextNode = (function (PathNode$$1) {\n    function TextNode () {\n        PathNode$$1.apply(this, arguments);\n    }\n\n    extendStatic(TextNode, PathNode$$1);\n    TextNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n    TextNode.prototype.constructor = TextNode;\n    TextNode.fn = TextNode.prototype;\n    TextNode.fn.init = TextNode.fn.constructor;\n\n    TextNode.prototype.geometryChange = function geometryChange () {\n        var pos = this.pos();\n        this.attr(\"x\", pos.x);\n        this.attr(\"y\", pos.y);\n        this.invalidate();\n    };\n\n    TextNode.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"font\") {\n            this.attr(\"style\", renderStyle(this.mapStyle()));\n            this.geometryChange();\n        } else if (e.field === \"content\") {\n            PathNode$$1.prototype.content.call(this, this.srcElement.content());\n        }\n\n        PathNode$$1.prototype.optionsChange.call(this, e);\n    };\n\n    TextNode.prototype.mapStyle = function mapStyle (encode) {\n        var style = PathNode$$1.prototype.mapStyle.call(this, encode);\n        var font = this.srcElement.options.font;\n\n        if (encode) {\n            font = kendo.htmlEncode(font);\n        }\n\n        style.push([ \"font\", font ], [ \"white-space\", \"pre\" ]);\n\n        return style;\n    };\n\n    TextNode.prototype.pos = function pos () {\n        var pos = this.srcElement.position();\n        var size = this.srcElement.measure();\n        return pos.clone().setY(pos.y + size.baseline);\n    };\n\n    TextNode.prototype.renderContent = function renderContent () {\n        var content = this.srcElement.content();\n        content = decodeEntities(content);\n        content = kendo.htmlEncode(content);\n\n        return kendoUtil.normalizeText(content);\n    };\n\n    TextNode.prototype.renderTextAnchor = function renderTextAnchor () {\n        var anchor;\n\n        if ((this.options || {}).rtl && !(supportBrowser.msie || supportBrowser.edge)) {\n            anchor = 'end';\n        }\n\n        return renderAttr(\"text-anchor\", anchor);\n    };\n\n    TextNode.prototype.template = function template () {\n        return \"<text \" + (this.renderId()) + \" \" + (this.renderTextAnchor()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) +\n                    \"x='\" + (this.pos().x) + \"' y='\" + (this.pos().y) + \"' \" + (this.renderStroke()) + \" \" + (this.renderTransform()) + \" \" + (this.renderDefinitions()) +\n                    (this.renderFill()) + \">\" + (this.renderContent()) + \"</text>\";\n    };\n\n    return TextNode;\n}(PathNode));\n\nNODE_MAP.Arc = ArcNode;\nNODE_MAP.Circle = CircleNode;\nNODE_MAP.Group = GroupNode;\nNODE_MAP.Image = ImageNode;\nNODE_MAP.MultiPath = MultiPathNode;\nNODE_MAP.Path = PathNode;\nNODE_MAP.Rect = RectNode;\nNODE_MAP.Text = TextNode;\n\nvar RTL = 'rtl';\n\nfunction alignToScreen(element) {\n    var ctm;\n\n    try {\n        ctm = element.getScreenCTM ? element.getScreenCTM() : null;\n    } catch (e) { } // eslint-disable-line no-empty\n\n    if (ctm) {\n        var left = - ctm.e % 1;\n        var top = - ctm.f % 1;\n        var style = element.style;\n\n        if (left !== 0 || top !== 0) {\n            style.left = left + \"px\";\n            style.top = top + \"px\";\n        }\n    }\n}\n\nvar Surface$3 = (function (BaseSurface) {\n    function Surface(element, options) {\n        BaseSurface.call(this, element, options);\n\n        this._root = new RootNode($.extend({\n            rtl: elementStyles(element, 'direction').direction === RTL\n        }, this.options));\n\n        renderSVG$1(this.element, this._template());\n\n        this._rootElement = this.element.firstElementChild;\n\n        alignToScreen(this._rootElement);\n\n        this._root.attachTo(this._rootElement);\n\n        bindEvents(this.element, {\n            click: this._click,\n            mouseover: this._mouseenter,\n            mouseout: this._mouseleave,\n            mousemove: this._mousemove\n        });\n\n        this.resize();\n    }\n\n    extendStatic(Surface, BaseSurface);\n    Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n    Surface.prototype.constructor = Surface;\n    Surface.fn = Surface.prototype;\n    Surface.fn.init = Surface.fn.constructor;\n\n    var prototypeAccessors = { type: {} };\n\n    prototypeAccessors.type.get = function () {\n        return \"svg\";\n    };\n\n    Surface.prototype.destroy = function destroy () {\n        if (this._root) {\n            this._root.destroy();\n            this._root = null;\n            this._rootElement = null;\n            unbindEvents(this.element, {\n                click: this._click,\n                mouseover: this._mouseenter,\n                mouseout: this._mouseleave,\n                mousemove: this._mousemove\n            });\n        }\n\n        BaseSurface.prototype.destroy.call(this);\n    };\n\n    Surface.prototype.translate = function translate (offset) {\n        var viewBox = (Math.round(offset.x)) + \" \" + (Math.round(offset.y)) + \" \" + (this._size.width) + \" \" + (this._size.height);\n\n        this._offset = offset;\n        this._rootElement.setAttribute(\"viewBox\", viewBox);\n    };\n\n    Surface.prototype.draw = function draw (element) {\n        BaseSurface.prototype.draw.call(this, element);\n        this._root.load([ element ]);\n    };\n\n    Surface.prototype.clear = function clear () {\n        BaseSurface.prototype.clear.call(this);\n        this._root.clear();\n    };\n\n    Surface.prototype.svg = function svg () {\n        return \"<?xml version='1.0' ?>\" + this._template();\n    };\n\n    Surface.prototype.exportVisual = function exportVisual () {\n        var ref = this;\n        var visual = ref._visual;\n        var offset = ref._offset;\n\n        if (offset) {\n            var wrap = new Group();\n            wrap.children.push(visual);\n\n            wrap.transform(\n                transform$1().translate(-offset.x, -offset.y)\n            );\n\n            visual = wrap;\n        }\n\n        return visual;\n    };\n\n    Surface.prototype._resize = function _resize () {\n        if (this._offset) {\n            this.translate(this._offset);\n        }\n    };\n\n    Surface.prototype._template = function _template () {\n        return (\"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + (this._root.render()) + \"</svg>\");\n    };\n\n    Object.defineProperties( Surface.prototype, prototypeAccessors );\n\n    return Surface;\n}(Surface$2));\n\nvar NODE_MAP$2 = {};\n\nfunction renderPath(ctx, path) {\n    var segments = path.segments;\n\n    if (segments.length === 0) {\n        return;\n    }\n\n    var segment = segments[0];\n    var anchor = segment.anchor();\n    ctx.moveTo(anchor.x, anchor.y);\n\n    for (var i = 1; i < segments.length; i++) {\n        segment = segments[i];\n        anchor = segment.anchor();\n\n        var prevSeg = segments[i - 1];\n        var prevOut = prevSeg.controlOut();\n        var controlIn = segment.controlIn();\n\n        if (prevOut && controlIn) {\n            ctx.bezierCurveTo(prevOut.x, prevOut.y,\n                              controlIn.x, controlIn.y,\n                              anchor.x, anchor.y);\n        } else {\n            ctx.lineTo(anchor.x, anchor.y);\n        }\n    }\n\n    if (path.options.closed) {\n        ctx.closePath();\n    }\n}\n\nvar Node$2 = (function (BaseNode$$1) {\n    function Node(srcElement) {\n        BaseNode$$1.call(this, srcElement);\n        if (srcElement) {\n            this.initClip();\n        }\n    }\n\n    extendStatic(Node, BaseNode$$1);\n    Node.prototype = Object.create( BaseNode$$1 && BaseNode$$1.prototype );\n    Node.prototype.constructor = Node;\n    Node.fn = Node.prototype;\n    Node.fn.init = Node.fn.constructor;\n\n    Node.prototype.initClip = function initClip () {\n        var clip = this.srcElement.clip();\n        if (clip) {\n            this.clip = clip;\n            clip.addObserver(this);\n        }\n    };\n\n    Node.prototype.clear = function clear () {\n        if (this.srcElement) {\n            this.srcElement.removeObserver(this);\n        }\n\n        this.clearClip();\n\n        BaseNode$$1.prototype.clear.call(this);\n    };\n\n    Node.prototype.clearClip = function clearClip () {\n        if (this.clip) {\n            this.clip.removeObserver(this);\n            delete this.clip;\n        }\n    };\n\n    Node.prototype.setClip = function setClip (ctx) {\n        if (this.clip) {\n            ctx.beginPath();\n            renderPath(ctx, this.clip);\n            ctx.clip();\n        }\n    };\n\n    Node.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"clip\") {\n            this.clearClip();\n            this.initClip();\n        }\n\n        BaseNode$$1.prototype.optionsChange.call(this, e);\n    };\n\n    Node.prototype.setTransform = function setTransform (ctx) {\n        if (this.srcElement) {\n            var transform = this.srcElement.transform();\n            if (transform) {\n                ctx.transform.apply(ctx, transform.matrix().toArray(6));\n            }\n        }\n    };\n\n    Node.prototype.loadElements = function loadElements (elements, pos, cors) {\n        var this$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var srcElement = elements[i];\n            var children = srcElement.children;\n\n            var childNode = new NODE_MAP$2[srcElement.nodeType](srcElement, cors);\n\n            if (children && children.length > 0) {\n                childNode.load(children, pos, cors);\n            }\n\n            if (defined(pos)) {\n                this$1.insertAt(childNode, pos);\n            } else {\n                this$1.append(childNode);\n            }\n        }\n    };\n\n    Node.prototype.load = function load (elements, pos, cors) {\n        this.loadElements(elements, pos, cors);\n\n        this.invalidate();\n    };\n\n    Node.prototype.setOpacity = function setOpacity (ctx) {\n        if (this.srcElement) {\n            var opacity = this.srcElement.opacity();\n            if (defined(opacity)) {\n                this.globalAlpha(ctx, opacity);\n            }\n        }\n    };\n\n    Node.prototype.globalAlpha = function globalAlpha (ctx, value) {\n        var opactity = value;\n        if (opactity && ctx.globalAlpha) {\n            opactity *= ctx.globalAlpha;\n        }\n        ctx.globalAlpha = opactity;\n    };\n\n    Node.prototype.visible = function visible () {\n        var src = this.srcElement;\n        return !src || (src && src.options.visible !== false);\n    };\n\n    return Node;\n}(BaseNode));\n\nvar GroupNode$2 = (function (superclass) {\n    function GroupNode () {\n        superclass.apply(this, arguments);\n    }\n\n    extendStatic(GroupNode, superclass);\n    GroupNode.prototype = Object.create( superclass && superclass.prototype );\n    GroupNode.prototype.constructor = GroupNode;\n    GroupNode.fn = GroupNode.prototype;\n    GroupNode.fn.init = GroupNode.fn.constructor;\n\n    GroupNode.prototype.renderTo = function renderTo (ctx) {\n        if (!this.visible()) {\n            return;\n        }\n\n        ctx.save();\n\n        this.setTransform(ctx);\n        this.setClip(ctx);\n        this.setOpacity(ctx);\n\n        var childNodes = this.childNodes;\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            if (child.visible()) {\n                child.renderTo(ctx);\n            }\n        }\n\n        ctx.restore();\n    };\n\n    return GroupNode;\n}(traversable(Node$2, \"childNodes\")));\n\nvar FRAME_DELAY = 1000 / 60;\n\nvar RootNode$2 = (function (superclass) {\n    function RootNode(canvas, size) {\n        superclass.call(this);\n\n        this.canvas = canvas;\n        this.size = size;\n        this.ctx = canvas.getContext(\"2d\");\n\n        var invalidateHandler = this._invalidate.bind(this);\n        this.invalidate = kendo.throttle(function () {\n            kendo.animationFrame(invalidateHandler);\n        }, FRAME_DELAY);\n    }\n\n    extendStatic(RootNode, superclass);\n    RootNode.prototype = Object.create( superclass && superclass.prototype );\n    RootNode.prototype.constructor = RootNode;\n    RootNode.fn = RootNode.prototype;\n    RootNode.fn.init = RootNode.fn.constructor;\n\n    RootNode.prototype.destroy = function destroy () {\n        superclass.prototype.destroy.call(this);\n        this.canvas = null;\n        this.ctx = null;\n    };\n\n    RootNode.prototype.load = function load (elements, pos, cors) {\n        this.loadElements(elements, pos, cors);\n        this._invalidate();\n    };\n\n    RootNode.prototype._rescale = function _rescale (scale) {\n        var ref = this;\n        var canvas = ref.canvas;\n        var size = ref.size;\n        canvas.width = size.width * scale;\n        canvas.height = size.height * scale;\n        this.ctx.scale(scale, scale);\n    };\n\n    RootNode.prototype._devicePixelRatio = function _devicePixelRatio () {\n        if (typeof window.devicePixelRatio === 'number') {\n            return window.devicePixelRatio;\n        }\n\n        return 1;\n    };\n\n    RootNode.prototype._invalidate = function _invalidate (options) {\n        if (!this.ctx) {\n            return;\n        }\n\n        var fixedScale = options && options.fixedScale;\n        var scale = fixedScale ? 1 : this._devicePixelRatio();\n        this._rescale(scale);\n\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.renderTo(this.ctx);\n    };\n\n    return RootNode;\n}(traversable(GroupNode$2, \"childNodes\")));\n\nvar QuadRoot = (function (Class$$1) {\n    function QuadRoot() {\n        Class$$1.call(this);\n\n        this.shapes = [];\n    }\n\n    extendStatic(QuadRoot, Class$$1);\n    QuadRoot.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    QuadRoot.prototype.constructor = QuadRoot;\n    QuadRoot.fn = QuadRoot.prototype;\n    QuadRoot.fn.init = QuadRoot.fn.constructor;\n\n    QuadRoot.prototype._add = function _add (shape, bbox) {\n        this.shapes.push({\n            bbox: bbox,\n            shape: shape\n        });\n        shape._quadNode = this;\n    };\n\n    QuadRoot.prototype.pointShapes = function pointShapes (point) {\n        var shapes = this.shapes;\n        var length = shapes.length;\n        var result = [];\n        for (var idx = 0; idx < length; idx++) {\n            if (shapes[idx].bbox.containsPoint(point)) {\n                result.push(shapes[idx].shape);\n            }\n        }\n        return result;\n    };\n\n    QuadRoot.prototype.insert = function insert (shape, bbox) {\n        this._add(shape, bbox);\n    };\n\n    QuadRoot.prototype.remove = function remove (shape) {\n        var shapes = this.shapes;\n        var length = shapes.length;\n\n        for (var idx = 0; idx < length; idx++) {\n            if (shapes[idx].shape === shape) {\n                shapes.splice(idx, 1);\n                break;\n            }\n        }\n    };\n\n    return QuadRoot;\n}(Class));\n\nvar geometry = {\n\tCircle: Circle$2,\n\tArc: Arc$2,\n\tRect: Rect,\n\tPoint: Point,\n\tSegment: Segment,\n\tMatrix: Matrix,\n\tSize: Size,\n\ttoMatrix: toMatrix,\n\tTransformation: Transformation,\n\ttransform: transform$1\n};\n\nvar QuadNode = (function (QuadRoot$$1) {\n    function QuadNode(rect) {\n        QuadRoot$$1.call(this);\n        this.children = [];\n        this.rect = rect;\n    }\n\n    extendStatic(QuadNode, QuadRoot$$1);\n    QuadNode.prototype = Object.create( QuadRoot$$1 && QuadRoot$$1.prototype );\n    QuadNode.prototype.constructor = QuadNode;\n    QuadNode.fn = QuadNode.prototype;\n    QuadNode.fn.init = QuadNode.fn.constructor;\n\n    QuadNode.prototype.inBounds = function inBounds (rect) {\n        var nodeRect = this.rect;\n        var nodeBottomRight = nodeRect.bottomRight();\n        var bottomRight = rect.bottomRight();\n        var inBounds = nodeRect.origin.x <= rect.origin.x && nodeRect.origin.y <= rect.origin.y && bottomRight.x <= nodeBottomRight.x &&\n            bottomRight.y <= nodeBottomRight.y;\n        return inBounds;\n    };\n\n    QuadNode.prototype.pointShapes = function pointShapes (point) {\n        var children = this.children;\n        var length = children.length;\n        var result = QuadRoot$$1.prototype.pointShapes.call(this, point);\n        for (var idx = 0; idx < length; idx++) {\n            append$1$1(result, children[idx].pointShapes(point));\n        }\n        return result;\n    };\n\n    QuadNode.prototype.insert = function insert (shape, bbox) {\n        var children = this.children;\n        var inserted = false;\n\n        if (this.inBounds(bbox)) {\n            if (this.shapes.length < 4) {\n                this._add(shape, bbox);\n            } else {\n                if (!children.length) {\n                    this._initChildren();\n                }\n\n                for (var idx = 0; idx < children.length; idx++) {\n                    if (children[idx].insert(shape, bbox)) {\n                        inserted = true;\n                        break;\n                    }\n                }\n\n                if (!inserted) {\n                    this._add(shape, bbox);\n                }\n            }\n            inserted = true;\n        }\n\n        return inserted;\n    };\n\n    QuadNode.prototype._initChildren = function _initChildren () {\n        var ref = this;\n        var rect = ref.rect;\n        var children = ref.children;\n        var center = rect.center();\n        var halfWidth = rect.width() / 2;\n        var halfHeight = rect.height() / 2;\n\n        children.push(\n            new QuadNode(new Rect([ rect.origin.x, rect.origin.y ], [ halfWidth, halfHeight ])),\n            new QuadNode(new Rect([ center.x, rect.origin.y ], [ halfWidth, halfHeight ])),\n            new QuadNode(new Rect([ rect.origin.x, center.y ], [ halfWidth, halfHeight ])),\n            new QuadNode(new Rect([ center.x, center.y ], [ halfWidth, halfHeight ]))\n        );\n    };\n\n    return QuadNode;\n}(QuadRoot));\n\nvar ROOT_SIZE = 3000;\nvar LEVEL_STEP = 10000;\nvar MAX_LEVEL = 75;\n\nvar ShapesQuadTree = (function (Class$$1) {\n    function ShapesQuadTree() {\n        Class$$1.call(this);\n\n        this.initRoots();\n    }\n\n    extendStatic(ShapesQuadTree, Class$$1);\n    ShapesQuadTree.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    ShapesQuadTree.prototype.constructor = ShapesQuadTree;\n    ShapesQuadTree.fn = ShapesQuadTree.prototype;\n    ShapesQuadTree.fn.init = ShapesQuadTree.fn.constructor;\n\n    ShapesQuadTree.prototype.initRoots = function initRoots () {\n        this.rootMap = {};\n        this.root = new QuadRoot();\n        this.rootElements = [];\n    };\n\n    ShapesQuadTree.prototype.clear = function clear () {\n        var this$1 = this;\n\n        var rootElements = this.rootElements;\n        for (var idx = 0; idx < rootElements.length; idx++) {\n            this$1.remove(rootElements[idx]);\n        }\n        this.initRoots();\n    };\n\n    ShapesQuadTree.prototype.pointShape = function pointShape (point) {\n        var sectorRoot = ( this.rootMap[ Math.floor( point.x / ROOT_SIZE ) ] || {} )[ Math.floor( point.y / ROOT_SIZE ) ];\n        var result = this.root.pointShapes(point);\n\n        if (sectorRoot) {\n            result = result.concat(sectorRoot.pointShapes(point));\n        }\n\n        this.assignZindex(result);\n\n        result.sort(zIndexComparer);\n        for (var idx = 0; idx < result.length; idx++) {\n            if (result[idx].containsPoint(point)) {\n                return result[idx];\n            }\n        }\n    };\n\n    ShapesQuadTree.prototype.assignZindex = function assignZindex (elements) {\n        var this$1 = this;\n\n        for (var idx = 0; idx < elements.length; idx++) {\n            var element = elements[idx];\n            var zIndex = 0;\n            var levelWeight = Math.pow(LEVEL_STEP, MAX_LEVEL);\n            var parents = [];\n\n            while (element) {\n                parents.push(element);\n                element = element.parent;\n            }\n\n            while (parents.length) {\n                element = parents.pop();\n                zIndex += ((element.parent ? element.parent.children : this$1.rootElements).indexOf(element) + 1) * levelWeight;\n                levelWeight /= LEVEL_STEP;\n            }\n\n            elements[idx]._zIndex = zIndex;\n        }\n    };\n\n    ShapesQuadTree.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"transform\" || e.field === \"stroke.width\") {\n            this.bboxChange(e.element);\n        }\n    };\n\n    ShapesQuadTree.prototype.geometryChange = function geometryChange (e) {\n        this.bboxChange(e.element);\n    };\n\n    ShapesQuadTree.prototype.bboxChange = function bboxChange (element) {\n        var this$1 = this;\n\n        if (element.nodeType === \"Group\") {\n            for (var idx = 0; idx < element.children.length; idx++) {\n                this$1.bboxChange(element.children[idx]);\n            }\n        } else {\n            if (element._quadNode) {\n                element._quadNode.remove(element);\n            }\n            this._insertShape(element);\n        }\n    };\n\n    ShapesQuadTree.prototype.add = function add (elements) {\n        var elementsArray = Array.isArray(elements) ? elements.slice(0) : [ elements ];\n\n        append$1$1(this.rootElements, elementsArray);\n        this._insert(elementsArray);\n    };\n\n    ShapesQuadTree.prototype.childrenChange = function childrenChange (e) {\n        var this$1 = this;\n\n        if (e.action === \"remove\") {\n            for (var idx = 0; idx < e.items.length; idx++) {\n                this$1.remove(e.items[idx]);\n            }\n        } else {\n            this._insert(Array.prototype.slice.call(e.items, 0));\n        }\n    };\n\n    ShapesQuadTree.prototype._insert = function _insert (elements) {\n        var this$1 = this;\n\n        var element;\n\n        while (elements.length > 0) {\n            element = elements.pop();\n            element.addObserver(this$1);\n            if (element.nodeType === \"Group\") {\n                append$1$1(elements, element.children);\n            } else {\n                this$1._insertShape(element);\n            }\n        }\n    };\n\n    ShapesQuadTree.prototype._insertShape = function _insertShape (shape) {\n        var bbox = shape.bbox();\n        if (bbox) {\n            var sectors = this.getSectors(bbox);\n            var x = sectors[0][0];\n            var y = sectors[1][0];\n\n            if (this.inRoot(sectors)) {\n                this.root.insert(shape, bbox);\n            } else {\n                var rootMap = this.rootMap;\n                if (!rootMap[x]) {\n                    rootMap[x] = {};\n                }\n\n                if (!rootMap[x][y]) {\n                    rootMap[x][y] = new QuadNode(\n                        new Rect([ x * ROOT_SIZE, y * ROOT_SIZE ], [ ROOT_SIZE, ROOT_SIZE ])\n                    );\n                }\n\n                rootMap[x][y].insert(shape, bbox);\n            }\n        }\n    };\n\n    ShapesQuadTree.prototype.remove = function remove (element) {\n        var this$1 = this;\n\n        element.removeObserver(this);\n\n        if (element.nodeType === \"Group\") {\n            var children = element.children;\n            for (var idx = 0; idx < children.length; idx++) {\n                this$1.remove(children[idx]);\n            }\n        } else if (element._quadNode) {\n            element._quadNode.remove(element);\n            delete element._quadNode;\n        }\n    };\n\n    ShapesQuadTree.prototype.inRoot = function inRoot (sectors) {\n        return sectors[0].length > 1 || sectors[1].length > 1;\n    };\n\n    ShapesQuadTree.prototype.getSectors = function getSectors (rect) {\n        var bottomRight = rect.bottomRight();\n        var bottomX = Math.floor(bottomRight.x / ROOT_SIZE);\n        var bottomY = Math.floor(bottomRight.y / ROOT_SIZE);\n        var sectors = [ [], [] ];\n        for (var x = Math.floor(rect.origin.x / ROOT_SIZE); x <= bottomX; x++) {\n            sectors[0].push(x);\n        }\n        for (var y = Math.floor(rect.origin.y / ROOT_SIZE); y <= bottomY; y++) {\n            sectors[1].push(y);\n        }\n        return sectors;\n    };\n\n    return ShapesQuadTree;\n}(Class));\n\nfunction zIndexComparer(x1, x2) {\n    if (x1._zIndex < x2._zIndex) {\n        return 1;\n    }\n    if (x1._zIndex > x2._zIndex) {\n        return -1;\n    }\n\n    return 0;\n}\n\nvar SurfaceCursor = function SurfaceCursor(surface) {\n    surface.bind(\"mouseenter\", this._mouseenter.bind(this));\n    surface.bind(\"mouseleave\", this._mouseleave.bind(this));\n\n    this.element = surface.element;\n};\n\nSurfaceCursor.prototype.clear = function clear () {\n    this._resetCursor();\n};\n\nSurfaceCursor.prototype.destroy = function destroy () {\n    this._resetCursor();\n    delete this.element;\n};\n\nSurfaceCursor.prototype._mouseenter = function _mouseenter (e) {\n    var cursor = this._shapeCursor(e);\n\n    if (!cursor) {\n        this._resetCursor();\n    } else {\n        if (!this._current) {\n            this._defaultCursor = this._getCursor();\n        }\n\n        this._setCursor(cursor);\n    }\n};\n\nSurfaceCursor.prototype._mouseleave = function _mouseleave () {\n    this._resetCursor();\n};\n\nSurfaceCursor.prototype._shapeCursor = function _shapeCursor (e) {\n    var shape = e.element;\n\n    while (shape && !defined(shape.options.cursor)) {\n        shape = shape.parent;\n    }\n\n    if (shape) {\n        return shape.options.cursor;\n    }\n};\n\nSurfaceCursor.prototype._getCursor = function _getCursor () {\n    if (this.element) {\n        return this.element.style.cursor;\n    }\n};\n\nSurfaceCursor.prototype._setCursor = function _setCursor (cursor) {\n    if (this.element) {\n        this.element.style.cursor = cursor;\n        this._current = cursor;\n    }\n};\n\nSurfaceCursor.prototype._resetCursor = function _resetCursor () {\n    if (this._current) {\n        this._setCursor(this._defaultCursor || \"\");\n        delete this._current;\n    }\n};\n\nfunction addGradientStops(gradient, stops) {\n    for (var idx = 0; idx < stops.length; idx++) {\n        var stop = stops[idx];\n        var color = kendo.parseColor(stop.color());\n\n        color.a *= stop.opacity();\n\n        gradient.addColorStop(stop.offset(), color.toCssRgba());\n    }\n}\n\nvar PathNode$2 = (function (Node) {\n    function PathNode () {\n        Node.apply(this, arguments);\n    }\n\n    extendStatic(PathNode, Node);\n    PathNode.prototype = Object.create( Node && Node.prototype );\n    PathNode.prototype.constructor = PathNode;\n    PathNode.fn = PathNode.prototype;\n    PathNode.fn.init = PathNode.fn.constructor;\n\n    PathNode.prototype.renderTo = function renderTo (ctx) {\n        ctx.save();\n\n        this.setTransform(ctx);\n        this.setClip(ctx);\n        this.setOpacity(ctx);\n\n        ctx.beginPath();\n\n        this.renderPoints(ctx, this.srcElement);\n\n        this.setLineDash(ctx);\n        this.setLineCap(ctx);\n        this.setLineJoin(ctx);\n\n        this.setFill(ctx);\n        this.setStroke(ctx);\n\n        ctx.restore();\n    };\n\n    PathNode.prototype.setFill = function setFill (ctx) {\n        var fill = this.srcElement.options.fill;\n        var hasFill = false;\n\n        if (fill) {\n            if (fill.nodeType === \"Gradient\") {\n                this.setGradientFill(ctx, fill);\n                hasFill = true;\n            } else if (!isTransparent(fill.color)) {\n                ctx.fillStyle = fill.color;\n\n                ctx.save();\n                this.globalAlpha(ctx, fill.opacity);\n                ctx.fill();\n                ctx.restore();\n\n                hasFill = true;\n            }\n        }\n\n        return hasFill;\n    };\n\n    PathNode.prototype.setGradientFill = function setGradientFill (ctx, fill) {\n        var bbox = this.srcElement.rawBBox();\n        var gradient;\n\n        if (fill instanceof LinearGradient) {\n            var start = fill.start();\n            var end = fill.end();\n            gradient = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n        } else if (fill instanceof RadialGradient) {\n            var center = fill.center();\n            gradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, fill.radius());\n        }\n\n        addGradientStops(gradient, fill.stops);\n\n        ctx.save();\n\n        if (!fill.userSpace()) {\n            ctx.transform(bbox.width(), 0, 0, bbox.height(), bbox.origin.x, bbox.origin.y);\n        }\n        ctx.fillStyle = gradient;\n        ctx.fill();\n\n        ctx.restore();\n    };\n\n    PathNode.prototype.setStroke = function setStroke (ctx) {\n        var stroke = this.srcElement.options.stroke;\n        if (stroke && !isTransparent(stroke.color) && stroke.width > 0) {\n            ctx.strokeStyle = stroke.color;\n            ctx.lineWidth = valueOrDefault(stroke.width, 1);\n\n            ctx.save();\n            this.globalAlpha(ctx, stroke.opacity);\n            ctx.stroke();\n            ctx.restore();\n\n            return true;\n        }\n    };\n\n    PathNode.prototype.dashType = function dashType () {\n        var stroke = this.srcElement.options.stroke;\n        if (stroke && stroke.dashType) {\n            return stroke.dashType.toLowerCase();\n        }\n    };\n\n    PathNode.prototype.setLineDash = function setLineDash (ctx) {\n        var dashType = this.dashType();\n        if (dashType && dashType !== SOLID) {\n            var dashArray = DASH_ARRAYS[dashType];\n            if (ctx.setLineDash) {\n                ctx.setLineDash(dashArray);\n            } else {\n                ctx.mozDash = dashArray;\n                ctx.webkitLineDash = dashArray;\n            }\n        }\n    };\n\n    PathNode.prototype.setLineCap = function setLineCap (ctx) {\n        var dashType = this.dashType();\n        var stroke = this.srcElement.options.stroke;\n        if (dashType && dashType !== SOLID) {\n            ctx.lineCap = BUTT;\n        } else if (stroke && stroke.lineCap) {\n            ctx.lineCap = stroke.lineCap;\n        }\n    };\n\n    PathNode.prototype.setLineJoin = function setLineJoin (ctx) {\n        var stroke = this.srcElement.options.stroke;\n        if (stroke && stroke.lineJoin) {\n            ctx.lineJoin = stroke.lineJoin;\n        }\n    };\n\n    PathNode.prototype.renderPoints = function renderPoints (ctx, path) {\n        renderPath(ctx, path);\n    };\n\n    return PathNode;\n}(Node$2));\n\nvar ArcNode$2 = (function (PathNode) {\n    function ArcNode () {\n        PathNode.apply(this, arguments);\n    }\n\n    extendStatic(ArcNode, PathNode);\n    ArcNode.prototype = Object.create( PathNode && PathNode.prototype );\n    ArcNode.prototype.constructor = ArcNode;\n    ArcNode.fn = ArcNode.prototype;\n    ArcNode.fn.init = ArcNode.fn.constructor;\n\n    ArcNode.prototype.renderPoints = function renderPoints (ctx) {\n        var path = this.srcElement.toPath();\n        renderPath(ctx, path);\n    };\n\n    return ArcNode;\n}(PathNode$2));\n\nvar CircleNode$2 = (function (PathNode) {\n    function CircleNode () {\n        PathNode.apply(this, arguments);\n    }\n\n    extendStatic(CircleNode, PathNode);\n    CircleNode.prototype = Object.create( PathNode && PathNode.prototype );\n    CircleNode.prototype.constructor = CircleNode;\n    CircleNode.fn = CircleNode.prototype;\n    CircleNode.fn.init = CircleNode.fn.constructor;\n\n    CircleNode.prototype.renderPoints = function renderPoints (ctx) {\n        var ref = this.srcElement.geometry();\n        var center = ref.center;\n        var radius = ref.radius;\n\n        ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n    };\n\n    return CircleNode;\n}(PathNode$2));\n\nvar ImageNode$2 = (function (PathNode) {\n    function ImageNode(srcElement, cors) {\n        PathNode.call(this, srcElement);\n\n        this.onLoad = this.onLoad.bind(this);\n        this.onError = this.onError.bind(this);\n\n        this.loading = createPromise();\n\n        var img = this.img = new Image();\n\n        if (cors && !(/^data:/i.test(srcElement.src()))) {\n            img.crossOrigin = cors;\n        }\n\n        img.src = srcElement.src();\n\n        if (img.complete) {\n            this.onLoad();\n        } else {\n            img.onload = this.onLoad;\n            img.onerror = this.onError;\n        }\n    }\n\n    extendStatic(ImageNode, PathNode);\n    ImageNode.prototype = Object.create( PathNode && PathNode.prototype );\n    ImageNode.prototype.constructor = ImageNode;\n    ImageNode.fn = ImageNode.prototype;\n    ImageNode.fn.init = ImageNode.fn.constructor;\n\n    ImageNode.prototype.renderTo = function renderTo (ctx) {\n        if (this.loading.state() === \"resolved\") {\n            ctx.save();\n\n            this.setTransform(ctx);\n            this.setClip(ctx);\n\n            this.drawImage(ctx);\n\n            ctx.restore();\n        }\n    };\n\n    ImageNode.prototype.optionsChange = function optionsChange (e) {\n        if (e.field === \"src\") {\n            this.loading = createPromise();\n            this.img.src = this.srcElement.src();\n        } else {\n            PathNode.prototype.optionsChange.call(this, e);\n        }\n    };\n\n    ImageNode.prototype.onLoad = function onLoad () {\n        this.loading.resolve();\n        this.invalidate();\n    };\n\n    ImageNode.prototype.onError = function onError () {\n        this.loading.reject(new Error(\n            \"Unable to load image '\" + this.img.src +\n            \"'. Check for connectivity and verify CORS headers.\"\n        ));\n    };\n\n    ImageNode.prototype.drawImage = function drawImage (ctx) {\n        var rect = this.srcElement.rect();\n        var topLeft = rect.topLeft();\n\n        ctx.drawImage(\n            this.img, topLeft.x, topLeft.y, rect.width(), rect.height()\n        );\n    };\n\n    return ImageNode;\n}(PathNode$2));\n\nvar MultiPathNode$2 = (function (PathNode) {\n    function MultiPathNode () {\n        PathNode.apply(this, arguments);\n    }\n\n    extendStatic(MultiPathNode, PathNode);\n    MultiPathNode.prototype = Object.create( PathNode && PathNode.prototype );\n    MultiPathNode.prototype.constructor = MultiPathNode;\n    MultiPathNode.fn = MultiPathNode.prototype;\n    MultiPathNode.fn.init = MultiPathNode.fn.constructor;\n\n    MultiPathNode.prototype.renderPoints = function renderPoints (ctx) {\n        var paths = this.srcElement.paths;\n        for (var i = 0; i < paths.length; i++) {\n            renderPath(ctx, paths[i]);\n        }\n    };\n\n    return MultiPathNode;\n}(PathNode$2));\n\nvar RectNode$2 = (function (PathNode) {\n    function RectNode () {\n        PathNode.apply(this, arguments);\n    }\n\n    extendStatic(RectNode, PathNode);\n    RectNode.prototype = Object.create( PathNode && PathNode.prototype );\n    RectNode.prototype.constructor = RectNode;\n    RectNode.fn = RectNode.prototype;\n    RectNode.fn.init = RectNode.fn.constructor;\n\n    RectNode.prototype.renderPoints = function renderPoints (ctx) {\n        var geometry = this.srcElement.geometry();\n        var ref = geometry.cornerRadius;\n        var rx = ref[0];\n        var ry = ref[1];\n\n        if (rx === 0 && ry === 0) {\n            var origin = geometry.origin;\n            var size = geometry.size;\n            ctx.rect(origin.x, origin.y, size.width, size.height);\n        } else {\n            PathNode.prototype.renderPoints.call(this, ctx, Path.fromRect(geometry));\n        }\n    };\n\n    return RectNode;\n}(PathNode$2));\n\nvar TextNode$2 = (function (PathNode) {\n    function TextNode () {\n        PathNode.apply(this, arguments);\n    }\n\n    extendStatic(TextNode, PathNode);\n    TextNode.prototype = Object.create( PathNode && PathNode.prototype );\n    TextNode.prototype.constructor = TextNode;\n    TextNode.fn = TextNode.prototype;\n    TextNode.fn.init = TextNode.fn.constructor;\n\n    TextNode.prototype.renderTo = function renderTo (ctx) {\n        var text = this.srcElement;\n        var pos = text.position();\n        var size = text.measure();\n\n        ctx.save();\n\n        this.setTransform(ctx);\n        this.setClip(ctx);\n        this.setOpacity(ctx);\n\n        ctx.beginPath();\n\n        ctx.font = text.options.font;\n        ctx.textAlign = 'left';\n\n        if (this.setFill(ctx)) {\n            ctx.fillText(text.content(), pos.x, pos.y + size.baseline);\n        }\n\n        if (this.setStroke(ctx)) {\n            this.setLineDash(ctx);\n            ctx.strokeText(text.content(), pos.x, pos.y + size.baseline);\n        }\n\n        ctx.restore();\n    };\n\n    return TextNode;\n}(PathNode$2));\n\nNODE_MAP$2.Arc = ArcNode$2;\nNODE_MAP$2.Circle = CircleNode$2;\nNODE_MAP$2.Group = GroupNode$2;\nNODE_MAP$2.Image = ImageNode$2;\nNODE_MAP$2.MultiPath = MultiPathNode$2;\nNODE_MAP$2.Path = PathNode$2;\nNODE_MAP$2.Rect = RectNode$2;\nNODE_MAP$2.Text = TextNode$2;\n\nvar Surface$4 = (function (BaseSurface) {\n    function Surface(element, options) {\n        BaseSurface.call(this, element, options);\n\n        this.element.innerHTML = this._template(this);\n\n        var canvas = this.element.firstElementChild;\n        var size = elementSize(element);\n\n        canvas.width = size.width;\n        canvas.height = size.height;\n\n        this._rootElement = canvas;\n\n        this._root = new RootNode$2(canvas, size);\n\n        this._mouseTrackHandler = this._trackMouse.bind(this);\n\n        bindEvents(this.element, {\n            click: this._mouseTrackHandler,\n            mousemove: this._mouseTrackHandler\n        });\n    }\n\n    extendStatic(Surface, BaseSurface);\n    Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n    Surface.prototype.constructor = Surface;\n    Surface.fn = Surface.prototype;\n    Surface.fn.init = Surface.fn.constructor;\n\n    var prototypeAccessors = { type: {} };\n\n    prototypeAccessors.type.get = function () {\n        return \"canvas\";\n    };\n\n    Surface.prototype.destroy = function destroy () {\n        BaseSurface.prototype.destroy.call(this);\n\n        if (this._root) {\n            this._root.destroy();\n            this._root = null;\n        }\n\n        if (this._searchTree) {\n            this._searchTree.clear();\n            delete this._searchTree;\n        }\n\n        if (this._cursor) {\n            this._cursor.destroy();\n            delete this._cursor;\n        }\n\n        unbindEvents(this.element, {\n            click: this._mouseTrackHandler,\n            mousemove: this._mouseTrackHandler\n        });\n    };\n\n    Surface.prototype.draw = function draw (element) {\n        BaseSurface.prototype.draw.call(this, element);\n        this._root.load([ element ], undefined, this.options.cors);\n\n        if (this._searchTree) {\n            this._searchTree.add([ element ]);\n        }\n    };\n\n    Surface.prototype.clear = function clear () {\n        BaseSurface.prototype.clear.call(this);\n        this._root.clear();\n\n        if (this._searchTree) {\n            this._searchTree.clear();\n        }\n\n        if (this._cursor) {\n            this._cursor.clear();\n        }\n    };\n\n    Surface.prototype.eventTarget = function eventTarget (e) {\n        if (this._searchTree) {\n            var point = this._surfacePoint(e);\n            var shape = this._searchTree.pointShape(point);\n            return shape;\n        }\n    };\n\n    Surface.prototype.image = function image () {\n        var ref = this;\n        var root = ref._root;\n        var rootElement = ref._rootElement;\n        var loadingStates = [];\n\n        root.traverse(function (childNode) {\n            if (childNode.loading) {\n                loadingStates.push(childNode.loading);\n            }\n        });\n\n        var promise = createPromise();\n        var resolveDataURL = function () {\n            root._invalidate({ fixedScale: true });\n\n            try {\n                var data = rootElement.toDataURL();\n                promise.resolve(data);\n            } catch (e) {\n                promise.reject(e);\n            }\n        };\n\n        promiseAll(loadingStates).then(resolveDataURL, resolveDataURL);\n\n        return promise;\n    };\n\n    Surface.prototype.suspendTracking = function suspendTracking () {\n        BaseSurface.prototype.suspendTracking.call(this);\n        if (this._searchTree) {\n            this._searchTree.clear();\n            delete this._searchTree;\n        }\n    };\n\n    Surface.prototype.resumeTracking = function resumeTracking () {\n        BaseSurface.prototype.resumeTracking.call(this);\n        if (!this._searchTree) {\n            this._searchTree = new ShapesQuadTree();\n\n            var childNodes = this._root.childNodes;\n            var rootElements = [];\n            for (var idx = 0; idx < childNodes.length; idx++) {\n                rootElements.push(childNodes[idx].srcElement);\n            }\n            this._searchTree.add(rootElements);\n        }\n    };\n\n    Surface.prototype._resize = function _resize () {\n        this._rootElement.width = this._size.width;\n        this._rootElement.height = this._size.height;\n\n        this._root.size = this._size;\n        this._root.invalidate();\n    };\n\n    Surface.prototype._template = function _template () {\n        return \"<canvas style='width: 100%; height: 100%;'></canvas>\";\n    };\n\n    Surface.prototype._enableTracking = function _enableTracking () {\n        this._searchTree = new ShapesQuadTree();\n        this._cursor = new SurfaceCursor(this);\n\n        BaseSurface.prototype._enableTracking.call(this);\n    };\n\n    Surface.prototype._trackMouse = function _trackMouse (e) {\n        if (this._suspendedTracking) {\n            return;\n        }\n\n        var shape = this.eventTarget(e);\n\n        if (e.type !== \"click\") {\n            var currentShape = this._currentShape;\n            if (currentShape && currentShape !== shape) {\n                this.trigger(\"mouseleave\", {\n                    element: currentShape,\n                    originalEvent: e,\n                    type: \"mouseleave\"\n                });\n            }\n\n            if (shape && currentShape !== shape) {\n                this.trigger(\"mouseenter\", {\n                    element: shape,\n                    originalEvent: e,\n                    type: \"mouseenter\"\n                });\n            }\n\n            this.trigger(\"mousemove\", {\n                element: shape,\n                originalEvent: e,\n                type: \"mousemove\"\n            });\n\n            this._currentShape = shape;\n        } else if (shape) {\n            this.trigger(\"click\", {\n                element: shape,\n                originalEvent: e,\n                type: \"click\"\n            });\n        }\n    };\n\n    Object.defineProperties( Surface.prototype, prototypeAccessors );\n\n    return Surface;\n}(Surface$2));\n\nvar instance$2;\nvar support$1;\n\nvar hasDocument = function () { return typeof document !== \"undefined\"; };\n\nvar supportsCanvas = function () { return hasDocument() &&\n    document.createElement(\"canvas\").getContext; };\n\nvar supportsSVG = function () { return hasDocument() &&\n    document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"); };\n\nvar SurfaceFactory = (function (Class$$1) {\n    function SurfaceFactory() {\n        Class$$1.call(this);\n\n        this._items = [ {\n            name: \"svg\",\n            type: Surface$3\n        }, {\n            name: \"canvas\",\n            type: Surface$4\n        } ];\n    }\n\n    extendStatic(SurfaceFactory, Class$$1);\n    SurfaceFactory.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    SurfaceFactory.prototype.constructor = SurfaceFactory;\n    SurfaceFactory.fn = SurfaceFactory.prototype;\n    SurfaceFactory.fn.init = SurfaceFactory.fn.constructor;\n\n    var staticAccessors = { support: {},current: {} };\n\n    staticAccessors.support.get = function () {\n        if (!support$1) {\n            support$1 = {\n                canvas: supportsCanvas(),\n                svg: supportsSVG()\n            };\n        }\n\n        return support$1;\n    };\n\n    staticAccessors.current.get = function () {\n        if (!instance$2) {\n            instance$2 = new SurfaceFactory();\n        }\n\n        return instance$2;\n    };\n\n    SurfaceFactory.prototype.create = function create (element, options) {\n        var items = this._items;\n        var match = items[0];\n\n        if (options && options.type) {\n            var preferred = options.type.toLowerCase();\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].name === preferred) {\n                    match = items[i];\n                    break;\n                }\n            }\n        }\n\n        if (match) {\n            return new match.type(element, options);\n        }\n\n        kendo.logToConsole(\n            \"Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\\n\" +\n            \"- The browser does not support SVG and Canvas. User agent: \" + (navigator.userAgent));\n    };\n\n    Object.defineProperties( SurfaceFactory, staticAccessors );\n\n    return SurfaceFactory;\n}(Class));\n\nvar Surface = (function (BaseSurface) {\n    function Surface () {\n        BaseSurface.apply(this, arguments);\n    }\n\n    extendStatic(Surface, BaseSurface);\n    Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n    Surface.prototype.constructor = Surface;\n    Surface.fn = Surface.prototype;\n    Surface.fn.init = Surface.fn.constructor;\n\n    var staticAccessors = { support: {} };\n\n    staticAccessors.support.get = function () {\n        return SurfaceFactory.support;\n    };\n\n    Surface.create = function create (element, options) {\n        return SurfaceFactory.current.create(element, options);\n    };\n\n    Object.defineProperties( Surface, staticAccessors );\n\n    return Surface;\n}(Surface$2));\n\nfunction exportGroup(group) {\n    var root = new RootNode({\n        skipBaseHref: true\n    });\n    var bbox = group.clippedBBox();\n    var rootGroup = group;\n\n    if (bbox) {\n        var origin = bbox.getOrigin();\n        var exportRoot = new Group();\n        exportRoot.transform(transform$1().translate(-origin.x, -origin.y));\n        exportRoot.children.push(group);\n        rootGroup = exportRoot;\n    }\n\n    root.load([ rootGroup ]);\n\n    var svg = \"<?xml version='1.0' ?><svg xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + (root.render()) + \"</svg>\";\n\n    root.destroy();\n\n    return svg;\n}\n\nvar svg$1 = {\n\tSurface: Surface$3,\n\tRootNode: RootNode,\n\tNode: Node,\n\tGroupNode: GroupNode,\n\tArcNode: ArcNode,\n\tCircleNode: CircleNode,\n\tRectNode: RectNode,\n\tImageNode: ImageNode,\n\tTextNode: TextNode,\n\tPathNode: PathNode,\n\tMultiPathNode: MultiPathNode,\n\tDefinitionNode: DefinitionNode,\n\tClipNode: ClipNode,\n\tGradientStopNode: GradientStopNode,\n\tLinearGradientNode: LinearGradientNode,\n\tRadialGradientNode: RadialGradientNode,\n\texportGroup: exportGroup\n};\n\nvar canvas = {\n\tSurface: Surface$4,\n\tRootNode: RootNode$2,\n\tNode: Node$2,\n\tGroupNode: GroupNode$2,\n\tArcNode: ArcNode$2,\n\tCircleNode: CircleNode$2,\n\tRectNode: RectNode$2,\n\tImageNode: ImageNode$2,\n\tTextNode: TextNode$2,\n\tPathNode: PathNode$2,\n\tMultiPathNode: MultiPathNode$2\n};\n\nfunction exportImage(group, options) {\n    var defaults = {\n        width: \"800px\", height: \"600px\",\n        cors: \"Anonymous\"\n    };\n\n    var exportRoot = group;\n    var bbox = group.clippedBBox();\n\n    if (bbox) {\n        var origin = bbox.getOrigin();\n        exportRoot = new Group();\n        exportRoot.transform(transform$1().translate(-origin.x, -origin.y));\n        exportRoot.children.push(group);\n\n        var size = bbox.getSize();\n        defaults.width = size.width + \"px\";\n        defaults.height = size.height + \"px\";\n    }\n\n    var surfaceOptions = $.extend(defaults, options);\n\n    var container = document.createElement(\"div\");\n    var style = container.style;\n\n    style.display = \"none\";\n    style.width = surfaceOptions.width;\n    style.height = surfaceOptions.height;\n    document.body.appendChild(container);\n\n    var surface = new Surface$4(container, surfaceOptions);\n    surface.suspendTracking();\n    surface.draw(exportRoot);\n\n    var promise = surface.image();\n    var destroy = function () {\n        surface.destroy();\n        document.body.removeChild(container);\n    };\n    promise.then(destroy, destroy);\n\n    return promise;\n}\n\nfunction exportSVG(group, options) {\n    var svg = exportGroup(group);\n\n    if (!options || !options.raw) {\n        svg = \"data:image/svg+xml;base64,\" + encodeBase64(svg);\n    }\n\n    return createPromise().resolve(svg);\n}\n\n/* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n/* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n/* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty, yoda */\n/* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\nvar browser = supportBrowser || {};\n/*\n\n  XXX: to test:\n\n  - cloneNodes function:\n    - drawing document containing canvas with page breaking\n    - drawing document with named radio <input>-s (should not clear selection)\n    - IE9/IE10 don't support el.dataset; do they copy user data?\n\n  - repeating table headers/footers on page breaking\n\n  - forceBreak, keepTogether\n\n  - avoidLinks\n\n */\n\n/* -----[ local vars ]----- */\n\nfunction slice$1$1(thing) {\n    return Array.prototype.slice.call(thing);\n}\n\nvar KENDO_PSEUDO_ELEMENT = \"KENDO-PSEUDO-ELEMENT\";\n\nvar IMAGE_CACHE = {};\n\nvar nodeInfo = {};\nnodeInfo._root = nodeInfo;\n\n/* -----[ Custom Text node to speed up rendering in kendo.pdf ]----- */\n\nvar inBrowser = typeof window !== 'undefined';\nvar microsoft = inBrowser ? browser.msie || browser.edge : false;\n\nvar TextRect = (function (Text$$1) {\n  function TextRect(str, rect, options) {\n        Text$$1.call(this, str, rect.getOrigin(), options);\n        this._pdfRect = rect;\n    }\n\n  extendStatic(TextRect, Text$$1);\n  TextRect.prototype = Object.create( Text$$1 && Text$$1.prototype );\n  TextRect.prototype.constructor = TextRect;\n  TextRect.fn = TextRect.prototype;\n  TextRect.fn.init = TextRect.fn.constructor;\n    TextRect.prototype.rect = function rect () {\n        // this is the crux of it: we can avoid a call to\n        // measure(), which is what the base class does, since we\n        // already know the rect.  measure() is s-l-o-w.\n        return this._pdfRect;\n    };\n    TextRect.prototype.rawBBox = function rawBBox () {\n        // also let's avoid creating a new rectangle.\n        return this._pdfRect;\n    };\n\n  return TextRect;\n}(Text));\n\nfunction addClass(el, cls) {\n    if (el.classList) {\n        el.classList.add(cls);\n    } else {\n        el.className += \" \" + cls;\n    }\n}\n\nfunction removeClass(el, cls) {\n    if (el.classList) {\n        el.classList.remove(cls);\n    } else {\n        el.className = el.className.split(/\\s+/).reduce(function(a, word){\n            if (word != cls) {\n                a.push(word);\n            }\n            return a;\n        }, []).join(\" \");\n    }\n}\n\nfunction setCSS(el, styles) {\n    Object.keys(styles).forEach(function(key){\n        el.style[key] = styles[key];\n    });\n}\n\nvar matches = typeof Element !== \"undefined\" && Element.prototype && (function(p){\n    if (p.matches) {\n        return function(el, selector) { return el.matches(selector); };\n    }\n    if (p.webkitMatchesSelector) {\n        return function(el, selector) { return el.webkitMatchesSelector(selector); };\n    }\n    if (p.mozMatchesSelector) {\n        return function(el, selector) { return el.mozMatchesSelector(selector); };\n    }\n    if (p.msMatchesSelector) {\n        return function(el, selector) { return el.msMatchesSelector(selector); };\n    }\n    return function(s) {\n\treturn [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n    };\n})(Element.prototype);\n\nfunction closest(el, selector) {\n    if (el.closest) {\n        return el.closest(selector);\n    }\n    // IE: stringifying rather than simply comparing with `document`,\n    // which is not iframe-proof and fails in editor export \n    // https://github.com/telerik/kendo/issues/6721\n    while (el && !/^\\[object (?:HTML)?Document\\]$/.test(String(el))) {\n        if (el.nodeType == 1 /* Element */ && matches(el, selector)) {\n            return el;\n        }\n        el = el.parentNode;\n    }\n}\n\n// clone nodes ourselves, so that we redraw <canvas> (DOM or\n// jQuery clone will not)\nvar cloneNodes = (function($){\n    if ($) {\n        // if we have Kendo and jQuery, use this version as it will\n        // maintain proper links between cloned element and Kendo\n        // widgets (i.e. it clones jQuery data(), which isn't the same\n        // as element's data attributes).\n        // https://github.com/telerik/kendo-ui-core/issues/2750\n        return function cloneNodes(el) {\n            var clone = el.cloneNode(false);\n            if (el.nodeType == 1 /* Element */) {\n                var $el = $(el), $clone = $(clone), i;\n                var data = $el.data();\n                for (i in data) {\n                    $clone.data(i, data[i]);\n                }\n                if (/^canvas$/i.test(el.tagName)) {\n                    clone.getContext(\"2d\").drawImage(el, 0, 0);\n                } else if (/^(?:input|select|textarea|option)$/i.test(el.tagName)) {\n                    // drop the name attributes so that we don't affect the selection of the\n                    // original nodes (i.e. checked status of radio buttons) when we insert our copy\n                    // into the DOM.  https://github.com/telerik/kendo/issues/5409\n                    clone.removeAttribute(\"id\");\n                    clone.removeAttribute(\"name\");\n                    if (!/^textarea$/i.test(el.tagName)) {\n                        clone.value = el.value;\n                    }\n                    clone.checked = el.checked;\n                    clone.selected = el.selected;\n                }\n                for (i = el.firstChild; i; i = i.nextSibling) {\n                    clone.appendChild(cloneNodes(i));\n                }\n            }\n            return clone;\n        };\n    } else {\n        // the no-jQuery version\n        return function cloneNodes(el) {\n            var clone = (function dive(node){\n                var clone = node.cloneNode(false);\n                if (node._kendoExportVisual) {\n                    clone._kendoExportVisual = node._kendoExportVisual;\n                }\n                for (var i = node.firstChild; i; i = i.nextSibling) {\n                    clone.appendChild(dive(i));\n                }\n                return clone;\n            })(el);\n\n            // re-draw canvases - https://github.com/telerik/kendo/issues/4872\n            var canvases = el.querySelectorAll(\"canvas\");\n            if (canvases.length) {\n                slice$1$1(clone.querySelectorAll(\"canvas\")).forEach(function (canvas$$1, i) {\n                    canvas$$1.getContext(\"2d\").drawImage(canvases[i], 0, 0);\n                });\n            }\n\n            // remove \"name\" attributes from <input> elements -\n            // https://github.com/telerik/kendo/issues/5409\n            var orig = el.querySelectorAll(\"input, select, textarea, option\");\n            slice$1$1(clone.querySelectorAll(\"input, select, textarea, option\")).forEach(function (el, i) {\n                el.removeAttribute(\"id\");\n                el.removeAttribute(\"name\");\n                if (!/^textarea$/i.test(el.tagName)) {\n                    el.value = orig[i].value;\n                }\n                el.checked = orig[i].checked;\n                el.selected = orig[i].selected;\n            });\n\n            return clone;\n        };\n    }\n})(typeof window !== \"undefined\" && window.kendo && window.kendo.jQuery);\n\nfunction getXY(thing) {\n    if (typeof thing == \"number\") {\n        return { x: thing, y: thing };\n    }\n    if (Array.isArray(thing)) {\n        return { x: thing[0], y: thing[1] };\n    }\n    return { x: thing.x, y: thing.y };\n}\n\nfunction drawDOM(element, options) {\n    if (!options) {\n        options = {};\n    }\n    var promise = createPromise();\n\n    if (!element) {\n        return promise.reject(\"No element to export\");\n    }\n\n    if (typeof window.getComputedStyle != \"function\") {\n        throw new Error(\"window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.\");\n    }\n\n    kendo.pdf.defineFont(getFontFaces(element.ownerDocument));\n\n    var scale = getXY(options.scale || 1);\n\n    function doOne(element) {\n        var group = new Group();\n\n        // translate to start of page\n        var pos = element.getBoundingClientRect();\n        setTransform$1(group, [\n            scale.x,\n            0,\n            0,\n            scale.y,\n            (-pos.left * scale.x),\n            (-pos.top * scale.y)\n        ]);\n\n        nodeInfo._clipbox = false;\n        nodeInfo._matrix = Matrix.unit();\n        nodeInfo._stackingContext = {\n            element: element,\n            group: group\n        };\n\n        if (options.avoidLinks === true) {\n            nodeInfo._avoidLinks = \"a\";\n        } else {\n            nodeInfo._avoidLinks = options.avoidLinks;\n        }\n\n        addClass(element, \"k-pdf-export\");\n        renderElement(element, group);\n        removeClass(element, \"k-pdf-export\");\n\n        return group;\n    }\n\n    cacheImages([ element ], function(){\n        var forceBreak = options && options.forcePageBreak;\n        var hasPaperSize = options && options.paperSize && options.paperSize != \"auto\";\n        var paperOptions = kendo.pdf.getPaperOptions(function(key, def){\n            if (key == \"paperSize\") {\n                // PDF.getPaperOptions croaks on \"auto\", just pass dummy A4 as we might\n                // still be interested in margins.\n                return hasPaperSize ? options[key] : \"A4\";\n            }\n            return key in options ? options[key] : def;\n        });\n        var pageWidth = hasPaperSize && paperOptions.paperSize[0];\n        var pageHeight = hasPaperSize && paperOptions.paperSize[1];\n        var margin = options.margin && paperOptions.margin;\n        var hasMargin = Boolean(margin);\n        if (forceBreak || pageHeight) {\n            if (!margin) {\n                margin = { left: 0, top: 0, right: 0, bottom: 0 };\n            }\n\n            // we want paper size and margin to be unaffected by\n            // scaling in the output, so we have to reverse-scale\n            // before our calculations begin.\n            if (pageWidth)  { pageWidth  /= scale.x; }\n            if (pageHeight) { pageHeight /= scale.y; }\n            margin.left   /= scale.x;\n            margin.right  /= scale.x;\n            margin.top    /= scale.y;\n            margin.bottom /= scale.y;\n\n            var group = new Group({\n                pdf: {\n                    multiPage     : true,\n                    paperSize     : hasPaperSize ? paperOptions.paperSize : \"auto\",\n                    _ignoreMargin : hasMargin // HACK!  see exportPDF in pdf/drawing.js\n                }\n            });\n            handlePageBreaks(\n                function(x) {\n                    if (options.progress) {\n                        var canceled = false, pageNum = 0;\n                        (function next(){\n                            if (pageNum < x.pages.length) {\n                                var page = doOne(x.pages[pageNum]);\n                                group.append(page);\n                                options.progress({\n                                    page: page,\n                                    pageNum: ++pageNum,\n                                    totalPages: x.pages.length,\n                                    cancel: function() {\n                                        canceled = true;\n                                    }\n                                });\n                                if (!canceled) {\n                                    setTimeout(next);\n                                } else {\n                                    // XXX: should we also fail() the deferred object?\n                                    x.container.parentNode.removeChild(x.container);\n                                }\n                            } else {\n                                x.container.parentNode.removeChild(x.container);\n                                promise.resolve(group);\n                            }\n                        })();\n                    } else {\n                        x.pages.forEach(function(page){\n                            group.append(doOne(page));\n                        });\n                        x.container.parentNode.removeChild(x.container);\n                        promise.resolve(group);\n                    }\n                },\n                element,\n                forceBreak,\n                pageWidth ? pageWidth - margin.left - margin.right : null,\n                pageHeight ? pageHeight - margin.top - margin.bottom : null,\n                margin,\n                options\n            );\n        } else {\n            promise.resolve(doOne(element));\n        }\n    });\n\n    function makeTemplate(template) {\n        if (template != null) {\n            if (typeof template == \"string\") {\n                template = kendo.template(template.replace(/^\\s+|\\s+$/g, \"\"));\n            }\n            if (typeof template == \"function\") {\n                return function(data) {\n                    var el = template(data);\n                    if (el && typeof el == \"string\") {\n                        var div = document.createElement(\"div\");\n                        div.innerHTML = el;\n                        el = div.firstElementChild;\n                    }\n                    return el;\n                };\n            }\n            // assumed DOM element\n            return function() {\n                return template.cloneNode(true);\n            };\n        }\n    }\n\n    function handlePageBreaks(callback, element, forceBreak, pageWidth, pageHeight, margin, options) {\n        var template = makeTemplate(options.template);\n        var doc = element.ownerDocument;\n        var pages = [];\n        var copy = options._destructive ? element : cloneNodes(element);\n        var container = doc.createElement(\"KENDO-PDF-DOCUMENT\");\n        var adjust = 0;\n\n        // make sure <tfoot> elements are at the end (Grid widget\n        // places TFOOT before TBODY, tricking our algorithm to\n        // insert a page break right after the header).\n        // https://github.com/telerik/kendo/issues/4699\n        slice$1$1(copy.querySelectorAll(\"tfoot\")).forEach(function(tfoot){\n            tfoot.parentNode.appendChild(tfoot);\n        });\n\n        // remember the index of each LI from an ordered list.\n        // we'll use it to reconstruct the proper numbering.\n        slice$1$1(copy.querySelectorAll(\"ol\")).forEach(function(ol){\n            slice$1$1(ol.children).forEach(function(li, index){\n                li.setAttribute(\"kendo-split-index\", index);\n            });\n        });\n\n        setCSS(container, {\n            display   : \"block\",\n            position  : \"absolute\",\n            boxSizing : \"content-box\",\n            left      : \"-10000px\",\n            top       : \"-10000px\"\n        });\n\n        if (pageWidth) {\n            // subtle: if we don't set the width *and* margins here, the layout in this\n            // container will be different from the one in our final page elements, and we'll\n            // split at the wrong places.\n            setCSS(container, {\n                width        : pageWidth + \"px\",\n                paddingLeft  : margin.left + \"px\",\n                paddingRight : margin.right + \"px\"\n            });\n\n            // when the first element has a margin-top (i.e. a <h1>) the page will be\n            // inadvertently enlarged by that number (the browser will report the container's\n            // bounding box top to start at the element's top, rather than including its\n            // margin).  Adding overflow: hidden seems to fix it.\n            //\n            // to understand the difference, try the following snippets in your browser:\n            //\n            // 1. <div style=\"background: yellow\">\n            //      <h1 style=\"margin: 3em\">Foo</h1>\n            //    </div>\n            //\n            // 2. <div style=\"background: yellow; overflow: hidden\">\n            //      <h1 style=\"margin: 3em\">Foo</h1>\n            //    </div>\n            //\n            // this detail is not important when automatic page breaking is not requested, hence\n            // doing it only if pageWidth is defined.\n            setCSS(copy, { overflow: \"hidden\" });\n        }\n\n        element.parentNode.insertBefore(container, element);\n        container.appendChild(copy);\n\n        // With cache disabled, images will still have height zero until their `complete` attribute\n        // is true.  `whenImagesAreActuallyLoaded` will wait for it.\n        if (options.beforePageBreak) {\n            whenImagesAreActuallyLoaded([ container ], function() {\n                options.beforePageBreak(container, doPageBreak);\n            });\n        } else {\n            whenImagesAreActuallyLoaded([ container ], doPageBreak);\n        }\n\n        function doPageBreak() {\n            if (forceBreak != \"-\" || pageHeight) {\n                splitElement(copy);\n            }\n\n            {\n                var page = makePage();\n                copy.parentNode.insertBefore(page, copy);\n                page.appendChild(copy);\n            }\n\n            if (template) {\n                pages.forEach(function(page, i){\n                    var el = template({\n                        element    : page,\n                        pageNum    : i + 1,\n                        totalPages : pages.length\n                    });\n                    if (el) {\n                        page.appendChild(el);\n                    }\n                });\n            }\n\n            cacheImages(pages, callback.bind(null, { pages: pages, container: container }));\n        }\n\n        function keepTogether(el) {\n            if (options.keepTogether && matches(el, options.keepTogether) && el.offsetHeight <= pageHeight - adjust) {\n                return true;\n            }\n\n            var tag = el.tagName;\n            if (/^h[1-6]$/i.test(tag) && el.offsetHeight >= pageHeight - adjust) {\n                return false;\n            }\n\n            return (el.getAttribute(\"data-kendo-chart\") ||\n                    /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName));\n        }\n\n        function splitElement(element) {\n            if (element.tagName == \"TABLE\") {\n                setCSS(element, { tableLayout: \"fixed\" });\n            }\n            if (keepTogether(element)) {\n                return;\n            }\n            var style = getComputedStyle$1(element);\n            var bottomPadding = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n            var bottomBorder = parseFloat(getPropertyValue(style, \"border-bottom-width\"));\n            var saveAdjust = adjust;\n            adjust += bottomPadding + bottomBorder;\n            var isFirst = true;\n            for (var el = element.firstChild; el; el = el.nextSibling) {\n                if (el.nodeType == 1 /* Element */) {\n                    isFirst = false;\n                    if (matches(el, forceBreak)) {\n                        breakAtElement(el);\n                        continue;\n                    }\n                    if (!pageHeight) {\n                        // we're in \"manual breaks mode\"\n                        splitElement(el);\n                        continue;\n                    }\n                    if (!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle$1(el), \"position\"))) {\n                        continue;\n                    }\n                    var fall = fallsOnMargin(el);\n                    if (fall == 1) {\n                        // element starts on next page, break before anyway.\n                        breakAtElement(el);\n                    }\n                    else if (fall) {\n                        // elements ends up on next page, or possibly doesn't fit on a page at\n                        // all.  break before it anyway if it's an <img> or <tr>, otherwise\n                        // attempt to split.\n                        if (keepTogether(el)) {\n                            breakAtElement(el);\n                        } else {\n                            splitElement(el);\n                        }\n                    }\n                    else {\n                        splitElement(el);\n                    }\n                }\n                else if (el.nodeType == 3 /* Text */ && pageHeight) {\n                    splitText(el, isFirst);\n                    isFirst = false;\n                }\n            }\n            adjust = saveAdjust;\n        }\n\n        function firstInParent(el) {\n            var p = el.parentNode, first = p.firstChild;\n            if (el === first) {\n                return true;\n            }\n            if (el === p.children[0]) {\n                if (first.nodeType == 7 /* comment */ ||\n                    first.nodeType == 8 /* processing instruction */) {\n                    return true;\n                }\n                if (first.nodeType == 3 /* text */) {\n                    // if whitespace only we can probably consider it's first\n                    return !/\\S/.test(first.data);\n                }\n            }\n            return false;\n        }\n\n        function breakAtElement(el) {\n            if (el.nodeType == 1 && el !== copy && firstInParent(el)) {\n                return breakAtElement(el.parentNode);\n            }\n            var table, colgroup, thead, grid, gridHead;\n            table = closest(el, \"table\");\n            colgroup = table && table.querySelector(\"colgroup\");\n            if (options.repeatHeaders) {\n                thead = table && table.querySelector(\"thead\");\n\n                // If we break page in a Kendo Grid, repeat its header.  This ugly hack is\n                // necessary because a scrollable grid will keep the header in a separate\n                // <table> element from its content.\n                //\n                // XXX: This is likely to break as soon as the widget HTML is modified.\n                grid = closest(el, \".k-grid.k-widget\");\n                if (grid && grid.querySelector(\".k-auto-scrollable\")) {\n                    gridHead = grid.querySelector(\".k-grid-header\");\n                }\n            }\n            var page = makePage();\n            var range = doc.createRange();\n            range.setStartBefore(copy);\n            range.setEndBefore(el);\n            page.appendChild(range.extractContents());\n            copy.parentNode.insertBefore(page, copy);\n            preventBulletOnListItem(el.parentNode);\n            if (table) {\n                table = closest(el, \"table\"); // that's the <table> on next page!\n                if (options.repeatHeaders && thead) {\n                    table.insertBefore(thead.cloneNode(true), table.firstChild);\n                }\n                if (colgroup) {\n                    table.insertBefore(colgroup.cloneNode(true), table.firstChild);\n                }\n            }\n            if (options.repeatHeaders && gridHead) {\n                grid = closest(el, \".k-grid.k-widget\");\n                grid.insertBefore(gridHead.cloneNode(true), grid.firstChild);\n            }\n        }\n\n        function makePage() {\n            var page = doc.createElement(\"KENDO-PDF-PAGE\");\n            setCSS(page, {\n                display  : \"block\",\n                boxSizing: \"content-box\",\n                width    : pageWidth ? (pageWidth + \"px\") : \"auto\",\n                padding  : (margin.top + \"px \" +\n                            margin.right + \"px \" +\n                            margin.bottom + \"px \" +\n                            margin.left + \"px\"),\n\n                // allow absolutely positioned elements to be relative to current page\n                position : \"relative\",\n\n                // without the following we might affect layout of subsequent pages\n                height   : pageHeight ? (pageHeight + \"px\") : \"auto\",\n                overflow : pageHeight || pageWidth ? \"hidden\" : \"visible\",\n                clear    : \"both\"\n            });\n\n            // debug\n            // $(\"<div>\").css({\n            //     position  : \"absolute\",\n            //     left      : margin.left,\n            //     top       : margin.top,\n            //     width     : pageWidth,\n            //     height    : pageHeight,\n            //     boxSizing : \"border-box\",\n            //     background: \"rgba(255, 255, 0, 0.5)\"\n            //     //border    : \"1px solid red\"\n            // }).appendTo(page);\n\n            if (options && options.pageClassName) {\n                page.className = options.pageClassName;\n            }\n            pages.push(page);\n            return page;\n        }\n\n        function fallsOnMargin(thing) {\n            var box = thing.getBoundingClientRect();\n            if (box.width === 0 || box.height === 0) {\n                // I'd say an element with dimensions zero fits on current page.\n                return 0;\n            }\n            var top = copy.getBoundingClientRect().top;\n            var available = pageHeight - adjust;\n            return (box.height > available) ? 3\n                : (box.top - top > available) ? 1\n                : (box.bottom - top > available) ? 2\n                : 0;\n        }\n\n        function splitText(node, isFirst) {\n            if (!/\\S/.test(node.data)) {\n                return;\n            }\n\n            var len = node.data.length;\n            var range = doc.createRange();\n            range.selectNodeContents(node);\n            var fall = fallsOnMargin(range);\n            if (!fall) {\n                return;     // the whole text fits on current page\n            }\n\n            var nextnode = node;\n            if (fall == 1) {\n                // starts on next page, break before anyway.\n                if (isFirst) {\n                    // avoid leaving an empty <p>, <li>, etc. on previous page.\n                    breakAtElement(node.parentNode);\n                } else {\n                    breakAtElement(node);\n                }\n            }\n            else {\n                (function findEOP(min, pos, max) {\n                    range.setEnd(node, pos);\n                    if (min == pos || pos == max) {\n                        return pos;\n                    }\n                    if (fallsOnMargin(range)) {\n                        return findEOP(min, (min + pos) >> 1, pos);\n                    } else {\n                        return findEOP(pos, (pos + max) >> 1, max);\n                    }\n                })(0, len >> 1, len);\n\n                if (!/\\S/.test(range.toString()) && isFirst) {\n                    // avoid leaving an empty <p>, <li>, etc. on previous page.\n                    breakAtElement(node.parentNode);\n                } else {\n                    // This is only needed for IE, but it feels cleaner to do it anyway.  Without\n                    // it, IE will truncate a very long text (playground/pdf-long-text-2.html).\n                    nextnode = node.splitText(range.endOffset);\n\n                    var page = makePage();\n                    range.setStartBefore(copy);\n                    page.appendChild(range.extractContents());\n                    copy.parentNode.insertBefore(page, copy);\n                    preventBulletOnListItem(nextnode.parentNode);\n                }\n            }\n\n            splitText(nextnode);\n        }\n\n        function preventBulletOnListItem(el) {\n            // set a hint on continued LI elements, to tell the\n            // renderer not to draw the bullet again.\n            // https://github.com/telerik/kendo-ui-core/issues/2732\n            var li = closest(el, \"li\");\n            if (li) {\n                li.setAttribute(\"kendo-no-bullet\", \"1\");\n                preventBulletOnListItem(li.parentNode);\n            }\n        }\n    }\n\n    return promise;\n}\n\n// This is needed for the Spreadsheet print functionality.  Since\n// there we only need to draw text, this cuts through the ceremony\n// of drawDOM/renderElement and renders the text node directly.\nfunction drawText(element) {\n    var group = new Group();\n    nodeInfo._clipbox = false;\n    nodeInfo._matrix = Matrix.unit();\n    nodeInfo._stackingContext = {\n        element: element,\n        group: group\n    };\n    pushNodeInfo(element, getComputedStyle$1(element), group);\n    if (element.firstChild.nodeType == 3 /* Text */) {\n        // avoid the penalty of renderElement\n        renderText(element, element.firstChild, group);\n    } else {\n        _renderElement(element, group);\n    }\n    popNodeInfo();\n    return group;\n}\n\nvar parseBackgroundImage = (function(){\n    var tok_linear_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\\s*)\\(/;\n    //var tok_radial_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?radial-gradient\\s*)\\(/;\n    var tok_percent          = /^([-0-9.]+%)/;\n    var tok_length           = /^([-0-9.]+px)/;\n    var tok_keyword          = /^(left|right|top|bottom|to|center)\\W/;\n    var tok_angle            = /^([-0-9.]+(deg|grad|rad|turn)|0)/;\n    var tok_whitespace       = /^(\\s+)/;\n    var tok_popen            = /^(\\()/;\n    var tok_pclose           = /^(\\))/;\n    var tok_comma            = /^(,)/;\n    var tok_url              = /^(url)\\(/;\n    var tok_content          = /^(.*?)\\)/;\n\n    var cache1 = {}, cache2 = {};\n\n    function parse(input) {\n        var orig = input;\n        if (hasOwnProperty(cache1, orig)) {\n            return cache1[orig];\n        }\n        function skip_ws() {\n            var m = tok_whitespace.exec(input);\n            if (m) {\n                input = input.substr(m[1].length);\n            }\n        }\n        function read(token) {\n            skip_ws();\n            var m = token.exec(input);\n            if (m) {\n                input = input.substr(m[1].length);\n                return m[1];\n            }\n        }\n\n        function read_stop() {\n            var color = kendo.parseColor(input, true);\n            var length, percent;\n            if (color) {\n                var match =\n                    /^#[0-9a-f]+/i.exec(input) ||\n                    /^rgba?\\(.*?\\)/i.exec(input) ||\n                    /^..*?\\b/.exec(input); // maybe named color\n                input = input.substr(match[0].length);\n                color = color.toRGB();\n                if (!(length = read(tok_length))) {\n                    percent = read(tok_percent);\n                }\n                return { color: color, length: length, percent: percent };\n            }\n        }\n\n        function read_linear_gradient(propName) {\n            var angle;\n            var to1, to2;\n            var stops = [];\n            var reverse = false;\n\n            if (read(tok_popen)) {\n                // 1. [ <angle> || to <side-or-corner>, ]?\n                angle = read(tok_angle);\n                if (angle == \"0\") {\n                    angle = \"0deg\"; // Edge\n                }\n                if (angle) {\n                    angle = parseAngle(angle);\n                    read(tok_comma);\n                }\n                else {\n                    to1 = read(tok_keyword);\n                    if (to1 == \"to\") {\n                        to1 = read(tok_keyword);\n                    } else if (to1 && /^-/.test(propName)) {\n                        reverse = true;\n                    }\n                    to2 = read(tok_keyword);\n                    read(tok_comma);\n                }\n\n                if (/-moz-/.test(propName) && angle == null && to1 == null) {\n                    var x = read(tok_percent), y = read(tok_percent);\n                    reverse = true;\n                    if (x == \"0%\") {\n                        to1 = \"left\";\n                    } else if (x == \"100%\") {\n                        to1 = \"right\";\n                    }\n                    if (y == \"0%\") {\n                        to2 = \"top\";\n                    } else if (y == \"100%\") {\n                        to2 = \"bottom\";\n                    }\n                    read(tok_comma);\n                }\n\n                // 2. color stops\n                while (input && !read(tok_pclose)) {\n                    var stop = read_stop();\n                    if (!stop) {\n                        break;\n                    }\n                    stops.push(stop);\n                    read(tok_comma);\n                }\n\n                return {\n                    type    : \"linear\",\n                    angle   : angle,\n                    to      : to1 && to2 ? to1 + \" \" + to2 : to1 ? to1 : to2 ? to2 : null,\n                    stops   : stops,\n                    reverse : reverse\n                };\n            }\n        }\n\n        function read_url() {\n            if (read(tok_popen)) {\n                var url = read(tok_content);\n                url = url.replace(/^['\"]+|[\"']+$/g, \"\");\n                read(tok_pclose);\n                return { type: \"url\", url: url };\n            }\n        }\n\n        var tok;\n\n        if ((tok = read(tok_linear_gradient))) {\n            tok = read_linear_gradient(tok);\n        }\n        else if ((tok = read(tok_url))) {\n            tok = read_url();\n        }\n\n        return (cache1[orig] = tok || { type: \"none\" });\n    }\n\n    return function(input) {\n        if (hasOwnProperty(cache2, input)) {\n            return cache2[input];\n        }\n        return (cache2[input] = splitProperty(input).map(parse));\n    };\n})();\n\nvar splitProperty = (function(){\n    var cache = {};\n    return function(input, separator) {\n        if (!separator) {\n            separator = /^\\s*,\\s*/;\n        }\n\n        var cacheKey = input + separator;\n\n        if (hasOwnProperty(cache, cacheKey)) {\n            return cache[cacheKey];\n        }\n\n        var ret = [];\n        var last$$1 = 0, pos = 0;\n        var in_paren = 0;\n        var in_string = false;\n        var m;\n\n        function looking_at(rx) {\n            return (m = rx.exec(input.substr(pos)));\n        }\n\n        function trim(str) {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n\n        while (pos < input.length) {\n            if (!in_string && looking_at(/^[\\(\\[\\{]/)) {\n                in_paren++;\n                pos++;\n            }\n            else if (!in_string && looking_at(/^[\\)\\]\\}]/)) {\n                in_paren--;\n                pos++;\n            }\n            else if (!in_string && looking_at(/^[\\\"\\']/)) {\n                in_string = m[0];\n                pos++;\n            }\n            else if (in_string == \"'\" && looking_at(/^\\\\\\'/)) {\n                pos += 2;\n            }\n            else if (in_string == '\"' && looking_at(/^\\\\\\\"/)) {\n                pos += 2;\n            }\n            else if (in_string == \"'\" && looking_at(/^\\'/)) {\n                in_string = false;\n                pos++;\n            }\n            else if (in_string == '\"' && looking_at(/^\\\"/)) {\n                in_string = false;\n                pos++;\n            }\n            else if (looking_at(separator)) {\n                if (!in_string && !in_paren && pos > last$$1) {\n                    ret.push(trim(input.substring(last$$1, pos)));\n                    last$$1 = pos + m[0].length;\n                }\n                pos += m[0].length;\n            }\n            else {\n                pos++;\n            }\n        }\n        if (last$$1 < pos) {\n            ret.push(trim(input.substring(last$$1, pos)));\n        }\n        return (cache[cacheKey] = ret);\n    };\n})();\n\nvar getFontURL = (function(cache){\n    return function(el){\n        // XXX: for IE we get here the whole cssText of the rule,\n        // because the computedStyle.src is empty.  Next time we need\n        // to fix these regexps we better write a CSS parser. :-\\\n        var url = cache[el];\n        if (!url) {\n            var m;\n            if ((m = /url\\((['\"]?)([^'\")]*?)\\1\\)\\s+format\\((['\"]?)truetype\\3\\)/.exec(el))) {\n                url = cache[el] = m[2];\n            } else if ((m = /url\\((['\"]?)([^'\")]*?\\.ttf)\\1\\)/.exec(el))) {\n                url = cache[el] = m[2];\n            }\n        }\n        return url;\n    };\n})(Object.create ? Object.create(null) : {});\n\nvar getFontHeight = (function(cache){\n    return function(font) {\n        var height = cache[font];\n        if (height == null) {\n            height = cache[font] = kendoUtil.measureText(\"Mapq\", { font: font }).height;\n        }\n        return height;\n    };\n})(Object.create ? Object.create(null) : {});\n\nfunction getFontFaces(doc) {\n    if (doc == null) {\n        doc = document;\n    }\n    var result = {};\n    for (var i = 0; i < doc.styleSheets.length; ++i) {\n        doStylesheet(doc.styleSheets[i]);\n    }\n    return result;\n    function doStylesheet(ss) {\n        if (ss) {\n            var rules = null;\n            try {\n                rules = ss.cssRules;\n            } catch (ex) {}\n            if (rules) {\n                addRules(ss, rules);\n            }\n        }\n    }\n    function findFonts(rule) {\n        var src = getPropertyValue(rule.style, \"src\");\n        if (src) {\n            return splitProperty(src).reduce(function(a, el){\n                var font = getFontURL(el);\n                if (font) {\n                    a.push(font);\n                }\n                return a;\n            }, []);\n        } else {\n            // Internet Explorer\n            // XXX: this is gross.  should work though for valid CSS.\n            var font = getFontURL(rule.cssText);\n            return font ? [ font ] : [];\n        }\n    }\n    function addRules(styleSheet, rules) {\n        for (var i = 0; i < rules.length; ++i) {\n            var r = rules[i];\n            switch (r.type) {\n              case 3:       // CSSImportRule\n                doStylesheet(r.styleSheet);\n                break;\n              case 5:       // CSSFontFaceRule\n                var style  = r.style;\n                var family = splitProperty(getPropertyValue(style, \"font-family\"));\n                var bold   = /^([56789]00|bold)$/i.test(getPropertyValue(style, \"font-weight\"));\n                var italic = \"italic\" == getPropertyValue(style, \"font-style\");\n                var src    = findFonts(r);\n                if (src.length > 0) {\n                    addRule(styleSheet, family, bold, italic, src[0]);\n                }\n            }\n        }\n    }\n    function addRule(styleSheet, names, bold, italic, url) {\n        // We get full resolved absolute URLs in Chrome, but sadly\n        // not in Firefox.\n        if (!(/^data:/i.test(url))) {\n            if (!(/^[^\\/:]+:\\/\\//.test(url) || /^\\//.test(url))) {\n                url = String(styleSheet.href).replace(/[^\\/]*$/, \"\") + url;\n            }\n        }\n        names.forEach(function(name){\n            name = name.replace(/^(['\"]?)(.*?)\\1$/, \"$2\"); // it's quoted\n            if (bold) {\n                name += \"|bold\";\n            }\n            if (italic) {\n                name += \"|italic\";\n            }\n            result[name] = url;\n        });\n    }\n}\n\nfunction hasOwnProperty(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction getCounter(name) {\n    name = \"_counter_\" + name;\n    return nodeInfo[name];\n}\n\nfunction getAllCounters(name) {\n    var values = [], p = nodeInfo;\n    name = \"_counter_\" + name;\n    while (p) {\n        if (hasOwnProperty(p, name)) {\n            values.push(p[name]);\n        }\n        p = Object.getPrototypeOf(p);\n    }\n    return values.reverse();\n}\n\nfunction incCounter(name, inc) {\n    var p = nodeInfo;\n    name = \"_counter_\" + name;\n    while (p && !hasOwnProperty(p, name)) {\n        p = Object.getPrototypeOf(p);\n    }\n    if (!p) {\n        p = nodeInfo._root;\n    }\n    p[name] = (p[name] || 0) + (inc == null ? 1 : inc);\n}\n\nfunction resetCounter(name, val) {\n    name = \"_counter_\" + name;\n    nodeInfo[name] = val == null ? 0 : val;\n}\n\nfunction doCounters(a, f, def) {\n    for (var i = 0; i < a.length;) {\n        var name = a[i++];\n        var val = parseFloat(a[i]);\n        if (isNaN(val)) {\n            f(name, def);\n        } else {\n            f(name, val);\n            ++i;\n        }\n    }\n}\n\nfunction updateCounters(style) {\n    var counterReset = getPropertyValue(style, \"counter-reset\");\n    if (counterReset) {\n        doCounters(splitProperty(counterReset, /^\\s+/), resetCounter, 0);\n    }\n    var counterIncrement = getPropertyValue(style, \"counter-increment\");\n    if (counterIncrement) {\n        doCounters(splitProperty(counterIncrement, /^\\s+/), incCounter, 1);\n    }\n}\n\nfunction parseColor$1(str, css) {\n    var color = kendo.parseColor(str, true);\n    if (color) {\n        color = color.toRGB();\n        if (css) {\n            color = color.toCssRgba();\n        } else if (color.a === 0) {\n            color = null;\n        }\n    }\n    return color;\n}\n\nfunction whenImagesAreActuallyLoaded(elements, callback) {\n    var pending = 0;\n    elements.forEach(function(el){\n        var images = el.querySelectorAll(\"img\");\n        for (var i = 0; i < images.length; ++i) {\n            var img = images[i];\n            if (!img.complete) {\n                pending++;\n                img.onload = img.onerror = next;\n            }\n        }\n    });\n    if (!pending) {\n        next();\n    }\n    function next() {\n        if (--pending <= 0) {\n            callback();\n        }\n    }\n}\n\nfunction cacheImages(elements, callback) {\n    var urls = [];\n    function add(url) {\n        if (!IMAGE_CACHE[url]) {\n            IMAGE_CACHE[url] = true;\n            urls.push(url);\n        }\n    }\n\n    elements.forEach(function dive(element){\n        if (/^img$/i.test(element.tagName)) {\n            add(element.src);\n        }\n        parseBackgroundImage(\n            getPropertyValue(\n                getComputedStyle$1(element), \"background-image\"\n            )\n        ).forEach(function(bg){\n            if (bg.type == \"url\") {\n                add(bg.url);\n            }\n        });\n\n        if (element.children) {\n            slice$1$1(element.children).forEach(dive);\n        }\n    });\n\n    var count = urls.length;\n    function next() {\n        if (--count <= 0) {\n            // Even though we cached them, they simply won't be available immediately in the newly\n            // created DOM.  Previously we'd allow a 10ms timeout, but that's arbitrary and clearly\n            // not working in all cases (https://github.com/telerik/kendo/issues/5399), so this\n            // function will wait for their .complete attribute.\n            whenImagesAreActuallyLoaded(elements, callback);\n        }\n    }\n    if (count === 0) {\n        next();\n    }\n    urls.forEach(function(url){\n        var img = IMAGE_CACHE[url] = new window.Image();\n        if (!(/^data:/i.test(url))) {\n            img.crossOrigin = \"Anonymous\";\n        }\n        img.src = url;\n        if (img.complete) {\n            next();\n        } else {\n            img.onload = next;\n            img.onerror = function() {\n                IMAGE_CACHE[url] = null;\n                next();\n            };\n        }\n    });\n}\n\nfunction alphaNumeral(n) {\n    var result = \"\";\n    do {\n        var r = n % 26;\n        result = String.fromCharCode(97 + r) + result;\n        n = Math.floor(n / 26);\n    } while (n > 0);\n    return result;\n}\n\nfunction pushNodeInfo(element, style, group) {\n    nodeInfo = Object.create(nodeInfo);\n    nodeInfo[element.tagName.toLowerCase()] = {\n        element: element,\n        style: style\n    };\n    var decoration = getPropertyValue(style, \"text-decoration\");\n    if (decoration && decoration != \"none\") {\n        var color = getPropertyValue(style, \"color\");\n        decoration.split(/\\s+/g).forEach(function(name){\n            if (!nodeInfo[name]) {\n                nodeInfo[name] = color;\n            }\n        });\n    }\n\n    if (createsStackingContext(style)) {\n        nodeInfo._stackingContext = {\n            element: element,\n            group: group\n        };\n    }\n}\n\nfunction popNodeInfo() {\n    nodeInfo = Object.getPrototypeOf(nodeInfo);\n}\n\nfunction updateClipbox(path) {\n    if (nodeInfo._clipbox != null) {\n        var box = path.bbox(nodeInfo._matrix);\n        if (nodeInfo._clipbox) {\n            nodeInfo._clipbox = Rect.intersect(nodeInfo._clipbox, box);\n        } else {\n            nodeInfo._clipbox = box;\n        }\n    }\n}\n\nfunction emptyClipbox() {\n    var cb = nodeInfo._clipbox;\n    if (cb == null) {\n        return true;\n    }\n    if (cb) {\n        return cb.width() === 0 || cb.height() === 0;\n    }\n}\n\nfunction createsStackingContext(style) {\n    function prop(name) { return getPropertyValue(style, name); }\n    if (prop(\"transform\") != \"none\" ||\n        prop(\"position\") != \"static\" ||\n        prop(\"z-index\") != \"auto\" ||\n        prop(\"opacity\") < 1) {\n        return true;\n    }\n}\n\nfunction getComputedStyle$1(element, pseudoElt) {\n    return window.getComputedStyle(element, pseudoElt || null);\n}\n\nfunction getPropertyValue(style, prop, defa) {\n    var val = style.getPropertyValue(prop);\n    if (val == null || val === \"\") {\n        if (browser.webkit) {\n            val = style.getPropertyValue(\"-webkit-\" + prop );\n        } else if (browser.mozilla) {\n            val = style.getPropertyValue(\"-moz-\" + prop );\n        } else if (browser.opera) {\n            val = style.getPropertyValue(\"-o-\" + prop);\n        } else if (microsoft) {\n            val = style.getPropertyValue(\"-ms-\" + prop);\n        }\n    }\n    if (arguments.length > 2 && (val == null || val === \"\")) {\n        return defa;\n    } else {\n        return val;\n    }\n}\n\nfunction pleaseSetPropertyValue(style, prop, value, important) {\n    style.setProperty(prop, value, important);\n    if (browser.webkit) {\n        style.setProperty(\"-webkit-\" + prop, value, important);\n    } else if (browser.mozilla) {\n        style.setProperty(\"-moz-\" + prop, value, important);\n    } else if (browser.opera) {\n        style.setProperty(\"-o-\" + prop, value, important);\n    } else if (microsoft) {\n        style.setProperty(\"-ms-\" + prop, value, important);\n        prop = \"ms\" + prop.replace(/(^|-)([a-z])/g, function(s, p1, p2){\n            return p1 + p2.toUpperCase();\n        });\n        style[prop] = value;\n    }\n}\n\nfunction getBorder(style, side) {\n    side = \"border-\" + side;\n    return {\n        width: parseFloat(getPropertyValue(style, side + \"-width\")),\n        style: getPropertyValue(style, side + \"-style\"),\n        color: parseColor$1(getPropertyValue(style, side + \"-color\"), true)\n    };\n}\n\nfunction saveStyle(element, func) {\n    var prev = element.style.cssText;\n    var result = func();\n    element.style.cssText = prev;\n    return result;\n}\n\nfunction getBorderRadius(style, side) {\n    var r = getPropertyValue(style, \"border-\" + side + \"-radius\").split(/\\s+/g).map(parseFloat);\n    if (r.length == 1) {\n        r.push(r[0]);\n    }\n    return sanitizeRadius({ x: r[0], y: r[1] });\n}\n\nfunction getContentBox(element) {\n    var box = element.getBoundingClientRect();\n    box = innerBox(box, \"border-*-width\", element);\n    box = innerBox(box, \"padding-*\", element);\n    return box;\n}\n\nfunction innerBox(box, prop, element) {\n    var style, wt, wr, wb, wl;\n    if (typeof prop == \"string\") {\n        style = getComputedStyle$1(element);\n        wt = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"top\")));\n        wr = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"right\")));\n        wb = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"bottom\")));\n        wl = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"left\")));\n    }\n    else if (typeof prop == \"number\") {\n        wt = wr = wb = wl = prop;\n    }\n    return {\n        top    : box.top + wt,\n        right  : box.right - wr,\n        bottom : box.bottom - wb,\n        left   : box.left + wl,\n        width  : box.right - box.left - wr - wl,\n        height : box.bottom - box.top - wb - wt\n    };\n}\n\nfunction getTransform(style) {\n    var transform$$1 = getPropertyValue(style, \"transform\");\n    if (transform$$1 == \"none\") {\n        return null;\n    }\n    var matrix = /^\\s*matrix\\(\\s*(.*?)\\s*\\)\\s*$/.exec(transform$$1);\n    if (matrix) {\n        var origin = getPropertyValue(style, \"transform-origin\");\n        matrix = matrix[1].split(/\\s*,\\s*/g).map(parseFloat);\n        origin = origin.split(/\\s+/g).map(parseFloat);\n        return {\n            matrix: matrix,\n            origin: origin\n        };\n    }\n}\n\nfunction radiansToDegrees(radians) {\n    return ((180 * radians) / Math.PI) % 360;\n}\n\nfunction parseAngle(angle) {\n    var num = parseFloat(angle);\n    if (/grad$/.test(angle)) {\n        return Math.PI * num / 200;\n    }\n    else if (/rad$/.test(angle)) {\n        return num;\n    }\n    else if (/turn$/.test(angle)) {\n        return Math.PI * num * 2;\n    }\n    else if (/deg$/.test(angle)) {\n        return Math.PI * num / 180;\n    }\n}\n\nfunction setTransform$1(shape, m) {\n    m = new Matrix(m[0], m[1], m[2], m[3], m[4], m[5]);\n    shape.transform(m);\n    return m;\n}\n\nfunction setClipping(shape, clipPath) {\n    shape.clip(clipPath);\n}\n\nfunction addArcToPath(path, x, y, options) {\n    var points = new Arc$2([ x, y ], options).curvePoints(), i = 1;\n    while (i < points.length) {\n        path.curveTo(points[i++], points[i++], points[i++]);\n    }\n}\n\nfunction sanitizeRadius(r) {\n    if (r.x <= 0 || r.y <= 0) {\n        r.x = r.y = 0;\n    }\n    return r;\n}\n\nfunction adjustBorderRadiusForBox(box, rTL, rTR, rBR, rBL) {\n    // adjust border radiuses such that the sum of adjacent\n    // radiuses is not bigger than the length of the side.\n    // seems the correct algorithm is variant (3) from here:\n    // http://www.w3.org/Style/CSS/Tracker/issues/29?changelog\n    var tl_x = Math.max(0, rTL.x), tl_y = Math.max(0, rTL.y);\n    var tr_x = Math.max(0, rTR.x), tr_y = Math.max(0, rTR.y);\n    var br_x = Math.max(0, rBR.x), br_y = Math.max(0, rBR.y);\n    var bl_x = Math.max(0, rBL.x), bl_y = Math.max(0, rBL.y);\n\n    var f = Math.min(\n        box.width / (tl_x + tr_x),\n        box.height / (tr_y + br_y),\n        box.width / (br_x + bl_x),\n        box.height / (bl_y + tl_y)\n    );\n\n    if (f < 1) {\n        tl_x *= f; tl_y *= f;\n        tr_x *= f; tr_y *= f;\n        br_x *= f; br_y *= f;\n        bl_x *= f; bl_y *= f;\n    }\n\n    return {\n        tl: { x: tl_x, y: tl_y },\n        tr: { x: tr_x, y: tr_y },\n        br: { x: br_x, y: br_y },\n        bl: { x: bl_x, y: bl_y }\n    };\n}\n\nfunction elementRoundBox(element, box, type) {\n    var style = getComputedStyle$1(element);\n\n    var rTL = getBorderRadius(style, \"top-left\");\n    var rTR = getBorderRadius(style, \"top-right\");\n    var rBL = getBorderRadius(style, \"bottom-left\");\n    var rBR = getBorderRadius(style, \"bottom-right\");\n\n    if (type == \"padding\" || type == \"content\") {\n        var bt = getBorder(style, \"top\");\n        var br = getBorder(style, \"right\");\n        var bb = getBorder(style, \"bottom\");\n        var bl = getBorder(style, \"left\");\n        rTL.x -= bl.width; rTL.y -= bt.width;\n        rTR.x -= br.width; rTR.y -= bt.width;\n        rBR.x -= br.width; rBR.y -= bb.width;\n        rBL.x -= bl.width; rBL.y -= bb.width;\n        if (type == \"content\") {\n            var pt = parseFloat(getPropertyValue(style, \"padding-top\"));\n            var pr = parseFloat(getPropertyValue(style, \"padding-right\"));\n            var pb = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n            var pl = parseFloat(getPropertyValue(style, \"padding-left\"));\n            rTL.x -= pl; rTL.y -= pt;\n            rTR.x -= pr; rTR.y -= pt;\n            rBR.x -= pr; rBR.y -= pb;\n            rBL.x -= pl; rBL.y -= pb;\n        }\n    }\n\n    if (typeof type == \"number\") {\n        rTL.x -= type; rTL.y -= type;\n        rTR.x -= type; rTR.y -= type;\n        rBR.x -= type; rBR.y -= type;\n        rBL.x -= type; rBL.y -= type;\n    }\n\n    return roundBox(box, rTL, rTR, rBR, rBL);\n}\n\n// Create a drawing.Path for a rounded rectangle.  Receives the\n// bounding box and the border-radiuses in CSS order (top-left,\n// top-right, bottom-right, bottom-left).  The radiuses must be\n// objects containing x (horiz. radius) and y (vertical radius).\nfunction roundBox(box, rTL0, rTR0, rBR0, rBL0) {\n    var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n    var rTL = tmp.tl;\n    var rTR = tmp.tr;\n    var rBR = tmp.br;\n    var rBL = tmp.bl;\n    var path = new Path({ fill: null, stroke: null });\n    path.moveTo(box.left, box.top + rTL.y);\n    if (rTL.x) {\n        addArcToPath(path, box.left + rTL.x, box.top + rTL.y, {\n            startAngle: -180,\n            endAngle: -90,\n            radiusX: rTL.x,\n            radiusY: rTL.y\n        });\n    }\n    path.lineTo(box.right - rTR.x, box.top);\n    if (rTR.x) {\n        addArcToPath(path, box.right - rTR.x, box.top + rTR.y, {\n            startAngle: -90,\n            endAngle: 0,\n            radiusX: rTR.x,\n            radiusY: rTR.y\n        });\n    }\n    path.lineTo(box.right, box.bottom - rBR.y);\n    if (rBR.x) {\n        addArcToPath(path, box.right - rBR.x, box.bottom - rBR.y, {\n            startAngle: 0,\n            endAngle: 90,\n            radiusX: rBR.x,\n            radiusY: rBR.y\n        });\n    }\n    path.lineTo(box.left + rBL.x, box.bottom);\n    if (rBL.x) {\n        addArcToPath(path, box.left + rBL.x, box.bottom - rBL.y, {\n            startAngle: 90,\n            endAngle: 180,\n            radiusX: rBL.x,\n            radiusY: rBL.y\n        });\n    }\n    return path.close();\n}\n\nfunction formatCounter(val, style) {\n    var str = String(parseFloat(val));\n    switch (style) {\n      case \"decimal-leading-zero\":\n        if (str.length < 2) {\n            str = \"0\" + str;\n        }\n        return str;\n      case \"lower-roman\":\n        return arabicToRoman(val).toLowerCase();\n      case \"upper-roman\":\n        return arabicToRoman(val).toUpperCase();\n      case \"lower-latin\":\n      case \"lower-alpha\":\n        return alphaNumeral(val - 1);\n      case \"upper-latin\":\n      case \"upper-alpha\":\n        return alphaNumeral(val - 1).toUpperCase();\n      default:\n        return str;\n    }\n}\n\nfunction evalPseudoElementContent(element, content) {\n    function displayCounter(name, style, separator) {\n        if (!separator) {\n            return formatCounter(getCounter(name) || 0, style);\n        }\n        separator = separator.replace(/^\\s*([\"'])(.*)\\1\\s*$/, \"$2\");\n        return getAllCounters(name).map(function(val){\n            return formatCounter(val, style);\n        }).join(separator);\n    }\n    var a = splitProperty(content, /^\\s+/);\n    var result = [], m;\n    a.forEach(function(el){\n        var tmp;\n        if ((m = /^\\s*([\"'])(.*)\\1\\s*$/.exec(el))) {\n            result.push(m[2].replace(/\\\\([0-9a-f]{4})/gi, function(s, p){\n                return String.fromCharCode(parseInt(p, 16));\n            }));\n        }\n        else if ((m = /^\\s*counter\\((.*?)\\)\\s*$/.exec(el))) {\n            tmp = splitProperty(m[1]);\n            result.push(displayCounter(tmp[0], tmp[1]));\n        }\n        else if ((m = /^\\s*counters\\((.*?)\\)\\s*$/.exec(el))) {\n            tmp = splitProperty(m[1]);\n            result.push(displayCounter(tmp[0], tmp[2], tmp[1]));\n        }\n        else if ((m = /^\\s*attr\\((.*?)\\)\\s*$/.exec(el))) {\n            result.push(element.getAttribute(m[1]) || \"\");\n        }\n        else {\n            result.push(el);\n        }\n    });\n    return result.join(\"\");\n}\n\nfunction getCssText(style) {\n    if (style.cssText) {\n        return style.cssText;\n    }\n    // Status: NEW.  Report year: 2002.  Current year: 2014.\n    // Nice played, Mozillians.\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n    var result = [];\n    for (var i = 0; i < style.length; ++i) {\n        result.push(style[i] + \": \" + getPropertyValue(style, style[i]));\n    }\n    return result.join(\";\\n\");\n}\n\nfunction _renderWithPseudoElements(element, group) {\n    if (element.tagName == KENDO_PSEUDO_ELEMENT) {\n        _renderElement(element, group);\n        return;\n    }\n    var fake = [];\n    function pseudo(kind, place) {\n        var style = getComputedStyle$1(element, kind), content = style.content;\n        updateCounters(style);\n        if (content && content != \"normal\" && content != \"none\" && style.width != \"0px\") {\n            var psel = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n            psel.style.cssText = getCssText(style);\n            psel.textContent = evalPseudoElementContent(element, content);\n            element.insertBefore(psel, place);\n            fake.push(psel);\n        }\n    }\n    pseudo(\":before\", element.firstChild);\n    pseudo(\":after\", null);\n    if (fake.length > 0) {\n        var saveClass = element.className;\n        element.className += \" kendo-pdf-hide-pseudo-elements\";\n        _renderElement(element, group);\n        element.className = saveClass;\n        fake.forEach(function(el){ element.removeChild(el); });\n    } else {\n        _renderElement(element, group);\n    }\n}\n\nfunction _renderElement(element, group) {\n    var style = getComputedStyle$1(element);\n\n    var top = getBorder(style, \"top\");\n    var right = getBorder(style, \"right\");\n    var bottom = getBorder(style, \"bottom\");\n    var left = getBorder(style, \"left\");\n\n    var rTL0 = getBorderRadius(style, \"top-left\");\n    var rTR0 = getBorderRadius(style, \"top-right\");\n    var rBL0 = getBorderRadius(style, \"bottom-left\");\n    var rBR0 = getBorderRadius(style, \"bottom-right\");\n\n    var dir = getPropertyValue(style, \"direction\");\n\n    var backgroundColor = getPropertyValue(style, \"background-color\");\n    backgroundColor = parseColor$1(backgroundColor);\n\n    var backgroundImage = parseBackgroundImage( getPropertyValue(style, \"background-image\") );\n    var backgroundRepeat = splitProperty( getPropertyValue(style, \"background-repeat\") );\n    var backgroundPosition = splitProperty( getPropertyValue(style, \"background-position\") );\n    var backgroundOrigin = splitProperty( getPropertyValue(style, \"background-origin\") );\n    var backgroundSize = splitProperty( getPropertyValue(style, \"background-size\") );\n\n    // IE shrinks the text with text-overflow: ellipsis,\n    // apparently because the returned bounding box for the range\n    // is limited to the visible area minus space for the dots,\n    // instead of being the full width of the text.\n    //\n    // https://github.com/telerik/kendo/issues/5232\n    // https://github.com/telerik/kendo-ui-core/issues/1868\n    //\n    // We have to test it here rather than in renderText because\n    // text-overflow: ellipsis could be set on a parent element (not\n    // necessarily the one containing the text); in this case,\n    // getComputedStyle(elementWithTheText) will return \"clip\", not\n    // \"ellipsis\" (which is probably a bug, but oh well...)\n    var textOverflow, saveTextOverflow;\n    if (microsoft) {\n        textOverflow = style.textOverflow;             // computed style\n        if (textOverflow == \"ellipsis\") {\n            saveTextOverflow = element.style.textOverflow; // own style.\n            element.style.textOverflow = \"clip\";\n        }\n    }\n\n    if (browser.msie && browser.version < 10) {\n        // IE9 hacks.  getPropertyValue won't return the correct\n        // value.  Sucks that we have to do it here, I'd prefer to\n        // move it in getPropertyValue, but we don't have the\n        // element.\n        backgroundPosition = splitProperty(element.currentStyle.backgroundPosition);\n    }\n\n    var innerbox = innerBox(element.getBoundingClientRect(), \"border-*-width\", element);\n\n    // CSS \"clip\" property - if present, replace the group with a\n    // new one which is clipped.  This must happen before drawing\n    // the borders and background.\n    (function(){\n        var clip = getPropertyValue(style, \"clip\");\n        var m = /^\\s*rect\\((.*)\\)\\s*$/.exec(clip);\n        if (m) {\n            var a = m[1].split(/[ ,]+/g);\n            var top = a[0] == \"auto\" ? innerbox.top : parseFloat(a[0]) + innerbox.top;\n            var right = a[1] == \"auto\" ? innerbox.right : parseFloat(a[1]) + innerbox.left;\n            var bottom = a[2] == \"auto\" ? innerbox.bottom : parseFloat(a[2]) + innerbox.top;\n            var left = a[3] == \"auto\" ? innerbox.left : parseFloat(a[3]) + innerbox.left;\n            var tmp = new Group();\n            var clipPath = new Path()\n                .moveTo(left, top)\n                .lineTo(right, top)\n                .lineTo(right, bottom)\n                .lineTo(left, bottom)\n                .close();\n            setClipping(tmp, clipPath);\n            group.append(tmp);\n            group = tmp;\n            updateClipbox(clipPath);\n        }\n    })();\n\n    var boxes, i, cells;\n    var display = getPropertyValue(style, \"display\");\n\n    if (display == \"table-row\") {\n        // because of rowspan/colspan, we shouldn't draw background of table row elements on the\n        // box given by its getBoundingClientRect, because if we do we risk overwritting a\n        // previously rendered cell.  https://github.com/telerik/kendo/issues/4881\n        boxes = [];\n        for (i = 0, cells = element.children; i < cells.length; ++i) {\n            boxes.push(cells[i].getBoundingClientRect());\n        }\n    } else {\n        boxes = element.getClientRects();\n        if (boxes.length == 1) {\n            // Workaround the missing borders in Chrome!  getClientRects() boxes contains values\n            // rounded to integer.  getBoundingClientRect() appears to work fine.  We still need\n            // getClientRects() to support cases where there are more boxes (continued inline\n            // elements that might have border/background).\n            boxes = [ element.getBoundingClientRect() ];\n        }\n    }\n\n    // This function workarounds another Chrome bug, where boxes returned for a table with\n    // border-collapse: collapse will overlap the table border.  Our rendering is not perfect in\n    // such case anyway, but with this is better than without it.\n    boxes = adjustBoxes(boxes);\n\n    for (i = 0; i < boxes.length; ++i) {\n        drawOneBox(boxes[i], i === 0, i == boxes.length - 1);\n    }\n\n    // Render links as separate groups.  We can't use boxes returned by element's getClientRects\n    // because if display type is \"inline\" (default for <a>), boxes will not include the height of\n    // images inside.  https://github.com/telerik/kendo-ui-core/issues/3359\n    if (element.tagName == \"A\" && element.href && !/^#?$/.test(element.getAttribute(\"href\"))) {\n        if (!nodeInfo._avoidLinks || !matches(element, nodeInfo._avoidLinks)) {\n            var r = document.createRange();\n            r.selectNodeContents(element);\n            slice$1$1(r.getClientRects()).forEach(function(box){\n                var g = new Group();\n                g._pdfLink = {\n                    url    : element.href,\n                    top    : box.top,\n                    right  : box.right,\n                    bottom : box.bottom,\n                    left   : box.left\n                };\n                group.append(g);\n            });\n        }\n    }\n\n    if (boxes.length > 0 && display == \"list-item\" && !element.getAttribute(\"kendo-no-bullet\")) {\n        drawBullet(boxes[0]);\n    }\n\n    // overflow: hidden/auto - if present, replace the group with\n    // a new one clipped by the inner box.\n    (function(){\n        function clipit() {\n            var clipPath = elementRoundBox(element, innerbox, \"padding\");\n            var tmp = new Group();\n            setClipping(tmp, clipPath);\n            group.append(tmp);\n            group = tmp;\n            updateClipbox(clipPath);\n        }\n        if (isFormField(element)) {\n            clipit();\n        } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow\"))) {\n            clipit();\n        } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-x\"))) {\n            clipit();\n        } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-y\"))) {\n            clipit();\n        }\n    })();\n\n    if (!maybeRenderWidget(element, group)) {\n        renderContents(element, group);\n    }\n\n    if (microsoft && textOverflow == \"ellipsis\") {\n        element.style.textOverflow = saveTextOverflow;\n    }\n\n    return group; // only utility functions after this line.\n\n    function adjustBoxes(boxes) {\n        if (/^td$/i.test(element.tagName)) {\n            var table = nodeInfo.table;\n            if (table && getPropertyValue(table.style, \"border-collapse\") == \"collapse\") {\n                var tableBorderLeft = getBorder(table.style, \"left\").width;\n                var tableBorderTop = getBorder(table.style, \"top\").width;\n                // check if we need to adjust\n                if (tableBorderLeft === 0 && tableBorderTop === 0) {\n                    return boxes; // nope\n                }\n                var tableBox = table.element.getBoundingClientRect();\n                var firstCell = table.element.rows[0].cells[0];\n                var firstCellBox = firstCell.getBoundingClientRect();\n                if (firstCellBox.top == tableBox.top || firstCellBox.left == tableBox.left) {\n                    return slice$1$1(boxes).map(function(box){\n                        return {\n                            left   : box.left + tableBorderLeft,\n                            top    : box.top + tableBorderTop,\n                            right  : box.right + tableBorderLeft,\n                            bottom : box.bottom + tableBorderTop,\n                            height : box.height,\n                            width  : box.width\n                        };\n                    });\n                }\n            }\n        }\n        return boxes;\n    }\n\n    // this function will be called to draw each border.  it\n    // draws starting at origin and the resulted path must be\n    // translated/rotated to be placed in the proper position.\n    //\n    // arguments are named as if it draws the top border:\n    //\n    //    - `len` the length of the edge\n    //    - `Wtop` the width of the edge (i.e. border-top-width)\n    //    - `Wleft` the width of the left edge (border-left-width)\n    //    - `Wright` the width of the right edge\n    //    - `rl` and `rl` -- the border radius on the left and right\n    //      (objects containing x and y, for horiz/vertical radius)\n    //    - `transform` -- transformation to apply\n    //\n    function drawEdge(color, len, Wtop, Wleft, Wright, rl, rr, transform$$1) {\n        if (Wtop <= 0) {\n            return;\n        }\n\n        var path, edge = new Group();\n        setTransform$1(edge, transform$$1);\n        group.append(edge);\n\n        sanitizeRadius(rl);\n        sanitizeRadius(rr);\n\n        // draw main border.  this is the area without the rounded corners\n        path = new Path({\n            fill: { color: color },\n            stroke: null\n        });\n        edge.append(path);\n        path.moveTo(rl.x ? Math.max(rl.x, Wleft) : 0, 0)\n            .lineTo(len - (rr.x ? Math.max(rr.x, Wright) : 0), 0)\n            .lineTo(len - Math.max(rr.x, Wright), Wtop)\n            .lineTo(Math.max(rl.x, Wleft), Wtop)\n            .close();\n\n        if (rl.x) {\n            drawRoundCorner(Wleft, rl, [ -1, 0, 0, 1, rl.x, 0 ]);\n        }\n\n        if (rr.x) {\n            drawRoundCorner(Wright, rr, [ 1, 0, 0, 1, len - rr.x, 0 ]);\n        }\n\n        // draws one round corner, starting at origin (needs to be\n        // translated/rotated to be placed properly).\n        function drawRoundCorner(Wright, r, transform$$1) {\n            var angle = Math.PI/2 * Wright / (Wright + Wtop);\n\n            // not sanitizing this one, because negative values\n            // are useful to fill the box correctly.\n            var ri = {\n                x: r.x - Wright,\n                y: r.y - Wtop\n            };\n\n            var path = new Path({\n                fill: { color: color },\n                stroke: null\n            }).moveTo(0, 0);\n\n            setTransform$1(path, transform$$1);\n\n            addArcToPath(path, 0, r.y, {\n                startAngle: -90,\n                endAngle: -radiansToDegrees(angle),\n                radiusX: r.x,\n                radiusY: r.y\n            });\n\n            if (ri.x > 0 && ri.y > 0) {\n                path.lineTo(ri.x * Math.cos(angle), r.y - ri.y * Math.sin(angle));\n                addArcToPath(path, 0, r.y, {\n                    startAngle: -radiansToDegrees(angle),\n                    endAngle: -90,\n                    radiusX: ri.x,\n                    radiusY: ri.y,\n                    anticlockwise: true\n                });\n            }\n            else if (ri.x > 0) {\n                path.lineTo(ri.x, Wtop)\n                    .lineTo(0, Wtop);\n            }\n            else {\n                path.lineTo(ri.x, Wtop)\n                    .lineTo(ri.x, 0);\n            }\n\n            edge.append(path.close());\n        }\n    }\n\n    function drawBackground(box) {\n        var background = new Group();\n        setClipping(background, roundBox(box, rTL0, rTR0, rBR0, rBL0));\n        group.append(background);\n\n        if (backgroundColor) {\n            var path = new Path({\n                fill: { color: backgroundColor.toCssRgba() },\n                stroke: null\n            });\n            path.moveTo(box.left, box.top)\n                .lineTo(box.right, box.top)\n                .lineTo(box.right, box.bottom)\n                .lineTo(box.left, box.bottom)\n                .close();\n            background.append(path);\n        }\n\n        for (var i = backgroundImage.length; --i >= 0;) {\n            drawOneBackground(\n                background, box,\n                backgroundImage[i],\n                backgroundRepeat[i % backgroundRepeat.length],\n                backgroundPosition[i % backgroundPosition.length],\n                backgroundOrigin[i % backgroundOrigin.length],\n                backgroundSize[i % backgroundSize.length]\n            );\n        }\n    }\n\n    function drawOneBackground(group, box, background, backgroundRepeat, backgroundPosition, backgroundOrigin, backgroundSize) {\n        if (!background || (background == \"none\")) {\n            return;\n        }\n\n        if (background.type == \"url\") {\n            var img = IMAGE_CACHE[background.url];\n            if (img && img.width > 0 && img.height > 0) {\n                drawBackgroundImage(group, box, img.width, img.height, function(group, rect){\n                    group.append(new Image$1(background.url, rect));\n                });\n            }\n        } else if (background.type == \"linear\") {\n            drawBackgroundImage(group, box, box.width, box.height, gradientRenderer(background));\n        } else {\n            return;\n        }\n\n        function drawBackgroundImage(group, box, img_width, img_height, renderBG) {\n            var aspect_ratio = img_width / img_height, f;\n\n            // for background-origin: border-box the box is already appropriate\n            var orgBox = box;\n            if (backgroundOrigin == \"content-box\") {\n                orgBox = innerBox(orgBox, \"border-*-width\", element);\n                orgBox = innerBox(orgBox, \"padding-*\", element);\n            } else if (backgroundOrigin == \"padding-box\") {\n                orgBox = innerBox(orgBox, \"border-*-width\", element);\n            }\n\n            if (!/^\\s*auto(\\s+auto)?\\s*$/.test(backgroundSize)) {\n                if (backgroundSize == \"contain\") {\n                    f = Math.min(orgBox.width / img_width,\n                                 orgBox.height / img_height);\n                    img_width *= f;\n                    img_height *= f;\n                }\n                else if (backgroundSize == \"cover\") {\n                    f = Math.max(orgBox.width / img_width,\n                                 orgBox.height / img_height);\n                    img_width *= f;\n                    img_height *= f;\n                }\n                else {\n                    var size = backgroundSize.split(/\\s+/g);\n                    // compute width\n                    if (/%$/.test(size[0])) {\n                        img_width = orgBox.width * parseFloat(size[0]) / 100;\n                    } else {\n                        img_width = parseFloat(size[0]);\n                    }\n                    // compute height\n                    if (size.length == 1 || size[1] == \"auto\") {\n                        img_height = img_width / aspect_ratio;\n                    } else if (/%$/.test(size[1])) {\n                        img_height = orgBox.height * parseFloat(size[1]) / 100;\n                    } else {\n                        img_height = parseFloat(size[1]);\n                    }\n                }\n            }\n\n            var pos = String(backgroundPosition);\n\n            // IE sometimes reports single-word positions\n            // https://github.com/telerik/kendo-ui-core/issues/2786\n            //\n            // it seems to switch to percentages when the horizontal\n            // position is not \"center\", therefore we don't handle\n            // multi-word cases here.  All other browsers return\n            // percentages or pixels instead of keywords.  At least\n            // for now...\n            switch (pos) {\n              case \"bottom\" : pos = \"50% 100%\"; break;\n              case \"top\"    : pos = \"50% 0\"; break;\n              case \"left\"   : pos = \"0 50%\"; break;\n              case \"right\"  : pos = \"100% 50%\"; break;\n              case \"center\" : pos = \"50% 50%\"; break;\n            }\n\n            pos = pos.split(/\\s+/);\n            if (pos.length == 1) {\n                pos[1] = \"50%\";\n            }\n\n            if (/%$/.test(pos[0])) {\n                pos[0] = parseFloat(pos[0]) / 100 * (orgBox.width - img_width);\n            } else {\n                pos[0] = parseFloat(pos[0]);\n            }\n            if (/%$/.test(pos[1])) {\n                pos[1] = parseFloat(pos[1]) / 100 * (orgBox.height - img_height);\n            } else {\n                pos[1] = parseFloat(pos[1]);\n            }\n\n            var rect = new Rect([ orgBox.left + pos[0], orgBox.top + pos[1] ], [ img_width, img_height ]);\n\n            // XXX: background-repeat could be implemented more\n            //      efficiently as a fill pattern (at least for PDF\n            //      output, probably SVG too).\n\n            function rewX() {\n                while (rect.origin.x > box.left) {\n                    rect.origin.x -= img_width;\n                }\n            }\n\n            function rewY() {\n                while (rect.origin.y > box.top) {\n                    rect.origin.y -= img_height;\n                }\n            }\n\n            function repeatX() {\n                while (rect.origin.x < box.right) {\n                    renderBG(group, rect.clone());\n                    rect.origin.x += img_width;\n                }\n            }\n\n            if (backgroundRepeat == \"no-repeat\") {\n                renderBG(group, rect);\n            }\n            else if (backgroundRepeat == \"repeat-x\") {\n                rewX();\n                repeatX();\n            }\n            else if (backgroundRepeat == \"repeat-y\") {\n                rewY();\n                while (rect.origin.y < box.bottom) {\n                    renderBG(group, rect.clone());\n                    rect.origin.y += img_height;\n                }\n            }\n            else if (backgroundRepeat == \"repeat\") {\n                rewX();\n                rewY();\n                var origin = rect.origin.clone();\n                while (rect.origin.y < box.bottom) {\n                    rect.origin.x = origin.x;\n                    repeatX();\n                    rect.origin.y += img_height;\n                }\n            }\n        }\n    }\n\n    function drawBullet() {\n        var listStyleType = getPropertyValue(style, \"list-style-type\");\n        if (listStyleType == \"none\") {\n            return;\n        }\n        var listStylePosition = getPropertyValue(style, \"list-style-position\");\n\n        function _drawBullet(f) {\n            saveStyle(element, function(){\n                element.style.position = \"relative\";\n                var bullet = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                bullet.style.position = \"absolute\";\n                bullet.style.boxSizing = \"border-box\";\n                if (listStylePosition == \"outside\") {\n                    bullet.style.width = \"6em\";\n                    bullet.style.left = \"-6.8em\";\n                    bullet.style.textAlign = \"right\";\n                } else {\n                    bullet.style.left = \"0px\";\n                }\n                f(bullet);\n                element.insertBefore(bullet, element.firstChild);\n                renderElement(bullet, group);\n                element.removeChild(bullet);\n            });\n        }\n\n        function elementIndex(f) {\n            var a = element.parentNode.children;\n            var k = element.getAttribute(\"kendo-split-index\");\n            if (k != null) {\n                return f(k|0, a.length);\n            }\n            for (var i = 0; i < a.length; ++i) {\n                if (a[i] === element) {\n                    return f(i, a.length);\n                }\n            }\n        }\n\n        switch (listStyleType) {\n          case \"circle\":\n          case \"disc\":\n          case \"square\":\n            _drawBullet(function(bullet){\n                // XXX: the science behind these values is called \"trial and error\".\n                bullet.style.fontSize = \"60%\";\n                bullet.style.lineHeight = \"200%\";\n                bullet.style.paddingRight = \"0.5em\";\n                bullet.style.fontFamily = \"DejaVu Serif\";\n                bullet.innerHTML = {\n                    \"disc\"   : \"\\u25cf\",\n                    \"circle\" : \"\\u25ef\",\n                    \"square\" : \"\\u25a0\"\n                }[listStyleType];\n            });\n            break;\n\n          case \"decimal\":\n          case \"decimal-leading-zero\":\n            _drawBullet(function(bullet){\n                elementIndex(function(idx){\n                    ++idx;\n                    if (listStyleType == \"decimal-leading-zero\" && idx < 10) {\n                        idx = \"0\" + idx;\n                    }\n                    bullet.innerHTML = idx + \".\";\n                });\n            });\n            break;\n\n          case \"lower-roman\":\n          case \"upper-roman\":\n            _drawBullet(function(bullet){\n                elementIndex(function(idx){\n                    idx = arabicToRoman(idx + 1);\n                    if (listStyleType == \"upper-roman\") {\n                        idx = idx.toUpperCase();\n                    }\n                    bullet.innerHTML = idx + \".\";\n                });\n            });\n            break;\n\n          case \"lower-latin\":\n          case \"lower-alpha\":\n          case \"upper-latin\":\n          case \"upper-alpha\":\n            _drawBullet(function(bullet){\n                elementIndex(function(idx){\n                    idx = alphaNumeral(idx);\n                    if (/^upper/i.test(listStyleType)) {\n                        idx = idx.toUpperCase();\n                    }\n                    bullet.innerHTML = idx + \".\";\n                });\n            });\n            break;\n        }\n    }\n\n    // draws a single border box\n    function drawOneBox(box, isFirst, isLast) {\n        if (box.width === 0 || box.height === 0) {\n            return;\n        }\n\n        drawBackground(box);\n\n        var shouldDrawLeft = (left.width > 0 && ((isFirst && dir == \"ltr\") || (isLast && dir == \"rtl\")));\n        var shouldDrawRight = (right.width > 0 && ((isLast && dir == \"ltr\") || (isFirst && dir == \"rtl\")));\n\n        // The most general case is that the 4 borders have different widths and border\n        // radiuses.  The way that is handled is by drawing 3 Paths for each border: the\n        // straight line, and two round corners which represent half of the entire rounded\n        // corner.  To simplify code those shapes are drawed at origin (by the drawEdge\n        // function), then translated/rotated into the right position.\n        //\n        // However, this leads to poor results due to rounding in the simpler cases where\n        // borders are straight lines.  Therefore we handle a few such cases separately with\n        // straight lines. C^wC^wC^w -- nope, scratch that.  poor rendering was because of a bug\n        // in Chrome (getClientRects() returns rounded integer values rather than exact floats.\n        // web dev is still a ghetto.)\n\n        // first, just in case there is no border...\n        if (top.width === 0 && left.width === 0 && right.width === 0 && bottom.width === 0) {\n            return;\n        }\n\n        // START paint borders\n        // if all borders have equal colors...\n        if (top.color == right.color && top.color == bottom.color && top.color == left.color) {\n\n            // if same widths too, we can draw the whole border by stroking a single path.\n            if (top.width == right.width && top.width == bottom.width && top.width == left.width)\n            {\n                if (shouldDrawLeft && shouldDrawRight) {\n                    // reduce box by half the border width, so we can draw it by stroking.\n                    box = innerBox(box, top.width/2);\n\n                    // adjust the border radiuses, again by top.width/2, and make the path element.\n                    var path = elementRoundBox(element, box, top.width/2);\n                    path.options.stroke = {\n                        color: top.color,\n                        width: top.width\n                    };\n                    group.append(path);\n                    return;\n                }\n            }\n        }\n\n        // if border radiuses are zero and widths are at most one pixel, we can again use simple\n        // paths.\n        if (rTL0.x === 0 && rTR0.x === 0 && rBR0.x === 0 && rBL0.x === 0) {\n            // alright, 1.9px will do as well.  the difference in color blending should not be\n            // noticeable.\n            if (top.width < 2 && left.width < 2 && right.width < 2 && bottom.width < 2) {\n                // top border\n                if (top.width > 0) {\n                    group.append(\n                        new Path({\n                            stroke: { width: top.width, color: top.color }\n                        })\n                            .moveTo(box.left, box.top + top.width/2)\n                            .lineTo(box.right, box.top + top.width/2)\n                    );\n                }\n\n                // bottom border\n                if (bottom.width > 0) {\n                    group.append(\n                        new Path({\n                            stroke: { width: bottom.width, color: bottom.color }\n                        })\n                            .moveTo(box.left, box.bottom - bottom.width/2)\n                            .lineTo(box.right, box.bottom - bottom.width/2)\n                    );\n                }\n\n                // left border\n                if (shouldDrawLeft) {\n                    group.append(\n                        new Path({\n                            stroke: { width: left.width, color: left.color }\n                        })\n                            .moveTo(box.left + left.width/2, box.top)\n                            .lineTo(box.left + left.width/2, box.bottom)\n                    );\n                }\n\n                // right border\n                if (shouldDrawRight) {\n                    group.append(\n                        new Path({\n                            stroke: { width: right.width, color: right.color }\n                        })\n                            .moveTo(box.right - right.width/2, box.top)\n                            .lineTo(box.right - right.width/2, box.bottom)\n                    );\n                }\n\n                return;\n            }\n        }\n        // END paint borders\n\n        var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n        var rTL = tmp.tl;\n        var rTR = tmp.tr;\n        var rBR = tmp.br;\n        var rBL = tmp.bl;\n\n        // top border\n        drawEdge(top.color,\n                 box.width, top.width, left.width, right.width,\n                 rTL, rTR,\n                 [ 1, 0, 0, 1, box.left, box.top ]);\n\n        // bottom border\n        drawEdge(bottom.color,\n                 box.width, bottom.width, right.width, left.width,\n                 rBR, rBL,\n                 [ -1, 0, 0, -1, box.right, box.bottom ]);\n\n        // for left/right borders we need to invert the border-radiuses\n        function inv(p) {\n            return { x: p.y, y: p.x };\n        }\n\n        // left border\n        drawEdge(left.color,\n                 box.height, left.width, bottom.width, top.width,\n                 inv(rBL), inv(rTL),\n                 [ 0, -1, 1, 0, box.left, box.bottom ]);\n\n        // right border\n        drawEdge(right.color,\n                 box.height, right.width, top.width, bottom.width,\n                 inv(rTR), inv(rBR),\n                 [ 0, 1, -1, 0, box.right, box.top ]);\n    }\n}\n\nfunction gradientRenderer(gradient) {\n    return function(group, rect) {\n        var width = rect.width(), height = rect.height();\n\n        switch (gradient.type) {\n          case \"linear\":\n\n            // figure out the angle.\n            var angle = gradient.angle != null ? gradient.angle : Math.PI;\n            switch (gradient.to) {\n              case \"top\":\n                angle = 0;\n                break;\n              case \"left\":\n                angle = -Math.PI / 2;\n                break;\n              case \"bottom\":\n                angle = Math.PI;\n                break;\n              case \"right\":\n                angle = Math.PI / 2;\n                break;\n              case \"top left\": case \"left top\":\n                angle = -Math.atan2(height, width);\n                break;\n              case \"top right\": case \"right top\":\n                angle = Math.atan2(height, width);\n                break;\n              case \"bottom left\": case \"left bottom\":\n                angle = Math.PI + Math.atan2(height, width);\n                break;\n              case \"bottom right\": case \"right bottom\":\n                angle = Math.PI - Math.atan2(height, width);\n                break;\n            }\n\n            if (gradient.reverse) {\n                angle -= Math.PI;\n            }\n\n            // limit the angle between 0..2PI\n            angle %= 2 * Math.PI;\n            if (angle < 0) {\n                angle += 2 * Math.PI;\n            }\n\n            // compute gradient's start/end points.  here len is the length of the gradient line\n            // and x,y is the end point relative to the center of the rectangle in conventional\n            // (math) axis direction.\n\n            // this is the original (unscaled) length of the gradient line.  needed to deal with\n            // absolutely positioned color stops.  formula from the CSS spec:\n            // http://dev.w3.org/csswg/css-images-3/#linear-gradient-syntax\n            var pxlen = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));\n\n            // The math below is pretty simple, but it took a while to figure out.  We compute x\n            // and y, the *end* of the gradient line.  However, we want to transform them into\n            // element-based coordinates (SVG's gradientUnits=\"objectBoundingBox\").  That means,\n            // x=0 is the left edge, x=1 is the right edge, y=0 is the top edge and y=1 is the\n            // bottom edge.\n            //\n            // A naive approach would use the original angle for these calculations.  Say we'd\n            // like to draw a gradient angled at 45deg in a 100x400 box.  When we use\n            // objectBoundingBox, the renderer will draw it in a 1x1 *square* box, and then\n            // scale that to the desired dimensions.  The 45deg angle will look more like 70deg\n            // after scaling.  SVG (http://www.w3.org/TR/SVG/pservers.html#LinearGradients) says\n            // the following:\n            //\n            //     When gradientUnits=\"objectBoundingBox\" and 'gradientTransform' is the\n            //     identity matrix, the normal of the linear gradient is perpendicular to the\n            //     gradient vector in object bounding box space (i.e., the abstract coordinate\n            //     system where (0,0) is at the top/left of the object bounding box and (1,1) is\n            //     at the bottom/right of the object bounding box). When the object's bounding\n            //     box is not square, the gradient normal which is initially perpendicular to\n            //     the gradient vector within object bounding box space may render\n            //     non-perpendicular relative to the gradient vector in user space. If the\n            //     gradient vector is parallel to one of the axes of the bounding box, the\n            //     gradient normal will remain perpendicular. This transformation is due to\n            //     application of the non-uniform scaling transformation from bounding box space\n            //     to user space.\n            //\n            // which is an extremely long and confusing way to tell what I just said above.\n            //\n            // For this reason we need to apply the reverse scaling to the original angle, so\n            // that when it'll finally be rendered it'll actually be at the desired slope.  Now\n            // I'll let you figure out the math yourself.\n\n            var scaledAngle = Math.atan(width * Math.tan(angle) / height);\n            var sin = Math.sin(scaledAngle), cos = Math.cos(scaledAngle);\n            var len = Math.abs(sin) + Math.abs(cos);\n            var x = len/2 * sin;\n            var y = len/2 * cos;\n\n            // Because of the arctangent, our scaledAngle ends up between -PI/2..PI/2, possibly\n            // losing the intended direction of the gradient.  The following fixes it.\n            if (angle > Math.PI/2 && angle <= 3*Math.PI/2) {\n                x = -x;\n                y = -y;\n            }\n\n            // compute the color stops.\n            var implicit = [], right = 0;\n            var stops = gradient.stops.map(function(s, i){\n                var offset = s.percent;\n                if (offset) {\n                    offset = parseFloat(offset) / 100;\n                } else if (s.length) {\n                    offset = parseFloat(s.length) / pxlen;\n                } else if (i === 0) {\n                    offset = 0;\n                } else if (i == gradient.stops.length - 1) {\n                    offset = 1;\n                }\n                var stop = {\n                    color: s.color.toCssRgba(),\n                    offset: offset\n                };\n                if (offset != null) {\n                    right = offset;\n                    // fix implicit offsets\n                    implicit.forEach(function(s, i){\n                        var stop = s.stop;\n                        stop.offset = s.left + (right - s.left) * (i + 1) / (implicit.length + 1);\n                    });\n                    implicit = [];\n                } else {\n                    implicit.push({ left: right, stop: stop });\n                }\n                return stop;\n            });\n\n            var start = [ 0.5 - x, 0.5 + y ];\n            var end = [ 0.5 + x, 0.5 - y ];\n\n            // finally, draw it.\n            group.append(\n                Path.fromRect(rect)\n                    .stroke(null)\n                    .fill(new LinearGradient({\n                        start     : start,\n                        end       : end,\n                        stops     : stops,\n                        userSpace : false\n                    }))\n            );\n            break;\n          case \"radial\":\n            // XXX:\n            if (window.console && window.console.log) {\n                window.console.log(\"Radial gradients are not yet supported in HTML renderer\");\n            }\n            break;\n        }\n    };\n}\n\nfunction maybeRenderWidget(element, group) {\n    var visual;\n\n    if (element._kendoExportVisual) {\n        visual = element._kendoExportVisual();\n    } else if (window.kendo && window.kendo.jQuery && element.getAttribute(window.kendo.attr(\"role\"))) {\n        var widget = window.kendo.widgetInstance(window.kendo.jQuery(element));\n        if (widget && (widget.exportDOMVisual || widget.exportVisual)) {\n            if (widget.exportDOMVisual) {\n                visual = widget.exportDOMVisual();\n            } else {\n                visual = widget.exportVisual();\n            }\n        }\n    }\n\n    if (!visual) {\n        return false;\n    }\n\n    var wrap$$1 = new Group();\n    wrap$$1.children.push(visual);\n\n    var bbox = element.getBoundingClientRect();\n    wrap$$1.transform(transform$1().translate(bbox.left, bbox.top));\n\n    group.append(wrap$$1);\n\n    return true;\n}\n\nfunction renderImage(element, url, group) {\n    var box = getContentBox(element);\n    var rect = new Rect([ box.left, box.top ], [ box.width, box.height ]);\n    var image = new Image$1(url, rect);\n    setClipping(image, elementRoundBox(element, box, \"content\"));\n    group.append(image);\n}\n\nfunction zIndexSort(a, b) {\n    var sa = getComputedStyle$1(a);\n    var sb = getComputedStyle$1(b);\n    var za = parseFloat(getPropertyValue(sa, \"z-index\"));\n    var zb = parseFloat(getPropertyValue(sb, \"z-index\"));\n    var pa = getPropertyValue(sa, \"position\");\n    var pb = getPropertyValue(sb, \"position\");\n    if (isNaN(za) && isNaN(zb)) {\n        if ((/static|absolute/.test(pa)) && (/static|absolute/.test(pb))) {\n            return 0;\n        }\n        if (pa == \"static\") {\n            return -1;\n        }\n        if (pb == \"static\") {\n            return 1;\n        }\n        return 0;\n    }\n    if (isNaN(za)) {\n        return zb === 0 ? 0 : zb > 0 ? -1 : 1;\n    }\n    if (isNaN(zb)) {\n        return za === 0 ? 0 : za > 0 ? 1 : -1;\n    }\n    return parseFloat(za) - parseFloat(zb);\n}\n\nfunction isFormField(element) {\n    return /^(?:textarea|select|input)$/i.test(element.tagName);\n}\n\nfunction getSelectedOption(element) {\n    if (element.selectedOptions && element.selectedOptions.length > 0) {\n        return element.selectedOptions[0];\n    }\n    return element.options[element.selectedIndex];\n}\n\nfunction renderCheckbox(element, group) {\n    var style = getComputedStyle$1(element);\n    var color = getPropertyValue(style, \"color\");\n    var box = element.getBoundingClientRect();\n    if (element.type == \"checkbox\") {\n        group.append(\n            Path.fromRect(\n                new Rect([ box.left+1, box.top+1 ],\n                             [ box.width-2, box.height-2 ])\n            ).stroke(color, 1)\n        );\n        if (element.checked) {\n            // fill a rectangle inside?  looks kinda ugly.\n            // group.append(\n            //     Path.fromRect(\n            //         new geo.Rect([ box.left+4, box.top+4 ],\n            //                      [ box.width-8, box.height-8])\n            //     ).fill(color).stroke(null)\n            // );\n\n            // let's draw a checkmark instead.  artistic, eh?\n            group.append(\n                new Path()\n                    .stroke(color, 1.2)\n                    .moveTo(box.left + 0.22 * box.width,\n                            box.top + 0.55 * box.height)\n                    .lineTo(box.left + 0.45 * box.width,\n                            box.top + 0.75 * box.height)\n                    .lineTo(box.left + 0.78 * box.width,\n                            box.top + 0.22 * box.width)\n            );\n        }\n    } else {\n        group.append(\n            new Circle(\n                new Circle$2([\n                    (box.left + box.right) / 2,\n                    (box.top + box.bottom) / 2\n                ], Math.min(box.width-2, box.height-2) / 2)\n            ).stroke(color, 1)\n        );\n        if (element.checked) {\n            group.append(\n                new Circle(\n                    new Circle$2([\n                        (box.left + box.right) / 2,\n                        (box.top + box.bottom) / 2\n                    ], Math.min(box.width-8, box.height-8) / 2)\n                ).fill(color).stroke(null)\n            );\n        }\n    }\n}\n\nfunction renderFormField(element, group) {\n    var tag = element.tagName.toLowerCase();\n    if (tag == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n        return renderCheckbox(element, group);\n    }\n    var p = element.parentNode;\n    var doc = element.ownerDocument;\n    var el = doc.createElement(KENDO_PSEUDO_ELEMENT);\n    var option;\n    el.style.cssText = getCssText(getComputedStyle$1(element));\n    if (tag == \"input\") {\n        el.style.whiteSpace = \"pre\";\n    }\n    if (tag == \"select\" || tag == \"textarea\") {\n        el.style.overflow = \"auto\";\n    }\n    if (tag == \"select\") {\n        if (element.multiple) {\n            for (var i = 0; i < element.options.length; ++i) {\n                option = doc.createElement(KENDO_PSEUDO_ELEMENT);\n                option.style.cssText = getCssText(getComputedStyle$1(element.options[i]));\n                option.style.display = \"block\"; // IE9 messes up without this\n                option.textContent = element.options[i].textContent;\n                el.appendChild(option);\n            }\n        } else {\n            option = getSelectedOption(element);\n            if (option) {\n                el.textContent = option.textContent;\n            }\n        }\n    } else {\n        el.textContent = element.value;\n    }\n    p.insertBefore(el, element);\n    el.scrollLeft = element.scrollLeft;\n    el.scrollTop = element.scrollTop;\n\n    // must temporarily hide the original element, otherwise it\n    // may affect layout of the fake element we want to render.\n    element.style.display = \"none\";\n\n    renderContents(el, group);\n    element.style.display = \"\";\n    p.removeChild(el);\n}\n\nfunction serializeSVG(element) {\n    var serializer = new window.XMLSerializer();\n    var xml = serializer.serializeToString(element);\n\n    if (browser.mozilla && !(element.getAttribute(\"width\") && element.getAttribute(\"height\"))) {\n        var doc = new window.DOMParser().parseFromString(xml, \"image/svg+xml\");\n        var svg$$1 = doc.documentElement;\n        var box = getContentBox(element);\n        svg$$1.setAttribute(\"width\", box.width);\n        svg$$1.setAttribute(\"height\", box.height);\n        xml = serializer.serializeToString(svg$$1);\n    }\n\n    return xml;\n}\n\nfunction renderContents(element, group) {\n    if (nodeInfo._stackingContext.element === element) {\n        // the group that was set in pushNodeInfo might have\n        // changed due to clipping/transforms, update it here.\n        nodeInfo._stackingContext.group = group;\n    }\n    switch (element.tagName.toLowerCase()) {\n      case \"img\":\n        renderImage(element, element.src, group);\n        break;\n\n      case \"svg\":\n        var xml = serializeSVG(element);\n        var dataURL = \"data:image/svg+xml;base64,\" + (encodeBase64(xml));\n        renderImage(element, dataURL, group);\n        break;\n\n      case \"canvas\":\n        try {\n            renderImage(element, element.toDataURL(\"image/png\"), group);\n        } catch (ex) {\n            // tainted; can't draw it, ignore.\n        }\n        break;\n\n      case \"textarea\":\n      case \"input\":\n      case \"select\":\n        renderFormField(element, group);\n        break;\n\n      default:\n        var children = [], floats = [], positioned = [];\n        for (var i = element.firstChild; i; i = i.nextSibling) {\n            switch (i.nodeType) {\n              case 3:         // Text\n                if (/\\S/.test(i.data)) {\n                    renderText(element, i, group);\n                }\n                break;\n              case 1:         // Element\n                var style = getComputedStyle$1(i);\n                var floating = getPropertyValue(style, \"float\");\n                var position = getPropertyValue(style, \"position\");\n                if (position != \"static\") {\n                    positioned.push(i);\n                }\n                else if (floating != \"none\") {\n                    floats.push(i);\n                } else {\n                    children.push(i);\n                }\n                break;\n            }\n        }\n\n        mergeSort(children, zIndexSort).forEach(function(el){ renderElement(el, group); });\n        mergeSort(floats, zIndexSort).forEach(function(el){ renderElement(el, group); });\n        mergeSort(positioned, zIndexSort).forEach(function(el){ renderElement(el, group); });\n    }\n}\n\nfunction renderText(element, node, group) {\n    if (emptyClipbox()) {\n        return;\n    }\n    var style = getComputedStyle$1(element);\n\n    if (parseFloat(getPropertyValue(style, \"text-indent\")) < -500) {\n        // assume it should not be displayed.  the slider's\n        // draggable handle displays a Drag text for some reason,\n        // having text-indent: -3333px.\n        return;\n    }\n\n    var text = node.data;\n    var start = 0;\n    var end = text.search(/\\S\\s*$/) + 1;\n\n    if (!end) {\n        return; // whitespace-only node\n    }\n\n    var fontSize = getPropertyValue(style, \"font-size\");\n    var lineHeight = getPropertyValue(style, \"line-height\");\n\n    // simply getPropertyValue(\"font\") doesn't work in Firefox :-\\\n    var font = [\n        getPropertyValue(style, \"font-style\"),\n        getPropertyValue(style, \"font-variant\"),\n        getPropertyValue(style, \"font-weight\"),\n        fontSize, // no need for line height here; it breaks layout in FF\n        getPropertyValue(style, \"font-family\")\n    ].join(\" \");\n\n    fontSize = parseFloat(fontSize);\n    lineHeight = parseFloat(lineHeight);\n\n    if (fontSize === 0) {\n        return;\n    }\n\n    var color = getPropertyValue(style, \"color\");\n    var range = element.ownerDocument.createRange();\n    var align$$1 = getPropertyValue(style, \"text-align\");\n    var isJustified = align$$1 == \"justify\";\n    var columnCount = getPropertyValue(style, \"column-count\", 1);\n    var whiteSpace = getPropertyValue(style, \"white-space\");\n    var textTransform = getPropertyValue(style, \"text-transform\");\n\n    // A line of 500px, with a font of 12px, contains an average of 80 characters, but since we\n    // err, we'd like to guess a bigger number rather than a smaller one.  Multiplying by 5\n    // seems to be a good option.\n    var estimateLineLength = element.getBoundingClientRect().width / fontSize * 5;\n    if (estimateLineLength === 0) {\n        estimateLineLength = 500;\n    }\n\n    // we'll maintain this so we can workaround bugs in Chrome's Range.getClientRects\n    // https://github.com/telerik/kendo/issues/5740\n    var prevLineBottom = null;\n\n    var underline = nodeInfo[\"underline\"];\n    var lineThrough = nodeInfo[\"line-through\"];\n    var overline = nodeInfo[\"overline\"];\n    var hasDecoration = underline || lineThrough || overline;\n\n    // doChunk returns true when all text has been rendered\n    while (!doChunk()) {}\n\n    if (hasDecoration) {\n        range.selectNode(node);\n        slice$1$1(range.getClientRects()).forEach(decorate);\n    }\n\n    return;                 // only function declarations after this line\n\n    function actuallyGetRangeBoundingRect(range) {\n        // XXX: to be revised when this Chrome bug is fixed:\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=612459\n        if (microsoft || browser.chrome || browser.safari) {\n            // Workaround browser bugs: IE and Chrome would sometimes\n            // return 0 or 1-width rectangles before or after the main\n            // one.  https://github.com/telerik/kendo/issues/4674\n\n            // Actually Chrome 50 got worse, since the rectangles can now have the width of a\n            // full character, making it hard to tell whether it's a bogus rectangle or valid\n            // selection location.  The workaround is to ignore rectangles that fall on the\n            // previous line.  https://github.com/telerik/kendo/issues/5740\n            var rectangles = range.getClientRects(), box = {\n                top    :  Infinity,\n                right  : -Infinity,\n                bottom : -Infinity,\n                left   :  Infinity\n            }, done = false;\n            for (var i = 0; i < rectangles.length; ++i) {\n                var b = rectangles[i];\n                if (b.width <= 1 || b.bottom === prevLineBottom) {\n                    continue;   // bogus rectangle\n                }\n                box.left   = Math.min(b.left   , box.left);\n                box.top    = Math.min(b.top    , box.top);\n                box.right  = Math.max(b.right  , box.right);\n                box.bottom = Math.max(b.bottom , box.bottom);\n                done = true;\n            }\n            if (!done) {\n                return range.getBoundingClientRect();\n            }\n            box.width = box.right - box.left;\n            box.height = box.bottom - box.top;\n            return box;\n        }\n        return range.getBoundingClientRect();\n    }\n\n    // Render a chunk of text, typically one line (but for justified text we render each word as\n    // a separate Text object, because spacing is variable).  Returns true when it finished the\n    // current node.  After each chunk it updates `start` to just after the last rendered\n    // character.\n    function doChunk() {\n        var origStart = start;\n        var box, pos = text.substr(start).search(/\\S/);\n        start += pos;\n        if (pos < 0 || start >= end) {\n            return true;\n        }\n\n        // Select a single character to determine the height of a line of text.  The box.bottom\n        // will be essential for us to figure out where the next line begins.\n        range.setStart(node, start);\n        range.setEnd(node, start + 1);\n        box = actuallyGetRangeBoundingRect(range);\n\n        // for justified text we must split at each space, because space has variable width.\n        var found = false;\n        if (isJustified || columnCount > 1) {\n            pos = text.substr(start).search(/\\s/);\n            if (pos >= 0) {\n                // we can only split there if it's on the same line, otherwise we'll fall back\n                // to the default mechanism (see findEOL below).\n                range.setEnd(node, start + pos);\n                var r = actuallyGetRangeBoundingRect(range);\n                if (r.bottom == box.bottom) {\n                    box = r;\n                    found = true;\n                    start += pos;\n                }\n            }\n        }\n\n        if (!found) {\n            // This code does three things: (1) it selects one line of text in `range`, (2) it\n            // leaves the bounding rect of that line in `box` and (3) it returns the position\n            // just after the EOL.  We know where the line starts (`start`) but we don't know\n            // where it ends.  To figure this out, we select a piece of text and look at the\n            // bottom of the bounding box.  If it changes, we have more than one line selected\n            // and should retry with a smaller selection.\n            //\n            // To speed things up, we first try to select all text in the node (`start` ->\n            // `end`).  If there's more than one line there, then select only half of it.  And\n            // so on.  When we find a value for `end` that fits in one line, we try increasing\n            // it (also in halves) until we get to the next line.  The algorithm stops when the\n            // right side of the bounding box does not change.\n            //\n            // One more thing to note is that everything happens in a single Text DOM node.\n            // There's no other tags inside it, therefore the left/top coordinates of the\n            // bounding box will not change.\n            pos = (function findEOL(min, eol, max){\n                range.setEnd(node, eol);\n                var r = actuallyGetRangeBoundingRect(range);\n                if (r.bottom != box.bottom && min < eol) {\n                    return findEOL(min, (min + eol) >> 1, eol);\n                } else if (r.right != box.right) {\n                    box = r;\n                    if (eol < max) {\n                        return findEOL(eol, (eol + max) >> 1, max);\n                    } else {\n                        return eol;\n                    }\n                } else {\n                    return eol;\n                }\n            })(start, Math.min(end, start + estimateLineLength), end);\n\n            if (pos == start) {\n                // if EOL is at the start, then no more text fits on this line.  Skip the\n                // remainder of this node entirely to avoid a stack overflow.\n                return true;\n            }\n            start = pos;\n\n            pos = range.toString().search(/\\s+$/);\n            if (pos === 0) {\n                return false; // whitespace only; we should not get here.\n            }\n            if (pos > 0) {\n                // eliminate trailing whitespace\n                range.setEnd(node, range.startOffset + pos);\n                box = actuallyGetRangeBoundingRect(range);\n            }\n        }\n\n        // another workaround for IE: if we rely on getBoundingClientRect() we'll overlap with the bullet for LI\n        // elements.  Calling getClientRects() and using the *first* rect appears to give us the correct location.\n        // Note: not to be used in Chrome as it randomly returns a zero-width rectangle from the previous line.\n        if (microsoft) {\n            box = range.getClientRects()[0];\n        }\n\n        var str = range.toString();\n        if (!/^(?:pre|pre-wrap)$/i.test(whiteSpace)) {\n            // node with non-significant space -- collapse whitespace.\n            str = str.replace(/\\s+/g, \" \");\n        }\n        else if (/\\t/.test(str)) {\n            // with significant whitespace we need to do something about literal TAB characters.\n            // There's no TAB glyph in a font so they would be rendered in PDF as an empty box,\n            // and the whole text will stretch to fill the original width.  The core PDF lib\n            // does not have sufficient context to deal with it.\n\n            // calculate the starting column here, since we initially discarded any whitespace.\n            var cc = 0;\n            for (pos = origStart; pos < range.startOffset; ++pos) {\n                var code = text.charCodeAt(pos);\n                if (code == 9) {\n                    // when we meet a TAB we must round up to the next tab stop.\n                    // in all browsers TABs seem to be 8 characters.\n                    cc += 8 - cc % 8;\n                } else if (code == 10 || code == 13) {\n                    // just in case we meet a newline we must restart.\n                    cc = 0;\n                } else {\n                    // ordinary character --> advance one column\n                    cc++;\n                }\n            }\n\n            // based on starting column, replace any TAB characters in the string we actually\n            // have to display with spaces so that they align to columns multiple of 8.\n            while ((pos = str.search(\"\\t\")) >= 0) {\n                var indent = \"        \".substr(0, 8 - (cc + pos) % 8);\n                str = str.substr(0, pos) + indent + str.substr(pos + 1);\n            }\n        }\n\n        if (!found) {\n            prevLineBottom = box.bottom;\n        }\n        drawText(str, box);\n    }\n\n    function drawText(str, box) {\n        // In IE the box height will be approximately lineHeight, while in\n        // other browsers it'll (correctly) be the height of the bounding\n        // box for the current text/font.  Which is to say, IE sucks again.\n        // The only good solution I can think of is to measure the text\n        // ourselves and center the bounding box.\n        if (microsoft && !isNaN(lineHeight)) {\n            var height = getFontHeight(font);\n            var top = (box.top + box.bottom - height) / 2;\n            box = {\n                top    : top,\n                right  : box.right,\n                bottom : top + height,\n                left   : box.left,\n                height : height,\n                width  : box.right - box.left\n            };\n        }\n\n        // var path = new Path({ stroke: { color: \"red\" }});\n        // path.moveTo(box.left, box.top)\n        //     .lineTo(box.right, box.top)\n        //     .lineTo(box.right, box.bottom)\n        //     .lineTo(box.left, box.bottom)\n        //     .close();\n        // group.append(path);\n\n        switch (textTransform) {\n          case \"uppercase\":\n            str = str.toUpperCase();\n            break;\n          case \"lowercase\":\n            str = str.toLowerCase();\n            break;\n          case \"capitalize\":\n            str = str.replace(/(?:^|\\s)\\S/g, function (l) { return l.toUpperCase(); });\n            break;\n        }\n\n        var text = new TextRect(\n            str, new Rect([ box.left, box.top ],\n                              [ box.width, box.height ]),\n            {\n                font: font,\n                fill: { color: color }\n            }\n        );\n        group.append(text);\n    }\n\n    function decorate(box) {\n        line(underline, box.bottom);\n        line(lineThrough, box.bottom - box.height / 2.7);\n        line(overline, box.top);\n        function line(color, ypos) {\n            if (color) {\n                var width = fontSize / 12;\n                var path = new Path({ stroke: {\n                    width: width,\n                    color: color\n                }});\n\n                ypos -= width;\n                path.moveTo(box.left, ypos)\n                    .lineTo(box.right, ypos);\n                group.append(path);\n            }\n        }\n    }\n}\n\nfunction groupInStackingContext(element, group, zIndex) {\n    var main;\n    if (zIndex != \"auto\") {\n        // use the current stacking context\n        main = nodeInfo._stackingContext.group;\n        zIndex = parseFloat(zIndex);\n    } else {\n        // normal flow  use given container.  we still have to\n        // figure out where should we insert this element with the\n        // assumption that its z-index is zero, as the group might\n        // already contain elements with higher z-index.\n        main = group;\n        zIndex = 0;\n    }\n    var a = main.children;\n    for (var i = 0; i < a.length; ++i) {\n        if (a[i]._dom_zIndex != null && a[i]._dom_zIndex > zIndex) {\n            break;\n        }\n    }\n\n    var tmp = new Group();\n    main.insert(i, tmp);\n    tmp._dom_zIndex = zIndex;\n\n    if (main !== group) {\n        // console.log(\"Placing\", element, \"in\", nodeInfo._stackingContext.element, \"at position\", i, \" / \", a.length);\n        // console.log(a.slice(i+1));\n\n        // if (nodeInfo._matrix) {\n        //     tmp.transform(nodeInfo._matrix);\n        // }\n        if (nodeInfo._clipbox) {\n            var m = nodeInfo._matrix.invert();\n            var r = nodeInfo._clipbox.transformCopy(m);\n            setClipping(tmp, Path.fromRect(r));\n            // console.log(r);\n            // tmp.append(Path.fromRect(r));\n            // tmp.append(new Text(element.className || element.id, r.topLeft()));\n        }\n    }\n\n    return tmp;\n}\n\nfunction renderElement(element, container) {\n    var style = getComputedStyle$1(element);\n\n    updateCounters(style);\n\n    if (/^(style|script|link|meta|iframe|col|colgroup)$/i.test(element.tagName)) {\n        return;\n    }\n\n    if (nodeInfo._clipbox == null) {\n        return;\n    }\n\n    var opacity = parseFloat(getPropertyValue(style, \"opacity\"));\n    var visibility = getPropertyValue(style, \"visibility\");\n    var display = getPropertyValue(style, \"display\");\n\n    if (opacity === 0 || visibility == \"hidden\" || display == \"none\") {\n        return;\n    }\n\n    var tr = getTransform(style);\n    var group;\n\n    var zIndex = getPropertyValue(style, \"z-index\");\n    if ((tr || opacity < 1) && zIndex == \"auto\") {\n        zIndex = 0;\n    }\n    group = groupInStackingContext(element, container, zIndex);\n\n    // XXX: remove at some point\n    // group._pdfElement = element;\n    // group.options._pdfDebug = \"\";\n    // if (element.id) {\n    //     group.options._pdfDebug = \"#\" + element.id;\n    // }\n    // if (element.className) {\n    //     group.options._pdfDebug += \".\" + element.className.split(\" \").join(\".\");\n    // }\n\n    if (opacity < 1) {\n        group.opacity(opacity * group.opacity());\n    }\n\n    pushNodeInfo(element, style, group);\n\n    if (!tr) {\n        _renderWithPseudoElements(element, group);\n    }\n    else {\n        saveStyle(element, function(){\n            // must clear transform, so getBoundingClientRect returns correct values.\n            pleaseSetPropertyValue(element.style, \"transform\", \"none\", \"important\");\n\n            // must also clear transitions, so correct values are returned *immediately*\n            pleaseSetPropertyValue(element.style, \"transition\", \"none\", \"important\");\n\n            // the presence of any transform makes it behave like it had position: relative,\n            // because why not.\n            // http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n            if (getPropertyValue(style, \"position\") == \"static\") {\n                // but only if it's not already positioned. :-/\n                pleaseSetPropertyValue(element.style, \"position\", \"relative\", \"important\");\n            }\n\n            // must translate to origin before applying the CSS\n            // transformation, then translate back.\n            var bbox = element.getBoundingClientRect();\n            var x = bbox.left + tr.origin[0];\n            var y = bbox.top + tr.origin[1];\n            var m = [ 1, 0, 0, 1, -x, -y ];\n            m = mmul(m, tr.matrix);\n            m = mmul(m, [ 1, 0, 0, 1, x, y ]);\n            m = setTransform$1(group, m);\n\n            nodeInfo._matrix = nodeInfo._matrix.multiplyCopy(m);\n\n            _renderWithPseudoElements(element, group);\n        });\n    }\n\n    popNodeInfo();\n\n    //drawDebugBox(element.getBoundingClientRect(), container);\n}\n\n// function drawDebugBox(box, group, color) {\n//     var path = Path.fromRect(new geo.Rect([ box.left, box.top ], [ box.width, box.height ]));\n//     if (color) {\n//         path.stroke(color);\n//     }\n//     group.append(path);\n// }\n\n// function dumpTextNode(node) {\n//     var txt = node.data.replace(/^\\s+/, \"\");\n//     if (txt.length < 100) {\n//         console.log(node.data.length + \": |\" + txt);\n//     } else {\n//         console.log(node.data.length + \": |\" + txt.substr(0, 50) + \"|...|\" + txt.substr(-50));\n//     }\n// }\n\nfunction mmul(a, b) {\n    var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\n    var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\n    return [\n        a1*a2 + b1*c2,          a1*b2 + b1*d2,\n        c1*a2 + d1*c2,          c1*b2 + d1*d2,\n        e1*a2 + f1*c2 + e2,     e1*b2 + f1*d2 + f2\n    ];\n}\n\nvar drawing = {\n\tsvg: svg$1,\n\tcanvas: canvas,\n\tutil: util,\n\tHasObservers: HasObservers,\n\tPathParser: PathParser,\n\tparsePath: parsePath,\n\tBaseNode: BaseNode,\n\tOptionsStore: OptionsStore,\n\tSurface: Surface,\n\tSurfaceFactory: SurfaceFactory,\n\texportImage: exportImage,\n\texportSVG: exportSVG,\n\tQuadNode: QuadNode,\n\tShapesQuadTree: ShapesQuadTree,\n\tElement: Element$1,\n\tCircle: Circle,\n\tArc: Arc,\n\tPath: Path,\n\tMultiPath: MultiPath,\n\tText: Text,\n\tImage: Image$1,\n\tGroup: Group,\n\tLayout: Layout,\n\tRect: Rect$2,\n\talign: align,\n\tvAlign: vAlign,\n\tstack: stack,\n\tvStack: vStack,\n\twrap: wrap,\n\tvWrap: vWrap,\n\tfit: fit,\n\tLinearGradient: LinearGradient,\n\tRadialGradient: RadialGradient,\n\tGradientStop: GradientStop,\n\tGradient: Gradient,\n\tAnimation: Animation,\n\tAnimationFactory: AnimationFactory,\n\tdrawDOM: drawDOM,\n\tdrawText: drawText,\n\tgetFontFaces: getFontFaces\n};\n\nkendo.deepExtend(kendo, {\n    drawing: drawing,\n    geometry: geometry\n});\n\nkendo.drawing.Segment = kendo.geometry.Segment;\nkendo.dataviz.drawing = kendo.drawing;\nkendo.dataviz.geometry = kendo.geometry;\nkendo.drawing.util.measureText = kendo.util.measureText;\nkendo.drawing.util.objectKey = kendo.util.objectKey;\nkendo.drawing.Color = kendo.Color;\nkendo.util.encodeBase64 = kendo.drawing.util.encodeBase64;\n\n})(window.kendo.jQuery);\n\n}, __webpack_require__.amdD);\n\n/***/ }),\n\n/***/ 97757:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../kendo.color\");\n\n/***/ }),\n\n/***/ 4199:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../util/text-metrics\");\n\n/***/ }),\n\n/***/ 49454:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./util\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(5519);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}