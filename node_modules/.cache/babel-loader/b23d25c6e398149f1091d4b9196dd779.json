{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    6516:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(3073), __webpack_require__(70548), __webpack_require__(36765)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        var __meta__ = {\n          id: \"pivotgrid\",\n          name: \"PivotGrid\",\n          category: \"web\",\n          description: \"The PivotGrid widget is a data summarization tool.\",\n          depends: [\"dom\", \"data\", \"data.xml\", \"sortable\", \"pivot.common\"],\n          features: [{\n            id: \"pivotgrid-configurator\",\n            name: \"Configurator\",\n            description: \"The PivotConfigurator widget allows the user to select data slices displayed in PivotGrid\",\n            depends: [\"pivot.configurator\"]\n          }, {\n            id: \"pivotgrid-filtering\",\n            name: \"Filtering\",\n            description: \"Support for filtering\",\n            depends: [\"pivot.fieldmenu\"]\n          }, {\n            id: \"pivotgrid-excel-export\",\n            name: \"Excel export\",\n            description: \"Export pivot grid data as Excel spreadsheet\",\n            depends: [\"ooxml\"]\n          }, {\n            id: \"pivotgrid-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export pivot grid data as PDF\",\n            depends: [\"pdf\", \"drawing\"]\n          }, {\n            id: \"mobile-scroller\",\n            name: \"Mobile scroller\",\n            description: \"Support for kinetic scrolling in mobile device\",\n            depends: [\"mobile.scroller\"]\n          }]\n        };\n\n        (function ($, undefined) {\n          var kendo = window.kendo,\n              ui = kendo.ui,\n              Class = kendo.Class,\n              Comparer = kendo.data.Comparer,\n              Widget = ui.Widget,\n              DataSource = kendo.data.DataSource,\n              outerWidth = kendo._outerWidth,\n              outerHeight = kendo._outerHeight,\n              common = window.kendo.pivotgrid.common,\n              fetchDiscover = common.fetchDiscover,\n              normalizeFilter = kendo.data.Query.normalizeFilter,\n              normalizeSort = kendo.data.Query.normalizeSort,\n              toString = {}.toString,\n              identity = function (o) {\n            return o;\n          },\n              map = $.map,\n              extend = $.extend,\n              isFunction = kendo.isFunction,\n              fetchData = common.fetchData,\n              createLocalDataState = common.createLocalDataState,\n              createDataTree = common.createDataTree,\n              sumAggregate = common.sumAggregate,\n              averageAggregate = common.averageAggregate,\n              minAggregate = common.minAggregate,\n              maxAggregate = common.maxAggregate,\n              createDataState = common.createDataState,\n              toColumns = common.toColumns,\n              toRows = common.toRows,\n              toTree = common.toTree,\n              toData = common.toData,\n              headersReducer = common.headersReducer,\n              RESIZE = \"resize\",\n              READ = \"read\",\n              CHANGE = \"change\",\n              ERROR = \"error\",\n              REQUESTSTART = \"requestStart\",\n              PROGRESS = \"progress\",\n              REQUESTEND = \"requestEnd\",\n              MEASURES = \"Measures\",\n              STATERESET = \"stateReset\",\n              AUTO = \"auto\",\n              DIV = \"<div></div>\",\n              NS = \".kendoPivotGrid\",\n              ROW_TOTAL_KEY = \"__row_total__\",\n              DATABINDING = \"dataBinding\",\n              DATABOUND = \"dataBound\",\n              EXPANDMEMBER = \"expandMember\",\n              HEADERTEMPLATE = '<th data-key=\"#:key#\" class=\"#:headerClass#\" #if (colspan) {#colspan=\"#:colspan#\"#}# #if (rowspan) {#rowspan=\"#:rowspan#\"#}#>' + '#if (expandable) {# <span class=\"k-icon k-i-arrow-chevron-#:iconClass# k-color-inherit\" role=\"presentation\"></span>#}#' + '</th>',\n              COLLAPSEMEMBER = \"collapseMember\",\n              STATE_EXPANDED = \"k-i-collapse\",\n              STATE_COLLAPSED = \"k-i-expand\",\n              HEADER_TEMPLATE = \"<span>#: data.member.caption || data.member.name #</span>\",\n              KPISTATUS_TEMPLATE = '<span class=\"k-icon k-i-kpi-status-#=data.dataItem.value > 0 ? \\\"open\\\" : data.dataItem.value < 0 ? \\\"deny\\\" : \\\"hold\\\"#\" title=\"#:data.dataItem.value#\"></span>',\n              KPITREND_TEMPLATE = '<span class=\"k-icon k-i-kpi-trend-#=data.dataItem.value > 0 ? \\\"increase\\\" : data.dataItem.value < 0 ? \\\"decrease\\\" : \\\"equal\\\"#\" title=\"#:data.dataItem.value#\"></span>',\n              DATACELL_TEMPLATE = '#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || \"&nbsp;\" : \"&nbsp;\" #',\n              LAYOUT_TABLE = '<table class=\"k-pivot-layout\">' + '<tr>' + '<td>' + '<div class=\"k-pivot-rowheaders\"></div>' + '</td>' + '<td>' + '<div class=\"k-pivot-table\"></div>' + '</td>' + '</tr>' + '</table>';\n\n          var AXIS_ROWS = \"rows\";\n          var AXIS_COLUMNS = \"columns\";\n\n          function normalizeMeasures(measure) {\n            var descriptor = typeof measure === \"string\" ? [{\n              name: measure\n            }] : measure;\n            var descriptors = toString.call(descriptor) === \"[object Array]\" ? descriptor : descriptor !== undefined ? [descriptor] : [];\n            return map(descriptors, function (d) {\n              if (typeof d === \"string\") {\n                return {\n                  name: d\n                };\n              }\n\n              return $.extend(true, d, {\n                name: d.name,\n                type: d.type\n              });\n            });\n          }\n\n          function normalizeMembers(member) {\n            var descriptor = typeof member === \"string\" ? [{\n              name: [member],\n              expand: false\n            }] : member;\n            var descriptors = toString.call(descriptor) === \"[object Array]\" ? descriptor : descriptor !== undefined ? [descriptor] : [];\n            return map(descriptors, function (d) {\n              if (typeof d === \"string\") {\n                return {\n                  name: [d],\n                  expand: false\n                };\n              }\n\n              return {\n                name: toString.call(d.name) === \"[object Array]\" ? d.name.slice() : [d.name],\n                expand: d.expand\n              };\n            });\n          }\n\n          function normalizeName(name) {\n            if (name.indexOf(\" \") !== -1) {\n              name = '[\"' + name + '\"]';\n            }\n\n            return name;\n          }\n\n          function accumulateMembers(accumulator, rootTuple, tuple, level) {\n            var idx, length;\n            var children;\n            var member;\n\n            if (!tuple) {\n              tuple = rootTuple;\n            }\n\n            if (!level) {\n              level = 0;\n            }\n\n            member = tuple.members[level];\n\n            if (!member || member.measure) {\n              //return if no member or measure\n              return;\n            }\n\n            children = member.children;\n            length = children.length;\n\n            if (tuple === rootTuple) {\n              accumulator[kendo.stringify([member.name])] = !!length;\n            } else if (length) {\n              accumulator[kendo.stringify(buildPath(tuple, level))] = true;\n            }\n\n            if (length) {\n              for (idx = 0; idx < length; idx++) {\n                accumulateMembers(accumulator, rootTuple, children[idx], level);\n              }\n            }\n\n            accumulateMembers(accumulator, rootTuple, tuple, level + 1);\n          }\n\n          function descriptorsForAxes(tuples) {\n            var result = {};\n\n            if (tuples.length) {\n              accumulateMembers(result, tuples[0]);\n            }\n\n            var descriptors = [];\n\n            for (var k in result) {\n              descriptors.push({\n                name: JSON.parse(k),\n                expand: result[k]\n              });\n            }\n\n            return descriptors;\n          }\n\n          function addMissingPathMembers(members, axis) {\n            var tuples = axis.tuples || [];\n            var firstTuple = tuples[0];\n\n            if (firstTuple && members.length < firstTuple.members.length) {\n              var tupleMembers = firstTuple.members;\n\n              for (var idx = 0; idx < tupleMembers.length; idx++) {\n                if (tupleMembers[idx].measure) {\n                  continue;\n                }\n\n                var found = false;\n\n                for (var j = 0; j < members.length; j++) {\n                  if (getName(members[j]).indexOf(tupleMembers[idx].hierarchy) === 0) {\n                    found = true;\n                    break;\n                  }\n                }\n\n                if (!found) {\n                  members.push({\n                    name: [tupleMembers[idx].name],\n                    expand: false\n                  }); //calling normalize here to make name from string to array\n                }\n              }\n            }\n          }\n\n          function tupleToDescriptors(tuple) {\n            var result = [];\n            var members = tuple.members;\n\n            for (var idx = 0; idx < members.length; idx++) {\n              if (members[idx].measure) {\n                continue;\n              } //make tuple name an array\n\n\n              result.push({\n                name: [members[idx].name],\n                expand: members[idx].children.length > 0\n              });\n            }\n\n            return result;\n          }\n\n          function descriptorsForMembers(axis, members, measures) {\n            axis = axis || {};\n            addMissingPathMembers(members, axis);\n\n            if (measures.length > 1) {\n              members.push({\n                name: MEASURES,\n                measure: true,\n                children: normalizeMembers(measures)\n              });\n            }\n\n            var tupletoSearch = {\n              members: members\n            };\n\n            if (axis.tuples) {\n              var result = findExistingTuple(axis.tuples, tupletoSearch);\n\n              if (result.tuple) {\n                members = tupleToDescriptors(result.tuple);\n              }\n            }\n\n            return members;\n          }\n\n          function createAggregateGetter(m) {\n            var measureGetter = kendo.getter(m.field, true);\n            return function (aggregatorContext, state) {\n              return m.aggregate(measureGetter(aggregatorContext.dataItem), state, aggregatorContext);\n            };\n          }\n\n          function isNumber(val) {\n            return typeof val === \"number\" && !isNaN(val);\n          }\n\n          function isDate(val) {\n            return val && val.getTime;\n          }\n\n          function getScollWidth() {\n            var scrollbar = 0;\n            var div;\n\n            if (document && document.createElement) {\n              div = document.createElement('div');\n              div.style.cssText = 'overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block';\n              div.innerHTML = '&nbsp;';\n              document.body.appendChild(div);\n              scrollbar = div.offsetWidth - div.scrollWidth;\n              document.body.removeChild(div);\n            }\n\n            return scrollbar;\n          }\n\n          function flattenSortDescriptors(descriptors) {\n            var result = [];\n\n            for (var i = 0; i < descriptors.length; i++) {\n              result.push({\n                dir: descriptors[i].dir,\n                field: descriptors[i].field.split(\".\").pop()\n              });\n            }\n\n            return result;\n          }\n\n          function createLocalMeasure(field, key, format) {\n            var formatFunc = function (value) {\n              return kendo.format(this.format, value);\n            };\n\n            var measureMap = {\n              \"Sum\": sumAggregate,\n              \"Average\": averageAggregate,\n              \"Min\": minAggregate,\n              \"Max\": maxAggregate\n            };\n\n            var valueFunc = function (item) {\n              return item[this.field];\n            };\n\n            var measure = {\n              value: valueFunc.bind({\n                field: field\n              }),\n              aggregate: measureMap[key],\n              caption: key,\n              uniqueName: key,\n              type: 2,\n              name: [key]\n            };\n\n            if (format) {\n              measure.aggregate.format = formatFunc.bind({\n                format: format\n              });\n            }\n\n            return measure;\n          }\n\n          var functions = {\n            sum: function (value, state) {\n              var accumulator = state.accumulator;\n\n              if (!isNumber(accumulator)) {\n                accumulator = value;\n              } else if (isNumber(value)) {\n                accumulator += value;\n              }\n\n              return accumulator;\n            },\n            count: function (value, state) {\n              return (state.accumulator || 0) + 1;\n            },\n            average: {\n              aggregate: function (value, state) {\n                var accumulator = state.accumulator;\n\n                if (state.count === undefined) {\n                  state.count = 0;\n                }\n\n                if (!isNumber(accumulator)) {\n                  accumulator = value;\n                } else if (isNumber(value)) {\n                  accumulator += value;\n                }\n\n                if (isNumber(value)) {\n                  state.count++;\n                }\n\n                return accumulator;\n              },\n              result: function (state) {\n                var accumulator = state.accumulator;\n\n                if (isNumber(accumulator)) {\n                  accumulator = accumulator / state.count;\n                }\n\n                return accumulator;\n              }\n            },\n            max: function (value, state) {\n              var accumulator = state.accumulator;\n\n              if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n              }\n\n              if (accumulator < value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n              }\n\n              return accumulator;\n            },\n            min: function (value, state) {\n              var accumulator = state.accumulator;\n\n              if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n              }\n\n              if (accumulator > value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n              }\n\n              return accumulator;\n            }\n          };\n          var PivotCubeBuilder = Class.extend({\n            init: function (options) {\n              this.options = extend({}, this.options, options);\n              this.dimensions = this._normalizeDescriptors(\"field\", this.options.dimensions);\n              this.measures = this._normalizeDescriptors(\"name\", this.options.measures);\n            },\n            _normalizeDescriptors: function (keyField, descriptors) {\n              descriptors = descriptors || {};\n              var fields = {};\n              var field;\n\n              if (toString.call(descriptors) === \"[object Array]\") {\n                for (var idx = 0, length = descriptors.length; idx < length; idx++) {\n                  field = descriptors[idx];\n\n                  if (typeof field === \"string\") {\n                    fields[field] = {};\n                  } else if (field[keyField]) {\n                    fields[field[keyField]] = field;\n                  }\n                }\n\n                descriptors = fields;\n              }\n\n              return descriptors;\n            },\n            _rootTuples: function (rootNames, measureAggregators) {\n              var aggregatorsLength = measureAggregators.length || 1;\n              var dimensionsSchema = this.dimensions || [];\n              var root, name, parts;\n              var measureIdx = 0;\n              var idx;\n              var rootNamesLength = rootNames.length;\n              var result = [];\n              var keys = [];\n\n              if (rootNamesLength || measureAggregators.length) {\n                for (measureIdx = 0; measureIdx < aggregatorsLength; measureIdx++) {\n                  root = {\n                    members: []\n                  };\n\n                  for (idx = 0; idx < rootNamesLength; idx++) {\n                    name = rootNames[idx];\n                    parts = name.split(\"&\");\n                    root.members[root.members.length] = {\n                      children: [],\n                      caption: (dimensionsSchema[name] || {}).caption || \"All\",\n                      name: name,\n                      levelName: name,\n                      levelNum: \"0\",\n                      hasChildren: true,\n                      parentName: parts.length > 1 ? parts[0] : undefined,\n                      hierarchy: name\n                    };\n                  }\n\n                  if (aggregatorsLength > 1) {\n                    root.members[root.members.length] = {\n                      children: [],\n                      caption: measureAggregators[measureIdx].caption,\n                      name: measureAggregators[measureIdx].descriptor.name,\n                      levelName: \"MEASURES\",\n                      levelNum: \"0\",\n                      hasChildren: false,\n                      parentName: undefined,\n                      hierarchy: \"MEASURES\"\n                    };\n                  }\n\n                  result[result.length] = root;\n                }\n\n                keys.push(ROW_TOTAL_KEY);\n              }\n\n              return {\n                keys: keys,\n                tuples: result\n              };\n            },\n            _sortMap: function (map, sortDescriptors) {\n              var sortedMaps = [];\n              var sortTree = [];\n              var flattenTree = [];\n              var mapItem;\n              var key;\n\n              for (key in map) {\n                if (!map[key].directParentName) {\n                  sortTree.push($.extend({}, {\n                    name: key,\n                    parentName: map[key].parentName\n                  }));\n                }\n              } //if there are no root this means that something is expanding\n              //and we should only sort that part of the tree\n\n\n              if (!sortTree.length) {\n                for (key in map) {\n                  sortTree.push($.extend({}, {\n                    name: key,\n                    parentName: map[key].parentName\n                  }));\n                }\n              }\n\n              fillSortTree(sortTree, map); // fill tree recursive\n\n              for (var i = 0; i < sortDescriptors.length; i++) {\n                sortItemsTree(sortDescriptors[i].field.split(\".\").pop(), sortTree, Comparer.create({\n                  field: \"name\",\n                  dir: sortDescriptors[i].dir\n                }));\n              }\n\n              flattenTree = flatColumns(sortTree); //we need to flatten the structure so the tuples can build correctly\n\n              for (var j = 0; j < flattenTree.length; j++) {\n                mapItem = map[flattenTree[j].name];\n                mapItem.index = j;\n                sortedMaps[j] = mapItem;\n              }\n\n              return sortedMaps;\n            },\n            _expandedTuples: function (map, expanded, measureAggregators, sortDescriptors) {\n              var aggregatorsLength = measureAggregators.length || 1;\n              var dimensionsSchema = this.dimensions || [];\n              var measureIdx;\n              var tuple;\n              var key;\n              var mapItem;\n              var current;\n              var currentKeys;\n              var accumulator = [];\n              var accumulatorKeys = [];\n              var memberInfo;\n              var expandedNames;\n              var parts;\n              var name;\n              var idx;\n\n              if (sortDescriptors && sortDescriptors.length && !$.isEmptyObject(map)) {\n                map = this._sortMap(map, sortDescriptors);\n              }\n\n              for (key in map) {\n                mapItem = map[key];\n                memberInfo = this._findExpandedMember(expanded, mapItem.uniquePath);\n                current = accumulator[memberInfo.index] || [];\n                currentKeys = accumulatorKeys[memberInfo.index] || [];\n                expandedNames = memberInfo.member.names;\n\n                for (measureIdx = 0; measureIdx < aggregatorsLength; measureIdx++) {\n                  tuple = {\n                    members: []\n                  };\n\n                  for (idx = 0; idx < expandedNames.length; idx++) {\n                    if (idx === memberInfo.member.expandedIdx) {\n                      tuple.members[tuple.members.length] = {\n                        children: [],\n                        caption: mapItem.value,\n                        name: mapItem.name,\n                        hasChildren: false,\n                        levelNum: 1,\n                        levelName: mapItem.parentName + mapItem.name,\n                        parentName: mapItem.parentName,\n                        hierarchy: mapItem.parentName + mapItem.name\n                      };\n\n                      if (measureIdx === 0) {\n                        currentKeys.push(buildPath(tuple, idx).join(\"\"));\n                      }\n                    } else {\n                      name = expandedNames[idx];\n                      parts = name.split(\"&\");\n                      tuple.members[tuple.members.length] = {\n                        children: [],\n                        caption: (dimensionsSchema[name] || {}).caption || \"All\",\n                        name: name,\n                        levelName: name,\n                        levelNum: \"0\",\n                        hasChildren: true,\n                        parentName: parts.length > 1 ? parts[0] : undefined,\n                        hierarchy: name\n                      };\n                    }\n                  }\n\n                  if (aggregatorsLength > 1) {\n                    tuple.members[tuple.members.length] = {\n                      children: [],\n                      caption: measureAggregators[measureIdx].caption,\n                      name: measureAggregators[measureIdx].descriptor.name,\n                      levelName: \"MEASURES\",\n                      levelNum: \"0\",\n                      hasChildren: true,\n                      parentName: undefined,\n                      hierarchy: \"MEASURES\"\n                    };\n                  }\n\n                  current[current.length] = tuple;\n                }\n\n                accumulator[memberInfo.index] = current;\n                accumulatorKeys[memberInfo.index] = currentKeys;\n              }\n\n              return {\n                keys: accumulatorKeys,\n                tuples: accumulator\n              };\n            },\n            _findExpandedMember: function (members, parentName) {\n              for (var idx = 0; idx < members.length; idx++) {\n                if (members[idx].uniquePath === parentName) {\n                  return {\n                    member: members[idx],\n                    index: idx\n                  };\n                }\n              }\n            },\n            _asTuples: function (map, descriptor, measureAggregators, sortDescriptors) {\n              measureAggregators = measureAggregators || [];\n\n              var rootInfo = this._rootTuples(descriptor.root, measureAggregators);\n\n              var expandedInfo = this._expandedTuples(map, descriptor.expanded, measureAggregators, sortDescriptors);\n\n              return {\n                keys: [].concat.apply(rootInfo.keys, expandedInfo.keys),\n                tuples: [].concat.apply(rootInfo.tuples, expandedInfo.tuples)\n              };\n            },\n            _measuresInfo: function (measures, rowAxis) {\n              var idx = 0;\n              var length = measures && measures.length;\n              var aggregateNames = [];\n              var resultFuncs = {};\n              var formats = {};\n              var descriptors = this.measures || {};\n              var measure;\n              var name;\n\n              for (; idx < length; idx++) {\n                name = measures[idx].descriptor.name;\n                measure = descriptors[name] || {};\n                aggregateNames.push(name);\n\n                if (measure.result) {\n                  resultFuncs[name] = measure.result;\n                }\n\n                if (measure.format) {\n                  formats[name] = measure.format;\n                }\n              }\n\n              return {\n                names: aggregateNames,\n                formats: formats,\n                resultFuncs: resultFuncs,\n                rowAxis: rowAxis\n              };\n            },\n            _toDataArray: function (map, measuresInfo, rowKeys, columnKeys) {\n              var result = [];\n              var aggregates;\n              var name, i, j, k, n;\n              var row, column, columnKey;\n              var rowMeasureNamesLength = 1;\n              var rowMeasureNames = [];\n              var columnMeasureNames;\n              var rowLength = rowKeys.length || 1;\n              var columnLength = columnKeys.length || 1;\n\n              if (measuresInfo.rowAxis) {\n                rowMeasureNames = measuresInfo.names;\n                rowMeasureNamesLength = rowMeasureNames.length;\n              } else {\n                columnMeasureNames = measuresInfo.names;\n              }\n\n              for (i = 0; i < rowLength; i++) {\n                row = map[rowKeys[i] || ROW_TOTAL_KEY];\n\n                for (n = 0; n < rowMeasureNamesLength; n++) {\n                  if (measuresInfo.rowAxis) {\n                    columnMeasureNames = [rowMeasureNames[n]];\n                  }\n\n                  for (j = 0; j < columnLength; j++) {\n                    columnKey = columnKeys[j] || ROW_TOTAL_KEY;\n                    column = row.items[columnKey];\n\n                    if (columnKey === ROW_TOTAL_KEY) {\n                      aggregates = row.aggregates;\n                    } else {\n                      aggregates = column ? column.aggregates : {};\n                    }\n\n                    for (k = 0; k < columnMeasureNames.length; k++) {\n                      name = columnMeasureNames[k];\n\n                      this._addData(result, aggregates[name], measuresInfo.formats[name], measuresInfo.resultFuncs[name]);\n                    }\n                  }\n                }\n              }\n\n              return result;\n            },\n            _addData: function (result, value, format, resultFunc) {\n              var fmtValue = \"\";\n              var ordinal;\n\n              if (value) {\n                value = resultFunc ? resultFunc(value) : value.accumulator;\n                fmtValue = format ? kendo.format(format, value) : value;\n              }\n\n              ordinal = result.length;\n              result[ordinal] = {\n                ordinal: ordinal,\n                value: value || \"\",\n                fmtValue: fmtValue\n              };\n            },\n            _matchDescriptors: function (dataItem, descriptor, getters) {\n              var parts;\n              var parentField;\n              var expectedValue;\n              var names = descriptor.names;\n              var idx = descriptor.expandedIdx;\n              var value;\n\n              while (idx > 0) {\n                parts = names[--idx].split(\"&\");\n\n                if (parts.length > 1) {\n                  parentField = parts[0];\n                  expectedValue = parts[1];\n                  value = getters[parentField](dataItem);\n                  value = value !== undefined && value !== null ? value.toString() : value;\n\n                  if (value != expectedValue) {\n                    return false;\n                  }\n                }\n              }\n\n              return true;\n            },\n            _calculateAggregate: function (measureAggregators, aggregatorContext, totalItem) {\n              var result = {};\n              var state;\n              var name;\n\n              for (var measureIdx = 0; measureIdx < measureAggregators.length; measureIdx++) {\n                name = measureAggregators[measureIdx].descriptor.name;\n                state = totalItem.aggregates[name] || {};\n                state.accumulator = measureAggregators[measureIdx].aggregator(aggregatorContext, state);\n                result[name] = state;\n              }\n\n              return result;\n            },\n            _processColumns: function (measureAggregators, descriptors, getters, columns, aggregatorContext, rowTotal, state, updateColumn) {\n              var value;\n              var descriptor;\n              var column;\n              var totalItem;\n              var key, name, parentName, path;\n              var dataItem = aggregatorContext.dataItem;\n              var idx = 0;\n\n              for (; idx < descriptors.length; idx++) {\n                descriptor = descriptors[idx]; //checks whether the dataItem is relevant to the descriptors\n\n                if (!this._matchDescriptors(dataItem, descriptor, getters)) {\n                  continue;\n                }\n\n                path = descriptor.names.slice(0, descriptor.expandedIdx).join(\"\");\n                name = descriptor.names[descriptor.expandedIdx];\n                value = getters[name](dataItem);\n                value = value !== undefined && value !== null ? value.toString() : value;\n                parentName = name;\n                name = name + \"&\" + value;\n                key = path + name;\n                column = columns[key] || {\n                  index: state.columnIndex,\n                  parentName: parentName,\n                  name: name,\n                  directParentName: path.indexOf(\"&\") !== -1 ? path : \"\",\n                  uniquePath: path + parentName,\n                  childrenMap: {},\n                  value: value\n                };\n\n                if (path && columns[path] && !columns[path].childrenMap[path + parentName + \"&\" + value]) {\n                  columns[path].childrenMap[path + parentName + \"&\" + value] = true;\n                }\n\n                totalItem = rowTotal.items[key] || {\n                  aggregates: {}\n                };\n                rowTotal.items[key] = {\n                  index: column.index,\n                  aggregates: this._calculateAggregate(measureAggregators, aggregatorContext, totalItem)\n                };\n\n                if (updateColumn) {\n                  if (!columns[key]) {\n                    state.columnIndex++;\n                  }\n\n                  columns[key] = column;\n                }\n              }\n            },\n            _measureAggregators: function (options) {\n              var measureDescriptors = options.measures || [];\n              var measures = this.measures || {};\n              var aggregators = [];\n              var descriptor, measure, idx, length;\n              var defaultAggregate, aggregate;\n\n              if (measureDescriptors.length) {\n                for (idx = 0, length = measureDescriptors.length; idx < length; idx++) {\n                  descriptor = measureDescriptors[idx];\n                  measure = measures[descriptor.name];\n                  defaultAggregate = null;\n\n                  if (measure) {\n                    aggregate = measure.aggregate;\n\n                    if (typeof aggregate === \"string\") {\n                      defaultAggregate = functions[aggregate.toLowerCase()];\n\n                      if (!defaultAggregate) {\n                        throw new Error(\"There is no such aggregate function\");\n                      }\n\n                      measure.aggregate = defaultAggregate.aggregate || defaultAggregate;\n                      measure.result = defaultAggregate.result;\n                    }\n\n                    aggregators.push({\n                      descriptor: descriptor,\n                      caption: measure.caption,\n                      result: measure.result,\n                      aggregator: createAggregateGetter(measure)\n                    });\n                  }\n                }\n              } else {\n                aggregators.push({\n                  descriptor: {\n                    name: \"default\"\n                  },\n                  caption: \"default\",\n                  aggregator: function () {\n                    return 1;\n                  }\n                });\n              }\n\n              return aggregators;\n            },\n            _buildGetters: function (names) {\n              var result = {};\n              var parts;\n              var name;\n\n              for (var idx = 0; idx < names.length; idx++) {\n                name = names[idx];\n                parts = name.split(\"&\");\n\n                if (parts.length > 1) {\n                  result[parts[0]] = kendo.getter(parts[0], true);\n                } else {\n                  result[name] = kendo.getter(normalizeName(name), true);\n                }\n              }\n\n              return result;\n            },\n            _parseDescriptors: function (descriptors) {\n              var parsedDescriptors = parseDescriptors(descriptors);\n              var rootNames = getRootNames(parsedDescriptors.root);\n              var expanded = parsedDescriptors.expanded;\n              var result = [];\n\n              for (var idx = 0; idx < expanded.length; idx++) {\n                result.push(mapNames(expanded[idx].name, rootNames));\n              }\n\n              return {\n                root: rootNames,\n                expanded: result\n              };\n            },\n            _filter: function (data, filter) {\n              if (!filter) {\n                return data;\n              }\n\n              var expr;\n              var idx = 0;\n              var filters = filter.filters;\n\n              for (; idx < filters.length; idx++) {\n                expr = filters[idx];\n\n                if (expr.operator === \"in\") {\n                  filters[idx] = this._normalizeFilter(expr);\n                }\n              }\n\n              return new kendo.data.Query(data).filter(filter).data;\n            },\n            _normalizeFilter: function (filter) {\n              var value = filter.value.split(\",\");\n              var result = [];\n\n              if (!value.length) {\n                return value;\n              }\n\n              for (var idx = 0; idx < value.length; idx++) {\n                result.push({\n                  field: filter.field,\n                  operator: \"eq\",\n                  value: value[idx]\n                });\n              }\n\n              return {\n                logic: \"or\",\n                filters: result\n              };\n            },\n            process: function (data, options) {\n              data = data || [];\n              options = options || {};\n              data = this._filter(data, options.filter);\n              var measures = options.measures || [];\n              var measuresRowAxis = options.measuresAxis === \"rows\";\n              var columnDescriptors = options.columns || [];\n              var rowDescriptors = options.rows || [];\n\n              if (!columnDescriptors.length && rowDescriptors.length && (!measures.length || measures.length && measuresRowAxis)) {\n                columnDescriptors = rowDescriptors;\n                rowDescriptors = [];\n                measuresRowAxis = false;\n              }\n\n              if (!columnDescriptors.length && !rowDescriptors.length) {\n                measuresRowAxis = false;\n              }\n\n              if (!columnDescriptors.length && measures.length) {\n                columnDescriptors = normalizeMembers(options.measures);\n              }\n\n              columnDescriptors = this._parseDescriptors(columnDescriptors);\n              rowDescriptors = this._parseDescriptors(rowDescriptors);\n              var aggregatedData = {};\n              var columns = {};\n              var rows = {};\n              var rowValue;\n              var state = {\n                columnIndex: 0\n              };\n\n              var measureAggregators = this._measureAggregators(options);\n\n              var columnGetters = this._buildGetters(columnDescriptors.root);\n\n              var rowGetters = this._buildGetters(rowDescriptors.root);\n\n              var processed = false;\n              var expandedColumns = columnDescriptors.expanded;\n              var expandedRows = rowDescriptors.expanded;\n              var dataItem;\n              var aggregatorContext;\n              var hasExpandedRows = expandedRows.length !== 0;\n              var rowIdx, rowDescriptor, rowName, rowTotal;\n              var key, path, parentName, value;\n              var columnsInfo, rowsInfo;\n              var length = data.length;\n              var idx = 0;\n\n              if (columnDescriptors.root.length || rowDescriptors.root.length) {\n                processed = true;\n\n                for (idx = 0; idx < length; idx++) {\n                  dataItem = data[idx];\n                  aggregatorContext = {\n                    dataItem: dataItem,\n                    index: idx\n                  };\n                  rowTotal = aggregatedData[ROW_TOTAL_KEY] || {\n                    items: {},\n                    aggregates: {}\n                  };\n\n                  this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, rowTotal, state, !hasExpandedRows);\n\n                  rowTotal.aggregates = this._calculateAggregate(measureAggregators, aggregatorContext, rowTotal);\n                  aggregatedData[ROW_TOTAL_KEY] = rowTotal;\n\n                  for (rowIdx = 0; rowIdx < expandedRows.length; rowIdx++) {\n                    rowDescriptor = expandedRows[rowIdx];\n\n                    if (!this._matchDescriptors(dataItem, rowDescriptor, rowGetters)) {\n                      this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, {\n                        items: {},\n                        aggregates: {}\n                      }, state, true);\n\n                      continue;\n                    }\n\n                    path = rowDescriptor.names.slice(0, rowDescriptor.expandedIdx).join(\"\");\n                    rowName = rowDescriptor.names[rowDescriptor.expandedIdx];\n                    parentName = rowName;\n                    rowValue = rowGetters[rowName](dataItem);\n                    rowValue = rowValue !== undefined ? rowValue.toString() : rowValue;\n                    rowName = rowName + \"&\" + rowValue;\n                    key = path + rowName;\n                    rows[key] = {\n                      uniquePath: path + parentName,\n                      parentName: parentName,\n                      name: rowName,\n                      value: rowValue\n                    };\n                    value = aggregatedData[key] || {\n                      items: {},\n                      aggregates: {}\n                    };\n\n                    this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, value, state, true);\n\n                    value.aggregates = this._calculateAggregate(measureAggregators, aggregatorContext, value);\n                    aggregatedData[key] = value;\n                  }\n                }\n              }\n\n              if (processed && length) {\n                if (measureAggregators.length > 1 && (!options.columns || !options.columns.length)) {\n                  columnDescriptors = {\n                    root: [],\n                    expanded: []\n                  };\n                }\n\n                columnsInfo = this._asTuples(columns, columnDescriptors, measuresRowAxis ? [] : measureAggregators, options.sort ? options.sort : []);\n                rowsInfo = this._asTuples(rows, rowDescriptors, measuresRowAxis ? measureAggregators : [], options.sort ? options.sort : []);\n                columns = columnsInfo.tuples;\n                rows = rowsInfo.tuples;\n                aggregatedData = this._toDataArray(aggregatedData, this._measuresInfo(measureAggregators, measuresRowAxis), rowsInfo.keys, columnsInfo.keys);\n              } else {\n                aggregatedData = columns = rows = [];\n              }\n\n              return {\n                axes: {\n                  columns: {\n                    tuples: columns\n                  },\n                  rows: {\n                    tuples: rows\n                  }\n                },\n                data: aggregatedData\n              };\n            }\n          });\n          var PivotTransport = Class.extend({\n            init: function (options, transport) {\n              this.transport = transport;\n              this.options = transport.options || {};\n\n              if (!this.transport.discover) {\n                if (isFunction(options.discover)) {\n                  this.discover = options.discover;\n                }\n              }\n            },\n            read: function (options) {\n              return this.transport.read(options);\n            },\n            update: function (options) {\n              return this.transport.update(options);\n            },\n            create: function (options) {\n              return this.transport.create(options);\n            },\n            destroy: function (options) {\n              return this.transport.destroy(options);\n            },\n            discover: function (options) {\n              if (this.transport.discover) {\n                return this.transport.discover(options);\n              }\n\n              options.success({});\n            },\n            catalog: function (val) {\n              var options = this.options || {};\n\n              if (val === undefined) {\n                return (options.connection || {}).catalog;\n              }\n\n              var connection = options.connection || {};\n              connection.catalog = val;\n              this.options.connection = connection;\n              $.extend(this.transport.options, {\n                connection: connection\n              });\n            },\n            cube: function (val) {\n              var options = this.options || {};\n\n              if (val === undefined) {\n                return (options.connection || {}).cube;\n              }\n\n              var connection = options.connection || {};\n              connection.cube = val;\n              this.options.connection = connection;\n              extend(true, this.transport.options, {\n                connection: connection\n              });\n            }\n          });\n          var PivotDataSourceV2 = DataSource.extend({\n            init: function (options) {\n              var cube = ((options || {}).schema || {}).cube;\n              var schema = {\n                axes: identity,\n                cubes: identity,\n                catalogs: identity,\n                measures: identity,\n                dimensions: identity,\n                hierarchies: identity,\n                levels: identity,\n                members: identity\n              };\n\n              if (cube) {\n                this.cubeSchema = $.extend(schema, this._cubeSchema(cube));\n              }\n\n              DataSource.fn.init.call(this, extend(true, {}, {//schema: schema\n              }, options));\n              var transportOptions = this.options.transport || {};\n\n              if ((this.options.type || \"xmla\").toLowerCase() === \"xmla\") {\n                this._online = true;\n                this.transport = new XmlaTransportV2(transportOptions);\n              }\n\n              this._columns = normalizeMembers(this.options.columns);\n              this._rows = normalizeMembers(this.options.rows);\n              var measures = this.cubeSchema ? this.cubeSchema.measures() : this.options.measures || [];\n\n              if (toString.call(measures) === \"[object Object]\") {\n                this._measuresAxis = measures.axis || \"columns\";\n                measures = measures.values || [];\n              }\n\n              this._measures = normalizeMeasures(measures);\n            },\n            options: {\n              serverSorting: true,\n              serverPaging: true,\n              serverFiltering: true,\n              serverGrouping: true,\n              serverAggregates: true\n            },\n            axes: function () {\n              return {\n                columns: normalizeAxis(this.columns()),\n                rows: normalizeAxis(this.rows())\n              };\n            },\n            catalog: function (val) {\n              if (val === undefined) {\n                return this.transport.catalog();\n              }\n\n              this.transport.catalog(val);\n\n              this._mergeState({}); // clears current state\n\n\n              this.read();\n            },\n            cube: function (val) {\n              if (val === undefined) {\n                return this.transport.cube();\n              }\n\n              this.transport.cube(val);\n\n              this._mergeState({}); // clears current state\n\n\n              this.read();\n            },\n            measuresAxis: function () {\n              return this._measuresAxis || \"columns\";\n            },\n            fetch: function (callback) {\n              var that = this;\n\n              if (this._data === undefined || this._data.length === 0) {\n                var fn = function () {\n                  if (isFunction(callback)) {\n                    callback.call(that);\n                  }\n                };\n\n                return this._query().done(fn);\n              }\n            },\n            _createSettings: function (axes) {\n              var settings = [];\n              var key;\n              var dimensions = this.cubeSchema.dimensionsSettings();\n\n              var displayValueFunc = function (item) {\n                return item[this.key];\n              };\n\n              var sortValueFunc = function (value) {\n                return value;\n              };\n\n              for (var i = 0; i < axes.length; i++) {\n                key = axes[i].name[0];\n                settings.push({\n                  key: key,\n                  displayValue: displayValueFunc.bind({\n                    key: key\n                  }),\n                  sortValue: sortValueFunc,\n                  caption: (dimensions[key] || {}).caption || key\n                });\n              }\n\n              return settings;\n            },\n            _cubeSchema: function (cube) {\n              return {\n                dimensionsSettings: function () {\n                  return cube.dimensions;\n                },\n                dimensions: function () {\n                  var result = [];\n                  var dimensions = cube.dimensions;\n\n                  for (var key in dimensions) {\n                    result.push({\n                      name: key,\n                      caption: dimensions[key].caption || key,\n                      uniqueName: key,\n                      defaultHierarchy: key,\n                      type: 1\n                    });\n                  }\n\n                  if (cube.measures) {\n                    result.push({\n                      name: MEASURES,\n                      caption: MEASURES,\n                      uniqueName: MEASURES,\n                      type: 2\n                    });\n                  }\n\n                  return result;\n                },\n                restoreMeasure: function (measures, measure) {\n                  for (var i = 0; i < measures.length; i++) {\n                    if (!measures[i].aggregate) {\n                      measures[i].aggregate = measure.aggregate;\n                      measures[i].value = measure.value;\n                      measures[i].caption = measure.caption;\n                      measures[i].uniqueName = measure.uniqueName;\n                      measures[i].type = 2;\n                    }\n                  }\n                },\n                measures: function () {\n                  var result = [];\n                  var measures = cube.measures;\n\n                  for (var key in measures) {\n                    result.push(createLocalMeasure(measures[key].field, key, measures[key].format));\n                  }\n\n                  return result;\n                },\n                memberType: function (name) {\n                  var getter = kendo.getter(normalizeName(name), true);\n                  var data = this.options.data || this._pristineData || [];\n\n                  if (!data.length) {\n                    return null;\n                  }\n\n                  return typeof getter(data[0]);\n                }.bind(this),\n                members: function (name) {\n                  var data = this.options.data || this._pristineData || [];\n                  var result = [];\n                  var distinct = {};\n                  var getter;\n                  var value;\n                  var idx = 0;\n\n                  if (name.indexOf(\"[(ALL)]\") !== -1) {\n                    return [{\n                      caption: cube.dimensions[name.split(\".\")[0]].caption || name,\n                      levelUniqueName: name,\n                      name: name,\n                      childrenCardinality: 1,\n                      uniqueName: name\n                    }];\n                  }\n\n                  getter = kendo.getter(normalizeName(name), true);\n\n                  for (; idx < data.length; idx++) {\n                    value = getter(data[idx]);\n\n                    if ((value || value === 0 || value === false) && !distinct[value]) {\n                      distinct[value] = true;\n                      result.push({\n                        caption: value + \"\",\n                        name: value + \"\",\n                        childrenCardinality: 0,\n                        uniqueName: value\n                      });\n                    }\n                  }\n\n                  return result;\n                }.bind(this)\n              };\n            },\n            read: function (data) {\n              var that = this;\n              var isPrevented = that.trigger(REQUESTSTART, {\n                type: READ\n              });\n\n              var params = that._params(data);\n\n              var deferred = $.Deferred();\n\n              if (!isPrevented) {\n                that.trigger(PROGRESS);\n\n                if (that.options.data) {\n                  var originalData = (this.reader.data(this.options.data) || []).slice(0);\n\n                  if (originalData && !this._pristineData) {\n                    this._pristineData = originalData;\n                  }\n\n                  var columnSettings = that._createSettings(params.columnAxes);\n\n                  var rowSettings = that._createSettings(params.rowAxes);\n\n                  var measures = that.measures();\n                  var dataTree = createDataTree(that.options.data, rowSettings, columnSettings, measures, {\n                    dataField: \"aggregate\",\n                    columnsData: \"columns\"\n                  }, that.filter() || []);\n                  var stateArgs = {\n                    dataTree: dataTree,\n                    columnSettings: columnSettings,\n                    rowSettings: rowSettings,\n                    columnAxes: params.columnAxes,\n                    rowAxes: params.rowAxes,\n                    measures: measures.map(function (item) {\n                      return item;\n                    }).reverse(),\n                    fields: {\n                      dataField: \"aggregate\",\n                      columnsData: \"columns\"\n                    },\n                    sort: flattenSortDescriptors(params.sort || [])\n                  };\n\n                  that._saveState(createLocalDataState(stateArgs));\n\n                  that.trigger(CHANGE);\n                  deferred.resolve();\n                } else {\n                  that.transport.read({\n                    data: params,\n                    success: function (newDataState) {\n                      that._saveState(newDataState);\n\n                      that.trigger(REQUESTEND, {\n                        response: newDataState,\n                        type: READ\n                      });\n                      that.trigger(CHANGE);\n\n                      if (that._preventRefresh) {\n                        that._preventRefresh = false;\n                      }\n\n                      deferred.resolve();\n                    },\n                    error: function (err) {\n                      that.trigger(ERROR, {\n                        error: err\n                      });\n                    }\n                  });\n                }\n              }\n\n              return deferred.promise();\n            },\n            _params: function (data) {\n              var that = this;\n\n              var options = DataSource.fn._params.call(that, data);\n\n              options = extend({\n                columnAxes: JSON.parse(JSON.stringify(that._columns)),\n                rowAxes: JSON.parse(JSON.stringify(that._rows)),\n                measuresAxis: that.measuresAxis(),\n                measureAxes: that._measures\n              }, options);\n\n              if ((this.options.type || \"\").toLowerCase() === \"xmla\") {\n                options.connection = that.options.transport.connection;\n              }\n\n              if (options.filter) {\n                options.filter = normalizeFilter(options.filter);\n                options.filter = (options.filter || {}).filters;\n              }\n\n              if (options.sort) {\n                options.sort = normalizeSort(options.sort);\n              }\n\n              return options;\n            },\n            discover: function (options) {\n              var that = this,\n                  transport = that.transport;\n\n              if (transport.discover) {\n                return transport.discover(options);\n              }\n            },\n            schemaMeasures: function () {\n              var that = this;\n              return that.discover({\n                command: \"schemaMeasures\",\n                restrictions: {\n                  catalogName: that.transport.catalog(),\n                  cubeName: that.transport.cube()\n                }\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaKPIs: function () {\n              var that = this;\n              return that.discover({\n                command: \"schemaKPIs\",\n                restrictions: {\n                  catalogName: that.transport.catalog(),\n                  cubeName: that.transport.cube()\n                }\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaDimensions: function () {\n              var that = this;\n              return that.discover({\n                command: \"schemaDimensions\",\n                restrictions: {\n                  catalogName: that.transport.catalog(),\n                  cubeName: that.transport.cube()\n                }\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaHierarchies: function (dimensionName) {\n              var that = this;\n              return that.discover({\n                command: \"schemaHierarchies\",\n                restrictions: {\n                  catalogName: that.transport.catalog(),\n                  cubeName: that.transport.cube(),\n                  dimensionUniqueName: dimensionName\n                }\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaLevels: function (hierarchyName) {\n              var that = this;\n              return that.discover({\n                command: \"schemaLevels\",\n                restrictions: {\n                  catalogName: that.transport.catalog(),\n                  cubeName: that.transport.cube(),\n                  hierarchyUniqueName: hierarchyName\n                }\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaCubes: function () {\n              var that = this;\n              return that.discover({\n                command: \"schemaCubes\",\n                restrictions: {\n                  catalogName: that.transport.catalog()\n                }\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaCatalogs: function () {\n              var that = this;\n              return that.discover({\n                command: \"schemaCatalogs\"\n              }, function (response) {\n                return response;\n              });\n            },\n            schemaMembers: function (restrictions) {\n              var that = this;\n              return that.discover({\n                command: \"schemaMembers\",\n                restrictions: extend({\n                  catalogName: that.transport.catalog(),\n                  cubeName: that.transport.cube()\n                }, restrictions)\n              }, function (response) {\n                return response;\n              });\n            },\n            _saveState: function (state) {\n              var that = this;\n              that._columnTuples = state.columns;\n              that._rowTuples = state.rows;\n              that._view = that._data = state.data;\n            },\n            columns: function (val) {\n              if (val === undefined) {\n                return this._columns;\n              }\n\n              this._columns = normalizeMembers(val);\n              this.read();\n            },\n            rows: function (val) {\n              if (val === undefined) {\n                return this._rows;\n              }\n\n              this._rows = normalizeMembers(val);\n              this.read();\n            },\n            measures: function (val) {\n              if (val === undefined) {\n                return this._measures;\n              }\n\n              this._measures = normalizeMeasures(val);\n              this.read();\n            },\n            _mergeState: function (options) {\n              options = DataSource.fn._mergeState.call(this, options);\n              return options;\n            },\n            _query: function (options) {\n              var that = this;\n              var params = extend({}, {\n                sort: that.sort(),\n                measuresAxis: that.measuresAxis(),\n                filter: that.filter()\n              }, options);\n\n              this._mergeState(params);\n\n              return this.read();\n            }\n          });\n          var PivotDataSource = DataSource.extend({\n            init: function (options) {\n              var cube = ((options || {}).schema || {}).cube;\n              var measuresAxis = \"columns\";\n              var measures;\n              var schema = {\n                axes: identity,\n                cubes: identity,\n                catalogs: identity,\n                measures: identity,\n                dimensions: identity,\n                hierarchies: identity,\n                levels: identity,\n                members: identity\n              };\n\n              if (cube) {\n                schema = $.extend(schema, this._cubeSchema(cube));\n                this.cubeBuilder = new PivotCubeBuilder(cube);\n              }\n\n              DataSource.fn.init.call(this, extend(true, {}, {\n                schema: schema\n              }, options));\n              this.transport = new PivotTransport(this.options.transport || {}, this.transport);\n              this._columns = normalizeMembers(this.options.columns);\n              this._rows = normalizeMembers(this.options.rows);\n              measures = this.options.measures || [];\n\n              if (toString.call(measures) === \"[object Object]\") {\n                measuresAxis = measures.axis || \"columns\";\n                measures = measures.values || [];\n              }\n\n              this._measures = normalizeMeasures(measures);\n              this._measuresAxis = measuresAxis;\n              this._skipNormalize = 0;\n              this._axes = {};\n            },\n            _cubeSchema: function (cube) {\n              return {\n                dimensions: function () {\n                  var result = [];\n                  var dimensions = cube.dimensions;\n\n                  for (var key in dimensions) {\n                    result.push({\n                      name: key,\n                      caption: dimensions[key].caption || key,\n                      uniqueName: key,\n                      defaultHierarchy: key,\n                      type: 1\n                    });\n                  }\n\n                  if (cube.measures) {\n                    result.push({\n                      name: MEASURES,\n                      caption: MEASURES,\n                      uniqueName: MEASURES,\n                      type: 2\n                    });\n                  }\n\n                  return result;\n                },\n                hierarchies: function () {\n                  return [];\n                },\n                measures: function () {\n                  var result = [];\n                  var measures = cube.measures;\n\n                  for (var key in measures) {\n                    result.push({\n                      name: key,\n                      caption: key,\n                      uniqueName: key,\n                      aggregator: key\n                    });\n                  }\n\n                  return result;\n                },\n                members: function (response, restrictions) {\n                  var name = restrictions.levelUniqueName || restrictions.memberUniqueName;\n                  var schemaData = this.options.schema.data;\n                  var dataGetter = isFunction(schemaData) ? schemaData : kendo.getter(schemaData, true);\n                  var data = this.options.data && dataGetter(this.options.data) || this._rawData || [];\n                  var result = [];\n                  var getter;\n                  var value;\n                  var idx = 0;\n                  var distinct = {};\n\n                  if (name) {\n                    name = name.split(\".\")[0];\n                  }\n\n                  if (!restrictions.treeOp) {\n                    result.push({\n                      caption: cube.dimensions[name].caption || name,\n                      childrenCardinality: \"1\",\n                      dimensionUniqueName: name,\n                      hierarchyUniqueName: name,\n                      levelUniqueName: name,\n                      name: name,\n                      uniqueName: name\n                    });\n                    return result;\n                  }\n\n                  getter = kendo.getter(normalizeName(name), true);\n\n                  for (; idx < data.length; idx++) {\n                    value = getter(data[idx]);\n\n                    if ((value || value === 0) && !distinct[value]) {\n                      distinct[value] = true;\n                      result.push({\n                        caption: value,\n                        childrenCardinality: \"0\",\n                        dimensionUniqueName: name,\n                        hierarchyUniqueName: name,\n                        levelUniqueName: name,\n                        name: value,\n                        uniqueName: value\n                      });\n                    }\n                  }\n\n                  return result;\n                }.bind(this)\n              };\n            },\n            options: {\n              serverSorting: true,\n              serverPaging: true,\n              serverFiltering: true,\n              serverGrouping: true,\n              serverAggregates: true\n            },\n            catalog: function (val) {\n              if (val === undefined) {\n                return this.transport.catalog();\n              }\n\n              this.transport.catalog(val);\n\n              this._mergeState({}); // clears current state\n\n\n              this._axes = {};\n              this.data([]);\n            },\n            cube: function (val) {\n              if (val === undefined) {\n                return this.transport.cube();\n              }\n\n              this.transport.cube(val);\n              this._axes = {};\n\n              this._mergeState({}); // clears current state\n\n\n              this.data([]);\n            },\n            axes: function () {\n              return this._axes;\n            },\n            columns: function (val) {\n              if (val === undefined) {\n                return this._columns;\n              }\n\n              this._skipNormalize += 1;\n              this._clearAxesData = true;\n              this._columns = normalizeMembers(val);\n              this.query({\n                columns: val,\n                rows: this.rowsAxisDescriptors(),\n                measures: this.measures(),\n                sort: this.sort(),\n                filter: this.filter()\n              });\n            },\n            rows: function (val) {\n              if (val === undefined) {\n                return this._rows;\n              }\n\n              this._skipNormalize += 1;\n              this._clearAxesData = true;\n              this._rows = normalizeMembers(val);\n              this.query({\n                columns: this.columnsAxisDescriptors(),\n                rows: val,\n                measures: this.measures(),\n                sort: this.sort(),\n                filter: this.filter()\n              });\n            },\n            measures: function (val) {\n              if (val === undefined) {\n                return this._measures;\n              }\n\n              this._skipNormalize += 1;\n              this._clearAxesData = true;\n              this.query({\n                columns: this.columnsAxisDescriptors(),\n                rows: this.rowsAxisDescriptors(),\n                measures: normalizeMeasures(val),\n                sort: this.sort(),\n                filter: this.filter()\n              });\n            },\n            measuresAxis: function () {\n              return this._measuresAxis || \"columns\";\n            },\n            _expandPath: function (path, axis) {\n              var origin = axis === \"columns\" ? \"columns\" : \"rows\";\n              var other = axis === \"columns\" ? \"rows\" : \"columns\";\n              var members = normalizeMembers(path);\n              var memberToExpand = getName(members[members.length - 1]);\n              this._lastExpanded = origin;\n              members = descriptorsForMembers(this.axes()[origin], members, this.measures());\n\n              for (var idx = 0; idx < members.length; idx++) {\n                var memberName = getName(members[idx]);\n\n                if (memberName === memberToExpand) {\n                  if (members[idx].expand) {\n                    return;\n                  }\n\n                  members[idx].expand = true;\n                } else {\n                  members[idx].expand = false;\n                }\n              }\n\n              var descriptors = {};\n              descriptors[origin] = members;\n              descriptors[other] = this._descriptorsForAxis(other);\n\n              this._query(descriptors);\n            },\n            _descriptorsForAxis: function (axis) {\n              var axes = this.axes();\n              var descriptors = this[axis]() || [];\n\n              if (axes && axes[axis] && axes[axis].tuples && axes[axis].tuples[0]) {\n                descriptors = descriptorsForAxes(axes[axis].tuples || []);\n              }\n\n              return descriptors;\n            },\n            columnsAxisDescriptors: function () {\n              return this._descriptorsForAxis(\"columns\");\n            },\n            rowsAxisDescriptors: function () {\n              return this._descriptorsForAxis(\"rows\");\n            },\n            _process: function (data, e) {\n              this._view = data;\n              e = e || {};\n              e.items = e.items || this._view;\n              this.trigger(CHANGE, e);\n            },\n            _query: function (options) {\n              var that = this;\n\n              if (!options) {\n                this._skipNormalize += 1;\n                this._clearAxesData = true;\n              }\n\n              return that.query(extend({}, {\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that.sort(),\n                filter: that.filter(),\n                group: that.group(),\n                aggregate: that.aggregate(),\n                columns: this.columnsAxisDescriptors(),\n                rows: this.rowsAxisDescriptors(),\n                measures: this.measures()\n              }, options));\n            },\n            query: function (options) {\n              var state = this._mergeState(options);\n\n              if (this._data.length && this.cubeBuilder) {\n                this._params(state);\n\n                this._updateLocalData(this._pristineData);\n\n                return $.Deferred().resolve().promise();\n              }\n\n              return this.read(state);\n            },\n            _mergeState: function (options) {\n              options = DataSource.fn._mergeState.call(this, options);\n\n              if (options !== undefined) {\n                this._measures = normalizeMeasures(options.measures);\n\n                if (options.columns) {\n                  options.columns = normalizeMembers(options.columns);\n                } else if (!options.columns) {\n                  this._columns = [];\n                }\n\n                if (options.rows) {\n                  options.rows = normalizeMembers(options.rows);\n                } else if (!options.rows) {\n                  this._rows = [];\n                }\n              }\n\n              return options;\n            },\n            filter: function (val) {\n              if (val === undefined) {\n                return this._filter;\n              }\n\n              this._skipNormalize += 1;\n              this._clearAxesData = true;\n\n              this._query({\n                filter: val,\n                page: 1\n              });\n            },\n            expandColumn: function (path) {\n              this._expandPath(path, \"columns\");\n            },\n            expandRow: function (path) {\n              this._expandPath(path, \"rows\");\n            },\n            success: function (data) {\n              var originalData;\n\n              if (this.cubeBuilder) {\n                originalData = (this.reader.data(data) || []).slice(0);\n              }\n\n              DataSource.fn.success.call(this, data);\n\n              if (originalData) {\n                this._pristineData = originalData;\n              }\n            },\n            _processResult: function (data, axes) {\n              if (this.cubeBuilder) {\n                var processedData = this.cubeBuilder.process(data, this._requestData);\n                data = processedData.data;\n                axes = processedData.axes;\n              }\n\n              var columnIndexes, rowIndexes;\n              var tuples, resultAxis, measures, axisToSkip;\n              var columnDescriptors = this.columns();\n              var rowDescriptors = this.rows();\n              var hasColumnTuples = axes.columns && axes.columns.tuples;\n\n              if (!columnDescriptors.length && rowDescriptors.length && hasColumnTuples && (this._rowMeasures().length || !this.measures().length)) {\n                axes = {\n                  columns: {},\n                  rows: axes.columns\n                };\n              }\n\n              if (!columnDescriptors.length && !rowDescriptors.length && this.measuresAxis() === \"rows\" && hasColumnTuples) {\n                axes = {\n                  columns: {},\n                  rows: axes.columns\n                };\n              }\n\n              this._axes = {\n                columns: normalizeAxis(this._axes.columns),\n                rows: normalizeAxis(this._axes.rows)\n              };\n              axes = {\n                columns: normalizeAxis(axes.columns),\n                rows: normalizeAxis(axes.rows)\n              };\n              columnIndexes = this._normalizeTuples(axes.columns.tuples, this._axes.columns.tuples, columnDescriptors, this._columnMeasures());\n              rowIndexes = this._normalizeTuples(axes.rows.tuples, this._axes.rows.tuples, rowDescriptors, this._rowMeasures());\n\n              if (this._skipNormalize > 0) {\n                this._skipNormalize -= 1;\n              }\n\n              if (!this.cubeBuilder) {\n                data = this._normalizeData({\n                  columnsLength: axes.columns.tuples.length,\n                  rowsLength: axes.rows.tuples.length,\n                  columnIndexes: columnIndexes,\n                  rowIndexes: rowIndexes,\n                  data: data\n                });\n              }\n\n              if (this._lastExpanded == \"rows\") {\n                tuples = axes.columns.tuples;\n                measures = this._columnMeasures();\n                resultAxis = validateAxis(axes.columns, this._axes.columns, measures);\n\n                if (resultAxis) {\n                  axisToSkip = \"columns\";\n                  axes.columns = resultAxis;\n                  adjustDataByColumn(tuples, resultAxis.tuples, axes.rows.tuples.length, measures, data);\n\n                  if (!this.cubeBuilder) {\n                    data = this._normalizeData({\n                      columnsLength: membersCount(axes.columns.tuples, measures),\n                      rowsLength: axes.rows.tuples.length,\n                      data: data\n                    });\n                  }\n                }\n              } else if (this._lastExpanded == \"columns\") {\n                tuples = axes.rows.tuples;\n                measures = this._rowMeasures();\n                resultAxis = validateAxis(axes.rows, this._axes.rows, measures);\n\n                if (resultAxis) {\n                  axisToSkip = \"rows\";\n                  axes.rows = resultAxis;\n                  adjustDataByRow(tuples, resultAxis.tuples, axes.columns.tuples.length, measures, data);\n\n                  if (!this.cubeBuilder) {\n                    data = this._normalizeData({\n                      columnsLength: membersCount(axes.rows.tuples, measures),\n                      rowsLength: axes.columns.tuples.length,\n                      data: data\n                    });\n                  }\n                }\n              }\n\n              this._lastExpanded = null;\n\n              var result = this._mergeAxes(axes, data, axisToSkip);\n\n              this._axes = result.axes;\n              return result.data;\n            },\n            _readData: function (data) {\n              var axes = this.reader.axes(data);\n              var newData = this.reader.data(data);\n\n              if (this.cubeBuilder) {\n                this._rawData = newData;\n              }\n\n              return this._processResult(newData, axes);\n            },\n            _createTuple: function (tuple, measure, buildRoot) {\n              var members = tuple.members;\n              var length = members.length;\n              var root = {\n                members: []\n              };\n              var levelName, levelNum;\n              var name, parentName;\n              var hasChildren;\n              var hierarchy;\n              var caption;\n              var member;\n              var idx = 0;\n\n              if (measure) {\n                length -= 1;\n              }\n\n              for (; idx < length; idx++) {\n                member = members[idx];\n                levelNum = Number(member.levelNum);\n                name = member.name;\n                parentName = member.parentName;\n                caption = member.caption || name;\n                hasChildren = member.hasChildren;\n                hierarchy = member.hierarchy;\n                levelName = member.levelName;\n\n                if (buildRoot) {\n                  caption = \"All\";\n\n                  if (levelNum === 0) {\n                    parentName = member.name;\n                  } else {\n                    levelNum -= 1;\n                  }\n\n                  hasChildren = true;\n                  name = hierarchy = levelName = parentName;\n                }\n\n                root.members.push({\n                  name: name,\n                  children: [],\n                  caption: caption,\n                  levelName: levelName,\n                  levelNum: levelNum.toString(),\n                  hasChildren: hasChildren,\n                  hierarchy: hierarchy,\n                  parentName: !buildRoot ? parentName : \"\"\n                });\n              }\n\n              if (measure) {\n                root.members.push({\n                  name: measure.name,\n                  children: []\n                });\n              }\n\n              return root;\n            },\n            _hasRoot: function (target, source, descriptors) {\n              if (source.length) {\n                return findExistingTuple(source, target).tuple;\n              }\n\n              var members = target.members;\n              var member;\n              var descriptor;\n              var isRoot = true;\n              var levelNum;\n\n              for (var idx = 0, length = members.length; idx < length; idx++) {\n                member = members[idx];\n                levelNum = Number(member.levelNum) || 0;\n                descriptor = descriptors[idx];\n\n                if (!(levelNum === 0 || descriptor && member.name === getName(descriptor))) {\n                  isRoot = false;\n                  break;\n                }\n              }\n\n              return isRoot;\n            },\n            _mergeAxes: function (sourceAxes, data, axisToSkip) {\n              var columnMeasures = this._columnMeasures();\n\n              var rowMeasures = this._rowMeasures();\n\n              var axes = this.axes();\n              var startIndex, tuples;\n              var oldRowsLength = membersCount(axes.rows.tuples, rowMeasures);\n              var newRowsLength = sourceAxes.rows.tuples.length;\n              var oldColumnsLength = membersCount(axes.columns.tuples, columnMeasures);\n              var newColumnsLength = sourceAxes.columns.tuples.length;\n\n              if (axisToSkip == \"columns\") {\n                newColumnsLength = oldColumnsLength;\n                tuples = sourceAxes.columns.tuples;\n              } else {\n                tuples = parseSource(sourceAxes.columns.tuples, columnMeasures);\n                data = prepareDataOnColumns(tuples, data);\n              }\n\n              var mergedColumns = mergeTuples(axes.columns.tuples, tuples, columnMeasures);\n\n              if (axisToSkip == \"rows\") {\n                newRowsLength = membersCount(sourceAxes.rows.tuples, rowMeasures);\n                tuples = sourceAxes.rows.tuples;\n              } else {\n                tuples = parseSource(sourceAxes.rows.tuples, rowMeasures);\n                data = prepareDataOnRows(tuples, data);\n              }\n\n              var mergedRows = mergeTuples(axes.rows.tuples, tuples, rowMeasures);\n              axes.columns.tuples = mergedColumns.tuples;\n              axes.rows.tuples = mergedRows.tuples;\n\n              if (oldColumnsLength !== membersCount(axes.columns.tuples, columnMeasures)) {\n                //columns are expanded\n                startIndex = mergedColumns.index + findDataIndex(mergedColumns.parsedRoot, mergedColumns.memberIndex, columnMeasures);\n                var offset = oldColumnsLength + newColumnsLength;\n                data = this._mergeColumnData(data, startIndex, newRowsLength, newColumnsLength, offset);\n              } else if (oldRowsLength !== membersCount(axes.rows.tuples, rowMeasures)) {\n                //rows are expanded\n                startIndex = mergedRows.index + findDataIndex(mergedRows.parsedRoot, mergedRows.memberIndex, rowMeasures);\n                data = this._mergeRowData(data, startIndex, newRowsLength, newColumnsLength);\n              }\n\n              if (axes.columns.tuples.length === 0 && axes.rows.tuples.length === 0) {\n                data = [];\n              }\n\n              return {\n                axes: axes,\n                data: data\n              };\n            },\n            _mergeColumnData: function (newData, columnIndex, rowsLength, columnsLength, offset) {\n              var data = this.data().toJSON();\n              var rowIndex,\n                  index,\n                  drop = 0,\n                  toAdd;\n              var columnMeasures = Math.max(this._columnMeasures().length, 1);\n              rowsLength = Math.max(rowsLength, 1);\n\n              if (data.length > 0) {\n                //if there is already data, drop the first new data item\n                drop = columnMeasures;\n                offset -= columnMeasures;\n              }\n\n              for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n                index = columnIndex + rowIndex * offset;\n                toAdd = newData.splice(0, columnsLength);\n                toAdd.splice(0, drop);\n                [].splice.apply(data, [index, 0].concat(toAdd));\n              }\n\n              return data;\n            },\n            _mergeRowData: function (newData, rowIndex, rowsLength, columnsLength) {\n              var data = this.data().toJSON();\n              var idx, dataIndex, toAdd;\n              var rowMeasures = Math.max(this._rowMeasures().length, 1);\n              columnsLength = Math.max(columnsLength, 1);\n\n              if (data.length > 0) {\n                //if there is already data, drop the first new data item\n                rowsLength -= rowMeasures;\n                newData.splice(0, columnsLength * rowMeasures);\n              }\n\n              for (idx = 0; idx < rowsLength; idx++) {\n                toAdd = newData.splice(0, columnsLength);\n                dataIndex = rowIndex * columnsLength + idx * columnsLength;\n                [].splice.apply(data, [dataIndex, 0].concat(toAdd));\n              }\n\n              return data;\n            },\n            _columnMeasures: function () {\n              var measures = this.measures();\n              var columnMeasures = [];\n\n              if (this.measuresAxis() === \"columns\") {\n                if (this.columns().length === 0) {\n                  columnMeasures = measures;\n                } else if (measures.length > 1) {\n                  columnMeasures = measures;\n                }\n              }\n\n              return columnMeasures;\n            },\n            _rowMeasures: function () {\n              var measures = this.measures();\n              var rowMeasures = [];\n\n              if (this.measuresAxis() === \"rows\") {\n                if (this.rows().length === 0) {\n                  rowMeasures = measures;\n                } else if (measures.length > 1) {\n                  rowMeasures = measures;\n                }\n              }\n\n              return rowMeasures;\n            },\n            _updateLocalData: function (data, state) {\n              if (this.cubeBuilder) {\n                if (state) {\n                  this._requestData = state;\n                }\n\n                data = this._processResult(data);\n              }\n\n              this._data = this._observe(data);\n              this._ranges = [];\n\n              this._addRange(this._data);\n\n              this._total = this._data.length;\n              this._pristineTotal = this._total;\n\n              this._process(this._data);\n            },\n            data: function (value) {\n              var that = this;\n\n              if (value !== undefined) {\n                this._pristineData = value.slice(0);\n\n                this._updateLocalData(value, {\n                  columns: this.columns(),\n                  rows: this.rows(),\n                  measures: this.measures()\n                });\n              } else {\n                return that._data;\n              }\n            },\n            _normalizeTuples: function (tuples, source, descriptors, measures) {\n              var length = measures.length || 1;\n              var idx = 0;\n              var roots = [];\n              var indexes = {};\n              var measureIdx = 0;\n              var tuple, memberIdx, last;\n\n              if (!tuples.length) {\n                return;\n              }\n\n              if (this._skipNormalize <= 0 && !this._hasRoot(tuples[0], source, descriptors)) {\n                this._skipNormalize = 0;\n\n                for (; idx < length; idx++) {\n                  roots.push(this._createTuple(tuples[0], measures[idx], true));\n                  indexes[idx] = idx;\n                }\n\n                tuples.splice.apply(tuples, [0, tuples.length].concat(roots).concat(tuples));\n                idx = length;\n              }\n\n              if (measures.length) {\n                last = tuple = tuples[idx];\n                memberIdx = tuple.members.length - 1;\n\n                while (tuple) {\n                  if (measureIdx >= length) {\n                    measureIdx = 0;\n                  }\n\n                  if (tuple.members[memberIdx].name !== measures[measureIdx].name) {\n                    tuples.splice(idx, 0, this._createTuple(tuple, measures[measureIdx]));\n                    indexes[idx] = idx;\n                  }\n\n                  idx += 1;\n                  measureIdx += 1;\n                  tuple = tuples[idx];\n\n                  if (length > measureIdx && (!tuple || tupleName(last, memberIdx - 1) !== tupleName(tuple, memberIdx - 1))) {\n                    for (; measureIdx < length; measureIdx++) {\n                      tuples.splice(idx, 0, this._createTuple(last, measures[measureIdx]));\n                      indexes[idx] = idx;\n                      idx += 1;\n                    }\n\n                    tuple = tuples[idx];\n                  }\n\n                  last = tuple;\n                }\n              }\n\n              return indexes;\n            },\n            _addMissingDataItems: function (result, metadata) {\n              while (metadata.rowIndexes[parseInt(result.length / metadata.columnsLength, 10)] !== undefined) {\n                for (var idx = 0; idx < metadata.columnsLength; idx++) {\n                  result = addEmptyDataItem(result);\n                }\n              }\n\n              while (metadata.columnIndexes[result.length % metadata.columnsLength] !== undefined) {\n                result = addEmptyDataItem(result);\n              }\n\n              return result;\n            },\n            _normalizeOrdinals: function (result, dataItem, metadata) {\n              var lastOrdinal = metadata.lastOrdinal;\n\n              if (!dataItem) {\n                return addEmptyDataItem(result);\n              }\n\n              if (dataItem.ordinal - lastOrdinal > 1) {\n                lastOrdinal += 1;\n\n                while (lastOrdinal < dataItem.ordinal && result.length < metadata.length) {\n                  result = this._addMissingDataItems(addEmptyDataItem(result), metadata);\n                  lastOrdinal += 1;\n                }\n              }\n\n              dataItem.ordinal = result.length;\n              result[result.length] = dataItem;\n              return result;\n            },\n            _normalizeData: function (options) {\n              var data = options.data;\n              var dataIdx = 0;\n              var dataItem;\n              var result = [];\n              var lastOrdinal;\n              var length;\n              options.lastOrdinal = 0;\n              options.columnIndexes = options.columnIndexes || {};\n              options.rowIndexes = options.rowIndexes || {};\n              options.columnsLength = options.columnsLength || 1;\n              options.rowsLength = options.rowsLength || 1;\n              options.length = options.columnsLength * options.rowsLength;\n              length = options.length;\n\n              if (data.length === length) {\n                return data;\n              }\n\n              while (result.length < length) {\n                dataItem = data[dataIdx++];\n\n                if (dataItem) {\n                  lastOrdinal = dataItem.ordinal;\n                }\n\n                result = this._normalizeOrdinals(this._addMissingDataItems(result, options), dataItem, options);\n                options.lastOrdinal = lastOrdinal;\n              }\n\n              return result;\n            },\n            discover: function (options, converter) {\n              var that = this,\n                  transport = that.transport;\n              return $.Deferred(function (deferred) {\n                transport.discover(extend({\n                  success: function (response) {\n                    response = that.reader.parse(response);\n\n                    if (that._handleCustomErrors(response)) {\n                      return;\n                    }\n\n                    if (converter) {\n                      response = converter(response);\n                    }\n\n                    deferred.resolve(response);\n                  },\n                  error: function (response, status, error) {\n                    deferred.reject(response);\n                    that.error(response, status, error);\n                  }\n                }, options));\n              }).promise().done(function () {\n                that.trigger(\"schemaChange\");\n              });\n            },\n            schemaMeasures: function () {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaMeasures\",\n                  restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube()\n                  }\n                }\n              }, function (response) {\n                return that.reader.measures(response);\n              });\n            },\n            schemaKPIs: function () {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaKPIs\",\n                  restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube()\n                  }\n                }\n              }, function (response) {\n                return that.reader.kpis(response);\n              });\n            },\n            schemaDimensions: function () {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaDimensions\",\n                  restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube()\n                  }\n                }\n              }, function (response) {\n                return that.reader.dimensions(response);\n              });\n            },\n            schemaHierarchies: function (dimensionName) {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaHierarchies\",\n                  restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube(),\n                    dimensionUniqueName: dimensionName\n                  }\n                }\n              }, function (response) {\n                return that.reader.hierarchies(response);\n              });\n            },\n            schemaLevels: function (hierarchyName) {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaLevels\",\n                  restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube(),\n                    hierarchyUniqueName: hierarchyName\n                  }\n                }\n              }, function (response) {\n                return that.reader.levels(response);\n              });\n            },\n            schemaCubes: function () {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaCubes\",\n                  restrictions: {\n                    catalogName: that.transport.catalog()\n                  }\n                }\n              }, function (response) {\n                return that.reader.cubes(response);\n              });\n            },\n            schemaCatalogs: function () {\n              var that = this;\n              return that.discover({\n                data: {\n                  command: \"schemaCatalogs\"\n                }\n              }, function (response) {\n                return that.reader.catalogs(response);\n              });\n            },\n            schemaMembers: function (restrictions) {\n              var that = this;\n\n              var success = function (restrictions) {\n                return function (response) {\n                  return that.reader.members(response, restrictions);\n                };\n              }(restrictions);\n\n              return that.discover({\n                data: {\n                  command: \"schemaMembers\",\n                  restrictions: extend({\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube()\n                  }, restrictions)\n                }\n              }, success);\n            },\n            _params: function (data) {\n              if (this._clearAxesData) {\n                this._axes = {};\n                this._data = this._observe([]);\n                this._clearAxesData = false;\n                this.trigger(STATERESET);\n              }\n\n              var options = DataSource.fn._params.call(this, data);\n\n              options = extend({\n                measures: this.measures(),\n                measuresAxis: this.measuresAxis(),\n                columns: this.columns(),\n                rows: this.rows()\n              }, options);\n\n              if (this.cubeBuilder) {\n                this._requestData = options;\n              }\n\n              return options;\n            }\n          });\n\n          function flatColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              result.push(columns[idx]);\n\n              if (columns[idx].children) {\n                result = result.concat(flatColumns(columns[idx].children));\n              }\n            }\n\n            return result;\n          }\n\n          function sortItemsTree(field, items, sortFunction) {\n            for (var i = 0; i < items.length; i++) {\n              if (items[i].children && items[i].children.length) {\n                sortItemsTree(field, items[i].children, sortFunction);\n              }\n            }\n\n            if (items[0].parentName != field) {\n              return;\n            }\n\n            items = items.sort(sortFunction);\n          }\n\n          function fillSortTree(items, map) {\n            for (var i = 0; i < items.length; i++) {\n              var currentItem = map[items[i].name];\n\n              if (!$.isEmptyObject(currentItem.childrenMap)) {\n                items[i].children = [];\n\n                for (var name in currentItem.childrenMap) {\n                  items[i].children.push($.extend({}, {\n                    name: name,\n                    parentName: map[name].parentName\n                  }));\n                }\n\n                fillSortTree(items[i].children, map);\n              }\n            }\n          }\n\n          function addEmptyDataItem(result) {\n            result[result.length] = {\n              value: \"\",\n              fmtValue: \"\",\n              ordinal: result.length\n            };\n            return result;\n          }\n\n          function validateAxis(newAxis, axis, measures) {\n            if (newAxis.tuples.length < membersCount(axis.tuples, measures)) {\n              return axis;\n            }\n\n            return;\n          }\n\n          function adjustDataByColumn(sourceTuples, targetTuples, rowsLength, measures, data) {\n            var columnIdx, rowIdx, dataIdx;\n            var columnsLength = sourceTuples.length;\n            var targetColumnsLength = membersCount(targetTuples, measures);\n            var measuresLength = measures.length || 1;\n\n            for (rowIdx = 0; rowIdx < rowsLength; rowIdx++) {\n              for (columnIdx = 0; columnIdx < columnsLength; columnIdx++) {\n                dataIdx = tupleIndex(sourceTuples[columnIdx], targetTuples) * measuresLength;\n                dataIdx += columnIdx % measuresLength;\n                data[rowIdx * columnsLength + columnIdx].ordinal = rowIdx * targetColumnsLength + dataIdx;\n              }\n            }\n          }\n\n          function adjustDataByRow(sourceTuples, targetTuples, columnsLength, measures, data) {\n            var columnIdx, rowIdx, dataIdx;\n            var rowsLength = sourceTuples.length;\n            var measuresLength = measures.length || 1;\n\n            for (rowIdx = 0; rowIdx < rowsLength; rowIdx++) {\n              dataIdx = tupleIndex(sourceTuples[rowIdx], targetTuples);\n              dataIdx *= measuresLength;\n              dataIdx += rowIdx % measuresLength;\n\n              for (columnIdx = 0; columnIdx < columnsLength; columnIdx++) {\n                data[rowIdx * columnsLength + columnIdx].ordinal = dataIdx * columnsLength + columnIdx;\n              }\n            }\n          }\n\n          function tupleIndex(tuple, collection) {\n            return findExistingTuple(collection, tuple).index;\n          }\n\n          function membersCount(tuples, measures) {\n            if (!tuples.length) {\n              return 0;\n            }\n\n            var queue = tuples.slice();\n            var current = queue.shift();\n            var result = 1;\n\n            while (current) {\n              if (current.members) {\n                [].push.apply(queue, current.members);\n              } else if (current.children) {\n                if (!current.measure) {\n                  result += current.children.length;\n                }\n\n                [].push.apply(queue, current.children);\n              }\n\n              current = queue.shift();\n            }\n\n            if (measures.length) {\n              result = result * measures.length;\n            }\n\n            return result;\n          }\n\n          function normalizeAxis(axis) {\n            if (!axis) {\n              axis = {\n                tuples: []\n              };\n            }\n\n            if (!axis.tuples) {\n              axis.tuples = [];\n            }\n\n            return axis;\n          }\n\n          function findDataIndex(tuple, memberIndex, measures) {\n            if (!tuple) {\n              return 0;\n            }\n\n            var measuresLength = Math.max(measures.length, 1);\n            var tuples = tuple.members.slice(0, memberIndex);\n            var current = tuples.shift(); //the initial value is equal to the total number of measures\n            //as the measures member is not extracted from the members of the starting tuple\n            //but should be calculated in the final result\n\n            var counter = measuresLength;\n\n            while (current) {\n              if (current.name === MEASURES) {\n                //subtract 1 as the measures member has been already counted as a single standard member\n                //but we are interested in the total number of measures instead\n                counter += measuresLength - 1;\n              } else if (current.children) {\n                //is member\n                [].push.apply(tuples, current.children);\n              } else {\n                //is tuple\n                counter++;\n                [].push.apply(tuples, current.members);\n              }\n\n              current = tuples.shift();\n            }\n\n            return counter;\n          }\n\n          function mergeTuples(target, source, measures) {\n            if (!source[0]) {\n              return {\n                parsedRoot: null,\n                tuples: target,\n                memberIndex: 0,\n                index: 0\n              };\n            }\n\n            var result = findExistingTuple(target, source[0]);\n\n            if (!result.tuple) {\n              return {\n                parsedRoot: null,\n                tuples: source,\n                memberIndex: 0,\n                index: 0\n              };\n            }\n\n            var targetMembers = result.tuple.members;\n            var sourceMembers = source[0].members;\n            var memberIndex = -1;\n\n            if (targetMembers.length !== sourceMembers.length) {\n              return {\n                parsedRoot: null,\n                tuples: source,\n                memberIndex: 0,\n                index: 0\n              };\n            }\n\n            for (var idx = 0, length = targetMembers.length; idx < length; idx++) {\n              if (!targetMembers[idx].measure && sourceMembers[idx].children[0]) {\n                if (memberIndex == -1 && sourceMembers[idx].children.length) {\n                  memberIndex = idx;\n                }\n\n                targetMembers[idx].children = sourceMembers[idx].children;\n              }\n            }\n\n            measures = Math.max(measures.length, 1);\n            return {\n              parsedRoot: result.tuple,\n              index: result.index * measures,\n              memberIndex: memberIndex,\n              tuples: target\n            };\n          }\n\n          function equalTuples(first, second) {\n            var equal = true;\n            var idx, length;\n            first = first.members;\n            second = second.members;\n\n            for (idx = 0, length = first.length; idx < length; idx++) {\n              if (first[idx].measure || second[idx].measure) {\n                continue;\n              }\n\n              equal = equal && getName(first[idx]) === getName(second[idx]);\n            }\n\n            return equal;\n          }\n\n          function findExistingTuple(tuples, toFind) {\n            var idx,\n                length,\n                tuple,\n                found,\n                counter = 0;\n            var memberIndex, membersLength, member;\n\n            for (idx = 0, length = tuples.length; idx < length; idx++) {\n              tuple = tuples[idx];\n\n              if (equalTuples(tuple, toFind)) {\n                return {\n                  tuple: tuple,\n                  index: counter\n                };\n              }\n\n              counter++;\n\n              for (memberIndex = 0, membersLength = tuple.members.length; memberIndex < membersLength; memberIndex++) {\n                member = tuple.members[memberIndex];\n\n                if (member.measure) {\n                  //counter += member.children.length;\n                  continue;\n                }\n\n                found = findExistingTuple(member.children, toFind);\n                counter += found.index;\n\n                if (found.tuple) {\n                  return {\n                    tuple: found.tuple,\n                    index: counter\n                  };\n                }\n              }\n            }\n\n            return {\n              index: counter\n            };\n          }\n\n          function addMembers(members, map) {\n            var member,\n                i,\n                len,\n                path = \"\";\n\n            for (i = 0, len = members.length; i < len; i++) {\n              member = members[i];\n              path += member.name;\n\n              if (!map[path]) {\n                map[path] = member;\n              }\n            }\n          }\n\n          function findParentMember(tuple, map) {\n            var members = tuple.members;\n            var i,\n                len,\n                member,\n                path = \"\";\n            var parentPath = \"\";\n            var parentMember;\n\n            for (i = 0, len = members.length; i < len; i++) {\n              member = members[i];\n\n              if (parentMember) {\n                if (map[path + member.name]) {\n                  path += member.name;\n                  parentMember = map[path];\n                  continue;\n                } else if (map[path + member.parentName]) {\n                  return map[path + member.parentName];\n                } else if (map[parentPath + member.parentName]) {\n                  return map[parentPath + member.parentName];\n                } else {\n                  return map[parentPath];\n                }\n              }\n\n              path += member.name;\n              parentMember = map[member.parentName];\n\n              if (!parentMember) {\n                parentMember = map[path];\n\n                if (!parentMember) {\n                  return null;\n                }\n              }\n\n              if (parentMember) {\n                parentPath += parentMember.name;\n              }\n            }\n\n            return parentMember;\n          }\n\n          function measurePosition(tuple, measures) {\n            if (measures.length === 0) {\n              return -1;\n            }\n\n            var measure = measures[0];\n            var members = tuple.members;\n\n            for (var idx = 0, len = members.length; idx < len; idx++) {\n              if (members[idx].name == measure.name) {\n                return idx;\n              }\n            }\n          }\n\n          function normalizeTupleMeasures(tuple, index) {\n            if (index < 0) {\n              return;\n            }\n\n            var member = {\n              name: MEASURES,\n              measure: true,\n              children: [$.extend({\n                members: [],\n                dataIndex: tuple.dataIndex\n              }, tuple.members[index])]\n            };\n            tuple.members.splice(index, 1, member);\n            tuple.dataIndex = undefined;\n          }\n\n          function parseSource(tuples, measures) {\n            if (tuples.length < 1) {\n              return [];\n            }\n\n            var result = [];\n            var map = {};\n            var measureIndex = measurePosition(tuples[0], measures);\n\n            for (var i = 0; i < tuples.length; i++) {\n              var tuple = tuples[i]; //keep the old data index of the tuple\n\n              tuple.dataIndex = i;\n              normalizeTupleMeasures(tuple, measureIndex);\n              var parentMember = findParentMember(tuple, map);\n\n              if (parentMember) {\n                if (measureIndex < 0 || !parentMember.measure) {\n                  parentMember.children.push(tuple);\n                } else {\n                  parentMember.children.push(tuple.members[measureIndex].children[0]);\n                }\n              } else {\n                result.push(tuple);\n              }\n\n              addMembers(tuple.members, map);\n            }\n\n            return result;\n          }\n\n          function prepareDataOnRows(tuples, data) {\n            if (!tuples || !tuples.length) {\n              return data;\n            }\n\n            var result = [];\n            var indices = buildDataIndices(tuples);\n            var rowsLength = indices.length;\n            var columnsLength = Math.max(data.length / rowsLength, 1);\n            var rowIndex, columnIndex, targetIndex, sourceIndex;\n            var calcIndex;\n\n            for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n              targetIndex = columnsLength * rowIndex;\n              sourceIndex = columnsLength * indices[rowIndex];\n\n              for (columnIndex = 0; columnIndex < columnsLength; columnIndex++) {\n                calcIndex = parseInt(sourceIndex + columnIndex, 10);\n                result[parseInt(targetIndex + columnIndex, 10)] = data[calcIndex] || {\n                  value: \"\",\n                  fmtValue: \"\",\n                  ordinal: calcIndex\n                };\n              }\n            }\n\n            return result;\n          }\n\n          function prepareDataOnColumns(tuples, data) {\n            if (!tuples || !tuples.length) {\n              return data;\n            }\n\n            var result = [];\n            var indices = buildDataIndices(tuples);\n            var columnsLength = indices.length;\n            var rowsLength = Math.max(data.length / columnsLength, 1);\n            var columnIndex, rowIndex, dataIndex, calcIndex;\n\n            for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n              dataIndex = columnsLength * rowIndex;\n\n              for (columnIndex = 0; columnIndex < columnsLength; columnIndex++) {\n                calcIndex = indices[columnIndex] + dataIndex;\n                result[dataIndex + columnIndex] = data[calcIndex] || {\n                  value: \"\",\n                  fmtValue: \"\",\n                  ordinal: calcIndex\n                };\n              }\n            }\n\n            return result;\n          }\n\n          function buildDataIndices(tuples) {\n            tuples = tuples.slice();\n            var result = [];\n            var tuple = tuples.shift();\n            var idx, length, spliceIndex, children, member;\n\n            while (tuple) {\n              //required for multiple measures\n              if (tuple.dataIndex !== undefined) {\n                result.push(tuple.dataIndex);\n              }\n\n              spliceIndex = 0;\n\n              for (idx = 0, length = tuple.members.length; idx < length; idx++) {\n                member = tuple.members[idx];\n                children = member.children;\n\n                if (member.measure) {\n                  [].splice.apply(tuples, [0, 0].concat(children));\n                } else {\n                  [].splice.apply(tuples, [spliceIndex, 0].concat(children));\n                }\n\n                spliceIndex += children.length;\n              }\n\n              tuple = tuples.shift();\n            }\n\n            return result;\n          }\n\n          PivotDataSourceV2.create = function (options) {\n            options = options && options.push ? {\n              data: options\n            } : options;\n            var dataSource = options || {},\n                data = dataSource.data;\n            dataSource.data = data;\n\n            if (!(dataSource instanceof PivotDataSourceV2) && dataSource instanceof kendo.data.DataSource) {\n              throw new Error(\"Incorrect DataSource type. Only PivotDataSource instances are supported\");\n            }\n\n            return dataSource instanceof PivotDataSourceV2 ? dataSource : new PivotDataSourceV2(dataSource);\n          };\n\n          PivotDataSource.create = function (options) {\n            options = options && options.push ? {\n              data: options\n            } : options;\n            var dataSource = options || {},\n                data = dataSource.data;\n            dataSource.data = data;\n\n            if (!(dataSource instanceof PivotDataSource) && dataSource instanceof kendo.data.DataSource) {\n              throw new Error(\"Incorrect DataSource type. Only PivotDataSource instances are supported\");\n            }\n\n            return dataSource instanceof PivotDataSource ? dataSource : new PivotDataSource(dataSource);\n          };\n\n          function baseHierarchyPath(memberName) {\n            var parts = memberName.split(\".\");\n\n            if (parts.length > 2) {\n              return parts[0] + \".\" + parts[1];\n            }\n\n            return memberName;\n          }\n\n          function expandMemberDescriptor(names, sort) {\n            var idx = names.length - 1;\n            var name = names[idx];\n            var sortDescriptor;\n            sortDescriptor = sortDescriptorForMember(sort, name);\n\n            if (sortDescriptor && sortDescriptor.dir) {\n              name = \"ORDER(\" + name + \".Children,\" + sortDescriptor.field + \".CurrentMember.MEMBER_CAPTION,\" + sortDescriptor.dir + \")\";\n            } else {\n              name += \".Children\";\n            }\n\n            names[idx] = name;\n            return names;\n          }\n\n          function sortDescriptorForMember(sort, member) {\n            for (var idx = 0, length = sort.length; idx < length; idx++) {\n              if (member.indexOf(sort[idx].field) === 0) {\n                return sort[idx];\n              }\n            }\n\n            return null;\n          }\n\n          function crossJoin(names) {\n            var result = \"CROSSJOIN({\";\n            var r;\n\n            if (names.length > 2) {\n              r = names.pop();\n              result += crossJoin(names);\n            } else {\n              result += names.shift();\n              r = names.pop();\n            }\n\n            result += \"},{\";\n            result += r;\n            result += \"})\";\n            return result;\n          }\n\n          function crossJoinCommand(members, measures) {\n            var tmp = members.slice(0);\n\n            if (measures.length > 1) {\n              tmp.push(\"{\" + measureNames(measures).join(\",\") + \"}\");\n            }\n\n            return crossJoin(tmp);\n          }\n\n          function measureNames(measures) {\n            var idx = 0;\n            var length = measures.length;\n            var result = [];\n            var measure;\n\n            for (; idx < length; idx++) {\n              measure = measures[idx];\n              result.push(measure.name !== undefined ? measure.name : measure);\n            }\n\n            return result;\n          }\n\n          function indexOf(name, items) {\n            var idx,\n                length,\n                index = -1;\n\n            for (idx = 0, length = items.length; idx < length; idx++) {\n              if (getName(items[idx]) === name) {\n                index = idx;\n                break;\n              }\n            }\n\n            return index;\n          }\n\n          function getName(name) {\n            name = name.name || name;\n\n            if (toString.call(name) === \"[object Array]\") {\n              name = name[name.length - 1];\n            }\n\n            return name;\n          }\n\n          function getRootNames(members) {\n            var length = members.length;\n            var names = [];\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n              names.push(members[idx].name[0]);\n            }\n\n            return names;\n          }\n\n          function mapNames(names, rootNames) {\n            var name;\n            var rootName;\n            var j;\n            var idx = 0;\n            var length = names.length;\n            var rootLength = rootNames.length;\n            rootNames = rootNames.slice(0);\n\n            for (; idx < length; idx++) {\n              name = names[idx];\n\n              for (j = 0; j < rootLength; j++) {\n                rootName = baseHierarchyPath(rootNames[j]);\n\n                if (name.indexOf(rootName) !== -1) {\n                  rootNames[j] = name;\n                  break;\n                }\n              }\n            }\n\n            return {\n              names: rootNames,\n              expandedIdx: j,\n              uniquePath: rootNames.slice(0, j + 1).join(\"\")\n            };\n          }\n\n          function parseDescriptors(members) {\n            var expanded = [];\n            var child = [];\n            var root = [];\n            var member;\n            var j, l;\n            var idx = 0;\n            var length = members.length;\n            var name;\n            var hierarchyName;\n            var found;\n\n            for (; idx < length; idx++) {\n              member = members[idx];\n              name = member.name;\n              found = false;\n\n              if (toString.call(name) !== \"[object Array]\") {\n                member.name = name = [name];\n              }\n\n              if (name.length > 1) {\n                child.push(member);\n              } else {\n                hierarchyName = baseHierarchyPath(name[0]);\n\n                for (j = 0, l = root.length; j < l; j++) {\n                  if (root[j].name[0].indexOf(hierarchyName) === 0) {\n                    found = true;\n                    break;\n                  }\n                }\n\n                if (!found) {\n                  root.push(member);\n                }\n\n                if (member.expand) {\n                  expanded.push(member);\n                }\n              }\n            }\n\n            expanded = expanded.concat(child);\n            return {\n              root: root,\n              expanded: expanded\n            };\n          }\n\n          function serializeMembers(members, measures, sort) {\n            var command = \"\";\n            members = members || [];\n            var expanded = parseDescriptors(members);\n            var root = expanded.root;\n            var rootNames = getRootNames(root);\n            var crossJoinCommands = [];\n            expanded = expanded.expanded;\n            var length = expanded.length;\n            var idx = 0;\n            var memberName;\n            var names = [];\n\n            if (rootNames.length > 1 || measures.length > 1) {\n              crossJoinCommands.push(crossJoinCommand(rootNames, measures));\n\n              for (; idx < length; idx++) {\n                memberName = expandMemberDescriptor(expanded[idx].name, sort);\n                names = mapNames(memberName, rootNames).names;\n                crossJoinCommands.push(crossJoinCommand(names, measures));\n              }\n\n              command += crossJoinCommands.join(\",\");\n            } else {\n              for (; idx < length; idx++) {\n                memberName = expandMemberDescriptor(expanded[idx].name, sort);\n                names.push(memberName[0]); //check if this is ok\n              }\n\n              command += rootNames.concat(names).join(\",\");\n            }\n\n            return command;\n          }\n\n          var filterFunctionFormats = {\n            contains: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\") > 0\",\n            doesnotcontain: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\")\",\n            startswith: \", Left({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n            endswith: \", Right({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n            eq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\",\n            neq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\"\n          };\n\n          function serializeExpression(expression) {\n            var command = \"\";\n            var value = expression.value;\n            var field = expression.field;\n            var operator = expression.operator;\n\n            if (operator == \"in\") {\n              command += \"{\";\n              command += value;\n              command += \"}\";\n            } else {\n              command += operator == \"neq\" || operator == \"doesnotcontain\" ? \"-\" : \"\";\n              command += \"Filter(\";\n              command += field + \".MEMBERS\";\n              command += kendo.format(filterFunctionFormats[operator], field, value);\n              command += \")\";\n            }\n\n            return command;\n          }\n\n          function serializeFilters(filter, cube) {\n            var command = \"\",\n                current;\n            var filters = filter.filters;\n            var length = filters.length;\n            var idx;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n              current = \"SELECT (\";\n              current += serializeExpression(filters[idx]);\n              current += \") ON 0\";\n\n              if (idx == length - 1) {\n                current += \" FROM [\" + cube + \"]\";\n                command = current;\n              } else {\n                command = current + \" FROM ( \" + command + \" )\";\n              }\n            }\n\n            return command;\n          }\n\n          function serializeOptions(parentTagName, options, capitalize) {\n            var result = \"\";\n\n            if (options) {\n              result += \"<\" + parentTagName + \">\";\n              var value;\n\n              for (var key in options) {\n                value = options[key];\n\n                if (capitalize) {\n                  key = key.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g, \"$1_\").toUpperCase().replace(/_$/, \"\");\n                }\n\n                result += \"<\" + key + \">\" + value + \"</\" + key + \">\";\n              }\n\n              result += \"</\" + parentTagName + \">\";\n            } else {\n              result += \"<\" + parentTagName + \"/>\";\n            }\n\n            return result;\n          }\n\n          var xmlaDiscoverCommands = {\n            schemaCubes: \"MDSCHEMA_CUBES\",\n            schemaCatalogs: \"DBSCHEMA_CATALOGS\",\n            schemaMeasures: \"MDSCHEMA_MEASURES\",\n            schemaDimensions: \"MDSCHEMA_DIMENSIONS\",\n            schemaHierarchies: \"MDSCHEMA_HIERARCHIES\",\n            schemaLevels: \"MDSCHEMA_LEVELS\",\n            schemaMembers: \"MDSCHEMA_MEMBERS\",\n            schemaKPIs: \"MDSCHEMA_KPIS\"\n          };\n          var convertersMap = {\n            read: function (options) {\n              var command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Execute xmlns=\"urn:schemas-microsoft-com:xml-analysis\"><Command><Statement>';\n              command += \"SELECT NON EMPTY {\";\n              var columns = options.columns || [];\n              var rows = options.rows || [];\n              var measures = options.measures || [];\n              var measuresRowAxis = options.measuresAxis === \"rows\";\n              var sort = options.sort || [];\n\n              if (!columns.length && rows.length && (!measures.length || measures.length && measuresRowAxis)) {\n                columns = rows;\n                rows = [];\n                measuresRowAxis = false;\n              }\n\n              if (!columns.length && !rows.length) {\n                measuresRowAxis = false;\n              }\n\n              if (columns.length) {\n                command += serializeMembers(columns, !measuresRowAxis ? measures : [], sort);\n              } else if (measures.length && !measuresRowAxis) {\n                command += measureNames(measures).join(\",\");\n              }\n\n              command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS\";\n\n              if (rows.length || measuresRowAxis && measures.length > 1) {\n                command += \", NON EMPTY {\";\n\n                if (rows.length) {\n                  command += serializeMembers(rows, measuresRowAxis ? measures : [], sort);\n                } else {\n                  command += measureNames(measures).join(\",\");\n                }\n\n                command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS\";\n              }\n\n              if (options.filter) {\n                command += \" FROM \";\n                command += \"(\";\n                command += serializeFilters(options.filter, options.connection.cube);\n                command += \")\";\n              } else {\n                command += \" FROM [\" + options.connection.cube + \"]\";\n              }\n\n              if (measures.length == 1 && columns.length) {\n                command += \" WHERE (\" + measureNames(measures).join(\",\") + \")\";\n              }\n\n              command += '</Statement></Command><Properties><PropertyList><Catalog>' + options.connection.catalog + '</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>';\n              return command.replace(/\\&/g, \"&amp;\");\n            },\n            discover: function (options) {\n              options = options || {};\n              var command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Discover xmlns=\"urn:schemas-microsoft-com:xml-analysis\">';\n              command += \"<RequestType>\" + (xmlaDiscoverCommands[options.command] || options.command) + \"</RequestType>\";\n              command += \"<Restrictions>\" + serializeOptions(\"RestrictionList\", options.restrictions, true) + \"</Restrictions>\";\n\n              if (options.connection && options.connection.catalog) {\n                options.properties = $.extend({}, {\n                  Catalog: options.connection.catalog\n                }, options.properties);\n              }\n\n              command += \"<Properties>\" + serializeOptions(\"PropertyList\", options.properties) + \"</Properties>\";\n              command += '</Discover></Body></Envelope>';\n              return command;\n            }\n          };\n          var XmlaTransport = kendo.data.RemoteTransport.extend({\n            init: function (options) {\n              var originalOptions = options;\n              options = this.options = extend(true, {}, this.options, options);\n              kendo.data.RemoteTransport.call(this, options);\n\n              if (isFunction(originalOptions.discover)) {\n                this.discover = originalOptions.discover;\n              } else if (typeof originalOptions.discover === \"string\") {\n                this.options.discover = {\n                  url: originalOptions.discover\n                };\n              } else if (!originalOptions.discover) {\n                this.options.discover = this.options.read;\n              }\n            },\n            setup: function (options, type) {\n              options.data = options.data || {};\n              $.extend(true, options.data, {\n                connection: this.options.connection\n              });\n              return kendo.data.RemoteTransport.fn.setup.call(this, options, type);\n            },\n            options: {\n              read: {\n                dataType: \"text\",\n                contentType: \"text/xml\",\n                type: \"POST\"\n              },\n              discover: {\n                dataType: \"text\",\n                contentType: \"text/xml\",\n                type: \"POST\"\n              },\n              parameterMap: function (options, type) {\n                return convertersMap[type](options, type);\n              }\n            },\n            discover: function (options) {\n              return $.ajax(this.setup(options, \"discover\"));\n            }\n          });\n          var XmlaTransportV2 = Class.extend({\n            init: function (options) {\n              options = this.options = extend(true, {}, this.options, options);\n            },\n            setup: function (options) {\n              return $.extend(true, options || {}, {\n                connection: this.options.connection\n              });\n            },\n            read: function (options) {\n              var that = this,\n                  success,\n                  error;\n              var fetchOptions = that.setup(options.data, READ);\n              success = options.success || $.noop;\n              error = options.error || $.noop;\n\n              if (options.parameterMap) {\n                fetchOptions = that.parameterMap(fetchOptions, READ);\n              }\n\n              fetchData({\n                url: that.options.read\n              }, fetchOptions).then(createDataState).then(function (newDataState) {\n                success(newDataState);\n              }).catch(function (err) {\n                error(err);\n              });\n            },\n            catalog: function (val) {\n              var options = this.options || {};\n\n              if (val === undefined) {\n                return (options.connection || {}).catalog;\n              }\n\n              var connection = options.connection || {};\n              connection.catalog = val;\n              this.options.connection = connection;\n              $.extend(this.transport.options, {\n                connection: connection\n              });\n            },\n            cube: function (val) {\n              var options = this.options || {};\n\n              if (val === undefined) {\n                return (options.connection || {}).cube;\n              }\n\n              var connection = options.connection || {};\n              connection.cube = val;\n              this.options.connection = connection;\n              extend(true, this.transport.options, {\n                connection: connection\n              });\n            },\n            discover: function (options) {\n              return fetchDiscover({\n                url: this.options.read\n              }, options);\n            }\n          });\n\n          function asArray(object) {\n            if (object == null) {\n              return [];\n            }\n\n            var type = toString.call(object);\n\n            if (type !== \"[object Array]\") {\n              return [object];\n            }\n\n            return object;\n          }\n\n          function translateAxis(axis) {\n            var result = {\n              tuples: []\n            };\n            var tuples = asArray(kendo.getter(\"Tuples.Tuple\", true)(axis));\n            var captionGetter = kendo.getter(\"Caption['#text']\");\n            var unameGetter = kendo.getter(\"UName['#text']\");\n            var levelNameGetter = kendo.getter(\"LName['#text']\");\n            var levelNumGetter = kendo.getter(\"LNum['#text']\");\n            var childrenGetter = kendo.getter(\"CHILDREN_CARDINALITY['#text']\", true);\n            var hierarchyGetter = kendo.getter(\"['@Hierarchy']\");\n            var parentNameGetter = kendo.getter(\"PARENT_UNIQUE_NAME['#text']\", true);\n\n            for (var idx = 0; idx < tuples.length; idx++) {\n              var members = [];\n              var member = asArray(tuples[idx].Member);\n\n              for (var memberIdx = 0; memberIdx < member.length; memberIdx++) {\n                members.push({\n                  children: [],\n                  caption: captionGetter(member[memberIdx]),\n                  name: unameGetter(member[memberIdx]),\n                  levelName: levelNameGetter(member[memberIdx]),\n                  levelNum: levelNumGetter(member[memberIdx]),\n                  hasChildren: parseInt(childrenGetter(member[memberIdx]), 10) > 0,\n                  parentName: parentNameGetter(member[memberIdx]),\n                  hierarchy: hierarchyGetter(member[memberIdx])\n                });\n              }\n\n              result.tuples.push({\n                members: members\n              });\n            }\n\n            return result;\n          }\n\n          var schemaDataReaderMap = {\n            cubes: {\n              name: kendo.getter(\"CUBE_NAME['#text']\", true),\n              caption: kendo.getter(\"CUBE_CAPTION['#text']\", true),\n              description: kendo.getter(\"DESCRIPTION['#text']\", true),\n              type: kendo.getter(\"CUBE_TYPE['#text']\", true)\n            },\n            catalogs: {\n              name: kendo.getter(\"CATALOG_NAME['#text']\", true),\n              description: kendo.getter(\"DESCRIPTION['#text']\", true)\n            },\n            measures: {\n              name: kendo.getter(\"MEASURE_NAME['#text']\", true),\n              caption: kendo.getter(\"MEASURE_CAPTION['#text']\", true),\n              uniqueName: kendo.getter(\"MEASURE_UNIQUE_NAME['#text']\", true),\n              description: kendo.getter(\"DESCRIPTION['#text']\", true),\n              aggregator: kendo.getter(\"MEASURE_AGGREGATOR['#text']\", true),\n              groupName: kendo.getter(\"MEASUREGROUP_NAME['#text']\", true),\n              displayFolder: kendo.getter(\"MEASURE_DISPLAY_FOLDER['#text']\", true),\n              defaultFormat: kendo.getter(\"DEFAULT_FORMAT_STRING['#text']\", true)\n            },\n            kpis: {\n              name: kendo.getter(\"KPI_NAME['#text']\", true),\n              caption: kendo.getter(\"KPI_CAPTION['#text']\", true),\n              value: kendo.getter(\"KPI_VALUE['#text']\", true),\n              goal: kendo.getter(\"KPI_GOAL['#text']\", true),\n              status: kendo.getter(\"KPI_STATUS['#text']\", true),\n              trend: kendo.getter(\"KPI_TREND['#text']\", true),\n              statusGraphic: kendo.getter(\"KPI_STATUS_GRAPHIC['#text']\", true),\n              trendGraphic: kendo.getter(\"KPI_TREND_GRAPHIC['#text']\", true),\n              description: kendo.getter(\"KPI_DESCRIPTION['#text']\", true),\n              groupName: kendo.getter(\"MEASUREGROUP_NAME['#text']\", true)\n            },\n            dimensions: {\n              name: kendo.getter(\"DIMENSION_NAME['#text']\", true),\n              caption: kendo.getter(\"DIMENSION_CAPTION['#text']\", true),\n              description: kendo.getter(\"DESCRIPTION['#text']\", true),\n              uniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n              defaultHierarchy: kendo.getter(\"DEFAULT_HIERARCHY['#text']\", true),\n              type: kendo.getter(\"DIMENSION_TYPE['#text']\", true) //unknown = 0; time = 1; measure = 2; other = 3; quantitative = 5; accounts = 6; customers = 7; products = 8; scenario = 9; utility = 10; currency = 11; rates = 12; channel = 13; promotion = 14; organization = 15; billOfMaterials = 16; geography = 17;\n\n            },\n            hierarchies: {\n              name: kendo.getter(\"HIERARCHY_NAME['#text']\", true),\n              caption: kendo.getter(\"HIERARCHY_CAPTION['#text']\", true),\n              description: kendo.getter(\"DESCRIPTION['#text']\", true),\n              uniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true),\n              dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n              displayFolder: kendo.getter(\"HIERARCHY_DISPLAY_FOLDER['#text']\", true),\n              origin: kendo.getter(\"HIERARCHY_ORIGIN['#text']\", true),\n              defaultMember: kendo.getter(\"DEFAULT_MEMBER['#text']\", true)\n            },\n            levels: {\n              name: kendo.getter(\"LEVEL_NAME['#text']\", true),\n              caption: kendo.getter(\"LEVEL_CAPTION['#text']\", true),\n              description: kendo.getter(\"DESCRIPTION['#text']\", true),\n              uniqueName: kendo.getter(\"LEVEL_UNIQUE_NAME['#text']\", true),\n              dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n              displayFolder: kendo.getter(\"LEVEL_DISPLAY_FOLDER['#text']\", true),\n              orderingProperty: kendo.getter(\"LEVEL_ORDERING_PROPERTY['#text']\", true),\n              origin: kendo.getter(\"LEVEL_ORIGIN['#text']\", true),\n              hierarchyUniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true)\n            },\n            members: {\n              name: kendo.getter(\"MEMBER_NAME['#text']\", true),\n              caption: kendo.getter(\"MEMBER_CAPTION['#text']\", true),\n              uniqueName: kendo.getter(\"MEMBER_UNIQUE_NAME['#text']\", true),\n              dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n              hierarchyUniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true),\n              levelUniqueName: kendo.getter(\"LEVEL_UNIQUE_NAME['#text']\", true),\n              childrenCardinality: kendo.getter(\"CHILDREN_CARDINALITY['#text']\", true)\n            }\n          };\n          var xmlaReaderMethods = [\"axes\", \"catalogs\", \"cubes\", \"dimensions\", \"hierarchies\", \"levels\", \"measures\"];\n          var XmlaDataReader = kendo.data.XmlDataReader.extend({\n            init: function (options) {\n              kendo.data.XmlDataReader.call(this, options);\n\n              this._extend(options);\n            },\n            _extend: function (options) {\n              var idx = 0;\n              var length = xmlaReaderMethods.length;\n              var methodName;\n              var option;\n\n              for (; idx < length; idx++) {\n                methodName = xmlaReaderMethods[idx];\n                option = options[methodName];\n\n                if (option && option !== identity) {\n                  this[methodName] = option;\n                }\n              }\n            },\n            parse: function (xml) {\n              var result = kendo.data.XmlDataReader.fn.parse(xml.replace(/<(\\/?)(\\w|-)+:/g, \"<$1\"));\n              return kendo.getter(\"['Envelope']['Body']\", true)(result);\n            },\n            errors: function (root) {\n              var fault = kendo.getter(\"['Fault']\", true)(root);\n\n              if (fault) {\n                return [{\n                  faultstring: kendo.getter(\"faultstring['#text']\", true)(fault),\n                  faultcode: kendo.getter(\"faultcode['#text']\", true)(fault)\n                }];\n              }\n\n              return null;\n            },\n            axes: function (root) {\n              root = kendo.getter(\"ExecuteResponse[\\\"return\\\"].root\", true)(root);\n              var axes = asArray(kendo.getter(\"Axes.Axis\", true)(root));\n              var axis;\n              var result = {\n                columns: {},\n                rows: {}\n              };\n\n              for (var idx = 0; idx < axes.length; idx++) {\n                axis = axes[idx];\n\n                if (axis[\"@name\"].toLowerCase() !== \"sliceraxis\") {\n                  if (!result.columns.tuples) {\n                    result.columns = translateAxis(axis);\n                  } else {\n                    result.rows = translateAxis(axis);\n                  }\n                }\n              }\n\n              return result;\n            },\n            data: function (root) {\n              root = kendo.getter(\"ExecuteResponse[\\\"return\\\"].root\", true)(root);\n              var cells = asArray(kendo.getter(\"CellData.Cell\", true)(root));\n              var result = [];\n              var ordinalGetter = kendo.getter(\"['@CellOrdinal']\");\n              var valueGetter = kendo.getter(\"Value['#text']\");\n              var fmtValueGetter = kendo.getter(\"FmtValue['#text']\");\n\n              for (var idx = 0; idx < cells.length; idx++) {\n                result.push({\n                  value: valueGetter(cells[idx]),\n                  fmtValue: fmtValueGetter(cells[idx]),\n                  ordinal: parseInt(ordinalGetter(cells[idx]), 10)\n                });\n              }\n\n              return result;\n            },\n            _mapSchema: function (root, getters) {\n              root = kendo.getter(\"DiscoverResponse[\\\"return\\\"].root\", true)(root);\n              var rows = asArray(kendo.getter(\"row\", true)(root));\n              var result = [];\n\n              for (var idx = 0; idx < rows.length; idx++) {\n                var obj = {};\n\n                for (var key in getters) {\n                  obj[key] = getters[key](rows[idx]);\n                }\n\n                result.push(obj);\n              }\n\n              return result;\n            },\n            measures: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.measures);\n            },\n            kpis: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.kpis);\n            },\n            hierarchies: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.hierarchies);\n            },\n            levels: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.levels);\n            },\n            dimensions: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.dimensions);\n            },\n            cubes: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.cubes);\n            },\n            catalogs: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.catalogs);\n            },\n            members: function (root) {\n              return this._mapSchema(root, schemaDataReaderMap.members);\n            }\n          });\n          extend(true, kendo.data, {\n            PivotDataSource: PivotDataSource,\n            PivotDataSourceV2: PivotDataSourceV2,\n            XmlaTransport: XmlaTransport,\n            XmlaDataReader: XmlaDataReader,\n            PivotCubeBuilder: PivotCubeBuilder,\n            transports: {\n              xmla: XmlaTransport\n            },\n            readers: {\n              xmla: XmlaDataReader\n            }\n          });\n\n          var sortExpr = function (expressions, name) {\n            if (!expressions) {\n              return null;\n            }\n\n            for (var idx = 0, length = expressions.length; idx < length; idx++) {\n              if (expressions[idx].field === name) {\n                return expressions[idx];\n              }\n            }\n\n            return null;\n          };\n\n          var removeExpr = function (expressions, name) {\n            var result = [];\n\n            for (var idx = 0, length = expressions.length; idx < length; idx++) {\n              if (expressions[idx].field !== name) {\n                result.push(expressions[idx]);\n              }\n            }\n\n            return result;\n          };\n\n          kendo.ui.PivotSettingTarget = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n              that.element.addClass(\"k-pivot-setting\");\n              that.dataSource = kendo.data.PivotDataSource.create(options.dataSource);\n              that._refreshHandler = that.refresh.bind(that);\n              that.dataSource.first(CHANGE, that._refreshHandler);\n\n              if (!options.template) {\n                var actions = '';\n\n                if (that.options.enabled) {\n                  actions = '<span class=\"k-setting-delete k-chip-action\"><span class=\"k-icon k-i-close\"></span></span>';\n                }\n\n                that.options.template = '' + '<span class=\"k-chip k-chip-md k-rounded-full k-chip-solid k-chip-solid-base\" data-' + kendo.ns + 'name=\"${data.name || data}\">' + '<span class=\"k-chip-content\">' + '<span class=\"k-chip-text\">${data.name || data}</span>' + '</span>' + '<span class=\"k-chip-actions\">' + actions + '</span>' + '</span>';\n              }\n\n              that.template = kendo.template(that.options.template);\n              that.emptyTemplate = kendo.template(that.options.emptyTemplate);\n\n              that._sortable();\n\n              that.element.on(\"click\" + NS, '.k-chip, .k-button', function (e) {\n                var target = $(e.target);\n                var action = target.closest('.k-chip-action');\n                var name = target.closest(\"[\" + kendo.attr(\"name\") + \"]\").attr(kendo.attr(\"name\"));\n\n                if (!name) {\n                  return;\n                }\n\n                if (action.hasClass(\"k-setting-delete\")) {\n                  that.remove(name);\n                  return;\n                }\n\n                if (target.closest('.k-chip-actions').length > 0) {\n                  return;\n                }\n\n                if (that.options.sortable) {\n                  var sortDirection = $(e.currentTarget).find('.k-i-sort-asc-sm').length ? 'desc' : 'asc';\n                  that.sort({\n                    field: name,\n                    dir: sortDirection\n                  });\n                }\n              });\n\n              if (options.filterable || options.sortable) {\n                that.fieldMenu = new ui.PivotFieldMenu(that.element, {\n                  messages: that.options.messages.fieldMenu,\n                  filter: \".k-setting-fieldmenu\",\n                  filterable: options.filterable,\n                  sortable: options.sortable,\n                  dataSource: that.dataSource\n                });\n              }\n\n              that.refresh();\n            },\n            options: {\n              name: \"PivotSettingTarget\",\n              template: null,\n              filterable: false,\n              sortable: false,\n              emptyTemplate: \"<div class='k-empty'>${data}</div>\",\n              setting: \"columns\",\n              enabled: true,\n              messages: {\n                empty: \"Drop Fields Here\"\n              }\n            },\n            setDataSource: function (dataSource) {\n              this.dataSource.unbind(CHANGE, this._refreshHandler);\n              this.dataSource = this.options.dataSource = dataSource;\n\n              if (this.fieldMenu) {\n                this.fieldMenu.setDataSource(dataSource);\n              }\n\n              dataSource.first(CHANGE, this._refreshHandler);\n              this.refresh();\n            },\n            _sortable: function () {\n              var that = this;\n\n              if (that.options.enabled) {\n                this.sortable = this.element.kendoSortable({\n                  connectWith: this.options.connectWith,\n                  hint: that.options.hint,\n                  filter: \">*:not(.k-empty)\",\n                  cursor: \"move\",\n                  start: function (e) {\n                    e.item.trigger(\"focus\").trigger(\"blur\");\n                  },\n                  change: function (e) {\n                    var name = e.item.attr(kendo.attr(\"name\"));\n\n                    if (e.action == \"receive\") {\n                      that.add(name);\n                    } else if (e.action == \"remove\") {\n                      that.remove(name);\n                    } else if (e.action == \"sort\") {\n                      that.move(name, e.newIndex);\n                    }\n                  }\n                }).data(\"kendoSortable\");\n              }\n            },\n            _isKPI: function (data) {\n              return data.type === \"kpi\" || data.measure;\n            },\n            validate: function (data) {\n              var isMeasure = data.type == 2 || \"aggregator\" in data || this._isKPI(data);\n\n              if (isMeasure) {\n                return this.options.setting === \"measures\";\n              }\n\n              if (this.options.setting === \"measures\") {\n                return isMeasure;\n              }\n\n              var items = this.dataSource[this.options.setting]();\n              var name = data.defaultHierarchy || data.uniqueName;\n\n              if (indexOf(name, items) > -1) {\n                return false;\n              }\n\n              items = this.dataSource[this.options.setting === \"columns\" ? \"rows\" : \"columns\"]();\n\n              if (indexOf(name, items) > -1) {\n                return false;\n              }\n\n              return true;\n            },\n            add: function (name) {\n              var items = this.dataSource[this.options.setting]();\n              var i, l;\n              name = Array.isArray(name) ? name.slice(0) : [name];\n\n              for (i = 0, l = name.length; i < l; i++) {\n                if (indexOf(name[i], items) !== -1) {\n                  name.splice(i, 1);\n                  i -= 1;\n                  l -= 1;\n                }\n              }\n\n              if (name.length) {\n                items = items.concat(name);\n                this.dataSource[this.options.setting](items);\n              }\n            },\n            move: function (name, index) {\n              var items = this.dataSource[this.options.setting]();\n              var idx = indexOf(name, items);\n\n              if (idx > -1) {\n                name = items.splice(idx, 1)[0];\n                items.splice(index, 0, name);\n                this.dataSource[this.options.setting](items);\n              }\n            },\n            remove: function (name) {\n              var items = this.dataSource[this.options.setting]();\n              var idx = indexOf(name, items);\n              var sortExpressions = this.dataSource.sort();\n              var filter = this.dataSource.filter();\n\n              if (idx > -1) {\n                if (filter) {\n                  filter.filters = removeExpr(filter.filters, name);\n                  this.dataSource._filter.filters = filter.filters;\n\n                  if (!filter.filters.length) {\n                    this.dataSource._filter = null;\n                  }\n                }\n\n                if (sortExpressions) {\n                  sortExpressions = removeExpr(sortExpressions, name);\n                  this.dataSource._sort = sortExpressions;\n                }\n\n                items.splice(idx, 1);\n                this.dataSource[this.options.setting](items);\n              }\n            },\n            sort: function (expr) {\n              var sortable = this.options.sortable;\n              var allowUnsort = sortable === true || sortable.allowUnsort;\n              var skipExpr = allowUnsort && expr.dir === \"asc\";\n              var expressions = this.dataSource.sort() || [];\n              var result = removeExpr(expressions, expr.field);\n\n              if (skipExpr && expressions.length !== result.length) {\n                expr = null;\n              }\n\n              if (expr) {\n                result.push(expr);\n              }\n\n              this.dataSource.sort(result);\n            },\n            refresh: function () {\n              var html = \"\";\n              var items = this.dataSource[this.options.setting]();\n              var length = items.length;\n              var idx = 0;\n              var item;\n\n              if (length) {\n                for (; idx < length; idx++) {\n                  item = items[idx];\n                  item = item.name === undefined ? {\n                    name: item\n                  } : item;\n                  html += this.template(extend({\n                    sortIcon: this._sortIcon(item.name)\n                  }, item));\n                }\n              } else {\n                html = this.emptyTemplate(this.options.messages.empty);\n              }\n\n              this.element.html(html);\n            },\n            destroy: function () {\n              Widget.fn.destroy.call(this);\n              this.dataSource.unbind(CHANGE, this._refreshHandler);\n              this.element.off(NS);\n\n              if (this.sortable) {\n                this.sortable.destroy();\n              }\n\n              if (this.fieldMenu) {\n                this.fieldMenu.destroy();\n              }\n\n              this.element = null;\n              this._refreshHandler = null;\n            },\n            _sortIcon: function (name) {\n              var expressions = this.dataSource.sort();\n              var expr = sortExpr(expressions, getName(name));\n              var icon = \"\";\n\n              if (expr) {\n                icon = \"k-i-sort-\" + expr.dir;\n              }\n\n              return icon;\n            }\n          });\n          kendo.ui.PivotSettingTargetV2 = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n              that.dataSource = kendo.data.PivotDataSourceV2.create(options.dataSource);\n              that._refreshHandler = that.refresh.bind(that);\n              that.dataSource.first(CHANGE, that._refreshHandler);\n              that.template = kendo.template(that.options.template);\n\n              that._sortable();\n\n              that.element.on(\"click\" + NS, \".k-i-close-circle\", function (e) {\n                var target = $(e.target);\n                var parent = target.closest(\".k-chip\");\n                var name = parent.find(\".k-chip-label\").text();\n\n                if (!name) {\n                  return;\n                }\n\n                that.remove(name);\n                parent.remove();\n                that.trigger(\"remove\", {\n                  name: name\n                });\n              });\n\n              if (options.filterable || options.sortable) {\n                that.fieldMenu = new ui.PivotFieldMenuV2(that.element, {\n                  messages: that.options.messages.fieldMenu,\n                  filterable: options.filterable,\n                  filter: \".k-i-more-vertical\",\n                  sortable: options.sortable,\n                  dataSource: that.dataSource\n                });\n              }\n\n              that.refresh();\n            },\n            events: [\"remove\"],\n            options: {\n              name: \"PivotSettingTargetV2\",\n              template: null,\n              filterable: false,\n              sortable: false,\n              setting: \"columns\",\n              enabled: true,\n              messages: {\n                empty: \"Drop Fields Here\"\n              }\n            },\n            setDataSource: function (dataSource) {\n              this.dataSource.unbind(CHANGE, this._refreshHandler);\n              this.dataSource = this.options.dataSource = dataSource;\n\n              if (this.fieldMenu) {\n                this.fieldMenu.setDataSource(dataSource);\n              }\n\n              dataSource.first(CHANGE, this._refreshHandler);\n              this.refresh();\n            },\n            _applyState: function () {\n              if (this._sortState !== undefined) {\n                this.dataSource._sort = this._sortState;\n                this._sortState = undefined;\n              }\n\n              if (this._stateFilter !== undefined) {\n                this.dataSource._filter = this._stateFilter;\n                this._stateFilter = undefined;\n              }\n\n              this.dataSource[\"_\" + this.options.setting] = this.options.setting === \"measures\" ? normalizeMeasures(this._savedState) : normalizeMembers(this._savedState);\n            },\n            _cancelChanges: function () {\n              this._sortState = undefined;\n              this._stateFilter = undefined;\n              this._savedState = kendo.deepExtend([], this._initialState);\n\n              this._redraw();\n            },\n            _state: function (newState, modifyInit) {\n              var that = this;\n\n              if (!newState) {\n                return that._savedState || [];\n              } else {\n                if (!that._savedState || modifyInit) {\n                  that._initialState = kendo.deepExtend([], newState);\n                }\n\n                that._savedState = kendo.deepExtend([], newState);\n              }\n            },\n            _sortable: function () {\n              var that = this;\n              this.sortable = this.element.kendoSortable({\n                connectWith: this.options.connectWith,\n                hint: that.options.hint,\n                filter: \">*:not(.k-empty)\",\n                cursor: \"move\",\n                start: function (e) {\n                  e.item.focus().blur();\n                },\n                change: function (e) {\n                  var name = e.item.find(\".k-chip-label\").text();\n\n                  if (e.action == \"receive\") {\n                    that.add(name);\n                  } else if (e.action == \"remove\") {\n                    that.remove(name);\n                  } else if (e.action == \"sort\") {\n                    that.move(name, e.newIndex);\n                  }\n                }\n              }).data(\"kendoSortable\");\n            },\n            add: function (name) {\n              var items = this._state();\n\n              var i, l;\n              name = Array.isArray(name) ? name.slice(0) : [name];\n\n              for (i = 0, l = name.length; i < l; i++) {\n                if (indexOf(name[i], items) !== -1) {\n                  name.splice(i, 1);\n                  i -= 1;\n                  l -= 1;\n                }\n              }\n\n              if (name.length) {\n                items = items.concat(name);\n\n                this._state(items);\n\n                this._redraw();\n              }\n            },\n            move: function (name, index) {\n              var items = this._state();\n\n              var idx = indexOf(name, items);\n\n              if (idx > -1) {\n                name = items.splice(idx, 1)[0];\n                items.splice(index, 0, name);\n\n                this._state(items);\n\n                this._redraw();\n              }\n            },\n            remove: function (name) {\n              var items = this._state();\n\n              var idx = indexOf(name, items);\n              var sortExpressions = this.dataSource.sort();\n              var filter = this.dataSource.filter();\n\n              if (idx > -1) {\n                if (filter) {\n                  filter.filters = removeExpr(filter.filters, name);\n                  this._savedFilter = this.dataSource._filter;\n                  this._savedFilter.filters = filter.filters;\n\n                  if (!filter.filters.length) {\n                    this._savedFilter = null;\n                  }\n                }\n\n                if (sortExpressions) {\n                  sortExpressions = removeExpr(sortExpressions, name);\n                  this._sortState = sortExpressions;\n                }\n\n                items.splice(idx, 1);\n\n                this._state(items);\n\n                this._redraw();\n              }\n            },\n            _emptyState: function (enable) {\n              var that = this;\n\n              if (enable) {\n                that.element.html(this.options.messages.empty).addClass(\"k-settings-description\").removeClass(\"k-chip-list\");\n              } else {\n                that.element.removeClass(\"k-settings-description\").addClass(\"k-chip-list\");\n              }\n            },\n            _redraw: function () {\n              var items = this._state() || [];\n\n              this._emptyState(!items.length);\n\n              if (items.length) {\n                this.element.html(this._targetsHTML(items));\n              }\n            },\n            _targetsHTML: function (items) {\n              var item;\n              var html = \"\";\n              var idx = 0;\n              var options = this.options;\n              var enabled = false;\n\n              if (this.options.setting != \"measures\") {\n                enabled = options.filterable || options.sortable;\n              }\n\n              if (items.length) {\n                for (; idx < items.length; idx++) {\n                  item = items[idx];\n                  item = item.name === undefined ? {\n                    name: item\n                  } : item;\n                  html += this.template({\n                    name: item.name,\n                    menuenabled: enabled\n                  });\n                }\n              }\n\n              return html;\n            },\n            refresh: function () {\n              if (this.dataSource._preventRefresh) {\n                return;\n              }\n\n              var items = this.dataSource[this.options.setting]();\n\n              this._state(items, true);\n\n              this._emptyState(!this._state().length);\n\n              if (items.length) {\n                this.element.html(this._targetsHTML(items));\n              }\n            },\n            destroy: function () {\n              Widget.fn.destroy.call(this);\n              this.dataSource.unbind(CHANGE, this._refreshHandler);\n              this.element.off(NS);\n\n              if (this.sortable) {\n                this.sortable.destroy();\n              }\n\n              if (this.fieldMenu) {\n                this.fieldMenu.destroy();\n              }\n\n              this.element = null;\n              this._refreshHandler = null;\n            }\n          });\n          var PivotConfiguratorButton = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n              that.element = $(element);\n\n              that._element();\n\n              that._attachEvents();\n            },\n            options: {\n              name: \"PivotConfiguratorButton\",\n              text: \"Change settings\",\n              configurator: \"\"\n            },\n            destroy: function () {\n              this.element.off(NS);\n            },\n            setOptions: function (options) {\n              var that = this;\n              kendo.deepExtend(that.options, options);\n              this.init(this.element, this.options);\n            },\n            toggle: function () {\n              var attr = kendo.attr(\"role\");\n              var pivotEl = this.element.closest(\"[\" + attr + \"=pivotcontainer]\").find(\"[\" + attr + \"=pivotgridv2]\");\n              var pivot;\n              $(\"#\" + this.options.configurator).toggleClass(\"k-hidden\");\n\n              if (pivotEl.length) {\n                pivot = pivotEl.getKendoPivotGridV2();\n\n                pivot._setContentWidth();\n\n                pivot._updateDimensions();\n              }\n            },\n            _attachEvents: function () {\n              this.element.on(\"click\" + NS, this.toggle.bind(this));\n            },\n            _element: function () {\n              var options = this.options;\n              this.element.addClass(\"k-pivotgrid-configurator-button\");\n              this.element.html(kendo.format(\"<span>{0}<span class='k-icon k-i-gear k-color-inherit'></span></span>\", options.text));\n            }\n          });\n          var PivotContainer = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n              that.element = $(element);\n              that.options = options;\n\n              that._addClasses();\n            },\n            options: {\n              name: \"PivotContainer\",\n              configuratorPosition: \"left\"\n            },\n            setOptions: function (options) {\n              var that = this;\n              kendo.deepExtend(that.options, options);\n              this.init(this.element, this.options);\n            },\n            _addClasses: function () {\n              var options = this.options;\n              var className;\n              this.element.removeClass(\"k-flex-row k-flex-row-reverse k-flex-column k-flex-column-reverse\");\n\n              switch (options.configuratorPosition) {\n                case \"right\":\n                  className = \"k-flex-row\";\n                  break;\n\n                case \"left\":\n                  className = \"k-flex-row-reverse\";\n                  break;\n\n                case \"bottom\":\n                  className = \"k-flex-column\";\n                  break;\n\n                case \"top\":\n                  className = \"k-flex-column-reverse\";\n                  break;\n\n                default:\n                  className = \"k-flex-row\";\n              }\n\n              this.element.addClass(\"k-d-flex k-pos-relative\").addClass(className);\n            }\n          });\n          var PivotGridV2 = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n\n              that._dataSource();\n\n              that._bindConfigurator();\n\n              that._wrapper();\n\n              that._columnHeadersWrapper = $('<div class=\"k-pivotgrid-column-headers\"></div>');\n              that._rowHeadersWrapper = $('<div class=\"k-pivotgrid-row-headers\"></div>');\n              that._contentWrapper = $('<div class=\"k-pivotgrid-values\"></div>');\n              that.wrapper.append(that._columnHeadersWrapper);\n              that.wrapper.append(that._rowHeadersWrapper);\n              that.wrapper.append(that._contentWrapper);\n              that._columnBuilder = new ColumnRowBuilder({\n                template: this.options.columnHeaderTemplate,\n                axes: \"columns\"\n              });\n              that._rowBuilder = new ColumnRowBuilder({\n                template: this.options.rowHeaderTemplate,\n                axes: \"rows\"\n              });\n              that._contentBuilder = new ContentBuilderV2({\n                template: this.options.dataCellTemplate || DATACELL_TEMPLATE\n              });\n\n              that._scrollable();\n\n              that._rowHeadersWrapper.add(that._columnHeadersWrapper).on(\"click\", \"span.k-icon\", function () {\n                var button = $(this);\n                var path = button.parent().attr(kendo.attr(\"key\"));\n                var expanded = button.hasClass(\"k-i-arrow-chevron-up\");\n                var isRow = button.closest(\".k-pivotgrid-row-headers\").length !== 0;\n                var paths = path.split(\",\");\n                var eventName = expanded ? COLLAPSEMEMBER : EXPANDMEMBER;\n\n                if (that.trigger(eventName, {\n                  path: paths,\n                  axis: isRow ? \"rows\" : \"columns\"\n                })) {\n                  return;\n                }\n\n                var reducerPayLoad = {\n                  type: \"HEADERS_ACTION_TOGGLE\",\n                  payload: paths,\n                  tree: isRow ? that._rowBuilder.getTree() : that._columnBuilder.getTree()\n                };\n                var currentAxes = isRow ? that.dataSource._rows : that.dataSource._columns;\n                var newHeaders = headersReducer(currentAxes, reducerPayLoad);\n                that.dataSource._preventRefresh = true;\n\n                if (isRow) {\n                  that.dataSource.rows(newHeaders);\n                } else {\n                  that.dataSource.columns(newHeaders);\n                }\n              });\n\n              if (that.options.autoBind) {\n                that.dataSource.fetch();\n              }\n\n              kendo.notify(that);\n            },\n            events: [DATABINDING, DATABOUND, EXPANDMEMBER, COLLAPSEMEMBER],\n            options: {\n              name: \"PivotGridV2\",\n              autoBind: true,\n              height: null,\n              columnWidth: null,\n              configurator: \"\",\n              columnHeaderTemplate: null,\n              rowHeaderTemplate: null,\n              dataCellTemplate: null\n            },\n            destroy: function () {\n              var that = this;\n              Widget.fn.destroy.call(that);\n\n              if (that._windowResizeHandler) {\n                $(window).off(RESIZE + NS, that._windowResizeHandler);\n                that._windowResizeHandler = null;\n              }\n            },\n            _dataSource: function () {\n              var that = this;\n              var dataSource = that.options.dataSource;\n              dataSource = Array.isArray(dataSource) ? {\n                data: dataSource\n              } : dataSource;\n\n              if (that.dataSource && this._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n              } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n              }\n\n              that.dataSource = kendo.data.PivotDataSourceV2.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler);\n            },\n            _resize: function () {\n              var that = this;\n              that.wrapper[0].style.setProperty('--kendo-scrollbar-width', kendo.format(\"{0}px\", getScollWidth()));\n            },\n            _scrollable: function () {\n              var that = this;\n              var columnsHeader = that._columnHeadersWrapper;\n              var rowsHeader = that._rowHeadersWrapper;\n\n              that._resize();\n\n              that._windowResizeHandler = that._resize.bind(that);\n\n              that._contentWrapper.scroll(function () {\n                kendo.scrollLeft(columnsHeader, this.scrollLeft);\n                rowsHeader.scrollTop(this.scrollTop);\n              });\n\n              rowsHeader.bind(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n              $(window).on(RESIZE + NS, that._windowResizeHandler);\n            },\n            _wheelScroll: function (e) {\n              if (e.ctrlKey) {\n                return;\n              }\n\n              var delta = kendo.wheelDeltaY(e);\n\n              var scrollTop = this._contentWrapper.scrollTop();\n\n              if (delta) {\n                e.preventDefault();\n                $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                this._rowHeadersWrapper.scrollTop(scrollTop + -delta);\n\n                this._contentWrapper.scrollTop(scrollTop + -delta);\n              }\n            },\n            _wrapper: function () {\n              var height = this.options.height;\n              this.wrapper = this.element.addClass(\"k-widget k-pivotgrid\");\n              this.wrapper.append('<span class=\"k-pivotgrid-empty-cell\" />');\n\n              if (height) {\n                this.wrapper.css(\"height\", height);\n              }\n            },\n            _progress: function (toggle) {\n              kendo.ui.progress(this.wrapper, toggle);\n            },\n            _error: function () {\n              this._progress(false);\n            },\n            _requestStart: function () {\n              this._progress(true);\n            },\n            _updateDimensions: function () {\n              var that = this;\n              that.wrapper.css({\n                \"grid-template-columns\": kendo.format(\"{0}px 1fr\", that._rowHeadersWrapper.find(\".k-pivotgrid-table\")[0].offsetWidth),\n                \"grid-template-rows\": kendo.format(\"{0}px 1fr\", that._columnHeadersWrapper.find(\".k-pivotgrid-table\")[0].offsetHeight)\n              });\n            },\n            _setContentWidth: function () {\n              if (!this.options.columnWidth) {\n                return;\n              }\n\n              var contentTable = this._contentWrapper.find(\"table\");\n\n              var columnTable = this._columnHeadersWrapper.children(\"table\");\n\n              var rowLength = contentTable.children(\"colgroup\").children().length;\n              var calculatedWidth = rowLength * this.options.columnWidth;\n              var minWidth = Math.ceil(calculatedWidth / this._contentWrapper.width() * 100);\n\n              if (minWidth < 100) {\n                minWidth = 100;\n              }\n\n              contentTable.add(columnTable).css(\"width\", minWidth + \"%\");\n            },\n            _bindConfigurator: function () {\n              var configurator = this.options.configurator;\n\n              if (configurator) {\n                $(configurator).kendoPivotConfiguratorV2(\"setDataSource\", this.dataSource);\n              }\n            },\n            cellInfoByElement: function (element) {\n              element = $(element);\n              return this.cellInfo(element.index(), element.parent(\"tr\").index());\n            },\n            cellInfo: function (columnIndex, rowIndex) {\n              var contentBuilder = this._contentBuilder;\n              var dataIndex;\n              var dataItem;\n\n              if (columnIndex >= contentBuilder.columnsCount || columnIndex < 0 || rowIndex >= contentBuilder.rowsCount || rowIndex < 0) {\n                return null;\n              }\n\n              dataIndex = rowIndex * contentBuilder.columnsCount + columnIndex;\n              dataItem = contentBuilder.hash[dataIndex < 0 ? 0 : dataIndex];\n              return {\n                columnTuple: dataItem.columnTuple,\n                rowTuple: dataItem.rowTuple,\n                dataItem: dataItem.data\n              };\n            },\n            refresh: function () {\n              var that = this;\n              var dataSource = that.dataSource;\n\n              if (that.trigger(DATABINDING, {\n                action: \"rebind\"\n              })) {\n                return;\n              }\n\n              that._columnBuilder.setTuples(dataSource._columnTuples);\n\n              that._columnHeadersWrapper.html(that._columnBuilder.build());\n\n              that._rowBuilder.setTuples(dataSource._rowTuples);\n\n              that._rowHeadersWrapper.html(that._rowBuilder.build());\n\n              that._contentBuilder.setRowColumnInfo({\n                columnHeaderLeafs: that._columnBuilder.getHeaderLeafs(),\n                rowHeaderLeafs: that._rowBuilder.getHeaderLeafs(),\n                columnHeaderBreadth: that._columnBuilder.getBreadth(),\n                rowHeaderDepth: that._rowBuilder.getBreadth(),\n                data: dataSource._view\n              });\n\n              that._contentWrapper.html(that._contentBuilder.build());\n\n              that._setContentWidth();\n\n              that._updateDimensions();\n\n              that._progress(false);\n\n              that.trigger(DATABOUND);\n            }\n          });\n          ui.plugin(PivotConfiguratorButton);\n          ui.plugin(PivotContainer);\n          ui.plugin(PivotGridV2);\n          var PivotGrid = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              var columnBuilder;\n              var rowBuilder;\n              Widget.fn.init.call(that, element, options);\n\n              that._dataSource();\n\n              that._bindConfigurator();\n\n              that._wrapper();\n\n              that._createLayout();\n\n              that._columnBuilder = columnBuilder = new ColumnBuilder();\n              that._rowBuilder = rowBuilder = new RowBuilder();\n              that._contentBuilder = new ContentBuilder();\n\n              that._templates();\n\n              that.columnsHeader.add(that.rowsHeader).on(\"click\", \"span.k-icon\", function () {\n                var button = $(this);\n                var builder = columnBuilder;\n                var action = \"expandColumn\";\n                var eventName;\n                var path = button.attr(kendo.attr(\"path\"));\n                var eventArgs = {\n                  axis: \"columns\",\n                  path: $.parseJSON(path)\n                };\n\n                if (button.parent().is(\"td\")) {\n                  builder = rowBuilder;\n                  action = \"expandRow\";\n                  eventArgs.axis = \"rows\";\n                }\n\n                var expanded = button.hasClass(STATE_EXPANDED);\n                var metadata = builder.metadata[path];\n                var request = metadata.expanded === undefined;\n                eventName = expanded ? COLLAPSEMEMBER : EXPANDMEMBER;\n                eventArgs.childrenLoaded = metadata.maxChildren > metadata.children;\n\n                if (that.trigger(eventName, eventArgs)) {\n                  return;\n                }\n\n                builder.metadata[path].expanded = !expanded;\n                button.toggleClass(STATE_EXPANDED, !expanded).toggleClass(STATE_COLLAPSED, expanded);\n\n                if (!expanded && request) {\n                  that.dataSource[action](eventArgs.path);\n                } else {\n                  that.refresh();\n                }\n              });\n\n              that._scrollable();\n\n              if (that.options.autoBind) {\n                that.dataSource.fetch();\n              }\n\n              kendo.notify(that);\n            },\n            events: [DATABINDING, DATABOUND, EXPANDMEMBER, COLLAPSEMEMBER],\n            options: {\n              name: \"PivotGrid\",\n              autoBind: true,\n              reorderable: true,\n              filterable: false,\n              sortable: false,\n              height: null,\n              columnWidth: 100,\n              configurator: \"\",\n              columnHeaderTemplate: null,\n              rowHeaderTemplate: null,\n              dataCellTemplate: null,\n              kpiStatusTemplate: null,\n              kpiTrendTemplate: null,\n              messages: {\n                measureFields: \"Drop Data Fields Here\",\n                columnFields: \"Drop Column Fields Here\",\n                rowFields: \"Drop Rows Fields Here\"\n              }\n            },\n            _templates: function () {\n              var columnTemplate = this.options.columnHeaderTemplate;\n              var rowTemplate = this.options.rowHeaderTemplate;\n              var dataTemplate = this.options.dataCellTemplate;\n              var kpiStatusTemplate = this.options.kpiStatusTemplate;\n              var kpiTrendTemplate = this.options.kpiTrendTemplate;\n              this._columnBuilder.template = kendo.template(columnTemplate || HEADER_TEMPLATE, {\n                useWithBlock: !!columnTemplate\n              });\n              this._contentBuilder.dataTemplate = kendo.template(dataTemplate || DATACELL_TEMPLATE, {\n                useWithBlock: !!dataTemplate\n              });\n              this._contentBuilder.kpiStatusTemplate = kendo.template(kpiStatusTemplate || KPISTATUS_TEMPLATE, {\n                useWithBlock: !!kpiStatusTemplate\n              });\n              this._contentBuilder.kpiTrendTemplate = kendo.template(kpiTrendTemplate || KPITREND_TEMPLATE, {\n                useWithBlock: !!kpiTrendTemplate\n              });\n              this._rowBuilder.template = kendo.template(rowTemplate || HEADER_TEMPLATE, {\n                useWithBlock: !!rowTemplate\n              });\n            },\n            _bindConfigurator: function () {\n              var configurator = this.options.configurator;\n\n              if (configurator) {\n                $(configurator).kendoPivotConfigurator(\"setDataSource\", this.dataSource);\n              }\n            },\n            cellInfoByElement: function (element) {\n              element = $(element);\n              return this.cellInfo(element.index(), element.parent(\"tr\").index());\n            },\n            cellInfo: function (columnIndex, rowIndex) {\n              var contentBuilder = this._contentBuilder;\n              var columnInfo = contentBuilder.columnIndexes[columnIndex || 0];\n              var rowInfo = contentBuilder.rowIndexes[rowIndex || 0];\n              var dataIndex;\n\n              if (!columnInfo || !rowInfo) {\n                return null;\n              }\n\n              dataIndex = rowInfo.index * contentBuilder.rowLength + columnInfo.index;\n              return {\n                columnTuple: columnInfo.tuple,\n                rowTuple: rowInfo.tuple,\n                measure: columnInfo.measure || rowInfo.measure,\n                dataItem: this.dataSource.view()[dataIndex]\n              };\n            },\n            setDataSource: function (dataSource) {\n              this.options.dataSource = dataSource;\n\n              this._dataSource();\n\n              if (this.measuresTarget) {\n                this.measuresTarget.setDataSource(dataSource);\n              }\n\n              if (this.rowsTarget) {\n                this.rowsTarget.setDataSource(dataSource);\n              }\n\n              if (this.columnsTarget) {\n                this.columnsTarget.setDataSource(dataSource);\n              }\n\n              this._bindConfigurator();\n\n              if (this.options.autoBind) {\n                dataSource.fetch();\n              }\n            },\n            setOptions: function (options) {\n              Widget.fn.setOptions.call(this, options);\n\n              this._templates();\n            },\n            destroy: function () {\n              Widget.fn.destroy.call(this);\n              clearTimeout(this._headerReflowTimeout);\n            },\n            _dataSource: function () {\n              var that = this;\n              var dataSource = that.options.dataSource;\n              dataSource = Array.isArray(dataSource) ? {\n                data: dataSource\n              } : dataSource;\n\n              if (that.dataSource && this._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(STATERESET, that._stateResetHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n              } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._stateResetHandler = that._stateReset.bind(that);\n                that._errorHandler = that._error.bind(that);\n              }\n\n              that.dataSource = kendo.data.PivotDataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(STATERESET, that._stateResetHandler).bind(ERROR, that._errorHandler);\n            },\n            _error: function () {\n              this._progress(false);\n            },\n            _requestStart: function () {\n              this._progress(true);\n            },\n            _stateReset: function () {\n              this._columnBuilder.reset();\n\n              this._rowBuilder.reset();\n            },\n            _wrapper: function () {\n              var height = this.options.height;\n              this.wrapper = this.element.addClass(\"k-widget k-pivot\");\n\n              if (height) {\n                this.wrapper.css(\"height\", height);\n              }\n            },\n            _measureFields: function () {\n              this.measureFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-measures\");\n              this.measuresTarget = this._createSettingTarget(this.measureFields, {\n                setting: \"measures\",\n                messages: {\n                  empty: this.options.messages.measureFields\n                }\n              });\n            },\n            _createSettingTarget: function (element, options) {\n              var template;\n              var sortable = options.sortable;\n              var icons = '';\n\n              if (sortable) {\n                icons += '#if (data.sortIcon) {#';\n                icons += '<span class=\"k-chip-action\"><span class=\"k-icon ${data.sortIcon}-sm\"></span></span>';\n                icons += '#}#';\n              }\n\n              if (options.filterable || sortable) {\n                icons += '<span class=\"k-setting-fieldmenu k-chip-action\"><span class=\"k-icon k-i-more-vertical\"></span></span>';\n              }\n\n              if (this.options.reorderable) {\n                icons += '<span class=\"k-setting-delete k-chip-action\"><span class=\"k-icon k-i-close\"></span></span>';\n              }\n\n              template = '' + '<span class=\"k-chip k-chip-md k-rounded-full k-chip-solid k-chip-solid-base\" tabindex=\"0\" data-' + kendo.ns + 'name=\"${data.name}\">' + '<span class=\"k-chip-content\">' + '<span class=\"k-chip-text\">${data.name}</span>' + '</span>' + '<span class=\"k-chip-actions k-field-actions\">' + icons + '</span>' + '</span>';\n              return new kendo.ui.PivotSettingTarget(element, $.extend({\n                dataSource: this.dataSource,\n                template: template,\n                emptyTemplate: '<span class=\"k-empty\">${data}</span>',\n                enabled: this.options.reorderable\n              }, options));\n            },\n            _initSettingTargets: function () {\n              this.columnsTarget = this._createSettingTarget(this.columnFields, {\n                connectWith: this.rowFields,\n                setting: \"columns\",\n                filterable: this.options.filterable,\n                sortable: this.options.sortable,\n                messages: {\n                  empty: this.options.messages.columnFields,\n                  fieldMenu: this.options.messages.fieldMenu\n                }\n              });\n              this.rowsTarget = this._createSettingTarget(this.rowFields, {\n                connectWith: this.columnFields,\n                setting: \"rows\",\n                filterable: this.options.filterable,\n                sortable: this.options.sortable,\n                messages: {\n                  empty: this.options.messages.rowFields,\n                  fieldMenu: this.options.messages.fieldMenu\n                }\n              });\n            },\n            _createLayout: function () {\n              var that = this;\n              var layoutTable = $(LAYOUT_TABLE);\n              var leftContainer = layoutTable.find(\".k-pivot-rowheaders\");\n              var rightContainer = layoutTable.find(\".k-pivot-table\");\n              var gridWrapper = $(DIV).addClass(\"k-grid k-widget\");\n\n              that._measureFields();\n\n              that.columnFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-columns\");\n              that.rowFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-rows\");\n              that.columnsHeader = $('<div class=\"k-grid-header-wrap\" />').wrap('<div class=\"k-grid-header\" />');\n              that.columnsHeader.parent().css(\"padding-right\", kendo.support.scrollbar());\n              that.rowsHeader = $('<div class=\"k-grid k-widget k-alt\"/>');\n              that.content = $('<div class=\"k-grid-content\" />');\n              leftContainer.append(that.measureFields);\n              leftContainer.append(that.rowFields);\n              leftContainer.append(that.rowsHeader);\n              gridWrapper.append(that.columnsHeader.parent());\n              gridWrapper.append(that.content);\n              rightContainer.append(that.columnFields);\n              rightContainer.append(gridWrapper);\n              that.wrapper.append(layoutTable);\n              that.columnsHeaderTree = new kendo.dom.Tree(that.columnsHeader[0]);\n              that.rowsHeaderTree = new kendo.dom.Tree(that.rowsHeader[0]);\n              that.contentTree = new kendo.dom.Tree(that.content[0]);\n\n              that._initSettingTargets();\n            },\n            _progress: function (toggle) {\n              kendo.ui.progress(this.wrapper, toggle);\n            },\n            _resize: function () {\n              if (this.content[0].firstChild) {\n                this._setSectionsWidth();\n\n                this._setSectionsHeight();\n\n                this._setContentWidth();\n\n                this._setContentHeight();\n\n                this._columnHeaderReflow();\n              }\n            },\n            _columnHeaderReflow: function () {\n              var columnTable = this.columnsHeader.children(\"table\");\n\n              if (!kendo.support.browser.mozilla) {\n                return;\n              }\n\n              clearTimeout(this._headerReflowTimeout);\n              columnTable.css(\"table-layout\", \"auto\");\n              this._headerReflowTimeout = setTimeout(function () {\n                columnTable.css(\"table-layout\", \"\");\n              });\n            },\n            _setSectionsWidth: function () {\n              var rowsHeader = this.rowsHeader;\n              var leftColumn = rowsHeader.parent(\".k-pivot-rowheaders\").width(AUTO);\n              var width;\n              width = Math.max(outerWidth(this.measureFields), outerWidth(this.rowFields));\n              width = Math.max(rowsHeader.children(\"table\").width(), width);\n              leftColumn.width(width);\n            },\n            _setSectionsHeight: function () {\n              var measureFieldsHeight = this.measureFields.height(AUTO).height();\n              var columnFieldsHeight = this.columnFields.height(AUTO).height();\n              var rowFieldsHeight = this.rowFields.height(AUTO).innerHeight();\n              var columnsHeight = this.columnsHeader.height(AUTO).innerHeight();\n              var padding = rowFieldsHeight - this.rowFields.height();\n              var firstRowHeight = columnFieldsHeight > measureFieldsHeight ? columnFieldsHeight : measureFieldsHeight;\n              var secondRowHeight = columnsHeight > rowFieldsHeight ? columnsHeight : rowFieldsHeight;\n              this.measureFields.height(firstRowHeight);\n              this.columnFields.height(firstRowHeight);\n              this.rowFields.height(secondRowHeight - padding);\n              this.columnsHeader.height(secondRowHeight);\n            },\n            _setContentWidth: function () {\n              var contentTable = this.content.find(\"table\");\n              var columnTable = this.columnsHeader.children(\"table\");\n              var rowLength = contentTable.children(\"colgroup\").children().length;\n              var calculatedWidth = rowLength * this.options.columnWidth;\n              var minWidth = Math.ceil(calculatedWidth / this.content.width() * 100);\n\n              if (minWidth < 100) {\n                minWidth = 100;\n              }\n\n              contentTable.add(columnTable).css(\"width\", minWidth + \"%\");\n\n              this._resetColspan(columnTable);\n            },\n            _setContentHeight: function () {\n              var that = this;\n              var content = that.content;\n              var rowsHeader = that.rowsHeader;\n              var innerHeight = that.wrapper.innerHeight();\n              var scrollbar = kendo.support.scrollbar();\n              var skipScrollbar = content[0].offsetHeight === content[0].clientHeight;\n              var height = that.options.height;\n\n              if (that.wrapper.is(\":visible\")) {\n                if (!innerHeight || !height) {\n                  if (skipScrollbar) {\n                    scrollbar = 0;\n                  }\n\n                  content.height(\"auto\");\n                  rowsHeader.height(content.height() - scrollbar);\n                  return;\n                }\n\n                innerHeight -= outerHeight(that.columnFields);\n                innerHeight -= outerHeight(that.columnsHeader.parent());\n\n                if (innerHeight <= scrollbar * 2) {\n                  // do not set height if proper scrollbar cannot be displayed\n                  innerHeight = scrollbar * 2 + 1;\n\n                  if (!skipScrollbar) {\n                    innerHeight += scrollbar;\n                  }\n                }\n\n                content.height(innerHeight);\n\n                if (skipScrollbar) {\n                  scrollbar = 0;\n                }\n\n                rowsHeader.height(innerHeight - scrollbar);\n              }\n            },\n            _resetColspan: function (columnTable) {\n              var that = this;\n              var cell = columnTable.children(\"tbody\").children().first().children().first();\n\n              if (that._colspan === undefined) {\n                that._colspan = cell.attr(\"colspan\");\n              }\n\n              cell.attr(\"colspan\", 1);\n              clearTimeout(that._layoutTimeout);\n              that._layoutTimeout = setTimeout(function () {\n                cell.attr(\"colspan\", that._colspan);\n                that._colspan = undefined;\n              });\n            },\n            _axisMeasures: function (axis) {\n              var result = [];\n              var dataSource = this.dataSource;\n              var measures = dataSource.measures();\n              var hasMeasure = measures.length > 1 || measures[0] && measures[0].type;\n\n              if (dataSource.measuresAxis() === axis) {\n                if (dataSource[axis]().length === 0 || hasMeasure) {\n                  result = measures;\n                }\n              }\n\n              return result;\n            },\n            items: function () {\n              return [];\n            },\n            refresh: function () {\n              var that = this;\n              var dataSource = that.dataSource;\n              var axes = dataSource.axes();\n              var columns = (axes.columns || {}).tuples || [];\n              var rows = (axes.rows || {}).tuples || [];\n              var columnBuilder = that._columnBuilder;\n              var rowBuilder = that._rowBuilder;\n              var columnAxis = {};\n              var rowAxis = {};\n\n              if (that.trigger(DATABINDING, {\n                action: \"rebind\"\n              })) {\n                return;\n              }\n\n              columnBuilder.measures = that._axisMeasures(AXIS_COLUMNS);\n              rowBuilder.measures = that._axisMeasures(AXIS_ROWS);\n              that.columnsHeaderTree.render(columnBuilder.build(columns));\n              that.rowsHeaderTree.render(rowBuilder.build(rows));\n              columnAxis = {\n                indexes: columnBuilder._indexes,\n                measures: columnBuilder.measures,\n                metadata: columnBuilder.metadata\n              };\n              rowAxis = {\n                indexes: rowBuilder._indexes,\n                measures: rowBuilder.measures,\n                metadata: rowBuilder.metadata\n              };\n              that.contentTree.render(that._contentBuilder.build(dataSource.view(), columnAxis, rowAxis));\n\n              that._resize();\n\n              if (that.touchScroller) {\n                that.touchScroller.contentResized();\n              } else {\n                var touchScroller = kendo.touchScroller(that.content);\n\n                if (touchScroller && touchScroller.movable) {\n                  that.touchScroller = touchScroller;\n                  touchScroller.movable.bind(\"change\", function (e) {\n                    kendo.scrollLeft(that.columnsHeader, -e.sender.x);\n                    that.rowsHeader.scrollTop(-e.sender.y);\n                  });\n                }\n              }\n\n              that._progress(false);\n\n              that.trigger(DATABOUND);\n            },\n            _scrollable: function () {\n              var that = this;\n              var columnsHeader = that.columnsHeader;\n              var rowsHeader = that.rowsHeader;\n              that.content.on(\"scroll\", function () {\n                kendo.scrollLeft(columnsHeader, this.scrollLeft);\n                rowsHeader.scrollTop(this.scrollTop);\n              });\n              rowsHeader.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            },\n            _wheelScroll: function (e) {\n              if (e.ctrlKey) {\n                return;\n              }\n\n              var delta = kendo.wheelDeltaY(e);\n              var scrollTop = this.content.scrollTop();\n\n              if (delta) {\n                e.preventDefault(); //In Firefox DOMMouseScroll event cannot be canceled\n\n                $(e.currentTarget).one(\"wheel\" + NS, false);\n                this.rowsHeader.scrollTop(scrollTop + -delta);\n                this.content.scrollTop(scrollTop + -delta);\n              }\n            }\n          });\n          var element = kendo.dom.element;\n          var htmlNode = kendo.dom.html;\n\n          var createMetadata = function (levelNum, memberIdx) {\n            return {\n              maxChildren: 0,\n              children: 0,\n              maxMembers: 0,\n              members: 0,\n              measures: 1,\n              levelNum: levelNum,\n              parentMember: memberIdx !== 0\n            };\n          };\n\n          var buildPath = function (tuple, index) {\n            var path = [];\n            var idx = 0;\n\n            for (; idx <= index; idx++) {\n              path.push(tuple.members[idx].name);\n            }\n\n            return path;\n          };\n\n          var tupleName = function (tuple, index) {\n            var name = \"\";\n            var idx = 0;\n\n            for (; idx <= index; idx++) {\n              name += tuple.members[idx].name;\n            }\n\n            return name;\n          };\n\n          var ContentBuilderV2 = Class.extend({\n            init: function (options) {\n              this.template = kendo.template(options.template);\n              this.hash = [];\n            },\n            setRowColumnInfo: function (options) {\n              this.data = options.data;\n              this.columnHeaderLeafs = options.columnHeaderLeafs;\n              this.rowHeaderLeafs = options.rowHeaderLeafs;\n              this.columnHeaderBreadth = options.columnHeaderBreadth;\n              this.rowHeaderDepth = options.rowHeaderDepth;\n              this.hash.length = 0;\n            },\n            addColElements: function (count) {\n              var html = \"\";\n\n              for (var index = 0; index < count; index++) {\n                html += \"<col>\";\n              }\n\n              this.table.find(\"colgroup\").append(html);\n            },\n            addRowElements: function (data) {\n              var that = this;\n              var body = that.table.find(\"tbody\");\n              var row;\n\n              for (var index = 0; index < data.length; index++) {\n                row = $('<tr class=\"k-pivotgrid-row\"></tr>');\n                body.append(row);\n                that.addColumCell(row, data[index], index);\n              }\n\n              this.rowsCount = data.length;\n            },\n            addColumCell: function (rowEl, rowItem, rowIndex) {\n              var that = this;\n\n              for (var index = 0; index < rowItem.cells.length; index++) {\n                var cell = rowItem.cells[index];\n\n                if (cell) {\n                  var cellEl = $('<td class=\"k-pivotgrid-cell\"></td>');\n\n                  if (this.rowHeaderLeafs[rowIndex].total || this.columnHeaderLeafs[index].total) {\n                    cellEl.addClass(\"k-pivotgrid-header-total\");\n                  }\n\n                  cellEl.append(that.template({\n                    dataItem: cell.data,\n                    rowTuple: cell.rowTuple,\n                    columnTuple: cell.columnTuple\n                  }));\n                  this.hash.push(cell);\n                  rowEl.append(cellEl);\n                }\n              }\n            },\n            build: function () {\n              var data = toData((this.data || []).slice(), this.columnHeaderLeafs, this.rowHeaderLeafs, this.columnHeaderBreadth, this.rowHeaderDepth);\n              var that = this;\n              var table = $(\"<table class='k-pivotgrid-table'><colgroup></colgroup><tbody class='k-pivotgrid-tbody'></tbody></table>\");\n              that.table = table;\n              that.addColElements(this.columnHeaderLeafs.length);\n              that.addRowElements(data);\n              this.rowsCount = data.length;\n              this.columnsCount = this.columnHeaderLeafs.length;\n              return that.table;\n            }\n          });\n          var ColumnRowBuilder = Class.extend({\n            init: function (options) {\n              this.tuples = options.tuples;\n              this.axes = options.axes;\n              this.headerTemplate = kendo.template(HEADERTEMPLATE);\n\n              if (options.template) {\n                this.template = kendo.template(options.template);\n              }\n            },\n            setTuples: function (tuples) {\n              this.tuples = tuples;\n            },\n            addColElements: function (count) {\n              var html = \"\";\n\n              for (var index = 0; index < count; index++) {\n                html += \"<col>\";\n              }\n\n              this.table.find(\"colgroup\").append(html);\n            },\n            addRowElements: function (columnHeaderRows) {\n              var that = this;\n              var body = that.table.find(\"tbody\");\n              var row;\n\n              for (var index = 0; index < columnHeaderRows.length; index++) {\n                row = $('<tr class=\"k-pivotgrid-row\"></tr>');\n                body.append(row);\n                that.addColumCell(row, columnHeaderRows[index]);\n              }\n            },\n            addColumCell: function (rowEl, rowItem) {\n              var that = this;\n              var cellEl;\n              var cell;\n\n              for (var index = 0; index < rowItem.cells.length; index++) {\n                cell = rowItem.cells[index];\n\n                if (cell) {\n                  cellEl = $(that.headerTemplate({\n                    rowspan: cell.rowSpan,\n                    colspan: cell.colSpan,\n                    key: cell.path.join(\",\") + (cell.total ? '|[TOTAL]' : ''),\n                    iconClass: cell.children && cell.children.length ? \"up\" : \"down\",\n                    expandable: cell.hasChildren && !cell.total,\n                    headerClass: kendo.format(\"k-pivotgrid-cell{0}{1}\", cell.total ? \" k-pivotgrid-header-total\" : \"\", cell.levelNum === 0 ? \" k-pivotgrid-header-root\" : \"\")\n                  }));\n                  cellEl.append(that.template ? that.template({\n                    member: cell\n                  }) : cell.caption);\n                  rowEl.append(cellEl);\n                }\n              }\n            },\n            build: function () {\n              var tree = toTree((this.tuples || []).slice());\n              var treeData = this.axes == \"columns\" ? toColumns(tree) : toRows(tree);\n              var headerRows = treeData[0];\n              var headerLeafs = treeData[1];\n              var breadth = treeData[2];\n              var rowHeaderBreadth = treeData[3];\n              var that = this;\n              that._tree = tree;\n              that._breadth = breadth;\n              that._headerLeafs = headerLeafs;\n              var table = $(\"<table class='k-pivotgrid-table'><colgroup></colgroup><tbody class='k-pivotgrid-tbody'></tbody></table>\");\n              that.table = table;\n              that.addColElements(this.axes == \"columns\" ? headerLeafs.length : rowHeaderBreadth);\n              that.addRowElements(headerRows);\n              return that.table;\n            },\n            getTree: function () {\n              return this._tree;\n            },\n            getBreadth: function () {\n              return this._breadth;\n            },\n            getHeaderLeafs: function () {\n              return this._headerLeafs;\n            }\n          });\n          var ColumnBuilder = Class.extend({\n            init: function () {\n              this.measures = 1;\n              this.metadata = {};\n            },\n            build: function (tuples) {\n              var tbody = this._tbody(tuples);\n\n              var colgroup = this._colGroup();\n\n              return [element(\"table\", null, [colgroup, tbody])];\n            },\n            reset: function () {\n              this.metadata = {};\n            },\n            _colGroup: function () {\n              var length = this._rowLength();\n\n              var children = [];\n              var idx = 0;\n\n              for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n              }\n\n              return element(\"colgroup\", null, children);\n            },\n            _tbody: function (tuples) {\n              var root = tuples[0];\n              this.map = {};\n              this.rows = [];\n              this.rootTuple = root;\n              this._indexes = [];\n\n              if (root) {\n                this._buildRows(root, 0);\n\n                this._normalize();\n              } else {\n                this.rows.push(element(\"tr\", null, [element(\"th\", null, [htmlNode(\"&nbsp;\")])]));\n              }\n\n              return element(\"tbody\", null, this.rows);\n            },\n            _normalize: function () {\n              var rows = this.rows;\n              var rowsLength = rows.length;\n              var rowIdx = 0;\n              var row;\n              var cellsLength;\n              var cellIdx;\n              var cells;\n              var cell;\n\n              for (; rowIdx < rowsLength; rowIdx++) {\n                row = rows[rowIdx];\n\n                if (row.rowSpan === 1) {\n                  continue;\n                }\n\n                cells = row.children;\n                cellIdx = 0;\n                cellsLength = cells.length;\n\n                for (; cellIdx < cellsLength; cellIdx++) {\n                  cell = cells[cellIdx];\n\n                  if (cell.tupleAll) {\n                    cell.attr.rowSpan = row.rowSpan;\n                  }\n                }\n              }\n            },\n            _rowIndex: function (row) {\n              var rows = this.rows;\n              var length = rows.length;\n              var idx = 0;\n\n              for (; idx < length; idx++) {\n                if (rows[idx] === row) {\n                  break;\n                }\n              }\n\n              return idx;\n            },\n            _rowLength: function () {\n              var cells = this.rows[0] ? this.rows[0].children : [];\n              var length = cells.length;\n              var rowLength = 0;\n              var idx = 0;\n\n              if (length) {\n                for (; idx < length; idx++) {\n                  rowLength += cells[idx].attr.colSpan || 1;\n                }\n              }\n\n              if (!rowLength) {\n                rowLength = this.measures;\n              }\n\n              return rowLength;\n            },\n            _row: function (tuple, memberIdx, parentMember) {\n              var rootName = this.rootTuple.members[memberIdx].name;\n              var levelNum = tuple.members[memberIdx].levelNum;\n              var rowKey = rootName + levelNum;\n              var map = this.map;\n              var parentRow;\n              var children;\n              var row = map[rowKey];\n\n              if (!row) {\n                row = element(\"tr\", null, []);\n                row.parentMember = parentMember;\n                row.collapsed = 0;\n                row.colSpan = 0;\n                row.rowSpan = 1;\n                map[rowKey] = row;\n                parentRow = map[rootName + (Number(levelNum) - 1)];\n\n                if (parentRow) {\n                  children = parentRow.children;\n\n                  if (children[1] && children[1].attr.className.indexOf(\"k-alt\") === -1) {\n                    row.notFirst = true;\n                  } else {\n                    row.notFirst = parentRow.notFirst;\n                  }\n                }\n\n                this.rows.splice(this._rowIndex(parentRow) + 1, 0, row);\n              } else {\n                row.notFirst = false;\n\n                if (!row.parentMember || row.parentMember !== parentMember) {\n                  row.parentMember = parentMember;\n                  row.collapsed = 0;\n                  row.colSpan = 0;\n                }\n              }\n\n              return row;\n            },\n            _measures: function (measures, tuple, className) {\n              var map = this.map;\n              var row = map.measureRow;\n              var measure;\n\n              if (!row) {\n                row = element(\"tr\", null, []);\n                map.measureRow = row;\n                this.rows.push(row);\n              }\n\n              for (var idx = 0, length = measures.length; idx < length; idx++) {\n                measure = measures[idx];\n                row.children.push(this._cell(className || \"\", [this._content(measure, tuple)], measure));\n              }\n\n              return length;\n            },\n            _content: function (member, tuple) {\n              return htmlNode(this.template({\n                member: member,\n                tuple: tuple\n              }));\n            },\n            _cell: function (className, children, member) {\n              var cell = element(\"th\", {\n                className: \"k-header\" + className\n              }, children);\n              cell.value = member.caption || member.name;\n              return cell;\n            },\n            _buildRows: function (tuple, memberIdx, parentMember) {\n              var members = tuple.members;\n              var member = members[memberIdx];\n              var nextMember = members[memberIdx + 1];\n              var row, childRow, children, childrenLength;\n              var cell, allCell, cellAttr;\n              var cellChildren = [];\n              var path;\n              var idx = 0;\n              var metadata;\n              var colSpan;\n              var collapsed = 0;\n              var memberCollapsed = 0;\n\n              if (member.measure) {\n                this._measures(member.children, tuple);\n\n                return;\n              }\n\n              path = kendo.stringify(buildPath(tuple, memberIdx));\n              row = this._row(tuple, memberIdx, parentMember);\n              children = member.children;\n              childrenLength = children.length;\n              metadata = this.metadata[path];\n\n              if (!metadata) {\n                this.metadata[path] = metadata = createMetadata(Number(member.levelNum), memberIdx);\n                metadata.rootLevelNum = Number(this.rootTuple.members[memberIdx].levelNum);\n              }\n\n              this._indexes.push({\n                path: path,\n                tuple: tuple\n              });\n\n              if (member.hasChildren) {\n                if (metadata.expanded === false) {\n                  collapsed = metadata.maxChildren;\n                  row.collapsed += collapsed;\n                  metadata.children = 0;\n                  childrenLength = 0;\n                }\n\n                cellAttr = {\n                  className: \"k-icon \" + (childrenLength ? STATE_EXPANDED : STATE_COLLAPSED)\n                };\n                cellAttr[kendo.attr(\"path\")] = path;\n                cellChildren.push(element(\"span\", cellAttr));\n              }\n\n              cellChildren.push(this._content(member, tuple));\n              cell = this._cell(row.notFirst ? \" k-first\" : \"\", cellChildren, member);\n              row.children.push(cell);\n              row.colSpan += 1;\n\n              if (childrenLength) {\n                allCell = this._cell(\" k-alt\", [this._content(member, tuple)], member);\n                row.children.push(allCell);\n\n                for (; idx < childrenLength; idx++) {\n                  childRow = this._buildRows(children[idx], memberIdx, member);\n                }\n\n                colSpan = childRow.colSpan;\n                collapsed = childRow.collapsed;\n                cell.attr.colSpan = colSpan;\n                metadata.children = colSpan;\n                metadata.members = 1;\n                row.colSpan += colSpan;\n                row.collapsed += collapsed;\n                row.rowSpan = childRow.rowSpan + 1;\n\n                if (nextMember) {\n                  if (nextMember.measure) {\n                    colSpan = this._measures(nextMember.children, tuple, \" k-alt\");\n                  } else {\n                    childRow = this._buildRows(tuple, memberIdx + 1);\n                    colSpan = childRow.colSpan;\n                    row.collapsed += childRow.collapsed;\n                    memberCollapsed = childRow.collapsed;\n                  }\n\n                  allCell.attr.colSpan = colSpan;\n                  colSpan -= 1;\n                  metadata.members += colSpan;\n                  row.colSpan += colSpan;\n                }\n              } else if (nextMember) {\n                if (nextMember.measure) {\n                  colSpan = this._measures(nextMember.children, tuple);\n                } else {\n                  childRow = this._buildRows(tuple, memberIdx + 1);\n                  colSpan = childRow.colSpan;\n                  row.collapsed += childRow.collapsed;\n                  memberCollapsed = childRow.collapsed;\n                }\n\n                metadata.members = colSpan;\n\n                if (colSpan > 1) {\n                  cell.attr.colSpan = colSpan;\n                  row.colSpan += colSpan - 1;\n                }\n              }\n\n              if (metadata.maxMembers < metadata.members + memberCollapsed) {\n                metadata.maxMembers = metadata.members + memberCollapsed;\n              }\n\n              children = metadata.children + collapsed;\n\n              if (metadata.maxChildren < children) {\n                metadata.maxChildren = children;\n              }\n\n              (allCell || cell).tupleAll = true;\n              return row;\n            }\n          });\n          var RowBuilder = Class.extend({\n            init: function () {\n              this.metadata = {};\n            },\n            build: function (tuples) {\n              var tbody = this._tbody(tuples);\n\n              var colgroup = this._colGroup();\n\n              return [element(\"table\", null, [colgroup, tbody])];\n            },\n            reset: function () {\n              this.metadata = {};\n            },\n            _rowLength: function () {\n              var children = this.rows[0].children;\n              var length = 0;\n              var idx = 0;\n              var cell = children[idx];\n\n              while (cell) {\n                length += cell.attr.colSpan || 1;\n                cell = children[++idx];\n              }\n\n              return length;\n            },\n            _colGroup: function () {\n              var length = this._rowLength();\n\n              var children = [];\n              var idx = 0;\n\n              for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n              }\n\n              return element(\"colgroup\", null, children);\n            },\n            _tbody: function (tuples) {\n              var root = tuples[0];\n              this.rootTuple = root;\n              this.rows = [];\n              this.map = {};\n              this._indexes = [];\n\n              if (root) {\n                this._buildRows(root, 0);\n\n                this._normalize();\n              } else {\n                this.rows.push(element(\"tr\", null, [element(\"td\", null, [htmlNode(\"&nbsp;\")])]));\n              }\n\n              return element(\"tbody\", null, this.rows);\n            },\n            _normalize: function () {\n              var rows = this.rows;\n              var rowsLength = rows.length;\n              var rowIdx = 0;\n              var members = this.rootTuple.members;\n              var firstMemberName = members[0].name;\n              var membersLength = members.length;\n              var memberIdx = 0;\n              var row;\n              var cell;\n              var maxcolSpan;\n              var map = this.map;\n              var allRow;\n\n              for (; rowIdx < rowsLength; rowIdx++) {\n                row = rows[rowIdx];\n\n                for (memberIdx = 0; memberIdx < membersLength; memberIdx++) {\n                  maxcolSpan = this[members[memberIdx].name];\n                  cell = row.colSpan[\"dim\" + memberIdx];\n\n                  if (cell && cell.colSpan < maxcolSpan) {\n                    cell.attr.colSpan = maxcolSpan - cell.colSpan + 1;\n                  }\n                }\n              }\n\n              row = map[firstMemberName];\n              allRow = map[firstMemberName + \"all\"];\n\n              if (row) {\n                row.children[0].attr.className = \"k-first\";\n              }\n\n              if (allRow) {\n                allRow.children[0].attr.className += \" k-first\";\n              }\n            },\n            _row: function (children) {\n              var row = element(\"tr\", null, children);\n              row.rowSpan = 1;\n              row.colSpan = {};\n              this.rows.push(row);\n              return row;\n            },\n            _content: function (member, tuple) {\n              return htmlNode(this.template({\n                member: member,\n                tuple: tuple\n              }));\n            },\n            _cell: function (className, children, member) {\n              var cell = element(\"td\", {\n                className: className\n              }, children);\n              cell.value = member.caption || member.name;\n              return cell;\n            },\n            _buildRows: function (tuple, memberIdx) {\n              var map = this.map;\n              var path;\n              var members = tuple.members;\n              var member = members[memberIdx];\n              var nextMember = members[memberIdx + 1];\n              var children = member.children;\n              var childrenLength = children.length;\n              var levelNum = Number(member.levelNum);\n              var rootName = this.rootTuple.members[memberIdx].name;\n              var tuplePath = buildPath(tuple, memberIdx - 1).join(\"\");\n              var rootLevelNum = Number(this.rootTuple.members[memberIdx].levelNum);\n              var parentName = tuplePath + (rootLevelNum === levelNum ? \"\" : member.parentName || \"\");\n              var row = map[parentName + \"all\"] || map[parentName];\n              var colSpan = levelNum + 1;\n              var cell, allCell;\n              var childRow, allRow;\n              var metadata;\n              var className;\n              var cellChildren = [];\n              var expandIconAttr;\n              var idx;\n\n              if (!row || row.hasChild) {\n                row = this._row();\n              } else {\n                row.hasChild = true;\n              }\n\n              if (member.measure) {\n                className = row.allCell ? \"k-grid-footer\" : \"\";\n                row.children.push(this._cell(className, [this._content(children[0], tuple)], children[0]));\n                row.rowSpan = childrenLength;\n\n                for (idx = 1; idx < childrenLength; idx++) {\n                  this._row([this._cell(className, [this._content(children[idx], tuple)], children[idx])]);\n                }\n\n                return row;\n              }\n\n              map[tuplePath + member.name] = row;\n              path = kendo.stringify(buildPath(tuple, memberIdx));\n              metadata = this.metadata[path];\n\n              if (!metadata) {\n                this.metadata[path] = metadata = createMetadata(levelNum, memberIdx);\n                metadata.rootLevelNum = rootLevelNum;\n              }\n\n              this._indexes.push({\n                path: path,\n                tuple: tuple\n              });\n\n              if (member.hasChildren) {\n                if (metadata.expanded === false) {\n                  childrenLength = 0;\n                  metadata.children = 0;\n                }\n\n                expandIconAttr = {\n                  className: \"k-icon \" + (childrenLength ? STATE_EXPANDED : STATE_COLLAPSED)\n                };\n                expandIconAttr[kendo.attr(\"path\")] = path;\n                cellChildren.push(element(\"span\", expandIconAttr));\n              }\n\n              cellChildren.push(this._content(member, tuple));\n              className = row.allCell && !childrenLength ? \"k-grid-footer\" : \"\";\n              cell = this._cell(className, cellChildren, member);\n              cell.colSpan = colSpan;\n              row.children.push(cell);\n              row.colSpan[\"dim\" + memberIdx] = cell;\n\n              if (!this[rootName] || this[rootName] < colSpan) {\n                this[rootName] = colSpan;\n              }\n\n              if (childrenLength) {\n                row.allCell = false;\n                row.hasChild = false;\n\n                for (idx = 0; idx < childrenLength; idx++) {\n                  childRow = this._buildRows(children[idx], memberIdx);\n\n                  if (row !== childRow) {\n                    row.rowSpan += childRow.rowSpan;\n                  }\n                }\n\n                if (row.rowSpan > 1) {\n                  cell.attr.rowSpan = row.rowSpan;\n                }\n\n                metadata.children = row.rowSpan;\n                allCell = this._cell(\"k-grid-footer\", [this._content(member, tuple)], member);\n                allCell.colSpan = colSpan;\n                allRow = this._row([allCell]);\n                allRow.colSpan[\"dim\" + memberIdx] = allCell;\n                allRow.allCell = true;\n                map[tuplePath + member.name + \"all\"] = allRow;\n\n                if (nextMember) {\n                  childRow = this._buildRows(tuple, memberIdx + 1);\n                  allCell.attr.rowSpan = childRow.rowSpan;\n                }\n\n                row.rowSpan += allRow.rowSpan;\n                metadata.members = allRow.rowSpan;\n              } else if (nextMember) {\n                row.hasChild = false;\n\n                this._buildRows(tuple, memberIdx + 1);\n\n                (allCell || cell).attr.rowSpan = row.rowSpan;\n                metadata.members = row.rowSpan;\n              }\n\n              if (metadata.maxChildren < metadata.children) {\n                metadata.maxChildren = metadata.children;\n              }\n\n              if (metadata.maxMembers < metadata.members) {\n                metadata.maxMembers = metadata.members;\n              }\n\n              return row;\n            }\n          });\n          var ContentBuilder = Class.extend({\n            init: function () {\n              this.columnAxis = {};\n              this.rowAxis = {};\n            },\n            build: function (data, columnAxis, rowAxis) {\n              var index = columnAxis.indexes[0];\n              var metadata = columnAxis.metadata[index ? index.path : undefined];\n              this.columnAxis = columnAxis;\n              this.rowAxis = rowAxis;\n              this.data = data;\n              this.rowLength = metadata ? metadata.maxChildren + metadata.maxMembers : columnAxis.measures.length || 1;\n\n              if (!this.rowLength) {\n                this.rowLength = 1;\n              }\n\n              var tbody = this._tbody();\n\n              var colgroup = this._colGroup();\n\n              return [element(\"table\", null, [colgroup, tbody])];\n            },\n            _colGroup: function () {\n              var length = this.columnAxis.measures.length || 1;\n              var children = [];\n              var idx = 0;\n\n              if (this.rows[0]) {\n                length = this.rows[0].children.length;\n              }\n\n              for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n              }\n\n              return element(\"colgroup\", null, children);\n            },\n            _tbody: function () {\n              this.rows = [];\n\n              if (this.data[0]) {\n                this.columnIndexes = this._indexes(this.columnAxis, this.rowLength);\n                this.rowIndexes = this._indexes(this.rowAxis, Math.ceil(this.data.length / this.rowLength));\n\n                this._buildRows();\n              } else {\n                this.rows.push(element(\"tr\", null, [element(\"td\", null, [htmlNode(\"&nbsp;\")])]));\n              }\n\n              return element(\"tbody\", null, this.rows);\n            },\n            _indexes: function (axisInfo, total) {\n              var result = [];\n              var axisInfoMember;\n              var indexes = axisInfo.indexes;\n              var metadata = axisInfo.metadata;\n              var measures = axisInfo.measures;\n              var measuresLength = measures.length || 1;\n              var current;\n              var dataIdx = 0;\n              var firstEmpty = 0;\n              var idx = 0;\n              var length = indexes.length;\n              var measureIdx;\n              var index;\n              var children;\n              var skipChildren;\n\n              if (!length) {\n                for (measureIdx = 0; measureIdx < measuresLength; measureIdx++) {\n                  result[measureIdx] = {\n                    index: measureIdx,\n                    measure: measures[measureIdx],\n                    tuple: null\n                  };\n                }\n\n                return result;\n              }\n\n              for (; idx < length; idx++) {\n                axisInfoMember = indexes[idx];\n                current = metadata[axisInfoMember.path];\n                children = current.children + current.members;\n                skipChildren = 0;\n\n                if (children) {\n                  children -= measuresLength;\n                }\n\n                if (current.expanded === false && current.children !== current.maxChildren) {\n                  skipChildren = current.maxChildren;\n                }\n\n                if (current.parentMember && current.levelNum === current.rootLevelNum) {\n                  children = -1;\n                }\n\n                if (children > -1) {\n                  for (measureIdx = 0; measureIdx < measuresLength; measureIdx++) {\n                    index = children + measureIdx;\n\n                    if (!current.children) {\n                      index += firstEmpty;\n                    }\n\n                    result[children + firstEmpty + measureIdx] = {\n                      children: children,\n                      index: dataIdx,\n                      measure: measures[measureIdx],\n                      tuple: axisInfoMember.tuple\n                    };\n                    dataIdx += 1;\n                  }\n\n                  while (result[firstEmpty] !== undefined) {\n                    firstEmpty += 1;\n                  }\n                }\n\n                if (firstEmpty === total) {\n                  break;\n                }\n\n                dataIdx += skipChildren;\n              }\n\n              return result;\n            },\n            _buildRows: function () {\n              var rowIndexes = this.rowIndexes;\n              var length = rowIndexes.length;\n              var idx = 0;\n\n              for (; idx < length; idx++) {\n                var rowIndex = rowIndexes[idx];\n\n                if (rowIndex) {\n                  this.rows.push(this._buildRow(rowIndex));\n                }\n              }\n            },\n            _buildRow: function (rowInfo) {\n              var startIdx = rowInfo.index * this.rowLength;\n              var columnIndexes = this.columnIndexes;\n              var length = columnIndexes.length;\n              var columnInfo;\n              var cells = [];\n              var idx = 0;\n              var templateInfo;\n              var cell, cellContent;\n              var attr, dataItem, measure;\n\n              for (; idx < length; idx++) {\n                columnInfo = columnIndexes[idx];\n\n                if (columnInfo === undefined) {\n                  continue;\n                }\n\n                attr = {};\n\n                if (columnInfo.children) {\n                  attr.className = \"k-alt\";\n                }\n\n                cellContent = \"\";\n                dataItem = this.data[startIdx + columnInfo.index];\n                measure = columnInfo.measure || rowInfo.measure;\n                templateInfo = {\n                  columnTuple: columnInfo.tuple,\n                  rowTuple: rowInfo.tuple,\n                  measure: measure,\n                  dataItem: dataItem\n                };\n\n                if (dataItem.value !== \"\" && measure && measure.type) {\n                  if (measure.type === \"status\") {\n                    cellContent = this.kpiStatusTemplate(templateInfo);\n                  } else if (measure.type === \"trend\") {\n                    cellContent = this.kpiTrendTemplate(templateInfo);\n                  }\n                }\n\n                if (!cellContent) {\n                  cellContent = this.dataTemplate(templateInfo);\n                }\n\n                cell = element(\"td\", attr, [htmlNode(cellContent)]);\n                cell.value = dataItem.value;\n                cells.push(cell);\n              }\n\n              attr = {};\n\n              if (rowInfo.children) {\n                attr.className = \"k-grid-footer\";\n              }\n\n              return element(\"tr\", attr, cells);\n            }\n          });\n          ui.plugin(PivotGrid);\n          kendo.PivotExcelExporter = kendo.Class.extend({\n            init: function (options) {\n              this.options = options;\n              this.widget = options.widget;\n              this.dataSource = this.widget.dataSource;\n            },\n            _columns: function () {\n              var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n              var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n              var columnHeaderLength = columnHeaderTable.children[0].children.length;\n              var rowHeaderLength = rowHeaderTable.children[0].children.length;\n              var width = this.widget.options.columnWidth;\n              var result = [];\n              var idx;\n\n              if (rowHeaderLength && this.dataSource.data()[0]) {\n                for (idx = 0; idx < rowHeaderLength; idx++) {\n                  result.push({\n                    autoWidth: true\n                  });\n                }\n              }\n\n              for (idx = 0; idx < columnHeaderLength; idx++) {\n                result.push({\n                  autoWidth: false,\n                  width: width\n                });\n              }\n\n              return result;\n            },\n            _cells: function (rows, type, callback) {\n              var result = [];\n              var i = 0;\n              var length = rows.length;\n              var cellsLength;\n              var row, cells;\n              var j, cell;\n\n              for (; i < length; i++) {\n                row = [];\n                cells = rows[i].children;\n                cellsLength = cells.length;\n\n                for (j = 0; j < cellsLength; j++) {\n                  cell = cells[j];\n                  row.push({\n                    background: \"#7a7a7a\",\n                    color: \"#fff\",\n                    value: cell.value,\n                    colSpan: cell.attr.colSpan || 1,\n                    rowSpan: cell.attr.rowSpan || 1\n                  });\n                }\n\n                if (callback) {\n                  callback(row, i);\n                }\n\n                result.push({\n                  cells: row,\n                  type: type\n                });\n              }\n\n              return result;\n            },\n            _rows: function () {\n              var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n              var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n              var columnHeaderLength = columnHeaderTable.children[0].children.length;\n              var rowHeaderLength = rowHeaderTable.children[0].children.length;\n              var columnHeaderRows = columnHeaderTable.children[1].children;\n              var rowHeaderRows = rowHeaderTable.children[1].children;\n              var contentRows = this.widget.contentTree.children[0].children[1].children;\n\n              var columnRows = this._cells(columnHeaderRows, \"header\");\n\n              if (rowHeaderLength) {\n                columnRows[0].cells.splice(0, 0, {\n                  background: \"#7a7a7a\",\n                  color: \"#fff\",\n                  value: \"\",\n                  colSpan: rowHeaderLength,\n                  rowSpan: columnHeaderRows.length\n                });\n              }\n\n              var dataCallback = function (row, index) {\n                var j = 0;\n                var cell, value;\n                var cells = contentRows[index].children;\n\n                for (; j < columnHeaderLength; j++) {\n                  cell = cells[j];\n                  value = Number(cell.value);\n\n                  if (isNaN(value)) {\n                    value = cell.value;\n                  }\n\n                  row.push({\n                    background: \"#dfdfdf\",\n                    color: \"#333\",\n                    value: value,\n                    colSpan: 1,\n                    rowSpan: 1\n                  });\n                }\n              };\n\n              var rowRows = this._cells(rowHeaderRows, \"data\", dataCallback);\n\n              return columnRows.concat(rowRows);\n            },\n            _freezePane: function () {\n              var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n              var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n              var rowHeaderLength = rowHeaderTable.children[0].children.length;\n              var columnHeaderRows = columnHeaderTable.children[1].children;\n              return {\n                colSplit: rowHeaderLength,\n                rowSplit: columnHeaderRows.length\n              };\n            },\n            workbook: function () {\n              var promise,\n                  resolveFn = function () {\n                return {\n                  sheets: [{\n                    columns: this._columns(),\n                    rows: this._rows(),\n                    freezePane: this._freezePane(),\n                    filter: null\n                  }]\n                };\n              };\n\n              if (this.dataSource.view()[0]) {\n                promise = $.Deferred();\n                promise.resolve();\n              } else {\n                promise = this.dataSource.fetch();\n              }\n\n              return promise.then(resolveFn.bind(this));\n            }\n          });\n          var PivotExcelMixin = {\n            extend: function (proto) {\n              proto.events.push(\"excelExport\");\n              proto.options.excel = $.extend(proto.options.excel, this.options);\n              proto.saveAsExcel = this.saveAsExcel;\n            },\n            options: {\n              proxyURL: \"\",\n              filterable: false,\n              fileName: \"Export.xlsx\"\n            },\n            saveAsExcel: function () {\n              var excel = this.options.excel || {};\n              var exporter = new kendo.PivotExcelExporter({\n                widget: this\n              });\n\n              var resolveFn = function (book) {\n                if (!this.trigger(\"excelExport\", {\n                  workbook: book\n                })) {\n                  var workbook = new kendo.ooxml.Workbook(book);\n                  workbook.toDataURLAsync().then(function (dataURI) {\n                    kendo.saveAs({\n                      dataURI: dataURI,\n                      fileName: book.fileName || excel.fileName,\n                      proxyURL: excel.proxyURL,\n                      forceProxy: excel.forceProxy\n                    });\n                  });\n                }\n              };\n\n              exporter.workbook().then(resolveFn.bind(this));\n            }\n          };\n          kendo.PivotExcelMixin = PivotExcelMixin;\n\n          if (kendo.ooxml && kendo.ooxml.Workbook) {\n            PivotExcelMixin.extend(PivotGrid.prototype);\n          }\n\n          if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(PivotGrid.prototype);\n\n            PivotGrid.fn._drawPDF = function () {\n              return this._drawPDFShadow({\n                width: this.wrapper.width()\n              }, {\n                avoidLinks: this.options.pdf.avoidLinks\n              });\n            };\n          }\n\n          if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(PivotGridV2.prototype);\n\n            PivotGridV2.fn._drawPDF = function () {\n              return this._drawPDFShadow({\n                width: this.wrapper.width()\n              }, {\n                avoidLinks: this.options.pdf.avoidLinks\n              });\n            };\n          }\n        })(window.kendo.jQuery);\n\n        return window.kendo;\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    36765:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.data\");\n      /***/\n    },\n\n    /***/\n    70548:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.dom\");\n      /***/\n    },\n\n    /***/\n    3073:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.pivot.common\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(6516);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","__meta__","id","name","category","description","depends","features","$","kendo","window","ui","Class","Comparer","data","Widget","DataSource","outerWidth","_outerWidth","outerHeight","_outerHeight","common","pivotgrid","fetchDiscover","normalizeFilter","Query","normalizeSort","toString","identity","o","map","extend","isFunction","fetchData","createLocalDataState","createDataTree","sumAggregate","averageAggregate","minAggregate","maxAggregate","createDataState","toColumns","toRows","toTree","toData","headersReducer","RESIZE","READ","CHANGE","ERROR","REQUESTSTART","PROGRESS","REQUESTEND","MEASURES","STATERESET","AUTO","DIV","NS","ROW_TOTAL_KEY","DATABINDING","DATABOUND","EXPANDMEMBER","HEADERTEMPLATE","COLLAPSEMEMBER","STATE_EXPANDED","STATE_COLLAPSED","HEADER_TEMPLATE","KPISTATUS_TEMPLATE","KPITREND_TEMPLATE","DATACELL_TEMPLATE","LAYOUT_TABLE","AXIS_ROWS","AXIS_COLUMNS","normalizeMeasures","measure","descriptor","descriptors","call","d","type","normalizeMembers","member","expand","slice","normalizeName","indexOf","accumulateMembers","accumulator","rootTuple","tuple","level","idx","length","children","members","stringify","buildPath","descriptorsForAxes","tuples","result","k","push","JSON","parse","addMissingPathMembers","axis","firstTuple","tupleMembers","found","j","getName","hierarchy","tupleToDescriptors","descriptorsForMembers","measures","tupletoSearch","findExistingTuple","createAggregateGetter","m","measureGetter","getter","field","aggregatorContext","state","aggregate","dataItem","isNumber","val","isNaN","isDate","getTime","getScollWidth","scrollbar","div","document","createElement","style","cssText","innerHTML","body","appendChild","offsetWidth","scrollWidth","removeChild","flattenSortDescriptors","i","dir","split","pop","createLocalMeasure","key","format","formatFunc","value","measureMap","valueFunc","item","bind","caption","uniqueName","functions","sum","count","average","max","min","PivotCubeBuilder","init","options","dimensions","_normalizeDescriptors","keyField","fields","_rootTuples","rootNames","measureAggregators","aggregatorsLength","dimensionsSchema","root","parts","measureIdx","rootNamesLength","keys","levelName","levelNum","hasChildren","parentName","_sortMap","sortDescriptors","sortedMaps","sortTree","flattenTree","mapItem","directParentName","fillSortTree","sortItemsTree","create","flatColumns","index","_expandedTuples","expanded","current","currentKeys","accumulatorKeys","memberInfo","expandedNames","isEmptyObject","_findExpandedMember","uniquePath","names","expandedIdx","join","_asTuples","rootInfo","expandedInfo","concat","_measuresInfo","rowAxis","aggregateNames","resultFuncs","formats","_toDataArray","measuresInfo","rowKeys","columnKeys","aggregates","n","row","column","columnKey","rowMeasureNamesLength","rowMeasureNames","columnMeasureNames","rowLength","columnLength","items","_addData","resultFunc","fmtValue","ordinal","_matchDescriptors","getters","parentField","expectedValue","_calculateAggregate","totalItem","aggregator","_processColumns","columns","rowTotal","updateColumn","path","columnIndex","childrenMap","_measureAggregators","measureDescriptors","aggregators","defaultAggregate","toLowerCase","Error","_buildGetters","_parseDescriptors","parsedDescriptors","parseDescriptors","getRootNames","mapNames","_filter","filter","expr","filters","operator","_normalizeFilter","logic","process","measuresRowAxis","measuresAxis","columnDescriptors","rowDescriptors","rows","aggregatedData","rowValue","columnGetters","rowGetters","processed","expandedColumns","expandedRows","hasExpandedRows","rowIdx","rowDescriptor","rowName","columnsInfo","rowsInfo","sort","axes","PivotTransport","transport","discover","read","update","destroy","success","catalog","connection","cube","PivotDataSourceV2","schema","cubes","catalogs","hierarchies","levels","cubeSchema","_cubeSchema","fn","transportOptions","_online","XmlaTransportV2","_columns","_rows","_measuresAxis","values","_measures","serverSorting","serverPaging","serverFiltering","serverGrouping","serverAggregates","normalizeAxis","_mergeState","fetch","callback","that","_data","_query","done","_createSettings","settings","dimensionsSettings","displayValueFunc","sortValueFunc","displayValue","sortValue","defaultHierarchy","restoreMeasure","memberType","_pristineData","distinct","levelUniqueName","childrenCardinality","isPrevented","trigger","params","_params","deferred","Deferred","originalData","reader","columnSettings","columnAxes","rowSettings","rowAxes","dataTree","dataField","columnsData","stateArgs","reverse","_saveState","resolve","newDataState","response","_preventRefresh","error","err","promise","measureAxes","schemaMeasures","command","restrictions","catalogName","cubeName","schemaKPIs","schemaDimensions","schemaHierarchies","dimensionName","dimensionUniqueName","schemaLevels","hierarchyName","hierarchyUniqueName","schemaCubes","schemaCatalogs","schemaMembers","_columnTuples","_rowTuples","_view","PivotDataSource","cubeBuilder","_skipNormalize","_axes","memberUniqueName","schemaData","dataGetter","_rawData","treeOp","_clearAxesData","query","rowsAxisDescriptors","columnsAxisDescriptors","_expandPath","origin","other","memberToExpand","_lastExpanded","memberName","_descriptorsForAxis","_process","e","page","pageSize","group","_updateLocalData","expandColumn","expandRow","_processResult","processedData","_requestData","columnIndexes","rowIndexes","resultAxis","axisToSkip","hasColumnTuples","_rowMeasures","_normalizeTuples","_columnMeasures","_normalizeData","columnsLength","rowsLength","validateAxis","adjustDataByColumn","membersCount","adjustDataByRow","_mergeAxes","_readData","newData","_createTuple","buildRoot","Number","_hasRoot","target","source","isRoot","sourceAxes","columnMeasures","rowMeasures","startIndex","oldRowsLength","newRowsLength","oldColumnsLength","newColumnsLength","parseSource","prepareDataOnColumns","mergedColumns","mergeTuples","prepareDataOnRows","mergedRows","findDataIndex","parsedRoot","memberIndex","offset","_mergeColumnData","_mergeRowData","toJSON","rowIndex","drop","toAdd","Math","splice","dataIndex","_observe","_ranges","_addRange","_total","_pristineTotal","roots","indexes","memberIdx","last","tupleName","_addMissingDataItems","metadata","parseInt","addEmptyDataItem","_normalizeOrdinals","lastOrdinal","dataIdx","converter","_handleCustomErrors","status","reject","kpis","sortFunction","currentItem","newAxis","sourceTuples","targetTuples","columnIdx","targetColumnsLength","measuresLength","tupleIndex","collection","queue","shift","counter","targetMembers","sourceMembers","equalTuples","first","second","equal","toFind","membersLength","addMembers","len","findParentMember","parentPath","parentMember","measurePosition","normalizeTupleMeasures","measureIndex","indices","buildDataIndices","targetIndex","sourceIndex","calcIndex","spliceIndex","dataSource","baseHierarchyPath","expandMemberDescriptor","sortDescriptor","sortDescriptorForMember","crossJoin","r","crossJoinCommand","tmp","measureNames","rootName","rootLength","child","l","serializeMembers","crossJoinCommands","filterFunctionFormats","contains","doesnotcontain","startswith","endswith","eq","neq","serializeExpression","expression","serializeFilters","serializeOptions","parentTagName","capitalize","replace","toUpperCase","xmlaDiscoverCommands","convertersMap","properties","Catalog","XmlaTransport","RemoteTransport","originalOptions","url","setup","dataType","contentType","parameterMap","ajax","fetchOptions","noop","then","catch","asArray","object","translateAxis","captionGetter","unameGetter","levelNameGetter","levelNumGetter","childrenGetter","hierarchyGetter","parentNameGetter","Member","schemaDataReaderMap","groupName","displayFolder","defaultFormat","goal","trend","statusGraphic","trendGraphic","defaultMember","orderingProperty","xmlaReaderMethods","XmlaDataReader","XmlDataReader","_extend","methodName","option","xml","errors","fault","faultstring","faultcode","cells","ordinalGetter","valueGetter","fmtValueGetter","_mapSchema","obj","transports","xmla","readers","sortExpr","expressions","removeExpr","PivotSettingTarget","element","addClass","_refreshHandler","refresh","template","actions","enabled","ns","emptyTemplate","_sortable","on","action","closest","attr","hasClass","remove","sortable","sortDirection","currentTarget","find","filterable","fieldMenu","PivotFieldMenu","messages","setting","empty","setDataSource","unbind","kendoSortable","connectWith","hint","cursor","start","change","add","move","newIndex","_isKPI","validate","isMeasure","Array","isArray","sortExpressions","_sort","allowUnsort","skipExpr","html","sortIcon","_sortIcon","off","icon","PivotSettingTargetV2","parent","text","PivotFieldMenuV2","events","_applyState","_sortState","_stateFilter","_savedState","_cancelChanges","deepExtend","_initialState","_redraw","_state","newState","modifyInit","focus","blur","_savedFilter","_emptyState","enable","removeClass","_targetsHTML","menuenabled","PivotConfiguratorButton","_element","_attachEvents","configurator","setOptions","toggle","pivotEl","pivot","toggleClass","getKendoPivotGridV2","_setContentWidth","_updateDimensions","PivotContainer","_addClasses","configuratorPosition","className","PivotGridV2","_dataSource","_bindConfigurator","_wrapper","_columnHeadersWrapper","_rowHeadersWrapper","_contentWrapper","wrapper","append","_columnBuilder","ColumnRowBuilder","columnHeaderTemplate","_rowBuilder","rowHeaderTemplate","_contentBuilder","ContentBuilderV2","dataCellTemplate","_scrollable","button","isRow","paths","eventName","reducerPayLoad","payload","tree","getTree","currentAxes","newHeaders","autoBind","notify","height","columnWidth","_windowResizeHandler","_progressHandler","_errorHandler","_requestStart","_error","_resize","setProperty","columnsHeader","rowsHeader","scroll","scrollLeft","scrollTop","_wheelScroll","ctrlKey","delta","wheelDeltaY","preventDefault","one","css","_progress","progress","offsetHeight","contentTable","columnTable","calculatedWidth","minWidth","ceil","width","kendoPivotConfiguratorV2","cellInfoByElement","cellInfo","contentBuilder","columnsCount","rowsCount","hash","columnTuple","rowTuple","setTuples","build","setRowColumnInfo","columnHeaderLeafs","getHeaderLeafs","rowHeaderLeafs","columnHeaderBreadth","getBreadth","rowHeaderDepth","plugin","PivotGrid","columnBuilder","rowBuilder","_createLayout","ColumnBuilder","RowBuilder","ContentBuilder","_templates","builder","eventArgs","parseJSON","is","request","childrenLoaded","maxChildren","reorderable","kpiStatusTemplate","kpiTrendTemplate","measureFields","columnFields","rowFields","columnTemplate","rowTemplate","dataTemplate","useWithBlock","kendoPivotConfigurator","columnInfo","rowInfo","view","measuresTarget","rowsTarget","columnsTarget","clearTimeout","_headerReflowTimeout","_stateResetHandler","_stateReset","reset","_measureFields","_createSettingTarget","icons","_initSettingTargets","layoutTable","leftContainer","rightContainer","gridWrapper","wrap","support","content","columnsHeaderTree","dom","Tree","rowsHeaderTree","contentTree","firstChild","_setSectionsWidth","_setSectionsHeight","_setContentHeight","_columnHeaderReflow","browser","mozilla","setTimeout","leftColumn","measureFieldsHeight","columnFieldsHeight","rowFieldsHeight","innerHeight","columnsHeight","padding","firstRowHeight","secondRowHeight","_resetColspan","skipScrollbar","clientHeight","cell","_colspan","_layoutTimeout","_axisMeasures","hasMeasure","columnAxis","render","_indexes","touchScroller","contentResized","movable","sender","x","y","htmlNode","createMetadata","maxMembers","addColElements","table","addRowElements","addColumCell","rowEl","rowItem","cellEl","total","headerTemplate","columnHeaderRows","rowspan","rowSpan","colspan","colSpan","iconClass","expandable","headerClass","treeData","headerRows","headerLeafs","breadth","rowHeaderBreadth","_tree","_breadth","_headerLeafs","tbody","_tbody","colgroup","_colGroup","_rowLength","_buildRows","_normalize","cellsLength","cellIdx","tupleAll","_rowIndex","_row","rowKey","parentRow","collapsed","notFirst","measureRow","_cell","_content","nextMember","childRow","childrenLength","allCell","cellAttr","cellChildren","memberCollapsed","rootLevelNum","firstMemberName","maxcolSpan","allRow","tuplePath","expandIconAttr","hasChild","axisInfo","axisInfoMember","firstEmpty","skipChildren","_buildRow","startIdx","templateInfo","cellContent","PivotExcelExporter","widget","columnHeaderTable","rowHeaderTable","columnHeaderLength","rowHeaderLength","autoWidth","_cells","background","color","rowHeaderRows","contentRows","columnRows","dataCallback","rowRows","_freezePane","colSplit","rowSplit","workbook","resolveFn","sheets","freezePane","PivotExcelMixin","proto","excel","saveAsExcel","proxyURL","fileName","exporter","book","ooxml","Workbook","toDataURLAsync","dataURI","saveAs","forceProxy","prototype","PDFMixin","_drawPDF","_drawPDFShadow","avoidLinks","pdf","jQuery","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/client/app-router/node_modules/@progress/kendo-ui/js/kendo.pivotgrid.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 6516:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(3073), __webpack_require__(70548), __webpack_require__(36765) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\nvar __meta__ = {\n    id: \"pivotgrid\",\n    name: \"PivotGrid\",\n    category: \"web\",\n    description: \"The PivotGrid widget is a data summarization tool.\",\n    depends: [ \"dom\", \"data\", \"data.xml\", \"sortable\", \"pivot.common\" ],\n    features: [{\n        id: \"pivotgrid-configurator\",\n        name: \"Configurator\",\n        description: \"The PivotConfigurator widget allows the user to select data slices displayed in PivotGrid\",\n        depends: [ \"pivot.configurator\" ]\n    }, {\n        id: \"pivotgrid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for filtering\",\n        depends: [ \"pivot.fieldmenu\" ]\n    }, {\n        id: \"pivotgrid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export pivot grid data as Excel spreadsheet\",\n        depends: [ \"ooxml\" ]\n    }, {\n        id: \"pivotgrid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export pivot grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    }, {\n        id: \"mobile-scroller\",\n        name: \"Mobile scroller\",\n        description: \"Support for kinetic scrolling in mobile device\",\n        depends: [ \"mobile.scroller\" ]\n    }]\n};\n\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Class = kendo.Class,\n        Comparer = kendo.data.Comparer,\n        Widget = ui.Widget,\n        DataSource = kendo.data.DataSource,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        common = window.kendo.pivotgrid.common,\n        fetchDiscover = common.fetchDiscover,\n        normalizeFilter = kendo.data.Query.normalizeFilter,\n        normalizeSort = kendo.data.Query.normalizeSort,\n        toString = {}.toString,\n        identity = function(o) { return o; },\n        map = $.map,\n        extend = $.extend,\n        isFunction = kendo.isFunction,\n        fetchData = common.fetchData,\n        createLocalDataState = common.createLocalDataState,\n        createDataTree = common.createDataTree,\n        sumAggregate = common.sumAggregate,\n        averageAggregate = common.averageAggregate,\n        minAggregate = common.minAggregate,\n        maxAggregate = common.maxAggregate,\n        createDataState = common.createDataState,\n        toColumns = common.toColumns,\n        toRows = common.toRows,\n        toTree = common.toTree,\n        toData = common.toData,\n        headersReducer = common.headersReducer,\n        RESIZE = \"resize\",\n        READ = \"read\",\n        CHANGE = \"change\",\n        ERROR = \"error\",\n        REQUESTSTART = \"requestStart\",\n        PROGRESS = \"progress\",\n        REQUESTEND = \"requestEnd\",\n        MEASURES = \"Measures\",\n        STATERESET = \"stateReset\",\n        AUTO = \"auto\",\n        DIV = \"<div></div>\",\n        NS = \".kendoPivotGrid\",\n        ROW_TOTAL_KEY = \"__row_total__\",\n        DATABINDING = \"dataBinding\",\n        DATABOUND = \"dataBound\",\n        EXPANDMEMBER = \"expandMember\",\n        HEADERTEMPLATE = '<th data-key=\"#:key#\" class=\"#:headerClass#\" #if (colspan) {#colspan=\"#:colspan#\"#}# #if (rowspan) {#rowspan=\"#:rowspan#\"#}#>' +\n                                    '#if (expandable) {# <span class=\"k-icon k-i-arrow-chevron-#:iconClass# k-color-inherit\" role=\"presentation\"></span>#}#' +\n                                '</th>',\n        COLLAPSEMEMBER = \"collapseMember\",\n        STATE_EXPANDED = \"k-i-collapse\",\n        STATE_COLLAPSED = \"k-i-expand\",\n        HEADER_TEMPLATE = \"<span>#: data.member.caption || data.member.name #</span>\",\n        KPISTATUS_TEMPLATE = '<span class=\"k-icon k-i-kpi-status-#=data.dataItem.value > 0 ? \\\"open\\\" : data.dataItem.value < 0 ? \\\"deny\\\" : \\\"hold\\\"#\" title=\"#:data.dataItem.value#\"></span>',\n        KPITREND_TEMPLATE = '<span class=\"k-icon k-i-kpi-trend-#=data.dataItem.value > 0 ? \\\"increase\\\" : data.dataItem.value < 0 ? \\\"decrease\\\" : \\\"equal\\\"#\" title=\"#:data.dataItem.value#\"></span>',\n        DATACELL_TEMPLATE = '#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || \"&nbsp;\" : \"&nbsp;\" #',\n        LAYOUT_TABLE = '<table class=\"k-pivot-layout\">' +\n                            '<tr>' +\n                                '<td>' +\n                                    '<div class=\"k-pivot-rowheaders\"></div>' +\n                                '</td>' +\n                                '<td>' +\n                                    '<div class=\"k-pivot-table\"></div>' +\n                                '</td>' +\n                            '</tr>' +\n                        '</table>';\n        var AXIS_ROWS = \"rows\";\n        var AXIS_COLUMNS = \"columns\";\n\n    function normalizeMeasures(measure) {\n        var descriptor = typeof measure === \"string\" ? [{ name: measure }] : measure;\n        var descriptors = toString.call(descriptor) === \"[object Array]\" ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n        return map(descriptors, function(d) {\n            if (typeof d === \"string\") {\n                return { name: d };\n            }\n            return $.extend(true, d, { name: d.name, type: d.type });\n        });\n    }\n\n    function normalizeMembers(member) {\n        var descriptor = typeof member === \"string\" ? [{ name: [member], expand: false }] : member;\n        var descriptors = toString.call(descriptor) === \"[object Array]\" ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n        return map(descriptors, function(d) {\n            if (typeof d === \"string\") {\n                return { name: [d], expand: false };\n            }\n            return { name: (toString.call(d.name) === \"[object Array]\" ? d.name.slice() : [d.name]), expand: d.expand };\n        });\n    }\n\n    function normalizeName(name) {\n        if (name.indexOf(\" \") !== -1) {\n            name = '[\"' + name + '\"]';\n        }\n\n        return name;\n    }\n\n    function accumulateMembers(accumulator, rootTuple, tuple, level) {\n        var idx, length;\n        var children;\n        var member;\n\n        if (!tuple) {\n            tuple = rootTuple;\n        }\n\n        if (!level) {\n            level = 0;\n        }\n\n        member = tuple.members[level];\n\n        if (!member || member.measure) { //return if no member or measure\n            return;\n        }\n\n        children = member.children;\n        length = children.length;\n\n        if (tuple === rootTuple) {\n            accumulator[kendo.stringify([member.name])] = !!length;\n        } else if (length) {\n            accumulator[kendo.stringify(buildPath(tuple, level))] = true;\n        }\n\n        if (length) {\n            for (idx = 0; idx < length; idx++) {\n                accumulateMembers(accumulator, rootTuple, children[idx], level);\n            }\n        }\n\n        accumulateMembers(accumulator, rootTuple, tuple, level + 1);\n    }\n\n    function descriptorsForAxes(tuples) {\n        var result = {};\n\n        if (tuples.length) {\n            accumulateMembers(result, tuples[0]);\n        }\n\n        var descriptors = [];\n        for (var k in result) {\n            descriptors.push({ name: JSON.parse(k), expand: result[k] });\n        }\n\n        return descriptors;\n    }\n\n    function addMissingPathMembers(members, axis) {\n        var tuples = axis.tuples || [];\n        var firstTuple = tuples[0];\n\n        if (firstTuple && members.length < firstTuple.members.length) {\n            var tupleMembers = firstTuple.members;\n\n            for (var idx = 0; idx < tupleMembers.length; idx++) {\n                if (tupleMembers[idx].measure) {\n                    continue;\n                }\n\n                var found = false;\n                for (var j = 0; j < members.length; j++) {\n                    if (getName(members[j]).indexOf(tupleMembers[idx].hierarchy) === 0) {\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    members.push({ name: [tupleMembers[idx].name], expand: false }); //calling normalize here to make name from string to array\n                }\n            }\n        }\n    }\n\n    function tupleToDescriptors(tuple) {\n        var result = [];\n        var members = tuple.members;\n\n        for (var idx = 0; idx < members.length; idx++) {\n            if (members[idx].measure) {\n                continue;\n            }\n\n            //make tuple name an array\n            result.push({ name: [members[idx].name], expand: members[idx].children.length > 0 });\n        }\n\n        return result;\n    }\n\n    function descriptorsForMembers(axis, members, measures) {\n        axis = axis || {};\n\n        addMissingPathMembers(members, axis);\n\n        if (measures.length > 1) {\n            members.push({\n                name: MEASURES,\n                measure: true,\n                children: normalizeMembers(measures)\n            });\n        }\n\n        var tupletoSearch = {\n            members: members\n        };\n\n        if (axis.tuples) {\n            var result = findExistingTuple(axis.tuples, tupletoSearch);\n            if (result.tuple) {\n                members = tupleToDescriptors(result.tuple);\n            }\n        }\n\n        return members;\n    }\n\n    function createAggregateGetter(m) {\n        var measureGetter = kendo.getter(m.field, true);\n        return function(aggregatorContext, state) {\n            return m.aggregate(measureGetter(aggregatorContext.dataItem), state, aggregatorContext);\n        };\n    }\n\n    function isNumber(val) {\n        return typeof val === \"number\" && !isNaN(val);\n    }\n\n    function isDate(val) {\n        return val && val.getTime;\n    }\n\n    function getScollWidth() {\n        var scrollbar = 0;\n        var div;\n        if (document && document.createElement) {\n            div = document.createElement('div');\n\n            div.style.cssText = 'overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block';\n            div.innerHTML = '&nbsp;';\n            document.body.appendChild(div);\n\n            scrollbar = div.offsetWidth - div.scrollWidth;\n\n            document.body.removeChild(div);\n        }\n\n        return scrollbar;\n    }\n\n    function flattenSortDescriptors(descriptors) {\n        var result = [];\n        for (var i = 0; i < descriptors.length; i++) {\n            result.push({\n                dir: descriptors[i].dir,\n                field: descriptors[i].field.split(\".\").pop()\n            });\n        }\n        return result;\n    }\n\n    function createLocalMeasure(field, key, format) {\n        var formatFunc = function(value) { return kendo.format(this.format, value); };\n        var measureMap = {\n            \"Sum\": sumAggregate,\n            \"Average\": averageAggregate,\n            \"Min\": minAggregate,\n            \"Max\": maxAggregate,\n        };\n        var valueFunc = function(item) { return item[this.field]; };\n        var measure = {\n                value: valueFunc.bind({ field: field }),\n                aggregate: measureMap[key],\n                caption: key,\n                uniqueName: key,\n                type: 2,\n                name: [key]\n            };\n        if (format) {\n            measure.aggregate.format = formatFunc.bind({ format: format });\n        }\n\n        return measure;\n    }\n\n\n    var functions = {\n        sum: function(value, state) {\n            var accumulator = state.accumulator;\n\n            if (!isNumber(accumulator)) {\n                accumulator = value;\n            } else if (isNumber(value)) {\n                accumulator += value;\n            }\n\n            return accumulator;\n        },\n        count: function(value, state) {\n            return (state.accumulator || 0) + 1;\n        },\n        average: {\n            aggregate: function(value, state) {\n                var accumulator = state.accumulator;\n\n                if (state.count === undefined) {\n                    state.count = 0;\n                }\n\n                if (!isNumber(accumulator)) {\n                    accumulator = value;\n                } else if (isNumber(value)) {\n                    accumulator += value;\n                }\n\n                if (isNumber(value)) {\n                    state.count++;\n                }\n\n                return accumulator;\n            },\n            result: function(state) {\n                var accumulator = state.accumulator;\n\n                if (isNumber(accumulator)) {\n                    accumulator = accumulator / state.count;\n                }\n\n                return accumulator;\n            }\n        },\n        max: function(value, state) {\n            var accumulator = state.accumulator;\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if (accumulator < value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        },\n        min: function(value, state) {\n            var accumulator = state.accumulator;\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if (accumulator > value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        }\n    };\n\n    var PivotCubeBuilder = Class.extend({\n        init: function(options) {\n            this.options = extend({}, this.options, options);\n            this.dimensions = this._normalizeDescriptors(\"field\", this.options.dimensions);\n            this.measures = this._normalizeDescriptors(\"name\", this.options.measures);\n        },\n\n        _normalizeDescriptors: function(keyField, descriptors) {\n            descriptors = descriptors || {};\n            var fields = {};\n            var field;\n\n            if (toString.call(descriptors) === \"[object Array]\") {\n                for (var idx = 0, length = descriptors.length; idx < length; idx++) {\n                    field = descriptors[idx];\n                    if (typeof field === \"string\") {\n                        fields[field] = {};\n                    } else if (field[keyField]) {\n                        fields[field[keyField]] = field;\n                    }\n                }\n                descriptors = fields;\n            }\n\n            return descriptors;\n        },\n\n        _rootTuples: function(rootNames, measureAggregators) {\n            var aggregatorsLength = measureAggregators.length || 1;\n            var dimensionsSchema = this.dimensions || [];\n            var root, name, parts;\n            var measureIdx = 0;\n            var idx;\n\n            var rootNamesLength = rootNames.length;\n            var result = [];\n            var keys = [];\n\n            if (rootNamesLength || measureAggregators.length) {\n                for (measureIdx = 0; measureIdx < aggregatorsLength; measureIdx++) {\n\n                    root = { members: [] };\n\n                    for (idx = 0; idx < rootNamesLength; idx++) {\n                        name = rootNames[idx];\n                        parts = name.split(\"&\");\n\n                        root.members[root.members.length] = {\n                            children: [],\n                            caption: (dimensionsSchema[name] || {}).caption || \"All\",\n                            name: name,\n                            levelName: name,\n                            levelNum: \"0\",\n                            hasChildren: true,\n                            parentName: parts.length > 1 ? parts[0] : undefined,\n                            hierarchy: name\n                        };\n                    }\n\n                    if (aggregatorsLength > 1) {\n                        root.members[root.members.length] = {\n                            children: [],\n                            caption: (measureAggregators[measureIdx]).caption,\n                            name: measureAggregators[measureIdx].descriptor.name,\n                            levelName: \"MEASURES\",\n                            levelNum: \"0\",\n                            hasChildren: false,\n                            parentName: undefined,\n                            hierarchy: \"MEASURES\"\n                        };\n                    }\n\n                    result[result.length] = root;\n                }\n\n                keys.push(ROW_TOTAL_KEY);\n            }\n\n            return {\n                keys: keys,\n                tuples: result\n            };\n        },\n\n        _sortMap: function(map, sortDescriptors) {\n            var sortedMaps = [];\n            var sortTree = [];\n            var flattenTree = [];\n            var mapItem;\n            var key;\n\n            for (key in map) {\n                if (!map[key].directParentName) {\n                    sortTree.push($.extend({}, { name: key, parentName: map[key].parentName }));\n                }\n            }\n\n            //if there are no root this means that something is expanding\n            //and we should only sort that part of the tree\n            if (!sortTree.length) {\n                for (key in map) {\n                    sortTree.push($.extend({}, { name: key, parentName: map[key].parentName }));\n                }\n            }\n\n            fillSortTree(sortTree, map);\n\n            // fill tree recursive\n            for (var i = 0; i < sortDescriptors.length; i++) {\n                sortItemsTree(sortDescriptors[i].field.split(\".\").pop(), sortTree, Comparer.create({ field: \"name\", dir: sortDescriptors[i].dir }));\n            }\n\n            flattenTree = flatColumns(sortTree);\n\n            //we need to flatten the structure so the tuples can build correctly\n            for (var j = 0; j < flattenTree.length; j++) {\n                mapItem = map[flattenTree[j].name];\n                mapItem.index = j;\n                sortedMaps[j] = mapItem;\n            }\n\n            return sortedMaps;\n        },\n\n        _expandedTuples: function(map, expanded, measureAggregators, sortDescriptors) {\n            var aggregatorsLength = measureAggregators.length || 1;\n            var dimensionsSchema = this.dimensions || [];\n            var measureIdx;\n            var tuple;\n\n            var key;\n            var mapItem;\n            var current;\n            var currentKeys;\n            var accumulator = [];\n            var accumulatorKeys = [];\n            var memberInfo;\n\n            var expandedNames;\n            var parts;\n            var name;\n            var idx;\n\n            if (sortDescriptors && sortDescriptors.length && !$.isEmptyObject(map)) {\n                map = this._sortMap(map, sortDescriptors);\n            }\n\n            for (key in map) {\n                mapItem = map[key];\n                memberInfo = this._findExpandedMember(expanded, mapItem.uniquePath);\n\n                current = accumulator[memberInfo.index] || [];\n                currentKeys = accumulatorKeys[memberInfo.index] || [];\n\n                expandedNames = memberInfo.member.names;\n\n                for (measureIdx = 0; measureIdx < aggregatorsLength; measureIdx++) {\n                    tuple = { members: [] };\n                    for (idx = 0; idx < expandedNames.length; idx++) {\n                        if (idx === memberInfo.member.expandedIdx) {\n                            tuple.members[tuple.members.length] = {\n                                children: [],\n                                caption: mapItem.value,\n                                name: mapItem.name,\n                                hasChildren: false,\n                                levelNum: 1,\n                                levelName: mapItem.parentName + mapItem.name,\n                                parentName: mapItem.parentName,\n                                hierarchy: mapItem.parentName + mapItem.name\n                            };\n\n                            if (measureIdx === 0) {\n                                currentKeys.push(buildPath(tuple, idx).join(\"\"));\n                            }\n                        } else {\n                            name = expandedNames[idx];\n                            parts = name.split(\"&\");\n                            tuple.members[tuple.members.length] = {\n                                children: [],\n                                caption: (dimensionsSchema[name] || {}).caption || \"All\",\n                                name: name,\n                                levelName: name,\n                                levelNum: \"0\",\n                                hasChildren: true,\n                                parentName: parts.length > 1 ? parts[0] : undefined,\n                                hierarchy: name\n                            };\n                        }\n                    }\n\n                    if (aggregatorsLength > 1) {\n                        tuple.members[tuple.members.length] = {\n                            children: [],\n                            caption: measureAggregators[measureIdx].caption,\n                            name: measureAggregators[measureIdx].descriptor.name,\n                            levelName: \"MEASURES\",\n                            levelNum: \"0\",\n                            hasChildren: true,\n                            parentName: undefined,\n                            hierarchy: \"MEASURES\"\n                        };\n                    }\n\n                    current[current.length] = tuple;\n                }\n\n                accumulator[memberInfo.index] = current;\n                accumulatorKeys[memberInfo.index] = currentKeys;\n            }\n\n            return {\n                keys: accumulatorKeys,\n                tuples: accumulator\n            };\n        },\n\n        _findExpandedMember: function(members, parentName) {\n            for (var idx = 0; idx < members.length; idx++) {\n                if (members[idx].uniquePath === parentName) {\n                    return {\n                        member: members[idx],\n                        index: idx\n                    };\n                }\n            }\n        },\n\n        _asTuples: function(map, descriptor, measureAggregators, sortDescriptors) {\n            measureAggregators = measureAggregators || [];\n\n            var rootInfo = this._rootTuples(descriptor.root, measureAggregators);\n            var expandedInfo = this._expandedTuples(map, descriptor.expanded, measureAggregators, sortDescriptors);\n\n            return {\n                keys: [].concat.apply(rootInfo.keys, expandedInfo.keys),\n                tuples: [].concat.apply(rootInfo.tuples, expandedInfo.tuples)\n            };\n        },\n\n        _measuresInfo: function(measures, rowAxis) {\n            var idx = 0;\n            var length = measures && measures.length;\n\n            var aggregateNames = [];\n            var resultFuncs = {};\n            var formats = {};\n\n            var descriptors = (this.measures || {});\n            var measure;\n            var name;\n\n            for (; idx < length; idx++) {\n                name = measures[idx].descriptor.name;\n                measure = descriptors[name] || {};\n\n                aggregateNames.push(name);\n\n                if (measure.result) {\n                    resultFuncs[name] = measure.result;\n                }\n\n                if (measure.format) {\n                    formats[name] = measure.format;\n                }\n            }\n\n            return {\n                names: aggregateNames,\n                formats: formats,\n                resultFuncs: resultFuncs,\n                rowAxis: rowAxis\n            };\n        },\n\n        _toDataArray: function(map, measuresInfo, rowKeys, columnKeys) {\n            var result = [];\n\n            var aggregates;\n            var name, i, j, k, n;\n            var row, column, columnKey;\n\n            var rowMeasureNamesLength = 1;\n            var rowMeasureNames = [];\n            var columnMeasureNames;\n\n            var rowLength = rowKeys.length || 1;\n            var columnLength = columnKeys.length || 1;\n\n            if (measuresInfo.rowAxis) {\n                rowMeasureNames = measuresInfo.names;\n                rowMeasureNamesLength = rowMeasureNames.length;\n            } else {\n                columnMeasureNames = measuresInfo.names;\n            }\n\n            for (i = 0; i < rowLength; i++) {\n                row = map[rowKeys[i] || ROW_TOTAL_KEY];\n\n                for (n = 0; n < rowMeasureNamesLength; n++) {\n                    if (measuresInfo.rowAxis) {\n                        columnMeasureNames = [rowMeasureNames[n]];\n                    }\n\n                    for (j = 0; j < columnLength; j++) {\n                        columnKey = columnKeys[j] || ROW_TOTAL_KEY;\n                        column = row.items[columnKey];\n\n                        if (columnKey === ROW_TOTAL_KEY) {\n                            aggregates = row.aggregates;\n                        } else {\n                            aggregates = column ? column.aggregates : {};\n                        }\n\n                        for (k = 0; k < columnMeasureNames.length; k++) {\n                            name = columnMeasureNames[k];\n                            this._addData(result, aggregates[name], measuresInfo.formats[name], measuresInfo.resultFuncs[name]);\n                        }\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _addData: function(result, value, format, resultFunc) {\n            var fmtValue = \"\";\n            var ordinal;\n\n            if (value) {\n                value = resultFunc ? resultFunc(value) : value.accumulator;\n                fmtValue = format ? kendo.format(format, value) : value;\n            }\n\n            ordinal = result.length;\n\n            result[ordinal] = {\n                ordinal: ordinal,\n                value: value || \"\",\n                fmtValue: fmtValue\n            };\n        },\n\n        _matchDescriptors: function(dataItem, descriptor, getters) {\n            var parts;\n            var parentField;\n            var expectedValue;\n\n            var names = descriptor.names;\n            var idx = descriptor.expandedIdx;\n            var value;\n\n            while (idx > 0) {\n                parts = names[--idx].split(\"&\");\n                if (parts.length > 1) {\n                    parentField = parts[0];\n                    expectedValue = parts[1];\n\n                    value = getters[parentField](dataItem);\n                    value = (value !== undefined && value !== null) ? value.toString() : value;\n\n                    if (value != expectedValue) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        },\n\n        _calculateAggregate: function(measureAggregators, aggregatorContext, totalItem) {\n            var result = {};\n            var state;\n            var name;\n\n            for (var measureIdx = 0; measureIdx < measureAggregators.length; measureIdx++) {\n                name = measureAggregators[measureIdx].descriptor.name;\n                state = totalItem.aggregates[name] || { };\n                state.accumulator = measureAggregators[measureIdx].aggregator(aggregatorContext, state);\n                result[name] = state;\n            }\n\n            return result;\n        },\n\n        _processColumns: function(measureAggregators, descriptors, getters, columns, aggregatorContext, rowTotal, state, updateColumn) {\n            var value;\n            var descriptor;\n            var column;\n            var totalItem;\n            var key, name, parentName, path;\n            var dataItem = aggregatorContext.dataItem;\n            var idx = 0;\n\n            for (; idx < descriptors.length; idx++) {\n                descriptor = descriptors[idx];\n\n                //checks whether the dataItem is relevant to the descriptors\n                if (!this._matchDescriptors(dataItem, descriptor, getters)) {\n                    continue;\n                }\n\n                path = descriptor.names.slice(0, descriptor.expandedIdx).join(\"\");\n                name = descriptor.names[descriptor.expandedIdx];\n\n\n                value = getters[name](dataItem);\n                value = (value !== undefined && value !== null) ? value.toString() : value;\n\n                parentName = name;\n                name = name + \"&\" + value;\n                key = path + name;\n\n                column = columns[key] || {\n                    index: state.columnIndex,\n                    parentName: parentName,\n                    name: name,\n                    directParentName: path.indexOf(\"&\") !== -1 ? path : \"\",\n                    uniquePath: path + parentName,\n                    childrenMap: {},\n                    value: value\n                };\n\n                if (path && columns[path] && !columns[path].childrenMap[path + parentName + \"&\" + value]) {\n                    columns[path].childrenMap[path + parentName + \"&\" + value] = true;\n                }\n\n                totalItem = rowTotal.items[key] || {\n                    aggregates: {}\n                };\n\n                rowTotal.items[key] = {\n                    index: column.index,\n                    aggregates: this._calculateAggregate(measureAggregators, aggregatorContext, totalItem)\n                };\n\n                if (updateColumn) {\n                    if (!columns[key]) {\n                        state.columnIndex++;\n                    }\n                    columns[key] = column;\n                }\n            }\n        },\n\n        _measureAggregators: function(options) {\n            var measureDescriptors = options.measures || [];\n            var measures = this.measures || {};\n            var aggregators = [];\n            var descriptor, measure, idx, length;\n            var defaultAggregate, aggregate;\n\n            if (measureDescriptors.length) {\n                for (idx = 0, length = measureDescriptors.length; idx < length; idx++) {\n                    descriptor = measureDescriptors[idx];\n                    measure = measures[descriptor.name];\n                    defaultAggregate = null;\n\n                    if (measure) {\n                        aggregate = measure.aggregate;\n                        if (typeof aggregate === \"string\") {\n                            defaultAggregate = functions[aggregate.toLowerCase()];\n\n                            if (!defaultAggregate) {\n                                throw new Error(\"There is no such aggregate function\");\n                            }\n\n                            measure.aggregate = defaultAggregate.aggregate || defaultAggregate;\n                            measure.result = defaultAggregate.result;\n                        }\n\n\n                        aggregators.push({\n                            descriptor: descriptor,\n                            caption: measure.caption,\n                            result: measure.result,\n                            aggregator: createAggregateGetter(measure)\n                        });\n                    }\n                }\n            } else {\n                aggregators.push({\n                    descriptor: { name: \"default\" },\n                    caption: \"default\",\n                    aggregator: function() { return 1; }\n                });\n            }\n\n            return aggregators;\n        },\n\n        _buildGetters: function(names) {\n            var result = {};\n            var parts;\n            var name;\n\n            for (var idx = 0; idx < names.length; idx++) {\n                name = names[idx];\n                parts = name.split(\"&\");\n\n                if (parts.length > 1) {\n                    result[parts[0]] = kendo.getter(parts[0], true);\n                } else {\n                    result[name] = kendo.getter(normalizeName(name), true);\n                }\n            }\n\n            return result;\n        },\n\n        _parseDescriptors: function(descriptors) {\n            var parsedDescriptors = parseDescriptors(descriptors);\n            var rootNames = getRootNames(parsedDescriptors.root);\n            var expanded = parsedDescriptors.expanded;\n            var result = [];\n\n            for (var idx = 0; idx < expanded.length; idx++) {\n                result.push(mapNames(expanded[idx].name, rootNames));\n            }\n\n            return {\n                root: rootNames,\n                expanded: result\n            };\n        },\n\n        _filter: function(data, filter) {\n            if (!filter) {\n                return data;\n            }\n\n            var expr;\n            var idx = 0;\n            var filters = filter.filters;\n\n            for (; idx < filters.length; idx++) {\n                expr = filters[idx];\n\n                if (expr.operator === \"in\") {\n                    filters[idx] = this._normalizeFilter(expr);\n                }\n            }\n\n            return new kendo.data.Query(data).filter(filter).data;\n        },\n\n        _normalizeFilter: function(filter) {\n            var value = filter.value.split(\",\");\n            var result = [];\n\n            if (!value.length) {\n                return value;\n            }\n\n            for (var idx = 0; idx < value.length; idx++) {\n                result.push({\n                    field: filter.field,\n                    operator: \"eq\",\n                    value: value[idx]\n                });\n            }\n\n            return {\n                logic: \"or\",\n                filters: result\n            };\n        },\n\n        process: function(data, options) {\n            data = data || [];\n            options = options || {};\n\n            data = this._filter(data, options.filter);\n\n            var measures = options.measures || [];\n\n            var measuresRowAxis = options.measuresAxis === \"rows\";\n\n            var columnDescriptors = options.columns || [];\n            var rowDescriptors = options.rows || [];\n\n            if (!columnDescriptors.length && rowDescriptors.length && (!measures.length || (measures.length && measuresRowAxis))) {\n                columnDescriptors = rowDescriptors;\n                rowDescriptors = [];\n                measuresRowAxis = false;\n            }\n\n            if (!columnDescriptors.length && !rowDescriptors.length) {\n                measuresRowAxis = false;\n            }\n\n            if (!columnDescriptors.length && measures.length) {\n                columnDescriptors = normalizeMembers(options.measures);\n            }\n\n            columnDescriptors = this._parseDescriptors(columnDescriptors);\n            rowDescriptors = this._parseDescriptors(rowDescriptors);\n\n            var aggregatedData = {};\n            var columns = {};\n            var rows = {};\n\n            var rowValue;\n            var state = { columnIndex: 0 };\n\n            var measureAggregators = this._measureAggregators(options);\n\n            var columnGetters = this._buildGetters(columnDescriptors.root);\n            var rowGetters = this._buildGetters(rowDescriptors.root);\n\n            var processed = false;\n\n            var expandedColumns = columnDescriptors.expanded;\n            var expandedRows = rowDescriptors.expanded;\n\n            var dataItem;\n            var aggregatorContext;\n            var hasExpandedRows = expandedRows.length !== 0;\n\n            var rowIdx, rowDescriptor, rowName, rowTotal;\n            var key, path, parentName, value;\n            var columnsInfo, rowsInfo;\n            var length = data.length;\n            var idx = 0;\n\n            if (columnDescriptors.root.length || rowDescriptors.root.length) {\n                processed = true;\n\n                for (idx = 0; idx < length; idx++) {\n                    dataItem = data[idx];\n\n                    aggregatorContext = {\n                        dataItem: dataItem,\n                        index: idx\n                    };\n\n                    rowTotal = aggregatedData[ROW_TOTAL_KEY] || {\n                        items: {},\n                        aggregates: {}\n                    };\n\n                    this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, rowTotal, state, !hasExpandedRows);\n\n                    rowTotal.aggregates = this._calculateAggregate(measureAggregators, aggregatorContext, rowTotal);\n                    aggregatedData[ROW_TOTAL_KEY] = rowTotal;\n\n                    for (rowIdx = 0; rowIdx < expandedRows.length; rowIdx++) {\n                        rowDescriptor = expandedRows[rowIdx];\n\n                        if (!this._matchDescriptors(dataItem, rowDescriptor, rowGetters)) {\n                            this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, { items: {}, aggregates: {} }, state, true);\n                            continue;\n                        }\n\n                        path = rowDescriptor.names.slice(0, rowDescriptor.expandedIdx).join(\"\");\n                        rowName = rowDescriptor.names[rowDescriptor.expandedIdx];\n\n                        parentName = rowName;\n\n                        rowValue = rowGetters[rowName](dataItem);\n                        rowValue = rowValue !== undefined ? rowValue.toString() : rowValue;\n\n                        rowName = rowName + \"&\" + rowValue;\n                        key = path + rowName;\n\n                        rows[key] = {\n                            uniquePath: path + parentName,\n                            parentName: parentName,\n                            name: rowName,\n                            value: rowValue\n                        };\n\n                        value = aggregatedData[key] || {\n                            items: {},\n                            aggregates: {}\n                        };\n\n                        this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, value, state, true);\n\n                        value.aggregates = this._calculateAggregate(measureAggregators, aggregatorContext, value);\n                        aggregatedData[key] = value;\n                    }\n                }\n            }\n\n            if (processed && length) {\n                if (measureAggregators.length > 1 && (!options.columns || !options.columns.length)) {\n                    columnDescriptors = {\n                        root: [],\n                        expanded: []\n                    };\n                }\n\n                columnsInfo = this._asTuples(columns, columnDescriptors, measuresRowAxis ? [] : measureAggregators, options.sort ? options.sort : []);\n                rowsInfo = this._asTuples(rows, rowDescriptors, measuresRowAxis ? measureAggregators : [], options.sort ? options.sort : []);\n\n                columns = columnsInfo.tuples;\n                rows = rowsInfo.tuples;\n\n                aggregatedData = this._toDataArray(aggregatedData, this._measuresInfo(measureAggregators, measuresRowAxis), rowsInfo.keys, columnsInfo.keys);\n            } else {\n                aggregatedData = columns = rows = [];\n            }\n\n            return {\n                axes: {\n                    columns: { tuples: columns },\n                    rows: { tuples: rows }\n                },\n                data: aggregatedData\n            };\n        }\n    });\n\n    var PivotTransport = Class.extend({\n        init: function(options, transport) {\n            this.transport = transport;\n            this.options = transport.options || {};\n\n            if (!this.transport.discover) {\n                if (isFunction(options.discover)) {\n                    this.discover = options.discover;\n                }\n            }\n        },\n        read: function(options) {\n            return this.transport.read(options);\n        },\n        update: function(options) {\n            return this.transport.update(options);\n        },\n        create: function(options) {\n            return this.transport.create(options);\n        },\n        destroy: function(options) {\n            return this.transport.destroy(options);\n        },\n        discover: function(options) {\n            if (this.transport.discover) {\n                return this.transport.discover(options);\n            }\n            options.success({});\n        },\n        catalog: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).catalog;\n\n            }\n\n            var connection = options.connection || {};\n            connection.catalog = val;\n\n            this.options.connection = connection;\n            $.extend(this.transport.options, { connection: connection });\n        },\n        cube: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).cube;\n            }\n\n            var connection = options.connection || {};\n            connection.cube = val;\n\n            this.options.connection = connection;\n            extend(true, this.transport.options, { connection: connection });\n        }\n    });\n\n    var PivotDataSourceV2 = DataSource.extend({\n        init: function(options) {\n\n            var cube = ((options || {}).schema || {}).cube;\n\n            var schema = {\n                axes: identity,\n                cubes: identity,\n                catalogs: identity,\n                measures: identity,\n                dimensions: identity,\n                hierarchies: identity,\n                levels: identity,\n                members: identity\n            };\n\n            if (cube) {\n                this.cubeSchema = $.extend(schema, this._cubeSchema(cube));\n            }\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                //schema: schema\n            }, options));\n\n            var transportOptions = this.options.transport || {};\n            if ((this.options.type || \"xmla\").toLowerCase() === \"xmla\") {\n                this._online = true;\n                this.transport = new XmlaTransportV2(transportOptions);\n            }\n\n            this._columns = normalizeMembers(this.options.columns);\n            this._rows = normalizeMembers(this.options.rows);\n\n            var measures = this.cubeSchema ? this.cubeSchema.measures() : this.options.measures || [];\n\n            if (toString.call(measures) === \"[object Object]\") {\n                this._measuresAxis = measures.axis || \"columns\";\n                measures = measures.values || [];\n            }\n\n            this._measures = normalizeMeasures(measures);\n        },\n\n        options: {\n            serverSorting: true,\n            serverPaging: true,\n            serverFiltering: true,\n            serverGrouping: true,\n            serverAggregates: true\n        },\n\n        axes: function() {\n            return {\n                columns: normalizeAxis(this.columns()),\n                rows: normalizeAxis(this.rows())\n            };\n        },\n\n        catalog: function(val) {\n            if (val === undefined) {\n                return this.transport.catalog();\n            }\n\n            this.transport.catalog(val);\n            this._mergeState({});// clears current state\n            this.read();\n        },\n\n        cube: function(val) {\n            if (val === undefined) {\n                return this.transport.cube();\n            }\n\n            this.transport.cube(val);\n            this._mergeState({});// clears current state\n            this.read();\n        },\n\n        measuresAxis: function() {\n            return this._measuresAxis || \"columns\";\n        },\n\n        fetch: function(callback) {\n            var that = this;\n            if (this._data === undefined || this._data.length === 0) {\n                var fn = function() {\n                    if (isFunction(callback)) {\n                        callback.call(that);\n                    }\n                };\n\n                return this._query().done(fn);\n            }\n        },\n\n        _createSettings: function(axes) {\n            var settings = [];\n            var key;\n            var dimensions = this.cubeSchema.dimensionsSettings();\n            var displayValueFunc = function(item) { return item[this.key]; };\n            var sortValueFunc = function(value) { return value; };\n            for (var i = 0; i < axes.length; i++) {\n                key = axes[i].name[0];\n                settings.push({\n                    key: key,\n                    displayValue: displayValueFunc.bind({ key: key }),\n                    sortValue: sortValueFunc,\n                    caption: (dimensions[key] || {}).caption || key\n                });\n            }\n            return settings;\n        },\n\n        _cubeSchema: function(cube) {\n            return {\n                dimensionsSettings: function() {\n                    return cube.dimensions;\n                },\n                dimensions: function() {\n                    var result = [];\n                    var dimensions = cube.dimensions;\n\n                    for (var key in dimensions) {\n                        result.push({\n                            name: key,\n                            caption: dimensions[key].caption || key,\n                            uniqueName: key,\n                            defaultHierarchy: key,\n                            type: 1\n                        });\n                    }\n\n                    if (cube.measures) {\n                        result.push({\n                            name: MEASURES,\n                            caption: MEASURES,\n                            uniqueName: MEASURES,\n                            type: 2\n                        });\n                    }\n\n                    return result;\n                },\n                restoreMeasure: function(measures, measure) {\n                    for (var i = 0; i < measures.length; i++) {\n                        if (!measures[i].aggregate) {\n                            measures[i].aggregate = measure.aggregate;\n                            measures[i].value = measure.value;\n                            measures[i].caption = measure.caption;\n                            measures[i].uniqueName = measure.uniqueName;\n                            measures[i].type = 2;\n                        }\n                    }\n                },\n                measures: function() {\n                    var result = [];\n                    var measures = cube.measures;\n\n                    for (var key in measures) {\n                        result.push(createLocalMeasure(measures[key].field, key, measures[key].format));\n                    }\n\n                    return result;\n                },\n                memberType: function(name) {\n                    var getter = kendo.getter(normalizeName(name), true);\n                    var data = this.options.data || this._pristineData || [];\n                    if (!data.length) {\n                        return null;\n                    }\n\n                    return typeof getter(data[0]);\n                }.bind(this),\n                members: function(name) {\n                    var data = this.options.data || this._pristineData || [];\n                    var result = [];\n                    var distinct = {};\n                    var getter;\n                    var value;\n                    var idx = 0;\n\n                    if (name.indexOf(\"[(ALL)]\") !== -1) {\n                        return [\n                            {\n                                caption: cube.dimensions[name.split(\".\")[0]].caption || name,\n                                levelUniqueName: name,\n                                name: name,\n                                childrenCardinality: 1,\n                                uniqueName: name\n                            }\n                        ];\n                    }\n\n                    getter = kendo.getter(normalizeName(name), true);\n\n                    for (; idx < data.length; idx++) {\n                        value = getter(data[idx]);\n                        if ((value || value === 0 || value === false) && !distinct[value]) {\n                            distinct[value] = true;\n\n                            result.push({\n                                caption: value + \"\",\n                                name: value + \"\",\n                                childrenCardinality: 0,\n                                uniqueName: value\n                            });\n                        }\n                    }\n\n                    return result;\n                }.bind(this)\n            };\n        },\n\n        read: function(data) {\n            var that = this;\n            var isPrevented = that.trigger(REQUESTSTART, { type: READ });\n            var params = that._params(data);\n            var deferred = $.Deferred();\n            if (!isPrevented) {\n                that.trigger(PROGRESS);\n\n                if (that.options.data) {\n\n                    var originalData = (this.reader.data(this.options.data) || []).slice(0);\n                    if (originalData && !this._pristineData) {\n                        this._pristineData = originalData;\n                    }\n                    var columnSettings = that._createSettings(params.columnAxes);\n                    var rowSettings = that._createSettings(params.rowAxes);\n                    var measures = that.measures();\n                    var dataTree = createDataTree(that.options.data, rowSettings, columnSettings, measures, { dataField: \"aggregate\", columnsData: \"columns\" }, that.filter() || []);\n\n                    var stateArgs = {\n                        dataTree: dataTree,\n                        columnSettings: columnSettings,\n                        rowSettings: rowSettings,\n                        columnAxes: params.columnAxes,\n                        rowAxes: params.rowAxes,\n                        measures: measures.map(function(item) { return item; }).reverse(),\n                        fields: { dataField: \"aggregate\", columnsData: \"columns\" },\n                        sort: flattenSortDescriptors(params.sort || [])\n                    };\n\n                    that._saveState(createLocalDataState(stateArgs));\n                    that.trigger(CHANGE);\n                    deferred.resolve();\n                } else {\n                    that.transport.read({\n                        data: params,\n                        success: function(newDataState) {\n                            that._saveState(newDataState);\n                            that.trigger(REQUESTEND, { response: newDataState, type: READ });\n                            that.trigger(CHANGE);\n                            if (that._preventRefresh) {\n                                that._preventRefresh = false;\n                            }\n                            deferred.resolve();\n                        },\n                        error: function(err) {\n                            that.trigger(ERROR, { error: err });\n                        }\n                    });\n                }\n            }\n            return deferred.promise();\n        },\n\n        _params: function(data) {\n            var that = this;\n            var options = DataSource.fn._params.call(that, data);\n\n            options = extend({\n                columnAxes: JSON.parse(JSON.stringify(that._columns)),\n                rowAxes: JSON.parse(JSON.stringify(that._rows)),\n                measuresAxis: that.measuresAxis(),\n                measureAxes: that._measures\n            }, options);\n\n            if ((this.options.type || \"\").toLowerCase() === \"xmla\") {\n                options.connection = that.options.transport.connection;\n            }\n\n            if (options.filter) {\n                options.filter = normalizeFilter(options.filter);\n                options.filter = (options.filter || {}).filters;\n            }\n\n            if (options.sort) {\n                options.sort = normalizeSort(options.sort);\n            }\n\n            return options;\n        },\n\n        discover: function(options) {\n            var that = this,\n                transport = that.transport;\n\n            if (transport.discover) {\n                return transport.discover(options);\n            }\n        },\n\n        schemaMeasures: function() {\n            var that = this;\n            return that.discover(\n                {\n                    command: \"schemaMeasures\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }, function(response) {\n                    return response;\n                });\n        },\n\n        schemaKPIs: function() {\n            var that = this;\n\n            return that.discover(\n            {\n                command: \"schemaKPIs\",\n                restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube()\n                }\n            }, function(response) {\n                return response;\n            });\n        },\n\n        schemaDimensions: function() {\n            var that = this;\n\n            return that.discover(\n            {\n                command: \"schemaDimensions\",\n                restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube()\n                }\n            }, function(response) {\n                return response;\n            });\n        },\n\n        schemaHierarchies: function(dimensionName) {\n            var that = this;\n\n            return that.discover({\n               command: \"schemaHierarchies\",\n               restrictions: {\n                   catalogName: that.transport.catalog(),\n                   cubeName: that.transport.cube(),\n                   dimensionUniqueName: dimensionName\n               }\n            }, function(response) {\n                return response;\n            });\n        },\n\n        schemaLevels: function(hierarchyName) {\n            var that = this;\n\n            return that.discover({\n                command: \"schemaLevels\",\n                restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube(),\n                    hierarchyUniqueName: hierarchyName\n                }\n            }, function(response) {\n                return response;\n            });\n        },\n\n        schemaCubes: function() {\n            var that = this;\n\n            return that.discover({\n                command: \"schemaCubes\",\n                restrictions: {\n                    catalogName: that.transport.catalog()\n                }\n            }, function(response) {\n                return response;\n            });\n        },\n\n        schemaCatalogs: function() {\n            var that = this;\n\n            return that.discover({\n                command: \"schemaCatalogs\"\n            }, function(response) {\n                return response;\n            });\n        },\n\n        schemaMembers: function(restrictions) {\n            var that = this;\n\n            return that.discover({\n                command: \"schemaMembers\",\n                restrictions: extend({\n                   catalogName: that.transport.catalog(),\n                   cubeName: that.transport.cube()\n                }, restrictions)\n            }, function(response) {\n                return response;\n            });\n        },\n\n        _saveState: function(state) {\n            var that = this;\n\n            that._columnTuples = state.columns;\n            that._rowTuples = state.rows;\n            that._view = that._data = state.data;\n        },\n\n        columns: function(val) {\n            if (val === undefined) {\n                return this._columns;\n            }\n\n            this._columns = normalizeMembers(val);\n            this.read();\n        },\n\n        rows: function(val) {\n            if (val === undefined) {\n                return this._rows;\n            }\n\n            this._rows = normalizeMembers(val);\n\n            this.read();\n        },\n\n        measures: function(val) {\n            if (val === undefined) {\n                return this._measures;\n            }\n\n            this._measures = normalizeMeasures(val);\n\n            this.read();\n        },\n\n        _mergeState: function(options) {\n            options = DataSource.fn._mergeState.call(this, options);\n\n            return options;\n        },\n\n        _query: function(options) {\n            var that = this;\n            var params = extend({}, {\n                sort: that.sort(),\n                measuresAxis: that.measuresAxis(),\n                filter: that.filter()\n            }, options);\n            this._mergeState(params);\n\n            return this.read();\n        },\n    });\n\n    var PivotDataSource = DataSource.extend({\n        init: function(options) {\n            var cube = ((options || {}).schema || {}).cube;\n            var measuresAxis = \"columns\";\n            var measures;\n\n            var schema = {\n                axes: identity,\n                cubes: identity,\n                catalogs: identity,\n                measures: identity,\n                dimensions: identity,\n                hierarchies: identity,\n                levels: identity,\n                members: identity\n            };\n\n            if (cube) {\n                schema = $.extend(schema, this._cubeSchema(cube));\n                this.cubeBuilder = new PivotCubeBuilder(cube);\n            }\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: schema\n            }, options));\n\n            this.transport = new PivotTransport(this.options.transport || {}, this.transport);\n\n            this._columns = normalizeMembers(this.options.columns);\n            this._rows = normalizeMembers(this.options.rows);\n\n            measures = this.options.measures || [];\n\n            if (toString.call(measures) === \"[object Object]\") {\n                measuresAxis = measures.axis || \"columns\";\n                measures = measures.values || [];\n            }\n\n            this._measures = normalizeMeasures(measures);\n            this._measuresAxis = measuresAxis;\n\n            this._skipNormalize = 0;\n            this._axes = {};\n        },\n\n        _cubeSchema: function(cube) {\n            return {\n                dimensions: function() {\n                    var result = [];\n                    var dimensions = cube.dimensions;\n\n                    for (var key in dimensions) {\n                        result.push({\n                            name: key,\n                            caption: dimensions[key].caption || key,\n                            uniqueName: key,\n                            defaultHierarchy: key,\n                            type: 1\n                        });\n                    }\n\n                    if (cube.measures) {\n                        result.push({\n                            name: MEASURES,\n                            caption: MEASURES,\n                            uniqueName: MEASURES,\n                            type: 2\n                        });\n                    }\n\n                    return result;\n                },\n                hierarchies: function() {\n                    return [];\n                },\n                measures: function() {\n                    var result = [];\n                    var measures = cube.measures;\n\n                    for (var key in measures) {\n                        result.push({\n                            name: key,\n                            caption: key,\n                            uniqueName: key,\n                            aggregator: key\n                        });\n                    }\n\n                    return result;\n                },\n                members: function(response, restrictions) {\n                    var name = restrictions.levelUniqueName || restrictions.memberUniqueName;\n                    var schemaData = this.options.schema.data;\n                    var dataGetter = isFunction(schemaData) ? schemaData : kendo.getter(schemaData, true);\n                    var data = (this.options.data && dataGetter(this.options.data)) || this._rawData || [];\n                    var result = [];\n                    var getter;\n                    var value;\n                    var idx = 0;\n                    var distinct = {};\n\n                    if (name) {\n                        name = name.split(\".\")[0];\n                    }\n\n                    if (!restrictions.treeOp) {\n                        result.push({\n                            caption: cube.dimensions[name].caption || name,\n                            childrenCardinality: \"1\",\n                            dimensionUniqueName: name,\n                            hierarchyUniqueName: name,\n                            levelUniqueName: name,\n                            name: name,\n                            uniqueName: name\n                        });\n\n                        return result;\n                    }\n\n                    getter = kendo.getter(normalizeName(name), true);\n\n                    for (; idx < data.length; idx++) {\n                        value = getter(data[idx]);\n                        if ((value || value === 0) && !distinct[value]) {\n                            distinct[value] = true;\n\n                            result.push({\n                                caption: value,\n                                childrenCardinality: \"0\",\n                                dimensionUniqueName: name,\n                                hierarchyUniqueName: name,\n                                levelUniqueName: name,\n                                name: value,\n                                uniqueName: value\n                            });\n                        }\n                    }\n\n                    return result;\n                }.bind(this)\n            };\n        },\n\n        options: {\n            serverSorting: true,\n            serverPaging: true,\n            serverFiltering: true,\n            serverGrouping: true,\n            serverAggregates: true\n        },\n\n        catalog: function(val) {\n            if (val === undefined) {\n                return this.transport.catalog();\n            }\n\n            this.transport.catalog(val);\n            this._mergeState({});// clears current state\n            this._axes = {};\n            this.data([]);\n        },\n\n        cube: function(val) {\n            if (val === undefined) {\n                return this.transport.cube();\n            }\n\n            this.transport.cube(val);\n            this._axes = {};\n            this._mergeState({});// clears current state\n            this.data([]);\n        },\n\n        axes: function() {\n            return this._axes;\n        },\n\n        columns: function(val) {\n            if (val === undefined) {\n                return this._columns;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n\n            this._columns = normalizeMembers(val);\n            this.query({\n                columns: val,\n                rows: this.rowsAxisDescriptors(),\n                measures: this.measures(),\n                sort: this.sort(),\n                filter: this.filter()\n            });\n        },\n\n        rows: function(val) {\n            if (val === undefined) {\n                return this._rows;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n\n            this._rows = normalizeMembers(val);\n\n            this.query({\n                columns: this.columnsAxisDescriptors(),\n                rows: val,\n                measures: this.measures(),\n                sort: this.sort(),\n                filter: this.filter()\n            });\n        },\n\n        measures: function(val) {\n            if (val === undefined) {\n                return this._measures;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n\n            this.query({\n                columns: this.columnsAxisDescriptors(),\n                rows: this.rowsAxisDescriptors(),\n                measures: normalizeMeasures(val),\n                sort: this.sort(),\n                filter: this.filter()\n            });\n        },\n\n        measuresAxis: function() {\n            return this._measuresAxis || \"columns\";\n        },\n\n        _expandPath: function(path, axis) {\n            var origin = axis === \"columns\" ? \"columns\" : \"rows\";\n            var other = axis === \"columns\" ? \"rows\" : \"columns\";\n\n            var members = normalizeMembers(path);\n            var memberToExpand = getName(members[members.length - 1]);\n\n            this._lastExpanded = origin;\n\n            members = descriptorsForMembers(this.axes()[origin], members, this.measures());\n\n            for (var idx = 0; idx < members.length; idx++) {\n                var memberName = getName(members[idx]);\n\n                if (memberName === memberToExpand) {\n                    if (members[idx].expand) {\n                        return;\n                    }\n                    members[idx].expand = true;\n                } else {\n                    members[idx].expand = false;\n                }\n            }\n\n            var descriptors = {};\n            descriptors[origin] = members;\n            descriptors[other] = this._descriptorsForAxis(other);\n\n            this._query(descriptors);\n        },\n\n        _descriptorsForAxis: function(axis) {\n            var axes = this.axes();\n            var descriptors = this[axis]() || [];\n\n            if (axes && axes[axis] && axes[axis].tuples && axes[axis].tuples[0]) {\n                descriptors = descriptorsForAxes(axes[axis].tuples || []);\n            }\n            return descriptors;\n        },\n\n        columnsAxisDescriptors: function() {\n            return this._descriptorsForAxis(\"columns\");\n        },\n\n        rowsAxisDescriptors: function() {\n            return this._descriptorsForAxis(\"rows\");\n        },\n\n        _process: function(data, e) {\n            this._view = data;\n\n            e = e || {};\n            e.items = e.items || this._view;\n\n            this.trigger(CHANGE, e);\n        },\n\n        _query: function(options) {\n            var that = this;\n\n            if (!options) {\n                this._skipNormalize += 1;\n                this._clearAxesData = true;\n            }\n\n            return that.query(extend({}, {\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that.sort(),\n                filter: that.filter(),\n                group: that.group(),\n                aggregate: that.aggregate(),\n                columns: this.columnsAxisDescriptors(),\n                rows: this.rowsAxisDescriptors(),\n                measures: this.measures()\n            }, options));\n        },\n\n        query: function(options) {\n            var state = this._mergeState(options);\n\n            if (this._data.length && this.cubeBuilder) {\n                this._params(state);\n                this._updateLocalData(this._pristineData);\n\n                return $.Deferred().resolve().promise();\n            }\n\n            return this.read(state);\n        },\n\n        _mergeState: function(options) {\n            options = DataSource.fn._mergeState.call(this, options);\n\n            if (options !== undefined) {\n                this._measures = normalizeMeasures(options.measures);\n\n                if (options.columns) {\n                    options.columns = normalizeMembers(options.columns);\n                } else if (!options.columns) {\n                    this._columns = [];\n                }\n\n                if (options.rows) {\n                    options.rows = normalizeMembers(options.rows);\n                } else if (!options.rows) {\n                    this._rows = [];\n                }\n            }\n            return options;\n        },\n\n        filter: function(val) {\n            if (val === undefined) {\n                return this._filter;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n            this._query({ filter: val, page: 1 });\n        },\n\n        expandColumn: function(path) {\n            this._expandPath(path, \"columns\");\n        },\n\n        expandRow: function(path) {\n            this._expandPath(path, \"rows\");\n        },\n\n        success: function(data) {\n            var originalData;\n            if (this.cubeBuilder) {\n                originalData = (this.reader.data(data) || []).slice(0);\n            }\n            DataSource.fn.success.call(this, data);\n            if (originalData) {\n                this._pristineData = originalData;\n            }\n        },\n\n        _processResult: function(data, axes) {\n            if (this.cubeBuilder) {\n                var processedData = this.cubeBuilder.process(data, this._requestData);\n\n                data = processedData.data;\n                axes = processedData.axes;\n            }\n\n            var columnIndexes, rowIndexes;\n            var tuples, resultAxis, measures, axisToSkip;\n            var columnDescriptors = this.columns();\n            var rowDescriptors = this.rows();\n            var hasColumnTuples = axes.columns && axes.columns.tuples;\n\n            if (!columnDescriptors.length && rowDescriptors.length && hasColumnTuples && (this._rowMeasures().length || !this.measures().length)) {\n                axes = {\n                    columns: {},\n                    rows: axes.columns\n                };\n            }\n\n            if (!columnDescriptors.length && !rowDescriptors.length && this.measuresAxis() === \"rows\" && hasColumnTuples) {\n                axes = {\n                    columns: {},\n                    rows: axes.columns\n                };\n            }\n\n            this._axes = {\n                columns: normalizeAxis(this._axes.columns),\n                rows: normalizeAxis(this._axes.rows)\n            };\n\n            axes = {\n                columns: normalizeAxis(axes.columns),\n                rows: normalizeAxis(axes.rows)\n            };\n\n            columnIndexes = this._normalizeTuples(axes.columns.tuples, this._axes.columns.tuples, columnDescriptors, this._columnMeasures());\n            rowIndexes = this._normalizeTuples(axes.rows.tuples, this._axes.rows.tuples, rowDescriptors, this._rowMeasures());\n\n            if (this._skipNormalize > 0) {\n                this._skipNormalize -= 1;\n            }\n\n            if (!this.cubeBuilder) {\n                data = this._normalizeData({\n                    columnsLength: axes.columns.tuples.length,\n                    rowsLength: axes.rows.tuples.length,\n                    columnIndexes: columnIndexes,\n                    rowIndexes: rowIndexes,\n                    data: data\n                });\n            }\n\n            if (this._lastExpanded == \"rows\") {\n                tuples = axes.columns.tuples;\n                measures = this._columnMeasures();\n                resultAxis = validateAxis(axes.columns, this._axes.columns, measures);\n\n                if (resultAxis) {\n                    axisToSkip = \"columns\";\n                    axes.columns = resultAxis;\n                    adjustDataByColumn(tuples, resultAxis.tuples, axes.rows.tuples.length, measures, data);\n                    if (!this.cubeBuilder) {\n                        data = this._normalizeData({\n                            columnsLength: membersCount(axes.columns.tuples, measures),\n                            rowsLength: axes.rows.tuples.length,\n                            data: data\n                        });\n                    }\n                }\n            } else if (this._lastExpanded == \"columns\") {\n                tuples = axes.rows.tuples;\n                measures = this._rowMeasures();\n                resultAxis = validateAxis(axes.rows, this._axes.rows, measures);\n\n                if (resultAxis) {\n                    axisToSkip = \"rows\";\n                    axes.rows = resultAxis;\n                    adjustDataByRow(tuples, resultAxis.tuples, axes.columns.tuples.length, measures, data);\n\n                    if (!this.cubeBuilder) {\n                        data = this._normalizeData({\n                            columnsLength: membersCount(axes.rows.tuples, measures),\n                            rowsLength: axes.columns.tuples.length,\n                            data: data\n                        });\n                    }\n                }\n            }\n\n            this._lastExpanded = null;\n\n            var result = this._mergeAxes(axes, data, axisToSkip);\n            this._axes = result.axes;\n\n            return result.data;\n        },\n\n        _readData: function(data) {\n            var axes = this.reader.axes(data);\n            var newData = this.reader.data(data);\n\n            if (this.cubeBuilder) {\n                this._rawData = newData;\n            }\n\n            return this._processResult(newData, axes);\n        },\n\n        _createTuple: function(tuple, measure, buildRoot) {\n            var members = tuple.members;\n            var length = members.length;\n            var root = { members: [] };\n            var levelName, levelNum;\n            var name, parentName;\n            var hasChildren;\n            var hierarchy;\n            var caption;\n            var member;\n            var idx = 0;\n\n            if (measure) {\n                length -= 1;\n            }\n\n            for (; idx < length; idx++) {\n                member = members[idx];\n                levelNum = Number(member.levelNum);\n\n                name = member.name;\n                parentName = member.parentName;\n                caption = member.caption || name;\n                hasChildren = member.hasChildren;\n                hierarchy = member.hierarchy;\n                levelName = member.levelName;\n\n                if (buildRoot) {\n                    caption = \"All\";\n                    if (levelNum === 0) {\n                        parentName = member.name;\n                    } else {\n                        levelNum -= 1;\n                    }\n\n                    hasChildren = true;\n                    name = hierarchy = levelName = parentName;\n                }\n\n                root.members.push({\n                    name: name,\n                    children: [],\n                    caption: caption,\n                    levelName: levelName,\n                    levelNum: levelNum.toString(),\n                    hasChildren: hasChildren,\n                    hierarchy: hierarchy,\n                    parentName: !buildRoot ? parentName : \"\"\n                });\n            }\n\n            if (measure) {\n                root.members.push({\n                    name: measure.name,\n                    children: []\n                });\n            }\n\n            return root;\n        },\n\n        _hasRoot: function(target, source, descriptors) {\n            if (source.length) {\n                return findExistingTuple(source, target).tuple;\n            }\n\n            var members = target.members;\n            var member;\n            var descriptor;\n\n            var isRoot = true;\n            var levelNum;\n\n            for (var idx = 0, length = members.length; idx < length; idx++) {\n                member = members[idx];\n                levelNum = Number(member.levelNum) || 0;\n                descriptor = descriptors[idx];\n\n                if (!(levelNum === 0 || (descriptor && member.name === getName(descriptor)))) {\n                    isRoot = false;\n                    break;\n                }\n            }\n\n            return isRoot;\n        },\n\n        _mergeAxes: function(sourceAxes, data, axisToSkip) {\n            var columnMeasures = this._columnMeasures();\n            var rowMeasures = this._rowMeasures();\n            var axes = this.axes();\n            var startIndex, tuples;\n\n            var oldRowsLength = membersCount(axes.rows.tuples, rowMeasures);\n            var newRowsLength = sourceAxes.rows.tuples.length;\n\n            var oldColumnsLength = membersCount(axes.columns.tuples, columnMeasures);\n            var newColumnsLength = sourceAxes.columns.tuples.length;\n\n            if (axisToSkip == \"columns\") {\n                newColumnsLength = oldColumnsLength;\n                tuples = sourceAxes.columns.tuples;\n            } else {\n                tuples = parseSource(sourceAxes.columns.tuples, columnMeasures);\n                data = prepareDataOnColumns(tuples, data);\n            }\n\n            var mergedColumns = mergeTuples(axes.columns.tuples, tuples, columnMeasures);\n\n            if (axisToSkip == \"rows\") {\n                newRowsLength = membersCount(sourceAxes.rows.tuples, rowMeasures);\n                tuples = sourceAxes.rows.tuples;\n            } else {\n                tuples = parseSource(sourceAxes.rows.tuples, rowMeasures);\n                data = prepareDataOnRows(tuples, data);\n            }\n            var mergedRows = mergeTuples(axes.rows.tuples, tuples, rowMeasures);\n\n            axes.columns.tuples = mergedColumns.tuples;\n            axes.rows.tuples = mergedRows.tuples;\n\n            if (oldColumnsLength !== membersCount(axes.columns.tuples, columnMeasures)) {\n                //columns are expanded\n                startIndex = mergedColumns.index + findDataIndex(mergedColumns.parsedRoot, mergedColumns.memberIndex, columnMeasures);\n                var offset = oldColumnsLength + newColumnsLength;\n                data = this._mergeColumnData(data, startIndex, newRowsLength, newColumnsLength, offset);\n            } else if (oldRowsLength !== membersCount(axes.rows.tuples, rowMeasures)) {\n                //rows are expanded\n                startIndex = mergedRows.index + findDataIndex(mergedRows.parsedRoot, mergedRows.memberIndex, rowMeasures);\n                data = this._mergeRowData(data, startIndex, newRowsLength, newColumnsLength);\n            }\n\n            if (axes.columns.tuples.length === 0 && axes.rows.tuples.length === 0) {\n                data = [];\n            }\n\n            return {\n                axes: axes,\n                data: data\n            };\n        },\n\n        _mergeColumnData: function(newData, columnIndex, rowsLength, columnsLength, offset) {\n            var data = this.data().toJSON();\n            var rowIndex, index, drop = 0, toAdd;\n            var columnMeasures = Math.max(this._columnMeasures().length, 1);\n\n            rowsLength = Math.max(rowsLength, 1);\n\n            if (data.length > 0) {\n                //if there is already data, drop the first new data item\n                drop = columnMeasures;\n                offset -= columnMeasures;\n            }\n\n            for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n                index = columnIndex + (rowIndex * offset);\n                toAdd = newData.splice(0, columnsLength);\n                toAdd.splice(0, drop);\n                [].splice.apply(data, [index, 0].concat(toAdd));\n            }\n\n            return data;\n        },\n\n        _mergeRowData: function(newData, rowIndex, rowsLength, columnsLength) {\n            var data = this.data().toJSON();\n            var idx, dataIndex, toAdd;\n            var rowMeasures = Math.max(this._rowMeasures().length, 1);\n\n            columnsLength = Math.max(columnsLength, 1);\n            if (data.length > 0) {\n                //if there is already data, drop the first new data item\n                rowsLength -= rowMeasures;\n                newData.splice(0, columnsLength * rowMeasures);\n            }\n\n            for (idx = 0; idx < rowsLength; idx++) {\n                toAdd = newData.splice(0, columnsLength);\n                dataIndex = (rowIndex * columnsLength) + (idx * columnsLength);\n                [].splice.apply(data, [dataIndex, 0].concat(toAdd));\n            }\n\n            return data;\n        },\n\n        _columnMeasures: function() {\n            var measures = this.measures();\n            var columnMeasures = [];\n\n            if (this.measuresAxis() === \"columns\") {\n                if (this.columns().length === 0) {\n                    columnMeasures = measures;\n                } else if (measures.length > 1) {\n                    columnMeasures = measures;\n                }\n            }\n\n            return columnMeasures;\n        },\n\n        _rowMeasures: function() {\n            var measures = this.measures();\n            var rowMeasures = [];\n\n            if (this.measuresAxis() === \"rows\") {\n                if (this.rows().length === 0) {\n                    rowMeasures = measures;\n                } else if (measures.length > 1) {\n                    rowMeasures = measures;\n                }\n            }\n\n            return rowMeasures;\n        },\n\n        _updateLocalData: function(data, state) {\n            if (this.cubeBuilder) {\n                if (state) {\n                    this._requestData = state;\n                }\n                data = this._processResult(data);\n            }\n\n            this._data = this._observe(data);\n\n            this._ranges = [];\n            this._addRange(this._data);\n\n            this._total = this._data.length;\n            this._pristineTotal = this._total;\n            this._process(this._data);\n        },\n\n        data: function(value) {\n            var that = this;\n            if (value !== undefined) {\n                this._pristineData = value.slice(0);\n                this._updateLocalData(value, {\n                        columns: this.columns(),\n                        rows: this.rows(),\n                        measures: this.measures()\n                    });\n            } else {\n                return that._data;\n            }\n        },\n\n        _normalizeTuples: function(tuples, source, descriptors, measures) {\n            var length = measures.length || 1;\n            var idx = 0;\n\n            var roots = [];\n            var indexes = {};\n            var measureIdx = 0;\n            var tuple, memberIdx, last;\n\n            if (!tuples.length) {\n                return;\n            }\n\n            if (this._skipNormalize <= 0 && !this._hasRoot(tuples[0], source, descriptors)) {\n                this._skipNormalize = 0;\n                for (; idx < length; idx++) {\n                    roots.push(this._createTuple(tuples[0], measures[idx], true));\n                    indexes[idx] = idx;\n                }\n\n                tuples.splice.apply(tuples, [0, tuples.length].concat(roots).concat(tuples));\n                idx = length;\n            }\n\n            if (measures.length) {\n                last = tuple = tuples[idx];\n                memberIdx = tuple.members.length - 1;\n\n                while (tuple) {\n                    if (measureIdx >= length) {\n                        measureIdx = 0;\n                    }\n\n                    if (tuple.members[memberIdx].name !== measures[measureIdx].name) {\n                        tuples.splice(idx, 0, this._createTuple(tuple, measures[measureIdx]));\n                        indexes[idx] = idx;\n                    }\n\n                    idx += 1;\n                    measureIdx += 1;\n                    tuple = tuples[idx];\n\n                    if (length > measureIdx && (!tuple || tupleName(last, memberIdx - 1) !== tupleName(tuple, memberIdx - 1))) {\n                        for (; measureIdx < length; measureIdx++) {\n                            tuples.splice(idx, 0, this._createTuple(last, measures[measureIdx]));\n                            indexes[idx] = idx;\n                            idx += 1;\n                        }\n                        tuple = tuples[idx];\n                    }\n                    last = tuple;\n                }\n            }\n\n            return indexes;\n        },\n\n        _addMissingDataItems: function(result, metadata) {\n            while (metadata.rowIndexes[parseInt(result.length / metadata.columnsLength, 10)] !== undefined) {\n                for (var idx = 0; idx < metadata.columnsLength; idx++) {\n                    result = addEmptyDataItem(result);\n                }\n            }\n\n            while (metadata.columnIndexes[result.length % metadata.columnsLength] !== undefined) {\n                result = addEmptyDataItem(result);\n            }\n\n            return result;\n        },\n\n        _normalizeOrdinals: function(result, dataItem, metadata) {\n            var lastOrdinal = metadata.lastOrdinal;\n\n            if (!dataItem) {\n                return addEmptyDataItem(result);\n            }\n\n            if ((dataItem.ordinal - lastOrdinal) > 1) {\n                lastOrdinal += 1;\n\n                while (lastOrdinal < dataItem.ordinal && result.length < metadata.length) {\n                    result = this._addMissingDataItems(addEmptyDataItem(result), metadata);\n                    lastOrdinal += 1;\n                }\n            }\n\n            dataItem.ordinal = result.length;\n            result[result.length] = dataItem;\n\n            return result;\n        },\n\n        _normalizeData: function(options) {\n            var data = options.data;\n            var dataIdx = 0;\n            var dataItem;\n            var result = [];\n            var lastOrdinal;\n            var length;\n\n            options.lastOrdinal = 0;\n            options.columnIndexes = options.columnIndexes || {};\n            options.rowIndexes = options.rowIndexes || {};\n            options.columnsLength = options.columnsLength || 1;\n            options.rowsLength = options.rowsLength || 1;\n            options.length = options.columnsLength * options.rowsLength;\n            length = options.length;\n\n            if (data.length === length) {\n                return data;\n            }\n\n            while (result.length < length) {\n                dataItem = data[dataIdx++];\n                if (dataItem) {\n                    lastOrdinal = dataItem.ordinal;\n                }\n\n                result = this._normalizeOrdinals(this._addMissingDataItems(result, options), dataItem, options);\n\n                options.lastOrdinal = lastOrdinal;\n            }\n\n            return result;\n        },\n\n        discover: function(options, converter) {\n            var that = this,\n                transport = that.transport;\n\n            return $.Deferred(function(deferred) {\n                transport.discover(extend({\n                    success: function(response) {\n                       response = that.reader.parse(response);\n\n                        if (that._handleCustomErrors(response)) {\n                            return;\n                        }\n\n                        if (converter) {\n                            response = converter(response);\n                        }\n                        deferred.resolve(response);\n                    },\n                    error: function(response, status, error) {\n                        deferred.reject(response);\n                        that.error(response, status, error);\n                    }\n                }, options));\n            }).promise().done(function() {\n                that.trigger(\"schemaChange\");\n            });\n        },\n\n        schemaMeasures: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaMeasures\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }\n            }, function(response) {\n                return that.reader.measures(response);\n            });\n        },\n\n        schemaKPIs: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaKPIs\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }\n            }, function(response) {\n                return that.reader.kpis(response);\n            });\n        },\n\n        schemaDimensions: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaDimensions\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }\n            }, function(response) {\n                return that.reader.dimensions(response);\n            });\n        },\n\n        schemaHierarchies: function(dimensionName) {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaHierarchies\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube(),\n                        dimensionUniqueName: dimensionName\n                    }\n                }\n            }, function(response) {\n                return that.reader.hierarchies(response);\n            });\n        },\n\n        schemaLevels: function(hierarchyName) {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaLevels\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube(),\n                        hierarchyUniqueName: hierarchyName\n                    }\n                }\n            }, function(response) {\n                return that.reader.levels(response);\n            });\n        },\n\n        schemaCubes: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaCubes\",\n                    restrictions: {\n                        catalogName: that.transport.catalog()\n                    }\n                }\n            }, function(response) {\n                return that.reader.cubes(response);\n            });\n        },\n\n        schemaCatalogs: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaCatalogs\"\n                }\n            }, function(response) {\n                return that.reader.catalogs(response);\n            });\n        },\n\n        schemaMembers: function(restrictions) {\n            var that = this;\n            var success = (function(restrictions) {\n                return function(response) {\n                    return that.reader.members(response, restrictions);\n                };\n            }(restrictions));\n\n            return that.discover({\n                data: {\n                    command: \"schemaMembers\",\n                    restrictions: extend({\n                       catalogName: that.transport.catalog(),\n                       cubeName: that.transport.cube()\n                   }, restrictions)\n                }\n            }, success);\n        },\n\n        _params: function(data) {\n            if (this._clearAxesData) {\n                this._axes = {};\n                this._data = this._observe([]);\n                this._clearAxesData = false;\n                this.trigger(STATERESET);\n            }\n\n            var options = DataSource.fn._params.call(this, data);\n\n            options = extend({\n                measures: this.measures(),\n                measuresAxis: this.measuresAxis(),\n                columns: this.columns(),\n                rows: this.rows()\n            }, options);\n\n            if (this.cubeBuilder) {\n                this._requestData = options;\n            }\n\n            return options;\n        }\n    });\n\n    function flatColumns(columns) {\n        var result = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].children) {\n                result = result.concat(flatColumns(columns[idx].children));\n            }\n        }\n\n        return result;\n    }\n\n    function sortItemsTree(field, items, sortFunction) {\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].children && items[i].children.length) {\n                sortItemsTree(field, items[i].children, sortFunction);\n            }\n        }\n        if (items[0].parentName != field) {\n            return;\n        }\n        items = items.sort(sortFunction);\n    }\n\n    function fillSortTree(items, map) {\n        for (var i = 0; i < items.length; i++) {\n            var currentItem = map[items[i].name];\n\n            if (!$.isEmptyObject(currentItem.childrenMap)) {\n                items[i].children = [];\n                for (var name in currentItem.childrenMap) {\n                    items[i].children.push($.extend({}, { name: name, parentName: map[name].parentName }));\n                }\n\n                fillSortTree(items[i].children, map);\n            }\n        }\n    }\n\n    function addEmptyDataItem(result) {\n        result[result.length] = { value: \"\", fmtValue: \"\", ordinal: result.length };\n        return result;\n    }\n\n    function validateAxis(newAxis, axis, measures) {\n        if (newAxis.tuples.length < membersCount(axis.tuples, measures)) {\n\n            return axis;\n        }\n\n        return;\n    }\n\n    function adjustDataByColumn(sourceTuples, targetTuples, rowsLength, measures, data) {\n        var columnIdx, rowIdx, dataIdx;\n        var columnsLength = sourceTuples.length;\n        var targetColumnsLength = membersCount(targetTuples, measures);\n        var measuresLength = measures.length || 1;\n\n        for (rowIdx = 0; rowIdx < rowsLength; rowIdx++) {\n            for (columnIdx = 0; columnIdx < columnsLength; columnIdx++) {\n                dataIdx = tupleIndex(sourceTuples[columnIdx], targetTuples) * measuresLength;\n                dataIdx += columnIdx % measuresLength;\n\n                data[rowIdx * columnsLength + columnIdx].ordinal = rowIdx * targetColumnsLength + dataIdx;\n            }\n        }\n    }\n\n    function adjustDataByRow(sourceTuples, targetTuples, columnsLength, measures, data) {\n        var columnIdx, rowIdx, dataIdx;\n        var rowsLength = sourceTuples.length;\n        var measuresLength = measures.length || 1;\n\n        for (rowIdx = 0; rowIdx < rowsLength; rowIdx++) {\n            dataIdx = tupleIndex(sourceTuples[rowIdx], targetTuples);\n            dataIdx *= measuresLength;\n            dataIdx += rowIdx % measuresLength;\n\n            for (columnIdx = 0; columnIdx < columnsLength; columnIdx++) {\n                data[rowIdx * columnsLength + columnIdx].ordinal = dataIdx * columnsLength + columnIdx;\n            }\n        }\n    }\n\n    function tupleIndex(tuple, collection) {\n        return findExistingTuple(collection, tuple).index;\n    }\n\n    function membersCount(tuples, measures) {\n        if (!tuples.length) {\n            return 0;\n        }\n\n        var queue = tuples.slice();\n        var current = queue.shift();\n        var result = 1;\n\n        while (current) {\n            if (current.members) {\n                [].push.apply(queue, current.members);\n            } else if (current.children) {\n                if (!current.measure) {\n                    result += current.children.length;\n                }\n                [].push.apply(queue, current.children);\n            }\n\n            current = queue.shift();\n        }\n\n        if (measures.length) {\n            result = result * measures.length;\n        }\n\n        return result;\n    }\n\n    function normalizeAxis(axis) {\n        if (!axis) {\n            axis = {\n                tuples: []\n            };\n        }\n\n        if (!axis.tuples) {\n            axis.tuples = [];\n        }\n\n        return axis;\n    }\n\n    function findDataIndex(tuple, memberIndex, measures) {\n        if (!tuple) {\n            return 0;\n        }\n\n        var measuresLength = Math.max(measures.length, 1);\n        var tuples = tuple.members.slice(0, memberIndex);\n        var current = tuples.shift();\n\n        //the initial value is equal to the total number of measures\n        //as the measures member is not extracted from the members of the starting tuple\n        //but should be calculated in the final result\n        var counter = measuresLength;\n\n        while (current) {\n            if (current.name === MEASURES) {\n                //subtract 1 as the measures member has been already counted as a single standard member\n                //but we are interested in the total number of measures instead\n                counter += (measuresLength - 1);\n            } else if (current.children) {\n                //is member\n                [].push.apply(tuples, current.children);\n            } else {\n                //is tuple\n                counter ++;\n                [].push.apply(tuples, current.members);\n            }\n\n            current = tuples.shift();\n        }\n\n        return counter;\n    }\n\n    function mergeTuples(target, source, measures) {\n        if (!source[0]) {\n            return {\n                parsedRoot: null,\n                tuples: target,\n                memberIndex: 0,\n                index: 0\n            };\n        }\n\n        var result = findExistingTuple(target, source[0]);\n\n        if (!result.tuple) {\n            return {\n                parsedRoot: null,\n                tuples: source,\n                memberIndex: 0,\n                index: 0\n            };\n        }\n\n        var targetMembers = result.tuple.members;\n        var sourceMembers = source[0].members;\n        var memberIndex = -1;\n\n        if (targetMembers.length !== sourceMembers.length) {\n            return {\n                parsedRoot: null,\n                tuples: source,\n                memberIndex: 0,\n                index: 0\n            };\n        }\n\n        for (var idx = 0, length = targetMembers.length; idx < length; idx++) {\n            if (!targetMembers[idx].measure && sourceMembers[idx].children[0]) {\n                if (memberIndex == -1 && sourceMembers[idx].children.length) {\n                    memberIndex = idx;\n                }\n\n                targetMembers[idx].children = sourceMembers[idx].children;\n            }\n        }\n\n        measures = Math.max(measures.length, 1);\n\n        return {\n            parsedRoot: result.tuple,\n            index: result.index * measures,\n            memberIndex: memberIndex,\n            tuples: target\n        };\n    }\n\n    function equalTuples(first, second) {\n        var equal = true;\n        var idx, length;\n\n        first = first.members;\n        second = second.members;\n\n        for (idx = 0, length = first.length; idx < length; idx++) {\n            if (first[idx].measure || second[idx].measure) {\n                continue;\n            }\n\n            equal = equal && (getName(first[idx]) === getName(second[idx]));\n        }\n\n        return equal;\n    }\n\n    function findExistingTuple(tuples, toFind) {\n        var idx, length, tuple, found, counter = 0;\n        var memberIndex, membersLength, member;\n\n        for (idx = 0, length = tuples.length; idx < length; idx++) {\n            tuple = tuples[idx];\n            if (equalTuples(tuple, toFind)) {\n                return {\n                    tuple: tuple,\n                    index: counter\n                };\n            }\n\n            counter ++;\n\n            for (memberIndex = 0, membersLength = tuple.members.length; memberIndex < membersLength; memberIndex++) {\n                member = tuple.members[memberIndex];\n                if (member.measure) {\n                    //counter += member.children.length;\n                    continue;\n                }\n                found = findExistingTuple(member.children, toFind);\n                counter += found.index;\n                if (found.tuple) {\n                    return {\n                        tuple: found.tuple,\n                        index: counter\n                    };\n                }\n            }\n        }\n\n        return {\n            index: counter\n        };\n    }\n\n    function addMembers(members, map) {\n        var member, i, len, path = \"\";\n        for (i = 0, len = members.length; i < len; i++) {\n            member = members[i];\n            path += member.name;\n            if (!map[path]) {\n                map[path] = member;\n            }\n        }\n    }\n\n\n    function findParentMember(tuple, map) {\n        var members = tuple.members;\n        var i, len, member, path = \"\";\n        var parentPath = \"\";\n        var parentMember;\n\n        for (i = 0, len = members.length; i < len; i++) {\n            member = members[i];\n            if (parentMember) {\n                if (map[path + member.name]) {\n                    path += member.name;\n                    parentMember = map[path];\n                    continue;\n                } else if (map[path + member.parentName]) {\n                    return map[path + member.parentName];\n                } else if (map[parentPath + member.parentName]) {\n                    return map[parentPath + member.parentName];\n                } else {\n                    return map[parentPath];\n                }\n            }\n\n            path += member.name;\n            parentMember = map[member.parentName];\n\n            if (!parentMember) {\n                parentMember = map[path];\n                if (!parentMember) {\n                    return null;\n                }\n            }\n\n            if (parentMember) {\n                parentPath += parentMember.name;\n            }\n        }\n\n        return parentMember;\n    }\n\n    function measurePosition(tuple, measures) {\n        if (measures.length === 0) {\n            return -1;\n        }\n\n        var measure = measures[0];\n        var members = tuple.members;\n        for (var idx = 0, len = members.length; idx < len; idx ++) {\n            if (members[idx].name == measure.name) {\n                return idx;\n            }\n        }\n    }\n\n    function normalizeTupleMeasures(tuple, index) {\n        if (index < 0) {\n            return;\n        }\n        var member = {\n            name: MEASURES,\n            measure: true,\n            children: [\n                $.extend({ members: [], dataIndex: tuple.dataIndex }, tuple.members[index])\n            ]\n        };\n        tuple.members.splice(index, 1, member);\n        tuple.dataIndex = undefined;\n    }\n\n    function parseSource(tuples, measures) {\n        if (tuples.length < 1) {\n            return [];\n        }\n        var result = [];\n        var map = { };\n        var measureIndex = measurePosition(tuples[0], measures);\n\n        for (var i = 0; i < tuples.length; i++) {\n            var tuple = tuples[i];\n\n            //keep the old data index of the tuple\n            tuple.dataIndex = i;\n\n            normalizeTupleMeasures(tuple, measureIndex);\n            var parentMember = findParentMember(tuple, map);\n\n            if (parentMember) {\n                if (measureIndex < 0 || !parentMember.measure) {\n                    parentMember.children.push(tuple);\n                } else {\n                    parentMember.children.push(tuple.members[measureIndex].children[0]);\n                }\n            } else {\n                result.push(tuple);\n            }\n\n            addMembers(tuple.members, map);\n        }\n\n        return result;\n    }\n\n    function prepareDataOnRows(tuples, data) {\n        if (!tuples || !tuples.length) {\n            return data;\n        }\n\n        var result = [];\n        var indices = buildDataIndices(tuples);\n        var rowsLength = indices.length;\n        var columnsLength = Math.max(data.length / rowsLength, 1);\n        var rowIndex, columnIndex, targetIndex, sourceIndex;\n        var calcIndex;\n\n        for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n            targetIndex = columnsLength * rowIndex;\n            sourceIndex = columnsLength * indices[rowIndex];\n            for (columnIndex = 0; columnIndex < columnsLength; columnIndex++) {\n                calcIndex = parseInt(sourceIndex + columnIndex, 10);\n                result[parseInt(targetIndex + columnIndex, 10)] = data[calcIndex] || { value: \"\", fmtValue: \"\", ordinal: calcIndex };\n            }\n        }\n\n        return result;\n    }\n\n    function prepareDataOnColumns(tuples, data) {\n        if (!tuples || !tuples.length) {\n            return data;\n        }\n\n        var result = [];\n        var indices = buildDataIndices(tuples);\n        var columnsLength = indices.length;\n        var rowsLength = Math.max(data.length / columnsLength, 1);\n        var columnIndex, rowIndex, dataIndex, calcIndex;\n\n        for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n            dataIndex = columnsLength * rowIndex;\n            for (columnIndex = 0; columnIndex < columnsLength; columnIndex++) {\n                calcIndex = indices[columnIndex] + dataIndex;\n                result[dataIndex + columnIndex] = data[calcIndex] || { value: \"\", fmtValue: \"\", ordinal: calcIndex };\n            }\n        }\n\n        return result;\n    }\n\n    function buildDataIndices(tuples) {\n        tuples = tuples.slice();\n        var result = [];\n        var tuple = tuples.shift();\n        var idx, length, spliceIndex, children, member;\n\n        while (tuple) {\n            //required for multiple measures\n            if (tuple.dataIndex !== undefined) {\n                result.push(tuple.dataIndex);\n            }\n\n            spliceIndex = 0;\n            for (idx = 0, length = tuple.members.length; idx < length; idx++) {\n                member = tuple.members[idx];\n                children = member.children;\n                if (member.measure) {\n                    [].splice.apply(tuples, [0, 0].concat(children));\n                } else {\n                    [].splice.apply(tuples, [spliceIndex, 0].concat(children));\n                }\n                spliceIndex += children.length;\n            }\n\n            tuple = tuples.shift();\n        }\n\n        return result;\n    }\n\n    PivotDataSourceV2.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof PivotDataSourceV2) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only PivotDataSource instances are supported\");\n        }\n\n        return dataSource instanceof PivotDataSourceV2 ? dataSource : new PivotDataSourceV2(dataSource);\n    };\n\n    PivotDataSource.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof PivotDataSource) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only PivotDataSource instances are supported\");\n        }\n\n        return dataSource instanceof PivotDataSource ? dataSource : new PivotDataSource(dataSource);\n    };\n\n    function baseHierarchyPath(memberName) {\n        var parts = memberName.split(\".\");\n        if (parts.length > 2) {\n            return parts[0] + \".\" + parts[1];\n        }\n        return memberName;\n    }\n\n    function expandMemberDescriptor(names, sort) {\n        var idx = names.length - 1;\n        var name = names[idx];\n        var sortDescriptor;\n\n        sortDescriptor = sortDescriptorForMember(sort, name);\n\n        if (sortDescriptor && sortDescriptor.dir) {\n            name = \"ORDER(\" + name + \".Children,\" + sortDescriptor.field + \".CurrentMember.MEMBER_CAPTION,\" + sortDescriptor.dir + \")\";\n        } else {\n            name += \".Children\";\n        }\n\n        names[idx] = name;\n\n        return names;\n    }\n\n    function sortDescriptorForMember(sort, member) {\n        for (var idx = 0, length = sort.length; idx < length; idx++) {\n            if (member.indexOf(sort[idx].field) === 0) {\n                return sort[idx];\n            }\n        }\n        return null;\n    }\n\n    function crossJoin(names) {\n        var result = \"CROSSJOIN({\";\n        var r;\n\n        if (names.length > 2) {\n            r = names.pop();\n            result += crossJoin(names);\n        } else {\n            result += names.shift();\n            r = names.pop();\n        }\n\n        result += \"},{\";\n        result += r;\n        result += \"})\";\n        return result;\n    }\n\n    function crossJoinCommand(members, measures) {\n        var tmp = members.slice(0);\n\n        if (measures.length > 1) {\n            tmp.push(\"{\" + measureNames(measures).join(\",\") + \"}\");\n        }\n\n        return crossJoin(tmp);\n    }\n\n    function measureNames(measures) {\n        var idx = 0;\n        var length = measures.length;\n        var result = [];\n        var measure;\n\n        for (; idx < length; idx++) {\n            measure = measures[idx];\n            result.push(measure.name !== undefined ? measure.name : measure);\n        }\n\n        return result;\n    }\n\n    function indexOf(name, items) {\n        var idx, length, index = -1;\n\n        for (idx = 0, length = items.length; idx < length; idx++) {\n            if (getName(items[idx]) === name) {\n                index = idx;\n                break;\n            }\n        }\n        return index;\n    }\n\n    function getName(name) {\n        name = name.name || name;\n\n        if (toString.call(name) === \"[object Array]\") {\n            name = name[name.length - 1];\n        }\n\n        return name;\n    }\n\n    function getRootNames(members) {\n        var length = members.length;\n        var names = [];\n        var idx = 0;\n\n        for (; idx < length; idx++) {\n            names.push(members[idx].name[0]);\n        }\n\n        return names;\n    }\n\n    function mapNames(names, rootNames) {\n        var name;\n        var rootName;\n\n        var j;\n        var idx = 0;\n        var length = names.length;\n        var rootLength = rootNames.length;\n\n        rootNames = rootNames.slice(0);\n\n        for (; idx < length; idx++) {\n            name = names[idx];\n\n            for (j = 0; j < rootLength; j++) {\n                rootName = baseHierarchyPath(rootNames[j]);\n\n                if (name.indexOf(rootName) !== -1) {\n                    rootNames[j] = name;\n                    break;\n                }\n            }\n        }\n\n        return {\n            names: rootNames,\n            expandedIdx: j,\n            uniquePath: rootNames.slice(0, j + 1).join(\"\")\n        };\n    }\n\n    function parseDescriptors(members) {\n        var expanded = [];\n        var child = [];\n        var root = [];\n        var member;\n\n        var j, l;\n        var idx = 0;\n        var length = members.length;\n\n        var name;\n        var hierarchyName;\n\n        var found;\n\n        for (; idx < length; idx++) {\n            member = members[idx];\n            name = member.name;\n            found = false;\n\n            if (toString.call(name) !== \"[object Array]\") {\n                member.name = name = [name];\n            }\n\n            if (name.length > 1) {\n                child.push(member);\n            } else {\n                hierarchyName = baseHierarchyPath(name[0]);\n\n                for (j = 0, l = root.length; j < l; j++) {\n                    if (root[j].name[0].indexOf(hierarchyName) === 0) {\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    root.push(member);\n                }\n\n                if (member.expand) {\n                    expanded.push(member);\n                }\n            }\n        }\n\n        expanded = expanded.concat(child);\n\n        return {\n            root: root,\n            expanded: expanded\n        };\n    }\n\n    function serializeMembers(members, measures, sort) {\n        var command = \"\";\n\n        members = members || [];\n\n        var expanded = parseDescriptors(members);\n        var root = expanded.root;\n\n        var rootNames = getRootNames(root);\n        var crossJoinCommands = [];\n\n        expanded = expanded.expanded;\n\n        var length = expanded.length;\n        var idx = 0;\n\n        var memberName;\n        var names = [];\n\n        if (rootNames.length > 1 || measures.length > 1) {\n            crossJoinCommands.push(crossJoinCommand(rootNames, measures));\n\n            for (; idx < length; idx++) {\n                memberName = expandMemberDescriptor(expanded[idx].name, sort);\n                names = mapNames(memberName, rootNames).names;\n\n                crossJoinCommands.push(crossJoinCommand(names, measures));\n            }\n\n            command += crossJoinCommands.join(\",\");\n        } else {\n            for (; idx < length; idx++) {\n                memberName = expandMemberDescriptor(expanded[idx].name, sort);\n                names.push(memberName[0]); //check if this is ok\n            }\n\n            command += rootNames.concat(names).join(\",\");\n        }\n\n        return command;\n    }\n\n    var filterFunctionFormats = {\n        contains: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\") > 0\",\n        doesnotcontain: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\")\",\n        startswith: \", Left({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n        endswith: \", Right({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n        eq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\",\n        neq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\"\n    };\n\n    function serializeExpression(expression) {\n        var command = \"\";\n        var value = expression.value;\n        var field = expression.field;\n        var operator = expression.operator;\n\n        if (operator == \"in\") {\n            command += \"{\";\n            command += value;\n            command += \"}\";\n        } else {\n            command += operator == \"neq\" || operator == \"doesnotcontain\" ? \"-\" : \"\";\n            command += \"Filter(\";\n            command += field + \".MEMBERS\";\n            command += kendo.format(filterFunctionFormats[operator], field, value);\n            command += \")\";\n        }\n\n        return command;\n    }\n\n    function serializeFilters(filter, cube) {\n        var command = \"\", current;\n        var filters = filter.filters;\n        var length = filters.length;\n        var idx;\n\n        for (idx = length - 1; idx >= 0; idx--) {\n\n            current = \"SELECT (\";\n            current += serializeExpression(filters[idx]);\n            current += \") ON 0\";\n\n            if (idx == length - 1) {\n                current += \" FROM [\" + cube + \"]\";\n                command = current;\n            } else {\n                command = current + \" FROM ( \" + command + \" )\";\n            }\n        }\n\n        return command;\n    }\n\n    function serializeOptions(parentTagName, options, capitalize) {\n        var result = \"\";\n\n        if (options) {\n            result += \"<\" + parentTagName + \">\";\n            var value;\n            for (var key in options) {\n                value = options[key];\n                if (capitalize) {\n                    key = key.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g, \"$1_\").toUpperCase().replace(/_$/, \"\");\n                }\n                result += \"<\" + key + \">\" + value + \"</\" + key + \">\";\n            }\n            result += \"</\" + parentTagName + \">\";\n        } else {\n            result += \"<\" + parentTagName + \"/>\";\n        }\n        return result;\n    }\n\n    var xmlaDiscoverCommands = {\n        schemaCubes: \"MDSCHEMA_CUBES\",\n        schemaCatalogs: \"DBSCHEMA_CATALOGS\",\n        schemaMeasures: \"MDSCHEMA_MEASURES\",\n        schemaDimensions: \"MDSCHEMA_DIMENSIONS\",\n        schemaHierarchies: \"MDSCHEMA_HIERARCHIES\",\n        schemaLevels: \"MDSCHEMA_LEVELS\",\n        schemaMembers: \"MDSCHEMA_MEMBERS\",\n        schemaKPIs: \"MDSCHEMA_KPIS\"\n    };\n\n    var convertersMap = {\n        read: function(options) {\n            var command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Execute xmlns=\"urn:schemas-microsoft-com:xml-analysis\"><Command><Statement>';\n\n            command += \"SELECT NON EMPTY {\";\n\n            var columns = options.columns || [];\n            var rows = options.rows || [];\n\n            var measures = options.measures || [];\n            var measuresRowAxis = options.measuresAxis === \"rows\";\n            var sort = options.sort || [];\n\n            if (!columns.length && rows.length && (!measures.length || (measures.length && measuresRowAxis))) {\n                columns = rows;\n                rows = [];\n                measuresRowAxis = false;\n            }\n\n            if (!columns.length && !rows.length) {\n                measuresRowAxis = false;\n            }\n\n            if (columns.length) {\n                command += serializeMembers(columns, !measuresRowAxis ? measures : [], sort);\n            } else if (measures.length && !measuresRowAxis) {\n                command += measureNames(measures).join(\",\");\n            }\n\n            command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS\";\n\n            if (rows.length || (measuresRowAxis && measures.length > 1)) {\n                command += \", NON EMPTY {\";\n\n                if (rows.length) {\n                    command += serializeMembers(rows, measuresRowAxis ? measures : [], sort);\n                } else {\n                    command += measureNames(measures).join(\",\");\n                }\n\n                command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS\";\n            }\n\n            if (options.filter) {\n                command += \" FROM \";\n                command += \"(\";\n                command += serializeFilters(options.filter, options.connection.cube);\n                command += \")\";\n            } else {\n                command += \" FROM [\" + options.connection.cube + \"]\";\n            }\n\n            if (measures.length == 1 && columns.length) {\n                command += \" WHERE (\" + measureNames(measures).join(\",\") + \")\";\n            }\n\n            command += '</Statement></Command><Properties><PropertyList><Catalog>' + options.connection.catalog + '</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>';\n            return command.replace(/\\&/g, \"&amp;\");\n        },\n        discover: function(options) {\n            options = options || {};\n\n            var command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Discover xmlns=\"urn:schemas-microsoft-com:xml-analysis\">';\n            command += \"<RequestType>\" + (xmlaDiscoverCommands[options.command] || options.command) + \"</RequestType>\";\n\n            command += \"<Restrictions>\" + serializeOptions(\"RestrictionList\", options.restrictions, true) + \"</Restrictions>\";\n\n            if (options.connection && options.connection.catalog) {\n                options.properties = $.extend({}, {\n                    Catalog: options.connection.catalog\n                }, options.properties);\n            }\n\n            command += \"<Properties>\" + serializeOptions(\"PropertyList\", options.properties) + \"</Properties>\";\n\n            command += '</Discover></Body></Envelope>';\n            return command;\n        }\n    };\n\n    var XmlaTransport = kendo.data.RemoteTransport.extend({\n        init: function(options) {\n            var originalOptions = options;\n\n            options = this.options = extend(true, {}, this.options, options);\n\n            kendo.data.RemoteTransport.call(this, options);\n\n            if (isFunction(originalOptions.discover)) {\n                this.discover = originalOptions.discover;\n            } else if (typeof originalOptions.discover === \"string\") {\n                this.options.discover = {\n                    url: originalOptions.discover\n                };\n            } else if (!originalOptions.discover) {\n                this.options.discover = this.options.read;\n            }\n        },\n        setup: function(options, type) {\n            options.data = options.data || {};\n            $.extend(true, options.data, { connection: this.options.connection });\n\n            return kendo.data.RemoteTransport.fn.setup.call(this, options, type);\n        },\n        options: {\n            read: {\n                dataType: \"text\",\n                contentType: \"text/xml\",\n                type: \"POST\"\n            },\n            discover: {\n                dataType: \"text\",\n                contentType: \"text/xml\",\n                type: \"POST\"\n            },\n            parameterMap: function(options, type) {\n                return convertersMap[type](options,type);\n            }\n        },\n\n        discover: function(options) {\n            return $.ajax(this.setup(options, \"discover\"));\n        }\n    });\n\n    var XmlaTransportV2 = Class.extend({\n        init: function(options) {\n            options = this.options = extend(true, {}, this.options, options);\n        },\n        setup: function(options) {\n            return $.extend(true, options || {}, { connection: this.options.connection });\n        },\n        read: function(options) {\n            var that = this,\n                success,\n                error;\n\n            var fetchOptions = that.setup(options.data, READ);\n\n            success = options.success || $.noop;\n            error = options.error || $.noop;\n\n            if (options.parameterMap) {\n                fetchOptions = that.parameterMap(fetchOptions, READ);\n            }\n\n            fetchData({ url: that.options.read }, fetchOptions)\n            .then(createDataState)\n            .then(function(newDataState) {\n                success(newDataState);\n            })\n            .catch(function(err) { error(err); });\n        },\n\n        catalog: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).catalog;\n\n            }\n\n            var connection = options.connection || {};\n            connection.catalog = val;\n\n            this.options.connection = connection;\n            $.extend(this.transport.options, { connection: connection });\n        },\n        cube: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).cube;\n            }\n\n            var connection = options.connection || {};\n            connection.cube = val;\n\n            this.options.connection = connection;\n            extend(true, this.transport.options, { connection: connection });\n        },\n\n        discover: function(options) {\n            return fetchDiscover({ url: this.options.read }, options);\n        }\n    });\n\n    function asArray(object) {\n        if (object == null) {\n            return [];\n        }\n\n        var type = toString.call(object);\n        if (type !== \"[object Array]\") {\n            return [object];\n        }\n\n        return object;\n    }\n\n    function translateAxis(axis) {\n        var result = { tuples: [] };\n        var tuples = asArray(kendo.getter(\"Tuples.Tuple\", true)(axis));\n        var captionGetter = kendo.getter(\"Caption['#text']\");\n        var unameGetter = kendo.getter(\"UName['#text']\");\n        var levelNameGetter = kendo.getter(\"LName['#text']\");\n        var levelNumGetter = kendo.getter(\"LNum['#text']\");\n        var childrenGetter = kendo.getter(\"CHILDREN_CARDINALITY['#text']\", true);\n        var hierarchyGetter = kendo.getter(\"['@Hierarchy']\");\n        var parentNameGetter = kendo.getter(\"PARENT_UNIQUE_NAME['#text']\", true);\n\n        for (var idx = 0; idx < tuples.length; idx++) {\n            var members = [];\n            var member = asArray(tuples[idx].Member);\n            for (var memberIdx = 0; memberIdx < member.length; memberIdx++) {\n                members.push({\n                    children: [],\n                    caption: captionGetter(member[memberIdx]),\n                    name: unameGetter(member[memberIdx]),\n                    levelName: levelNameGetter(member[memberIdx]),\n                    levelNum: levelNumGetter(member[memberIdx]),\n                    hasChildren: parseInt(childrenGetter(member[memberIdx]), 10) > 0,\n                    parentName: parentNameGetter(member[memberIdx]),\n                    hierarchy: hierarchyGetter(member[memberIdx])\n                });\n            }\n\n            result.tuples.push({ members: members });\n        }\n        return result;\n    }\n\n    var schemaDataReaderMap = {\n        cubes: {\n            name: kendo.getter(\"CUBE_NAME['#text']\", true),\n            caption: kendo.getter(\"CUBE_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            type: kendo.getter(\"CUBE_TYPE['#text']\", true)\n        },\n        catalogs: {\n            name: kendo.getter(\"CATALOG_NAME['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true)\n        },\n        measures: {\n            name: kendo.getter(\"MEASURE_NAME['#text']\", true),\n            caption: kendo.getter(\"MEASURE_CAPTION['#text']\", true),\n            uniqueName: kendo.getter(\"MEASURE_UNIQUE_NAME['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            aggregator: kendo.getter(\"MEASURE_AGGREGATOR['#text']\", true),\n            groupName: kendo.getter(\"MEASUREGROUP_NAME['#text']\", true),\n            displayFolder: kendo.getter(\"MEASURE_DISPLAY_FOLDER['#text']\", true),\n            defaultFormat: kendo.getter(\"DEFAULT_FORMAT_STRING['#text']\", true)\n        },\n        kpis: {\n            name: kendo.getter(\"KPI_NAME['#text']\", true),\n            caption: kendo.getter(\"KPI_CAPTION['#text']\", true),\n            value: kendo.getter(\"KPI_VALUE['#text']\", true),\n            goal: kendo.getter(\"KPI_GOAL['#text']\", true),\n            status: kendo.getter(\"KPI_STATUS['#text']\", true),\n            trend: kendo.getter(\"KPI_TREND['#text']\", true),\n            statusGraphic: kendo.getter(\"KPI_STATUS_GRAPHIC['#text']\", true),\n            trendGraphic: kendo.getter(\"KPI_TREND_GRAPHIC['#text']\", true),\n            description: kendo.getter(\"KPI_DESCRIPTION['#text']\", true),\n            groupName: kendo.getter(\"MEASUREGROUP_NAME['#text']\", true)\n        },\n        dimensions: {\n            name: kendo.getter(\"DIMENSION_NAME['#text']\", true),\n            caption: kendo.getter(\"DIMENSION_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            uniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            defaultHierarchy: kendo.getter(\"DEFAULT_HIERARCHY['#text']\", true),\n            type: kendo.getter(\"DIMENSION_TYPE['#text']\", true)\n//unknown = 0; time = 1; measure = 2; other = 3; quantitative = 5; accounts = 6; customers = 7; products = 8; scenario = 9; utility = 10; currency = 11; rates = 12; channel = 13; promotion = 14; organization = 15; billOfMaterials = 16; geography = 17;\n\n        },\n        hierarchies: {\n            name: kendo.getter(\"HIERARCHY_NAME['#text']\", true),\n            caption: kendo.getter(\"HIERARCHY_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            uniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true),\n            dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            displayFolder: kendo.getter(\"HIERARCHY_DISPLAY_FOLDER['#text']\", true),\n            origin: kendo.getter(\"HIERARCHY_ORIGIN['#text']\", true),\n            defaultMember: kendo.getter(\"DEFAULT_MEMBER['#text']\", true)\n        },\n        levels: {\n            name: kendo.getter(\"LEVEL_NAME['#text']\", true),\n            caption: kendo.getter(\"LEVEL_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            uniqueName: kendo.getter(\"LEVEL_UNIQUE_NAME['#text']\", true),\n            dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            displayFolder: kendo.getter(\"LEVEL_DISPLAY_FOLDER['#text']\", true),\n            orderingProperty: kendo.getter(\"LEVEL_ORDERING_PROPERTY['#text']\", true),\n            origin: kendo.getter(\"LEVEL_ORIGIN['#text']\", true),\n            hierarchyUniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true)\n        },\n        members: {\n            name: kendo.getter(\"MEMBER_NAME['#text']\", true),\n            caption: kendo.getter(\"MEMBER_CAPTION['#text']\", true),\n            uniqueName: kendo.getter(\"MEMBER_UNIQUE_NAME['#text']\", true),\n            dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            hierarchyUniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true),\n            levelUniqueName: kendo.getter(\"LEVEL_UNIQUE_NAME['#text']\", true),\n            childrenCardinality: kendo.getter(\"CHILDREN_CARDINALITY['#text']\", true)\n        }\n    };\n\n    var xmlaReaderMethods = [\"axes\", \"catalogs\", \"cubes\", \"dimensions\", \"hierarchies\", \"levels\", \"measures\"];\n\n    var XmlaDataReader = kendo.data.XmlDataReader.extend({\n        init: function(options) {\n            kendo.data.XmlDataReader.call(this, options);\n\n            this._extend(options);\n        },\n        _extend: function(options) {\n            var idx = 0;\n            var length = xmlaReaderMethods.length;\n            var methodName;\n            var option;\n\n            for (; idx < length; idx++) {\n                methodName = xmlaReaderMethods[idx];\n                option = options[methodName];\n\n                if (option && option !== identity) {\n                    this[methodName] = option;\n                }\n            }\n        },\n        parse: function(xml) {\n            var result = kendo.data.XmlDataReader.fn.parse(xml.replace(/<(\\/?)(\\w|-)+:/g, \"<$1\"));\n            return kendo.getter(\"['Envelope']['Body']\", true)(result);\n        },\n        errors: function(root) {\n            var fault = kendo.getter(\"['Fault']\", true)(root);\n            if (fault) {\n                return [{\n                    faultstring: kendo.getter(\"faultstring['#text']\", true)(fault),\n                    faultcode: kendo.getter(\"faultcode['#text']\", true)(fault)\n                }];\n            }\n            return null;\n        },\n        axes: function(root) {\n            root = kendo.getter(\"ExecuteResponse[\\\"return\\\"].root\", true)(root);\n\n            var axes = asArray(kendo.getter(\"Axes.Axis\", true)(root));\n            var axis;\n\n            var result = {\n                columns: {},\n                rows: {}\n            };\n\n            for (var idx = 0; idx < axes.length; idx++) {\n                axis = axes[idx];\n\n                if (axis[\"@name\"].toLowerCase() !== \"sliceraxis\") {\n                    if (!result.columns.tuples) {\n                        result.columns = translateAxis(axis);\n                    } else {\n                        result.rows = translateAxis(axis);\n                    }\n                }\n            }\n\n            return result;\n        },\n        data: function(root) {\n            root = kendo.getter(\"ExecuteResponse[\\\"return\\\"].root\", true)(root);\n\n            var cells = asArray(kendo.getter(\"CellData.Cell\", true)(root));\n\n            var result = [];\n            var ordinalGetter = kendo.getter(\"['@CellOrdinal']\");\n            var valueGetter = kendo.getter(\"Value['#text']\");\n            var fmtValueGetter = kendo.getter(\"FmtValue['#text']\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                result.push({\n                    value: valueGetter(cells[idx]),\n                    fmtValue: fmtValueGetter(cells[idx]),\n                    ordinal: parseInt(ordinalGetter(cells[idx]), 10)\n                });\n            }\n\n            return result;\n        },\n        _mapSchema: function(root, getters) {\n            root = kendo.getter(\"DiscoverResponse[\\\"return\\\"].root\", true)(root);\n            var rows = asArray(kendo.getter(\"row\", true)(root));\n\n            var result = [];\n\n            for (var idx = 0; idx < rows.length; idx++) {\n                var obj = {};\n                for (var key in getters) {\n                    obj[key] = getters[key](rows[idx]);\n                }\n                result.push(obj);\n            }\n\n            return result;\n        },\n        measures: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.measures);\n        },\n        kpis: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.kpis);\n        },\n        hierarchies: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.hierarchies);\n        },\n        levels: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.levels);\n        },\n        dimensions: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.dimensions);\n        },\n        cubes: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.cubes);\n        },\n        catalogs: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.catalogs);\n        },\n        members: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.members);\n        }\n    });\n\n    extend(true, kendo.data, {\n       PivotDataSource: PivotDataSource,\n       PivotDataSourceV2: PivotDataSourceV2,\n       XmlaTransport: XmlaTransport,\n       XmlaDataReader: XmlaDataReader,\n       PivotCubeBuilder: PivotCubeBuilder,\n       transports: {\n           xmla: XmlaTransport\n       },\n       readers: {\n           xmla: XmlaDataReader\n       }\n    });\n\n    var sortExpr = function(expressions, name) {\n        if (!expressions) {\n            return null;\n        }\n\n        for (var idx = 0, length = expressions.length; idx < length; idx++) {\n            if (expressions[idx].field === name) {\n                return expressions[idx];\n            }\n        }\n\n        return null;\n    };\n\n    var removeExpr = function(expressions, name) {\n        var result = [];\n\n        for (var idx = 0, length = expressions.length; idx < length; idx++) {\n            if (expressions[idx].field !== name) {\n                result.push(expressions[idx]);\n            }\n        }\n\n        return result;\n    };\n\n    kendo.ui.PivotSettingTarget = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.element.addClass(\"k-pivot-setting\");\n\n            that.dataSource = kendo.data.PivotDataSource.create(options.dataSource);\n\n            that._refreshHandler = that.refresh.bind(that);\n            that.dataSource.first(CHANGE, that._refreshHandler);\n\n            if (!options.template) {\n                var actions = '';\n\n                if (that.options.enabled) {\n                    actions = '<span class=\"k-setting-delete k-chip-action\"><span class=\"k-icon k-i-close\"></span></span>';\n                }\n\n                that.options.template = ''\n                    + '<span class=\"k-chip k-chip-md k-rounded-full k-chip-solid k-chip-solid-base\" data-' + kendo.ns + 'name=\"${data.name || data}\">'\n                        + '<span class=\"k-chip-content\">'\n                            + '<span class=\"k-chip-text\">${data.name || data}</span>'\n                        + '</span>'\n                        + '<span class=\"k-chip-actions\">' + actions + '</span>'\n                    + '</span>';\n            }\n\n            that.template = kendo.template(that.options.template);\n            that.emptyTemplate = kendo.template(that.options.emptyTemplate);\n\n            that._sortable();\n\n            that.element.on(\"click\" + NS, '.k-chip, .k-button' , function(e) {\n                var target = $(e.target);\n                var action = target.closest('.k-chip-action');\n                var name = target.closest(\"[\" + kendo.attr(\"name\") + \"]\")\n                                 .attr(kendo.attr(\"name\"));\n\n                if (!name) {\n                    return;\n                }\n\n                if (action.hasClass(\"k-setting-delete\")) {\n                    that.remove(name);\n                    return;\n                }\n\n                if (target.closest('.k-chip-actions').length > 0) {\n                    return;\n                }\n\n                if (that.options.sortable) {\n                    var sortDirection = $(e.currentTarget).find('.k-i-sort-asc-sm').length ? 'desc' : 'asc';\n\n                    that.sort({\n                        field: name,\n                        dir: sortDirection\n                    });\n                }\n            });\n\n            if (options.filterable || options.sortable) {\n                that.fieldMenu = new ui.PivotFieldMenu(that.element, {\n                    messages: that.options.messages.fieldMenu,\n                    filter: \".k-setting-fieldmenu\",\n                    filterable: options.filterable,\n                    sortable: options.sortable,\n                    dataSource: that.dataSource\n                });\n            }\n\n            that.refresh();\n        },\n\n        options: {\n            name: \"PivotSettingTarget\",\n            template: null,\n            filterable: false,\n            sortable: false,\n            emptyTemplate: \"<div class='k-empty'>${data}</div>\",\n            setting: \"columns\",\n            enabled: true,\n            messages: {\n                empty: \"Drop Fields Here\"\n            }\n        },\n        setDataSource: function(dataSource) {\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.dataSource = this.options.dataSource = dataSource;\n\n            if (this.fieldMenu) {\n                this.fieldMenu.setDataSource(dataSource);\n            }\n            dataSource.first(CHANGE, this._refreshHandler);\n\n            this.refresh();\n        },\n\n        _sortable: function() {\n            var that = this;\n\n            if (that.options.enabled) {\n                this.sortable = this.element.kendoSortable({\n                    connectWith: this.options.connectWith,\n                    hint: that.options.hint,\n                    filter: \">*:not(.k-empty)\",\n                    cursor: \"move\",\n                    start: function(e) {\n                        e.item.trigger(\"focus\").trigger(\"blur\");\n                    },\n                    change: function(e) {\n                        var name = e.item.attr(kendo.attr(\"name\"));\n\n                        if (e.action == \"receive\") {\n                            that.add(name);\n                        } else if (e.action == \"remove\") {\n                            that.remove(name);\n                        } else if (e.action == \"sort\") {\n                            that.move(name, e.newIndex);\n                        }\n                    }\n                }).data(\"kendoSortable\");\n            }\n        },\n\n        _isKPI: function(data) {\n            return data.type === \"kpi\" || data.measure;\n        },\n\n        validate: function(data) {\n            var isMeasure = (data.type == 2 || \"aggregator\" in data || this._isKPI(data));\n\n            if (isMeasure) {\n                return this.options.setting === \"measures\";\n            }\n\n            if (this.options.setting === \"measures\") {\n                return isMeasure;\n            }\n\n            var items = this.dataSource[this.options.setting]();\n            var name = data.defaultHierarchy || data.uniqueName;\n            if (indexOf(name, items) > -1) {\n                return false;\n            }\n\n            items = this.dataSource[this.options.setting === \"columns\" ? \"rows\" : \"columns\"]();\n            if (indexOf(name, items) > -1) {\n                return false;\n            }\n\n            return true;\n        },\n\n        add: function(name) {\n            var items = this.dataSource[this.options.setting]();\n            var i, l;\n\n            name = Array.isArray(name) ? name.slice(0) : [name];\n\n            for (i = 0, l = name.length; i < l; i++) {\n                if (indexOf(name[i], items) !== -1) {\n                    name.splice(i, 1);\n                    i -= 1;\n                    l -= 1;\n                }\n            }\n\n            if (name.length) {\n                items = items.concat(name);\n                this.dataSource[this.options.setting](items);\n            }\n        },\n\n        move: function(name, index) {\n            var items = this.dataSource[this.options.setting]();\n            var idx = indexOf(name, items);\n\n            if (idx > -1) {\n                name = items.splice(idx, 1)[0];\n\n                items.splice(index, 0, name);\n\n                this.dataSource[this.options.setting](items);\n            }\n        },\n\n        remove: function(name) {\n            var items = this.dataSource[this.options.setting]();\n            var idx = indexOf(name, items);\n            var sortExpressions = this.dataSource.sort();\n            var filter = this.dataSource.filter();\n\n            if (idx > -1) {\n                if (filter) {\n                    filter.filters = removeExpr(filter.filters, name);\n                    this.dataSource._filter.filters = filter.filters;\n                    if (!filter.filters.length) {\n                        this.dataSource._filter = null;\n                    }\n                }\n                if (sortExpressions) {\n                    sortExpressions = removeExpr(sortExpressions, name);\n                    this.dataSource._sort = sortExpressions;\n                }\n                items.splice(idx, 1);\n                this.dataSource[this.options.setting](items);\n            }\n        },\n\n        sort: function(expr) {\n            var sortable = this.options.sortable;\n            var allowUnsort = sortable === true || sortable.allowUnsort;\n            var skipExpr = allowUnsort && expr.dir === \"asc\";\n\n            var expressions = (this.dataSource.sort() || []);\n            var result = removeExpr(expressions, expr.field);\n\n            if (skipExpr && expressions.length !== result.length) {\n                expr = null;\n            }\n\n            if (expr) {\n                result.push(expr);\n            }\n\n            this.dataSource.sort(result);\n        },\n\n        refresh: function() {\n            var html = \"\";\n            var items = this.dataSource[this.options.setting]();\n            var length = items.length;\n            var idx = 0;\n            var item;\n\n            if (length) {\n                for (; idx < length; idx++) {\n                    item = items[idx];\n                    item = item.name === undefined ? { name: item } : item;\n\n                    html += this.template(extend({ sortIcon: this._sortIcon(item.name) }, item));\n                }\n            } else {\n                html = this.emptyTemplate(this.options.messages.empty);\n            }\n\n            this.element.html(html);\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.element.off(NS);\n\n            if (this.sortable) {\n                this.sortable.destroy();\n            }\n\n            if (this.fieldMenu) {\n                this.fieldMenu.destroy();\n            }\n\n            this.element = null;\n            this._refreshHandler = null;\n        },\n\n        _sortIcon: function(name) {\n            var expressions = this.dataSource.sort();\n            var expr = sortExpr(expressions, getName(name));\n            var icon = \"\";\n\n            if (expr) {\n                icon = \"k-i-sort-\" + expr.dir;\n            }\n\n            return icon;\n        }\n    });\n\n    kendo.ui.PivotSettingTargetV2 = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.dataSource = kendo.data.PivotDataSourceV2.create(options.dataSource);\n\n            that._refreshHandler = that.refresh.bind(that);\n            that.dataSource.first(CHANGE, that._refreshHandler);\n\n            that.template = kendo.template(that.options.template);\n\n            that._sortable();\n\n            that.element.on(\"click\" + NS, \".k-i-close-circle\", function(e) {\n                var target = $(e.target);\n                var parent = target.closest(\".k-chip\");\n                var name = parent.find(\".k-chip-label\").text();\n\n                if (!name) {\n                    return;\n                }\n\n                that.remove(name);\n                parent.remove();\n                that.trigger(\"remove\", { name: name });\n            });\n\n            if (options.filterable || options.sortable) {\n                that.fieldMenu = new ui.PivotFieldMenuV2(that.element, {\n                    messages: that.options.messages.fieldMenu,\n                    filterable: options.filterable,\n                    filter: \".k-i-more-vertical\",\n                    sortable: options.sortable,\n                    dataSource: that.dataSource\n                });\n            }\n\n            that.refresh();\n        },\n\n        events: [\"remove\"],\n\n        options: {\n            name: \"PivotSettingTargetV2\",\n            template: null,\n            filterable: false,\n            sortable: false,\n            setting: \"columns\",\n            enabled: true,\n            messages: {\n                empty: \"Drop Fields Here\"\n            }\n        },\n        setDataSource: function(dataSource) {\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.dataSource = this.options.dataSource = dataSource;\n\n            if (this.fieldMenu) {\n                this.fieldMenu.setDataSource(dataSource);\n            }\n            dataSource.first(CHANGE, this._refreshHandler);\n\n            this.refresh();\n        },\n\n        _applyState: function() {\n            if (this._sortState !== undefined) {\n                this.dataSource._sort = this._sortState;\n                this._sortState = undefined;\n            }\n\n            if (this._stateFilter !== undefined) {\n                this.dataSource._filter = this._stateFilter;\n                this._stateFilter = undefined;\n            }\n\n            this.dataSource[\"_\" + this.options.setting] = this.options.setting === \"measures\" ? normalizeMeasures(this._savedState) : normalizeMembers(this._savedState);\n        },\n\n        _cancelChanges: function() {\n            this._sortState = undefined;\n            this._stateFilter = undefined;\n            this._savedState = kendo.deepExtend([], this._initialState);\n            this._redraw();\n        },\n\n        _state: function(newState, modifyInit) {\n            var that = this;\n\n            if (!newState) {\n                return that._savedState || [];\n            } else {\n                if (!that._savedState || modifyInit) {\n                    that._initialState = kendo.deepExtend([], newState);\n                }\n                that._savedState = kendo.deepExtend([], newState);\n            }\n        },\n\n        _sortable: function() {\n            var that = this;\n\n            this.sortable = this.element.kendoSortable({\n                connectWith: this.options.connectWith,\n                hint: that.options.hint,\n                filter: \">*:not(.k-empty)\",\n                cursor: \"move\",\n                start: function(e) {\n                    e.item.focus().blur();\n                },\n                change: function(e) {\n                    var name = e.item.find(\".k-chip-label\").text();\n\n                    if (e.action == \"receive\") {\n                        that.add(name);\n                    } else if (e.action == \"remove\") {\n                        that.remove(name);\n                    } else if (e.action == \"sort\") {\n                        that.move(name, e.newIndex);\n                    }\n                }\n            }).data(\"kendoSortable\");\n        },\n\n        add: function(name) {\n            var items = this._state();\n            var i, l;\n\n            name = Array.isArray(name) ? name.slice(0) : [name];\n\n            for (i = 0, l = name.length; i < l; i++) {\n                if (indexOf(name[i], items) !== -1) {\n                    name.splice(i, 1);\n                    i -= 1;\n                    l -= 1;\n                }\n            }\n\n            if (name.length) {\n                items = items.concat(name);\n                this._state(items);\n                this._redraw();\n            }\n        },\n\n        move: function(name, index) {\n            var items = this._state();\n            var idx = indexOf(name, items);\n\n            if (idx > -1) {\n                name = items.splice(idx, 1)[0];\n\n                items.splice(index, 0, name);\n\n                this._state(items);\n                this._redraw();\n            }\n        },\n\n        remove: function(name) {\n            var items = this._state();\n            var idx = indexOf(name, items);\n            var sortExpressions = this.dataSource.sort();\n            var filter = this.dataSource.filter();\n\n            if (idx > -1) {\n                if (filter) {\n                    filter.filters = removeExpr(filter.filters, name);\n                    this._savedFilter = this.dataSource._filter;\n                    this._savedFilter.filters = filter.filters;\n                    if (!filter.filters.length) {\n                        this._savedFilter = null;\n                    }\n                }\n                if (sortExpressions) {\n                    sortExpressions = removeExpr(sortExpressions, name);\n                    this._sortState = sortExpressions;\n                }\n                items.splice(idx, 1);\n                this._state(items);\n                this._redraw();\n            }\n        },\n\n        _emptyState: function(enable) {\n            var that = this;\n            if (enable) {\n                that.element.html(this.options.messages.empty)\n                    .addClass(\"k-settings-description\")\n                    .removeClass(\"k-chip-list\");\n            } else {\n                that.element\n                    .removeClass(\"k-settings-description\")\n                    .addClass(\"k-chip-list\");\n            }\n        },\n\n        _redraw: function() {\n            var items = this._state() || [];\n            this._emptyState(!items.length);\n            if (items.length) {\n                this.element.html(this._targetsHTML(items));\n            }\n        },\n\n        _targetsHTML: function(items) {\n            var item;\n            var html = \"\";\n            var idx = 0;\n            var options = this.options;\n            var enabled = false;\n\n            if (this.options.setting != \"measures\") {\n                enabled = options.filterable || options.sortable;\n            }\n\n            if (items.length) {\n                for (; idx < items.length; idx++) {\n                    item = items[idx];\n                    item = item.name === undefined ? { name: item } : item;\n\n                    html += this.template({ name: item.name, menuenabled: enabled });\n                }\n            }\n            return html;\n        },\n\n        refresh: function() {\n            if (this.dataSource._preventRefresh) {\n                return;\n            }\n            var items = this.dataSource[this.options.setting]();\n            this._state(items, true);\n            this._emptyState(!this._state().length);\n            if (items.length) {\n                this.element.html(this._targetsHTML(items));\n            }\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.element.off(NS);\n\n            if (this.sortable) {\n                this.sortable.destroy();\n            }\n\n            if (this.fieldMenu) {\n                this.fieldMenu.destroy();\n            }\n\n            this.element = null;\n            this._refreshHandler = null;\n        }\n    });\n\n    var PivotConfiguratorButton = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            Widget.fn.init.call(that, element, options);\n            that.element = $(element);\n\n            that._element();\n            that._attachEvents();\n        },\n\n        options: {\n            name: \"PivotConfiguratorButton\",\n            text: \"Change settings\",\n            configurator: \"\"\n        },\n\n        destroy: function() {\n            this.element.off(NS);\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            kendo.deepExtend(that.options, options);\n            this.init(this.element, this.options);\n        },\n\n        toggle: function() {\n            var attr = kendo.attr(\"role\");\n            var pivotEl = this.element\n                .closest(\"[\" + attr + \"=pivotcontainer]\")\n                .find(\"[\" + attr + \"=pivotgridv2]\");\n            var pivot;\n\n            $(\"#\" + this.options.configurator).toggleClass(\"k-hidden\");\n\n            if (pivotEl.length) {\n                pivot = pivotEl.getKendoPivotGridV2();\n                pivot._setContentWidth();\n                pivot._updateDimensions();\n            }\n        },\n\n        _attachEvents: function() {\n            this.element.on(\"click\" + NS, this.toggle.bind(this));\n        },\n\n        _element: function() {\n            var options = this.options;\n            this.element.addClass(\"k-pivotgrid-configurator-button\");\n            this.element.html(kendo.format(\"<span>{0}<span class='k-icon k-i-gear k-color-inherit'></span></span>\",options.text));\n        }\n    });\n\n    var PivotContainer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            Widget.fn.init.call(that, element, options);\n            that.element = $(element);\n            that.options = options;\n\n\n            that._addClasses();\n        },\n\n        options: {\n            name: \"PivotContainer\",\n            configuratorPosition: \"left\"\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            kendo.deepExtend(that.options, options);\n            this.init(this.element, this.options);\n        },\n\n        _addClasses: function() {\n            var options = this.options;\n            var className;\n            this.element.removeClass(\"k-flex-row k-flex-row-reverse k-flex-column k-flex-column-reverse\");\n\n            switch (options.configuratorPosition) {\n                case \"right\":\n                    className = \"k-flex-row\";\n                    break;\n                case \"left\":\n                    className = \"k-flex-row-reverse\";\n                    break;\n                case \"bottom\":\n                    className = \"k-flex-column\";\n                    break;\n                case \"top\":\n                    className = \"k-flex-column-reverse\";\n                    break;\n                default:\n                    className = \"k-flex-row\";\n            }\n\n            this.element\n                .addClass(\"k-d-flex k-pos-relative\")\n                .addClass(className);\n        }\n    });\n\n    var PivotGridV2 = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._dataSource();\n\n            that._bindConfigurator();\n\n            that._wrapper();\n\n            that._columnHeadersWrapper = $('<div class=\"k-pivotgrid-column-headers\"></div>');\n            that._rowHeadersWrapper = $('<div class=\"k-pivotgrid-row-headers\"></div>');\n            that._contentWrapper = $('<div class=\"k-pivotgrid-values\"></div>');\n\n            that.wrapper.append(that._columnHeadersWrapper);\n            that.wrapper.append(that._rowHeadersWrapper);\n            that.wrapper.append(that._contentWrapper);\n\n            that._columnBuilder = new ColumnRowBuilder( { template: this.options.columnHeaderTemplate, axes: \"columns\" });\n            that._rowBuilder = new ColumnRowBuilder( { template: this.options.rowHeaderTemplate, axes: \"rows\" });\n            that._contentBuilder = new ContentBuilderV2( { template: this.options.dataCellTemplate || DATACELL_TEMPLATE });\n\n            that._scrollable();\n            that._rowHeadersWrapper\n                .add(that._columnHeadersWrapper)\n                .on(\"click\", \"span.k-icon\", function() {\n                    var button = $(this);\n                    var path = button.parent().attr(kendo.attr(\"key\"));\n                    var expanded = button.hasClass(\"k-i-arrow-chevron-up\");\n                    var isRow = button.closest(\".k-pivotgrid-row-headers\").length !== 0;\n                    var paths = path.split(\",\");\n                    var eventName = expanded ? COLLAPSEMEMBER : EXPANDMEMBER;\n\n                    if (that.trigger(eventName, { path: paths, axis: isRow ? \"rows\" : \"columns\" })) {\n                        return;\n                    }\n\n                    var reducerPayLoad = {\n                        type: \"HEADERS_ACTION_TOGGLE\",\n                        payload: paths,\n                        tree: isRow ? that._rowBuilder.getTree() : that._columnBuilder.getTree()\n                    };\n                    var currentAxes = isRow ? that.dataSource._rows : that.dataSource._columns;\n                    var newHeaders = headersReducer(currentAxes, reducerPayLoad);\n\n                    that.dataSource._preventRefresh = true;\n\n                    if (isRow) {\n                        that.dataSource.rows(newHeaders);\n                    } else {\n                        that.dataSource.columns(newHeaders);\n                    }\n                 });\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            DATABINDING,\n            DATABOUND,\n            EXPANDMEMBER,\n            COLLAPSEMEMBER\n        ],\n\n        options: {\n            name: \"PivotGridV2\",\n            autoBind: true,\n            height: null,\n            columnWidth: null,\n            configurator: \"\",\n            columnHeaderTemplate: null,\n            rowHeaderTemplate: null,\n            dataCellTemplate: null\n        },\n\n        destroy: function() {\n            var that = this;\n            Widget.fn.destroy.call(that);\n\n            if (that._windowResizeHandler) {\n                $(window).off(RESIZE + NS, that._windowResizeHandler);\n                that._windowResizeHandler = null;\n            }\n        },\n\n        _dataSource: function() {\n            var that = this;\n            var dataSource = that.options.dataSource;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that.dataSource && this._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.PivotDataSourceV2.create(dataSource)\n                                   .bind(CHANGE, that._refreshHandler)\n                                   .bind(PROGRESS, that._progressHandler)\n                                   .bind(ERROR, that._errorHandler);\n        },\n\n        _resize: function() {\n            var that = this;\n            that.wrapper[0].style.setProperty('--kendo-scrollbar-width', kendo.format(\"{0}px\", getScollWidth()));\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var columnsHeader = that._columnHeadersWrapper;\n            var rowsHeader = that._rowHeadersWrapper;\n\n            that._resize();\n            that._windowResizeHandler = that._resize.bind(that);\n\n            that._contentWrapper.scroll(function() {\n                kendo.scrollLeft(columnsHeader, this.scrollLeft);\n                rowsHeader.scrollTop(this.scrollTop);\n            });\n\n            rowsHeader.bind(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            $(window).on(RESIZE + NS, that._windowResizeHandler);\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var delta = kendo.wheelDeltaY(e);\n            var scrollTop = this._contentWrapper.scrollTop();\n\n            if (delta) {\n                e.preventDefault();\n                $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                this._rowHeadersWrapper.scrollTop(scrollTop + (-delta));\n                this._contentWrapper.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _wrapper: function() {\n            var height = this.options.height;\n\n            this.wrapper = this.element.addClass(\"k-widget k-pivotgrid\");\n\n            this.wrapper.append('<span class=\"k-pivotgrid-empty-cell\" />');\n\n            if (height) {\n                this.wrapper.css(\"height\", height);\n            }\n        },\n\n        _progress: function(toggle) {\n            kendo.ui.progress(this.wrapper, toggle);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _updateDimensions: function() {\n            var that = this;\n            that.wrapper.css({\n                \"grid-template-columns\": kendo.format(\"{0}px 1fr\", that._rowHeadersWrapper.find(\".k-pivotgrid-table\")[0].offsetWidth),\n                \"grid-template-rows\": kendo.format(\"{0}px 1fr\", that._columnHeadersWrapper.find(\".k-pivotgrid-table\")[0].offsetHeight),\n            });\n        },\n\n        _setContentWidth: function() {\n            if (!this.options.columnWidth) {\n                return;\n            }\n            var contentTable = this._contentWrapper.find(\"table\");\n            var columnTable = this._columnHeadersWrapper.children(\"table\");\n\n            var rowLength = contentTable.children(\"colgroup\").children().length;\n\n            var calculatedWidth = rowLength * this.options.columnWidth;\n            var minWidth = Math.ceil((calculatedWidth / this._contentWrapper.width()) * 100);\n\n            if (minWidth < 100) {\n                minWidth = 100;\n            }\n\n            contentTable.add(columnTable).css(\"width\", minWidth + \"%\");\n        },\n\n        _bindConfigurator: function() {\n            var configurator = this.options.configurator;\n            if (configurator) {\n                $(configurator).kendoPivotConfiguratorV2(\"setDataSource\", this.dataSource);\n            }\n        },\n\n        cellInfoByElement: function(element) {\n            element = $(element);\n\n            return this.cellInfo(element.index(), element.parent(\"tr\").index());\n        },\n\n        cellInfo: function(columnIndex, rowIndex) {\n            var contentBuilder = this._contentBuilder;\n            var dataIndex;\n            var dataItem;\n\n            if (columnIndex >= contentBuilder.columnsCount || columnIndex < 0 ||\n                rowIndex >= contentBuilder.rowsCount || rowIndex < 0) {\n                return null;\n            }\n\n            dataIndex = rowIndex * contentBuilder.columnsCount + columnIndex;\n            dataItem = contentBuilder.hash[dataIndex < 0 ? 0 : dataIndex];\n\n            return {\n                columnTuple: dataItem.columnTuple,\n                rowTuple: dataItem.rowTuple,\n                dataItem: dataItem.data\n            };\n        },\n\n        refresh: function() {\n            var that = this;\n\n            var dataSource = that.dataSource;\n\n            if (that.trigger(DATABINDING, { action: \"rebind\" } )) {\n                return;\n            }\n\n            that._columnBuilder.setTuples(dataSource._columnTuples);\n            that._columnHeadersWrapper.html(that._columnBuilder.build());\n\n            that._rowBuilder.setTuples(dataSource._rowTuples);\n            that._rowHeadersWrapper.html(that._rowBuilder.build());\n\n            that._contentBuilder.setRowColumnInfo({\n                columnHeaderLeafs: that._columnBuilder.getHeaderLeafs(),\n                rowHeaderLeafs: that._rowBuilder.getHeaderLeafs(),\n                columnHeaderBreadth: that._columnBuilder.getBreadth(),\n                rowHeaderDepth: that._rowBuilder.getBreadth(),\n                data: dataSource._view\n            });\n\n            that._contentWrapper.html(that._contentBuilder.build());\n\n            that._setContentWidth();\n            that._updateDimensions();\n\n            that._progress(false);\n\n            that.trigger(DATABOUND);\n        }\n    });\n\n    ui.plugin(PivotConfiguratorButton);\n    ui.plugin(PivotContainer);\n    ui.plugin(PivotGridV2);\n\n    var PivotGrid = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            var columnBuilder;\n            var rowBuilder;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._dataSource();\n\n            that._bindConfigurator();\n\n            that._wrapper();\n            that._createLayout();\n\n            that._columnBuilder = columnBuilder = new ColumnBuilder();\n            that._rowBuilder = rowBuilder = new RowBuilder();\n            that._contentBuilder = new ContentBuilder();\n\n            that._templates();\n\n            that.columnsHeader\n                .add(that.rowsHeader)\n                .on(\"click\", \"span.k-icon\", function() {\n                    var button = $(this);\n                    var builder = columnBuilder;\n                    var action = \"expandColumn\";\n                    var eventName;\n                    var path = button.attr(kendo.attr(\"path\"));\n                    var eventArgs = {\n                        axis: \"columns\",\n                        path: $.parseJSON(path)\n                    };\n\n                    if (button.parent().is(\"td\")) {\n                        builder = rowBuilder;\n                        action = \"expandRow\";\n                        eventArgs.axis = \"rows\";\n                    }\n\n                    var expanded = button.hasClass(STATE_EXPANDED);\n                    var metadata = builder.metadata[path];\n                    var request = metadata.expanded === undefined;\n\n                    eventName = expanded ? COLLAPSEMEMBER : EXPANDMEMBER;\n                    eventArgs.childrenLoaded = metadata.maxChildren > metadata.children;\n\n                    if (that.trigger(eventName, eventArgs)) {\n                        return;\n                    }\n\n                    builder.metadata[path].expanded = !expanded;\n\n                    button.toggleClass(STATE_EXPANDED, !expanded)\n                          .toggleClass(STATE_COLLAPSED, expanded);\n\n                    if (!expanded && request) {\n                        that.dataSource[action](eventArgs.path);\n                    } else {\n                        that.refresh();\n                    }\n                });\n\n            that._scrollable();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            DATABINDING,\n            DATABOUND,\n            EXPANDMEMBER,\n            COLLAPSEMEMBER\n        ],\n\n        options: {\n            name: \"PivotGrid\",\n            autoBind: true,\n            reorderable: true,\n            filterable: false,\n            sortable: false,\n            height: null,\n            columnWidth: 100,\n            configurator: \"\",\n            columnHeaderTemplate: null,\n            rowHeaderTemplate: null,\n            dataCellTemplate: null,\n            kpiStatusTemplate: null,\n            kpiTrendTemplate: null,\n            messages: {\n                measureFields: \"Drop Data Fields Here\",\n                columnFields: \"Drop Column Fields Here\",\n                rowFields: \"Drop Rows Fields Here\"\n            }\n        },\n\n        _templates: function() {\n            var columnTemplate = this.options.columnHeaderTemplate;\n            var rowTemplate = this.options.rowHeaderTemplate;\n            var dataTemplate = this.options.dataCellTemplate;\n            var kpiStatusTemplate = this.options.kpiStatusTemplate;\n            var kpiTrendTemplate = this.options.kpiTrendTemplate;\n\n            this._columnBuilder.template = kendo.template(columnTemplate || HEADER_TEMPLATE, { useWithBlock: !!columnTemplate });\n            this._contentBuilder.dataTemplate = kendo.template(dataTemplate || DATACELL_TEMPLATE, { useWithBlock: !!dataTemplate });\n            this._contentBuilder.kpiStatusTemplate = kendo.template(kpiStatusTemplate || KPISTATUS_TEMPLATE, { useWithBlock: !!kpiStatusTemplate });\n            this._contentBuilder.kpiTrendTemplate = kendo.template(kpiTrendTemplate || KPITREND_TEMPLATE, { useWithBlock: !!kpiTrendTemplate });\n            this._rowBuilder.template = kendo.template(rowTemplate || HEADER_TEMPLATE, { useWithBlock: !!rowTemplate });\n        },\n\n        _bindConfigurator: function() {\n            var configurator = this.options.configurator;\n            if (configurator) {\n                $(configurator).kendoPivotConfigurator(\"setDataSource\", this.dataSource);\n            }\n        },\n\n        cellInfoByElement: function(element) {\n            element = $(element);\n\n            return this.cellInfo(element.index(), element.parent(\"tr\").index());\n        },\n\n        cellInfo: function(columnIndex, rowIndex) {\n            var contentBuilder = this._contentBuilder;\n            var columnInfo = contentBuilder.columnIndexes[columnIndex || 0];\n            var rowInfo = contentBuilder.rowIndexes[rowIndex || 0];\n            var dataIndex;\n\n            if (!columnInfo || !rowInfo) {\n                return null;\n            }\n\n            dataIndex = (rowInfo.index * contentBuilder.rowLength) + columnInfo.index;\n\n            return {\n                columnTuple: columnInfo.tuple,\n                rowTuple: rowInfo.tuple,\n                measure: columnInfo.measure || rowInfo.measure,\n                dataItem: this.dataSource.view()[dataIndex]\n            };\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.measuresTarget) {\n                this.measuresTarget.setDataSource(dataSource);\n            }\n\n            if (this.rowsTarget) {\n                this.rowsTarget.setDataSource(dataSource);\n            }\n\n            if (this.columnsTarget) {\n                this.columnsTarget.setDataSource(dataSource);\n            }\n\n            this._bindConfigurator();\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._templates();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._headerReflowTimeout);\n        },\n\n        _dataSource: function() {\n            var that = this;\n            var dataSource = that.options.dataSource;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that.dataSource && this._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(STATERESET, that._stateResetHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._stateResetHandler = that._stateReset.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.PivotDataSource.create(dataSource)\n                                   .bind(CHANGE, that._refreshHandler)\n                                   .bind(PROGRESS, that._progressHandler)\n                                   .bind(STATERESET, that._stateResetHandler)\n                                   .bind(ERROR, that._errorHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _stateReset: function() {\n            this._columnBuilder.reset();\n            this._rowBuilder.reset();\n        },\n\n        _wrapper: function() {\n            var height = this.options.height;\n\n            this.wrapper = this.element.addClass(\"k-widget k-pivot\");\n\n            if (height) {\n                this.wrapper.css(\"height\", height);\n            }\n        },\n\n        _measureFields: function() {\n            this.measureFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-measures\");\n\n            this.measuresTarget = this._createSettingTarget(this.measureFields, {\n                setting: \"measures\",\n                messages: {\n                    empty: this.options.messages.measureFields\n                }\n            });\n        },\n\n        _createSettingTarget: function(element, options) {\n            var template;\n            var sortable = options.sortable;\n            var icons = '';\n\n            if (sortable) {\n                icons += '#if (data.sortIcon) {#';\n                icons += '<span class=\"k-chip-action\"><span class=\"k-icon ${data.sortIcon}-sm\"></span></span>';\n                icons += '#}#';\n            }\n\n            if (options.filterable || sortable) {\n                icons += '<span class=\"k-setting-fieldmenu k-chip-action\"><span class=\"k-icon k-i-more-vertical\"></span></span>';\n            }\n            if (this.options.reorderable) {\n                icons += '<span class=\"k-setting-delete k-chip-action\"><span class=\"k-icon k-i-close\"></span></span>';\n            }\n\n            template = ''\n                + '<span class=\"k-chip k-chip-md k-rounded-full k-chip-solid k-chip-solid-base\" tabindex=\"0\" data-' + kendo.ns + 'name=\"${data.name}\">'\n                    + '<span class=\"k-chip-content\">'\n                        + '<span class=\"k-chip-text\">${data.name}</span>'\n                    + '</span>'\n                    + '<span class=\"k-chip-actions k-field-actions\">' + icons + '</span>'\n                + '</span>';\n\n            return new kendo.ui.PivotSettingTarget(element, $.extend({\n                dataSource: this.dataSource,\n                template: template,\n                emptyTemplate: '<span class=\"k-empty\">${data}</span>',\n                enabled: this.options.reorderable\n            }, options));\n        },\n\n        _initSettingTargets: function() {\n            this.columnsTarget = this._createSettingTarget(this.columnFields, {\n                connectWith: this.rowFields,\n                setting: \"columns\",\n                filterable: this.options.filterable,\n                sortable: this.options.sortable,\n                messages: {\n                    empty: this.options.messages.columnFields,\n                    fieldMenu: this.options.messages.fieldMenu\n                }\n            });\n\n            this.rowsTarget = this._createSettingTarget(this.rowFields, {\n                connectWith: this.columnFields,\n                setting: \"rows\",\n                filterable: this.options.filterable,\n                sortable: this.options.sortable,\n                messages: {\n                    empty: this.options.messages.rowFields,\n                    fieldMenu: this.options.messages.fieldMenu\n                }\n            });\n        },\n\n        _createLayout: function() {\n            var that = this;\n            var layoutTable = $(LAYOUT_TABLE);\n            var leftContainer = layoutTable.find(\".k-pivot-rowheaders\");\n            var rightContainer = layoutTable.find(\".k-pivot-table\");\n            var gridWrapper = $(DIV).addClass(\"k-grid k-widget\");\n\n            that._measureFields();\n            that.columnFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-columns\");\n\n            that.rowFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-rows\");\n            that.columnsHeader = $('<div class=\"k-grid-header-wrap\" />')\n                                    .wrap('<div class=\"k-grid-header\" />');\n\n            that.columnsHeader.parent().css(\"padding-right\", kendo.support.scrollbar());\n\n            that.rowsHeader = $('<div class=\"k-grid k-widget k-alt\"/>');\n            that.content = $('<div class=\"k-grid-content\" />');\n\n            leftContainer.append(that.measureFields);\n            leftContainer.append(that.rowFields);\n            leftContainer.append(that.rowsHeader);\n\n            gridWrapper.append(that.columnsHeader.parent());\n            gridWrapper.append(that.content);\n\n            rightContainer.append(that.columnFields);\n            rightContainer.append(gridWrapper);\n\n            that.wrapper.append(layoutTable);\n\n            that.columnsHeaderTree = new kendo.dom.Tree(that.columnsHeader[0]);\n            that.rowsHeaderTree = new kendo.dom.Tree(that.rowsHeader[0]);\n            that.contentTree = new kendo.dom.Tree(that.content[0]);\n\n            that._initSettingTargets();\n        },\n\n        _progress: function(toggle) {\n            kendo.ui.progress(this.wrapper, toggle);\n        },\n\n        _resize: function() {\n            if (this.content[0].firstChild) {\n                this._setSectionsWidth();\n                this._setSectionsHeight();\n                this._setContentWidth();\n                this._setContentHeight();\n                this._columnHeaderReflow();\n            }\n        },\n\n        _columnHeaderReflow: function() {\n            var columnTable = this.columnsHeader.children(\"table\");\n\n            if (!kendo.support.browser.mozilla) {\n                return;\n            }\n\n            clearTimeout(this._headerReflowTimeout);\n\n            columnTable.css(\"table-layout\", \"auto\");\n\n            this._headerReflowTimeout = setTimeout(function() {\n                columnTable.css(\"table-layout\", \"\");\n            });\n        },\n\n        _setSectionsWidth: function() {\n            var rowsHeader = this.rowsHeader;\n            var leftColumn = rowsHeader.parent(\".k-pivot-rowheaders\").width(AUTO);\n            var width;\n\n            width = Math.max(outerWidth(this.measureFields), outerWidth(this.rowFields));\n            width = Math.max(rowsHeader.children(\"table\").width(), width);\n\n            leftColumn.width(width);\n        },\n\n        _setSectionsHeight: function() {\n            var measureFieldsHeight = this.measureFields.height(AUTO).height();\n            var columnFieldsHeight = this.columnFields.height(AUTO).height();\n            var rowFieldsHeight = this.rowFields.height(AUTO).innerHeight();\n            var columnsHeight = this.columnsHeader.height(AUTO).innerHeight();\n\n            var padding = rowFieldsHeight - this.rowFields.height();\n\n            var firstRowHeight = columnFieldsHeight > measureFieldsHeight ? columnFieldsHeight : measureFieldsHeight;\n            var secondRowHeight = columnsHeight > rowFieldsHeight ? columnsHeight : rowFieldsHeight;\n\n            this.measureFields.height(firstRowHeight);\n            this.columnFields.height(firstRowHeight);\n            this.rowFields.height(secondRowHeight - padding);\n            this.columnsHeader.height(secondRowHeight);\n        },\n\n        _setContentWidth: function() {\n            var contentTable = this.content.find(\"table\");\n            var columnTable = this.columnsHeader.children(\"table\");\n\n            var rowLength = contentTable.children(\"colgroup\").children().length;\n\n            var calculatedWidth = rowLength * this.options.columnWidth;\n            var minWidth = Math.ceil((calculatedWidth / this.content.width()) * 100);\n\n            if (minWidth < 100) {\n                minWidth = 100;\n            }\n\n            contentTable.add(columnTable).css(\"width\", minWidth + \"%\");\n\n            this._resetColspan(columnTable);\n        },\n\n        _setContentHeight: function() {\n            var that = this;\n            var content = that.content;\n            var rowsHeader = that.rowsHeader;\n            var innerHeight = that.wrapper.innerHeight();\n            var scrollbar = kendo.support.scrollbar();\n            var skipScrollbar = content[0].offsetHeight === content[0].clientHeight;\n            var height = that.options.height;\n\n            if (that.wrapper.is(\":visible\")) {\n                if (!innerHeight || !height) {\n                    if (skipScrollbar) {\n                        scrollbar = 0;\n                    }\n\n                    content.height(\"auto\");\n                    rowsHeader.height(content.height() - scrollbar);\n                    return;\n                }\n\n                innerHeight -= outerHeight(that.columnFields);\n                innerHeight -= outerHeight(that.columnsHeader.parent());\n\n                if (innerHeight <= scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                    innerHeight = scrollbar * 2 + 1;\n                    if (!skipScrollbar) {\n                        innerHeight += scrollbar;\n                    }\n                }\n\n                content.height(innerHeight);\n\n                if (skipScrollbar) {\n                    scrollbar = 0;\n                }\n\n                rowsHeader.height(innerHeight - scrollbar);\n            }\n        },\n\n        _resetColspan: function(columnTable) {\n            var that = this;\n            var cell = columnTable.children(\"tbody\").children().first().children().first();\n\n            if (that._colspan === undefined) {\n                that._colspan = cell.attr(\"colspan\");\n            }\n\n            cell.attr(\"colspan\", 1);\n\n            clearTimeout(that._layoutTimeout);\n\n            that._layoutTimeout = setTimeout(function() {\n                cell.attr(\"colspan\", that._colspan);\n                that._colspan = undefined;\n            });\n        },\n\n        _axisMeasures: function(axis) {\n            var result = [];\n            var dataSource = this.dataSource;\n            var measures = dataSource.measures();\n            var hasMeasure = measures.length > 1 || (measures[0] && measures[0].type);\n\n            if (dataSource.measuresAxis() === axis) {\n                if (dataSource[axis]().length === 0 || hasMeasure) {\n                    result = measures;\n                }\n            }\n\n            return result;\n        },\n\n        items: function() {\n            return [];\n        },\n\n        refresh: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n\n            var axes = dataSource.axes();\n            var columns = (axes.columns || {}).tuples || [];\n            var rows = (axes.rows || {}).tuples || [];\n\n            var columnBuilder = that._columnBuilder;\n            var rowBuilder = that._rowBuilder;\n\n            var columnAxis = {};\n            var rowAxis = {};\n\n            if (that.trigger(DATABINDING, { action: \"rebind\" } )) {\n                return;\n            }\n\n            columnBuilder.measures = that._axisMeasures(AXIS_COLUMNS);\n            rowBuilder.measures = that._axisMeasures(AXIS_ROWS);\n\n            that.columnsHeaderTree.render(columnBuilder.build(columns));\n            that.rowsHeaderTree.render(rowBuilder.build(rows));\n\n            columnAxis = {\n                indexes: columnBuilder._indexes,\n                measures: columnBuilder.measures,\n                metadata: columnBuilder.metadata\n            };\n\n            rowAxis = {\n                indexes: rowBuilder._indexes,\n                measures: rowBuilder.measures,\n                metadata: rowBuilder.metadata\n            };\n\n            that.contentTree.render(that._contentBuilder.build(dataSource.view(), columnAxis, rowAxis));\n\n            that._resize();\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            } else {\n                var touchScroller = kendo.touchScroller(that.content);\n\n                if (touchScroller && touchScroller.movable) {\n                    that.touchScroller = touchScroller;\n\n                    touchScroller.movable.bind(\"change\", function(e) {\n                        kendo.scrollLeft(that.columnsHeader, -e.sender.x);\n                        that.rowsHeader.scrollTop(-e.sender.y);\n                    });\n                }\n            }\n\n            that._progress(false);\n\n            that.trigger(DATABOUND);\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var columnsHeader = that.columnsHeader;\n            var rowsHeader = that.rowsHeader;\n\n            that.content.on(\"scroll\", function() {\n                kendo.scrollLeft(columnsHeader, this.scrollLeft);\n                rowsHeader.scrollTop(this.scrollTop);\n            });\n\n            rowsHeader.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var delta = kendo.wheelDeltaY(e);\n            var scrollTop = this.content.scrollTop();\n\n            if (delta) {\n                e.preventDefault();\n                //In Firefox DOMMouseScroll event cannot be canceled\n                $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                this.rowsHeader.scrollTop(scrollTop + (-delta));\n                this.content.scrollTop(scrollTop + (-delta));\n            }\n        }\n    });\n\n    var element = kendo.dom.element;\n    var htmlNode = kendo.dom.html;\n\n    var createMetadata = function(levelNum, memberIdx) {\n       return {\n            maxChildren: 0,\n            children: 0,\n            maxMembers: 0,\n            members: 0,\n            measures: 1,\n            levelNum: levelNum,\n            parentMember: memberIdx !== 0\n        };\n    };\n\n    var buildPath = function(tuple, index) {\n        var path = [];\n        var idx = 0;\n\n        for (; idx <= index; idx++) {\n            path.push(tuple.members[idx].name);\n        }\n\n        return path;\n    };\n\n    var tupleName = function(tuple, index) {\n        var name = \"\";\n        var idx = 0;\n\n        for (; idx <= index; idx++) {\n            name += tuple.members[idx].name;\n        }\n\n        return name;\n    };\n\n    var ContentBuilderV2 = Class.extend({\n        init: function(options) {\n            this.template = kendo.template(options.template);\n            this.hash = [];\n        },\n\n        setRowColumnInfo: function(options) {\n            this.data = options.data;\n            this.columnHeaderLeafs = options.columnHeaderLeafs;\n            this.rowHeaderLeafs = options.rowHeaderLeafs;\n            this.columnHeaderBreadth = options.columnHeaderBreadth;\n            this.rowHeaderDepth = options.rowHeaderDepth;\n            this.hash.length = 0;\n        },\n\n        addColElements: function(count) {\n            var html = \"\";\n\n            for (var index = 0; index < count; index++) {\n                html += \"<col>\";\n            }\n\n            this.table.find(\"colgroup\").append(html);\n        },\n\n        addRowElements: function(data) {\n            var that = this;\n            var body = that.table.find(\"tbody\");\n            var row;\n\n            for (var index = 0; index < data.length; index++) {\n                row = $('<tr class=\"k-pivotgrid-row\"></tr>');\n                body.append(row);\n                that.addColumCell(row, data[index], index);\n            }\n\n            this.rowsCount = data.length;\n        },\n\n        addColumCell: function(rowEl, rowItem, rowIndex) {\n            var that = this;\n            for (var index = 0; index < rowItem.cells.length; index++) {\n                var cell = rowItem.cells[index];\n                if (cell) {\n                    var cellEl = $('<td class=\"k-pivotgrid-cell\"></td>');\n                    if (this.rowHeaderLeafs[rowIndex].total || this.columnHeaderLeafs[index].total) {\n                        cellEl.addClass(\"k-pivotgrid-header-total\");\n                    }\n                    cellEl.append(that.template({\n                        dataItem: cell.data,\n                        rowTuple: cell.rowTuple,\n                        columnTuple: cell.columnTuple\n                    }));\n                    this.hash.push(cell);\n                    rowEl.append(cellEl);\n                }\n            }\n        },\n\n        build: function() {\n            var data = toData((this.data || []).slice(), this.columnHeaderLeafs, this.rowHeaderLeafs, this.columnHeaderBreadth, this.rowHeaderDepth);\n            var that = this;\n\n            var table = $(\"<table class='k-pivotgrid-table'><colgroup></colgroup><tbody class='k-pivotgrid-tbody'></tbody></table>\");\n\n            that.table = table;\n            that.addColElements(this.columnHeaderLeafs.length);\n            that.addRowElements(data);\n            this.rowsCount = data.length;\n            this.columnsCount = this.columnHeaderLeafs.length;\n\n            return that.table;\n        }\n    });\n\n    var ColumnRowBuilder = Class.extend({\n        init: function(options) {\n            this.tuples = options.tuples;\n            this.axes = options.axes;\n            this.headerTemplate = kendo.template(HEADERTEMPLATE);\n            if (options.template) {\n                this.template = kendo.template(options.template);\n            }\n        },\n\n        setTuples: function(tuples) {\n            this.tuples = tuples;\n        },\n\n        addColElements: function(count) {\n            var html = \"\";\n\n            for (var index = 0; index < count; index++) {\n                html += \"<col>\";\n            }\n\n            this.table.find(\"colgroup\").append(html);\n        },\n\n        addRowElements: function(columnHeaderRows) {\n            var that = this;\n            var body = that.table.find(\"tbody\");\n            var row;\n\n            for (var index = 0; index < columnHeaderRows.length; index++) {\n                row = $('<tr class=\"k-pivotgrid-row\"></tr>');\n                body.append(row);\n                that.addColumCell(row, columnHeaderRows[index]);\n            }\n        },\n\n        addColumCell: function(rowEl, rowItem) {\n            var that = this;\n            var cellEl;\n            var cell;\n\n            for (var index = 0; index < rowItem.cells.length; index++) {\n                cell = rowItem.cells[index];\n                if (cell) {\n                    cellEl = $(that.headerTemplate({\n                        rowspan: cell.rowSpan,\n                        colspan: cell.colSpan,\n                        key: cell.path.join(\",\") + (cell.total ? '|[TOTAL]' : ''),\n                        iconClass: (cell.children && cell.children.length) ? \"up\" : \"down\",\n                        expandable: cell.hasChildren && !cell.total,\n                        headerClass: kendo.format(\"k-pivotgrid-cell{0}{1}\", cell.total ? \" k-pivotgrid-header-total\" : \"\",cell.levelNum === 0 ? \" k-pivotgrid-header-root\" : \"\")\n                    }));\n                    cellEl.append(that.template ? that.template({ member: cell }) : cell.caption);\n                    rowEl.append(cellEl);\n                }\n            }\n        },\n\n        build: function() {\n            var tree = toTree((this.tuples || []).slice());\n            var treeData = this.axes == \"columns\" ? toColumns(tree) : toRows(tree);\n            var headerRows = treeData[0];\n            var headerLeafs = treeData[1];\n            var breadth = treeData[2];\n            var rowHeaderBreadth = treeData[3];\n            var that = this;\n            that._tree = tree;\n            that._breadth = breadth;\n            that._headerLeafs = headerLeafs;\n\n            var table = $(\"<table class='k-pivotgrid-table'><colgroup></colgroup><tbody class='k-pivotgrid-tbody'></tbody></table>\");\n\n            that.table = table;\n            that.addColElements(this.axes == \"columns\" ? headerLeafs.length : rowHeaderBreadth);\n            that.addRowElements(headerRows);\n\n            return that.table;\n        },\n\n        getTree: function() {\n            return this._tree;\n        },\n\n        getBreadth: function() {\n            return this._breadth;\n        },\n\n        getHeaderLeafs: function() {\n            return this._headerLeafs;\n        }\n    });\n\n    var ColumnBuilder = Class.extend({\n        init: function() {\n            this.measures = 1;\n            this.metadata = {};\n        },\n\n        build: function(tuples) {\n            var tbody = this._tbody(tuples);\n            var colgroup = this._colGroup();\n\n            return [\n                element(\"table\", null, [colgroup, tbody])\n            ];\n        },\n\n        reset: function() {\n            this.metadata = {};\n        },\n\n        _colGroup: function() {\n            var length = this._rowLength();\n            var children = [];\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n            }\n\n            return element(\"colgroup\", null, children);\n        },\n\n        _tbody: function(tuples) {\n            var root = tuples[0];\n\n            this.map = {};\n            this.rows = [];\n            this.rootTuple = root;\n\n            this._indexes = [];\n\n            if (root) {\n                this._buildRows(root, 0);\n                this._normalize();\n            } else {\n                this.rows.push(element(\"tr\", null, [ element(\"th\", null, [ htmlNode(\"&nbsp;\") ]) ]));\n            }\n\n            return element(\"tbody\", null, this.rows);\n        },\n\n        _normalize: function() {\n            var rows = this.rows;\n            var rowsLength = rows.length;\n            var rowIdx = 0;\n            var row;\n\n            var cellsLength;\n            var cellIdx;\n            var cells;\n            var cell;\n\n            for (; rowIdx < rowsLength; rowIdx++) {\n                row = rows[rowIdx];\n\n                if (row.rowSpan === 1) {\n                    continue;\n                }\n\n                cells = row.children;\n\n                cellIdx = 0;\n                cellsLength = cells.length;\n\n                for (; cellIdx < cellsLength; cellIdx++) {\n                    cell = cells[cellIdx];\n\n                    if (cell.tupleAll) {\n                        cell.attr.rowSpan = row.rowSpan;\n                    }\n                }\n            }\n        },\n\n        _rowIndex: function(row) {\n            var rows = this.rows;\n            var length = rows.length;\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                if (rows[idx] === row) {\n                    break;\n                }\n            }\n\n            return idx;\n        },\n\n        _rowLength: function() {\n            var cells = this.rows[0] ? this.rows[0].children : [];\n            var length = cells.length;\n            var rowLength = 0;\n            var idx = 0;\n\n            if (length) {\n                for (; idx < length; idx++) {\n                    rowLength += cells[idx].attr.colSpan || 1;\n                }\n            }\n\n            if (!rowLength) {\n                rowLength = this.measures;\n            }\n\n            return rowLength;\n        },\n\n        _row: function(tuple, memberIdx, parentMember) {\n            var rootName = this.rootTuple.members[memberIdx].name;\n            var levelNum = tuple.members[memberIdx].levelNum;\n            var rowKey = rootName + levelNum;\n            var map = this.map;\n            var parentRow;\n            var children;\n\n            var row = map[rowKey];\n\n            if (!row) {\n                row = element(\"tr\", null, []);\n\n                row.parentMember = parentMember;\n                row.collapsed = 0;\n                row.colSpan = 0;\n                row.rowSpan = 1;\n\n                map[rowKey] = row;\n                parentRow = map[rootName + (Number(levelNum) - 1)];\n\n                if (parentRow) {\n                    children = parentRow.children;\n\n                    if (children[1] && children[1].attr.className.indexOf(\"k-alt\") === -1) {\n                        row.notFirst = true;\n                    } else {\n                        row.notFirst = parentRow.notFirst;\n                    }\n                }\n\n                this.rows.splice(this._rowIndex(parentRow) + 1, 0, row);\n            } else {\n                row.notFirst = false;\n\n                if (!row.parentMember || row.parentMember !== parentMember) {\n                    row.parentMember = parentMember;\n                    row.collapsed = 0;\n                    row.colSpan = 0;\n                }\n            }\n\n            return row;\n        },\n\n        _measures: function(measures, tuple, className) {\n            var map = this.map;\n            var row = map.measureRow;\n            var measure;\n\n            if (!row) {\n                row = element(\"tr\", null, []);\n                map.measureRow = row;\n                this.rows.push(row);\n            }\n\n            for (var idx = 0, length = measures.length; idx < length; idx++) {\n                measure = measures[idx];\n                row.children.push(this._cell((className || \"\"), [this._content(measure, tuple)], measure));\n            }\n\n            return length;\n        },\n\n        _content: function(member, tuple) {\n            return htmlNode(this.template({\n                member: member,\n                tuple: tuple\n            }));\n        },\n\n        _cell: function(className, children, member) {\n            var cell = element(\"th\", { className: \"k-header\" + className }, children);\n            cell.value = member.caption || member.name;\n            return cell;\n        },\n\n        _buildRows: function(tuple, memberIdx, parentMember) {\n            var members = tuple.members;\n            var member = members[memberIdx];\n            var nextMember = members[memberIdx + 1];\n\n            var row, childRow, children, childrenLength;\n            var cell, allCell, cellAttr;\n            var cellChildren = [];\n            var path;\n\n            var idx = 0;\n            var metadata;\n\n            var colSpan;\n            var collapsed = 0;\n            var memberCollapsed = 0;\n\n            if (member.measure) {\n                this._measures(member.children, tuple);\n                return;\n            }\n\n            path = kendo.stringify(buildPath(tuple, memberIdx));\n            row = this._row(tuple, memberIdx, parentMember);\n\n            children = member.children;\n            childrenLength = children.length;\n\n            metadata = this.metadata[path];\n            if (!metadata) {\n                this.metadata[path] = metadata = createMetadata(Number(member.levelNum), memberIdx);\n                metadata.rootLevelNum = Number(this.rootTuple.members[memberIdx].levelNum);\n            }\n\n            this._indexes.push({\n                path: path,\n                tuple: tuple\n            });\n\n            if (member.hasChildren) {\n                if (metadata.expanded === false) {\n                    collapsed = metadata.maxChildren;\n                    row.collapsed += collapsed;\n\n                    metadata.children = 0;\n                    childrenLength = 0;\n                }\n\n                cellAttr = { className: \"k-icon \" + (childrenLength ? STATE_EXPANDED : STATE_COLLAPSED) };\n                cellAttr[kendo.attr(\"path\")] = path;\n\n                cellChildren.push(element(\"span\", cellAttr));\n            }\n\n            cellChildren.push(this._content(member, tuple));\n            cell = this._cell((row.notFirst ? \" k-first\" : \"\"), cellChildren, member);\n\n            row.children.push(cell);\n            row.colSpan += 1;\n\n            if (childrenLength) {\n                allCell = this._cell(\" k-alt\", [this._content(member, tuple)], member);\n                row.children.push(allCell);\n\n                for (; idx < childrenLength; idx++) {\n                    childRow = this._buildRows(children[idx], memberIdx, member);\n                }\n\n                colSpan = childRow.colSpan;\n                collapsed = childRow.collapsed;\n\n                cell.attr.colSpan = colSpan;\n\n                metadata.children = colSpan;\n                metadata.members = 1;\n\n                row.colSpan += colSpan;\n                row.collapsed += collapsed;\n                row.rowSpan = childRow.rowSpan + 1;\n\n                if (nextMember) {\n                    if (nextMember.measure) {\n                        colSpan = this._measures(nextMember.children, tuple, \" k-alt\");\n                    } else {\n                        childRow = this._buildRows(tuple, memberIdx + 1);\n                        colSpan = childRow.colSpan;\n\n                        row.collapsed += childRow.collapsed;\n                        memberCollapsed = childRow.collapsed;\n                    }\n\n                    allCell.attr.colSpan = colSpan;\n                    colSpan -= 1;\n\n                    metadata.members += colSpan;\n                    row.colSpan += colSpan;\n                }\n            } else if (nextMember) {\n                if (nextMember.measure) {\n                    colSpan = this._measures(nextMember.children, tuple);\n                } else {\n                    childRow = this._buildRows(tuple, memberIdx + 1);\n                    colSpan = childRow.colSpan;\n\n                    row.collapsed += childRow.collapsed;\n                    memberCollapsed = childRow.collapsed;\n                }\n\n                metadata.members = colSpan;\n\n                if (colSpan > 1) {\n                    cell.attr.colSpan = colSpan;\n                    row.colSpan += colSpan - 1;\n                }\n            }\n\n            if (metadata.maxMembers < (metadata.members + memberCollapsed)) {\n                metadata.maxMembers = metadata.members + memberCollapsed;\n            }\n\n            children = metadata.children + collapsed;\n\n            if (metadata.maxChildren < children) {\n                metadata.maxChildren = children;\n            }\n\n            (allCell || cell).tupleAll = true;\n\n            return row;\n        }\n    });\n\n    var RowBuilder = Class.extend({\n        init: function() {\n            this.metadata = {};\n        },\n\n        build: function(tuples) {\n            var tbody = this._tbody(tuples);\n            var colgroup = this._colGroup();\n\n            return [\n                element(\"table\", null, [colgroup, tbody])\n            ];\n        },\n\n        reset: function() {\n            this.metadata = {};\n        },\n\n        _rowLength: function() {\n            var children = this.rows[0].children;\n            var length = 0;\n            var idx = 0;\n\n            var cell = children[idx];\n\n            while (cell) {\n                length += (cell.attr.colSpan || 1);\n                cell = children[++idx];\n            }\n\n            return length;\n        },\n\n        _colGroup: function() {\n            var length = this._rowLength();\n            var children = [];\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n            }\n\n            return element(\"colgroup\", null, children);\n        },\n\n        _tbody: function(tuples) {\n            var root = tuples[0];\n\n            this.rootTuple = root;\n            this.rows = [];\n            this.map = {};\n\n            this._indexes = [];\n\n            if (root) {\n                this._buildRows(root, 0);\n                this._normalize();\n            } else {\n                this.rows.push(element(\"tr\", null, [ element(\"td\", null, [ htmlNode(\"&nbsp;\") ]) ]));\n            }\n\n            return element(\"tbody\", null, this.rows);\n        },\n\n        _normalize: function() {\n            var rows = this.rows;\n            var rowsLength = rows.length;\n            var rowIdx = 0;\n\n            var members = this.rootTuple.members;\n            var firstMemberName = members[0].name;\n            var membersLength = members.length;\n            var memberIdx = 0;\n\n            var row;\n            var cell;\n            var maxcolSpan;\n            var map = this.map;\n            var allRow;\n\n            for (; rowIdx < rowsLength; rowIdx++) {\n                row = rows[rowIdx];\n\n                for (memberIdx = 0; memberIdx < membersLength; memberIdx++) {\n                    maxcolSpan = this[members[memberIdx].name];\n                    cell = row.colSpan[\"dim\" + memberIdx];\n\n                    if (cell && cell.colSpan < maxcolSpan) {\n                        cell.attr.colSpan = (maxcolSpan - cell.colSpan) + 1;\n                    }\n                }\n            }\n\n            row = map[firstMemberName];\n            allRow = map[firstMemberName + \"all\"];\n\n            if (row) {\n                row.children[0].attr.className = \"k-first\";\n            }\n\n            if (allRow) {\n                allRow.children[0].attr.className += \" k-first\";\n            }\n        },\n\n        _row: function(children) {\n            var row = element(\"tr\", null, children);\n            row.rowSpan = 1;\n            row.colSpan = {};\n\n            this.rows.push(row);\n\n            return row;\n        },\n\n        _content: function(member, tuple) {\n            return htmlNode(this.template({\n                member: member,\n                tuple: tuple\n            }));\n        },\n\n        _cell: function(className, children, member) {\n            var cell = element(\"td\", { className: className }, children);\n            cell.value = member.caption || member.name;\n            return cell;\n        },\n\n        _buildRows: function(tuple, memberIdx) {\n            var map = this.map;\n            var path;\n\n            var members = tuple.members;\n            var member = members[memberIdx];\n            var nextMember = members[memberIdx + 1];\n\n            var children = member.children;\n            var childrenLength = children.length;\n\n            var levelNum = Number(member.levelNum);\n            var rootName = this.rootTuple.members[memberIdx].name;\n            var tuplePath = buildPath(tuple, memberIdx - 1).join(\"\");\n            var rootLevelNum = Number(this.rootTuple.members[memberIdx].levelNum);\n            var parentName = tuplePath + (rootLevelNum === levelNum ? \"\" : (member.parentName || \"\"));\n            var row = map[parentName + \"all\"] || map[parentName];\n            var colSpan = levelNum + 1;\n\n            var cell, allCell;\n            var childRow, allRow;\n            var metadata;\n            var className;\n            var cellChildren = [];\n            var expandIconAttr;\n            var idx;\n\n            if (!row || row.hasChild) {\n                row = this._row();\n            } else {\n                row.hasChild = true;\n            }\n\n            if (member.measure) {\n                className = row.allCell ? \"k-grid-footer\" : \"\";\n                row.children.push(this._cell(className, [ this._content(children[0], tuple) ], children[0]));\n\n                row.rowSpan = childrenLength;\n\n                for (idx = 1; idx < childrenLength; idx++) {\n                    this._row([ this._cell(className, [ this._content(children[idx], tuple) ], children[idx]) ]);\n                }\n\n                return row;\n            }\n\n            map[tuplePath + member.name] = row;\n\n            path = kendo.stringify(buildPath(tuple, memberIdx));\n\n            metadata = this.metadata[path];\n            if (!metadata) {\n                this.metadata[path] = metadata = createMetadata(levelNum, memberIdx);\n                metadata.rootLevelNum = rootLevelNum;\n            }\n\n            this._indexes.push({\n                path: path,\n                tuple: tuple\n            });\n\n            if (member.hasChildren) {\n                if (metadata.expanded === false) {\n                    childrenLength = 0;\n                    metadata.children = 0;\n                }\n\n                expandIconAttr = { className: \"k-icon \" + (childrenLength ? STATE_EXPANDED : STATE_COLLAPSED) };\n                expandIconAttr[kendo.attr(\"path\")] = path;\n\n                cellChildren.push(element(\"span\", expandIconAttr));\n            }\n\n            cellChildren.push(this._content(member, tuple));\n\n            className = row.allCell && !childrenLength ? \"k-grid-footer\" : \"\";\n            cell = this._cell(className, cellChildren, member);\n            cell.colSpan = colSpan;\n\n            row.children.push(cell);\n            row.colSpan[\"dim\" + memberIdx] = cell;\n\n            if (!this[rootName] || this[rootName] < colSpan) {\n                this[rootName] = colSpan;\n            }\n\n            if (childrenLength) {\n                row.allCell = false;\n                row.hasChild = false;\n\n                for (idx = 0; idx < childrenLength; idx++) {\n                    childRow = this._buildRows(children[idx], memberIdx);\n\n                    if (row !== childRow) {\n                        row.rowSpan += childRow.rowSpan;\n                    }\n                }\n\n                if (row.rowSpan > 1) {\n                    cell.attr.rowSpan = row.rowSpan;\n                }\n\n                metadata.children = row.rowSpan;\n\n                allCell = this._cell(\"k-grid-footer\", [this._content(member, tuple)], member);\n                allCell.colSpan = colSpan;\n\n                allRow = this._row([ allCell ]);\n                allRow.colSpan[\"dim\" + memberIdx] = allCell;\n                allRow.allCell = true;\n\n                map[tuplePath + member.name + \"all\"] = allRow;\n\n                if (nextMember) {\n                    childRow = this._buildRows(tuple, memberIdx + 1);\n                    allCell.attr.rowSpan = childRow.rowSpan;\n                }\n\n                row.rowSpan += allRow.rowSpan;\n\n                metadata.members = allRow.rowSpan;\n\n            } else if (nextMember) {\n                row.hasChild = false;\n                this._buildRows(tuple, memberIdx + 1);\n\n                (allCell || cell).attr.rowSpan = row.rowSpan;\n\n                metadata.members = row.rowSpan;\n            }\n\n            if (metadata.maxChildren < metadata.children) {\n                metadata.maxChildren = metadata.children;\n            }\n\n            if (metadata.maxMembers < metadata.members) {\n                metadata.maxMembers = metadata.members;\n            }\n\n            return row;\n        }\n    });\n\n    var ContentBuilder = Class.extend({\n        init: function() {\n            this.columnAxis = {};\n            this.rowAxis = {};\n        },\n\n        build: function(data, columnAxis, rowAxis) {\n            var index = columnAxis.indexes[0];\n            var metadata = columnAxis.metadata[index ? index.path : undefined];\n\n            this.columnAxis = columnAxis;\n            this.rowAxis = rowAxis;\n\n            this.data = data;\n\n            this.rowLength = metadata ? metadata.maxChildren + metadata.maxMembers : columnAxis.measures.length || 1;\n\n            if (!this.rowLength) {\n                this.rowLength = 1;\n            }\n\n            var tbody = this._tbody();\n            var colgroup = this._colGroup();\n\n            return [\n                element(\"table\", null, [colgroup, tbody])\n            ];\n        },\n\n        _colGroup: function() {\n            var length = this.columnAxis.measures.length || 1;\n            var children = [];\n            var idx = 0;\n\n            if (this.rows[0]) {\n                length = this.rows[0].children.length;\n            }\n\n            for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n            }\n\n            return element(\"colgroup\", null, children);\n        },\n\n        _tbody: function() {\n            this.rows = [];\n\n            if (this.data[0]) {\n                this.columnIndexes = this._indexes(this.columnAxis, this.rowLength);\n                this.rowIndexes = this._indexes(this.rowAxis, Math.ceil(this.data.length / this.rowLength));\n\n                this._buildRows();\n            } else {\n                this.rows.push(element(\"tr\", null, [ element(\"td\", null, [ htmlNode(\"&nbsp;\") ]) ]));\n            }\n\n            return element(\"tbody\", null, this.rows);\n        },\n\n        _indexes: function(axisInfo, total) {\n            var result = [];\n            var axisInfoMember;\n            var indexes = axisInfo.indexes;\n            var metadata = axisInfo.metadata;\n            var measures = axisInfo.measures;\n            var measuresLength = measures.length || 1;\n\n            var current;\n            var dataIdx = 0;\n            var firstEmpty = 0;\n\n            var idx = 0;\n            var length = indexes.length;\n            var measureIdx;\n            var index;\n\n            var children;\n            var skipChildren;\n\n            if (!length) {\n                for (measureIdx = 0; measureIdx < measuresLength; measureIdx++) {\n                    result[measureIdx] = {\n                        index: measureIdx,\n                        measure: measures[measureIdx],\n                        tuple: null\n                    };\n                }\n\n                return result;\n            }\n\n            for (; idx < length; idx++) {\n                axisInfoMember = indexes[idx];\n                current = metadata[axisInfoMember.path];\n                children = current.children + current.members;\n                skipChildren = 0;\n\n                if (children) {\n                    children -= measuresLength;\n                }\n\n                if (current.expanded === false && current.children !== current.maxChildren) {\n                    skipChildren = current.maxChildren;\n                }\n\n                if (current.parentMember && current.levelNum === current.rootLevelNum) {\n                    children = -1;\n                }\n\n                if (children > -1) {\n                    for (measureIdx = 0; measureIdx < measuresLength; measureIdx++) {\n                        index = children + measureIdx;\n                        if (!current.children) {\n                            index += firstEmpty;\n                        }\n\n                        result[children + firstEmpty + measureIdx] = {\n                            children: children,\n                            index: dataIdx,\n                            measure: measures[measureIdx],\n                            tuple: axisInfoMember.tuple\n                        };\n                        dataIdx += 1;\n                    }\n\n                    while (result[firstEmpty] !== undefined) {\n                        firstEmpty += 1;\n                    }\n                }\n\n                if (firstEmpty === total) {\n                    break;\n                }\n\n                dataIdx += skipChildren;\n            }\n\n            return result;\n        },\n\n        _buildRows: function() {\n            var rowIndexes = this.rowIndexes;\n            var length = rowIndexes.length;\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                var rowIndex = rowIndexes[idx];\n                if (rowIndex) {\n                    this.rows.push(this._buildRow(rowIndex));\n                }\n            }\n        },\n\n        _buildRow: function(rowInfo) {\n            var startIdx = rowInfo.index * this.rowLength;\n            var columnIndexes = this.columnIndexes;\n            var length = columnIndexes.length;\n            var columnInfo;\n            var cells = [];\n            var idx = 0;\n\n            var templateInfo;\n            var cell, cellContent;\n            var attr, dataItem, measure;\n\n            for (; idx < length; idx++) {\n                columnInfo = columnIndexes[idx];\n\n                if (columnInfo === undefined) {\n                    continue;\n                }\n\n                attr = {};\n                if (columnInfo.children) {\n                    attr.className = \"k-alt\";\n                }\n\n                cellContent = \"\";\n                dataItem = this.data[startIdx + columnInfo.index];\n                measure = columnInfo.measure || rowInfo.measure;\n\n                templateInfo = {\n                    columnTuple: columnInfo.tuple,\n                    rowTuple: rowInfo.tuple,\n                    measure: measure,\n                    dataItem: dataItem\n                };\n\n                if (dataItem.value !== \"\" && measure && measure.type) {\n                    if (measure.type === \"status\") {\n                        cellContent = this.kpiStatusTemplate(templateInfo);\n                    } else if (measure.type === \"trend\") {\n                        cellContent = this.kpiTrendTemplate(templateInfo);\n                    }\n                }\n\n                if (!cellContent) {\n                    cellContent = this.dataTemplate(templateInfo);\n                }\n\n                cell = element(\"td\", attr, [ htmlNode(cellContent) ]);\n                cell.value = dataItem.value;\n                cells.push(cell);\n            }\n\n            attr = {};\n            if (rowInfo.children) {\n                attr.className = \"k-grid-footer\";\n            }\n\n            return element(\"tr\", attr, cells);\n        }\n    });\n\n    ui.plugin(PivotGrid);\n\n    kendo.PivotExcelExporter = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n\n            this.widget = options.widget;\n            this.dataSource = this.widget.dataSource;\n        },\n\n        _columns: function() {\n            var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n            var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n\n            var columnHeaderLength = columnHeaderTable.children[0].children.length;\n            var rowHeaderLength = rowHeaderTable.children[0].children.length;\n\n            var width = this.widget.options.columnWidth;\n            var result = [];\n            var idx;\n\n            if (rowHeaderLength && this.dataSource.data()[0]) {\n                for (idx = 0; idx < rowHeaderLength; idx++) {\n                    result.push({\n                        autoWidth: true\n                    });\n                }\n            }\n\n            for (idx = 0; idx < columnHeaderLength; idx++) {\n                result.push({\n                    autoWidth: false,\n                    width: width\n                });\n            }\n\n            return result;\n        },\n\n        _cells: function(rows, type, callback) {\n            var result = [];\n\n            var i = 0;\n            var length = rows.length;\n\n            var cellsLength;\n            var row, cells;\n            var j, cell;\n\n            for (; i < length; i++) {\n                row = [];\n                cells = rows[i].children;\n                cellsLength = cells.length;\n\n                for (j = 0; j < cellsLength; j++) {\n                    cell = cells[j];\n\n                    row.push({\n                        background: \"#7a7a7a\",\n                        color: \"#fff\",\n                        value: cell.value,\n                        colSpan: cell.attr.colSpan || 1,\n                        rowSpan: cell.attr.rowSpan || 1\n                    });\n                }\n\n                if (callback) {\n                    callback(row, i);\n                }\n\n                result.push({\n                    cells: row,\n                    type: type\n                });\n            }\n\n            return result;\n        },\n\n        _rows: function() {\n            var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n            var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n\n            var columnHeaderLength = columnHeaderTable.children[0].children.length;\n            var rowHeaderLength = rowHeaderTable.children[0].children.length;\n\n            var columnHeaderRows = columnHeaderTable.children[1].children;\n            var rowHeaderRows = rowHeaderTable.children[1].children;\n            var contentRows = this.widget.contentTree.children[0].children[1].children;\n\n            var columnRows = this._cells(columnHeaderRows, \"header\");\n\n            if (rowHeaderLength) {\n                columnRows[0].cells.splice(0, 0, {\n                    background: \"#7a7a7a\",\n                    color: \"#fff\",\n                    value: \"\",\n                    colSpan: rowHeaderLength,\n                    rowSpan: columnHeaderRows.length\n                });\n            }\n\n            var dataCallback = function(row, index) {\n                var j = 0;\n                var cell, value;\n                var cells = contentRows[index].children;\n\n                for (; j < columnHeaderLength; j++) {\n                    cell = cells[j];\n                    value = Number(cell.value);\n\n                    if (isNaN(value)) {\n                        value = cell.value;\n                    }\n\n                    row.push({\n                        background: \"#dfdfdf\",\n                        color: \"#333\",\n                        value: value,\n                        colSpan: 1,\n                        rowSpan: 1\n                    });\n                }\n            };\n\n            var rowRows = this._cells(rowHeaderRows, \"data\", dataCallback);\n\n            return columnRows.concat(rowRows);\n        },\n\n        _freezePane: function() {\n            var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n            var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n\n            var rowHeaderLength = rowHeaderTable.children[0].children.length;\n            var columnHeaderRows = columnHeaderTable.children[1].children;\n\n            return {\n                colSplit: rowHeaderLength,\n                rowSplit: columnHeaderRows.length\n            };\n        },\n\n        workbook: function() {\n            var promise,\n                resolveFn = function() {\n                    return {\n                        sheets: [ {\n                            columns: this._columns(),\n                            rows: this._rows(),\n                            freezePane: this._freezePane(),\n                            filter: null\n                        } ]\n                    };\n                };\n\n            if (this.dataSource.view()[0]) {\n                promise = $.Deferred();\n                promise.resolve();\n            } else {\n                promise = this.dataSource.fetch();\n            }\n\n            return promise.then(resolveFn.bind(this));\n        }\n    });\n\n    var PivotExcelMixin = {\n        extend: function(proto) {\n           proto.events.push(\"excelExport\");\n           proto.options.excel = $.extend(proto.options.excel, this.options);\n           proto.saveAsExcel = this.saveAsExcel;\n        },\n        options: {\n            proxyURL: \"\",\n            filterable: false,\n            fileName: \"Export.xlsx\"\n        },\n        saveAsExcel: function() {\n            var excel = this.options.excel || {};\n\n            var exporter = new kendo.PivotExcelExporter({\n                widget: this\n            });\n\n            var resolveFn = function(book) {\n                if (!this.trigger(\"excelExport\", { workbook: book })) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n\n                    workbook.toDataURLAsync().then(function(dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    });\n                }\n            };\n\n            exporter.workbook().then(resolveFn.bind(this));\n        }\n    };\n\n    kendo.PivotExcelMixin = PivotExcelMixin;\n\n    if (kendo.ooxml && kendo.ooxml.Workbook) {\n        PivotExcelMixin.extend(PivotGrid.prototype);\n    }\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(PivotGrid.prototype);\n\n        PivotGrid.fn._drawPDF = function() {\n            return this._drawPDFShadow({\n                width: this.wrapper.width()\n            }, {\n                avoidLinks: this.options.pdf.avoidLinks\n            });\n        };\n    }\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(PivotGridV2.prototype);\n\n        PivotGridV2.fn._drawPDF = function() {\n            return this._drawPDFShadow({\n                width: this.wrapper.width()\n            }, {\n                avoidLinks: this.options.pdf.avoidLinks\n            });\n        };\n    }\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 36765:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.data\");\n\n/***/ }),\n\n/***/ 70548:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.dom\");\n\n/***/ }),\n\n/***/ 3073:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.pivot.common\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(6516);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}