{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    10847:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(54148), __webpack_require__(4832), __webpack_require__(32011), __webpack_require__(33367)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        var __meta__ = {\n          id: \"scheduler.recurrence\",\n          name: \"Recurrence\",\n          category: \"web\",\n          depends: [\"dropdownlist\", \"datepicker\", \"numerictextbox\", \"buttongroup\"],\n          hidden: true\n        };\n\n        (function ($, undefined) {\n          var kendo = window.kendo,\n              timezone = kendo.timezone,\n              Class = kendo.Class,\n              ui = kendo.ui,\n              Widget = ui.Widget,\n              DropDownList = ui.DropDownList,\n              ButtonGroup = ui.ButtonGroup,\n              kendoDate = kendo.date,\n              setTime = kendoDate.setTime,\n              setDayOfWeek = kendoDate.setDayOfWeek,\n              adjustDST = kendoDate.adjustDST,\n              firstDayOfMonth = kendoDate.firstDayOfMonth,\n              getMilliseconds = kendoDate.getMilliseconds,\n              DAYS_IN_LEAPYEAR = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366],\n              DAYS_IN_YEAR = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365],\n              MONTHS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n              WEEK_DAYS = {\n            0: \"SU\",\n            1: \"MO\",\n            2: \"TU\",\n            3: \"WE\",\n            4: \"TH\",\n            5: \"FR\",\n            6: \"SA\"\n          },\n              WEEK_DAYS_IDX = {\n            \"SU\": 0,\n            \"MO\": 1,\n            \"TU\": 2,\n            \"WE\": 3,\n            \"TH\": 4,\n            \"FR\": 5,\n            \"SA\": 6\n          },\n              DATE_FORMATS = [\"yyyy-MM-ddTHH:mm:ss.fffzzz\", \"yyyy-MM-ddTHH:mm:sszzz\", \"yyyy-MM-ddTHH:mm:ss\", \"yyyy-MM-ddTHH:mm\", \"yyyy-MM-ddTHH\", \"yyyy-MM-dd\", \"yyyyMMddTHHmmssfffzzz\", \"yyyyMMddTHHmmsszzz\", \"yyyyMMddTHHmmss\", \"yyyyMMddTHHmm\", \"yyyyMMddTHH\", \"yyyyMMdd\"],\n              RULE_NAMES = [\"months\", \"weeks\", \"yearDays\", \"monthDays\", \"weekDays\", \"hours\", \"minutes\", \"seconds\"],\n              RULE_NAMES_LENGTH = RULE_NAMES.length,\n              RECURRENCE_DATE_FORMAT = \"yyyyMMddTHHmmssZ\",\n              limitation = {\n            months: function (date, end, rule) {\n              var monthRules = rule.months,\n                  months = ruleValues(monthRules, date.getMonth() + 1),\n                  changed = false;\n\n              if (months !== null) {\n                if (months.length) {\n                  date.setMonth(months[0] - 1, 1);\n                } else {\n                  date.setFullYear(date.getFullYear() + 1, monthRules[0] - 1, 1);\n                }\n\n                changed = true;\n              }\n\n              return changed;\n            },\n            monthDays: function (date, end, rule) {\n              var monthLength,\n                  month,\n                  days,\n                  changed = false,\n                  hours = date.getHours(),\n                  normalize = function (monthDay) {\n                if (monthDay < 0) {\n                  monthDay = monthLength + monthDay + 1;\n                }\n\n                return monthDay;\n              };\n\n              while (date <= end) {\n                month = date.getMonth();\n                monthLength = getMonthLength(date);\n                days = ruleValues(rule.monthDays, date.getDate(), normalize);\n\n                if (days === null) {\n                  return changed;\n                }\n\n                changed = true;\n\n                if (days.length) {\n                  date.setMonth(month, days.sort(numberSortPredicate)[0]);\n                  adjustDST(date, hours);\n\n                  if (month === date.getMonth()) {\n                    break;\n                  }\n                } else {\n                  date.setMonth(month + 1, 1);\n                }\n              }\n\n              return changed;\n            },\n            yearDays: function (date, end, rule) {\n              var year,\n                  yearDays,\n                  changed = false,\n                  hours = date.getHours(),\n                  normalize = function (yearDay) {\n                if (yearDay < 0) {\n                  yearDay = year + yearDay;\n                }\n\n                return yearDay;\n              };\n\n              while (date < end) {\n                year = leapYear(date) ? 366 : 365;\n                yearDays = ruleValues(rule.yearDays, dayInYear(date), normalize);\n\n                if (yearDays === null) {\n                  return changed;\n                }\n\n                changed = true;\n                year = date.getFullYear();\n\n                if (yearDays.length) {\n                  date.setFullYear(year, 0, yearDays.sort(numberSortPredicate)[0]);\n                  adjustDST(date, hours);\n                  break;\n                } else {\n                  date.setFullYear(year + 1, 0, 1);\n                }\n              }\n\n              return changed;\n            },\n            weeks: function (date, end, rule) {\n              var weekStart = rule.weekStart,\n                  year,\n                  weeks,\n                  day,\n                  changed = false,\n                  hours = date.getHours(),\n                  normalize = function (week) {\n                if (week < 0) {\n                  week = 53 + week;\n                }\n\n                return week;\n              };\n\n              while (date < end) {\n                weeks = ruleValues(rule.weeks, weekInYear(date, weekStart), normalize);\n\n                if (weeks === null) {\n                  return changed;\n                }\n\n                changed = true;\n                year = date.getFullYear();\n\n                if (weeks.length) {\n                  day = weeks.sort(numberSortPredicate)[0] * 7 - 1;\n                  date.setFullYear(year, 0, day);\n                  setDayOfWeek(date, weekStart, -1);\n                  adjustDST(date, hours);\n                  break;\n                } else {\n                  date.setFullYear(year + 1, 0, 1);\n                }\n              }\n\n              return changed;\n            },\n            weekDays: function (date, end, rule) {\n              var offsetDate = new Date(date.getTime() + rule.offsets.start);\n              var normalizeDay = offsetDate.getDay() - date.getDay();\n              var weekDays = rule.weekDays;\n              var weekStart = rule.weekStart;\n              var weekDayRules = ruleWeekValues(weekDays, offsetDate, weekStart);\n              var hours = date.getHours();\n\n              var traverseRuleForNextMont = function (rule) {\n                var nextMonthFirstDay = new Date(date.getFullYear(), date.getMonth() + 1, 1);\n                var ruleDay = normalizeDayIndex(rule.day, weekStart);\n\n                if (nextMonthFirstDay.getDay() <= ruleDay) {\n                  if (!weekDayRule || normalizeDayIndex(weekDayRule.day, weekStart) > ruleDay) {\n                    weekDayRule = rule;\n                  }\n                }\n              };\n\n              var weekDayRule, day;\n\n              if (weekDayRules === null) {\n                return false;\n              }\n\n              weekDayRule = weekDayRules[0];\n\n              if (!weekDayRule) {\n                if (rule.freq === \"monthly\" && !rule.positions || rule.position > 0) {\n                  weekDays.forEach(traverseRuleForNextMont);\n                }\n\n                if (!weekDayRule) {\n                  weekDayRule = weekDays[0];\n                }\n\n                setDayOfWeek(date, weekStart);\n              }\n\n              day = weekDayRule.day;\n              day -= normalizeDay;\n\n              if (weekDayRule.offset) {\n                while (date <= end && !isInWeek(date, weekDayRule, weekStart)) {\n                  if (weekInMonth(date, weekStart) === numberOfWeeks(date, weekStart)) {\n                    date.setMonth(date.getMonth() + 1, 1);\n                    adjustDST(date, hours);\n                  } else {\n                    date.setDate(date.getDate() + 7);\n                    adjustDST(date, hours);\n                    setDayOfWeek(date, weekStart, -1);\n                  }\n                }\n              }\n\n              if (date.getDay() !== day) {\n                setDayOfWeek(date, day);\n              }\n\n              return true;\n            },\n            hours: function (date, end, rule) {\n              var hourRules = rule.hours,\n                  startTime = rule._startTime,\n                  startHours = startTime.getHours(),\n                  hours = ruleValues(hourRules, startHours),\n                  changed = false;\n\n              if (hours !== null) {\n                changed = true;\n                date.setHours(startHours);\n                adjustDST(date, startHours);\n\n                if (hours.length) {\n                  hours = hours[0];\n                  date.setHours(hours);\n                } else {\n                  hours = date.getHours();\n                  date.setDate(date.getDate() + 1);\n                  adjustDST(date, hours);\n                  hours = hourRules[0];\n                  date.setHours(hours);\n                  adjustDST(date, hours);\n                }\n\n                if (rule.minutes) {\n                  date.setMinutes(0);\n                }\n\n                startTime.setHours(hours, date.getMinutes());\n              }\n\n              return changed;\n            },\n            minutes: function (date, end, rule) {\n              var minuteRules = rule.minutes,\n                  currentMinutes = date.getMinutes(),\n                  minutes = ruleValues(minuteRules, currentMinutes),\n                  hours = rule._startTime.getHours(),\n                  changed = false;\n\n              if (minutes !== null) {\n                changed = true;\n\n                if (minutes.length) {\n                  minutes = minutes[0];\n                } else {\n                  hours += 1;\n                  minutes = minuteRules[0];\n                }\n\n                if (rule.seconds) {\n                  date.setSeconds(0);\n                }\n\n                date.setHours(hours, minutes);\n                hours = hours % 24;\n                adjustDST(date, hours);\n\n                rule._startTime.setHours(hours, minutes, date.getSeconds());\n              }\n\n              return changed;\n            },\n            seconds: function (date, end, rule) {\n              var secondRules = rule.seconds,\n                  hours = rule._startTime.getHours(),\n                  seconds = ruleValues(secondRules, date.getSeconds()),\n                  minutes = date.getMinutes(),\n                  changed = false;\n\n              if (seconds !== null) {\n                changed = true;\n\n                if (seconds.length) {\n                  date.setSeconds(seconds[0]);\n                } else {\n                  minutes += 1;\n                  date.setMinutes(minutes, secondRules[0]);\n\n                  if (minutes > 59) {\n                    minutes = minutes % 60;\n                    hours = (hours + 1) % 24;\n                  }\n                }\n\n                rule._startTime.setHours(hours, minutes, date.getSeconds());\n              }\n\n              return changed;\n            }\n          },\n              BaseFrequency = Class.extend({\n            next: function (date, rule) {\n              var startTime = rule._startTime,\n                  day = startTime.getDate(),\n                  minutes,\n                  seconds;\n\n              if (rule.seconds) {\n                seconds = date.getSeconds() + 1;\n                date.setSeconds(seconds);\n                startTime.setSeconds(seconds);\n                startTime.setDate(day);\n              } else if (rule.minutes) {\n                minutes = date.getMinutes() + 1;\n                date.setMinutes(minutes);\n                startTime.setMinutes(minutes);\n                startTime.setDate(day);\n              } else {\n                return false;\n              }\n\n              return true;\n            },\n            normalize: function (options) {\n              var rule = options.rule;\n\n              if (options.idx === 4 && rule.hours) {\n                rule._startTime.setHours(0);\n\n                this._hour(options.date, rule);\n              }\n            },\n            limit: function (date, end, rule) {\n              var interval = rule.interval,\n                  ruleName,\n                  firstRule,\n                  modified,\n                  idx,\n                  day;\n\n              while (date <= end) {\n                modified = firstRule = undefined;\n                day = date.getDate();\n\n                for (idx = 0; idx < RULE_NAMES_LENGTH; idx++) {\n                  ruleName = RULE_NAMES[idx];\n\n                  if (rule[ruleName]) {\n                    modified = limitation[ruleName](date, end, rule);\n\n                    if (firstRule !== undefined && modified) {\n                      break;\n                    } else {\n                      firstRule = modified;\n                    }\n                  }\n\n                  if (modified) {\n                    this.normalize({\n                      date: date,\n                      rule: rule,\n                      day: day,\n                      idx: idx\n                    });\n                  }\n                }\n\n                if ((interval === 1 || !this.interval(rule, date)) && idx === RULE_NAMES_LENGTH) {\n                  break;\n                }\n              }\n            },\n            interval: function (rule, current) {\n              var start = new Date(rule._startPeriod);\n              var date = new Date(current);\n              var hours = current.getHours();\n              var weekStart = rule.weekStart;\n              var interval = rule.interval;\n              var frequency = rule.freq;\n              var modified = false;\n              var excess = 0;\n              var month = 0;\n              var day = 1;\n              var diff;\n              var startTimeHours;\n\n              if (frequency === \"hourly\") {\n                diff = date.getTimezoneOffset() - start.getTimezoneOffset();\n                startTimeHours = rule._startTime.getHours();\n                date = date.getTime();\n\n                if (hours !== startTimeHours) {\n                  date += (startTimeHours - hours) * kendoDate.MS_PER_HOUR;\n                }\n\n                date -= start;\n\n                if (diff) {\n                  date -= diff * kendoDate.MS_PER_MINUTE;\n                }\n\n                diff = Math.floor(date / kendoDate.MS_PER_HOUR);\n                excess = intervalExcess(diff, interval);\n\n                if (excess !== 0) {\n                  this._hour(current, rule, excess);\n\n                  modified = true;\n                }\n              } else if (frequency === \"daily\") {\n                kendoDate.setTime(date, -start, true);\n                diff = Math.round(date / kendoDate.MS_PER_DAY);\n                excess = intervalExcess(diff, interval);\n\n                if (excess !== 0) {\n                  this._date(current, rule, excess);\n\n                  modified = true;\n                }\n              } else if (frequency === \"weekly\") {\n                excess = this._getNumberOfWeeksBetweenDates(start, current);\n                var normalizedCurrentIndex = normalizeDayIndex(current.getDay(), weekStart);\n                var normalizedStartIndex = normalizeDayIndex(start.getDay(), weekStart);\n\n                if (normalizedCurrentIndex < normalizedStartIndex) {\n                  excess += 1;\n                }\n\n                excess = intervalExcess(excess, interval);\n\n                if (excess !== 0) {\n                  kendoDate.setDayOfWeek(current, rule.weekStart, -1);\n                  current.setDate(current.getDate() + excess * 7);\n                  adjustDST(current, hours);\n                  modified = true;\n                }\n              } else if (frequency === \"monthly\") {\n                diff = current.getFullYear() - start.getFullYear();\n                diff = current.getMonth() - start.getMonth() + diff * 12;\n                excess = intervalExcess(diff, interval);\n\n                if (excess !== 0) {\n                  day = rule._hasRuleValue ? 1 : current.getDate();\n                  current.setFullYear(current.getFullYear(), current.getMonth() + excess, day);\n                  adjustDST(current, hours);\n                  modified = true;\n                }\n              } else if (frequency === \"yearly\") {\n                diff = current.getFullYear() - start.getFullYear();\n                excess = intervalExcess(diff, interval);\n\n                if (!rule.months) {\n                  month = current.getMonth();\n                }\n\n                if (!rule.yearDays && !rule.monthDays && !rule.weekDays) {\n                  day = current.getDate();\n                }\n\n                if (excess !== 0) {\n                  current.setFullYear(current.getFullYear() + excess, month, day);\n                  adjustDST(current, hours);\n                  modified = true;\n                }\n              }\n\n              return modified;\n            },\n            _getNumberOfWeeksBetweenDates: function (first, second) {\n              var weeks = (second - first) / 604800000;\n              var exactWeeks = Math.floor(weeks); //this is happening when weeks pass DST change\n\n              if (weeks - exactWeeks > 0.99) {\n                exactWeeks = Math.round(weeks);\n              }\n\n              return exactWeeks;\n            },\n            _hour: function (date, rule, interval) {\n              var startTime = rule._startTime,\n                  hours = startTime.getHours();\n\n              if (interval) {\n                hours += interval;\n              }\n\n              date.setHours(hours);\n              hours = hours % 24;\n              startTime.setHours(hours);\n              adjustDST(date, hours);\n            },\n            _date: function (date, rule, interval) {\n              var hours = date.getHours();\n              date.setDate(date.getDate() + interval);\n\n              if (!adjustDST(date, hours)) {\n                this._hour(date, rule);\n              }\n            }\n          }),\n              HourlyFrequency = BaseFrequency.extend({\n            next: function (date, rule) {\n              if (!BaseFrequency.fn.next(date, rule)) {\n                this._hour(date, rule, 1);\n              }\n            },\n            normalize: function (options) {\n              var rule = options.rule;\n\n              if (options.idx === 4) {\n                rule._startTime.setHours(0);\n\n                this._hour(options.date, rule);\n              }\n            }\n          }),\n              DailyFrequency = BaseFrequency.extend({\n            next: function (date, rule) {\n              if (!BaseFrequency.fn.next(date, rule)) {\n                this[rule.hours ? \"_hour\" : \"_date\"](date, rule, 1);\n              }\n            }\n          }),\n              WeeklyFrequency = DailyFrequency.extend({\n            setup: function (rule, eventStartDate) {\n              if (!rule.weekDays) {\n                rule.weekDays = [{\n                  day: eventStartDate.getDay(),\n                  offset: 0\n                }];\n              }\n            }\n          }),\n              MonthlyFrequency = BaseFrequency.extend({\n            next: function (date, rule) {\n              var day, hours;\n\n              if (!BaseFrequency.fn.next(date, rule)) {\n                if (rule.hours) {\n                  this._hour(date, rule, 1);\n                } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                  this._date(date, rule, 1);\n                } else {\n                  day = date.getDate();\n                  hours = date.getHours();\n                  date.setMonth(date.getMonth() + 1);\n                  adjustDST(date, hours);\n\n                  while (date.getDate() !== day) {\n                    date.setDate(day);\n                    adjustDST(date, hours);\n                  }\n\n                  this._hour(date, rule);\n                }\n              }\n            },\n            normalize: function (options) {\n              var rule = options.rule,\n                  date = options.date,\n                  hours = date.getHours();\n\n              if (options.idx === 0 && !rule.monthDays && !rule.weekDays) {\n                date.setDate(options.day);\n                adjustDST(date, hours);\n              } else {\n                BaseFrequency.fn.normalize(options);\n              }\n            },\n            setup: function (rule, eventStartDate, date) {\n              if (!rule.monthDays && !rule.weekDays) {\n                date.setDate(eventStartDate.getDate());\n              }\n            }\n          }),\n              YearlyFrequency = MonthlyFrequency.extend({\n            next: function (date, rule) {\n              var day,\n                  hours = date.getHours();\n\n              if (!BaseFrequency.fn.next(date, rule)) {\n                if (rule.hours) {\n                  this._hour(date, rule, 1);\n                } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                  this._date(date, rule, 1);\n                } else if (rule.months) {\n                  day = date.getDate();\n                  date.setMonth(date.getMonth() + 1);\n                  adjustDST(date, hours);\n\n                  while (date.getDate() !== day) {\n                    date.setDate(day);\n                    adjustDST(date, hours);\n                  }\n\n                  this._hour(date, rule);\n                } else {\n                  date.setFullYear(date.getFullYear() + 1);\n                  adjustDST(date, hours);\n\n                  this._hour(date, rule);\n                }\n              }\n            },\n            setup: function () {}\n          }),\n              frequencies = {\n            \"hourly\": new HourlyFrequency(),\n            \"daily\": new DailyFrequency(),\n            \"weekly\": new WeeklyFrequency(),\n            \"monthly\": new MonthlyFrequency(),\n            \"yearly\": new YearlyFrequency()\n          },\n              CLICK = \"click\",\n              CHANGE = \"change\";\n\n          function intervalExcess(diff, interval) {\n            var excess;\n\n            if (diff !== 0 && diff < interval) {\n              excess = interval - diff;\n            } else {\n              excess = diff % interval;\n\n              if (excess) {\n                excess = interval - excess;\n              }\n            }\n\n            return excess;\n          }\n\n          function dayInYear(date) {\n            var month = date.getMonth();\n            var days = leapYear(date) ? DAYS_IN_LEAPYEAR[month] : DAYS_IN_YEAR[month];\n            return days + date.getDate();\n          }\n\n          function weekInYear(date, weekStart) {\n            var year, days;\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n            adjustDST(date, 0);\n            year = date.getFullYear();\n\n            if (weekStart !== undefined) {\n              setDayOfWeek(date, weekStart, -1);\n              date.setDate(date.getDate() + 4);\n            } else {\n              date.setDate(date.getDate() + (4 - (date.getDay() || 7)));\n            }\n\n            adjustDST(date, 0);\n            days = Math.floor((date.getTime() - new Date(year, 0, 1, -6)) / 86400000);\n            return 1 + Math.floor(days / 7);\n          }\n\n          function weekInMonth(date, weekStart) {\n            var firstWeekDay = firstDayOfMonth(date).getDay();\n            var firstWeekLength = 7 - (firstWeekDay + 7 - (weekStart || 7)) || 7;\n\n            if (firstWeekLength < 0) {\n              firstWeekLength += 7;\n            }\n\n            return Math.ceil((date.getDate() - firstWeekLength) / 7) + 1;\n          }\n\n          function normalizeDayIndex(weekDay, weekStart) {\n            return weekDay + (weekDay < weekStart ? 7 : 0);\n          }\n\n          function normalizeOffset(date, rule, weekStart) {\n            var offset = rule.offset;\n\n            if (!offset) {\n              return weekInMonth(date, weekStart);\n            }\n\n            var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n            var weeksInMonth = weekInMonth(lastDate, weekStart);\n            var day = normalizeDayIndex(rule.day, weekStart);\n            var skipFirst = day < normalizeDayIndex(new Date(date.getFullYear(), date.getMonth(), 1).getDay(), weekStart);\n            var skipLast = day > normalizeDayIndex(lastDate.getDay(), weekStart);\n\n            if (offset < 0) {\n              offset = weeksInMonth + (offset + 1 - (skipLast ? 1 : 0));\n            } else if (skipFirst) {\n              offset += 1;\n            }\n\n            weeksInMonth -= skipLast ? 1 : 0;\n\n            if (offset < (skipFirst ? 1 : 0) || offset > weeksInMonth) {\n              return null;\n            }\n\n            return offset;\n          }\n\n          function numberOfWeeks(date, weekStart) {\n            return weekInMonth(new Date(date.getFullYear(), date.getMonth() + 1, 0), weekStart);\n          }\n\n          function isInWeek(date, rule, weekStart) {\n            return weekInMonth(date, weekStart) === normalizeOffset(date, rule, weekStart);\n          }\n\n          function ruleWeekValues(weekDays, date, weekStart) {\n            var currentDay = normalizeDayIndex(date.getDay(), weekStart);\n            var length = weekDays.length;\n            var ruleWeekOffset;\n            var weekDay, day;\n            var weekNumber;\n            var result = [];\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n              weekDay = weekDays[idx];\n              weekNumber = weekInMonth(date, weekStart);\n              ruleWeekOffset = normalizeOffset(date, weekDay, weekStart);\n\n              if (ruleWeekOffset === null) {\n                continue;\n              }\n\n              if (weekNumber < ruleWeekOffset) {\n                result.push(weekDay);\n              } else if (weekNumber === ruleWeekOffset) {\n                day = normalizeDayIndex(weekDay.day, weekStart);\n\n                if (currentDay < day) {\n                  result.push(weekDay);\n                } else if (currentDay === day) {\n                  return null;\n                }\n              }\n            }\n\n            return result;\n          }\n\n          function ruleValues(rules, value, normalize) {\n            var idx = 0,\n                length = rules.length,\n                availableRules = [],\n                ruleValue;\n\n            for (; idx < length; idx++) {\n              ruleValue = rules[idx];\n\n              if (normalize) {\n                ruleValue = normalize(ruleValue);\n              }\n\n              if (value === ruleValue) {\n                return null;\n              } else if (value < ruleValue) {\n                availableRules.push(ruleValue);\n              }\n            }\n\n            return availableRules;\n          }\n\n          function parseArray(list, range) {\n            var idx = 0,\n                length = list.length,\n                value;\n\n            for (; idx < length; idx++) {\n              value = parseInt(list[idx], 10);\n\n              if (isNaN(value) || value < range.start || value > range.end || value === 0 && range.start < 0) {\n                return null;\n              }\n\n              list[idx] = value;\n            }\n\n            return list.sort(numberSortPredicate);\n          }\n\n          function parseWeekDayList(list) {\n            var idx = 0,\n                length = list.length,\n                value,\n                valueLength,\n                day;\n\n            for (; idx < length; idx++) {\n              value = list[idx];\n              valueLength = value.length;\n              day = value.substring(valueLength - 2).toUpperCase();\n              day = WEEK_DAYS_IDX[day];\n\n              if (day === undefined) {\n                return null;\n              }\n\n              list[idx] = {\n                offset: parseInt(value.substring(0, valueLength - 2), 10) || 0,\n                day: day\n              };\n            }\n\n            return list;\n          }\n\n          function serializeWeekDayList(list) {\n            var idx = 0,\n                length = list.length,\n                value,\n                valueString,\n                result = [];\n\n            for (; idx < length; idx++) {\n              value = list[idx];\n\n              if (typeof value === \"string\") {\n                valueString = value;\n              } else {\n                valueString = \"\" + WEEK_DAYS[value.day];\n\n                if (value.offset) {\n                  valueString = value.offset + valueString;\n                }\n              }\n\n              result.push(valueString);\n            }\n\n            return result.toString();\n          }\n\n          function getMonthLength(date) {\n            var month = date.getMonth();\n\n            if (month === 1) {\n              if (new Date(date.getFullYear(), 1, 29).getMonth() === 1) {\n                return 29;\n              }\n\n              return 28;\n            }\n\n            return MONTHS[month];\n          }\n\n          function leapYear(year) {\n            year = year.getFullYear();\n            return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n          }\n\n          function numberSortPredicate(a, b) {\n            return a - b;\n          }\n\n          function parseExceptions(exceptions, zone) {\n            var idx = 0,\n                length,\n                date,\n                dates = [];\n\n            if (exceptions) {\n              exceptions = exceptions.split(exceptions.indexOf(\";\") !== -1 ? \";\" : \",\");\n              length = exceptions.length;\n\n              for (; idx < length; idx++) {\n                date = parseUTCDate(exceptions[idx], zone);\n\n                if (date) {\n                  dates.push(date);\n                }\n              }\n            }\n\n            return dates;\n          }\n\n          function isException(exceptions, date, zone) {\n            var dates = Array.isArray(exceptions) ? exceptions : parseExceptions(exceptions, zone),\n                dateTime = date.getTime() - date.getMilliseconds(),\n                idx = 0,\n                length = dates.length;\n\n            for (; idx < length; idx++) {\n              if (dates[idx].getTime() === dateTime) {\n                return true;\n              }\n            }\n\n            return false;\n          }\n\n          function toExceptionString(dates, zone) {\n            var idx = 0;\n            var length;\n            var date;\n            var result = [].concat(dates);\n\n            for (length = result.length; idx < length; idx++) {\n              date = result[idx];\n              date = kendo.timezone.convert(date, zone || date.getTimezoneOffset(), \"Etc/UTC\");\n              result[idx] = kendo.toString(date, RECURRENCE_DATE_FORMAT);\n            }\n\n            return result.join(\",\");\n          }\n\n          function startPeriodByFreq(start, rule) {\n            var date = new Date(start);\n\n            switch (rule.freq) {\n              case \"yearly\":\n                date.setFullYear(date.getFullYear(), 0, 1);\n                break;\n\n              case \"monthly\":\n                date.setFullYear(date.getFullYear(), date.getMonth(), 1);\n                break;\n\n              case \"weekly\":\n                setDayOfWeek(date, rule.weekStart, -1);\n                break;\n\n              default:\n                break;\n            }\n\n            if (rule.hours) {\n              date.setHours(0);\n            }\n\n            if (rule.minutes) {\n              date.setMinutes(0);\n            }\n\n            if (rule.seconds) {\n              date.setSeconds(0);\n            }\n\n            return date;\n          }\n\n          function endPeriodByFreq(start, rule) {\n            var date = new Date(start);\n\n            switch (rule.freq) {\n              case \"yearly\":\n                date.setFullYear(date.getFullYear(), 11, 31);\n                break;\n\n              case \"monthly\":\n                date.setFullYear(date.getFullYear(), date.getMonth() + 1, 0);\n                break;\n\n              case \"weekly\":\n                setDayOfWeek(date, rule.weekStart, -1);\n                date.setDate(date.getDate() + 6);\n                break;\n\n              default:\n                break;\n            }\n\n            if (rule.hours) {\n              date.setHours(23);\n            }\n\n            if (rule.minutes) {\n              date.setMinutes(59);\n            }\n\n            if (rule.seconds) {\n              date.setSeconds(59);\n            }\n\n            return date;\n          }\n\n          function eventsByPosition(periodEvents, start, positions, until) {\n            var periodEventsLength = periodEvents.length;\n            var events = [];\n            var position;\n            var event;\n            var inPeriod;\n\n            for (var idx = 0, length = positions.length; idx < length; idx++) {\n              position = positions[idx];\n\n              if (position < 0) {\n                position = periodEventsLength + position;\n              } else {\n                position -= 1; //convert to zero based index\n              }\n\n              event = periodEvents[position];\n              inPeriod = until ? event.start < until : true;\n\n              if (event && event.start >= start && inPeriod) {\n                events.push(event);\n              }\n            }\n\n            return events;\n          }\n\n          function removeExceptionDates(periodEvents, exceptionDates, zone) {\n            var events = [];\n            var event;\n\n            for (var idx = 0; idx < periodEvents.length; idx++) {\n              event = periodEvents[idx];\n\n              if (!isException(exceptionDates, event.start, zone)) {\n                events.push(event);\n              }\n            }\n\n            return events;\n          }\n\n          function expand(event, start, end, zone) {\n            var rule,\n                startTime,\n                endTime,\n                endDate,\n                hours,\n                minutes,\n                seconds,\n                durationMS,\n                startPeriod,\n                inPeriod,\n                ruleStart,\n                ruleEnd,\n                useEventStart,\n                freqName,\n                exceptionDates,\n                eventStartTime,\n                eventStartMS,\n                eventStart,\n                count,\n                freq,\n                positions,\n                currentIdx,\n                periodEvents,\n                events = [],\n                shiftedStart,\n                shiftedEnd,\n                shiftedStartTime,\n                shifterEndTime;\n            rule = parseRule(event.recurrenceRule, zone, {\n              // offsets argument\n              start: (getZoneOffset(event.start, zone) - getZoneOffset(event.start, event.startTimezone)) * kendo.date.MS_PER_MINUTE,\n              end: (getZoneOffset(event.end, zone) - getZoneOffset(event.end, event.endTimezone)) * kendo.date.MS_PER_MINUTE\n            });\n\n            if (!rule) {\n              return [event];\n            }\n\n            positions = rule.positions;\n            currentIdx = positions ? 0 : 1;\n            ruleStart = rule.start;\n            ruleEnd = rule.end;\n\n            if (ruleStart || ruleEnd) {\n              event = event.clone({\n                start: ruleStart ? new Date(ruleStart.value[0]) : undefined,\n                end: ruleEnd ? new Date(ruleEnd.value[0]) : undefined\n              });\n            }\n\n            eventStart = event.start;\n            eventStartMS = eventStart.getTime();\n            eventStartTime = getMilliseconds(eventStart);\n            exceptionDates = parseExceptions(event.recurrenceException, zone);\n\n            if (!exceptionDates[0] && rule.exdates) {\n              exceptionDates = rule.exdates.value;\n              event.set(\"recurrenceException\", toExceptionString(exceptionDates, zone));\n            }\n\n            startPeriod = start = new Date(start);\n            end = new Date(end);\n            freqName = rule.freq;\n            freq = frequencies[freqName];\n            count = rule.count;\n\n            if (rule.until && rule.until < end) {\n              end = new Date(rule.until);\n            }\n\n            useEventStart = freqName === \"yearly\" || freqName === \"monthly\" || freqName === \"weekly\";\n\n            if (start < eventStartMS || count || rule.interval > 1 || useEventStart || (freqName === \"daily\" || freqName === \"hourly\") && !rule.seconds) {\n              start = new Date(eventStartMS);\n            } else {\n              hours = start.getHours();\n              minutes = start.getMinutes();\n              seconds = start.getSeconds();\n\n              if (!rule.hours) {\n                hours = eventStart.getHours();\n              }\n\n              if (!rule.minutes) {\n                minutes = eventStart.getMinutes();\n              }\n\n              if (!rule.seconds) {\n                seconds = eventStart.getSeconds();\n              }\n\n              start.setHours(hours, minutes, seconds, eventStart.getMilliseconds());\n            }\n\n            rule._startPeriod = new Date(start);\n\n            if (positions) {\n              start = startPeriodByFreq(start, rule);\n              end = endPeriodByFreq(end, rule);\n              var diff = getMilliseconds(end) - getMilliseconds(start);\n\n              if (diff < 0) {\n                hours = start.getHours();\n                end.setHours(hours, start.getMinutes(), start.getSeconds(), start.getMilliseconds());\n                kendoDate.adjustDST(end, hours);\n              }\n\n              rule._startPeriod = new Date(start);\n              rule._endPeriod = endPeriodByFreq(start, rule);\n            }\n\n            durationMS = event.duration();\n            var allDayCompensation = event.isAllDay ? 86400000 : 0;\n            rule._startTime = startTime = kendoDate.toInvariantTime(start);\n\n            if (freq.setup) {\n              freq.setup(rule, eventStart, start);\n            }\n\n            freq.limit(start, end, rule);\n\n            while (start <= end) {\n              endDate = new Date(start);\n              setTime(endDate, durationMS);\n              var inPeriodCheckEndDate = new Date(start);\n              setTime(inPeriodCheckEndDate, durationMS + allDayCompensation);\n              inPeriod = start >= startPeriod || inPeriodCheckEndDate > startPeriod;\n\n              if (inPeriod && !isException(exceptionDates, start, zone) || positions) {\n                startTime = kendoDate.toUtcTime(kendoDate.getDate(start)) + getMilliseconds(rule._startTime);\n                endTime = startTime + durationMS;\n\n                if (eventStartMS !== start.getTime() || eventStartTime !== getMilliseconds(rule._startTime)) {\n                  var startZone = event.startTimezone || event.endTimezone;\n                  var endZone = event.endTimezone || event.startTimezone;\n\n                  if (!event.isAllDay) {\n                    if (zone && startZone || !zone && !startZone) {\n                      var startOffsetDiff = getZoneOffset(start, zone) - getZoneOffset(event.start, zone);\n                      var endOffsetDiff = getZoneOffset(endDate, zone) - getZoneOffset(event.end, zone);\n                      var startTZOffsetDiff = getZoneOffset(start, startZone) - getZoneOffset(event.start, startZone);\n                      var endTZOffsetDiff = getZoneOffset(endDate, endZone) - getZoneOffset(event.end, endZone);\n\n                      if (startOffsetDiff !== startTZOffsetDiff) {\n                        var offsetTicksStart = (startOffsetDiff - startTZOffsetDiff) * 60000;\n                        shiftedStart = new Date(start.getTime() - offsetTicksStart);\n                        shiftedStartTime = startTime - offsetTicksStart;\n                      }\n\n                      if (endOffsetDiff !== endTZOffsetDiff) {\n                        var offsetTicksEnd = (endOffsetDiff - endTZOffsetDiff) * 60000;\n                        shiftedEnd = new Date(endDate.getTime() - offsetTicksEnd);\n                        shifterEndTime = endTime - offsetTicksEnd;\n                      }\n                    }\n                  }\n\n                  events.push(event.toOccurrence({\n                    start: shiftedStart || new Date(start),\n                    end: shiftedEnd || endDate,\n                    _startTime: shiftedStartTime || startTime,\n                    _endTime: shifterEndTime || endTime\n                  }));\n                  shiftedStart = shiftedEnd = shiftedStartTime = shifterEndTime = null;\n                } else {\n                  event._startTime = startTime;\n                  event._endTime = endTime;\n                  events.push(event);\n                }\n              }\n\n              if (positions) {\n                freq.next(start, rule);\n                freq.limit(start, end, rule);\n\n                if (start > rule._endPeriod) {\n                  periodEvents = eventsByPosition(events.slice(currentIdx), eventStart, positions, rule.until);\n                  periodEvents = removeExceptionDates(periodEvents, exceptionDates, zone);\n                  events = events.slice(0, currentIdx).concat(periodEvents);\n                  rule._endPeriod = endPeriodByFreq(start, rule);\n                  currentIdx = events.length;\n                }\n\n                if (count && count === currentIdx) {\n                  break;\n                }\n              } else {\n                if (count && count === currentIdx) {\n                  break;\n                }\n\n                currentIdx += 1;\n                var isMissingDSTHour = isDSTMissingHour(start);\n                freq.next(start, rule);\n\n                if (isMissingDSTHour && rule.freq !== \"hourly\" && kendoDate.toInvariantTime(event.start).getTime() !== kendoDate.toInvariantTime(start).getTime()) {\n                  rule._startTime = startTime = new Date(start.getTime() - 3600000);\n                }\n\n                freq.limit(start, end, rule);\n              }\n            }\n\n            return events;\n          }\n\n          function isDSTMissingHour(date) {\n            var dateOffset = date.getTimezoneOffset();\n            var dateMinusHour = new Date(date.getTime() - 3600000);\n            var dateMinusHourOffset = dateMinusHour.getTimezoneOffset();\n            return dateOffset < dateMinusHourOffset;\n          }\n\n          function getZoneOffset(date, zone) {\n            return zone ? kendo.timezone.offset(date, zone) : date.getTimezoneOffset();\n          }\n\n          function parseUTCDate(value, zone) {\n            value = kendo.parseDate(value, DATE_FORMATS); //Parse UTC to local time\n\n            if (value && zone) {\n              value = timezone.apply(value, zone);\n            }\n\n            return value;\n          }\n\n          function parseDateRule(dateRule, zone) {\n            var pairs = dateRule.split(\";\");\n            var pair;\n            var property;\n            var value;\n            var tzid;\n            var valueIdx, valueLength;\n\n            for (var idx = 0, length = pairs.length; idx < length; idx++) {\n              pair = pairs[idx].split(\":\");\n              property = pair[0];\n              value = pair[1];\n\n              if (property.indexOf(\"TZID\") !== -1) {\n                tzid = property.substring(property.indexOf(\"TZID\")).split(\"=\")[1];\n              }\n\n              if (value) {\n                value = value.split(\",\");\n\n                for (valueIdx = 0, valueLength = value.length; valueIdx < valueLength; valueIdx++) {\n                  value[valueIdx] = parseUTCDate(value[valueIdx], tzid || zone);\n                }\n              }\n            }\n\n            if (value) {\n              return {\n                value: value,\n                tzid: tzid\n              };\n            }\n          }\n\n          function parseRule(recur, zone, offsets) {\n            var instance = {};\n            var splits, value;\n            var idx = 0,\n                length;\n            var ruleValue = false;\n            var rule, part, parts;\n            var property, weekStart, weekDays;\n\n            var predicate = function (a, b) {\n              var day1 = a.day,\n                  day2 = b.day;\n\n              if (day1 < weekStart) {\n                day1 += 7;\n              }\n\n              if (day2 < weekStart) {\n                day2 += 7;\n              }\n\n              return day1 - day2;\n            };\n\n            if (!recur) {\n              return null;\n            }\n\n            parts = recur.split(\"\\n\");\n\n            if (!parts[1] && (recur.indexOf(\"DTSTART\") !== -1 || recur.indexOf(\"DTEND\") !== -1 || recur.indexOf(\"EXDATE\") !== -1)) {\n              parts = recur.split(\" \");\n            }\n\n            for (idx = 0, length = parts.length; idx < length; idx++) {\n              part = kendo.trim(parts[idx]);\n\n              if (part.indexOf(\"DTSTART\") !== -1) {\n                instance.start = parseDateRule(part, zone);\n              } else if (part.indexOf(\"DTEND\") !== -1) {\n                instance.end = parseDateRule(part, zone);\n              } else if (part.indexOf(\"EXDATE\") !== -1) {\n                instance.exdates = parseDateRule(part, zone);\n              } else if (part.indexOf(\"RRULE\") !== -1) {\n                rule = part.substring(6);\n              } else if (kendo.trim(part)) {\n                rule = part;\n              }\n            }\n\n            rule = rule.split(\";\");\n\n            for (idx = 0, length = rule.length; idx < length; idx++) {\n              property = rule[idx];\n              splits = property.split(\"=\");\n              value = kendo.trim(splits[1]).split(\",\");\n\n              switch (kendo.trim(splits[0]).toUpperCase()) {\n                case \"FREQ\":\n                  instance.freq = value[0].toLowerCase();\n                  break;\n\n                case \"UNTIL\":\n                  instance.until = parseUTCDate(value[0], zone);\n                  break;\n\n                case \"COUNT\":\n                  instance.count = parseInt(value[0], 10);\n                  break;\n\n                case \"INTERVAL\":\n                  instance.interval = parseInt(value[0], 10);\n                  break;\n\n                case \"BYSECOND\":\n                  instance.seconds = parseArray(value, {\n                    start: 0,\n                    end: 60\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYMINUTE\":\n                  instance.minutes = parseArray(value, {\n                    start: 0,\n                    end: 59\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYHOUR\":\n                  instance.hours = parseArray(value, {\n                    start: 0,\n                    end: 23\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYMONTHDAY\":\n                  instance.monthDays = parseArray(value, {\n                    start: -31,\n                    end: 31\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYYEARDAY\":\n                  instance.yearDays = parseArray(value, {\n                    start: -366,\n                    end: 366\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYMONTH\":\n                  instance.months = parseArray(value, {\n                    start: 1,\n                    end: 12\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYDAY\":\n                  instance.weekDays = weekDays = parseWeekDayList(value);\n                  ruleValue = true;\n                  break;\n\n                case \"BYWEEKNO\":\n                  instance.weeks = parseArray(value, {\n                    start: -53,\n                    end: 53\n                  });\n                  ruleValue = true;\n                  break;\n\n                case \"BYSETPOS\":\n                  instance.positions = parseArray(value, {\n                    start: -366,\n                    end: 366\n                  });\n                  break;\n\n                case \"WKST\":\n                  instance.weekStart = weekStart = WEEK_DAYS_IDX[value[0]];\n                  break;\n              }\n            }\n\n            if (instance.freq === undefined || instance.count !== undefined && instance.until) {\n              return null;\n            }\n\n            if (!instance.interval) {\n              instance.interval = 1;\n            }\n\n            if (weekStart === undefined) {\n              instance.weekStart = weekStart = kendo.culture().calendar.firstDay;\n            }\n\n            if (weekDays) {\n              instance.weekDays = weekDays.sort(predicate);\n            }\n\n            if (instance.positions && !ruleValue) {\n              instance.positions = null;\n            }\n\n            instance._hasRuleValue = ruleValue;\n            instance.offsets = offsets;\n            return instance;\n          }\n\n          function serializeDateRule(dateRule, zone) {\n            var value = dateRule.value;\n            var tzid = dateRule.tzid || \"\";\n            var length = value.length;\n            var idx = 0;\n            var val;\n\n            for (; idx < length; idx++) {\n              val = value[idx];\n              val = timezone.convert(val, tzid || zone || val.getTimezoneOffset(), \"Etc/UTC\");\n              value[idx] = kendo.toString(val, \"yyyyMMddTHHmmssZ\");\n            }\n\n            if (tzid) {\n              tzid = \";TZID=\" + tzid;\n            }\n\n            return tzid + \":\" + value.join(\",\") + \" \";\n          }\n\n          function serialize(rule, zone) {\n            var weekStart = rule.weekStart;\n            var ruleString = \"FREQ=\" + rule.freq.toUpperCase();\n            var exdates = rule.exdates || \"\";\n            var start = rule.start || \"\";\n            var end = rule.end || \"\";\n            var until = rule.until;\n\n            if (weekStart === undefined) {\n              weekStart = kendo.culture().calendar.firstDay;\n            }\n\n            if (rule.interval > 1) {\n              ruleString += \";INTERVAL=\" + rule.interval;\n            }\n\n            if (rule.count) {\n              ruleString += \";COUNT=\" + rule.count;\n            }\n\n            if (until) {\n              until = timezone.convert(until, zone || until.getTimezoneOffset(), \"Etc/UTC\");\n              ruleString += \";UNTIL=\" + kendo.toString(until, \"yyyyMMddTHHmmssZ\");\n            }\n\n            if (rule.months) {\n              ruleString += \";BYMONTH=\" + rule.months;\n            }\n\n            if (rule.weeks) {\n              ruleString += \";BYWEEKNO=\" + rule.weeks;\n            }\n\n            if (rule.yearDays) {\n              ruleString += \";BYYEARDAY=\" + rule.yearDays;\n            }\n\n            if (rule.monthDays) {\n              ruleString += \";BYMONTHDAY=\" + rule.monthDays;\n            }\n\n            if (rule.weekDays) {\n              ruleString += \";BYDAY=\" + serializeWeekDayList(rule.weekDays);\n            }\n\n            if (rule.hours) {\n              ruleString += \";BYHOUR=\" + rule.hours;\n            }\n\n            if (rule.minutes) {\n              ruleString += \";BYMINUTE=\" + rule.minutes;\n            }\n\n            if (rule.seconds) {\n              ruleString += \";BYSECOND=\" + rule.seconds;\n            }\n\n            if (rule.positions) {\n              ruleString += \";BYSETPOS=\" + rule.positions;\n            }\n\n            if (weekStart !== undefined) {\n              ruleString += \";WKST=\" + WEEK_DAYS[weekStart];\n            }\n\n            if (start) {\n              start = \"DTSTART\" + serializeDateRule(start, zone);\n            }\n\n            if (end) {\n              end = \"DTEND\" + serializeDateRule(end, zone);\n            }\n\n            if (exdates) {\n              exdates = \"EXDATE\" + serializeDateRule(exdates, zone);\n            }\n\n            if (start || end || exdates) {\n              ruleString = start + end + exdates + \"RRULE:\" + ruleString;\n            }\n\n            return ruleString;\n          }\n\n          kendo.recurrence = {\n            rule: {\n              parse: parseRule,\n              serialize: serialize\n            },\n            expand: expand,\n            dayInYear: dayInYear,\n            weekInYear: weekInYear,\n            weekInMonth: weekInMonth,\n            numberOfWeeks: numberOfWeeks,\n            isException: isException,\n            toExceptionString: toExceptionString\n          };\n          var RECURRENCE_VIEW_TEMPLATE = kendo.template('# if (frequency !== \"never\") { #' + '<div class=\"k-form-field\">' + '<label id=\"recur_interval_label\" class=\"k-label k-form-label\" for=\"recur_interval\">#:messages.repeatEvery#</label>' + '<div class=\"k-form-field-wrap\">' + '<input id=\"recur_interval\" class=\"k-recur-interval\" title=\"#:messages.repeatEvery# #:messages.interval#\" aria-labelledby=\"recur_interval_label\">#:messages.interval#' + '</div>' + '</div>' + '# } #' + '# if (frequency === \"weekly\") { #' + '<div class=\"k-form-field\">' + '<label class=\"k-label k-form-label\">#:messages.repeatOn#</label>' + '<div class=\"k-form-field-wrap\">' + '<div class=\"k-button-group-stretched k-recur-weekday-buttons\" title=\"#:messages.repeatOn#\"></div></div>' + '</div>' + '</div>' + '# } else if (frequency === \"monthly\") { #' + '<div class=\"k-form-field\"><label class=\"k-label k-form-label\">#:messages.repeatOn#</label></div>' + '<div class=\"k-form-field-wrap\">' + '<ul class=\"k-radio-list\">' + '<li class=\"k-radio-item\">' + '<label class=\"k-radio-label\"><input class=\"k-recur-month-radio k-radio k-radio-md\" type=\"radio\" name=\"month\" value=\"monthday\" title=\"#:messages.repeatOn#\" />#:messages.date#:</label>' + '<input class=\"k-recur-monthday\" aria-label=\"#:messages.date#\" title=\"#:messages.date#\" />' + '</li>' + '<li class=\"k-radio-item\">' + '<input class=\"k-recur-month-radio k-radio k-radio-md\" type=\"radio\" name=\"month\" value=\"weekday\" aria-label=\"#:messages.repeatOn# #:messages.day#\" title=\"#:messages.repeatOn# #:messages.day#\" />' + '<input class=\"k-recur-weekday-offset\" title=\"#:messages.repeatOn#\" style=\"width:8em;\" />' + '<input class=\"k-recur-weekday\" title=\"#:messages.day#\" style=\"width:8em;\" />' + '</li>' + '</ul>' + '</div>' + '</div>' + '# } else if (frequency === \"yearly\") { #' + '<div class=\"k-form-field\"><label class=\"k-label k-form-label\">#:messages.repeatOn#</label>' + '<div class=\"k-form-field-wrap\">' + '<ul class=\"k-radio-list\">' + '<li class=\"k-radio-item\">' + '<input class=\"k-recur-year-radio k-radio k-radio-md\" type=\"radio\" name=\"year\" value=\"monthday\" title=\"#:messages.repeatOn# #:messages.month#\" />' + '<input class=\"k-recur-month\" aria-label=\"#:messages.month#\" title=\"#:messages.month#\" style=\"width:8em;\" />' + '<input class=\"k-recur-monthday\" aria-label=\"#:messages.date#\" title=\"#:messages.date#\" />' + '</li>' + '<li class=\"k-radio-item\">' + '<input class=\"k-recur-year-radio k-radio k-radio-md\" type=\"radio\" name=\"year\" value=\"weekday\" title=\"#:messages.repeatOn# #:messages.day#\" />' + '<input class=\"k-recur-weekday-offset\" title=\"#:messages.repeatOn#\" style=\"width:8em;\"/><input class=\"k-recur-weekday\" title=\"#:messages.day#\" style=\"width:8em;\"/>#:messages.of#<input class=\"k-recur-month\" title=\"#:messages.of + messages.month#\" style=\"width:8em;\"/>' + '</li>' + '</ul>' + '</div>' + '</div>' + '# } #' + '# if (frequency !== \"never\") { #' + '<div class=\"k-form-field\"><label class=\"k-label k-form-label\">#:end.label#</label>' + '<div class=\"k-form-field-wrap\">' + '<ul class=\"k-radio-list\">' + '<li class=\"k-radio-item\">' + '<label class=\"k-radio-label\"><input class=\"k-recur-end-never k-radio k-radio-md\" type=\"radio\" name=\"end\" value=\"never\" title=\"#:end.label#\" />#:end.never#</label>' + '</li>' + '<li class=\"k-radio-item\">' + '<label class=\"k-radio-label\"><input class=\"k-recur-end-count k-radio k-radio-md\" type=\"radio\" name=\"end\" value=\"count\" title=\"#:end.label#\" />#:end.after#</label>' + '<input class=\"k-recur-count\" aria-label=\"#:end.occurrence#\" title=\"#:end.occurrence#\" />#:end.occurrence#' + '</li>' + '<li class=\"k-radio-item\">' + '<label class=\"k-radio-label\"><input class=\"k-recur-end-until k-radio k-radio-md\" type=\"radio\" name=\"end\" value=\"until\" title=\"#:end.label#\" />#:end.on#</label>' + '<input class=\"k-recur-until\" title=\"#:end.on#\" aria-label=\"#:end.on#\" name=\"recur-until\" />' + '</li>' + '</ul>' + '</div>' + '</div>' + '# } #');\n          var DAY_RULE = [{\n            day: 0,\n            offset: 0\n          }, {\n            day: 1,\n            offset: 0\n          }, {\n            day: 2,\n            offset: 0\n          }, {\n            day: 3,\n            offset: 0\n          }, {\n            day: 4,\n            offset: 0\n          }, {\n            day: 5,\n            offset: 0\n          }, {\n            day: 6,\n            offset: 0\n          }];\n          var WEEKDAY_RULE = [{\n            day: 1,\n            offset: 0\n          }, {\n            day: 2,\n            offset: 0\n          }, {\n            day: 3,\n            offset: 0\n          }, {\n            day: 4,\n            offset: 0\n          }, {\n            day: 5,\n            offset: 0\n          }];\n          var WEEKEND_RULE = [{\n            day: 0,\n            offset: 0\n          }, {\n            day: 6,\n            offset: 0\n          }];\n          var BaseRecurrenceEditor = Widget.extend({\n            init: function (element, options) {\n              var start;\n              var that = this;\n              var frequencies = options && options.frequencies;\n              Widget.fn.init.call(that, element, options);\n              that.wrapper = that.element;\n              options = that.options;\n              options.start = start = options.start || kendoDate.today();\n\n              if (frequencies) {\n                options.frequencies = frequencies;\n              }\n\n              if (typeof start === \"string\") {\n                options.start = kendo.parseDate(start, \"yyyyMMddTHHmmss\");\n              }\n\n              if (options.firstWeekDay === null) {\n                options.firstWeekDay = kendo.culture().calendar.firstDay;\n              }\n\n              that._namespace = \".\" + options.name;\n            },\n            options: {\n              value: \"\",\n              start: \"\",\n              timezone: \"\",\n              spinners: true,\n              firstWeekDay: null,\n              frequencies: [\"never\", \"daily\", \"weekly\", \"monthly\", \"yearly\"],\n              mobile: false,\n              messages: {\n                repeat: \"Repeat\",\n                recurrenceEditorTitle: \"Recurrence editor\",\n                frequencies: {\n                  never: \"Never\",\n                  hourly: \"Hourly\",\n                  daily: \"Daily\",\n                  weekly: \"Weekly\",\n                  monthly: \"Monthly\",\n                  yearly: \"Yearly\"\n                },\n                hourly: {\n                  repeatEvery: \"Repeat every: \",\n                  interval: \" hour(s)\"\n                },\n                daily: {\n                  repeatEvery: \"Repeat every: \",\n                  interval: \" day(s)\"\n                },\n                weekly: {\n                  interval: \" week(s)\",\n                  repeatEvery: \"Repeat every: \",\n                  repeatOn: \"Repeat on: \"\n                },\n                monthly: {\n                  repeatEvery: \"Repeat every: \",\n                  repeatOn: \"Repeat on: \",\n                  interval: \" month(s)\",\n                  day: \"Day \",\n                  date: \"Date\"\n                },\n                yearly: {\n                  repeatEvery: \"Repeat every: \",\n                  repeatOn: \"Repeat on: \",\n                  interval: \" year(s)\",\n                  of: \" of \",\n                  month: \"month\",\n                  day: \"day\",\n                  date: \"Date\"\n                },\n                end: {\n                  label: \"End:\",\n                  mobileLabel: \"Ends\",\n                  never: \"Never\",\n                  after: \"After \",\n                  occurrence: \" occurrence(s)\",\n                  on: \"On \"\n                },\n                offsetPositions: {\n                  first: \"first\",\n                  second: \"second\",\n                  third: \"third\",\n                  fourth: \"fourth\",\n                  last: \"last\"\n                },\n                weekdays: {\n                  day: \"day\",\n                  weekday: \"weekday\",\n                  weekend: \"weekend day\"\n                }\n              }\n            },\n            events: [\"change\"],\n            _initInterval: function () {\n              var that = this;\n              var rule = that._value;\n\n              that._container.find(\".k-recur-interval\").kendoNumericTextBox({\n                spinners: that.options.spinners,\n                value: rule.interval || 1,\n                decimals: 0,\n                format: \"#\",\n                min: 1,\n                change: function () {\n                  rule.interval = this.value();\n\n                  that._trigger();\n                }\n              });\n            },\n            _weekDayButtons: function (firstDay) {\n              var that = this,\n                  names = kendo.culture().calendar.days.names,\n                  abbreviated = kendo.culture().calendar.days.namesAbbr,\n                  repeatOn = that.options.messages.weekly.repeatOn,\n                  length = names.length,\n                  idx = 0,\n                  values = [],\n                  items = [];\n\n              for (; idx < length; idx++) {\n                values.push(idx);\n              }\n\n              names = names.slice(firstDay).concat(names.slice(0, firstDay));\n              abbreviated = abbreviated.slice(firstDay).concat(abbreviated.slice(0, firstDay));\n              values = values.slice(firstDay).concat(values.slice(0, firstDay));\n\n              for (idx = 0; idx < length; idx++) {\n                items.push({\n                  text: abbreviated[idx],\n                  attributes: {\n                    \"data-value\": values[idx],\n                    \"aria-label\": repeatOn + \" \" + names[idx]\n                  }\n                });\n              }\n\n              that._weekDayButtonGroup = new ButtonGroup(that._container.find(\".k-recur-weekday-buttons\"), {\n                items: items,\n                selection: \"multiple\",\n                select: function () {\n                  var rule = that._value,\n                      selectedDays = that._weekDayButtonGroup.current();\n\n                  rule.weekDays = selectedDays.map(function (i, day) {\n                    return {\n                      day: Number(day.getAttribute(\"data-value\")),\n                      offset: 0\n                    };\n                  });\n\n                  if (!that.options.mobile) {\n                    that._trigger();\n                  }\n                }\n              });\n            },\n            _weekDayRule: function (clear) {\n              var that = this;\n\n              var weekday = (that._weekDay.element || that._weekDay).val();\n\n              var offset = Number((that._weekDayOffset.element || that._weekDayOffset).val());\n              var weekDays = null;\n              var positions = null;\n\n              if (!clear) {\n                if (weekday === \"day\") {\n                  weekDays = DAY_RULE;\n                  positions = offset;\n                } else if (weekday === \"weekday\") {\n                  weekDays = WEEKDAY_RULE;\n                  positions = offset;\n                } else if (weekday === \"weekend\") {\n                  weekDays = WEEKEND_RULE;\n                  positions = offset;\n                } else {\n                  weekDays = [{\n                    offset: offset,\n                    day: Number(weekday)\n                  }];\n                }\n              }\n\n              that._value.weekDays = weekDays;\n              that._value.positions = positions;\n            },\n            _weekDayView: function () {\n              var that = this;\n              var weekDays = that._value.weekDays;\n              var positions = that._value.positions;\n              var weekDayOffsetWidget = that._weekDayOffset;\n              var weekDayOffset;\n              var weekDayValue;\n              var length;\n              var method;\n\n              if (weekDays) {\n                length = weekDays.length;\n\n                if (positions) {\n                  if (length === 7) {\n                    weekDayValue = \"day\";\n                    weekDayOffset = positions;\n                  } else if (length === 5) {\n                    weekDayValue = \"weekday\";\n                    weekDayOffset = positions;\n                  } else if (length === 2) {\n                    weekDayValue = \"weekend\";\n                    weekDayOffset = positions;\n                  }\n                }\n\n                if (!weekDayValue) {\n                  weekDays = weekDays[0];\n                  weekDayValue = weekDays.day;\n                  weekDayOffset = weekDays.offset || \"\";\n                }\n\n                method = weekDayOffsetWidget.value ? \"value\" : \"val\";\n                weekDayOffsetWidget[method](weekDayOffset);\n\n                that._weekDay[method](weekDayValue);\n              }\n            },\n            _initWeekDay: function () {\n              var that = this,\n                  data;\n              var weekdayMessage = that.options.messages.weekdays;\n              var offsetMessage = that.options.messages.offsetPositions;\n\n              var weekDayInput = that._container.find(\".k-recur-weekday\");\n\n              var change = function () {\n                that._weekDayRule();\n\n                that._trigger();\n              };\n\n              if (weekDayInput[0]) {\n                that._weekDayOffset = new DropDownList(that._container.find(\".k-recur-weekday-offset\"), {\n                  autoWidth: true,\n                  change: change,\n                  dataTextField: \"text\",\n                  dataValueField: \"value\",\n                  dataSource: [{\n                    text: offsetMessage.first,\n                    value: \"1\"\n                  }, {\n                    text: offsetMessage.second,\n                    value: \"2\"\n                  }, {\n                    text: offsetMessage.third,\n                    value: \"3\"\n                  }, {\n                    text: offsetMessage.fourth,\n                    value: \"4\"\n                  }, {\n                    text: offsetMessage.last,\n                    value: \"-1\"\n                  }]\n                });\n                data = [{\n                  text: weekdayMessage.day,\n                  value: \"day\"\n                }, {\n                  text: weekdayMessage.weekday,\n                  value: \"weekday\"\n                }, {\n                  text: weekdayMessage.weekend,\n                  value: \"weekend\"\n                }];\n                that._weekDay = new DropDownList(weekDayInput, {\n                  autoWidth: true,\n                  value: that.options.start.getDay(),\n                  change: change,\n                  dataTextField: \"text\",\n                  dataValueField: \"value\",\n                  dataSource: data.concat($.map(kendo.culture().calendar.days.names, function (dayName, idx) {\n                    return {\n                      text: dayName,\n                      value: idx\n                    };\n                  }))\n                });\n\n                that._weekDayView();\n              }\n            },\n            _initWeekDays: function () {\n              var that = this;\n              var rule = that._value;\n              var weekDayButtonGroup = that._weekDayButtonGroup;\n\n              if (weekDayButtonGroup && rule.weekDays && rule.weekDays.length) {\n                var ruleDays = rule.weekDays,\n                    ruleDaysLength = ruleDays.length,\n                    selectors = [],\n                    i = 0,\n                    selectedWeekDayButtons;\n\n                for (; i < ruleDaysLength; i++) {\n                  selectors.push(\"[data-value='\" + ruleDays[i].day + \"']\");\n                }\n\n                selectedWeekDayButtons = weekDayButtonGroup.element.find(selectors.join(\",\"));\n                weekDayButtonGroup.select(selectedWeekDayButtons);\n              }\n            },\n            _initMonthDay: function () {\n              var that = this;\n              var rule = that._value;\n\n              var monthDayInput = that._container.find(\".k-recur-monthday\");\n\n              if (monthDayInput[0]) {\n                that._monthDay = new kendo.ui.NumericTextBox(monthDayInput, {\n                  spinners: that.options.spinners,\n                  min: 1,\n                  max: 31,\n                  decimals: 0,\n                  format: \"#\",\n                  value: rule.monthDays ? rule.monthDays[0] : that.options.start.getDate(),\n                  change: function () {\n                    var value = this.value();\n                    rule.monthDays = value ? [value] : value;\n\n                    that._trigger();\n                  }\n                });\n              }\n            },\n            _initCount: function () {\n              var that = this,\n                  input = that._container.find(\".k-recur-count\"),\n                  rule = that._value;\n\n              that._count = input.kendoNumericTextBox({\n                spinners: that.options.spinners,\n                value: rule.count || 1,\n                decimals: 0,\n                format: \"#\",\n                min: 1,\n                change: function () {\n                  rule.count = this.value();\n\n                  that._trigger();\n                }\n              }).data(\"kendoNumericTextBox\");\n            },\n            _initUntil: function () {\n              var that = this,\n                  input = that._container.find(\".k-recur-until\"),\n                  start = that.options.start,\n                  rule = that._value,\n                  until = rule.until,\n                  min = until && until < start ? until : start,\n                  startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]:visible\"),\n                  validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on),\n                  dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare,\n                  initialValue = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 23, 59, 59);\n\n              input.attr(\"data-validDate-msg\", validDateValidationMessage);\n              input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n              if (startInput.length === 0) {\n                startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]\");\n              }\n\n              if (startInput.length > 0 && startInput.val()) {\n                min = kendo.parseDate(startInput.val());\n\n                if (initialValue < min) {\n                  initialValue = min;\n                }\n              }\n\n              that._until = input.kendoDatePicker({\n                min: min,\n                value: until || initialValue,\n                change: function () {\n                  var date = this.value();\n\n                  if (date) {\n                    rule.until = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);\n                  }\n\n                  that._trigger();\n                }\n              }).data(\"kendoDatePicker\");\n\n              if (startInput) {\n                startInput.on(\"change\", function () {\n                  that._until.setOptions({\n                    min: startInput.val()\n                  });\n                });\n              }\n            },\n            _trigger: function () {\n              if (!this.options.mobile) {\n                this.trigger(\"change\");\n              }\n            }\n          });\n          var RecurrenceEditor = BaseRecurrenceEditor.extend({\n            init: function (element, options) {\n              var that = this;\n              BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n              that._initFrequency();\n\n              that._initContainer();\n\n              that.value(that.options.value);\n            },\n            options: {\n              name: \"RecurrenceEditor\"\n            },\n            events: [\"change\"],\n            destroy: function () {\n              var that = this;\n\n              that._frequency.destroy();\n\n              if (this._weekDayButtonGroup) {\n                this._weekDayButtonGroup.destroy();\n              }\n\n              that._container.find(\"input[type=radio],input[type=checkbox]\").off(CLICK + that._namespace);\n\n              kendo.destroy(that._container);\n              BaseRecurrenceEditor.fn.destroy.call(that);\n            },\n            value: function (value) {\n              var that = this;\n              var timezone = that.options.timezone;\n              var freq, freqButton;\n\n              if (value === undefined) {\n                if (!that._value.freq) {\n                  return \"\";\n                }\n\n                return serialize(that._value, timezone);\n              }\n\n              that._value = parseRule(value, timezone) || {};\n              freq = that._value.freq;\n\n              if (freq) {\n                freqButton = that._frequency.element.find(\"[data-value='\" + freq + \"']\");\n\n                that._frequency.select(freqButton);\n              } else {\n                that._frequency.select(0);\n              }\n\n              that._initView(that._frequency.current().data(\"value\"));\n            },\n            _initContainer: function () {\n              var element = this.element,\n                  container = $('<div class=\"k-recur-view\" />'),\n                  editContainer = element.parent(\".k-edit-field\");\n\n              if (editContainer[0]) {\n                container.insertAfter(editContainer);\n              } else {\n                element.append(container);\n              }\n\n              this._container = container;\n            },\n            _initFrequency: function () {\n              var that = this,\n                  options = that.options,\n                  frequencies = options.frequencies,\n                  messages = options.messages.frequencies,\n                  buttonGroupElement = $('<div class=\"k-button-group-stretched k-flex-1\"/>').attr({\n                title: options.messages.recurrenceEditorTitle\n              }),\n                  frequency;\n              frequencies = $.map(frequencies, function (frequency) {\n                return {\n                  text: messages[frequency],\n                  attributes: {\n                    \"data-value\": frequency,\n                    \"aria-label\": options.messages.repeat + messages[frequency]\n                  }\n                };\n              });\n              frequency = frequencies[0];\n\n              if (frequency && frequency.attributes && frequency.attributes[\"data-value\"] === \"never\") {\n                frequency.attributes[\"data-value\"] = \"\";\n              }\n\n              that.element.append(buttonGroupElement);\n              that._frequency = new ButtonGroup(buttonGroupElement, {\n                items: frequencies,\n                select: function () {\n                  that._value = {};\n\n                  that._initView(that._frequency.current().data(\"value\"));\n\n                  that.trigger(\"change\");\n                }\n              });\n            },\n            _initView: function (frequency) {\n              var that = this;\n              var rule = that._value;\n              var options = that.options;\n              var data = {\n                frequency: frequency || \"never\",\n                firstWeekDay: options.firstWeekDay,\n                messages: options.messages[frequency],\n                end: options.messages.end\n              };\n              kendo.destroy(that._container);\n\n              that._container.html(RECURRENCE_VIEW_TEMPLATE(data));\n\n              if (!frequency) {\n                that._value = {};\n                return;\n              }\n\n              rule.freq = frequency;\n\n              if (frequency === \"weekly\" && !rule.weekDays) {\n                rule.weekDays = [{\n                  day: options.start.getDay(),\n                  offset: 0\n                }];\n              }\n\n              that._weekDayButtons(options.firstWeekDay);\n\n              that._initInterval();\n\n              that._initWeekDays();\n\n              that._initMonthDay();\n\n              that._initWeekDay();\n\n              that._initMonth();\n\n              that._initCount();\n\n              that._initUntil();\n\n              that._period();\n\n              that._end();\n            },\n            _initMonth: function () {\n              var that = this;\n              var rule = that._value;\n              var month = rule.months || [that.options.start.getMonth() + 1];\n\n              var monthInputs = that._container.find(\".k-recur-month\");\n\n              var options;\n\n              if (monthInputs[0]) {\n                options = {\n                  autoWidth: true,\n                  change: function () {\n                    rule.months = [Number(this.value())];\n                    that.trigger(\"change\");\n                  },\n                  dataTextField: \"text\",\n                  dataValueField: \"value\",\n                  dataSource: $.map(kendo.culture().calendar.months.names, function (monthName, idx) {\n                    return {\n                      text: monthName,\n                      value: idx + 1\n                    };\n                  })\n                };\n                that._month1 = new DropDownList(monthInputs[0], options);\n                that._month2 = new DropDownList(monthInputs[1], options);\n\n                if (month) {\n                  month = month[0];\n\n                  that._month1.value(month);\n\n                  that._month2.value(month);\n                }\n              }\n            },\n            _end: function () {\n              var that = this;\n              var rule = that._value;\n              var container = that._container;\n              var namespace = that._namespace;\n\n              var click = function (e) {\n                that._toggleEnd(e.currentTarget.value);\n\n                that.trigger(\"change\");\n              };\n\n              var endRule;\n              that._buttonNever = container.find(\".k-recur-end-never\").on(CLICK + namespace, click);\n              that._buttonCount = container.find(\".k-recur-end-count\").on(CLICK + namespace, click);\n              that._buttonUntil = container.find(\".k-recur-end-until\").on(CLICK + namespace, click);\n\n              if (rule.count) {\n                endRule = \"count\";\n              } else if (rule.until) {\n                endRule = \"until\";\n              }\n\n              that._toggleEnd(endRule);\n            },\n            _period: function () {\n              var that = this;\n              var rule = that._value;\n              var monthly = rule.freq === \"monthly\";\n              var toggleRule = monthly ? that._toggleMonthDay : that._toggleYear;\n              var selector = \".k-recur-\" + (monthly ? \"month\" : \"year\") + \"-radio\";\n\n              var radioButtons = that._container.find(selector);\n\n              if (!monthly && rule.freq !== \"yearly\") {\n                return;\n              }\n\n              radioButtons.on(CLICK + that._namespace, function (e) {\n                toggleRule.call(that, e.currentTarget.value);\n                that.trigger(\"change\");\n              });\n              that._buttonMonthDay = radioButtons.eq(0);\n              that._buttonWeekDay = radioButtons.eq(1);\n              toggleRule.call(that, rule.weekDays ? \"weekday\" : \"monthday\");\n            },\n            _toggleEnd: function (endRule) {\n              var that = this;\n              var count, until;\n              var enableCount, enableUntil;\n\n              if (endRule === \"count\") {\n                that._buttonCount.prop(\"checked\", true);\n\n                enableCount = true;\n                enableUntil = false;\n                count = that._count.value();\n                until = null;\n              } else if (endRule === \"until\") {\n                that._buttonUntil.prop(\"checked\", true);\n\n                enableCount = false;\n                enableUntil = true;\n                count = null;\n                until = that._until.value();\n              } else {\n                that._buttonNever.prop(\"checked\", true);\n\n                enableCount = enableUntil = false;\n                count = until = null;\n              }\n\n              if (that._count) {\n                that._count.enable(enableCount);\n              }\n\n              if (that._until) {\n                that._until.enable(enableUntil);\n              }\n\n              that._value.count = count;\n              that._value.until = until;\n            },\n            _toggleMonthDay: function (monthRule) {\n              var that = this;\n              var enableMonthDay = false;\n              var enableWeekDay = true;\n              var clear = false;\n              var monthDays;\n\n              if (monthRule === \"monthday\") {\n                that._buttonMonthDay.prop(\"checked\", true);\n\n                monthDays = [that._monthDay.value()];\n                enableMonthDay = true;\n                enableWeekDay = false;\n                clear = true;\n              } else {\n                that._buttonWeekDay.prop(\"checked\", true);\n\n                monthDays = null;\n              }\n\n              that._weekDay.enable(enableWeekDay);\n\n              that._weekDayOffset.enable(enableWeekDay);\n\n              that._monthDay.enable(enableMonthDay);\n\n              that._value.monthDays = monthDays;\n\n              that._weekDayRule(clear);\n            },\n            _toggleYear: function (yearRule) {\n              var that = this;\n              var enableMonth1 = false;\n              var enableMonth2 = true;\n              var month;\n\n              if (yearRule === \"monthday\") {\n                enableMonth1 = true;\n                enableMonth2 = false;\n                month = that._month1.value();\n              } else {\n                month = that._month2.value();\n              }\n\n              that._month1.enable(enableMonth1);\n\n              that._month2.enable(enableMonth2);\n\n              that._value.months = [month];\n\n              that._toggleMonthDay(yearRule);\n            }\n          });\n          ui.plugin(RecurrenceEditor);\n          var RECURRENCE_HEADER_TEMPLATE = kendo.template('<div data-role=\"content\">' + '<ul class=\"k-listgroup k-listgroup-flush\">' + '<li class=\"k-item k-listgroup-item\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:headerTitle#</span>' + '<div class=\"k-recur-pattern k-listgroup-form-field-wrapper\"></div>' + '</label>' + '</li>' + '<li class=\"k-item k-listgroup-item k-recur-view\"></li>' + '</ul>' + '</div>');\n          var RECURRENCE_REPEAT_PATTERN_TEMPLATE = kendo.template('# if (frequency !== \"never\") { #' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatEvery#</span>' + '<div class=\"k-recur-editor-wrap k-listgroup-form-field-wrapper\">' + '<input class=\"k-recur-interval\" type=\"number\" pattern=\"\\\\\\\\d*\"/>' + '# if (messages.interval.length) { #' + '<span class=\"k-recur-editor-text\">#:messages.interval#</span>' + '# } #' + '</div>' + '</label>' + '# } #' + '# if (frequency === \"weekly\") { #' + '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' + '<li class=\"k-item k-listgroup-item k-no-click\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatOn#</span>' + '</label>' + '</li>' + '<div class=\"k-button-group-stretched k-recur-weekday-buttons\" title=\"#:messages.repeatOn#\">' + '</ul>' + '# } else if (frequency === \"monthly\") { #' + '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' + '<li class=\"k-item k-listgroup-item\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatBy#</span>' + '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' + '</label>' + '</li>' + '<li class=\"k-monthday-view k-item k-listgroup-item\" style=\"display:none\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><input class=\"k-recur-monthday\" type=\"number\" aria-label=\"#:messages.date#\" title=\"#:messages.day#\" pattern=\"\\\\\\\\d*\"/></div>' + '</label>' + '</li>' + '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.every#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday-offset\" title=\"#:messages.every#\"></select></div>' + '</label>' + '</li>' + '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday\" title=\"#:messages.day#\"></select></div>' + '</label>' + '</li>' + '</ul>' + '# } else if (frequency === \"yearly\") { #' + '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' + '<li class=\"k-item k-listgroup-item\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatBy#</span>' + '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' + '</label>' + '</li>' + '<li class=\"k-monthday-view k-item k-listgroup-item\" style=\"display:none\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><input class=\"k-recur-monthday\" type=\"number\" aria-label=\"#:messages.date#\" title=\"#:messages.day#\" pattern=\"\\\\\\\\d*\"/></div>' + '</label>' + '</li>' + '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.every#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday-offset\" title=\"#:messages.every#\"></select></div>' + '</label>' + '</li>' + '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday\" title=\"#:messages.day#\"></select></div>' + '</label>' + '</li>' + '<li class=\"k-item k-item k-listgroup-item\">' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.month#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-month\" title=\"#:messages.month#\"></select></div>' + '</label>' + '</li>' + '</ul>' + '# } #');\n          var RECURRENCE_END_PATTERN_TEMPLATE = kendo.template('# if (endPattern === \"count\") { #' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.after#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><input class=\"k-recur-count\" aria-label=\"#:messages.occurrence#\" type=\"number\" pattern=\"\\\\\\\\d*\" /></div>' + '</label>' + '# } else if (endPattern === \"until\") { #' + '<label class=\"k-label k-listgroup-form-row\">' + '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.on#</span>' + '<div class=\"k-listgroup-form-field-wrapper\"><input type=\"date\" class=\"k-recur-until\" aria-label=\"#:messages.on#\" name=\"recur-until\"/></div>' + '</label>' + '# } #');\n          var RECURRENCE_GROUP_BUTTON_TEMPLATE = kendo.template('<select class=\"k-scheduler-select\">' + '#for (var i = 0, length = dataSource.length; i < length; i++) {#' + '<option value=\"#=dataSource[i].value#\" #= value === dataSource[i].value  ? \\\"selected\\\" : \\\"\\\" #>#:dataSource[i].text#</option>' + '#}#' + '</select>');\n          var MobileRecurrenceEditor = BaseRecurrenceEditor.extend({\n            init: function (element, options) {\n              var that = this;\n              BaseRecurrenceEditor.fn.init.call(that, element, options);\n              options = that.options;\n              that._optionTemplate = kendo.template('<option value=\"#:value#\">#:text#</option>');\n              that.value(options.value);\n              that._pane = options.pane || that.wrapper.closest(\"[data-role=pane]\").data(\"kendoPane\");\n\n              that._initRepeatButton();\n\n              that._initParentRepeatEnd();\n\n              that._defaultValue = that._value;\n            },\n            options: {\n              name: \"MobileRecurrenceEditor\",\n              animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n              },\n              mobile: true,\n              messages: {\n                cancel: \"Cancel\",\n                update: \"Save\",\n                endTitle: \"Repeat ends\",\n                repeatTitle: \"Repeat pattern\",\n                headerTitle: \"Repeat event\",\n                end: {\n                  patterns: {\n                    never: \"Never\",\n                    after: \"After...\",\n                    on: \"On...\"\n                  },\n                  never: \"Never\",\n                  after: \"End repeat after\",\n                  on: \"End repeat on\"\n                },\n                daily: {\n                  interval: \"\"\n                },\n                hourly: {\n                  interval: \"\"\n                },\n                weekly: {\n                  interval: \"\"\n                },\n                monthly: {\n                  interval: \"\",\n                  repeatBy: \"Repeat by: \",\n                  dayOfMonth: \"Day of the month\",\n                  dayOfWeek: \"Day of the week\",\n                  repeatEvery: \"Repeat every\",\n                  every: \"Every\",\n                  day: \"Day \"\n                },\n                yearly: {\n                  interval: \"\",\n                  repeatBy: \"Repeat by: \",\n                  dayOfMonth: \"Day of the month\",\n                  dayOfWeek: \"Day of the week\",\n                  repeatEvery: \"Repeat every: \",\n                  every: \"Every\",\n                  month: \"Month\",\n                  day: \"Day\"\n                }\n              }\n            },\n            events: [\"change\"],\n            value: function (value) {\n              var that = this;\n              var timezone = that.options.timezone;\n\n              if (value === undefined) {\n                if (!that._value.freq) {\n                  return \"\";\n                }\n\n                return serialize(that._value, timezone);\n              }\n\n              that._value = parseRule(value, timezone) || {};\n            },\n            destroy: function () {\n              this._destroyView();\n\n              kendo.destroy(this._endFields);\n\n              if (this._weekDayButtonGroup) {\n                this._weekDayButtonGroup.destroy();\n              }\n\n              this.element.off(CLICK + this._namespace);\n              BaseRecurrenceEditor.fn.destroy.call(this);\n            },\n            _initInterval: function () {\n              var that = this;\n              var rule = that._value;\n\n              that._container.find(\".k-recur-interval\").val(that._value.interval || 1).on(CHANGE + that._namespace, function (e) {\n                rule.interval = e.target.value;\n\n                that._trigger();\n              });\n            },\n            _initRepeatButton: function () {\n              var that = this;\n              var freq = that.options.messages.frequencies[this._value.freq || \"never\"];\n              that._chevronButton = $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>');\n              that._repeatValue = $('<span class=\"\">' + freq + '</span>');\n              that.element.append(that._repeatValue).append(that._chevronButton);\n              that.element.parents(\"li.k-item\").on(CLICK + that._namespace, function (e) {\n                e.preventDefault();\n\n                that._createView(\"repeat\");\n\n                that._pane.navigate(that._view, that.options.animations.left);\n              });\n            },\n            _endLiItem: function () {\n              var that = this;\n              return '<li class=\"k-item k-listgroup-item\"><label class=\"k-label k-listgroup-form-row\"><span class=\"k-item-title k-listgroup-form-field-label\">' + that.options.messages.end.mobileLabel + '</span></label></li>';\n            },\n            _initParentRepeatEnd: function () {\n              var that = this;\n              var endLabelField = $(that._endLiItem()).insertAfter(that.element.parents(\"li.k-item\"));\n              var endEditField = $('<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span></div>').appendTo(endLabelField.find(\".k-label\"));\n              endLabelField.on(CLICK + that._namespace, function (e) {\n                e.preventDefault();\n\n                that._navigateToView(\"repeat\");\n              });\n              that._endParentLabelField = endLabelField.toggle(!!that._value.freq);\n              that._endParentEndButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n            },\n            _initRepeatEnd: function () {\n              var that = this;\n              var endLabelField = $(that._endLiItem()).insertAfter(that._container);\n              var endEditField = $('<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span><span class=\"k-icon k-i-arrow-chevron-right\"></span></div>').appendTo(endLabelField.find(\".k-label\"));\n              endLabelField.on(CLICK + that._namespace, function (e) {\n                e.preventDefault();\n\n                that._navigateToView(\"end\");\n              });\n              that._endLabelField = endLabelField.toggleClass(\"k-disabled\", !that._value.freq);\n              that._endButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n            },\n            _navigateToView: function (viewName) {\n              var that = this;\n\n              that._createView(viewName);\n\n              that._pane.navigate(that._view, that.options.animations.left);\n            },\n            _endText: function () {\n              var rule = this._value;\n              var messages = this.options.messages.end;\n              var text = messages.never;\n\n              if (rule.count) {\n                text = kendo.format(\"{0} {1}\", messages.after, rule.count);\n              } else if (rule.until) {\n                text = kendo.format(\"{0} {1:d}\", messages.on, rule.until);\n              }\n\n              return text;\n            },\n            _initFrequency: function () {\n              var that = this;\n              var frequencyMessages = that.options.messages.frequencies;\n              var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                dataSource: $.map(this.options.frequencies, function (frequency) {\n                  return {\n                    text: frequencyMessages[frequency],\n                    value: frequency !== \"never\" ? frequency : \"\"\n                  };\n                }),\n                value: that._value.freq || \"\",\n                ns: kendo.ns\n              });\n\n              that._view.element.find(\".k-recur-pattern\").append(html);\n\n              that._view.element.find(\".k-scheduler-select\").on(CHANGE + that._namespace, function (e) {\n                var value = e.target.value;\n                that._value = {\n                  freq: value\n                };\n                that._defaultValue = $.extend({}, that._value);\n\n                that._initRepeatView();\n\n                that._endButton.text(that._endText());\n\n                that._endParentEndButton.text(that._endText());\n              });\n            },\n            _initEndNavigation: function () {\n              var that = this;\n              var endMessages = that.options.messages.end.patterns;\n              var rule = that._value;\n              var value = \"\";\n\n              if (rule.count) {\n                value = \"count\";\n              } else if (rule.until) {\n                value = \"until\";\n              }\n\n              var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                dataSource: [{\n                  text: endMessages.never,\n                  value: \"\"\n                }, {\n                  text: endMessages.after,\n                  value: \"count\"\n                }, {\n                  text: endMessages.on,\n                  value: \"until\"\n                }],\n                value: value,\n                ns: kendo.ns\n              });\n\n              that._view.element.find(\".k-recur-pattern\").append(html);\n\n              that._view.element.find(\".k-scheduler-select\").on(CHANGE + that._namespace, function (e) {\n                var value = e.target.value;\n                var count = null;\n                var until = null;\n\n                that._initEndView(value);\n\n                if (that._count.length) {\n                  count = that._count.val();\n                  until = null;\n                } else if (that._until.length) {\n                  count = null;\n                  until = that._until.val ? kendo.parseDate(that._until.val(), \"yyyy-MM-dd\") : that._until.value();\n                }\n\n                rule.count = count;\n                rule.until = until;\n              });\n            },\n            _createView: function (viewType) {\n              var that = this;\n              var options = that.options;\n              var messages = options.messages;\n              var headerTitle = messages[viewType === \"repeat\" ? \"repeatTitle\" : \"endTitle\"];\n              var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\" id=\"recurrence\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' + 'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + messages.headerTitle + '<a href=\"#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.update + '\" ' + 'aria-label=\"' + messages.update + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>';\n\n              var returnViewId = that._pane.view().id;\n\n              that._view = that._pane.append(html + RECURRENCE_HEADER_TEMPLATE({\n                headerTitle: headerTitle\n              }));\n\n              that._view.element.on(CLICK + that._namespace, \"a.k-scheduler-cancel, a.k-scheduler-update\", function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                if ($(this).hasClass(\"k-scheduler-update\")) {\n                  that.trigger(\"change\");\n                  that._defaultValue = $.extend({}, that._value);\n                } else {\n                  that._value = that._defaultValue;\n                }\n\n                var frequency = that._value.freq;\n\n                that._endParentEndButton.text(that._endText());\n\n                that._endParentLabelField.toggle(!!frequency && frequency !== \"never\");\n\n                that._endButton.text(that._endText());\n\n                that._repeatValue.text(messages.frequencies[frequency || \"never\"]);\n\n                that._pane.one(\"viewShow\", function () {\n                  that._destroyView();\n                });\n\n                that._pane.navigate(returnViewId, that.options.animations.right);\n              });\n\n              that._container = that._view.element.find(\".k-recur-view\");\n\n              if (viewType === \"repeat\") {\n                that._initFrequency();\n\n                that._initRepeatView();\n\n                that._initRepeatEnd();\n              } else {\n                that._initEndNavigation();\n\n                that._initEndView();\n              }\n            },\n            _destroyView: function () {\n              if (this._view) {\n                this._view.destroy();\n\n                this._view.element.remove();\n\n                this._container = null;\n              }\n\n              this._view = null;\n            },\n            _initRepeatView: function () {\n              var that = this;\n              var frequency = that._value.freq || \"never\";\n              var data = {\n                frequency: frequency,\n                firstWeekDay: that.options.firstWeekDay,\n                messages: that.options.messages[frequency]\n              };\n              var html = RECURRENCE_REPEAT_PATTERN_TEMPLATE(data);\n\n              var container = that._container = that._container || this._pane.view().content.find(\"li.k-recur-view\");\n\n              var rule = that._value;\n\n              if (that._endLabelField) {\n                that._endLabelField.toggleClass(\"k-disabled\", frequency === \"never\");\n              }\n\n              kendo.destroy(container);\n              container.html(html);\n\n              if (!html) {\n                that._value = {};\n                container.hide();\n                return;\n              } else {\n                container.show();\n              }\n\n              if (frequency === \"weekly\" && !rule.weekDays) {\n                rule.weekDays = [{\n                  day: that.options.start.getDay(),\n                  offset: 0\n                }];\n              }\n\n              that._weekDayButtons(that.options.firstWeekDay);\n\n              that._initInterval();\n\n              that._initMonthDay();\n\n              that._initWeekDays();\n\n              that._initWeekDay();\n\n              that._initMonth();\n\n              that._period();\n            },\n            _initMonthDay: function () {\n              var that = this;\n              var rule = that._value;\n\n              var monthDayInput = that._monthDay = that._container.find(\".k-recur-monthday\");\n\n              monthDayInput.attr({\n                min: 1,\n                max: 31\n              }).val(rule.monthDays ? rule.monthDays[0] : that.options.start.getDate()).on(CHANGE + that._namespace, function (e) {\n                rule.count = e.target.value;\n\n                that._trigger();\n              });\n            },\n            _initCount: function () {\n              var that = this,\n                  input = that._count = that._container.find(\".k-recur-count\"),\n                  rule = that._value;\n\n              input.val(rule.count || 1).on(CHANGE + that._namespace, function (ev) {\n                rule.count = ev.target.value;\n\n                that._trigger();\n              });\n            },\n            _initEndView: function (endPattern) {\n              var that = this;\n              var rule = that._value;\n\n              if (endPattern === undefined) {\n                if (rule.count) {\n                  endPattern = \"count\";\n                } else if (rule.until) {\n                  endPattern = \"until\";\n                }\n              }\n\n              var data = {\n                endPattern: endPattern,\n                messages: that.options.messages.end\n              };\n              kendo.destroy(that._container);\n\n              that._container.html(RECURRENCE_END_PATTERN_TEMPLATE(data));\n\n              that._initCount();\n\n              that._initUntil();\n            },\n            _initWeekDay: function () {\n              var that = this,\n                  data;\n              var weekdayMessage = that.options.messages.weekdays;\n              var offsetMessage = that.options.messages.offsetPositions;\n\n              var weekDaySelect = that._container.find(\".k-recur-weekday\");\n\n              var change = function () {\n                that._weekDayRule();\n\n                that.trigger(\"change\");\n              };\n\n              if (weekDaySelect[0]) {\n                that._weekDayOffset = that._container.find(\".k-recur-weekday-offset\").html(that._options([{\n                  text: offsetMessage.first,\n                  value: \"1\"\n                }, {\n                  text: offsetMessage.second,\n                  value: \"2\"\n                }, {\n                  text: offsetMessage.third,\n                  value: \"3\"\n                }, {\n                  text: offsetMessage.fourth,\n                  value: \"4\"\n                }, {\n                  text: offsetMessage.last,\n                  value: \"-1\"\n                }])).on(\"change\", change);\n                data = [{\n                  text: weekdayMessage.day,\n                  value: \"day\"\n                }, {\n                  text: weekdayMessage.weekday,\n                  value: \"weekday\"\n                }, {\n                  text: weekdayMessage.weekend,\n                  value: \"weekend\"\n                }];\n                data = data.concat($.map(kendo.culture().calendar.days.names, function (dayName, idx) {\n                  return {\n                    text: dayName,\n                    value: idx\n                  };\n                }));\n                that._weekDay = weekDaySelect.html(that._options(data)).on(\"change\", change).val(that.options.start.getDay());\n\n                that._weekDayView();\n              }\n            },\n            _initMonth: function () {\n              var that = this;\n              var rule = that._value;\n              var start = that.options.start;\n              var month = rule.months || [start.getMonth() + 1];\n\n              var monthSelect = that._container.find(\".k-recur-month\");\n\n              var monthNames = kendo.culture().calendar.months.names;\n\n              if (monthSelect[0]) {\n                var data = $.map(monthNames, function (monthName, idx) {\n                  return {\n                    text: monthName,\n                    value: idx + 1\n                  };\n                });\n                monthSelect.html(that._options(data)).on(\"change\", function () {\n                  rule.months = [Number(this.value)];\n                });\n                that._monthSelect = monthSelect;\n\n                if (month) {\n                  monthSelect.val(month[0]);\n                }\n              }\n            },\n            _period: function () {\n              var that = this;\n              var rule = that._value;\n              var container = that._container;\n              var messages = that.options.messages[rule.freq];\n              var repeatRuleGroupButton = container.find(\".k-repeat-rule\");\n              var weekDayView = container.find(\".k-weekday-view\");\n              var monthDayView = container.find(\".k-monthday-view\");\n\n              if (repeatRuleGroupButton[0]) {\n                var currentValue = rule.weekDays ? \"weekday\" : \"monthday\";\n                var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                  value: currentValue,\n                  dataSource: [{\n                    text: messages.dayOfMonth,\n                    value: \"monthday\"\n                  }, {\n                    text: messages.dayOfWeek,\n                    value: \"weekday\"\n                  }],\n                  ns: kendo.ns\n                });\n\n                var init = function (val) {\n                  var weekDayName = that._weekDay.val();\n\n                  var weekDayOffset = that._weekDayOffset.val();\n\n                  var monthDay = that._monthDay.val();\n\n                  var month = that._monthSelect ? that._monthSelect.val() : null;\n\n                  if (val === \"monthday\") {\n                    rule.weekDays = null;\n                    rule.monthDays = monthDay ? [monthDay] : monthDay;\n                    rule.months = month ? [Number(month)] : month;\n                    weekDayView.hide();\n                    monthDayView.show();\n                  } else {\n                    rule.monthDays = null;\n                    rule.months = month ? [Number(month)] : month;\n                    rule.weekDays = [{\n                      offset: Number(weekDayOffset),\n                      day: Number(weekDayName)\n                    }];\n                    weekDayView.show();\n                    monthDayView.hide();\n                  }\n                };\n\n                repeatRuleGroupButton.append(html);\n                repeatRuleGroupButton.find(\".k-scheduler-select\").on(CHANGE + that._namespace, function (e) {\n                  init(e.target.value);\n                });\n                init(currentValue);\n              }\n            },\n            _initUntil: function () {\n              var that = this;\n\n              var input = that._container.find(\".k-recur-until\");\n\n              var start = that.options.start;\n              var rule = that._value;\n              var until = rule.until;\n              var min = until && until < start ? until : start;\n              var validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on);\n              var dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare;\n              input.attr(\"data-validDate-msg\", validDateValidationMessage);\n              input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n              if (kendo.support.input.date) {\n                that._until = input.attr(\"min\", kendo.toString(min, \"yyyy-MM-dd\")).val(kendo.toString(until || start, \"yyyy-MM-dd\")).on(\"change\", function () {\n                  var date = kendo.parseDate(this.value, \"yyyy-MM-dd\");\n\n                  if (date) {\n                    rule.until = date;\n                  }\n\n                  that._trigger();\n                });\n              } else {\n                that._until = input.kendoDatePicker({\n                  min: min,\n                  value: until || start,\n                  change: function () {\n                    var date = this.value();\n\n                    if (date) {\n                      rule.until = date;\n                    }\n\n                    that._trigger();\n                  }\n                }).data(\"kendoDatePicker\");\n              }\n            },\n            _options: function (data, optionLabel) {\n              var idx = 0;\n              var html = \"\";\n              var length = data.length;\n              var template = this._optionTemplate;\n\n              if (optionLabel) {\n                html += template({\n                  value: \"\",\n                  text: optionLabel\n                });\n              }\n\n              for (; idx < length; idx++) {\n                html += template(data[idx]);\n              }\n\n              return html;\n            }\n          });\n          ui.plugin(MobileRecurrenceEditor);\n        })(window.kendo.jQuery);\n\n        return window.kendo;\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    33367:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.buttongroup\");\n      /***/\n    },\n\n    /***/\n    4832:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.datepicker\");\n      /***/\n    },\n\n    /***/\n    54148:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.dropdownlist\");\n      /***/\n    },\n\n    /***/\n    32011:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.numerictextbox\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(10847);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","__meta__","id","name","category","depends","hidden","$","kendo","window","timezone","Class","ui","Widget","DropDownList","ButtonGroup","kendoDate","date","setTime","setDayOfWeek","adjustDST","firstDayOfMonth","getMilliseconds","DAYS_IN_LEAPYEAR","DAYS_IN_YEAR","MONTHS","WEEK_DAYS","WEEK_DAYS_IDX","DATE_FORMATS","RULE_NAMES","RULE_NAMES_LENGTH","length","RECURRENCE_DATE_FORMAT","limitation","months","end","rule","monthRules","ruleValues","getMonth","changed","setMonth","setFullYear","getFullYear","monthDays","monthLength","month","days","hours","getHours","normalize","monthDay","getMonthLength","getDate","sort","numberSortPredicate","yearDays","year","yearDay","leapYear","dayInYear","weeks","weekStart","day","week","weekInYear","weekDays","offsetDate","Date","getTime","offsets","start","normalizeDay","getDay","weekDayRules","ruleWeekValues","traverseRuleForNextMont","nextMonthFirstDay","ruleDay","normalizeDayIndex","weekDayRule","freq","positions","position","forEach","offset","isInWeek","weekInMonth","numberOfWeeks","setDate","hourRules","startTime","_startTime","startHours","setHours","minutes","setMinutes","getMinutes","minuteRules","currentMinutes","seconds","setSeconds","getSeconds","secondRules","BaseFrequency","extend","next","options","idx","_hour","limit","interval","ruleName","firstRule","modified","current","_startPeriod","frequency","excess","diff","startTimeHours","getTimezoneOffset","MS_PER_HOUR","MS_PER_MINUTE","Math","floor","intervalExcess","round","MS_PER_DAY","_date","_getNumberOfWeeksBetweenDates","normalizedCurrentIndex","normalizedStartIndex","_hasRuleValue","first","second","exactWeeks","HourlyFrequency","fn","DailyFrequency","WeeklyFrequency","setup","eventStartDate","MonthlyFrequency","YearlyFrequency","frequencies","CLICK","CHANGE","firstWeekDay","firstWeekLength","ceil","weekDay","normalizeOffset","lastDate","weeksInMonth","skipFirst","skipLast","currentDay","ruleWeekOffset","weekNumber","result","push","rules","value","availableRules","ruleValue","parseArray","list","range","parseInt","isNaN","parseWeekDayList","valueLength","substring","toUpperCase","serializeWeekDayList","valueString","toString","a","b","parseExceptions","exceptions","zone","dates","split","indexOf","parseUTCDate","isException","Array","isArray","dateTime","toExceptionString","concat","convert","join","startPeriodByFreq","endPeriodByFreq","eventsByPosition","periodEvents","until","periodEventsLength","events","event","inPeriod","removeExceptionDates","exceptionDates","expand","endTime","endDate","durationMS","startPeriod","ruleStart","ruleEnd","useEventStart","freqName","eventStartTime","eventStartMS","eventStart","count","currentIdx","shiftedStart","shiftedEnd","shiftedStartTime","shifterEndTime","parseRule","recurrenceRule","getZoneOffset","startTimezone","endTimezone","clone","recurrenceException","exdates","set","_endPeriod","duration","allDayCompensation","isAllDay","toInvariantTime","inPeriodCheckEndDate","toUtcTime","startZone","endZone","startOffsetDiff","endOffsetDiff","startTZOffsetDiff","endTZOffsetDiff","offsetTicksStart","offsetTicksEnd","toOccurrence","_endTime","slice","isMissingDSTHour","isDSTMissingHour","dateOffset","dateMinusHour","dateMinusHourOffset","parseDate","parseDateRule","dateRule","pairs","pair","property","tzid","valueIdx","recur","instance","splits","part","parts","predicate","day1","day2","trim","toLowerCase","culture","calendar","firstDay","serializeDateRule","val","serialize","ruleString","recurrence","parse","RECURRENCE_VIEW_TEMPLATE","template","DAY_RULE","WEEKDAY_RULE","WEEKEND_RULE","BaseRecurrenceEditor","init","element","that","call","wrapper","today","_namespace","spinners","mobile","messages","repeat","recurrenceEditorTitle","never","hourly","daily","weekly","monthly","yearly","repeatEvery","repeatOn","of","label","mobileLabel","after","occurrence","on","offsetPositions","third","fourth","last","weekdays","weekday","weekend","_initInterval","_value","_container","find","kendoNumericTextBox","decimals","format","min","change","_trigger","_weekDayButtons","names","abbreviated","namesAbbr","values","items","text","attributes","_weekDayButtonGroup","selection","select","selectedDays","map","i","Number","getAttribute","_weekDayRule","clear","_weekDay","_weekDayOffset","_weekDayView","weekDayOffsetWidget","weekDayOffset","weekDayValue","method","_initWeekDay","data","weekdayMessage","offsetMessage","weekDayInput","autoWidth","dataTextField","dataValueField","dataSource","dayName","_initWeekDays","weekDayButtonGroup","ruleDays","ruleDaysLength","selectors","selectedWeekDayButtons","_initMonthDay","monthDayInput","_monthDay","NumericTextBox","max","_initCount","input","_count","_initUntil","startInput","closest","validDateValidationMessage","Validator","prototype","dateCompareValidationMessage","dateCompare","initialValue","attr","_until","kendoDatePicker","setOptions","trigger","RecurrenceEditor","_initFrequency","_initContainer","destroy","_frequency","off","freqButton","_initView","container","editContainer","parent","insertAfter","append","buttonGroupElement","title","html","_initMonth","_period","_end","monthInputs","monthName","_month1","_month2","namespace","click","e","_toggleEnd","currentTarget","endRule","_buttonNever","_buttonCount","_buttonUntil","toggleRule","_toggleMonthDay","_toggleYear","selector","radioButtons","_buttonMonthDay","eq","_buttonWeekDay","enableCount","enableUntil","prop","enable","monthRule","enableMonthDay","enableWeekDay","yearRule","enableMonth1","enableMonth2","plugin","RECURRENCE_HEADER_TEMPLATE","RECURRENCE_REPEAT_PATTERN_TEMPLATE","RECURRENCE_END_PATTERN_TEMPLATE","RECURRENCE_GROUP_BUTTON_TEMPLATE","MobileRecurrenceEditor","_optionTemplate","_pane","pane","_initRepeatButton","_initParentRepeatEnd","_defaultValue","animations","left","right","cancel","update","endTitle","repeatTitle","headerTitle","patterns","repeatBy","dayOfMonth","dayOfWeek","every","_destroyView","_endFields","target","_chevronButton","_repeatValue","parents","preventDefault","_createView","navigate","_view","_endLiItem","endLabelField","endEditField","appendTo","_navigateToView","_endParentLabelField","toggle","_endParentEndButton","_endText","_initRepeatEnd","_endLabelField","toggleClass","_endButton","viewName","frequencyMessages","ns","_initRepeatView","_initEndNavigation","endMessages","_initEndView","viewType","returnViewId","view","stopPropagation","hasClass","one","remove","content","hide","show","ev","endPattern","weekDaySelect","_options","monthSelect","monthNames","_monthSelect","repeatRuleGroupButton","weekDayView","monthDayView","currentValue","weekDayName","support","optionLabel","jQuery","amdD","require","__webpack_module_cache__","moduleId","cachedModule","Error","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/client/app-router/node_modules/@progress/kendo-ui/js/kendo.scheduler.recurrence.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 10847:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(54148), __webpack_require__(4832), __webpack_require__(32011), __webpack_require__(33367) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\nvar __meta__ = {\n    id: \"scheduler.recurrence\",\n    name: \"Recurrence\",\n    category: \"web\",\n    depends: [ \"dropdownlist\", \"datepicker\", \"numerictextbox\", \"buttongroup\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        timezone = kendo.timezone,\n        Class = kendo.Class,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DropDownList = ui.DropDownList,\n        ButtonGroup = ui.ButtonGroup,\n        kendoDate = kendo.date,\n        setTime = kendoDate.setTime,\n        setDayOfWeek = kendoDate.setDayOfWeek,\n        adjustDST = kendoDate.adjustDST,\n        firstDayOfMonth = kendoDate.firstDayOfMonth,\n        getMilliseconds = kendoDate.getMilliseconds,\n        DAYS_IN_LEAPYEAR = [0,31,60,91,121,152,182,213,244,274,305,335,366],\n        DAYS_IN_YEAR = [0,31,59,90,120,151,181,212,243,273,304,334,365],\n        MONTHS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n        WEEK_DAYS = {\n            0: \"SU\",\n            1: \"MO\",\n            2: \"TU\",\n            3: \"WE\",\n            4: \"TH\",\n            5: \"FR\",\n            6: \"SA\"\n        },\n        WEEK_DAYS_IDX = {\n            \"SU\": 0,\n            \"MO\": 1,\n            \"TU\": 2,\n            \"WE\": 3,\n            \"TH\": 4,\n            \"FR\": 5,\n            \"SA\": 6\n        },\n        DATE_FORMATS = [\n            \"yyyy-MM-ddTHH:mm:ss.fffzzz\",\n            \"yyyy-MM-ddTHH:mm:sszzz\",\n            \"yyyy-MM-ddTHH:mm:ss\",\n            \"yyyy-MM-ddTHH:mm\",\n            \"yyyy-MM-ddTHH\",\n            \"yyyy-MM-dd\",\n            \"yyyyMMddTHHmmssfffzzz\",\n            \"yyyyMMddTHHmmsszzz\",\n            \"yyyyMMddTHHmmss\",\n            \"yyyyMMddTHHmm\",\n            \"yyyyMMddTHH\",\n            \"yyyyMMdd\"\n        ],\n        RULE_NAMES = [\"months\", \"weeks\", \"yearDays\", \"monthDays\", \"weekDays\", \"hours\", \"minutes\", \"seconds\"],\n        RULE_NAMES_LENGTH = RULE_NAMES.length,\n        RECURRENCE_DATE_FORMAT = \"yyyyMMddTHHmmssZ\",\n        limitation = {\n            months: function(date, end, rule) {\n                var monthRules = rule.months,\n                    months = ruleValues(monthRules, date.getMonth() + 1),\n                    changed = false;\n\n                if (months !== null) {\n                    if (months.length) {\n                        date.setMonth(months[0] - 1, 1);\n                    } else {\n                        date.setFullYear(date.getFullYear() + 1, monthRules[0] - 1, 1);\n                    }\n\n                    changed = true;\n                }\n\n                return changed;\n            },\n\n            monthDays: function(date, end, rule) {\n                var monthLength, month, days,\n                    changed = false,\n                    hours = date.getHours(),\n                    normalize = function(monthDay) {\n                        if (monthDay < 0) {\n                            monthDay = monthLength + monthDay + 1;\n                        }\n                        return monthDay;\n                    };\n\n                while (date <= end) {\n                    month = date.getMonth();\n                    monthLength = getMonthLength(date);\n                    days = ruleValues(rule.monthDays, date.getDate(), normalize);\n\n                    if (days === null) {\n                        return changed;\n                    }\n\n                    changed = true;\n\n                    if (days.length) {\n                        date.setMonth(month, days.sort(numberSortPredicate)[0]);\n                        adjustDST(date, hours);\n\n                        if (month === date.getMonth()) {\n                            break;\n                        }\n                    } else {\n                        date.setMonth(month + 1, 1);\n                    }\n                }\n\n                return changed;\n            },\n\n            yearDays: function(date, end, rule) {\n                var year, yearDays,\n                    changed = false,\n                    hours = date.getHours(),\n                    normalize = function(yearDay) {\n                        if (yearDay < 0) {\n                            yearDay = year + yearDay;\n                        }\n                        return yearDay;\n                    };\n\n                while (date < end) {\n                    year = leapYear(date) ? 366 : 365;\n                    yearDays = ruleValues(rule.yearDays, dayInYear(date), normalize);\n\n                    if (yearDays === null) {\n                        return changed;\n                    }\n\n                    changed = true;\n                    year = date.getFullYear();\n\n                    if (yearDays.length) {\n                        date.setFullYear(year, 0, yearDays.sort(numberSortPredicate)[0]);\n                        adjustDST(date, hours);\n                        break;\n                    } else {\n                        date.setFullYear(year + 1, 0, 1);\n                    }\n                }\n\n                return changed;\n            },\n\n            weeks: function(date, end, rule) {\n                var weekStart = rule.weekStart,\n                    year, weeks, day,\n                    changed = false,\n                    hours = date.getHours(),\n                    normalize = function(week) {\n                        if (week < 0) {\n                            week = 53 + week;\n                        }\n                        return week;\n                    };\n\n                while (date < end) {\n                    weeks = ruleValues(rule.weeks, weekInYear(date, weekStart), normalize);\n\n                    if (weeks === null) {\n                        return changed;\n                    }\n\n                    changed = true;\n                    year = date.getFullYear();\n\n                    if (weeks.length) {\n                        day = (weeks.sort(numberSortPredicate)[0] * 7) - 1;\n\n                        date.setFullYear(year, 0, day);\n                        setDayOfWeek(date, weekStart, -1);\n\n                        adjustDST(date, hours);\n                        break;\n                    } else {\n                        date.setFullYear(year + 1, 0, 1);\n                    }\n                }\n\n                return changed;\n            },\n\n            weekDays: function(date, end, rule) {\n                var offsetDate = new Date(date.getTime() + rule.offsets.start);\n                var normalizeDay = offsetDate.getDay() - date.getDay();\n                var weekDays = rule.weekDays;\n                var weekStart = rule.weekStart;\n                var weekDayRules = ruleWeekValues(weekDays, offsetDate, weekStart);\n                var hours = date.getHours();\n                var traverseRuleForNextMont = function(rule) {\n                    var nextMonthFirstDay = new Date(date.getFullYear(), date.getMonth() + 1, 1);\n                    var ruleDay = normalizeDayIndex(rule.day, weekStart);\n\n                    if (nextMonthFirstDay.getDay() <= ruleDay) {\n                        if (!weekDayRule || normalizeDayIndex(weekDayRule.day, weekStart) > ruleDay) {\n                            weekDayRule = rule;\n                        }\n                    }\n                };\n                var weekDayRule, day;\n\n\n                if (weekDayRules === null) {\n                    return false;\n                }\n\n                weekDayRule = weekDayRules[0];\n\n                if (!weekDayRule) {\n                    if (rule.freq === \"monthly\" && !rule.positions || rule.position > 0) {\n                        weekDays.forEach(traverseRuleForNextMont);\n                    }\n                    if (!weekDayRule) {\n                        weekDayRule = weekDays[0];\n                    }\n                    setDayOfWeek(date, weekStart);\n                }\n\n                day = weekDayRule.day;\n                day -= normalizeDay;\n\n                if (weekDayRule.offset) {\n                    while (date <= end && !isInWeek(date, weekDayRule, weekStart)) {\n                        if (weekInMonth(date, weekStart) === numberOfWeeks(date, weekStart)) {\n                            date.setMonth(date.getMonth() + 1, 1);\n                            adjustDST(date, hours);\n                        } else {\n                            date.setDate(date.getDate() + 7);\n                            adjustDST(date, hours);\n\n                            setDayOfWeek(date, weekStart, -1);\n                        }\n                    }\n                }\n\n                if (date.getDay() !== day) {\n                    setDayOfWeek(date, day);\n                }\n\n                return true;\n            },\n\n            hours: function(date, end, rule) {\n                var hourRules = rule.hours,\n                    startTime = rule._startTime,\n                    startHours = startTime.getHours(),\n                    hours = ruleValues(hourRules, startHours),\n                    changed = false;\n\n                if (hours !== null) {\n                    changed = true;\n\n                    date.setHours(startHours);\n                    adjustDST(date, startHours);\n\n                    if (hours.length) {\n                        hours = hours[0];\n                        date.setHours(hours);\n                    } else {\n                        hours = date.getHours();\n                        date.setDate(date.getDate() + 1);\n                        adjustDST(date, hours);\n\n                        hours = hourRules[0];\n                        date.setHours(hours);\n                        adjustDST(date, hours);\n                    }\n\n                    if (rule.minutes) {\n                        date.setMinutes(0);\n                    }\n\n                    startTime.setHours(hours, date.getMinutes());\n                }\n\n                return changed;\n            },\n\n            minutes: function(date, end, rule) {\n                var minuteRules = rule.minutes,\n                    currentMinutes = date.getMinutes(),\n                    minutes = ruleValues(minuteRules, currentMinutes),\n                    hours = rule._startTime.getHours(),\n                    changed = false;\n\n                if (minutes !== null) {\n                    changed = true;\n\n                    if (minutes.length) {\n                        minutes = minutes[0];\n                    } else {\n                        hours += 1;\n                        minutes = minuteRules[0];\n                    }\n\n                    if (rule.seconds) {\n                        date.setSeconds(0);\n                    }\n\n                    date.setHours(hours, minutes);\n\n                    hours = hours % 24;\n                    adjustDST(date, hours);\n                    rule._startTime.setHours(hours, minutes, date.getSeconds());\n                }\n\n                return changed;\n            },\n\n            seconds: function(date, end, rule) {\n                var secondRules = rule.seconds,\n                    hours = rule._startTime.getHours(),\n                    seconds = ruleValues(secondRules, date.getSeconds()),\n                    minutes = date.getMinutes(),\n                    changed = false;\n\n                if (seconds !== null) {\n                    changed = true;\n\n                    if (seconds.length) {\n                        date.setSeconds(seconds[0]);\n                    } else {\n                        minutes += 1;\n                        date.setMinutes(minutes, secondRules[0]);\n\n                        if (minutes > 59) {\n                            minutes = minutes % 60;\n                            hours = (hours + 1) % 24;\n                        }\n                    }\n\n                    rule._startTime.setHours(hours, minutes, date.getSeconds());\n                }\n\n                return changed;\n            }\n        },\n        BaseFrequency = Class.extend({\n            next: function(date, rule) {\n                var startTime = rule._startTime,\n                    day = startTime.getDate(),\n                    minutes, seconds;\n\n                if (rule.seconds) {\n                    seconds = date.getSeconds() + 1;\n\n                    date.setSeconds(seconds);\n                    startTime.setSeconds(seconds);\n                    startTime.setDate(day);\n\n                } else if (rule.minutes) {\n                    minutes = date.getMinutes() + 1;\n\n                    date.setMinutes(minutes);\n                    startTime.setMinutes(minutes);\n                    startTime.setDate(day);\n                } else {\n                    return false;\n                }\n\n                return true;\n            },\n\n            normalize: function(options) {\n                var rule = options.rule;\n\n                if (options.idx === 4 && rule.hours) {\n                    rule._startTime.setHours(0);\n                    this._hour(options.date, rule);\n                }\n            },\n\n            limit: function(date, end, rule) {\n                var interval = rule.interval,\n                    ruleName, firstRule,\n                    modified,\n                    idx, day;\n\n                while (date <= end) {\n                    modified = firstRule = undefined;\n                    day = date.getDate();\n\n                    for (idx = 0; idx < RULE_NAMES_LENGTH; idx++) {\n                        ruleName = RULE_NAMES[idx];\n\n                        if (rule[ruleName]) {\n                            modified = limitation[ruleName](date, end, rule);\n                            if (firstRule !== undefined && modified) {\n                                break;\n                            } else {\n                                firstRule = modified;\n                            }\n                        }\n\n                        if (modified) {\n                            this.normalize({ date: date, rule: rule, day: day, idx: idx });\n                        }\n                    }\n\n                    if ((interval === 1 || !this.interval(rule, date)) && idx === RULE_NAMES_LENGTH) {\n                        break;\n                    }\n                }\n            },\n\n            interval: function(rule, current) {\n                var start = new Date(rule._startPeriod);\n                var date = new Date(current);\n                var hours = current.getHours();\n                var weekStart = rule.weekStart;\n                var interval = rule.interval;\n                var frequency = rule.freq;\n                var modified = false;\n                var excess = 0;\n                var month = 0;\n                var day = 1;\n                var diff;\n\n                var startTimeHours;\n\n                if (frequency === \"hourly\") {\n                    diff = date.getTimezoneOffset() - start.getTimezoneOffset();\n                    startTimeHours = rule._startTime.getHours();\n\n                    date = date.getTime();\n                    if (hours !== startTimeHours) {\n                        date += (startTimeHours - hours) * kendoDate.MS_PER_HOUR;\n                    }\n                    date -= start;\n\n                    if (diff) {\n                        date -= diff * kendoDate.MS_PER_MINUTE;\n                    }\n\n                    diff = Math.floor(date / kendoDate.MS_PER_HOUR);\n                    excess = intervalExcess(diff, interval);\n\n                    if (excess !== 0) {\n                        this._hour(current, rule, excess);\n                        modified = true;\n                    }\n                } else if (frequency === \"daily\") {\n                    kendoDate.setTime(date, -start, true);\n\n                    diff = Math.round(date / kendoDate.MS_PER_DAY);\n                    excess = intervalExcess(diff, interval);\n\n                    if (excess !== 0) {\n                        this._date(current, rule, excess);\n                        modified = true;\n                    }\n\n                } else if (frequency === \"weekly\") {\n                    excess = this._getNumberOfWeeksBetweenDates(start, current);\n\n                    var normalizedCurrentIndex = normalizeDayIndex(current.getDay(), weekStart);\n                    var normalizedStartIndex = normalizeDayIndex(start.getDay(), weekStart);\n\n                    if (normalizedCurrentIndex < normalizedStartIndex) {\n                        excess += 1;\n                    }\n\n                    excess = intervalExcess(excess, interval);\n                    if (excess !== 0) {\n                        kendoDate.setDayOfWeek(current, rule.weekStart, -1);\n\n                        current.setDate(current.getDate() + (excess * 7));\n                        adjustDST(current, hours);\n\n                        modified = true;\n                    }\n                } else if (frequency === \"monthly\") {\n                    diff = current.getFullYear() - start.getFullYear();\n                    diff = current.getMonth() - start.getMonth() + (diff * 12);\n\n                    excess = intervalExcess(diff, interval);\n\n                    if (excess !== 0) {\n                        day = rule._hasRuleValue ? 1 : current.getDate();\n\n                        current.setFullYear(current.getFullYear(), current.getMonth() + excess, day);\n                        adjustDST(current, hours);\n\n                        modified = true;\n                    }\n                } else if (frequency === \"yearly\") {\n                    diff = current.getFullYear() - start.getFullYear();\n                    excess = intervalExcess(diff, interval);\n\n                    if (!rule.months) {\n                        month = current.getMonth();\n                    }\n\n                    if (!rule.yearDays && !rule.monthDays && !rule.weekDays) {\n                        day = current.getDate();\n                    }\n\n                    if (excess !== 0) {\n                        current.setFullYear(current.getFullYear() + excess, month, day);\n                        adjustDST(current, hours);\n\n                        modified = true;\n                    }\n                }\n\n                return modified;\n            },\n\n            _getNumberOfWeeksBetweenDates: function(first, second) {\n                 var weeks = (second - first) / 604800000;\n                 var exactWeeks = Math.floor(weeks);\n\n                //this is happening when weeks pass DST change\n                if (weeks - exactWeeks > 0.99) {\n                    exactWeeks = Math.round(weeks);\n                }\n                return exactWeeks;\n            },\n\n            _hour: function(date, rule, interval) {\n                var startTime = rule._startTime,\n                    hours = startTime.getHours();\n\n                if (interval) {\n                    hours += interval;\n                }\n\n                date.setHours(hours);\n\n                hours = hours % 24;\n                startTime.setHours(hours);\n                adjustDST(date, hours);\n            },\n\n            _date: function(date, rule, interval) {\n                var hours = date.getHours();\n\n                date.setDate(date.getDate() + interval);\n                if (!adjustDST(date, hours)) {\n                    this._hour(date, rule);\n                }\n            }\n        }),\n        HourlyFrequency = BaseFrequency.extend({\n            next: function(date, rule) {\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    this._hour(date, rule, 1);\n                }\n            },\n\n            normalize: function(options) {\n                var rule = options.rule;\n\n                if (options.idx === 4) {\n                    rule._startTime.setHours(0);\n                    this._hour(options.date, rule);\n                }\n            }\n        }),\n        DailyFrequency = BaseFrequency.extend({\n            next: function(date, rule) {\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    this[rule.hours ? \"_hour\" : \"_date\"](date, rule, 1);\n                }\n            }\n        }),\n        WeeklyFrequency = DailyFrequency.extend({\n            setup: function(rule, eventStartDate) {\n                if (!rule.weekDays) {\n                    rule.weekDays = [{\n                        day: eventStartDate.getDay(),\n                        offset: 0\n                    }];\n                }\n            }\n        }),\n        MonthlyFrequency = BaseFrequency.extend({\n            next: function(date, rule) {\n                var day, hours;\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    if (rule.hours) {\n                        this._hour(date, rule, 1);\n                    } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                        this._date(date, rule, 1);\n                    } else {\n                        day = date.getDate();\n                        hours = date.getHours();\n\n                        date.setMonth(date.getMonth() + 1);\n                        adjustDST(date, hours);\n\n                        while (date.getDate() !== day) {\n                            date.setDate(day);\n                            adjustDST(date, hours);\n                        }\n\n                        this._hour(date, rule);\n                    }\n                }\n            },\n            normalize: function(options) {\n                var rule = options.rule,\n                    date = options.date,\n                    hours = date.getHours();\n\n                if (options.idx === 0 && !rule.monthDays && !rule.weekDays) {\n                    date.setDate(options.day);\n                    adjustDST(date, hours);\n                } else {\n                    BaseFrequency.fn.normalize(options);\n                }\n            },\n            setup: function(rule, eventStartDate, date) {\n                if (!rule.monthDays && !rule.weekDays) {\n                    date.setDate(eventStartDate.getDate());\n                }\n            }\n        }),\n        YearlyFrequency = MonthlyFrequency.extend({\n            next: function(date, rule) {\n                var day,\n                    hours = date.getHours();\n\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    if (rule.hours) {\n                        this._hour(date, rule, 1);\n                    } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                        this._date(date, rule, 1);\n                    } else if (rule.months) {\n                        day = date.getDate();\n\n                        date.setMonth(date.getMonth() + 1);\n                        adjustDST(date, hours);\n\n                        while (date.getDate() !== day) {\n                            date.setDate(day);\n                            adjustDST(date, hours);\n                        }\n\n                        this._hour(date, rule);\n                    } else {\n                        date.setFullYear(date.getFullYear() + 1);\n                        adjustDST(date, hours);\n\n                        this._hour(date, rule);\n                    }\n                }\n            },\n            setup: function() {}\n        }),\n        frequencies = {\n            \"hourly\": new HourlyFrequency(),\n            \"daily\": new DailyFrequency(),\n            \"weekly\": new WeeklyFrequency(),\n            \"monthly\": new MonthlyFrequency(),\n            \"yearly\": new YearlyFrequency()\n        },\n        CLICK = \"click\",\n        CHANGE = \"change\";\n\n    function intervalExcess(diff, interval) {\n        var excess;\n        if (diff !== 0 && diff < interval) {\n            excess = interval - diff;\n        } else {\n            excess = diff % interval;\n            if (excess) {\n                excess = interval - excess;\n            }\n        }\n\n        return excess;\n    }\n\n    function dayInYear(date) {\n        var month = date.getMonth();\n        var days = leapYear(date) ? DAYS_IN_LEAPYEAR[month] : DAYS_IN_YEAR[month];\n\n        return days + date.getDate();\n    }\n\n    function weekInYear(date, weekStart) {\n        var year, days;\n\n        date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n        adjustDST(date, 0);\n\n        year = date.getFullYear();\n\n        if (weekStart !== undefined) {\n            setDayOfWeek(date, weekStart, -1);\n            date.setDate(date.getDate() + 4);\n        } else {\n            date.setDate(date.getDate() + (4 - (date.getDay() || 7)));\n        }\n\n        adjustDST(date, 0);\n        days = Math.floor((date.getTime() - new Date(year, 0, 1, -6)) / 86400000);\n\n        return 1 + Math.floor(days / 7);\n    }\n\n    function weekInMonth(date, weekStart) {\n        var firstWeekDay = firstDayOfMonth(date).getDay();\n        var firstWeekLength = 7 - (firstWeekDay + 7 - (weekStart || 7)) || 7;\n\n        if (firstWeekLength < 0) {\n            firstWeekLength += 7;\n        }\n\n        return Math.ceil((date.getDate() - firstWeekLength) / 7) + 1;\n    }\n\n    function normalizeDayIndex(weekDay, weekStart) {\n        return weekDay + (weekDay < weekStart ? 7 : 0);\n    }\n\n    function normalizeOffset(date, rule, weekStart) {\n        var offset = rule.offset;\n\n        if (!offset) {\n            return weekInMonth(date, weekStart);\n        }\n\n        var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n        var weeksInMonth = weekInMonth(lastDate, weekStart);\n\n        var day = normalizeDayIndex(rule.day, weekStart);\n\n        var skipFirst = day < normalizeDayIndex(new Date(date.getFullYear(), date.getMonth(), 1).getDay(), weekStart);\n        var skipLast = day > normalizeDayIndex(lastDate.getDay(), weekStart);\n\n        if (offset < 0) {\n            offset = weeksInMonth + (offset + 1 - (skipLast ? 1 : 0));\n        } else if (skipFirst) {\n            offset += 1;\n        }\n\n        weeksInMonth -= (skipLast ? 1 : 0);\n\n        if (offset < (skipFirst ? 1 : 0) || offset > weeksInMonth) {\n            return null;\n        }\n\n        return offset;\n    }\n\n    function numberOfWeeks(date, weekStart) {\n        return weekInMonth(new Date(date.getFullYear(), date.getMonth() + 1, 0), weekStart);\n    }\n\n    function isInWeek(date, rule, weekStart) {\n        return weekInMonth(date, weekStart) === normalizeOffset(date, rule, weekStart);\n    }\n\n    function ruleWeekValues(weekDays, date, weekStart) {\n        var currentDay = normalizeDayIndex(date.getDay(), weekStart);\n        var length = weekDays.length;\n        var ruleWeekOffset;\n        var weekDay, day;\n        var weekNumber;\n        var result = [];\n        var idx = 0;\n\n        for (;idx < length; idx++) {\n            weekDay = weekDays[idx];\n\n            weekNumber = weekInMonth(date, weekStart);\n            ruleWeekOffset = normalizeOffset(date, weekDay, weekStart);\n\n            if (ruleWeekOffset === null) {\n                continue;\n            }\n\n            if (weekNumber < ruleWeekOffset) {\n                result.push(weekDay);\n            } else if (weekNumber === ruleWeekOffset) {\n                day = normalizeDayIndex(weekDay.day, weekStart);\n\n                if (currentDay < day) {\n                    result.push(weekDay);\n                } else if (currentDay === day) {\n                    return null;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    function ruleValues(rules, value, normalize) {\n        var idx = 0,\n            length = rules.length,\n            availableRules = [],\n            ruleValue;\n\n        for (; idx < length; idx++) {\n            ruleValue = rules[idx];\n\n            if (normalize) {\n                ruleValue = normalize(ruleValue);\n            }\n\n            if (value === ruleValue) {\n                return null;\n            } else if (value < ruleValue) {\n                availableRules.push(ruleValue);\n            }\n        }\n\n        return availableRules;\n    }\n\n    function parseArray(list, range) {\n        var idx = 0,\n            length = list.length,\n            value;\n\n        for (; idx < length; idx++) {\n            value = parseInt(list[idx], 10);\n            if (isNaN(value) || value < range.start || value > range.end || (value === 0 && range.start < 0)) {\n                return null;\n            }\n\n            list[idx] = value;\n        }\n\n        return list.sort(numberSortPredicate);\n    }\n\n    function parseWeekDayList(list) {\n        var idx = 0, length = list.length,\n            value, valueLength, day;\n\n        for (; idx < length; idx++) {\n            value = list[idx];\n            valueLength = value.length;\n            day = value.substring(valueLength - 2).toUpperCase();\n\n            day = WEEK_DAYS_IDX[day];\n            if (day === undefined) {\n                return null;\n            }\n\n            list[idx] = {\n                offset: parseInt(value.substring(0, valueLength - 2), 10) || 0,\n                day: day\n            };\n        }\n        return list;\n    }\n\n    function serializeWeekDayList(list) {\n        var idx = 0, length = list.length,\n            value, valueString, result = [];\n\n        for (; idx < length; idx++) {\n            value = list[idx];\n            if (typeof value === \"string\") {\n                valueString = value;\n            } else {\n                valueString = \"\" + WEEK_DAYS[value.day];\n\n                if (value.offset) {\n                    valueString = value.offset + valueString;\n                }\n            }\n\n            result.push(valueString);\n        }\n        return result.toString();\n    }\n\n    function getMonthLength(date) {\n        var month = date.getMonth();\n\n        if (month === 1) {\n            if (new Date(date.getFullYear(), 1, 29).getMonth() === 1) {\n                return 29;\n            }\n            return 28;\n        }\n        return MONTHS[month];\n    }\n\n    function leapYear(year) {\n        year = year.getFullYear();\n        return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n    }\n\n    function numberSortPredicate(a, b) {\n        return a - b;\n    }\n\n    function parseExceptions(exceptions, zone) {\n        var idx = 0, length, date,\n            dates = [];\n\n        if (exceptions) {\n            exceptions = exceptions.split(exceptions.indexOf(\";\") !== -1 ? \";\" : \",\");\n            length = exceptions.length;\n\n            for (; idx < length; idx++) {\n                date = parseUTCDate(exceptions[idx], zone);\n\n                if (date) {\n                    dates.push(date);\n                }\n            }\n        }\n\n        return dates;\n    }\n\n    function isException(exceptions, date, zone) {\n        var dates = Array.isArray(exceptions) ? exceptions : parseExceptions(exceptions, zone),\n            dateTime = date.getTime() - date.getMilliseconds(),\n            idx = 0, length = dates.length;\n\n        for (; idx < length; idx++) {\n            if (dates[idx].getTime() === dateTime) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function toExceptionString(dates, zone) {\n        var idx = 0;\n        var length;\n        var date;\n        var result = [].concat(dates);\n\n        for (length = result.length; idx < length; idx++) {\n            date = result[idx];\n            date = kendo.timezone.convert(date, zone || date.getTimezoneOffset(), \"Etc/UTC\");\n            result[idx] = kendo.toString(date, RECURRENCE_DATE_FORMAT);\n        }\n\n        return result.join(\",\");\n    }\n\n    function startPeriodByFreq(start, rule) {\n        var date = new Date(start);\n\n        switch (rule.freq) {\n            case \"yearly\":\n                date.setFullYear(date.getFullYear(), 0, 1);\n                break;\n\n            case \"monthly\":\n                date.setFullYear(date.getFullYear(), date.getMonth(), 1);\n                break;\n\n            case \"weekly\":\n                setDayOfWeek(date, rule.weekStart, -1);\n                break;\n\n            default:\n                break;\n        }\n\n        if (rule.hours) {\n            date.setHours(0);\n        }\n\n        if (rule.minutes) {\n            date.setMinutes(0);\n        }\n\n        if (rule.seconds) {\n            date.setSeconds(0);\n        }\n\n        return date;\n    }\n\n    function endPeriodByFreq(start, rule) {\n        var date = new Date(start);\n\n        switch (rule.freq) {\n            case \"yearly\":\n                date.setFullYear(date.getFullYear(), 11, 31);\n                break;\n\n            case \"monthly\":\n                date.setFullYear(date.getFullYear(), date.getMonth() + 1, 0);\n                break;\n\n            case \"weekly\":\n                setDayOfWeek(date, rule.weekStart, -1);\n                date.setDate(date.getDate() + 6);\n                break;\n\n            default:\n                break;\n        }\n\n        if (rule.hours) {\n            date.setHours(23);\n        }\n\n        if (rule.minutes) {\n            date.setMinutes(59);\n        }\n\n        if (rule.seconds) {\n            date.setSeconds(59);\n        }\n\n        return date;\n    }\n\n    function eventsByPosition(periodEvents, start, positions, until) {\n        var periodEventsLength = periodEvents.length;\n        var events = [];\n        var position;\n        var event;\n        var inPeriod;\n\n        for (var idx = 0, length = positions.length; idx < length; idx++) {\n            position = positions[idx];\n\n            if (position < 0) {\n                position = periodEventsLength + position;\n            } else {\n                position -= 1; //convert to zero based index\n            }\n\n            event = periodEvents[position];\n            inPeriod = until ? event.start < until : true;\n\n            if (event && event.start >= start && inPeriod) {\n                events.push(event);\n            }\n        }\n\n        return events;\n    }\n\n    function removeExceptionDates(periodEvents, exceptionDates, zone) {\n        var events = [];\n        var event;\n\n        for (var idx = 0; idx < periodEvents.length; idx++) {\n            event = periodEvents[idx];\n            if (!isException(exceptionDates, event.start, zone)) {\n                events.push(event);\n            }\n        }\n\n        return events;\n    }\n\n    function expand(event, start, end, zone) {\n        var rule,\n            startTime, endTime, endDate,\n            hours, minutes, seconds,\n            durationMS, startPeriod, inPeriod,\n            ruleStart, ruleEnd,\n            useEventStart, freqName,\n            exceptionDates,\n            eventStartTime,\n            eventStartMS,\n            eventStart,\n            count, freq,\n            positions,\n            currentIdx,\n            periodEvents,\n            events = [],\n            shiftedStart,\n            shiftedEnd,\n            shiftedStartTime,\n            shifterEndTime;\n\n        rule = parseRule(event.recurrenceRule, zone, { // offsets argument\n            start: (getZoneOffset(event.start, zone) - getZoneOffset(event.start, event.startTimezone)) * kendo.date.MS_PER_MINUTE,\n            end: (getZoneOffset(event.end, zone) - getZoneOffset(event.end, event.endTimezone)) * kendo.date.MS_PER_MINUTE\n        });\n\n        if (!rule) {\n            return [event];\n        }\n\n        positions = rule.positions;\n        currentIdx = positions ? 0 : 1;\n\n        ruleStart = rule.start;\n        ruleEnd = rule.end;\n\n        if (ruleStart || ruleEnd) {\n            event = event.clone({\n                start: ruleStart ? new Date(ruleStart.value[0]) : undefined,\n                end: ruleEnd ? new Date(ruleEnd.value[0]) : undefined\n            });\n        }\n\n        eventStart = event.start;\n        eventStartMS = eventStart.getTime();\n        eventStartTime = getMilliseconds(eventStart);\n\n        exceptionDates = parseExceptions(event.recurrenceException, zone);\n\n        if (!exceptionDates[0] && rule.exdates) {\n            exceptionDates = rule.exdates.value;\n            event.set(\"recurrenceException\", toExceptionString(exceptionDates, zone));\n        }\n\n        startPeriod = start = new Date(start);\n        end = new Date(end);\n\n        freqName = rule.freq;\n        freq = frequencies[freqName];\n        count = rule.count;\n\n        if (rule.until && rule.until < end) {\n            end = new Date(rule.until);\n        }\n\n        useEventStart = freqName === \"yearly\" || freqName === \"monthly\" || freqName === \"weekly\";\n\n        if (start < eventStartMS || count || rule.interval > 1 || useEventStart ||\n             ((freqName === \"daily\" || freqName === \"hourly\") && !rule.seconds)) {\n                    start = new Date(eventStartMS);\n        } else {\n            hours = start.getHours();\n            minutes = start.getMinutes();\n            seconds = start.getSeconds();\n\n            if (!rule.hours) {\n                hours = eventStart.getHours();\n            }\n\n            if (!rule.minutes) {\n                minutes = eventStart.getMinutes();\n            }\n\n            if (!rule.seconds) {\n                seconds = eventStart.getSeconds();\n            }\n\n            start.setHours(hours, minutes, seconds, eventStart.getMilliseconds());\n        }\n\n        rule._startPeriod = new Date(start);\n\n        if (positions) {\n            start = startPeriodByFreq(start, rule);\n            end = endPeriodByFreq(end, rule);\n\n            var diff = getMilliseconds(end) - getMilliseconds(start);\n            if (diff < 0) {\n                hours = start.getHours();\n                end.setHours(hours, start.getMinutes(), start.getSeconds(), start.getMilliseconds());\n                kendoDate.adjustDST(end, hours);\n            }\n\n            rule._startPeriod = new Date(start);\n            rule._endPeriod = endPeriodByFreq(start, rule);\n        }\n\n        durationMS = event.duration();\n        var allDayCompensation = event.isAllDay ? 86400000 : 0;\n        rule._startTime = startTime = kendoDate.toInvariantTime(start);\n\n        if (freq.setup) {\n            freq.setup(rule, eventStart, start);\n        }\n\n        freq.limit(start, end, rule);\n\n        while (start <= end) {\n            endDate = new Date(start);\n            setTime(endDate, durationMS);\n            var inPeriodCheckEndDate = new Date(start);\n            setTime(inPeriodCheckEndDate, durationMS + allDayCompensation);\n\n            inPeriod = start >= startPeriod || inPeriodCheckEndDate > startPeriod;\n\n            if (inPeriod && !isException(exceptionDates, start, zone) || positions) {\n                startTime = kendoDate.toUtcTime(kendoDate.getDate(start)) + getMilliseconds(rule._startTime);\n                endTime = startTime + durationMS;\n\n                if (eventStartMS !== start.getTime() || eventStartTime !== getMilliseconds(rule._startTime)) {\n                    var startZone = event.startTimezone || event.endTimezone;\n                    var endZone = event.endTimezone || event.startTimezone;\n\n                    if (!event.isAllDay) {\n                        if ((zone && startZone) || (!zone && !startZone)) {\n                            var startOffsetDiff = getZoneOffset(start, zone) - getZoneOffset(event.start, zone);\n                            var endOffsetDiff = getZoneOffset(endDate, zone) - getZoneOffset(event.end, zone);\n                            var startTZOffsetDiff = getZoneOffset(start, startZone) - getZoneOffset(event.start, startZone);\n                            var endTZOffsetDiff = getZoneOffset(endDate, endZone) - getZoneOffset(event.end, endZone);\n\n                            if (startOffsetDiff !== startTZOffsetDiff) {\n                                var offsetTicksStart = (startOffsetDiff - startTZOffsetDiff) * 60000;\n                                shiftedStart = new Date(start.getTime() - offsetTicksStart);\n                                shiftedStartTime = startTime - offsetTicksStart;\n                            }\n\n                            if (endOffsetDiff !== endTZOffsetDiff) {\n                                var offsetTicksEnd = (endOffsetDiff - endTZOffsetDiff) * 60000;\n                                shiftedEnd = new Date(endDate.getTime() - offsetTicksEnd);\n                                shifterEndTime = endTime - offsetTicksEnd;\n                            }\n                        }\n                    }\n\n\n                    events.push(event.toOccurrence({\n                        start: shiftedStart || new Date(start),\n                        end: shiftedEnd || endDate,\n                        _startTime: shiftedStartTime || startTime,\n                        _endTime: shifterEndTime || endTime\n                    }));\n\n                    shiftedStart = shiftedEnd = shiftedStartTime = shifterEndTime = null;\n                } else {\n                    event._startTime = startTime;\n                    event._endTime = endTime;\n                    events.push(event);\n                }\n            }\n\n            if (positions) {\n                freq.next(start, rule);\n                freq.limit(start, end, rule);\n\n                if (start > rule._endPeriod) {\n                    periodEvents = eventsByPosition(events.slice(currentIdx), eventStart, positions, rule.until);\n                    periodEvents = removeExceptionDates(periodEvents, exceptionDates, zone);\n                    events = events.slice(0, currentIdx).concat(periodEvents);\n\n                    rule._endPeriod = endPeriodByFreq(start, rule);\n\n                    currentIdx = events.length;\n                }\n\n                if (count && count === currentIdx) {\n                    break;\n                }\n\n            } else {\n                if (count && count === currentIdx) {\n                    break;\n                }\n\n                currentIdx += 1;\n\n                var isMissingDSTHour = isDSTMissingHour(start);\n                freq.next(start, rule);\n\n                if (isMissingDSTHour && rule.freq !== \"hourly\" && kendoDate.toInvariantTime(event.start).getTime() !== kendoDate.toInvariantTime(start).getTime()) {\n                    rule._startTime = startTime = new Date(start.getTime() - 3600000);\n                }\n\n                freq.limit(start, end, rule);\n            }\n        }\n\n        return events;\n    }\n\n    function isDSTMissingHour(date) {\n        var dateOffset = date.getTimezoneOffset();\n        var dateMinusHour = new Date(date.getTime() - 3600000);\n        var dateMinusHourOffset = dateMinusHour.getTimezoneOffset();\n\n        return dateOffset < dateMinusHourOffset;\n    }\n\n    function getZoneOffset(date, zone) {\n        return zone ? kendo.timezone.offset(date, zone) : date.getTimezoneOffset();\n    }\n\n    function parseUTCDate(value, zone) {\n        value = kendo.parseDate(value, DATE_FORMATS); //Parse UTC to local time\n\n        if (value && zone) {\n            value = timezone.apply(value, zone);\n        }\n\n        return value;\n    }\n\n    function parseDateRule(dateRule, zone) {\n        var pairs = dateRule.split(\";\");\n        var pair;\n        var property;\n        var value;\n        var tzid;\n        var valueIdx, valueLength;\n\n        for (var idx = 0, length = pairs.length; idx < length; idx++) {\n            pair = pairs[idx].split(\":\");\n            property = pair[0];\n            value = pair[1];\n\n            if (property.indexOf(\"TZID\") !== -1) {\n                tzid = property.substring(property.indexOf(\"TZID\")).split(\"=\")[1];\n            }\n\n            if (value) {\n                value = value.split(\",\");\n\n                for (valueIdx = 0, valueLength = value.length; valueIdx < valueLength; valueIdx++) {\n                    value[valueIdx] = parseUTCDate(value[valueIdx], tzid || zone);\n                }\n            }\n        }\n\n        if (value) {\n            return {\n                value: value,\n                tzid: tzid\n            };\n        }\n    }\n\n    function parseRule(recur, zone, offsets) {\n        var instance = {};\n        var splits, value;\n        var idx = 0, length;\n        var ruleValue = false;\n        var rule, part, parts;\n        var property, weekStart, weekDays;\n        var predicate = function(a, b) {\n            var day1 = a.day,\n                day2 = b.day;\n\n            if (day1 < weekStart) {\n               day1 += 7;\n            }\n\n            if (day2 < weekStart) {\n                day2 += 7;\n            }\n\n            return day1 - day2;\n        };\n\n        if (!recur) {\n            return null;\n        }\n\n        parts = recur.split(\"\\n\");\n\n        if (!parts[1] && (recur.indexOf(\"DTSTART\") !== -1 || recur.indexOf(\"DTEND\") !== -1 || recur.indexOf(\"EXDATE\") !== -1)) {\n            parts = recur.split(\" \");\n        }\n\n        for (idx = 0, length = parts.length; idx < length; idx++) {\n            part = kendo.trim(parts[idx]);\n\n            if (part.indexOf(\"DTSTART\") !== -1) {\n                instance.start = parseDateRule(part, zone);\n            } else if (part.indexOf(\"DTEND\") !== -1) {\n                instance.end = parseDateRule(part, zone);\n            } else if (part.indexOf(\"EXDATE\") !== -1) {\n                instance.exdates = parseDateRule(part, zone);\n            } else if (part.indexOf(\"RRULE\") !== -1) {\n                rule = part.substring(6);\n            } else if (kendo.trim(part)) {\n                rule = part;\n            }\n        }\n\n        rule = rule.split(\";\");\n\n        for (idx = 0, length = rule.length; idx < length; idx++) {\n            property = rule[idx];\n            splits = property.split(\"=\");\n            value = kendo.trim(splits[1]).split(\",\");\n\n            switch (kendo.trim(splits[0]).toUpperCase()) {\n                case \"FREQ\":\n                    instance.freq = value[0].toLowerCase();\n                    break;\n                case \"UNTIL\":\n                    instance.until = parseUTCDate(value[0], zone);\n                    break;\n                case \"COUNT\":\n                    instance.count = parseInt(value[0], 10);\n                    break;\n                case \"INTERVAL\":\n                    instance.interval = parseInt(value[0], 10);\n                    break;\n                case \"BYSECOND\":\n                    instance.seconds = parseArray(value, { start: 0, end: 60 });\n                    ruleValue = true;\n                    break;\n                case \"BYMINUTE\":\n                    instance.minutes = parseArray(value, { start: 0, end: 59 });\n                    ruleValue = true;\n                    break;\n                case \"BYHOUR\":\n                    instance.hours = parseArray(value, { start: 0, end: 23 });\n                    ruleValue = true;\n                    break;\n                case \"BYMONTHDAY\":\n                    instance.monthDays = parseArray(value, { start: -31, end: 31 });\n                    ruleValue = true;\n                    break;\n                case \"BYYEARDAY\":\n                    instance.yearDays = parseArray(value, { start: -366, end: 366 });\n                    ruleValue = true;\n                    break;\n                case \"BYMONTH\":\n                    instance.months = parseArray(value, { start: 1, end: 12 });\n                    ruleValue = true;\n                    break;\n                case \"BYDAY\":\n                    instance.weekDays = weekDays = parseWeekDayList(value);\n                    ruleValue = true;\n                    break;\n                case \"BYWEEKNO\":\n                    instance.weeks = parseArray(value, { start: -53, end: 53 });\n                    ruleValue = true;\n                    break;\n                case \"BYSETPOS\":\n                    instance.positions = parseArray(value, { start: -366, end: 366 });\n                    break;\n                case \"WKST\":\n                    instance.weekStart = weekStart = WEEK_DAYS_IDX[value[0]];\n                    break;\n            }\n        }\n\n        if (instance.freq === undefined || (instance.count !== undefined && instance.until)) {\n            return null;\n        }\n\n        if (!instance.interval) {\n            instance.interval = 1;\n        }\n\n        if (weekStart === undefined) {\n            instance.weekStart = weekStart = kendo.culture().calendar.firstDay;\n        }\n\n        if (weekDays) {\n            instance.weekDays = weekDays.sort(predicate);\n        }\n\n        if (instance.positions && !ruleValue) {\n            instance.positions = null;\n        }\n\n        instance._hasRuleValue = ruleValue;\n        instance.offsets = offsets;\n\n        return instance;\n    }\n\n    function serializeDateRule(dateRule, zone) {\n        var value = dateRule.value;\n        var tzid = dateRule.tzid || \"\";\n        var length = value.length;\n        var idx = 0;\n        var val;\n\n        for (; idx < length; idx++) {\n            val = value[idx];\n            val = timezone.convert(val, tzid || zone || val.getTimezoneOffset(), \"Etc/UTC\");\n            value[idx] = kendo.toString(val, \"yyyyMMddTHHmmssZ\");\n        }\n\n        if (tzid) {\n            tzid = \";TZID=\" + tzid;\n        }\n\n        return tzid + \":\" + value.join(\",\") + \" \";\n    }\n\n    function serialize(rule, zone) {\n        var weekStart = rule.weekStart;\n        var ruleString = \"FREQ=\" + rule.freq.toUpperCase();\n        var exdates = rule.exdates || \"\";\n        var start = rule.start || \"\";\n        var end = rule.end || \"\";\n        var until = rule.until;\n\n        if (weekStart === undefined) {\n            weekStart = kendo.culture().calendar.firstDay;\n        }\n\n        if (rule.interval > 1) {\n            ruleString += \";INTERVAL=\" + rule.interval;\n        }\n\n        if (rule.count) {\n            ruleString += \";COUNT=\" + rule.count;\n        }\n\n        if (until) {\n            until = timezone.convert(until, zone || until.getTimezoneOffset(), \"Etc/UTC\");\n\n            ruleString += \";UNTIL=\" + kendo.toString(until, \"yyyyMMddTHHmmssZ\");\n        }\n\n        if (rule.months) {\n            ruleString += \";BYMONTH=\" + rule.months;\n        }\n\n        if (rule.weeks) {\n            ruleString += \";BYWEEKNO=\" + rule.weeks;\n        }\n\n        if (rule.yearDays) {\n            ruleString += \";BYYEARDAY=\" + rule.yearDays;\n        }\n\n        if (rule.monthDays) {\n            ruleString += \";BYMONTHDAY=\" + rule.monthDays;\n        }\n\n        if (rule.weekDays) {\n            ruleString += \";BYDAY=\" + serializeWeekDayList(rule.weekDays);\n        }\n\n        if (rule.hours) {\n            ruleString += \";BYHOUR=\" + rule.hours;\n        }\n\n        if (rule.minutes) {\n            ruleString += \";BYMINUTE=\" + rule.minutes;\n        }\n\n        if (rule.seconds) {\n            ruleString += \";BYSECOND=\" + rule.seconds;\n        }\n\n        if (rule.positions) {\n            ruleString += \";BYSETPOS=\" + rule.positions;\n        }\n\n        if (weekStart !== undefined) {\n            ruleString += \";WKST=\" + WEEK_DAYS[weekStart];\n        }\n\n        if (start) {\n            start = \"DTSTART\" + serializeDateRule(start, zone);\n        }\n\n        if (end) {\n            end = \"DTEND\" + serializeDateRule(end, zone);\n        }\n\n        if (exdates) {\n            exdates = \"EXDATE\" + serializeDateRule(exdates, zone);\n        }\n\n        if (start || end || exdates) {\n            ruleString = start + end + exdates + \"RRULE:\" + ruleString;\n        }\n\n        return ruleString;\n    }\n\n    kendo.recurrence = {\n        rule: {\n            parse: parseRule,\n            serialize: serialize\n        },\n        expand: expand,\n        dayInYear: dayInYear,\n        weekInYear: weekInYear,\n        weekInMonth: weekInMonth,\n        numberOfWeeks: numberOfWeeks,\n        isException: isException,\n        toExceptionString: toExceptionString\n    };\n\n    var RECURRENCE_VIEW_TEMPLATE = kendo.template(\n       '# if (frequency !== \"never\") { #' +\n            '<div class=\"k-form-field\">' +\n                '<label id=\"recur_interval_label\" class=\"k-label k-form-label\" for=\"recur_interval\">#:messages.repeatEvery#</label>' +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<input id=\"recur_interval\" class=\"k-recur-interval\" title=\"#:messages.repeatEvery# #:messages.interval#\" aria-labelledby=\"recur_interval_label\">#:messages.interval#' +\n                '</div>' +\n            '</div>' +\n        '# } #' +\n       '# if (frequency === \"weekly\") { #' +\n            '<div class=\"k-form-field\">' +\n                '<label class=\"k-label k-form-label\">#:messages.repeatOn#</label>' +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<div class=\"k-button-group-stretched k-recur-weekday-buttons\" title=\"#:messages.repeatOn#\"></div></div>' +\n                '</div>' +\n            '</div>' +\n        '# } else if (frequency === \"monthly\") { #' +\n            '<div class=\"k-form-field\"><label class=\"k-label k-form-label\">#:messages.repeatOn#</label></div>' +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<ul class=\"k-radio-list\">' +\n                        '<li class=\"k-radio-item\">' +\n                            '<label class=\"k-radio-label\"><input class=\"k-recur-month-radio k-radio k-radio-md\" type=\"radio\" name=\"month\" value=\"monthday\" title=\"#:messages.repeatOn#\" />#:messages.date#:</label>' +\n                            '<input class=\"k-recur-monthday\" aria-label=\"#:messages.date#\" title=\"#:messages.date#\" />' +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            '<input class=\"k-recur-month-radio k-radio k-radio-md\" type=\"radio\" name=\"month\" value=\"weekday\" aria-label=\"#:messages.repeatOn# #:messages.day#\" title=\"#:messages.repeatOn# #:messages.day#\" />' +\n                            '<input class=\"k-recur-weekday-offset\" title=\"#:messages.repeatOn#\" style=\"width:8em;\" />' +\n                            '<input class=\"k-recur-weekday\" title=\"#:messages.day#\" style=\"width:8em;\" />' +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>' +\n       '# } else if (frequency === \"yearly\") { #' +\n            '<div class=\"k-form-field\"><label class=\"k-label k-form-label\">#:messages.repeatOn#</label>' +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<ul class=\"k-radio-list\">' +\n                        '<li class=\"k-radio-item\">' +\n                            '<input class=\"k-recur-year-radio k-radio k-radio-md\" type=\"radio\" name=\"year\" value=\"monthday\" title=\"#:messages.repeatOn# #:messages.month#\" />' +\n                            '<input class=\"k-recur-month\" aria-label=\"#:messages.month#\" title=\"#:messages.month#\" style=\"width:8em;\" />' +\n                            '<input class=\"k-recur-monthday\" aria-label=\"#:messages.date#\" title=\"#:messages.date#\" />' +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            '<input class=\"k-recur-year-radio k-radio k-radio-md\" type=\"radio\" name=\"year\" value=\"weekday\" title=\"#:messages.repeatOn# #:messages.day#\" />' +\n                            '<input class=\"k-recur-weekday-offset\" title=\"#:messages.repeatOn#\" style=\"width:8em;\"/><input class=\"k-recur-weekday\" title=\"#:messages.day#\" style=\"width:8em;\"/>#:messages.of#<input class=\"k-recur-month\" title=\"#:messages.of + messages.month#\" style=\"width:8em;\"/>' +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>' +\n       '# } #' +\n       '# if (frequency !== \"never\") { #' +\n            '<div class=\"k-form-field\"><label class=\"k-label k-form-label\">#:end.label#</label>' +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<ul class=\"k-radio-list\">' +\n                        '<li class=\"k-radio-item\">' +\n                            '<label class=\"k-radio-label\"><input class=\"k-recur-end-never k-radio k-radio-md\" type=\"radio\" name=\"end\" value=\"never\" title=\"#:end.label#\" />#:end.never#</label>' +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            '<label class=\"k-radio-label\"><input class=\"k-recur-end-count k-radio k-radio-md\" type=\"radio\" name=\"end\" value=\"count\" title=\"#:end.label#\" />#:end.after#</label>' +\n                            '<input class=\"k-recur-count\" aria-label=\"#:end.occurrence#\" title=\"#:end.occurrence#\" />#:end.occurrence#' +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            '<label class=\"k-radio-label\"><input class=\"k-recur-end-until k-radio k-radio-md\" type=\"radio\" name=\"end\" value=\"until\" title=\"#:end.label#\" />#:end.on#</label>' +\n                            '<input class=\"k-recur-until\" title=\"#:end.on#\" aria-label=\"#:end.on#\" name=\"recur-until\" />' +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>' +\n       '# } #'\n    );\n\n    var DAY_RULE = [\n        { day: 0, offset: 0 },\n        { day: 1, offset: 0 },\n        { day: 2, offset: 0 },\n        { day: 3, offset: 0 },\n        { day: 4, offset: 0 },\n        { day: 5, offset: 0 },\n        { day: 6, offset: 0 }\n    ];\n\n    var WEEKDAY_RULE = [\n        { day: 1, offset: 0 },\n        { day: 2, offset: 0 },\n        { day: 3, offset: 0 },\n        { day: 4, offset: 0 },\n        { day: 5, offset: 0 }\n    ];\n\n    var WEEKEND_RULE = [\n        { day: 0, offset: 0 },\n        { day: 6, offset: 0 }\n    ];\n\n    var BaseRecurrenceEditor = Widget.extend({\n        init: function(element, options) {\n            var start;\n            var that = this;\n            var frequencies = options && options.frequencies;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            options = that.options;\n            options.start = start = options.start || kendoDate.today();\n\n            if (frequencies) {\n                options.frequencies = frequencies;\n            }\n\n            if (typeof start === \"string\") {\n                options.start = kendo.parseDate(start, \"yyyyMMddTHHmmss\");\n            }\n\n            if (options.firstWeekDay === null) {\n                options.firstWeekDay = kendo.culture().calendar.firstDay;\n            }\n\n            that._namespace = \".\" + options.name;\n        },\n\n        options: {\n            value: \"\",\n            start: \"\",\n            timezone: \"\",\n            spinners: true,\n            firstWeekDay: null,\n            frequencies: [\n                \"never\",\n                \"daily\",\n                \"weekly\",\n                \"monthly\",\n                \"yearly\"\n            ],\n            mobile: false,\n            messages: {\n                repeat: \"Repeat\",\n                recurrenceEditorTitle: \"Recurrence editor\",\n                frequencies: {\n                    never: \"Never\",\n                    hourly: \"Hourly\",\n                    daily: \"Daily\",\n                    weekly: \"Weekly\",\n                    monthly: \"Monthly\",\n                    yearly: \"Yearly\"\n                },\n                hourly: {\n                    repeatEvery: \"Repeat every: \",\n                    interval: \" hour(s)\"\n                },\n                daily: {\n                    repeatEvery: \"Repeat every: \",\n                    interval: \" day(s)\"\n                },\n                weekly: {\n                    interval: \" week(s)\",\n                    repeatEvery: \"Repeat every: \",\n                    repeatOn: \"Repeat on: \"\n                },\n                monthly: {\n                    repeatEvery: \"Repeat every: \",\n                    repeatOn: \"Repeat on: \",\n                    interval: \" month(s)\",\n                    day: \"Day \",\n                    date: \"Date\"\n                },\n                yearly: {\n                    repeatEvery: \"Repeat every: \",\n                    repeatOn: \"Repeat on: \",\n                    interval: \" year(s)\",\n                    of: \" of \",\n                    month: \"month\",\n                    day: \"day\",\n                    date: \"Date\"\n                },\n                end: {\n                    label: \"End:\",\n                    mobileLabel: \"Ends\",\n                    never: \"Never\",\n                    after: \"After \",\n                    occurrence: \" occurrence(s)\",\n                    on: \"On \"\n                },\n                offsetPositions: {\n                    first: \"first\",\n                    second: \"second\",\n                    third: \"third\",\n                    fourth: \"fourth\",\n                    last: \"last\"\n                },\n                weekdays: {\n                    day: \"day\",\n                    weekday: \"weekday\",\n                    weekend: \"weekend day\"\n                }\n            }\n        },\n\n        events: [\"change\"],\n\n        _initInterval: function() {\n            var that = this;\n            var rule = that._value;\n\n            that._container\n                .find(\".k-recur-interval\")\n                .kendoNumericTextBox({\n                    spinners: that.options.spinners,\n                    value: rule.interval || 1,\n                    decimals: 0,\n                    format: \"#\",\n                    min: 1,\n                    change: function() {\n                        rule.interval = this.value();\n                        that._trigger();\n                    }\n                });\n        },\n\n        _weekDayButtons: function(firstDay) {\n            var that = this,\n                names = kendo.culture().calendar.days.names,\n                abbreviated = kendo.culture().calendar.days.namesAbbr,\n                repeatOn = that.options.messages.weekly.repeatOn,\n                length = names.length,\n                idx = 0,\n                values = [],\n                items = [];\n\n            for (; idx < length; idx++) {\n                values.push(idx);\n            }\n\n            names = names.slice(firstDay).concat(names.slice(0, firstDay));\n            abbreviated = abbreviated.slice(firstDay).concat(abbreviated.slice(0, firstDay));\n            values = values.slice(firstDay).concat(values.slice(0, firstDay));\n\n            for (idx = 0; idx < length; idx++) {\n                items.push({\n                    text: abbreviated[idx],\n                    attributes: {\n                        \"data-value\": values[idx],\n                        \"aria-label\": repeatOn + \" \" + names[idx]\n                    }\n                });\n            }\n\n            that._weekDayButtonGroup = new ButtonGroup(that._container.find(\".k-recur-weekday-buttons\"), {\n                items: items,\n                selection: \"multiple\",\n                select: function() {\n                    var rule = that._value,\n                        selectedDays = that._weekDayButtonGroup.current();\n\n                    rule.weekDays = selectedDays.map(function(i, day) {\n                        return {\n                            day: Number(day.getAttribute(\"data-value\")),\n                            offset: 0\n                        };\n                    });\n\n                    if (!that.options.mobile) {\n                        that._trigger();\n                    }\n                }\n            });\n        },\n\n        _weekDayRule: function(clear) {\n            var that = this;\n            var weekday = (that._weekDay.element || that._weekDay).val();\n            var offset = Number((that._weekDayOffset.element || that._weekDayOffset).val());\n            var weekDays = null;\n            var positions = null;\n\n            if (!clear) {\n                if (weekday === \"day\") {\n                    weekDays = DAY_RULE;\n                    positions = offset;\n                } else if (weekday === \"weekday\") {\n                    weekDays = WEEKDAY_RULE;\n                    positions = offset;\n                } else if (weekday === \"weekend\") {\n                    weekDays = WEEKEND_RULE;\n                    positions = offset;\n                } else {\n                    weekDays = [{\n                        offset: offset,\n                        day: Number(weekday)\n                    }];\n                }\n            }\n\n            that._value.weekDays = weekDays;\n            that._value.positions = positions;\n        },\n\n        _weekDayView: function() {\n            var that = this;\n            var weekDays = that._value.weekDays;\n            var positions = that._value.positions;\n            var weekDayOffsetWidget = that._weekDayOffset;\n            var weekDayOffset;\n            var weekDayValue;\n            var length;\n            var method;\n\n            if (weekDays) {\n                length = weekDays.length;\n\n                if (positions) {\n                    if (length === 7) {\n                        weekDayValue = \"day\";\n                        weekDayOffset = positions;\n                    } else if (length === 5) {\n                        weekDayValue = \"weekday\";\n                        weekDayOffset = positions;\n                    } else if (length === 2) {\n                        weekDayValue = \"weekend\";\n                        weekDayOffset = positions;\n                    }\n                }\n\n                if (!weekDayValue) {\n                    weekDays = weekDays[0];\n                    weekDayValue = weekDays.day;\n                    weekDayOffset = weekDays.offset || \"\";\n                }\n\n                method = weekDayOffsetWidget.value ? \"value\" : \"val\";\n\n                weekDayOffsetWidget[method](weekDayOffset);\n                that._weekDay[method](weekDayValue);\n            }\n        },\n\n        _initWeekDay: function() {\n            var that = this, data;\n\n            var weekdayMessage = that.options.messages.weekdays;\n            var offsetMessage = that.options.messages.offsetPositions;\n\n            var weekDayInput = that._container.find(\".k-recur-weekday\");\n\n            var change = function() {\n                that._weekDayRule();\n                that._trigger();\n            };\n\n            if (weekDayInput[0]) {\n                that._weekDayOffset = new DropDownList(that._container.find(\".k-recur-weekday-offset\"), {\n                    autoWidth: true,\n                    change: change,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    dataSource: [\n                        { text: offsetMessage.first, value: \"1\" },\n                        { text: offsetMessage.second, value: \"2\" },\n                        { text: offsetMessage.third, value: \"3\" },\n                        { text: offsetMessage.fourth, value: \"4\" },\n                        { text: offsetMessage.last, value: \"-1\" }\n                    ]\n                });\n\n                data = [\n                    { text: weekdayMessage.day, value: \"day\" },\n                    { text: weekdayMessage.weekday, value: \"weekday\" },\n                    { text: weekdayMessage.weekend, value: \"weekend\" }\n                ];\n\n                that._weekDay = new DropDownList(weekDayInput, {\n                    autoWidth: true,\n                    value: that.options.start.getDay(),\n                    change: change,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    dataSource: data.concat($.map(kendo.culture().calendar.days.names, function(dayName, idx) {\n                        return {\n                            text: dayName,\n                            value: idx\n                        };\n                    }))\n                });\n\n                that._weekDayView();\n            }\n        },\n\n        _initWeekDays: function() {\n            var that = this;\n            var rule = that._value;\n            var weekDayButtonGroup = that._weekDayButtonGroup;\n\n            if (weekDayButtonGroup && rule.weekDays && rule.weekDays.length) {\n                var ruleDays = rule.weekDays,\n                    ruleDaysLength = ruleDays.length,\n                    selectors = [],\n                    i = 0,\n                    selectedWeekDayButtons;\n\n                for (; i < ruleDaysLength; i++) {\n                    selectors.push(\"[data-value='\" + ruleDays[i].day + \"']\");\n                }\n\n                selectedWeekDayButtons = weekDayButtonGroup.element.find(selectors.join(\",\"));\n                weekDayButtonGroup.select(selectedWeekDayButtons);\n            }\n        },\n\n        _initMonthDay: function() {\n            var that = this;\n            var rule = that._value;\n            var monthDayInput = that._container.find(\".k-recur-monthday\");\n\n            if (monthDayInput[0]) {\n                that._monthDay = new kendo.ui.NumericTextBox(monthDayInput, {\n                    spinners: that.options.spinners,\n                    min: 1,\n                    max: 31,\n                    decimals: 0,\n                    format: \"#\",\n                    value: rule.monthDays ? rule.monthDays[0] : that.options.start.getDate(),\n                    change: function() {\n                        var value = this.value();\n\n                        rule.monthDays = value ? [value] : value;\n                        that._trigger();\n                    }\n                });\n            }\n        },\n\n        _initCount: function() {\n            var that = this,\n                input = that._container.find(\".k-recur-count\"),\n                rule = that._value;\n\n            that._count = input.kendoNumericTextBox({\n                spinners: that.options.spinners,\n                value: rule.count || 1,\n                decimals: 0,\n                format: \"#\",\n                min: 1,\n                change: function() {\n                    rule.count = this.value();\n                    that._trigger();\n                }\n            }).data(\"kendoNumericTextBox\");\n        },\n\n        _initUntil: function() {\n            var that = this,\n                input = that._container.find(\".k-recur-until\"),\n                start = that.options.start,\n                rule = that._value,\n                until = rule.until,\n                min = until && until < start ? until : start,\n                startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]:visible\"),\n                validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on),\n                dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare,\n                initialValue = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 23, 59, 59);\n\n            input.attr(\"data-validDate-msg\", validDateValidationMessage);\n            input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n            if (startInput.length === 0) {\n                startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]\");\n            }\n\n            if (startInput.length > 0 && startInput.val()) {\n                min = kendo.parseDate(startInput.val());\n\n                if (initialValue < min) {\n                    initialValue = min;\n                }\n            }\n\n            that._until = input.kendoDatePicker({\n                min: min,\n                value: until || initialValue,\n                change: function() {\n                    var date = this.value();\n                    if (date) {\n                        rule.until = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);\n                    }\n                    that._trigger();\n                }\n            }).data(\"kendoDatePicker\");\n\n            if (startInput) {\n                startInput.on(\"change\", function() {\n                    that._until.setOptions({\n                        min: startInput.val()\n                    });\n                });\n            }\n        },\n\n        _trigger: function() {\n            if (!this.options.mobile) {\n                this.trigger(\"change\");\n            }\n        }\n    });\n\n    var RecurrenceEditor = BaseRecurrenceEditor.extend({\n        init: function(element, options) {\n            var that = this;\n\n            BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n            that._initFrequency();\n\n            that._initContainer();\n\n            that.value(that.options.value);\n        },\n\n        options: {\n            name: \"RecurrenceEditor\"\n        },\n\n        events: [ \"change\" ],\n\n        destroy: function() {\n            var that = this;\n\n            that._frequency.destroy();\n\n            if (this._weekDayButtonGroup) {\n                this._weekDayButtonGroup.destroy();\n            }\n\n            that._container.find(\"input[type=radio],input[type=checkbox]\").off(CLICK + that._namespace);\n\n            kendo.destroy(that._container);\n\n            BaseRecurrenceEditor.fn.destroy.call(that);\n        },\n\n        value: function(value) {\n            var that = this;\n            var timezone = that.options.timezone;\n            var freq, freqButton;\n\n            if (value === undefined) {\n                if (!that._value.freq) {\n                    return \"\";\n                }\n\n                return serialize(that._value, timezone);\n            }\n\n            that._value = parseRule(value, timezone) || {};\n\n            freq = that._value.freq;\n\n            if (freq) {\n                freqButton = that._frequency.element.find(\"[data-value='\" + freq + \"']\");\n                that._frequency.select(freqButton);\n            } else {\n                that._frequency.select(0);\n            }\n\n            that._initView(that._frequency.current().data(\"value\"));\n        },\n\n        _initContainer: function() {\n            var element = this.element,\n                container = $('<div class=\"k-recur-view\" />'),\n                editContainer = element.parent(\".k-edit-field\");\n\n            if (editContainer[0]) {\n                container.insertAfter(editContainer);\n            } else {\n                element.append(container);\n            }\n\n            this._container = container;\n        },\n\n        _initFrequency: function() {\n            var that = this,\n                options = that.options,\n                frequencies = options.frequencies,\n                messages = options.messages.frequencies,\n                buttonGroupElement = $('<div class=\"k-button-group-stretched k-flex-1\"/>').attr({ title: options.messages.recurrenceEditorTitle }),\n                frequency;\n\n            frequencies = $.map(frequencies, function(frequency) {\n                return {\n                    text: messages[frequency],\n                    attributes: { \"data-value\": frequency, \"aria-label\": options.messages.repeat + messages[frequency] }\n                };\n            });\n\n            frequency = frequencies[0];\n            if (frequency && frequency.attributes && frequency.attributes[\"data-value\"] === \"never\") {\n                frequency.attributes[\"data-value\"] = \"\";\n            }\n\n            that.element.append(buttonGroupElement);\n            that._frequency = new ButtonGroup(buttonGroupElement, {\n                items: frequencies,\n                select: function() {\n                    that._value = {};\n                    that._initView(that._frequency.current().data(\"value\"));\n                    that.trigger(\"change\");\n                }\n            });\n        },\n\n        _initView: function(frequency) {\n            var that = this;\n            var rule = that._value;\n            var options = that.options;\n\n            var data = {\n                 frequency: frequency || \"never\",\n                 firstWeekDay: options.firstWeekDay,\n                 messages: options.messages[frequency],\n                 end: options.messages.end\n            };\n\n            kendo.destroy(that._container);\n            that._container.html(RECURRENCE_VIEW_TEMPLATE(data));\n\n            if (!frequency) {\n                that._value = {};\n                return;\n            }\n\n            rule.freq = frequency;\n\n            if (frequency === \"weekly\" && !rule.weekDays) {\n                rule.weekDays = [{\n                    day: options.start.getDay(),\n                    offset: 0\n                }];\n            }\n\n            that._weekDayButtons(options.firstWeekDay);\n\n            that._initInterval();\n            that._initWeekDays();\n            that._initMonthDay();\n            that._initWeekDay();\n            that._initMonth();\n            that._initCount();\n            that._initUntil();\n\n            that._period();\n            that._end();\n        },\n\n        _initMonth: function() {\n            var that = this;\n            var rule = that._value;\n            var month = rule.months || [that.options.start.getMonth() + 1];\n            var monthInputs = that._container.find(\".k-recur-month\");\n            var options;\n\n            if (monthInputs[0]) {\n                options = {\n                    autoWidth: true,\n                    change: function() {\n                        rule.months = [Number(this.value())];\n                        that.trigger(\"change\");\n                    },\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    dataSource: $.map(kendo.culture().calendar.months.names, function(monthName, idx) {\n                        return {\n                            text: monthName,\n                            value: idx + 1\n                        };\n                    })\n                };\n\n                that._month1 = new DropDownList(monthInputs[0], options);\n                that._month2 = new DropDownList(monthInputs[1], options);\n\n                if (month) {\n                    month = month[0];\n                    that._month1.value(month);\n                    that._month2.value(month);\n                }\n            }\n\n        },\n\n        _end: function() {\n            var that = this;\n            var rule = that._value;\n            var container = that._container;\n            var namespace = that._namespace;\n            var click = function(e) {\n                that._toggleEnd(e.currentTarget.value);\n                that.trigger(\"change\");\n            };\n            var endRule;\n\n            that._buttonNever = container.find(\".k-recur-end-never\").on(CLICK + namespace, click);\n            that._buttonCount = container.find(\".k-recur-end-count\").on(CLICK + namespace, click);\n            that._buttonUntil = container.find(\".k-recur-end-until\").on(CLICK + namespace, click);\n\n            if (rule.count) {\n                endRule = \"count\";\n            } else if (rule.until) {\n                endRule = \"until\";\n            }\n\n            that._toggleEnd(endRule);\n        },\n\n        _period: function() {\n            var that = this;\n            var rule = that._value;\n            var monthly = rule.freq === \"monthly\";\n\n            var toggleRule = monthly ? that._toggleMonthDay : that._toggleYear;\n\n            var selector = \".k-recur-\" + (monthly ? \"month\" : \"year\") + \"-radio\";\n            var radioButtons = that._container.find(selector);\n\n            if (!monthly && rule.freq !== \"yearly\") {\n                return;\n            }\n\n            radioButtons.on(CLICK + that._namespace, function(e) {\n                toggleRule.call(that, e.currentTarget.value);\n                that.trigger(\"change\");\n            });\n\n            that._buttonMonthDay = radioButtons.eq(0);\n            that._buttonWeekDay = radioButtons.eq(1);\n\n            toggleRule.call(that, rule.weekDays ? \"weekday\" : \"monthday\");\n        },\n\n        _toggleEnd: function(endRule) {\n            var that = this;\n            var count, until;\n            var enableCount, enableUntil;\n\n            if (endRule === \"count\") {\n                that._buttonCount.prop(\"checked\", true);\n\n                enableCount = true;\n                enableUntil = false;\n\n                count = that._count.value();\n                until = null;\n            } else if (endRule === \"until\") {\n                that._buttonUntil.prop(\"checked\", true);\n\n                enableCount = false;\n                enableUntil = true;\n\n                count = null;\n                until = that._until.value();\n            } else {\n                that._buttonNever.prop(\"checked\", true);\n\n                enableCount = enableUntil = false;\n                count = until = null;\n            }\n\n            if (that._count) {\n                that._count.enable(enableCount);\n            }\n\n            if (that._until) {\n                that._until.enable(enableUntil);\n            }\n\n            that._value.count = count;\n            that._value.until = until;\n        },\n\n        _toggleMonthDay: function(monthRule) {\n            var that = this;\n            var enableMonthDay = false;\n            var enableWeekDay = true;\n            var clear = false;\n            var monthDays;\n\n            if (monthRule === \"monthday\") {\n                that._buttonMonthDay.prop(\"checked\", true);\n\n                monthDays = [that._monthDay.value()];\n\n                enableMonthDay = true;\n                enableWeekDay = false;\n                clear = true;\n            } else {\n                that._buttonWeekDay.prop(\"checked\", true);\n                monthDays = null;\n            }\n\n            that._weekDay.enable(enableWeekDay);\n            that._weekDayOffset.enable(enableWeekDay);\n            that._monthDay.enable(enableMonthDay);\n\n            that._value.monthDays = monthDays;\n\n            that._weekDayRule(clear);\n        },\n\n        _toggleYear: function(yearRule) {\n            var that = this;\n            var enableMonth1 = false;\n            var enableMonth2 = true;\n            var month;\n\n            if (yearRule === \"monthday\") {\n                enableMonth1 = true;\n                enableMonth2 = false;\n\n                month = that._month1.value();\n            } else {\n                month = that._month2.value();\n            }\n\n            that._month1.enable(enableMonth1);\n            that._month2.enable(enableMonth2);\n\n            that._value.months = [month];\n            that._toggleMonthDay(yearRule);\n        }\n    });\n\n    ui.plugin(RecurrenceEditor);\n\n\n    var RECURRENCE_HEADER_TEMPLATE = kendo.template(\n        '<div data-role=\"content\">' +\n            '<ul class=\"k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:headerTitle#</span>' +\n                        '<div class=\"k-recur-pattern k-listgroup-form-field-wrapper\"></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-item k-listgroup-item k-recur-view\"></li>' +\n            '</ul>' +\n        '</div>'\n    );\n\n    var RECURRENCE_REPEAT_PATTERN_TEMPLATE = kendo.template(\n        '# if (frequency !== \"never\") { #' +\n            '<label class=\"k-label k-listgroup-form-row\">' +\n                '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatEvery#</span>' +\n                '<div class=\"k-recur-editor-wrap k-listgroup-form-field-wrapper\">' +\n                    '<input class=\"k-recur-interval\" type=\"number\" pattern=\"\\\\\\\\d*\"/>' +\n                    '# if (messages.interval.length) { #' +\n                        '<span class=\"k-recur-editor-text\">#:messages.interval#</span>' +\n                    '# } #' +\n                '</div>' +\n            '</label>' +\n        '# } #' +\n        '# if (frequency === \"weekly\") { #' +\n            '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item k-no-click\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatOn#</span>' +\n                    '</label>' +\n                '</li>' +\n                '<div class=\"k-button-group-stretched k-recur-weekday-buttons\" title=\"#:messages.repeatOn#\">' +\n            '</ul>' +\n        '# } else if (frequency === \"monthly\") { #' +\n            '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatBy#</span>' +\n                        '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-monthday-view k-item k-listgroup-item\" style=\"display:none\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><input class=\"k-recur-monthday\" type=\"number\" aria-label=\"#:messages.date#\" title=\"#:messages.day#\" pattern=\"\\\\\\\\d*\"/></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.every#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday-offset\" title=\"#:messages.every#\"></select></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday\" title=\"#:messages.day#\"></select></div>' +\n                    '</label>' +\n                '</li>' +\n            '</ul>' +\n        '# } else if (frequency === \"yearly\") { #' +\n            '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.repeatBy#</span>' +\n                        '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-monthday-view k-item k-listgroup-item\" style=\"display:none\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><input class=\"k-recur-monthday\" type=\"number\" aria-label=\"#:messages.date#\" title=\"#:messages.day#\" pattern=\"\\\\\\\\d*\"/></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.every#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday-offset\" title=\"#:messages.every#\"></select></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-weekday-view k-item k-listgroup-item\" style=\"display:none\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.day#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday\" title=\"#:messages.day#\"></select></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-item k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.month#</span>' +\n                        '<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-month\" title=\"#:messages.month#\"></select></div>' +\n                    '</label>' +\n                '</li>' +\n           '</ul>' +\n        '# } #'\n    );\n\n    var RECURRENCE_END_PATTERN_TEMPLATE = kendo.template(\n        '# if (endPattern === \"count\") { #' +\n            '<label class=\"k-label k-listgroup-form-row\">' +\n                '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.after#</span>' +\n                '<div class=\"k-listgroup-form-field-wrapper\"><input class=\"k-recur-count\" aria-label=\"#:messages.occurrence#\" type=\"number\" pattern=\"\\\\\\\\d*\" /></div>' +\n            '</label>' +\n        '# } else if (endPattern === \"until\") { #' +\n            '<label class=\"k-label k-listgroup-form-row\">' +\n                '<span class=\"k-item-title k-listgroup-form-field-label\">#:messages.on#</span>' +\n                '<div class=\"k-listgroup-form-field-wrapper\"><input type=\"date\" class=\"k-recur-until\" aria-label=\"#:messages.on#\" name=\"recur-until\"/></div>' +\n            '</label>' +\n        '# } #'\n    );\n\n    var RECURRENCE_GROUP_BUTTON_TEMPLATE = kendo.template(\n        '<select class=\"k-scheduler-select\">' +\n            '#for (var i = 0, length = dataSource.length; i < length; i++) {#' +\n                '<option value=\"#=dataSource[i].value#\" #= value === dataSource[i].value  ? \\\"selected\\\" : \\\"\\\" #>#:dataSource[i].text#</option>' +\n            '#}#' +\n        '</select>'\n    );\n\n    var MobileRecurrenceEditor = BaseRecurrenceEditor.extend({\n        init: function(element, options) {\n            var that = this;\n\n            BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n            options = that.options;\n\n            that._optionTemplate = kendo.template('<option value=\"#:value#\">#:text#</option>');\n\n            that.value(options.value);\n\n            that._pane = options.pane || that.wrapper.closest(\"[data-role=pane]\").data(\"kendoPane\");\n\n            that._initRepeatButton();\n\n            that._initParentRepeatEnd();\n\n            that._defaultValue = that._value;\n        },\n\n        options: {\n            name: \"MobileRecurrenceEditor\",\n            animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n            },\n            mobile: true,\n            messages: {\n                cancel: \"Cancel\",\n                update: \"Save\",\n                endTitle: \"Repeat ends\",\n                repeatTitle: \"Repeat pattern\",\n                headerTitle: \"Repeat event\",\n                end: {\n                    patterns: {\n                        never: \"Never\",\n                        after: \"After...\",\n                        on: \"On...\"\n                    },\n                    never: \"Never\",\n                    after: \"End repeat after\",\n                    on: \"End repeat on\"\n                },\n                daily: {\n                    interval: \"\"\n                },\n                hourly: {\n                    interval: \"\"\n                },\n                weekly: {\n                    interval: \"\"\n                },\n                monthly: {\n                    interval: \"\",\n                    repeatBy: \"Repeat by: \",\n                    dayOfMonth: \"Day of the month\",\n                    dayOfWeek: \"Day of the week\",\n                    repeatEvery: \"Repeat every\",\n                    every: \"Every\",\n                    day: \"Day \"\n                },\n                yearly: {\n                    interval: \"\",\n                    repeatBy: \"Repeat by: \",\n                    dayOfMonth: \"Day of the month\",\n                    dayOfWeek: \"Day of the week\",\n                    repeatEvery: \"Repeat every: \",\n                    every: \"Every\",\n                    month: \"Month\",\n                    day: \"Day\"\n                }\n            }\n        },\n\n        events: [ \"change\" ],\n\n        value: function(value) {\n            var that = this;\n            var timezone = that.options.timezone;\n\n            if (value === undefined) {\n                if (!that._value.freq) {\n                    return \"\";\n                }\n\n                return serialize(that._value, timezone);\n            }\n\n            that._value = parseRule(value, timezone) || {};\n        },\n\n        destroy: function() {\n            this._destroyView();\n\n            kendo.destroy(this._endFields);\n\n            if (this._weekDayButtonGroup) {\n                this._weekDayButtonGroup.destroy();\n            }\n\n            this.element.off(CLICK + this._namespace);\n\n            BaseRecurrenceEditor.fn.destroy.call(this);\n        },\n\n        _initInterval: function() {\n            var that = this;\n            var rule = that._value;\n\n            that._container.find(\".k-recur-interval\")\n                .val(that._value.interval || 1)\n                .on(CHANGE + that._namespace, function(e) {\n                    rule.interval = e.target.value;\n                    that._trigger();\n                });\n        },\n\n        _initRepeatButton: function() {\n            var that = this;\n            var freq = that.options.messages.frequencies[this._value.freq || \"never\"];\n\n            that._chevronButton = $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>');\n            that._repeatValue = $('<span class=\"\">' + freq + '</span>');\n\n            that.element.append(that._repeatValue).append(that._chevronButton);\n\n            that.element.parents(\"li.k-item\").on(CLICK + that._namespace, function(e) {\n                e.preventDefault();\n                that._createView(\"repeat\");\n                that._pane.navigate(that._view, that.options.animations.left);\n            });\n        },\n\n        _endLiItem: function() {\n            var that = this;\n            return '<li class=\"k-item k-listgroup-item\"><label class=\"k-label k-listgroup-form-row\"><span class=\"k-item-title k-listgroup-form-field-label\">' + that.options.messages.end.mobileLabel + '</span></label></li>';\n        },\n\n        _initParentRepeatEnd: function() {\n            var that = this;\n\n            var endLabelField = $(that._endLiItem()).insertAfter(that.element.parents(\"li.k-item\"));\n\n            var endEditField = $('<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span></div>')\n                .appendTo(endLabelField.find(\".k-label\"));\n\n            endLabelField.on(CLICK + that._namespace, function(e) {\n                e.preventDefault();\n                that._navigateToView(\"repeat\");\n            });\n\n            that._endParentLabelField = endLabelField.toggle(!!that._value.freq);\n            that._endParentEndButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n        },\n\n        _initRepeatEnd: function() {\n            var that = this;\n\n            var endLabelField = $(that._endLiItem()).insertAfter(that._container);\n\n            var endEditField = $('<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span><span class=\"k-icon k-i-arrow-chevron-right\"></span></div>')\n                .appendTo(endLabelField.find(\".k-label\"));\n\n            endLabelField.on(CLICK + that._namespace, function(e) {\n                e.preventDefault();\n                that._navigateToView(\"end\");\n            });\n\n            that._endLabelField = endLabelField.toggleClass(\"k-disabled\", !that._value.freq);\n            that._endButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n        },\n\n        _navigateToView: function(viewName) {\n            var that = this;\n            that._createView(viewName);\n            that._pane.navigate(that._view, that.options.animations.left);\n        },\n\n        _endText: function() {\n            var rule = this._value;\n            var messages = this.options.messages.end;\n\n            var text = messages.never;\n\n            if (rule.count) {\n                text = kendo.format(\"{0} {1}\", messages.after, rule.count);\n            } else if (rule.until) {\n                text = kendo.format(\"{0} {1:d}\", messages.on, rule.until);\n            }\n\n            return text;\n        },\n\n        _initFrequency: function() {\n            var that = this;\n            var frequencyMessages = that.options.messages.frequencies;\n\n            var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                dataSource: $.map(this.options.frequencies, function(frequency) {\n                    return {\n                        text: frequencyMessages[frequency],\n                        value: frequency !== \"never\" ? frequency : \"\"\n                    };\n                }),\n                value: that._value.freq || \"\",\n                ns: kendo.ns\n            });\n\n            that._view.element\n                .find(\".k-recur-pattern\")\n                .append(html);\n\n            that._view.element.find(\".k-scheduler-select\")\n                .on(CHANGE + that._namespace, function(e) {\n                    var value = e.target.value;\n                    that._value = { freq: value };\n                    that._defaultValue = $.extend({}, that._value);\n                    that._initRepeatView();\n                    that._endButton.text(that._endText());\n                    that._endParentEndButton.text(that._endText());\n                });\n        },\n\n        _initEndNavigation: function() {\n            var that = this;\n            var endMessages = that.options.messages.end.patterns;\n            var rule = that._value;\n            var value = \"\";\n\n            if (rule.count) {\n                value = \"count\";\n            } else if (rule.until) {\n                value = \"until\";\n            }\n\n            var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                dataSource: [\n                    { text: endMessages.never, value: \"\" },\n                    { text: endMessages.after, value: \"count\" },\n                    { text: endMessages.on, value: \"until\" }\n                ],\n                value: value,\n                ns: kendo.ns\n            });\n\n            that._view.element\n                .find(\".k-recur-pattern\")\n                .append(html);\n\n            that._view.element.find(\".k-scheduler-select\")\n                .on(CHANGE + that._namespace, function(e) {\n                    var value = e.target.value;\n                    var count = null;\n                    var until = null;\n\n                    that._initEndView(value);\n\n                    if (that._count.length) {\n                        count = that._count.val();\n                        until = null;\n                    } else if (that._until.length) {\n                        count = null;\n                        until = that._until.val ? kendo.parseDate(that._until.val(), \"yyyy-MM-dd\") : that._until.value();\n                    }\n\n                    rule.count = count;\n                    rule.until = until;\n                });\n        },\n\n        _createView: function(viewType) {\n            var that = this;\n            var options = that.options;\n            var messages = options.messages;\n            var headerTitle = messages[viewType === \"repeat\" ? \"repeatTitle\" : \"endTitle\"];\n\n            var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\" id=\"recurrence\">' +\n                       '<div data-role=\"header\" class=\"k-header\">' +\n                           '<a href=\"#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' +\n                           'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                               messages.headerTitle +\n                           '<a href=\"#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.update + '\" ' +\n                           'aria-label=\"' + messages.update + '\"><span class=\"k-icon k-i-check\"></span></a>' +\n                       '</div>';\n\n            var returnViewId = that._pane.view().id;\n\n            that._view = that._pane.append(html + RECURRENCE_HEADER_TEMPLATE({ headerTitle: headerTitle }));\n\n            that._view.element.on(CLICK + that._namespace, \"a.k-scheduler-cancel, a.k-scheduler-update\", function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                if ($(this).hasClass(\"k-scheduler-update\")) {\n                    that.trigger(\"change\");\n                    that._defaultValue = $.extend({}, that._value);\n                } else {\n                    that._value = that._defaultValue;\n                }\n\n                var frequency = that._value.freq;\n\n                that._endParentEndButton.text(that._endText());\n                that._endParentLabelField.toggle(!!frequency && frequency !== \"never\");\n                that._endButton.text(that._endText());\n\n                that._repeatValue.text(messages.frequencies[frequency || \"never\"]);\n\n                that._pane.one(\"viewShow\", function() {\n                    that._destroyView();\n                });\n\n                that._pane.navigate(returnViewId, that.options.animations.right);\n            });\n\n            that._container = that._view.element.find(\".k-recur-view\");\n\n            if (viewType === \"repeat\") {\n                that._initFrequency();\n                that._initRepeatView();\n                that._initRepeatEnd();\n            } else {\n                that._initEndNavigation();\n                that._initEndView();\n            }\n        },\n\n        _destroyView: function() {\n            if (this._view) {\n\n                this._view.destroy();\n                this._view.element.remove();\n                this._container = null;\n            }\n\n\n            this._view = null;\n        },\n\n        _initRepeatView: function() {\n            var that = this;\n            var frequency = that._value.freq || \"never\";\n\n            var data = {\n                 frequency: frequency,\n                 firstWeekDay: that.options.firstWeekDay,\n                 messages: that.options.messages[frequency]\n            };\n\n            var html = RECURRENCE_REPEAT_PATTERN_TEMPLATE(data);\n\n            var container = that._container = that._container || this._pane.view().content.find(\"li.k-recur-view\");\n            var rule = that._value;\n\n            if (that._endLabelField) {\n                that._endLabelField.toggleClass(\"k-disabled\", frequency === \"never\");\n            }\n\n            kendo.destroy(container);\n            container.html(html);\n\n            if (!html) {\n                that._value = {};\n                container.hide();\n                return;\n            } else {\n                container.show();\n            }\n\n            if (frequency === \"weekly\" && !rule.weekDays) {\n                 rule.weekDays = [{\n                    day: that.options.start.getDay(),\n                    offset: 0\n                 }];\n            }\n\n            that._weekDayButtons(that.options.firstWeekDay);\n\n            that._initInterval();\n            that._initMonthDay();\n            that._initWeekDays();\n            that._initWeekDay();\n            that._initMonth();\n\n            that._period();\n        },\n\n        _initMonthDay: function() {\n            var that = this;\n            var rule = that._value;\n            var monthDayInput = that._monthDay = that._container.find(\".k-recur-monthday\");\n\n            monthDayInput.attr({\n                min: 1,\n                max: 31\n            })\n            .val(rule.monthDays ? rule.monthDays[0] : that.options.start.getDate())\n            .on(CHANGE + that._namespace, function(e) {\n                rule.count = e.target.value;\n                that._trigger();\n            });\n        },\n\n        _initCount: function() {\n            var that = this,\n                input = that._count = that._container.find(\".k-recur-count\"),\n                rule = that._value;\n\n            input.val(rule.count || 1)\n                .on(CHANGE + that._namespace, function(ev) {\n                    rule.count = ev.target.value;\n                    that._trigger();\n                });\n        },\n\n        _initEndView: function(endPattern) {\n            var that = this;\n            var rule = that._value;\n\n            if (endPattern === undefined) {\n                if (rule.count) {\n                    endPattern = \"count\";\n                } else if (rule.until) {\n                    endPattern = \"until\";\n                }\n            }\n\n            var data = {\n                 endPattern: endPattern,\n                 messages: that.options.messages.end\n            };\n\n            kendo.destroy(that._container);\n            that._container.html(RECURRENCE_END_PATTERN_TEMPLATE(data));\n\n            that._initCount();\n            that._initUntil();\n        },\n\n        _initWeekDay: function() {\n            var that = this, data;\n\n            var weekdayMessage = that.options.messages.weekdays;\n            var offsetMessage = that.options.messages.offsetPositions;\n\n            var weekDaySelect = that._container.find(\".k-recur-weekday\");\n\n            var change = function() {\n                that._weekDayRule();\n                that.trigger(\"change\");\n            };\n\n            if (weekDaySelect[0]) {\n                that._weekDayOffset = that._container.find(\".k-recur-weekday-offset\")\n                                          .html(that._options([\n                                            { text: offsetMessage.first, value: \"1\" },\n                                            { text: offsetMessage.second, value: \"2\" },\n                                            { text: offsetMessage.third, value: \"3\" },\n                                            { text: offsetMessage.fourth, value: \"4\" },\n                                            { text: offsetMessage.last, value: \"-1\" }\n                                          ]))\n                                          .on(\"change\", change);\n\n                data = [\n                    { text: weekdayMessage.day, value: \"day\" },\n                    { text: weekdayMessage.weekday, value: \"weekday\" },\n                    { text: weekdayMessage.weekend, value: \"weekend\" }\n                ];\n\n                data = data.concat($.map(kendo.culture().calendar.days.names, function(dayName, idx) {\n                    return {\n                        text: dayName,\n                        value: idx\n                    };\n                }));\n\n                that._weekDay = weekDaySelect.html(that._options(data))\n                                             .on(\"change\", change)\n                                             .val(that.options.start.getDay());\n\n                that._weekDayView();\n            }\n        },\n\n        _initMonth: function() {\n            var that = this;\n            var rule = that._value;\n            var start = that.options.start;\n            var month = rule.months || [start.getMonth() + 1];\n            var monthSelect = that._container.find(\".k-recur-month\");\n            var monthNames = kendo.culture().calendar.months.names;\n\n            if (monthSelect[0]) {\n                var data = $.map(monthNames, function(monthName, idx) {\n                    return {\n                        text: monthName,\n                        value: idx + 1\n                    };\n                });\n\n                monthSelect.html(that._options(data))\n                           .on(\"change\", function() {\n                               rule.months = [Number(this.value)];\n                           });\n\n                that._monthSelect = monthSelect;\n\n                if (month) {\n                    monthSelect.val(month[0]);\n                }\n            }\n\n        },\n\n        _period: function() {\n            var that = this;\n            var rule = that._value;\n            var container = that._container;\n            var messages = that.options.messages[rule.freq];\n            var repeatRuleGroupButton = container.find(\".k-repeat-rule\");\n            var weekDayView = container.find(\".k-weekday-view\");\n            var monthDayView = container.find(\".k-monthday-view\");\n\n            if (repeatRuleGroupButton[0]) {\n                var currentValue = rule.weekDays ? \"weekday\" : \"monthday\";\n\n                var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                    value: currentValue,\n                    dataSource: [\n                        { text: messages.dayOfMonth, value: \"monthday\" },\n                        { text: messages.dayOfWeek, value: \"weekday\" }\n                    ],\n                    ns: kendo.ns\n                });\n\n                var init = function(val) {\n                    var weekDayName = that._weekDay.val();\n                    var weekDayOffset = that._weekDayOffset.val();\n                    var monthDay = that._monthDay.val();\n                    var month = that._monthSelect ? that._monthSelect.val() : null;\n\n                    if (val === \"monthday\") {\n                        rule.weekDays = null;\n                        rule.monthDays = monthDay ? [monthDay] : monthDay;\n                        rule.months = month ? [Number(month)] : month;\n\n                        weekDayView.hide();\n                        monthDayView.show();\n                    } else {\n                        rule.monthDays = null;\n                        rule.months = month ? [Number(month)] : month;\n\n                        rule.weekDays = [{\n                            offset: Number(weekDayOffset),\n                            day: Number(weekDayName)\n                        }];\n\n                        weekDayView.show();\n                        monthDayView.hide();\n                    }\n                };\n\n                repeatRuleGroupButton\n                    .append(html);\n\n                repeatRuleGroupButton.find(\".k-scheduler-select\")\n                    .on(CHANGE + that._namespace, function(e) {\n                        init(e.target.value);\n                    });\n\n                init(currentValue);\n            }\n        },\n\n        _initUntil: function() {\n            var that = this;\n            var input = that._container.find(\".k-recur-until\");\n            var start = that.options.start;\n            var rule = that._value;\n            var until = rule.until;\n            var min = until && until < start ? until : start;\n            var validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on);\n            var dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare;\n\n            input.attr(\"data-validDate-msg\", validDateValidationMessage);\n            input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n            if (kendo.support.input.date) {\n                that._until = input.attr(\"min\", kendo.toString(min, \"yyyy-MM-dd\"))\n                                   .val(kendo.toString(until || start, \"yyyy-MM-dd\"))\n                                   .on(\"change\", function() {\n                                        var date = kendo.parseDate(this.value, \"yyyy-MM-dd\");\n                                        if (date) {\n                                            rule.until = date;\n                                        }\n                                        that._trigger();\n                                   });\n            } else {\n                that._until = input.kendoDatePicker({\n                    min: min,\n                    value: until || start,\n                    change: function() {\n                        var date = this.value();\n                        if (date) {\n                            rule.until = date;\n                        }\n                        that._trigger();\n                    }\n                }).data(\"kendoDatePicker\");\n            }\n        },\n\n        _options: function(data, optionLabel) {\n            var idx = 0;\n            var html = \"\";\n            var length = data.length;\n            var template = this._optionTemplate;\n\n            if (optionLabel) {\n                html += template({ value: \"\", text: optionLabel });\n            }\n\n            for (; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        }\n    });\n\n    ui.plugin(MobileRecurrenceEditor);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 33367:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.buttongroup\");\n\n/***/ }),\n\n/***/ 4832:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.datepicker\");\n\n/***/ }),\n\n/***/ 54148:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.dropdownlist\");\n\n/***/ }),\n\n/***/ 32011:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.numerictextbox\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(10847);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}