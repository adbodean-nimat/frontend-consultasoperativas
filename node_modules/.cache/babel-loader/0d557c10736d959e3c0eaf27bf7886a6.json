{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\nrequire(\"core-js/modules/es.array.at.js\");\n\nrequire(\"core-js/modules/es.string.at-alternative.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    44211:\n    /***/\n    function (module, exports, __webpack_require__) {\n      /* provided dependency */\n      var jQuery = __webpack_require__(72834);\n\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(36765), __webpack_require__(74733), __webpack_require__(63192), __webpack_require__(66098), __webpack_require__(12600), __webpack_require__(79217), __webpack_require__(80959), __webpack_require__(19000), __webpack_require__(31673), __webpack_require__(49242), __webpack_require__(13397), __webpack_require__(18426), __webpack_require__(87190), __webpack_require__(35425), __webpack_require__(1744), __webpack_require__(1291), __webpack_require__(36842), __webpack_require__(20648), __webpack_require__(52220), __webpack_require__(1291), __webpack_require__(63401), __webpack_require__(27451), __webpack_require__(52713), __webpack_require__(38847)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        var __meta__ = {\n          id: \"grid\",\n          name: \"Grid\",\n          category: \"web\",\n          description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n          depends: [\"data\", \"columnsorter\", \"sortable\", \"html.button\"],\n          features: [{\n            id: \"grid-editing\",\n            name: \"Editing\",\n            description: \"Support for record editing\",\n            depends: [\"editable\", \"window\", \"textbox\", \"form\"]\n          }, {\n            id: \"grid-filtering\",\n            name: \"Filtering\",\n            description: \"Support for record filtering\",\n            depends: [\"filtermenu\"]\n          }, {\n            id: \"grid-columnmenu\",\n            name: \"Column menu\",\n            description: \"Support for header column menu\",\n            depends: [\"columnmenu\"]\n          }, {\n            id: \"grid-grouping\",\n            name: \"Grouping\",\n            description: \"Support for grid grouping\",\n            depends: [\"groupable\"]\n          }, {\n            id: \"grid-filtercell\",\n            name: \"Row filter\",\n            description: \"Support for grid header filtering\",\n            depends: [\"filtercell\"]\n          }, {\n            id: \"grid-paging\",\n            name: \"Paging\",\n            description: \"Support for grid paging\",\n            depends: [\"pager\"]\n          }, {\n            id: \"grid-selection\",\n            name: \"Selection\",\n            description: \"Support for row selection\",\n            depends: [\"selectable\"]\n          }, {\n            id: \"grid-column-reorder\",\n            name: \"Column reordering\",\n            description: \"Support for column reordering\",\n            depends: [\"reorderable\"]\n          }, {\n            id: \"grid-column-resize\",\n            name: \"Column resizing\",\n            description: \"Support for column resizing\",\n            depends: [\"resizable\"]\n          }, {\n            id: \"grid-mobile\",\n            name: \"Grid adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [\"dialog\", \"pane\", \"switch\"]\n          }, {\n            id: \"grid-excel-export\",\n            name: \"Excel export\",\n            description: \"Export grid data as Excel spreadsheet\",\n            depends: [\"excel\"]\n          }, {\n            id: \"grid-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export grid data as PDF\",\n            depends: [\"pdf\", \"drawing\", \"progressbar\"]\n          }]\n        };\n\n        (function ($, undefined) {\n          var kendo = window.kendo,\n              ui = kendo.ui,\n              DataSource = kendo.data.DataSource,\n              ObservableObject = kendo.data.ObservableObject,\n              tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n              activeElement = kendo._activeElement,\n              Widget = ui.Widget,\n              outerWidth = kendo._outerWidth,\n              outerHeight = kendo._outerHeight,\n              keys = kendo.keys,\n              isPlainObject = $.isPlainObject,\n              extend = $.extend,\n              map = $.map,\n              grep = $.grep,\n              isArray = Array.isArray,\n              inArray = $.inArray,\n              push = Array.prototype.push,\n              isFunction = kendo.isFunction,\n              isEmptyObject = $.isEmptyObject,\n              contains = $.contains,\n              math = Math,\n              DOT = \".\",\n              PROGRESS = \"progress\",\n              ERROR = \"error\",\n              HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n              DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible\",\n              SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n              NAVROW = \"tr:not(.k-footer-template):visible\",\n              NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n              ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n              COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n              HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n              WRAPPER = \".k-grid.k-widget\",\n              NS = \".kendoGrid\",\n              CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n              GROUPCELLCLASS = \"k-group-cell\",\n              EDIT = \"edit\",\n              BEFOREEDIT = \"beforeEdit\",\n              SAVE = \"save\",\n              REMOVE = \"remove\",\n              DETAILINIT = \"detailInit\",\n              FILTERMENUINIT = \"filterMenuInit\",\n              COLUMNMENUINIT = \"columnMenuInit\",\n              FILTERMENUOPEN = \"filterMenuOpen\",\n              COLUMNMENUOPEN = \"columnMenuOpen\",\n              CELLCLOSE = \"cellClose\",\n              CHANGE = \"change\",\n              COLUMNHIDE = \"columnHide\",\n              COLUMNSHOW = \"columnShow\",\n              SAVECHANGES = \"saveChanges\",\n              DATABOUND = \"dataBound\",\n              DETAILEXPAND = \"detailExpand\",\n              DETAILCOLLAPSE = \"detailCollapse\",\n              ITEM_CHANGE = \"itemchange\",\n              PAGE = \"page\",\n              PAGING = \"paging\",\n              SCROLL = \"scroll\",\n              SYNC = \"sync\",\n              LOAD_START = \"loadStart\",\n              LOAD_END = \"loadEnd\",\n              FOCUSED = \"k-focus\",\n              FOCUSABLE = \":kendoFocusable\",\n              SELECTED = \"k-selected\",\n              CHECKBOX = \"k-checkbox\",\n              CHECKBOXINPUT = \"input[data-role='checkbox'].\" + CHECKBOX,\n              NORECORDSCLASS = \"k-grid-norecords\",\n              LINK_CLASS = \"k-link\",\n              ICON_CLASS = \"k-icon\",\n              ORDER_CLASS = \"k-sort-order\",\n              SORTED_CLASS = \"k-sorted\",\n              HEADER_COLUMN_MENU_CLASS = \"k-header-column-menu\",\n              FILTER_MENU_CLASS = \"k-grid-filter\",\n              STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n              STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n              STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n              STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n              RESIZE = \"resize\",\n              COLUMNRESIZE = \"columnResize\",\n              COLUMNREORDER = \"columnReorder\",\n              COLUMNLOCK = \"columnLock\",\n              COLUMNUNLOCK = \"columnUnlock\",\n              COLUMNSTICK = \"columnStick\",\n              COLUMNUNSTICK = \"columnUnstick\",\n              ROWREORDER = \"rowReorder\",\n              NAVIGATE = \"navigate\",\n              CLICK = \"click\",\n              MOUSEDOWN = \"mousedown\",\n              HEIGHT = \"height\",\n              TABINDEX = \"tabIndex\",\n              FUNCTION = \"function\",\n              STRING = \"string\",\n              BOTTOM = \"bottom\",\n              CONTAINER_FOR = \"container-for\",\n              FIELD = \"field\",\n              INPUT = \"input\",\n              INCELL = \"incell\",\n              INLINE = \"inline\",\n              UNIQUE_ID = \"uid\",\n              MINCOLSPANVALUE = 1,\n              COLSPAN = \"colSpan\",\n              OVERFLOW = \"overflow\",\n              HIDDEN = \"hidden\",\n              SORT = \"sort\",\n              GROUP_SORT = \"group-sort\",\n              DELETECONFIRM = \"Are you sure you want to delete this record?\",\n              NORECORDS = \"No records available.\",\n              CONFIRMDELETE = \"Delete\",\n              CANCELDELETE = \"Cancel\",\n              COLLAPSE = \"Collapse\",\n              EXPAND = \"Expand\",\n              ARIALABEL = \"aria-label\",\n              formatRegExp = /(\\}|\\#)/ig,\n              templateHashRegExp = /#/ig,\n              whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n              leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n              rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n              nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n              filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n              COMMANDBUTTONTMPL = '<button type=\"button\" class=\"#=className#\" #=attr#>#=text#</button>',\n              SELECTCOLUMNTMPL = '<input tabindex=\"-1\" class=\"k-select-checkbox ' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">',\n              SELECTCOLUMNHEADERTMPL = '<input tabindex=\"-1\" class=\"k-select-checkbox ' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">',\n              DRAGHANDLECOLUMNTMPL = '<span class=\"k-icon k-i-reorder\"></span>',\n              SORTHEADERTMPL = '<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">#=text#</span></span></span>',\n              isRtl = false,\n              browser = kendo.support.browser;\n          var isIE11 = browser.msie && browser.version === 11;\n          var isMac = /Mac OS/.test(navigator.userAgent);\n          var classNames = {\n            content: \"k-content\",\n            widget: \"k-widget\",\n            scrollContainer: \"k-scroll-container\",\n            headerCellInner: \"k-cell-inner\"\n          };\n          var GroupsPager;\n\n          if (ui.Pager) {\n            GroupsPager = ui.Pager.extend({\n              init: function (element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n              },\n              options: {\n                name: \"GroupsPager\"\n              },\n              totalPages: function () {\n                var that = this;\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n              },\n              _collapsedTotal: function () {\n                var dataSource = this.dataSource;\n                return dataSource ? dataSource.groupsTotal(true) || 0 : 0;\n              }\n            });\n          }\n\n          var VirtualScrollable = Widget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n              that._refreshHandler = that.refresh.bind(that);\n              that.setDataSource(options.dataSource);\n              that.wrap();\n            },\n            setDataSource: function (dataSource) {\n              var that = this;\n\n              if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n              }\n\n              that.dataSource = dataSource;\n              that.dataSource.bind(CHANGE, that._refreshHandler);\n              that.dataSource.options.useRanges = true;\n              that.dataSource.options.virtual = true;\n            },\n            options: {\n              name: \"VirtualScrollable\",\n              itemHeight: $.noop,\n              prefetch: true,\n              maxScrollHeight: 250000\n            },\n            events: [PAGING, PAGE, SCROLL, LOAD_START, LOAD_END],\n            destroy: function () {\n              var that = this;\n              Widget.fn.destroy.call(that);\n              that.dataSource.unbind(CHANGE, that._refreshHandler);\n              that.wrapper.add(that.verticalScrollbar).off(NS);\n              clearTimeout(that._timeout);\n\n              if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n              }\n\n              if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n              }\n\n              that.wrapper = that.element = that.verticalScrollbar = null;\n              that._refreshHandler = null;\n            },\n            wrap: function () {\n              var that = this,\n                  // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n              scrollbar = kendo.support.scrollbar() + 1,\n                  element = that.element,\n                  wrapper;\n              element.css({\n                width: \"auto\",\n                overflow: \"hidden\"\n              }).css(isRtl ? \"padding-left\" : \"padding-right\", scrollbar);\n              that.content = element.children().first();\n              wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>').parent().on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n              that._wrapper();\n\n              if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", \"none\");\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                  global: true,\n                  allowSelection: true,\n                  start: function (e) {\n                    e.sender.capture();\n                  },\n                  move: function (e) {\n                    that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                    kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                    e.preventDefault();\n                  }\n                });\n              }\n\n              that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />').css({\n                width: scrollbar\n              }).appendTo(element).on(\"scroll\" + NS, that._scroll.bind(that));\n            },\n            _wrapper: function () {\n              var that = this;\n\n              if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                  \"overflow-y\": SCROLL\n                }); //hide the wrapper behind the virtual scrollbar\n\n                that.element.css(isRtl ? \"padding-left\" : \"padding-right\", 0);\n              }\n            },\n            _wheelScroll: function (e) {\n              if (e.ctrlKey) {\n                return;\n              }\n\n              var scrollbar = this.verticalScrollbar,\n                  scrollTop = scrollbar.scrollTop(),\n                  delta = kendo.wheelDeltaY(e);\n\n              if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + -delta);\n              }\n            },\n            _scroll: function (e) {\n              var that = this,\n                  delayLoading = !that.options.prefetch,\n                  scrollTop = e.currentTarget.scrollTop,\n                  dataSource = that.dataSource,\n                  rowHeight = that.itemHeight,\n                  skip = dataSource.skip() || 0,\n                  start = that._rangeStart || skip,\n                  height = that.element.innerHeight(),\n                  isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                  firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                  lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                  lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n              if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n              }\n\n              that._prevScrollTop = that._scrollTop;\n              that._scrollTop = scrollTop - start * rowHeight;\n              that._scrollbarTop = scrollTop;\n              that._scrolling = delayLoading;\n\n              if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n              }\n\n              that.trigger(SCROLL);\n\n              if (delayLoading) {\n                if (that._scrollingTimeout) {\n                  clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function () {\n                  that._scrolling = false;\n\n                  that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n              }\n            },\n            scrollToTop: function () {\n              this._scrollTo(0);\n            },\n            scrollToBottom: function () {\n              var scrollbar = this.verticalScrollbar;\n\n              this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n            _scrollWrapperToTop: function () {\n              this.wrapper.scrollTop(0);\n            },\n            _scrollWrapperToBottom: function () {\n              this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n            _scrollWrapperOnColumnResize: function () {\n              var that = this;\n              var wrapper = this.wrapper;\n              var initialScrollTop = wrapper.scrollTop();\n\n              if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if (!that._wrapperScrolled && initialScrollTop || that._isScrolledToBottom()) {\n                  wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                  that._scrollTop = wrapper.scrollTop();\n                  that._wrapperScrolled = true;\n                }\n              } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                  wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                  that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n              }\n            },\n            _scrollTo: function (scrollTop) {\n              var that = this;\n              var scrollbar = that.verticalScrollbar;\n\n              if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n              }\n\n              that.wrapper.scrollTop(scrollTop);\n              that._scrollTop = that.wrapper.scrollTop();\n              scrollbar.scrollTop(scrollTop);\n              that._scrollbarTop = scrollbar.scrollTop();\n            },\n            _isScrolledToTop: function () {\n              return this.verticalScrollbar.scrollTop() === 0;\n            },\n            _isScrolledToBottom: function () {\n              var scrollbar = this.verticalScrollbar;\n              var scrollTop = scrollbar.scrollTop();\n              return scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10);\n            },\n            _isWrapperScrolledToBottom: function () {\n              var wrapper = this.wrapper;\n              return wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10);\n            },\n            itemIndex: function (rowIndex) {\n              var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n              return rangeStart + rowIndex;\n            },\n            position: function (index) {\n              var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n              var pageSize = this.dataSource.pageSize();\n              var result;\n\n              if (index > rangeStart) {\n                result = index - rangeStart;\n              } else {\n                result = rangeStart - index - 1;\n              }\n\n              return result > pageSize ? pageSize : result;\n            },\n            scrollIntoView: function (row) {\n              var container = this.wrapper[0];\n              var containerHeight = container.clientHeight;\n              var containerScroll = !this._isScrolledToBottom() ? this._scrollTop || container.scrollTop : container.scrollTop;\n              var elementOffset = row[0].offsetTop;\n              var elementHeight = row[0].offsetHeight;\n\n              if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n              } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n              }\n            },\n            _fetch: function (firstItemIndex, lastItemIndex, scrollingUp) {\n              var that = this,\n                  dataSource = that.dataSource,\n                  itemHeight = that.itemHeight,\n                  take = dataSource.take(),\n                  rangeStart = that._rangeStart || dataSource.skip() || 0,\n                  currentSkip = math.floor(firstItemIndex / take) * take,\n                  fetching = false,\n                  prefetchAt = 0.33;\n              var scrollbar = that.verticalScrollbar;\n              var webkitCorrection = browser.webkit ? 1 : 0;\n              var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n              if (firstItemIndex < rangeStart) {\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - rangeStart * itemHeight;\n\n                that._page(rangeStart, take);\n              } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take); //ensure the scrollbar can be scrolled to bottom with mouse drag\n\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                  that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                  that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                  that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n              } else if (!that._fetching && that.options.prefetch) {\n                if (firstItemIndex < currentSkip + take - take * prefetchAt && firstItemIndex > take) {\n                  dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                  dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n              }\n\n              return fetching;\n            },\n            fetching: function () {\n              return this._fetching;\n            },\n            _page: function (skip, take, callback) {\n              var that = this,\n                  delayLoading = !that.options.prefetch,\n                  dataSource = that.dataSource,\n                  isGroupPaged = dataSource._isGroupPaged();\n\n              callback = isFunction(callback) ? callback : $.noop;\n\n              if (that.trigger(PAGING, {\n                skip: skip,\n                take: take\n              })) {\n                return;\n              }\n\n              clearTimeout(that._timeout);\n              that._fetching = true;\n              that._rangeStart = skip;\n\n              if (isGroupPaged && dataSource._groupRangeExists(skip, skip + take) || !isGroupPaged && dataSource.inRange(skip, take)) {\n                that.trigger(LOAD_START);\n                dataSource.range(skip, take, function () {\n                  that.trigger(LOAD_END);\n                  callback();\n                  that.trigger(PAGE);\n                }, \"page\");\n              } else {\n                if (!delayLoading) {\n                  that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function () {\n                  if (!that._scrolling) {\n                    if (delayLoading) {\n                      that.trigger(LOAD_START);\n                    }\n\n                    dataSource.range(skip, take, function () {\n                      that.trigger(LOAD_END);\n                      callback();\n                      that.trigger(PAGE);\n                    });\n                  }\n                }, 100);\n              }\n            },\n            repaintScrollbar: function (shouldScrollWrapper) {\n              var that = this,\n                  html = \"\",\n                  maxHeight = that.options.maxScrollHeight,\n                  dataSource = that.dataSource,\n                  scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                  wrapperElement = that.wrapper[0],\n                  totalHeight,\n                  idx,\n                  itemHeight;\n\n              var wasScrolledToBottom = that._isScrolledToBottom();\n\n              itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n              var addScrollBarHeight = wrapperElement.scrollWidth > wrapperElement.offsetWidth ? scrollbar : 0;\n              totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n              for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n              }\n\n              if (totalHeight % maxHeight) {\n                html += '<div style=\"width:1px;height:' + totalHeight % maxHeight + 'px\"></div>';\n              }\n\n              that.verticalScrollbar.html(html);\n\n              if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n              }\n\n              if (typeof that._scrollTop !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n\n                that._scrollWrapperOnColumnResize();\n              }\n            },\n            refresh: function (e) {\n              var that = this,\n                  dataSource = that.dataSource,\n                  rangeStart = that._rangeStart;\n              var action = (e || {}).action;\n              var shouldScrollWrapper = that._isScrolledToBottom() || !action || action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC;\n              that.trigger(LOAD_END);\n              clearTimeout(that._timeout);\n              that.repaintScrollbar(shouldScrollWrapper);\n\n              if (that.drag) {\n                that.drag.cancel();\n              }\n\n              if (typeof rangeStart !== \"undefined\" && !that._fetching) {\n                // we are rebound from outside local range should be reset\n                if (!action || action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\") {\n                  that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\")) {\n                  // reset the scrollbar position if datasource is filtered\n                  that.verticalScrollbar[0].scrollTop = 0;\n                }\n              }\n\n              that._fetching = false;\n            }\n          });\n\n          function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n          }\n\n          function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-group-cell\">&nbsp;</td>');\n          }\n\n          function stringifyAttributes(attributes) {\n            var attr,\n                result = \" \";\n\n            if (attributes) {\n              if (typeof attributes === STRING) {\n                return attributes;\n              }\n\n              for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                  result += attr + '=\"' + attributes[attr] + '\"';\n                }\n              }\n            }\n\n            return result;\n          }\n\n          var defaultCommands = {\n            create: {\n              text: \"Add new record\",\n              className: \"k-grid-add\",\n              iconClass: \"k-icon k-i-plus\"\n            },\n            cancel: {\n              text: \"Cancel changes\",\n              className: \"k-grid-cancel-changes\",\n              iconClass: \"k-icon k-i-cancel\"\n            },\n            save: {\n              text: \"Save changes\",\n              className: \"k-grid-save-changes\",\n              iconClass: \"k-icon k-i-check\"\n            },\n            destroy: {\n              text: \"Delete\",\n              className: \"k-grid-delete\",\n              iconClass: \"k-icon k-i-close\"\n            },\n            edit: {\n              text: \"Edit\",\n              className: \"k-grid-edit\",\n              iconClass: \"k-icon k-i-edit\"\n            },\n            update: {\n              text: \"Update\",\n              className: \"k-grid-update\",\n              iconClass: \"k-icon k-i-check\",\n              themeColor: \"primary\"\n            },\n            canceledit: {\n              text: \"Cancel\",\n              className: \"k-grid-cancel\",\n              iconClass: \"k-icon k-i-cancel\"\n            },\n            excel: {\n              text: \"Export to Excel\",\n              className: \"k-grid-excel\",\n              iconClass: \"k-icon k-i-file-excel\"\n            },\n            pdf: {\n              text: \"Export to PDF\",\n              className: \"k-grid-pdf\",\n              iconClass: \"k-icon k-i-file-pdf\"\n            },\n            search: {\n              text: \"Search...\",\n              className: \"k-grid-search\"\n            }\n          };\n\n          function cursor(context, value) {\n            $('th, th .k-grid-filter, th .k-link', context).add(document.body).css('cursor', value);\n          }\n\n          function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n\n            for (var idx = 0; idx < count; idx++) {\n              source = source.add(selector.eq(sourceIndex + idx));\n            }\n\n            if (typeof dest == \"number\") {\n              source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n            } else {\n              source.appendTo(dest);\n            }\n          }\n\n          function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n          }\n\n          function attachCustomCommandEvent(context, container, commands) {\n            var idx, length, command, commandName;\n            commands = !isArray(commands) ? [commands] : commands;\n\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n              command = commands[idx];\n\n              if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), {\n                  commandName: commandName\n                }, command.click.bind(context));\n              }\n            }\n          }\n\n          function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n            return map(columns, function (column) {\n              column = typeof column === STRING ? {\n                field: column\n              } : column;\n              var hidden;\n              column.parentIds = parentIds;\n\n              if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n              }\n\n              var uid = kendo.guid();\n\n              if (locked && !column.locked) {\n                column.locked = locked;\n              }\n\n              column.headerAttributes = extend({\n                headers: parentIds\n              }, column.headerAttributes);\n\n              if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({\n                  id: uid\n                }, column.headerAttributes);\n                column.uid = uid;\n              } else {\n                uid = column.headerAttributes.id;\n              }\n\n              if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? parentIds + \" \" + uid : uid);\n              }\n\n              return extend({\n                encoded: encoded,\n                hidden: hidden,\n                locked: locked\n              }, column);\n            });\n          }\n\n          function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n          }\n\n          function columnParents(column, columns, parents) {\n            parents = parents || [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              if (column === columns[idx]) {\n                return true;\n              } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                  parents.splice(inserted, parents.length - inserted);\n                } else {\n                  return true;\n                }\n              }\n            }\n\n            return false;\n          }\n\n          function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n          }\n\n          function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n          }\n\n          function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n          }\n\n          function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n          }\n\n          function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || !isUndefined(column.media) && kendo.matchesMedia(column.media));\n          }\n\n          function isCellVisible() {\n            return this.style.display !== \"none\";\n          }\n\n          function isElementVisible(element) {\n            return $(element)[0].style.display !== \"none\";\n          }\n\n          function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n          }\n\n          function visibleColumns(columns) {\n            return grep(columns, function (column) {\n              var result = !column.hidden && column.matchesMedia !== false;\n\n              if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n              }\n\n              return result;\n            });\n          }\n\n          function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n              column = columns[i];\n\n              if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                  throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n              }\n\n              if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n              }\n            }\n\n            return result;\n          }\n\n          function isUndefined(value) {\n            return typeof value === \"undefined\";\n          }\n\n          function toJQuery(elements) {\n            return $(elements).map(function () {\n              return this.toArray();\n            });\n          }\n\n          function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n            var rowSpan = cell.rowSpan;\n\n            if (sourceLockedColumnsCount) {\n              if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan - (lockedColumnDepth - nonLockedColumnDepth) || 1;\n              } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n              }\n            } else {\n              if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n              } else {\n                cell.rowSpan = rowSpan - (nonLockedColumnDepth - lockedColumnDepth) || 1;\n              }\n            }\n          }\n\n          function findColumnByField(columns, field) {\n            for (var i = 0; i < columns.length; i++) {\n              if (columns[i].field == field) {\n                return columns[i];\n              }\n            }\n          }\n\n          function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n\n            if (sourcesDepth > targetDepth) {\n              var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>');\n              var rows = destination.children(\":not(.k-filter-row)\");\n              $(new Array(sourcesDepth - targetDepth + 1).join(\"<tr>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n            }\n\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n            moveCells(leafs, columns, container, destination, action);\n          }\n\n          function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n            var cells = {};\n            var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function () {\n              var el = $(this);\n              return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n              position = columnPosition(columns[idx], allColumns);\n\n              if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row).find(\".k-header\").filter(filter);\n              }\n\n              cell = cells[position.row].eq(position.cell);\n              cell.attr(kendo.attr(\"index\"), offset + idx);\n            }\n\n            return columns.length;\n          }\n\n          function depth(columns) {\n            var result = 1;\n            var max = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n\n                if (temp > max) {\n                  max = temp;\n                }\n              }\n            }\n\n            return result + max;\n          }\n\n          function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n            var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n\n            for (idx = 0; idx < leafs.length; idx++) {\n              t = t.add(ths.eq(sourceIndex + idx));\n            }\n\n            destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n            var children = [];\n\n            for (idx = 0; idx < leafs.length; idx++) {\n              if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n              }\n            }\n\n            if (children.length) {\n              moveCells(children, columns, container, destination, action);\n            }\n          }\n\n          function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n              if (columns[idx] == column) {\n                result = {\n                  cell: cellCounts[row],\n                  row: row\n                };\n                break;\n              } else if (columns[idx].columns) {\n                result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n\n                if (result) {\n                  break;\n                }\n              }\n\n              cellCounts[row]++;\n            }\n\n            return result;\n          }\n\n          function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n\n            do {\n              target = columns[index];\n              index += rtl ? 1 : -1;\n              targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n            return target;\n          }\n\n          function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n              target = target.columns;\n              return target[before ? 0 : target.length - 1];\n            } else {\n              var parent = columnParent(target, columns);\n              var parentColumns;\n\n              if (parent) {\n                parentColumns = parent.columns;\n              } else {\n                parentColumns = columns;\n              }\n\n              var index = inArray(target, parentColumns);\n\n              if (index === 0 && before) {\n                index++;\n              } else if (index == parentColumns.length - 1 && !before || !source.locked && !target.columns && !before) {\n                index--;\n              } else if (index > 0 || index === 0 && !before) {\n                index++;\n              }\n\n              var sourceIndex = inArray(source, parentColumns);\n              target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n              var targetIndex = inArray(target, masterColumns);\n\n              if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n              }\n\n              if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n              }\n            }\n\n            return null;\n          }\n\n          function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n              if (columns[idx] == column) {\n                result = {\n                  cell: cellCounts[row],\n                  row: row\n                };\n                break;\n              } else if (columns[idx].columns) {\n                result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n\n                if (result) {\n                  break;\n                }\n              }\n\n              if (!columns[idx].hidden) {\n                cellCounts[row]++;\n              }\n            }\n\n            return result;\n          }\n\n          function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n          }\n\n          function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n            return inArray(target, columns);\n          }\n\n          function flatColumns(columns) {\n            var result = [];\n            var children = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              result.push(columns[idx]);\n\n              if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n              }\n            }\n\n            if (children.length) {\n              result = result.concat(flatColumns(children));\n            }\n\n            return result;\n          }\n\n          function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              column = columns[idx];\n\n              if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n              } else if (column.hidden) {\n                counter++;\n              }\n            }\n\n            return counter;\n          }\n\n          function sumWidths(cols) {\n            var width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n              if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n              }\n            }\n\n            return width;\n          }\n\n          function columnsWidth(cols) {\n            var colWidth,\n                width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n              colWidth = cols[idx].style.width;\n\n              if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n              }\n            }\n\n            return width;\n          }\n\n          function removeRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var rowSpan;\n\n            for (var idx = 0; idx < cells.length; idx++) {\n              rowSpan = cells[idx].rowSpan;\n\n              if (rowSpan > 1) {\n                cells[idx].rowSpan = rowSpan - count || 1;\n              }\n            }\n          }\n\n          function addRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n              cells[idx].rowSpan += count;\n            }\n          }\n\n          function removeEmptyRows(container) {\n            var rows = container.find(\"tr:not(.k-filter-row)\");\n            var emptyRowsCount = rows.filter(function () {\n              return !$(this).children().length;\n            }).remove().length;\n            var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n              if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n              }\n            }\n\n            return rows.length - emptyRowsCount;\n          }\n\n          function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx,\n                row,\n                length,\n                children = [];\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n              row = rows[rowIndex] || [];\n              row.push(cells.eq(offset + idx));\n              rows[rowIndex] = row;\n\n              if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n              }\n            }\n\n            if (children.length) {\n              mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n          }\n\n          function setLeftAndRightStyles(element, left, right) {\n            element.css({\n              \"left\": left,\n              \"right\": right\n            });\n          }\n\n          function createColumnAttribute(column, attribute, property) {\n            column[attribute] = column[attribute] || {};\n            column[attribute][property] = column[attribute][property] || \"\";\n          }\n\n          function addColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n\n            if (column[attribute][property] !== \"\") {\n              column[attribute][property] += \" \" + value;\n            } else {\n              column[attribute][property] = value;\n            }\n          }\n\n          function removeColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n            column[attribute][property] = column[attribute][property].replace(value, \"\");\n          }\n\n          function lockedColumns(columns) {\n            return grep(columns, function (column) {\n              return column.locked;\n            });\n          }\n\n          function nonLockedColumns(columns) {\n            return grep(columns, function (column) {\n              return !column.locked;\n            });\n          }\n\n          function stickyColumns(columns) {\n            return grep(columns, function (column) {\n              return column.sticky && !column.locked;\n            });\n          }\n\n          function visibleStickyColumns(columns) {\n            return grep(columns, function (column) {\n              return column.sticky && !column.locked && isVisible(column);\n            });\n          }\n\n          function visibleNonLockedColumns(columns) {\n            return grep(columns, function (column) {\n              return !column.locked && isVisible(column);\n            });\n          }\n\n          function visibleLockedColumns(columns) {\n            return grep(columns, function (column) {\n              return column.locked && isVisible(column);\n            });\n          }\n\n          function visibleLeafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              if (columns[idx].hidden) {\n                continue;\n              }\n\n              if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n              } else {\n                result.push(columns[idx]);\n              }\n            }\n\n            return result;\n          }\n\n          function childColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n              }\n            }\n\n            return result;\n          }\n\n          function visibleChildColumns(columns) {\n            var result = childColumns(columns);\n            result = result.filter(function (e) {\n              return !e.hidden;\n            });\n            return result;\n          }\n\n          function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n              }\n\n              result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n          }\n\n          function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n\n            for (var idx = 0; idx < columns.length; idx++) {\n              if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n              } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n              }\n            }\n\n            return result;\n          }\n\n          function editField(column) {\n            return {\n              field: column.field,\n              title: column.title,\n              format: column.format,\n              editor: column.editor,\n              values: column.values,\n              editorOptions: extend(true, {\n                format: column.format\n              }, column.editorOptions),\n              label: column.title || column.field || \"\"\n            };\n          }\n\n          function leafDataCells(container) {\n            var rows = container.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function () {\n              var el = $(this);\n              return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            var cells = $();\n\n            if (rows.length > 1) {\n              cells = rows.find(\"th\").filter(filter).filter(function () {\n                return this.rowSpan > 1;\n              });\n            }\n\n            cells = cells.add(rows.last().find(\"th\").filter(filter));\n            var indexAttr = kendo.attr(\"index\");\n            cells.sort(function (a, b) {\n              a = $(a);\n              b = $(b);\n              var indexA = a.attr(indexAttr);\n              var indexB = b.attr(indexAttr);\n\n              if (indexA === undefined) {\n                indexA = $(a).index();\n              }\n\n              if (indexB === undefined) {\n                indexB = $(b).index();\n              }\n\n              indexA = parseInt(indexA, 10);\n              indexB = parseInt(indexB, 10);\n              return indexA > indexB ? 1 : indexA < indexB ? -1 : 0;\n            });\n            return cells;\n          }\n\n          function parentColumnsCells(cell) {\n            var container = cell.closest(\"table\");\n            var result = $().add(cell);\n            var row = cell.closest(\"tr\");\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row);\n\n            if (level > 0) {\n              var parent = headerRows.eq(level - 1);\n              var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function () {\n                return !$(this).attr(\"rowspan\");\n              });\n              var offset = 0;\n              var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n              var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function () {\n                return this.colSpan > 1;\n              });\n\n              for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n              }\n\n              index += Math.max(offset - 1, 0);\n              offset = 0;\n\n              for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n\n                if (parentCell.attr(\"data-colspan\")) {\n                  offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                  offset += 1;\n                }\n\n                if (index >= idx && index < offset) {\n                  result = parentColumnsCells(parentCell).add(result);\n                  break;\n                }\n              }\n            }\n\n            return result;\n          }\n\n          function childColumnsCells(cell) {\n            var container = cell.closest(\"thead\");\n            var result = $().add(cell);\n            var row = cell.closest(\"tr\");\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr(\"colspan\");\n\n            if (level <= headerRows.length - 1) {\n              var child = row.next();\n              var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n              var idx;\n              prevCells = prevCells.filter(function () {\n                return !this.rowSpan || this.rowSpan === 1;\n              });\n              var offset = 0;\n\n              for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n              }\n\n              var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n              var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n              idx = 0;\n\n              while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n\n                if (value > 1) {\n                  colSpan -= value - 1;\n                }\n\n                idx++;\n              }\n            }\n\n            return result;\n          }\n\n          function appendContent(tbody, table, html, empty) {\n            var placeholder,\n                tmp = tbody; // necessary for AngularJS to cleanup its guts.\n\n            if (empty) {\n              tbody.empty();\n            }\n\n            if (tbodySupportsInnerHtml) {\n              tbody[0].innerHTML = html;\n            } else {\n              placeholder = document.createElement(\"div\");\n              placeholder.innerHTML = \"<table><tbody>\" + html + \"</tbody></table>\";\n              tbody = placeholder.firstChild.firstChild;\n              table[0].replaceChild(tbody, tmp[0]);\n              tbody = $(tbody);\n            }\n\n            return tbody;\n          }\n\n          function addHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n\n            if (!style) {\n              style = \"display:none\";\n            } else {\n              style = style.replace(/display:[^;]*/i, \"display:none\");\n\n              if (!style.match(/display:/i)) {\n                style = style.replace(/(.*)?/i, \"display:none;$1\");\n              }\n            }\n\n            return extend({}, attr, {\n              style: style\n            });\n          }\n\n          function hasHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style || \"\";\n            return style.indexOf(\"display:none\") !== -1;\n          }\n\n          function removeHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n\n            if (style) {\n              attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/ig, \"\");\n            }\n\n            return attr;\n          }\n\n          function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find(\">colgroup\"),\n                width,\n                cols = map(visibleColumns, function (column) {\n              width = column.width;\n\n              if (width && parseInt(width, 10) !== 0) {\n                return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + \"px\");\n              }\n\n              return \"<col />\";\n            });\n\n            if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n              cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n\n            if (colgroup.length) {\n              colgroup.remove();\n            }\n\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n\n            if (!colgroup.is(\"colgroup\")) {\n              colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            table.prepend(colgroup);\n          }\n\n          function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx, len;\n            var th = container.find(\"th:not(.k-group-cell)\");\n\n            for (idx = 0, len = columns.length; idx < len; idx++) {\n              if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex++;\n              }\n            }\n          }\n\n          function convertToObject(array) {\n            var result = {},\n                item,\n                idx,\n                length;\n\n            for (idx = 0, length = array.length; idx < length; idx++) {\n              item = array[idx];\n              result[item.value] = item.text;\n            }\n\n            return result;\n          }\n\n          function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n                groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n            groupValue = groupValue != null ? groupValue : \"\";\n            return format ? kendo.format(format, groupValue) : encoded === false ? groupValue : kendo.htmlEncode(groupValue);\n          }\n\n          function setCellVisibility(cells, index, visible) {\n            var pad = 0,\n                state,\n                cell = cells[pad];\n\n            while (cell) {\n              state = visible ? true : cell.style.display !== \"none\";\n\n              if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : \"none\";\n                break;\n              }\n\n              cell = cells[++pad];\n            }\n          }\n\n          function hideColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell,\n                row;\n\n            for (; idx < length; idx += 1) {\n              row = rows.eq(idx);\n\n              if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n              } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                  cell = $(cell);\n                  cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                  cell.find(\"col\").eq(columnIndex).remove();\n                  row = cell.find(\"tr\").first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n              }\n            }\n          }\n\n          function groupRows(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n              item = data[idx];\n\n              if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n              }\n\n              result.push(item);\n\n              if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n              }\n            }\n\n            return result;\n          }\n\n          function groupFooters(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n              item = data[idx];\n\n              if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n              }\n\n              if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n              }\n\n              result.push(item.aggregates);\n            }\n\n            return result;\n          }\n\n          function showColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell,\n                row,\n                columns;\n\n            for (; idx < length; idx += 1) {\n              row = rows.eq(idx);\n\n              if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n              } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                  cell = $(cell);\n                  cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                  normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                  row = cell.find(\"tr\").first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n              }\n            }\n          }\n\n          function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n            var item, idx, length;\n\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n              item = toAdd.eq(idx).children().last();\n              item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n              item = toRemove.eq(idx).children().last();\n              item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n            }\n          }\n\n          function tableWidth(table) {\n            var idx,\n                length,\n                width = 0;\n            var cols = table.find(\">colgroup>col\");\n\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n              width += parseInt(cols[idx].style.width, 10);\n            }\n\n            return width;\n          }\n\n          var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function (element, options, events) {\n              var that = this;\n              options = isArray(options) ? {\n                dataSource: options\n              } : options;\n              Widget.fn.init.call(that, element, options);\n\n              if (events) {\n                that._events = events;\n              }\n\n              isRtl = kendo.support.isRtl(element);\n\n              that._element();\n\n              that._aria();\n\n              that._columns($.extend(true, [], that.options.columns));\n\n              if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises).then(function () {\n                  that._foreignKeyPromises = null;\n\n                  that._continueInit();\n                });\n              } else {\n                that._continueInit();\n              }\n            },\n            _continueInit: function () {\n              var that = this;\n\n              that._dataSource();\n\n              that._stickyColumns();\n\n              that._tbody();\n\n              that._thead();\n\n              that._groupable();\n\n              that._toolbar();\n\n              that._pageable();\n\n              that._setContentHeight();\n\n              that._templates();\n\n              that._navigatable();\n\n              that._selectable();\n\n              that._clipboard();\n\n              that._details();\n\n              that._editable();\n\n              that._attachCustomCommandsEvent();\n\n              that._adaptiveColumns();\n\n              that._minScreenSupport();\n\n              if (that.options.autoBind) {\n                that.dataSource.fetch();\n              } else {\n                that._group = that._groups() > 0;\n\n                that._footer();\n              }\n\n              if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n\n                that._resizeHandler = function () {\n                  that.resize();\n                };\n\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n              }\n\n              kendo.notify(that);\n            },\n            events: [CHANGE, \"dataBinding\", \"cancel\", DATABOUND, DETAILEXPAND, DETAILCOLLAPSE, DETAILINIT, FILTERMENUINIT, FILTERMENUOPEN, COLUMNMENUINIT, COLUMNMENUOPEN, EDIT, BEFOREEDIT, SAVE, REMOVE, SAVECHANGES, CELLCLOSE, COLUMNRESIZE, COLUMNREORDER, COLUMNSHOW, COLUMNHIDE, COLUMNLOCK, COLUMNUNLOCK, COLUMNSTICK, COLUMNUNSTICK, ROWREORDER, NAVIGATE, \"page\", \"sort\", \"filter\", \"group\", \"groupExpand\", \"groupCollapse\", \"kendoKeydown\"],\n            setDataSource: function (dataSource) {\n              var that = this;\n              var scrollable = that.options.scrollable;\n              var scrollableContent;\n              that.options.dataSource = dataSource;\n\n              that._dataSource();\n\n              that._pageable();\n\n              that._thead();\n\n              if (scrollable) {\n                if (scrollable.virtual) {\n                  scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                  kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                  scrollableContent = that.tbody;\n                  kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n              }\n\n              if (that.options.groupable) {\n                that._groupable();\n              }\n\n              if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n              }\n\n              if (that.options.navigatable) {\n                that._navigatable();\n              }\n\n              if (that.options.selectable) {\n                that._selectable();\n              }\n\n              if (that.options.autoBind) {\n                that.dataSource.fetch();\n              } else {\n                that._footer();\n              }\n            },\n            options: {\n              name: \"Grid\",\n              columns: [],\n              toolbar: null,\n              autoBind: true,\n              filterable: false,\n              scrollable: true,\n              sortable: false,\n              selectable: false,\n              allowCopy: false,\n              navigatable: false,\n              pageable: false,\n              persistSelection: false,\n              editable: false,\n              encodeTitles: false,\n              groupable: false,\n              rowTemplate: \"\",\n              altRowTemplate: \"\",\n              search: false,\n              noRecords: false,\n              dataSource: {},\n              height: null,\n              resizable: false,\n              reorderable: false,\n              columnMenu: false,\n              detailTemplate: null,\n              columnResizeHandleWidth: 3,\n              mobile: \"\",\n              loaderType: \"loadingPanel\",\n              messages: {\n                editable: {\n                  cancelDelete: CANCELDELETE,\n                  confirmation: DELETECONFIRM,\n                  confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                  create: defaultCommands.create.text,\n                  cancel: defaultCommands.cancel.text,\n                  save: defaultCommands.save.text,\n                  destroy: defaultCommands.destroy.text,\n                  edit: defaultCommands.edit.text,\n                  update: defaultCommands.update.text,\n                  canceledit: defaultCommands.canceledit.text,\n                  excel: defaultCommands.excel.text,\n                  pdf: defaultCommands.pdf.text,\n                  search: defaultCommands.search.text\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\"\n              },\n              width: null\n            },\n            destroy: function () {\n              var that = this,\n                  element;\n\n              that._angularItems(\"cleanup\");\n\n              that._destroyColumnAttachments();\n\n              Widget.fn.destroy.call(that);\n\n              if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n\n                this._navigatableTables = null;\n                this._headertables = null;\n              }\n\n              if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n              }\n\n              if (that.pager && that.pager.element) {\n                that.pager.destroy();\n              }\n\n              if (that.timer) {\n                clearTimeout(that.timer);\n              }\n\n              if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n              }\n\n              if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n              }\n\n              if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n              }\n\n              that.pager = null;\n\n              that._destroyGroupable();\n\n              if (that.options.reorderable === true || that.options.reorderable && that.options.reorderable.columns) {\n                that.wrapper.data(\"kendoReorderable\").destroy();\n              }\n\n              if (that._hasReorderableRows()) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n              }\n\n              if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                  that.wrapper.off(\"keydown\", that.copyHandler);\n                  that.unbind(that.copyHandler);\n                }\n\n                if (that.updateClipBoardState) {\n                  that.unbind(that.updateClipBoardState);\n                  that.updateClipBoardState = null;\n                }\n\n                if (that.clearAreaHandler) {\n                  that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n              }\n\n              that.selectable = null;\n\n              if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                  if (that._resizeHandleDocumentClickHandler) {\n                    $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                  }\n\n                  that._resizeUserEvents.destroy();\n\n                  that._resizeUserEvents = null;\n                }\n\n                that.resizable = null;\n              }\n\n              that._destroyVirtualScrollable();\n\n              if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n              }\n\n              if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n\n                that._lockedContentUserEvents = null;\n              }\n\n              that._destroyEditable();\n\n              if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler).unbind(SORT, that._clearSortClasses);\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n              }\n\n              element = that.element.add(that.wrapper).add(that.table).add(that.thead).add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n              if (that.content) {\n                element = element.add(that.content).add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n              }\n\n              if (that.lockedHeader) {\n                that._removeLockedContainers();\n              }\n\n              if (that.pane) {\n                that.pane.destroy();\n              }\n\n              if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n              }\n\n              if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n              }\n\n              that._detachColumnMediaResizeHandler();\n\n              if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n              }\n\n              that._draggableInstance = null;\n\n              if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n              }\n\n              that._draggableRowsInstance = null;\n              element.off(NS);\n              kendo.destroy(that.wrapper);\n              that.rowTemplate = that.altRowTemplate = that.lockedRowTemplate = that.lockedAltRowTemplate = that.detailTemplate = that.footerTemplate = that.groupFooterTemplate = that.lockedGroupFooterTemplate = that.noRecordsTemplate = null;\n              that.scrollables = that.thead = that.tbody = that.element = that.table = that.content = that.footer = that.wrapper = that.lockedTable = that.lockedContent = that.lockedHeader = that.lockedFooter = that._groupableClickHandler = that._groupRows = that._setContentWidthHandler = null;\n            },\n            getOptions: function () {\n              var options = this.options;\n              options.dataSource = null;\n              var result = extend(true, {}, this.options);\n              result.columns = kendo.deepExtend([], this.columns);\n              var dataSource = this.dataSource;\n              var initialData = dataSource.options.data && dataSource._data;\n              dataSource.options.data = null;\n              result.dataSource = $.extend(true, {}, dataSource.options);\n              dataSource.options.data = initialData;\n              result.dataSource.data = initialData;\n              result.dataSource.page = dataSource.page();\n              result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n              result.dataSource.pageSize = dataSource.pageSize();\n              result.dataSource.sort = dataSource.sort();\n              result.dataSource.group = dataSource.group();\n              result.dataSource.aggregate = dataSource.aggregate();\n\n              if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n              }\n\n              if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n              }\n\n              result.$angular = undefined;\n              return result;\n            },\n            setOptions: function (options) {\n              var currentOptions = this.getOptions();\n              kendo.deepExtend(currentOptions, options);\n\n              if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n              } else {\n                if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n                }\n              }\n\n              var wrapper = this.wrapper;\n              var events = this._events;\n              var element = this.element;\n              this.destroy();\n              this.options = null;\n\n              if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n              }\n\n              if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n              }\n\n              element.empty();\n              this.init(element, currentOptions, events);\n\n              this._setEvents(currentOptions);\n            },\n            items: function () {\n              if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n              } else {\n                return this._items(this.tbody);\n              }\n            },\n            _items: function (container, includeGroupRows) {\n              return container.children().filter(function () {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(\"k-grouping-row\")) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n              });\n            },\n            dataItems: function () {\n              var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n\n              if (this.lockedContent) {\n                var n = dataItems.length,\n                    tmp = new Array(2 * n);\n\n                for (var i = n; --i >= 0;) {\n                  tmp[i] = tmp[i + n] = dataItems[i];\n                }\n\n                dataItems = tmp;\n              }\n\n              return dataItems;\n            },\n            _destroyColumnAttachments: function () {\n              var that = this;\n              that.resizeHandle = null;\n\n              if (!that.thead) {\n                return;\n              }\n\n              this.angular(\"cleanup\", function () {\n                return {\n                  elements: that.thead.get()\n                };\n              });\n              that.thead.add(that.lockedHeader).find(\"th\").each(function () {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                  filterMenu.destroy();\n                }\n\n                if (sortable) {\n                  sortable.destroy();\n                }\n\n                if (columnMenu) {\n                  columnMenu.destroy();\n                }\n              });\n            },\n            _attachCustomCommandsEvent: function () {\n              var that = this,\n                  columns = leafColumns(that.columns || []),\n                  command,\n                  idx,\n                  length;\n\n              for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                  attachCustomCommandEvent(that, that.wrapper, command);\n                }\n              }\n            },\n            _aria: function () {\n              var id = this.element.attr(\"id\") || \"aria\";\n\n              if (id) {\n                this._cellId = id + \"_active_cell\";\n              }\n            },\n            _element: function () {\n              var that = this,\n                  table = that.element;\n\n              if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                  table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                  table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                  table = $(\"<table />\").appendTo(that.element);\n                }\n              }\n\n              that.table = table.attr(\"role\", that._hasDetails() ? \"treegrid\" : \"grid\");\n\n              that._wrapper();\n            },\n            _createResizeHandle: function (container, th) {\n              var that = this;\n              var indicatorWidth = that.options.columnResizeHandleWidth;\n              var scrollable = that.options.scrollable;\n              var resizeHandle = that.resizeHandle;\n              var halfResizeHandle = indicatorWidth * 3 / 2;\n              var rtlCorrection = 0;\n              var headerWrap;\n              var ieCorrection;\n              var webkitCorrection;\n              var firefoxCorrection;\n              var leftMargin;\n              var invisibleSpace;\n              var leftBorderWidth;\n              var scrollLeft;\n              var left;\n              var top;\n\n              if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n              }\n\n              if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n              }\n\n              scrollLeft = kendo.scrollLeft(container);\n\n              if (isRtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                scrollLeft = scrollLeft * -1;\n              }\n\n              leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n              left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n              if (!isRtl) {\n                left += th[0].offsetWidth;\n              } else {\n                if (scrollable) {\n                  rtlCorrection = left <= scrollLeft ? halfResizeHandle : 0; // when shown on first column headers are misaligned due to the width of the resize handler\n\n                  headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                  invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n\n                  leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                  ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                  webkitCorrection = -rtlCorrection;\n                  firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n                  left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n              }\n\n              top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n              resizeHandle.css({\n                top: top,\n                //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n              }).data(\"th\", th).show();\n              resizeHandle.off(\"dblclick\" + NS).on(\"dblclick\" + NS, function () {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n              });\n            },\n            _positionColumnResizeHandle: function () {\n              var that = this,\n                  lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n              that.thead.add(lockedHead).on(\"mousemove\" + NS, \"tr:not(.k-filter-row) > th\", function (e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : e.which || e.button;\n                var th = $(this);\n\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                  return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                  //do not create a new resize handle if a mouse button is still pressed\n                  //this happens during resizing or before UserEvents trigger \"start\"\n                  return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                  // resizing multi-column headers is not supported\n                  return;\n                }\n\n                that._createResizeHandle(th.closest(\"div\"), th);\n              });\n            },\n            _resizeHandleDocumentClick: function (e) {\n              if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n              }\n\n              $(document).off(e);\n\n              this._resetResizeHandleHeader();\n\n              this._hideResizeHandle();\n            },\n            _resetResizeHandleHeader: function () {\n              var th;\n\n              if (!this.resizeHandle) {\n                return;\n              }\n\n              th = $(this.resizeHandle).data(\"th\");\n\n              if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n              }\n            },\n            _hideResizeHandle: function () {\n              if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\").removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                  this.resizeHandle.off(NS).remove();\n                  this.resizeHandle = null;\n                } else {\n                  this.resizeHandle.hide();\n                }\n              }\n            },\n            _positionColumnResizeHandleTouch: function () {\n              var that = this,\n                  lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n              that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function (e) {\n                  var th = $(e.target);\n                  e.preventDefault();\n\n                  if (that.resizeHandle) {\n                    that.resizeHandle.data(\"th\").removeClass(\"k-column-active\");\n\n                    that._resetResizeHandleHeader();\n                  }\n\n                  th.addClass(\"k-column-active\");\n                  th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).hide();\n                  th.find(DOT + ORDER_CLASS).hide();\n                  th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                  th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                  that._createResizeHandle(th.closest(\"div\"), th);\n\n                  if (!that._resizeHandleDocumentClickHandler) {\n                    that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                  }\n\n                  $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n              });\n            },\n            resizeColumn: function (column, columnWidth) {\n              var that = this;\n              var isLocked = !!column.locked;\n              var isHidden = !!column.hidden;\n              var options = this.options;\n              var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n              var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n              var contentTable = isLocked ? that.lockedTable : that.table;\n              var footer = that.footer || $();\n              var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n              var columnMinWidth = column.minResizableWidth || 10;\n              var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n              var col;\n\n              if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n              }\n\n              if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n              }\n\n              if (options.scrollable) {\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index).add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)).add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n              } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n              }\n\n              if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                  width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n\n                  if (width < 0) {\n                    width = columnWidth;\n                  }\n\n                  constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                  col.css('width', width);\n\n                  if (gridWidth) {\n                    if (constrain) {\n                      width = totalWidth - scrollbar * 2;\n                    } else {\n                      width = gridWidth + (columnWidth - column.width);\n                    }\n\n                    contentTable.add(header).add(footer).css('width', width);\n\n                    if (!isLocked) {\n                      that._footerWidth = width;\n                    }\n                  }\n                }\n\n                that._scrollVirtualWrapperOnColumnResize();\n              } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n              }\n\n              column.width = columnWidth;\n\n              that._applyLockedContainersWidth();\n\n              that._syncLockedContentHeight();\n\n              that._syncLockedHeaderHeight();\n\n              that._updateStickyColumns();\n            },\n            _resizable: function () {\n              var that = this,\n                  options = that.options,\n                  container,\n                  columnStart,\n                  columnWidth,\n                  columnMinWidth,\n                  gridWidth,\n                  isMobile = this._isMobile,\n                  scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                  isLocked,\n                  col,\n                  th;\n\n              if (options.resizable) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                  that._positionColumnResizeHandleTouch(container);\n                } else {\n                  that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                  that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                  handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                  hint: function (handle) {\n                    return $('<div class=\"k-grid-resize-indicator\" />').css({\n                      height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                    });\n                  },\n                  start: function (e) {\n                    th = $(e.currentTarget).data(\"th\");\n\n                    if (isMobile) {\n                      that._hideResizeHandle();\n                    }\n\n                    var header = th.closest(\"table\"),\n                        index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n                    isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n                    var contentTable = isLocked ? that.lockedTable : that.table,\n                        footer = that.footer || $();\n\n                    if (that.footer && that.lockedContent) {\n                      footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                    }\n\n                    cursor(that.wrapper, 'col-resize');\n\n                    if (options.scrollable) {\n                      col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index).add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)).add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                    } else {\n                      col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                    }\n\n                    var columns = $.map(that.columns, function (a) {\n                      return !a.hidden && (isLocked && a.locked || !isLocked && !a.locked) ? a : null;\n                    });\n                    columnStart = e.x.location;\n                    columnWidth = outerWidth(th);\n                    columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                    gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n                    // fix broken UI in Chrome38+\n\n                    if (browser.webkit) {\n                      that.wrapper.addClass(\"k-grid-column-resizing\");\n                    }\n                  },\n                  resize: function (e) {\n                    var rtlMultiplier = isRtl ? -1 : 1,\n                        currentWidth = columnWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n\n                    if (options.scrollable) {\n                      var footer;\n\n                      if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children(\"table\");\n                      } else if (that.footer) {\n                        footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                      }\n\n                      if (!footer || !footer[0]) {\n                        footer = $();\n                      }\n\n                      var header = th.closest(\"table\");\n                      var contentTable = isLocked ? that.lockedTable : that.table;\n                      var constrain = false;\n                      var totalWidth = that.wrapper.width() - scrollbar;\n                      var width = currentWidth;\n\n                      if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n\n                        if (width < 0) {\n                          width = currentWidth;\n                        }\n\n                        constrain = true;\n                      }\n\n                      if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n\n                        if (gridWidth) {\n                          if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                          } else {\n                            width = gridWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                          }\n\n                          contentTable.add(header).add(footer).css('width', width);\n\n                          if (!isLocked) {\n                            that._footerWidth = width;\n                          }\n                        }\n                      }\n\n                      that._scrollVirtualWrapperOnColumnResize();\n                    } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                      col.css('width', currentWidth);\n                    }\n                  },\n                  resizeend: function () {\n                    var newWidth = outerWidth(th),\n                        column,\n                        header;\n                    cursor(that.wrapper, \"\");\n\n                    if (browser.webkit) {\n                      that.wrapper.removeClass(\"k-grid-column-resizing\");\n                    }\n\n                    if (columnWidth != newWidth) {\n                      header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(\"tr\").first().add(that.thead.find(\"tr\").first()) : th.parent();\n                      var index = th.attr(kendo.attr(\"index\"));\n\n                      if (!index) {\n                        index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                      }\n\n                      column = leafColumns(that.columns)[index];\n                      column.width = newWidth;\n                      that.trigger(COLUMNRESIZE, {\n                        column: column,\n                        oldWidth: columnWidth,\n                        newWidth: newWidth\n                      });\n\n                      that._applyLockedContainersWidth();\n\n                      that._syncLockedContentHeight();\n\n                      that._syncLockedHeaderHeight();\n\n                      that._updateStickyColumns();\n                    }\n\n                    that._resetResizeHandleHeader();\n\n                    that._hideResizeHandle();\n\n                    th = null;\n                  }\n                });\n              }\n            },\n            _draggable: function () {\n              var that = this,\n                  reorderable = that.options.reorderable;\n\n              if (reorderable === true || reorderable && reorderable.columns) {\n                if (that._draggableInstance) {\n                  that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                  group: kendo.guid(),\n                  autoScroll: true,\n                  filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                  dragstart: function () {\n                    header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function (e) {\n                      if (that.virtualScrollable) {\n                        kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                      } else {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                      }\n                    });\n                  },\n                  dragend: function () {\n                    that._resetResizeHandleHeader();\n\n                    header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                  },\n                  drag: function () {\n                    that._hideResizeHandle();\n                  },\n                  hint: function (target) {\n                    var title = target.attr(kendo.attr(\"title\"));\n\n                    if (title) {\n                      title = kendo.htmlEncode(title);\n                    }\n\n                    return $('<div class=\"k-reorder-clue k-drag-clue\" />').html(title || target.attr(kendo.attr(\"field\")) || target.text()).prepend('<span class=\"k-icon k-drag-status k-i-cancel\"></span>');\n                  }\n                }).data(\"kendoDraggable\");\n              }\n            },\n            _reorderable: function () {\n              var that = this,\n                  reorderable = that.options.reorderable;\n\n              if (reorderable === true || reorderable && reorderable.columns) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                  that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                  draggable: that._draggableInstance,\n                  dropFilter: HEADERCELLS,\n                  dragOverContainers: function (sourceIndex, targetIndex) {\n                    var columns = flatColumnsInDomOrder(that.columns);\n                    return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                  },\n                  inSameContainer: function (e) {\n                    return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                  },\n                  change: function (e) {\n                    var columns = flatColumnsInDomOrder(that.columns);\n                    var column = columns[e.oldIndex];\n                    var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n                    that.trigger(COLUMNREORDER, {\n                      newIndex: newIndex,\n                      oldIndex: inArray(column, columns),\n                      column: column\n                    });\n                    that.reorderColumn(newIndex, column, e.position === \"before\");\n                  }\n                });\n              }\n            },\n            _reorderHeader: function (sources, target, before, container) {\n              var that = this;\n              var sourcePosition = columnPosition(sources[0], that.columns);\n              var destPosition = columnPosition(target, that.columns);\n              var action;\n              var ths;\n              var leafs = [];\n\n              for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                  leafs = leafs.concat(sources[idx].columns);\n                }\n              }\n\n              if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n              } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n              }\n\n              var sourceLockedColumns = lockedColumns(sources).length;\n              var targetLockedColumns = lockedColumns([target]).length;\n\n              if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                  action = \"prepend\";\n                  moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                  action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                  moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                  target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n\n                  if (target) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                      that._reorderHeader(leafs, target, before, that.thead);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                      that._reorderHeader(leafs, target, before, that.lockedHead);\n                    } else {\n                      that._reorderHeader(leafs, target, before);\n                    }\n                  }\n                }\n              } else if (sourceLockedColumns !== targetLockedColumns) {\n                // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n              }\n\n              reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n            _reorderContent: function (sources, destination, before) {\n              var that = this;\n              var lockedRows = $();\n              var source = sources[0];\n              var visibleSources = visibleColumns(sources);\n              var sourceIndex = inArray(source, leafColumns(that.columns));\n              var destIndex = inArray(destination, leafColumns(that.columns));\n              var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n              var colDest = inArray(destination, visibleLeafColumns(that.columns));\n              var lockedCount = lockedColumns(that.columns).length;\n              var isLocked = !!destination.locked;\n              var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n              var headerCol, footerCol, beforeVisibleColumn;\n              headerCol = footerCol = colDest;\n\n              if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                  headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                  beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                } else {\n                  if (isLocked) {\n                    colDest = that.lockedTable.find(\"colgroup\");\n                    headerCol = that.lockedHeader.find(\"colgroup\");\n                    footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                  } else {\n                    colDest = that.tbody.prev();\n                    headerCol = that.thead.prev();\n                    footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                  }\n                }\n              }\n\n              if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n              }\n\n              if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n              }\n\n              if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                  reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n              }\n\n              if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                  reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n              }\n\n              var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n\n              if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                  if (lockedCount <= sourceIndex) {\n                    updateColspan(that.lockedTable.find(\">tbody>tr.k-grouping-row\"), that.table.find(\">tbody>tr.k-grouping-row\"), sources.length);\n                  }\n                } else if (lockedCount > sourceIndex) {\n                  updateColspan(that.table.find(\">tbody>tr.k-grouping-row\"), that.lockedTable.find(\">tbody>tr.k-grouping-row\"), sources.length);\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n              }\n\n              for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n              }\n            },\n            _findClosestVisibleColumnIndex: function (columns, columnIndex) {\n              var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                  closestVisibleColumn = visibleColumns(columnsArray)[0];\n              return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n            _autoFitLeafColumn: function (leafIndex) {\n              this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n            _hasReorderableRows: function () {\n              return this._hasDragHandleColumn || this.options.reorderable && this.options.reorderable.rows;\n            },\n            _draggableRows: function () {\n              var that = this,\n                  selectable = that._checkBoxSelection || that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell;\n\n              if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n              }\n\n              that._draggableRowsInstance = that.tbody.kendoDraggable({\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function (target) {\n                  var hint = $('<div class=\"k-reorder-clue k-drag-clue\"><span class=\"k-icon k-drag-status k-i-cancel\"></span></div>');\n\n                  if (selectable && that.select().length > 1) {\n                    hint.append(\"<span>\" + that.select().length + \" \" + that.options.messages.itemsSelected + \"</span>\");\n                  } else {\n                    var clone = target.closest(ITEMROW).clone();\n                    clone.find(\"td.k-command-cell\").remove();\n                    clone.find(\"td\").each(function (index, elm) {\n                      hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                    });\n                  }\n\n                  return hint;\n                }\n              }).data(\"kendoDraggable\");\n            },\n            _reorderableRows: function () {\n              var that = this,\n                  selectable = that._checkBoxSelection || that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell;\n\n              if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n              }\n\n              that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function (sourceIndex, targetIndex) {\n                  var result = true,\n                      target = $(ITEMROW, that.content).eq(targetIndex);\n\n                  if (selectable) {\n                    result = !target.is(\".k-selected\");\n                  }\n\n                  return result;\n                },\n                inSameContainer: function (e) {\n                  if (selectable) {\n                    return !$(e.target).is(\".k-selected\");\n                  }\n\n                  return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"k-i-insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function (reorderDropCue, dropTarget) {\n                  var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                  reorderDropCue.css({\n                    transform: \"translate(0,-50%)\",\n                    left: firstCellLeft\n                  });\n                },\n                externalDraggable: function (e) {\n                  var draggable = e.draggable;\n\n                  if (draggable) {\n                    return draggable;\n                  }\n                },\n                change: function (e) {\n                  that._triggerRowRorder(e);\n                }\n              });\n            },\n            _triggerRowRorder: function (e) {\n              var that = this,\n                  args = {\n                newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                oldIndex: e.oldIndex\n              },\n                  row = e.element,\n                  selectable = that._checkBoxSelection || that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell;\n\n              if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                  rows: that.select()\n                });\n              } else {\n                args = extend(args, {\n                  row: row\n                });\n              }\n\n              if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n              }\n            },\n            reorderRows: function (rows, index) {\n              var that = this,\n                  dataSource = that.dataSource,\n                  rowsLength = that.tbody.children(ITEMROW).length,\n                  targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                  items = rows.toArray().map(function (row) {\n                return that.dataItem(row);\n              });\n\n              if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n              } else {\n                index = dataSource.indexOf(targetItem);\n              }\n\n              if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n              }\n            },\n            autoFitColumns: function (columns) {\n              var that = this;\n              columns = columns || that.columns;\n\n              for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                  that.autoFitColumns(column.columns);\n                } else {\n                  that.autoFitColumn(column);\n                }\n              }\n            },\n            autoFitColumn: function (column) {\n              var that = this,\n                  options = that.options,\n                  columns = that.columns,\n                  index,\n                  th,\n                  headerTable,\n                  leafCols,\n                  isLocked,\n                  visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                  col,\n                  minWidth,\n                  contentDiv,\n                  scrollLeft,\n                  notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                  notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                  menu,\n                  thWidth; //  retrieve the column object, depending on the method argument\n\n              if (typeof column == \"number\") {\n                column = columns[column];\n              } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function (item) {\n                  return item === column;\n                })[0];\n              } else {\n                column = grep(flatColumns(columns), function (item) {\n                  return item.field === column;\n                })[0];\n              }\n\n              if (!column || !isVisible(column)) {\n                return;\n              }\n\n              leafCols = leafColumns(columns);\n              minWidth = column.minResizableWidth;\n              index = inArray(column, leafCols);\n              isLocked = column.locked;\n\n              if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n              } else {\n                headerTable = that.thead.parent();\n              }\n\n              th = headerTable.find(\"[data-index='\" + index + \"']\");\n              menu = th.find('a.k-header-column-menu, a.k-grid-filter');\n              var contentTable = isLocked ? that.lockedTable : that.table,\n                  footer = that.footer || $();\n\n              if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n              }\n\n              var footerTable = footer.find(\"table\").first();\n\n              if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n              } // adjust column index, depending on previous hidden columns\n\n\n              for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                  break;\n                } else {\n                  if (leafCols[j].hidden) {\n                    index--;\n                  }\n                }\n              } // get col elements\n\n\n              if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index).add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index)).add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                  contentDiv = contentTable.parent();\n                  scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n              } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n              }\n\n              var tables = headerTable.add(contentTable).add(footerTable);\n\n              if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n              }\n\n              var oldColumnWidth = outerWidth(th); // reset the table and autofitted column widths\n              // if scrolling is disabled, we need some additional repainting of the table\n\n              col.width(\"\");\n              tables.css(\"table-layout\", \"fixed\");\n              col.width(\"auto\");\n              tables.addClass(\"k-autofitting\");\n              tables.css(\"table-layout\", \"\");\n              thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th); // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n\n              var newColumnWidth = Math.ceil(Math.max(thWidth, outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)), outerWidth(footerTable.find(\"tr\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)))) + 1;\n\n              if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n              }\n\n              col.width(newColumnWidth);\n              column.width = newColumnWidth;\n\n              if (browser.safari) {\n                th.css(\"white-space\", \"\");\n              } // if all visible columns have widths, the table needs a pixel width as well\n\n\n              if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                  colWidth = cols[idx].style.width;\n\n                  if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    totalWidth += parseInt(colWidth, 10);\n                  } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                    totalWidth += parseInt(cols.eq(idx).width(), 10);\n                  } else {\n                    totalWidth = 0;\n                    break;\n                  }\n                }\n\n                if (totalWidth) {\n                  tables.each(function () {\n                    this.style.width = totalWidth + \"px\";\n                  });\n                }\n              }\n\n              tables.removeClass(\"k-autofitting\");\n\n              if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n              }\n\n              that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n              });\n\n              that._applyLockedContainersWidth();\n\n              that._syncLockedContentHeight();\n\n              that._syncLockedHeaderHeight();\n\n              that._updateStickyColumns();\n            },\n            reorderColumn: function (destIndex, column, before) {\n              var that = this,\n                  parent = columnParent(column, that.columns),\n                  columns = parent ? parent.columns : that.columns,\n                  sourceIndex = inArray(column, columns),\n                  destColumn = columns[destIndex],\n                  virtualScroll = that.virtualScroll || {},\n                  lockChanged,\n                  isLocked = !!destColumn.locked,\n                  lockedCount = lockedColumns(that.columns).length,\n                  groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                return column.groupHeaderColumnTemplate;\n              });\n\n              if (sourceIndex === destIndex) {\n                return;\n              }\n\n              if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n              }\n\n              if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n              }\n\n              that._hideResizeHandle();\n\n              if (before === undefined) {\n                before = destIndex < sourceIndex;\n              }\n\n              var sourceColumns = [column];\n\n              that._reorderHeader(sourceColumns, destColumn, before);\n\n              if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n              }\n\n              if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n              }\n\n              if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n              }\n\n              that._reorderContent(sourceColumns, destColumn, before);\n\n              lockChanged = !!column.locked;\n              lockChanged = lockChanged != isLocked;\n              column.locked = isLocked;\n              columns.splice(before ? destIndex : destIndex + 1, 0, column);\n              columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n              that._updateLockedCols();\n\n              that._updateCols();\n\n              that._templates();\n\n              that._updateColumnCellIndex();\n\n              that._updateColumnSorters();\n\n              if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n              }\n\n              that._updateTablesWidth();\n\n              that._applyLockedContainersWidth();\n\n              that._syncLockedHeaderHeight();\n\n              that._syncLockedContentHeight();\n\n              that._updateFirstColumnClass();\n\n              that._updateStickyColumns();\n\n              if (virtualScroll.columns) {\n                that.refresh();\n              }\n\n              if (!lockChanged) {\n                return;\n              }\n\n              if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                  column: column\n                });\n              } else {\n                that.trigger(COLUMNUNLOCK, {\n                  column: column\n                });\n              }\n            },\n            _updateColumnCellIndex: function () {\n              var header;\n              var offset = 0;\n\n              if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n              }\n\n              updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n            lockColumn: function (column) {\n              var columns = this.columns;\n\n              if (typeof column == \"number\") {\n                column = columns[column];\n              } else {\n                column = grep(columns, function (item) {\n                  return item.field === column;\n                })[0];\n              }\n\n              if (!column || column.locked || column.hidden) {\n                return;\n              }\n\n              if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n              }\n\n              var index = lockedColumns(columns).length - 1;\n              this.reorderColumn(index, column, false);\n            },\n            unlockColumn: function (column) {\n              var columns = this.columns;\n\n              if (typeof column == \"number\") {\n                column = columns[column];\n              } else {\n                column = grep(columns, function (item) {\n                  return item.field === column;\n                })[0];\n              }\n\n              if (!column || !column.locked || column.hidden) {\n                return;\n              }\n\n              var index = lockedColumns(columns).length;\n              this.reorderColumn(index, column, true);\n            },\n            stickColumn: function (column) {\n              var columns = this.columns;\n\n              if (typeof column == \"number\") {\n                column = columns[column];\n              } else {\n                column = grep(columns, function (item) {\n                  return item.field === column;\n                })[0];\n              }\n\n              if (!column || column.sticky || column.hidden) {\n                return;\n              }\n\n              if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                  return;\n                }\n              }\n\n              column.sticky = true;\n\n              this._updateStickyColumns();\n            },\n            unstickColumn: function (column) {\n              var columns = this.columns;\n\n              if (typeof column == \"number\") {\n                column = columns[column];\n              } else {\n                column = grep(columns, function (item) {\n                  return item.field === column;\n                })[0];\n              }\n\n              if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n              }\n\n              this._removeStickyAttributes([column]);\n\n              this._removeStickyStyles(stickyColumns(columns));\n\n              column.sticky = false;\n\n              this._updateStickyColumns();\n\n              if (this._anyStickyColumns() === 0) {\n                this._templates();\n\n                if (this._hasFilterRow()) {\n                  this._updateStickyFilterCells();\n                }\n              }\n            },\n            cellIndex: function (td) {\n              var lockedColumnOffset = 0;\n\n              if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n              }\n\n              return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n            _modelForContainer: function (container) {\n              container = $(container);\n\n              if (!container.is(\"tr\") && this._editMode() !== \"popup\") {\n                container = container.closest(\"tr\");\n              }\n\n              var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n              return this.dataSource.getByUid(id);\n            },\n            _calculateColumnIndex: function (cell) {\n              var cellIndex = this.cellIndex(cell);\n              var virtualOffset = 0;\n\n              if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(\"tr\").find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = virtualOffset > 1 ? virtualOffset - 1 : 0;\n              }\n\n              return cellIndex + virtualOffset;\n            },\n            _editable: function () {\n              var that = this,\n                  editable = that.options.editable,\n                  handler = function () {\n                var target = activeElement(),\n                    cell = that._editContainer;\n\n                if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                  if (that.editable.end()) {\n                    that.closeCell();\n                  } else {\n                    that._scrollVirtualWrapper();\n                  }\n                }\n              };\n\n              if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n\n                if (mode === \"incell\") {\n                  that.table.add(that.lockedTable).on(\"mousedown\" + NS, NAVROW + \">\" + NAVCELL, function (e) {\n                    var target = $(e.target);\n\n                    if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                      e.preventDefault();\n                    }\n                  });\n\n                  if (editable.update !== false) {\n                    if (isMac) {\n                      that.wrapper.on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function (e) {\n                        // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                        // this is necessary for the \"focusout\" event to be fired\n                        $(e.target).trigger(\"focus\");\n                      }).on(CLICK + NS, \".k-edit-cell\", function (e) {\n                        if (!$(e.target).is(\"input\")) {\n                          $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                        }\n                      }).on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function (e) {\n                        var editContainer = that._editContainer;\n\n                        if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                          that._mousedownOnEditCell = true;\n                        } else {\n                          that._mousedownOnEditCell = false;\n                        }\n                      });\n                    }\n\n                    that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                      filter: \"tr:not(.k-grouping-row) > td\",\n                      allowSelection: true,\n                      tap: function (e) {\n                        var td = $(e.target),\n                            isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n                        that._mousedownOnEditCell = false;\n\n                        if (td.hasClass(\"k-hierarchy-cell\") || td.hasClass(\"k-detail-cell\") || td.hasClass(\"k-group-cell\") || td.hasClass(\"k-edit-cell\") || td.has(\".k-grid-delete\").length || td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell || $(e.target).is(\":input\")) {\n                          return;\n                        }\n\n                        if (that.editable) {\n                          if (that.editable.end()) {\n                            $(activeElement()).trigger(\"blur\");\n                            that.closeCell();\n                            that.editCell(td);\n                          } else {\n                            that._scrollVirtualWrapper();\n                          }\n                        } else {\n                          that.editCell(td);\n                        }\n                      }\n                    });\n                    that.wrapper.on(\"focusin\" + NS, function () {\n                      // fix focus issue in IE\n                      if (!$.contains(this, activeElement())) {\n                        clearTimeout(that.timer);\n                        that.timer = null;\n                      }\n                    }).on(\"focusout\" + NS, function (e) {\n                      var shouldCloseCell = true;\n\n                      if (isMac && that._mousedownOnEditCell || that._virtualColScroll) {\n                        shouldCloseCell = false;\n                      }\n\n                      that._mousedownOnEditCell = false;\n\n                      if (shouldCloseCell) {\n                        that.timer = setTimeout(function () {\n                          handler(e);\n                        }, 1);\n                      }\n                    });\n                  }\n                } else {\n                  if (editable.update !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit\", function (e) {\n                      var element = $(this);\n\n                      if (!that._belongsToGrid(element)) {\n                        return;\n                      }\n\n                      e.preventDefault();\n                      that.editRow(element.closest(\"tr\"));\n                    });\n\n                    if (that._isVirtualInlineEditable()) {\n                      that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function () {\n                        if (that.editable && !that.editable.end()) {\n                          that._scrollVirtualWrapper();\n                        }\n                      });\n                    }\n                  }\n                }\n\n                if (editable.destroy !== false) {\n                  that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete\", function (e) {\n                    var element = $(this);\n\n                    if (!that._belongsToGrid(element)) {\n                      return;\n                    }\n\n                    e.preventDefault();\n                    e.stopPropagation();\n                    that.removeRow(element.closest(\"tr\"));\n                  });\n                } else {\n                  //Required for the MVC server wrapper delete button\n                  that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete\", function (e) {\n                    if (!that._belongsToGrid($(this))) {\n                      return;\n                    }\n\n                    e.stopPropagation();\n\n                    if (!that._confirmation()) {\n                      e.preventDefault();\n                    }\n                  });\n                }\n              }\n            },\n            editCell: function (cell) {\n              cell = $(cell);\n\n              var that = this,\n                  column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                  model = that._modelForContainer(cell);\n\n              that.closeCell();\n\n              if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, {\n                  model: model\n                })) {\n                  return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                  that._clearEditableState();\n                }\n\n                that.editable = cell.addClass(\"k-edit-cell\").kendoEditable({\n                  fields: editField(column),\n                  model: model,\n                  target: that,\n                  change: function (e) {\n                    if (that.trigger(SAVE, {\n                      values: e.values,\n                      container: cell,\n                      model: model\n                    })) {\n                      e.preventDefault();\n                    }\n                  },\n                  skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n                }).data(\"kendoEditable\");\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                  adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n\n                  that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, {\n                  container: cell,\n                  model: model\n                });\n              }\n            },\n            _adjustLockedHorizontalScrollBar: function () {\n              var table = this.table,\n                  content = table.parent();\n              var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n              this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n            _syncLockedScroll: function () {\n              this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n\n              if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n              }\n            },\n            _syncLockedContentHeight: function () {\n              if (this.lockedTable) {\n                if (!this.touchScroller) {\n                  this._adjustLockedHorizontalScrollBar();\n                }\n\n                this._adjustRowsHeight(this.table, this.lockedTable);\n              }\n            },\n            _syncLockedHeaderHeight: function () {\n              if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n              }\n            },\n            _syncLockedFooterHeight: function () {\n              if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n              }\n            },\n            _destroyEditable: function () {\n              var that = this;\n\n              var destroy = function () {\n                if (that.editable) {\n                  var container = that.editView ? that.editView.element : that._editContainer;\n\n                  var window = that._editContainer.data(\"kendoWindow\");\n\n                  if (container) {\n                    container.off(CLICK + NS, \".k-grid-cancel\", that._editCancelClickHandler);\n                    container.off(CLICK + NS, \".k-grid-update\", that._editUpdateClickHandler);\n                  }\n\n                  that._detachModelChange();\n\n                  that.editable.destroy();\n                  that.editable = null;\n\n                  if (window) {\n                    window.destroy();\n                  }\n\n                  that._editContainer = null;\n\n                  that._destroyEditView();\n\n                  that._editableIsClosing = null;\n                }\n              };\n\n              if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                  if (that._editableIsClosing) {\n                    that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                  } else {\n                    that._editableIsClosing = true;\n\n                    that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                  }\n                } else {\n                  destroy();\n                }\n              }\n\n              if (that._confirmDialog) {\n                that._confirmDialog.close();\n\n                that._confirmDialog.destroy();\n\n                that._confirmDialog = null;\n              }\n            },\n            _destroyEditView: function () {\n              if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n              }\n            },\n            _attachModelChange: function (model) {\n              var that = this;\n\n              that._modelChangeHandler = function (e) {\n                that._modelChange({\n                  field: e.field,\n                  model: this\n                });\n              };\n\n              model.bind(\"change\", that._modelChangeHandler);\n            },\n            _detachModelChange: function () {\n              var that = this,\n                  container = that._editContainer,\n                  model = that._modelForContainer(container);\n\n              if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n              }\n            },\n            closeCell: function (isCancel) {\n              var that = this,\n                  cell = that._editContainer,\n                  column,\n                  tr,\n                  model;\n\n              if (!cell) {\n                return;\n              }\n\n              model = that._modelForContainer(cell);\n\n              if (isCancel && that.trigger(\"cancel\", {\n                container: cell,\n                model: model\n              })) {\n                return;\n              }\n\n              that.trigger(CELLCLOSE, {\n                type: isCancel ? \"cancel\" : \"save\",\n                model: model,\n                container: cell\n              });\n              cell.removeClass(\"k-edit-cell\");\n              column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n              tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n              if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n              }\n\n              that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n\n              that._displayCell(cell, column, model);\n\n              if (that._shouldClearEditableState) {\n                that._clearEditableState();\n              }\n\n              that.trigger(\"itemChange\", {\n                item: tr,\n                data: model,\n                ns: ui\n              });\n\n              if (that.lockedContent) {\n                adjustRowHeight(tr.css(\"height\", \"\")[0], that._relatedRow(tr).css(\"height\", \"\")[0]);\n              }\n            },\n            _displayCell: function (cell, column, dataItem) {\n              var that = this,\n                  state = {\n                storage: {},\n                count: 0\n              },\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n              if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n              }\n\n              cell.empty().html(tmpl(dataItem));\n              that.angular(\"compile\", function () {\n                return {\n                  elements: cell,\n                  data: [{\n                    dataItem: dataItem\n                  }]\n                };\n              });\n            },\n            removeRow: function (row) {\n              if (!this._confirmation(row)) {\n                return;\n              }\n\n              this._removeRow(row);\n            },\n            _removeRow: function (row) {\n              var that = this,\n                  model,\n                  modelId,\n                  key,\n                  schema,\n                  mode = that._editMode();\n\n              if (mode !== \"incell\") {\n                that.cancelRow();\n              }\n\n              row = $(row);\n\n              if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n              }\n\n              row = row.hide();\n\n              if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n              }\n\n              model = that._modelForContainer(row);\n\n              if (model && !that.trigger(REMOVE, {\n                row: row,\n                model: model\n              })) {\n                schema = that.dataSource.options.schema;\n\n                if (that._selectedIds && schema && schema.model) {\n                  modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                  key = model[modelId];\n                  delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                  that.dataSource.sync();\n                }\n              } else if (mode === \"incell\") {\n                that._destroyEditable();\n              }\n            },\n            _editMode: function () {\n              var mode = \"incell\",\n                  editable = this.options.editable;\n\n              if (editable !== true) {\n                if (typeof editable == \"string\") {\n                  mode = editable;\n                } else {\n                  mode = editable.mode || mode;\n                }\n              }\n\n              return mode;\n            },\n            editRow: function (row) {\n              var model;\n              var that = this;\n\n              if (row instanceof ObservableObject) {\n                model = row;\n              } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n              }\n\n              var mode = that._editMode();\n\n              var container;\n              that.cancelRow();\n\n              if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                  that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                  that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                  $(row).children(DATA_CELL).each(function () {\n                    var cell = $(this);\n\n                    var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    model = that._modelForContainer(cell);\n\n                    if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                      that.editCell(cell);\n                      return false;\n                    }\n                  });\n                }\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                  if (!this._editCancelClickHandler) {\n                    this._editCancelClickHandler = this._editCancelClick.bind(this);\n                  }\n\n                  container.on(CLICK + NS, \".k-grid-cancel\", this._editCancelClickHandler);\n\n                  if (!this._editUpdateClickHandler) {\n                    this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                  }\n\n                  container.on(CLICK + NS, \".k-grid-update\", this._editUpdateClickHandler);\n                }\n              }\n            },\n            _editUpdateClick: function (e) {\n              e.preventDefault();\n              e.stopPropagation();\n              this.saveRow();\n            },\n            _editCancelClick: function (e) {\n              var that = this;\n              var navigatable = that.options.navigatable;\n              var model = that.editable.options.model;\n              var container = that.editView ? that.editView.element : that._editContainer;\n              e.preventDefault();\n              e.stopPropagation();\n\n              if (that.trigger(\"cancel\", {\n                container: container,\n                model: model\n              })) {\n                return;\n              }\n\n              var currentIndex = that.items().index($(that.current()).parent());\n              that.cancelRow();\n\n              if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n\n                focusTable(that.table, true);\n              }\n            },\n            _editFields: function (columns, model) {\n              var fields = [];\n              var column;\n\n              for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n\n                if (column.selectable || column.command) {\n                  continue;\n                }\n\n                if (isColumnEditable(column, model)) {\n                  fields.push(editField(column));\n                }\n              }\n\n              return fields;\n            },\n            _createPopupEditor: function (model) {\n              var that = this;\n              var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n              var column;\n              var command;\n              var idx;\n              var length;\n              var tmpl;\n              var updateText;\n              var cancelText;\n              var updateIconClass;\n              var cancelIconClass;\n              var tempCommand;\n              var columns = leafColumns(that.columns);\n              var attr;\n              var editMenuGuid = kendo.guid();\n              var editable = that.options.editable;\n              var template = editable.template;\n              var options = isPlainObject(editable) ? editable.window : {};\n              var settings = extend({}, kendo.Template, that.options.templateSettings);\n              var state;\n              var container;\n              var buttonsHTML;\n\n              if (that.trigger(BEFOREEDIT, {\n                model: model\n              })) {\n                return;\n              }\n\n              options = options || {};\n\n              if (template) {\n                if (typeof template === STRING) {\n                  template = kendo.unescape(template);\n                }\n\n                html += kendo.template(template, settings)(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                  column = columns[idx];\n\n                  if (column.command) {\n                    tempCommand = getCommand(column.command, \"edit\");\n\n                    if (tempCommand) {\n                      command = tempCommand;\n                    }\n                  }\n                }\n              } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                  column = columns[idx];\n\n                  if (column.selectable) {\n                    continue;\n                  }\n\n                  if (!column.command) {\n                    if (that._isMobile) {\n                      html += '<li class=\"k-item k-listgroup-item\">';\n\n                      if (isColumnEditable(column, model)) {\n                        html += '<label class=\"k-label k-listgroup-form-row\">';\n                        html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                        html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                        html += '</label>';\n                      } else {\n                        state = {\n                          storage: {},\n                          count: 0\n                        };\n                        tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                        if (state.count > 0) {\n                          tmpl = tmpl.bind(state.storage);\n                        }\n\n                        html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                        html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                        html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                        html += '</label>';\n                      }\n\n                      html += \"</li>\";\n                    }\n                  } else if (column.command) {\n                    tempCommand = getCommand(column.command, \"edit\");\n\n                    if (tempCommand) {\n                      command = tempCommand;\n                    }\n                  }\n                }\n              }\n\n              if (command) {\n                if (isPlainObject(command)) {\n                  if (isPlainObject(command.text)) {\n                    updateText = command.text.update;\n                    cancelText = command.text.cancel;\n                  }\n\n                  if (isPlainObject(command.iconClass)) {\n                    updateIconClass = command.iconClass.update;\n                    cancelIconClass = command.iconClass.cancel;\n                  }\n\n                  if (command.attr) {\n                    attr = command.attr;\n                  }\n                }\n              }\n\n              if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-end\">';\n                buttonsHTML += that._createButton({\n                  name: \"update\",\n                  text: updateText,\n                  attr: attr,\n                  iconClass: updateIconClass\n                }) + that._createButton({\n                  name: \"canceledit\",\n                  text: cancelText,\n                  attr: attr,\n                  iconClass: cancelIconClass\n                });\n                buttonsHTML += '</div>';\n                html += template ? buttonsHTML + '</div>' : '</div>';\n                container = that._editContainer = $(html).appendTo(that.wrapper).eq(0).kendoWindow(extend({\n                  modal: true,\n                  resizable: false,\n                  draggable: true,\n                  title: that.options.messages.commands.edit || \"Edit\",\n                  visible: false,\n                  close: function (e) {\n                    if (e.userTriggered) {\n                      //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                      e.sender.element.trigger(\"focus\");\n\n                      if (that.trigger(\"cancel\", {\n                        container: container,\n                        model: model\n                      })) {\n                        e.preventDefault();\n                        return;\n                      }\n\n                      var currentIndex = that.items().index($(that.current()).parent());\n                      that._editableIsClosing = true;\n                      that.cancelRow();\n\n                      if (that.options.navigatable) {\n                        that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n\n                        focusTable(that.table, true);\n                      }\n                    }\n                  }\n                }, options));\n              } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append('<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' + '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel\" title=\"#=messages.cancel#\" ' + 'aria-label=\"#=messages.cancel#\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + (that.options.messages.commands.edit || \"Edit\") + '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-update\" title=\"#=messages.done#\" ' + 'aria-label=\"#=messages.done#\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>' + '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' + html + '</div>' + '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n              }\n\n              if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                  items: that._editFields(columns, model),\n                  buttonsTemplate: \"\",\n                  formData: model\n                }).editable;\n\n                that._editContainer.append(buttonsHTML);\n              } else {\n                that.editable = that._editContainer.kendoEditable({\n                  fields: that._isMobile ? that._editFields(columns, model) : null,\n                  model: model,\n                  clearContainer: false,\n                  target: that\n                }).data(\"kendoEditable\");\n              }\n\n              that._openPopUpEditor();\n\n              that.trigger(EDIT, {\n                container: container,\n                model: model\n              });\n            },\n            _openPopUpEditor: function () {\n              var that = this;\n              var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n              var windowOptions = (that.options.editable || {}).window || {};\n\n              if (!this._isMobile) {\n                if (windowEditor) {\n                  if (!windowOptions.position) {\n                    windowEditor.center();\n                  }\n\n                  windowEditor.open();\n                }\n              } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n              }\n            },\n            _createInlineEditor: function (row, model) {\n              var that = this;\n              var column;\n              var cell;\n              var command;\n              var fields = [];\n\n              if (that.trigger(BEFOREEDIT, {\n                model: model\n              })) {\n                return;\n              }\n\n              if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n              }\n\n              row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function () {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                  fields.push(editField(column));\n                  cell.attr(kendo.attr(\"container-for\"), column.field);\n                  cell.empty();\n                } else if (column.command) {\n                  command = getCommand(column.command, \"edit\");\n\n                  if (command) {\n                    cell.empty();\n                    var updateText, cancelText, updateIconClass, cancelIconClass, attr;\n\n                    if (isPlainObject(command)) {\n                      if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                      }\n\n                      if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                      }\n\n                      if (command.attr) {\n                        attr = command.attr;\n                      }\n                    }\n\n                    $(that._createButton({\n                      name: \"update\",\n                      text: updateText,\n                      attr: attr,\n                      iconClass: updateIconClass\n                    }) + that._createButton({\n                      name: \"canceledit\",\n                      text: cancelText,\n                      attr: attr,\n                      iconClass: cancelIconClass\n                    })).appendTo(cell);\n                  }\n                }\n              });\n              that._editContainer = row;\n\n              that._editContainer.addClass(\"k-grid-edit-row\");\n\n              if (that._shouldClearEditableState) {\n                that._clearEditableState();\n              }\n\n              that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                model: model,\n                skipFocus: that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false) || that._hasVirtualColumns(),\n                clearContainer: false\n              });\n\n              if (row.length > 1) {\n                adjustRowHeight(row[0], row[1]);\n\n                that._applyLockedContainersWidth();\n              }\n\n              that.trigger(EDIT, {\n                container: row,\n                model: model\n              });\n            },\n            cancelRow: function (notify) {\n              var that = this,\n                  container = that._editContainer,\n                  model;\n\n              if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || notify && that.trigger(\"cancel\", {\n                  container: container,\n                  model: model\n                })) {\n                  return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                  that._displayRow(container);\n                } else {\n                  that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n              }\n            },\n            saveRow: function () {\n              var that = this;\n              var container = this._editContainer;\n\n              var model = this._modelForContainer(container);\n\n              var deferred = $.Deferred();\n              var valid;\n\n              if (!container || !this.editable) {\n                return deferred.resolve().promise();\n              }\n\n              valid = that.editable && that.editable.end();\n\n              if (!valid || this.trigger(SAVE, {\n                container: container,\n                model: model\n              })) {\n                if (!valid) {\n                  that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n              }\n\n              that._clearEditableState();\n\n              return this.dataSource.sync();\n            },\n            _displayRow: function (row) {\n              var that = this,\n                  model = that._modelForContainer(row),\n                  related,\n                  newRow,\n                  nextRow,\n                  isSelected = row.hasClass(\"k-selected\"),\n                  isAlt = row.hasClass(\"k-alt\");\n\n              if (model) {\n                if (that.lockedContent) {\n                  related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n\n                  that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                that.angular(\"cleanup\", function () {\n                  return {\n                    elements: row.get()\n                  };\n                });\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n\n                if (!row.is(\":visible\")) {\n                  newRow.hide();\n                }\n\n                row.replaceWith(newRow);\n                that.trigger(\"itemChange\", {\n                  item: newRow,\n                  data: model,\n                  ns: ui\n                });\n\n                if (related && related.length) {\n                  that.trigger(\"itemChange\", {\n                    item: related,\n                    data: model,\n                    ns: ui\n                  });\n                }\n\n                var angularElements = newRow;\n                var angularData = [{\n                  dataItem: model\n                }];\n\n                if (related && related.length) {\n                  angularElements = newRow.add(related);\n                  angularData.push({\n                    dataItem: model\n                  });\n                }\n\n                that.angular(\"compile\", function () {\n                  return {\n                    elements: angularElements.get(),\n                    data: angularData\n                  };\n                });\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                  that.select(newRow.add(related));\n                }\n\n                if (related) {\n                  adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                  newRow.find(\".k-hierarchy-cell .k-icon\").removeClass(\"k-i-expand\").addClass(\"k-i-collapse\");\n                }\n              }\n            },\n            _showMessage: function (messages, row) {\n              var that = this;\n\n              if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n              }\n\n              var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                  preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                  okText: messages.confirmDelete,\n                  cancel: messages.cancelDelete\n                },\n                open: function () {\n                  if (that.content) {\n                    that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                    that.content.css(OVERFLOW, HIDDEN);\n                  }\n                },\n                close: function () {\n                  if (that.content) {\n                    that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                  }\n                }\n              });\n              confirmDialog.result.done(function () {\n                that._removeRow(row);\n              }).fail(function () {\n                var confirmDialog = that._confirmDialog;\n\n                if (confirmDialog) {\n                  confirmDialog.close();\n                  confirmDialog.destroy();\n                }\n              });\n              return false;\n            },\n            _confirmation: function (row) {\n              var that = this,\n                  editable = that.options.editable,\n                  confirmation = editable === true || typeof editable === STRING ? that.options.messages.editable.confirmation : editable.confirmation;\n\n              if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n              }\n\n              if (confirmation !== false && confirmation != null) {\n                if (typeof confirmation === FUNCTION) {\n                  confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                  confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                  cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                  title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                }, row);\n              }\n\n              return true;\n            },\n            cancelChanges: function () {\n              var that = this;\n              that.dataSource.cancelChanges();\n\n              if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function () {\n                  that.virtualScrollable.scrollToTop();\n                });\n              }\n            },\n            saveChanges: function () {\n              var that = this;\n              var valid = that.editable && that.editable.end();\n\n              if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n              } else if (!valid) {\n                that._scrollVirtualWrapper();\n              }\n            },\n            addRow: function () {\n              var that = this,\n                  index,\n                  dataSource = that.dataSource,\n                  mode = that._editMode(),\n                  createAt = that.options.editable.createAt || \"\",\n                  pageSize = dataSource.pageSize(),\n                  view = dataSource.view() || [];\n\n              var createAtBottom = createAt.toLowerCase() === BOTTOM;\n              var model;\n\n              var virtualEditable = that._isVirtualEditable();\n\n              if (that.editable && that.editable.end() || !that.editable) {\n                if (mode != \"incell\") {\n                  that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                  index += view.length;\n\n                  if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                    index -= 1;\n                  }\n                }\n\n                if (index < 0) {\n                  if (dataSource.page() > dataSource.totalPages()) {\n                    index = (dataSource.page() - 1) * pageSize;\n                  } else {\n                    index = 0;\n                  }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                  that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                  that._virtualAddRow();\n                } else {\n                  model = dataSource.insert(index, {});\n\n                  that._editModel(model);\n                }\n              } else {\n                that._scrollVirtualWrapper();\n              }\n            },\n            _editModel: function (model) {\n              var that = this;\n              var createAt = that.options.editable.createAt || \"\";\n\n              var mode = that._editMode();\n\n              if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                  that.editRow(row);\n                } else if (mode === \"popup\") {\n                  that.editRow(model);\n                } else if (cell.length) {\n                  that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                  //scroll the containers to the bottom\n                  that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n              }\n            },\n            _virtualAddRow: function () {\n              var that = this;\n              var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n              that._clearEditableState();\n\n              if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n              } else {\n                that._virtualAddRowAtTop();\n              }\n            },\n            _virtualAddRowAtTop: function () {\n              var that = this;\n              var dataSource = that.dataSource;\n              var virtualScrollable = that.virtualScrollable;\n              var model;\n\n              if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n\n                that._editModel(model);\n\n                virtualScrollable.scrollToTop();\n              } else {\n                that._virtualPageToTop(function () {\n                  model = dataSource.insert(0, {});\n\n                  that._editModel(model);\n\n                  virtualScrollable.scrollToTop();\n                });\n              }\n            },\n            _virtualAddRowAtBottom: function () {\n              var that = this;\n              var dataSource = that.dataSource;\n              var virtualScrollable = that.virtualScrollable;\n              var index = dataSource.total();\n              var model;\n\n              if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function () {\n                  that._editModel(model);\n\n                  virtualScrollable.scrollToBottom();\n                });\n              } else {\n                that._virtualPageToBottom(function () {\n                  model = dataSource.insert(index, {});\n\n                  that._editModel(model);\n\n                  virtualScrollable.scrollToBottom();\n                });\n              }\n            },\n            _virtualPageToTop: function (callback) {\n              var that = this;\n\n              that._virtualPage(0, that.dataSource.take(), function () {\n                callback();\n              });\n            },\n            _virtualPageToBottom: function (callback) {\n              var that = this;\n              var dataSource = that.dataSource;\n              var take = dataSource.take();\n              var total = dataSource.total();\n              var skip = total > take ? total - take : 0;\n\n              that._virtualPage(skip, take, function () {\n                callback();\n              });\n            },\n            _virtualPage: function (skip, take, callback) {\n              var that = this;\n\n              if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n\n                that.virtualScrollable._page(skip, take, callback);\n              }\n            },\n            _firstEditableColumnIndex: function (container) {\n              var that = this,\n                  column,\n                  columns = leafColumns(that.columns),\n                  idx,\n                  length,\n                  model = that._modelForContainer(container);\n\n              for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                  return idx;\n                }\n              }\n\n              return -1;\n            },\n            _toolbar: function () {\n              var that = this,\n                  wrapper = that.wrapper,\n                  toolbar = that.options.toolbar,\n                  editable = that.options.editable,\n                  container;\n\n              if (toolbar) {\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                  if (!isFunction(toolbar)) {\n                    toolbar = typeof toolbar === STRING ? toolbar : that._toolbarTmpl(toolbar).replace(templateHashRegExp, \"\\\\#\");\n                    toolbar = kendo.template(toolbar).bind(that);\n                  }\n\n                  container = $('<div class=\"k-toolbar k-grid-toolbar\" />').html(toolbar({})).prependTo(wrapper);\n                  that.angular(\"compile\", function () {\n                    return {\n                      elements: container.get()\n                    };\n                  });\n                }\n\n                if (editable && editable.create !== false) {\n                  container.on(CLICK + NS, \".k-grid-add\", function (e) {\n                    e.preventDefault();\n                    that.addRow();\n                  }).on(CLICK + NS, \".k-grid-cancel-changes\", function (e) {\n                    e.preventDefault();\n                    that.cancelChanges();\n                  }).on(CLICK + NS, \".k-grid-save-changes\", function (e) {\n                    e.preventDefault();\n                    that.saveChanges();\n                  });\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", function (e) {\n                  e.preventDefault();\n                  that.saveAsExcel();\n                });\n                container.on(CLICK + NS, \".k-grid-pdf\", function (e) {\n                  e.preventDefault();\n                  var promise = that.saveAsPDF();\n\n                  if (promise) {\n                    promise.done(function () {\n                      that._pdfInitialized = false;\n                    });\n                  }\n                });\n                container.on(INPUT + NS, \".k-grid-search input\", function (e) {\n                  var input = e.currentTarget;\n                  clearTimeout(that._searchTimeOut);\n                  that._searchTimeOut = setTimeout(function () {\n                    that._searchTimeOut = null;\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = {\n                      filters: [],\n                      logic: \"or\"\n                    };\n                    var value = input.value;\n\n                    if (!searchFields) {\n                      searchFields = getColumnsFields(options.columns);\n                    }\n\n                    if (that.dataSource.options.endless) {\n                      that.dataSource.options.endless = null;\n                      that._endlessPageSize = that.dataSource.options.pageSize;\n                    }\n\n                    if (value) {\n                      for (var i = 0; i < searchFields.length; i++) {\n                        that._pushExpression(expression.filters, searchFields[i], value);\n                      }\n                    } else {\n                      expression = {};\n                    }\n\n                    that.dataSource.filter(expression);\n                  }, 300);\n                });\n              }\n            },\n            _pushExpression: function (filters, field, value) {\n              var that = this,\n                  isServerFiltering = that.dataSource.options.serverFiltering,\n                  defaultOperators = {\n                string: \"contains\",\n                number: \"gte\",\n                date: \"gte\",\n                enums: \"eq\",\n                boolean: \"eq\"\n              },\n                  name = field.name || field,\n                  operator = field.operator,\n                  modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                  fieldInfo = modelInfo && modelInfo[name],\n                  parseFn = fieldInfo && fieldInfo.parse,\n                  expression = {\n                field: name,\n                operator: operator || defaultOperators.string,\n                value: value\n              };\n\n              if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                  operator: operator || defaultOperators[fieldInfo.type],\n                  value: parseFn(value)\n                });\n              }\n\n              if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n              }\n\n              filters.push(expression);\n            },\n            _toolbarTmpl: function (commands) {\n              var that = this,\n                  idx,\n                  length,\n                  html = \"\",\n                  command,\n                  searchText = \"\",\n                  messages = that.options.messages.commands;\n\n              if (isArray(commands)) {\n                for (idx = 0, length = commands.length; idx < length; idx++) {\n                  command = typeof commands[idx] === 'string' ? commands[idx].toLowerCase() : (commands[idx].name || \"\").toLowerCase();\n\n                  if (command === \"search\") {\n                    if (typeof commands[idx] !== 'string') {\n                      searchText = commands[idx].text;\n                    }\n\n                    searchText = searchText || messages.search;\n                    html += \"<span class='k-spacer'></span>\";\n                    html += \"<span class='k-searchbox k-input k-input-md k-rounded-md k-input-solid k-grid-search'>\";\n                    html += \"<span class='k-input-icon k-icon k-i-search'></span>\";\n                    html += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' class='k-input-inner' />\";\n                    html += \"</span>\";\n                  } else {\n                    html += that._createButton(commands[idx]);\n                  }\n                }\n              }\n\n              return html;\n            },\n            _createButton: function (command) {\n              var button,\n                  template = command.template || COMMANDBUTTONTMPL,\n                  commandName = typeof command === STRING ? command : command.name || command.text,\n                  className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                  options = {\n                className: className,\n                text: commandName,\n                attr: \"\",\n                iconClass: \"\"\n              },\n                  messages = this.options.messages.commands,\n                  attributeClassMatch;\n\n              if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n              }\n\n              if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                  command.className += \" \" + options.className;\n                } else if (command.className === undefined) {\n                  command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                  command.className = command.className.replace(\"k-primary\", \"\");\n                  command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                  command = extend(true, {}, command);\n                  command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                  command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                  if (isPlainObject(command.attr)) {\n                    command.attr = stringifyAttributes(command.attr);\n                  }\n\n                  if (typeof command.attr === STRING) {\n                    attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                    if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                      command.className += \" \" + attributeClassMatch[1];\n                    }\n                  }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], {\n                  text: messages[commandName]\n                }, command);\n              } else {\n                options = extend(true, options, defaultCommands[commandName], {\n                  text: messages[commandName]\n                });\n              }\n\n              button = kendo.template(template)(options);\n\n              if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n              } else {\n                return button;\n              }\n            },\n            _hasFooters: function () {\n              return !!this.footerTemplate || !!this.groupFooterTemplate || this.footer && this.footer.length > 0 || this.wrapper.find(\".k-grid-footer\").length > 0;\n            },\n            _groupable: function () {\n              var that = this;\n\n              if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n              } else {\n                that._groupableClickHandler = function (e) {\n                  var element = $(this),\n                      groupRow = element.closest(\"tr\");\n                  var group = that._groupRows ? that._groupRows[that.wrapper.find(\".k-grouping-row\").index(groupRow)] : {};\n\n                  if (element.hasClass('k-i-collapse')) {\n                    if (!that.trigger(\"groupCollapse\", {\n                      group: group,\n                      element: groupRow\n                    })) {\n                      that.collapseGroup(groupRow);\n                    }\n                  } else {\n                    if (!that.trigger(\"groupExpand\", {\n                      group: group,\n                      element: groupRow\n                    })) {\n                      that.expandGroup(groupRow);\n                    }\n                  }\n\n                  e.preventDefault();\n                  e.stopPropagation();\n                };\n              }\n\n              if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse\", that._groupableClickHandler);\n              } else {\n                that.table.on(CLICK + NS, \".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse\", that._groupableClickHandler);\n              }\n\n              that._attachGroupable();\n            },\n            _attachGroupable: function () {\n              var that = this,\n                  wrapper = that.wrapper,\n                  groupable = that.options.groupable,\n                  draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                  filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n              if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                  $(\"<div>&nbsp;</div>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                  that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                  wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", \"none\");\n                  wrapper.find(filter).css(\"touch-action\", \"none\");\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                  draggable: that._draggableInstance,\n                  groupContainer: \">div.k-grouping-header\",\n                  dataSource: that.dataSource,\n                  draggableElements: filter,\n                  filter: filter,\n                  allowDrag: that.options.reorderable,\n                  change: function (e) {\n                    if (that.trigger(\"group\", {\n                      groups: e.groups\n                    })) {\n                      e.preventDefault();\n                    } else {\n                      that._clearEditableState();\n\n                      if (that.dataSource.options.endless) {\n                        that._resetEndless();\n                      }\n                    }\n                  }\n                }));\n\n                that._addGroupableOptionsToHeader();\n              }\n            },\n            _resetEndless: function () {\n              var that = this;\n              that.dataSource.options.endless = null;\n              that._endlessPageSize = that.dataSource.options.pageSize;\n              that.dataSource._skip = 0;\n              that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n              that.dataSource._page = 1;\n            },\n            _addGroupableOptionsToHeader: function () {\n              var that = this;\n              var columns = flatColumns(that.columns);\n              var columnFieldMap = {};\n              var field = \"\";\n\n              var headerCells = that._headerCells();\n\n              var cellFieldAttr = \"\";\n              var headerCell;\n              var columnOptions;\n              var i;\n\n              for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n              }\n\n              for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                  headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n              }\n            },\n            _destroyGroupable: function () {\n              var that = this;\n\n              if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n              }\n\n              that.groupable = null;\n\n              that._removeGroupableOptionsFromHeader();\n            },\n            _removeGroupableOptionsFromHeader: function () {\n              var that = this;\n\n              var headerCells = that._headerCells();\n\n              for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n              }\n            },\n            _continuousItems: function (filter, cell) {\n              if (!this.lockedContent) {\n                return;\n              }\n\n              var that = this;\n              var elements = that.table.add(that.lockedTable);\n              var lockedItems = $(filter, elements[0]);\n              var nonLockedItems = $(filter, elements[1]);\n              var columns = cell ? lockedColumns(that.columns).length : 1;\n              var nonLockedColumns = cell ? that.columns.length - columns : 1;\n              var result = [];\n\n              for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n              }\n\n              return result;\n            },\n            _selectable: function () {\n              var that = this,\n                  multi,\n                  cell,\n                  notString = [],\n                  isLocked = that._isLocked(),\n                  selectable = that.options.selectable;\n\n              if (selectable) {\n                if (that.selectable) {\n                  that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                  notString[notString.length] = \".k-detail-row\";\n                }\n\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                  notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                  notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n\n                if (isLocked) {\n                  elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                  filter: filter,\n                  aria: true,\n                  multiple: multi,\n                  dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                  change: function (e) {\n                    var selectedValues;\n\n                    if (!cell) {\n                      that._persistSelectedRows();\n                    }\n\n                    if (that._checkBoxSelection) {\n                      selectedValues = that.selectable.value();\n\n                      that._uncheckCheckBoxes();\n\n                      that._checkRows(selectedValues);\n\n                      if (selectedValues.length && selectedValues.length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                      } else {\n                        that._toggleHeaderCheckState(false);\n                      }\n                    }\n\n                    if (e.event) {\n                      that.trigger(CHANGE);\n                    }\n                  },\n                  useAllItems: isLocked && multi && cell,\n                  relatedTarget: function (items) {\n                    if (cell || !isLocked) {\n                      return;\n                    }\n\n                    var related;\n                    var result = $();\n\n                    for (var idx = 0, length = items.length; idx < length; idx++) {\n                      related = that._relatedRow(items[idx]);\n\n                      if (inArray(related[0], items) < 0) {\n                        result = result.add(related);\n                      }\n                    }\n\n                    return result;\n                  },\n                  continuousItems: function () {\n                    return that._continuousItems(filter, cell);\n                  },\n                  ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                  addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                  elements.on(\"keydown\" + NS, function (e) {\n                    var current = that.current();\n                    var target = e.target;\n                    var eventObject = {\n                      event: e\n                    };\n\n                    if (!current) {\n                      return;\n                    }\n\n                    if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 && !current.is(\".k-edit-cell,.k-header\") && current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      current = cell ? current : current.parent();\n\n                      if (isLocked && !cell) {\n                        current = current.add(that._relatedRow(current));\n                      }\n\n                      if (multi) {\n                        if (!e.ctrlKey) {\n                          that.selectable.clear();\n                        } else {\n                          if (current.hasClass(SELECTED)) {\n                            that._deselectCheckRows(current);\n\n                            return;\n                          }\n                        }\n                      } else {\n                        that.selectable.clear();\n                      }\n\n                      if (!cell) {\n                        that.selectable._lastActive = current;\n                      }\n\n                      that.selectable.value(current, eventObject);\n                    } else if (!cell && ($(target).is(\"td\") || $(target).is(\"table\") && inArray(target, this._navigatableTables)) && (e.shiftKey && e.keyCode == keys.LEFT || e.shiftKey && e.keyCode == keys.RIGHT || e.shiftKey && e.keyCode == keys.UP || e.shiftKey && e.keyCode == keys.DOWN || e.keyCode === keys.SPACEBAR && e.shiftKey)) {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      current = current.parent();\n\n                      if (isLocked) {\n                        current = current.add(that._relatedRow(current));\n                      }\n\n                      if (multi) {\n                        if (!that.selectable._lastActive) {\n                          that.selectable._lastActive = current;\n                        }\n\n                        that.selectable.selectRange(that.selectable._firstSelectee(), current, eventObject);\n                      } else {\n                        that.selectable.clear();\n                        that.selectable.value(current, eventObject);\n                      }\n                    }\n                  });\n                }\n              }\n            },\n            _clipboard: function () {\n              var options = this.options;\n              var selectable = options.selectable;\n\n              if (selectable && options.allowCopy) {\n                var grid = this;\n\n                if (!options.navigatable) {\n                  grid.table.add(grid.lockedTable).attr(\"tabindex\", 0).on(\"mousedown\" + NS + \" keydown\" + NS, \".k-detail-cell\", function (e) {\n                    if (e.target !== e.currentTarget) {\n                      e.stopImmediatePropagation();\n                    }\n                  }).on(\"mousedown\" + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n\n                grid.copyHandler = grid.copySelection.bind(grid);\n\n                grid.updateClipBoardState = function () {\n                  if (grid.areaClipBoard) {\n                    grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                  }\n                };\n\n                grid.bind(\"change\", grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n              }\n            },\n            copySelectionToClipboard: function (includeHeaders) {\n              this._createAreaClipBoard();\n\n              this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n              document.execCommand('copy');\n            },\n            copySelection: function (e) {\n              if (e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey) || $(e.target).is(\"input:visible,textarea:visible\") || window.getSelection && window.getSelection().toString() || document.selection && document.selection.createRange().text) {\n                return;\n              }\n\n              this._createAreaClipBoard();\n\n              this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n            },\n            _createAreaClipBoard: function () {\n              if (!this.areaClipBoard) {\n                this.areaClipBoard = $(\"<textarea />\").css({\n                  position: \"fixed\",\n                  top: \"50%\",\n                  left: \"50%\",\n                  opacity: 0,\n                  width: 0,\n                  height: 0\n                }).appendTo(this.wrapper);\n              }\n            },\n            getTSV: function (includeHeaders) {\n              var grid = this;\n              var selected = grid.select();\n              var delimeter = \"\\t\";\n              var allowCopy = grid.options.allowCopy;\n              var onlyVisible = true;\n              var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n              if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n              }\n\n              var text = \"\";\n\n              if (selected.length) {\n                if (selected.eq(0).is(\"tr\")) {\n                  selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n\n                if (onlyVisible) {\n                  selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n                $.each(selected, function (idx, cell) {\n                  cell = $(cell);\n                  field = grid._getCellField(cell, hasLockedCols);\n                  var tr = cell.closest(\"tr\");\n                  var rowIndex = tr.index();\n                  var cellIndex = cell.index();\n\n                  if (onlyVisible) {\n                    cellIndex -= cell.prevAll(\":hidden\").length;\n                  }\n\n                  if (lockedCols && inLockedArea) {\n                    inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                  }\n\n                  if (grid._groups() && inLockedArea) {\n                    cellIndex -= grid._groups();\n                  }\n\n                  cellIndex = inLockedArea ? cellIndex : cellIndex + lockedCols;\n\n                  if (field) {\n                    fields[cellIndex] = field;\n                  }\n\n                  if (cellsOffset > cellIndex) {\n                    cellsOffset = cellIndex;\n                  }\n\n                  var cellText = cell.text();\n\n                  if (!result[rowIndex]) {\n                    result[rowIndex] = [];\n                  }\n\n                  result[rowIndex][cellIndex] = cellText;\n                });\n                var rowsOffset = result.length;\n                result = $.each(result, function (idx, val) {\n                  if (val) {\n                    result[idx] = val.slice(cellsOffset);\n\n                    if (rowsOffset > idx) {\n                      rowsOffset = idx;\n                    }\n                  }\n                });\n\n                if (includeHeaders && fields.length) {\n                  result.splice(rowsOffset, 0, fields.map(function (field) {\n                    return getTitle(field, columns);\n                  }));\n                  var headerIndex = result.findIndex(function (el) {\n                    return el !== undefined;\n                  });\n                  result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function (idx, val) {\n                  if (val) {\n                    text += val.join(delimeter) + \"\\r\\n\";\n                  } else {\n                    text += \"\\r\\n\";\n                  }\n                });\n              }\n\n              return text;\n            },\n            clearArea: function (e) {\n              var table;\n\n              if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                if (this.options.navigatable) {\n                  table = $(this.current()).closest(\"table\");\n                } else {\n                  table = this.table;\n                }\n\n                focusTable(table, true);\n              }\n\n              if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n              }\n            },\n            _adaptiveColumns: function () {\n              var that = this;\n\n              if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n\n                that._attachColumnMediaResizeHandler();\n              }\n            },\n            _anyColumnHasMediaQuery: function () {\n              return this._columnsWithMediaQuery().length;\n            },\n            _columnsWithMediaQuery: function () {\n              return columnsWithMedia(this.columns);\n            },\n            _attachColumnMediaResizeHandler: function () {\n              var that = this;\n\n              that._detachColumnMediaResizeHandler();\n\n              that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n              $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n            _detachColumnMediaResizeHandler: function () {\n              var that = this;\n\n              if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n              }\n            },\n            _onColumnMediaResize: function () {\n              var that = this;\n\n              that._setColumnsMediaVisibility(that.columns);\n\n              that._setContentMediaWidth();\n            },\n            _setColumnsMediaVisibility: function (columns) {\n              var cols = columns || [];\n\n              for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n              }\n            },\n            _setColumnMediaVisibility: function (column) {\n              var that = this;\n\n              if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n              } else {\n                if (columnMatchesMedia(column)) {\n                  that._showColumnByMedia(column);\n\n                  if (!column.hidden) {\n                    that._setColumnsMediaVisibility(column.columns);\n                  }\n                } else {\n                  that._hideColumnByMedia(column);\n                }\n              }\n            },\n            _showColumnByMedia: function (column) {\n              if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n              }\n\n              setColumnMatchesMedia(column);\n            },\n            _hideColumnByMedia: function (column) {\n              var initiallyHidden = column.hidden;\n\n              if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false; // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n\n                column.hidden = initiallyHidden;\n              }\n\n              setColumnMatchesMedia(column);\n            },\n            _setContentMediaWidth: function () {\n              var that = this;\n              var options = that.options;\n\n              var isLocked = that._isLocked();\n\n              var footer;\n\n              if (options.scrollable && options.resizable) {\n                if (isLocked && that.lockedFooter) {\n                  footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                  footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                  footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                  var currentHeaderWidth = header.css(\"width\");\n\n                  for (var i = 0; i < headerColumnsCount; i++) {\n                    if (isElementVisible(headerColumns[i])) {\n                      var columnWidth;\n                      var cellIndex = Math.max(i, i - hiddenHeaderColumnsCount);\n                      var colgroupChild = headerColgroup.children()[cellIndex];\n                      var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                      if (columnStyleWidth !== \"\") {\n                        columnWidth = parseFloat(columnStyleWidth);\n                      } else {\n                        // remove the header width to calculate the height of a column without fixed width\n                        header.css(\"width\", \"auto\");\n                        columnWidth = outerWidth(headerColumns.eq(i));\n                        header.css(\"width\", currentHeaderWidth);\n                      }\n\n                      totalHeaderWidth += columnWidth;\n                    }\n                  }\n\n                  contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n\n                  header.css('width', totalHeaderWidth);\n                  footer.css('width', totalHeaderWidth);\n\n                  that._updateStickyColumns();\n                }\n              }\n            },\n            _minScreenSupport: function () {\n              var any = this.hideMinScreenCols();\n\n              if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n              }\n            },\n            hideMinScreenCols: function () {\n              var cols = this.columns,\n                  screenWidth = window.innerWidth > 0 ? window.innerWidth : screen.width;\n              return this._iterateMinScreenCols(cols, screenWidth);\n            },\n            _iterateMinScreenCols: function (cols, screenWidth) {\n              var any = false;\n\n              for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n\n                if (minWidth !== undefined && minWidth !== null) {\n                  any = true;\n\n                  if (minWidth > screenWidth) {\n                    this.hideColumn(col);\n                  } else {\n                    this.showColumn(col);\n                  }\n                }\n\n                if (!col.hidden && col.columns) {\n                  any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n              }\n\n              return any;\n            },\n            _stickyColumns: function () {\n              var that = this;\n\n              if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n              }\n            },\n            _updateStickyColumns: function () {\n              var that = this;\n              var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                return column.groupHeaderColumnTemplate;\n              });\n\n              if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                  that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                  that._updateStickyFilterCells();\n                }\n              }\n            },\n            _updateStickyFilterCells: function () {\n              var that = this;\n              var filterCells = that.thead.find(\".k-filter-row\").find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n              if (filterCells.length) {\n                filterCells.each(function () {\n                  var th = $(this);\n                  var column = th.data(\"column\");\n                  var style = th.attr(\"style\") || \"\";\n\n                  if (column.sticky) {\n                    th.attr(\"style\", style + column.stickyStyle);\n                    th.addClass(STICKY_HEADER_CLASS);\n                  } else {\n                    style = style.replace(leftRegExp, \"\");\n                    style = style.replace(rightRegExp, \"\");\n                    th.attr(\"style\", style);\n                    th.removeClass(STICKY_HEADER_CLASS);\n                  }\n                });\n              }\n            },\n            _anyStickyColumns: function () {\n              var that = this;\n              return stickyColumns(that.columns).length;\n            },\n            _setStickyColumns: function (updateStyles) {\n              var that = this;\n              var columns = stickyColumns(that.columns);\n              var visibleColumns = visibleStickyColumns(that.columns);\n\n              var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n              that._removeStickyAttributes(columns);\n\n              that._setStickyClassAttributes(columns);\n\n              that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n              if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n              }\n            },\n            _calculateStickyWidths: function (columns, initialLeftWidth, initialRightWidth) {\n              var that = this;\n              var i;\n              var column;\n              var columnWidth;\n              var nextColumnLeft;\n              var nextColumnRight;\n              var left = isRtl ? \"right\" : \"left\";\n              var right = isRtl ? \"left\" : \"right\";\n              var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n              };\n\n              for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n                stickyWidths[left][i + 1] = nextColumnLeft;\n              }\n\n              for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n                stickyWidths[right][i - 1] = nextColumnRight;\n              }\n\n              return stickyWidths;\n            },\n            _setStickyClassAttributes: function (columns, masterIndex) {\n              var that = this;\n              var i;\n              var column;\n\n              for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                  if (!masterIndex && i) {\n                    masterIndex = i;\n                  }\n\n                  that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                  addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n              }\n            },\n            _setStickyStyleAttributes: function (columns, stickyWidths, updateStyles) {\n              var that = this;\n              var i;\n              var column;\n              var stickyLeft;\n              var stickyRight;\n              var stickyStyle;\n              var childCols;\n              var childStickyWidths;\n\n              for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = \"left: \" + stickyLeft + \"px; right: \" + stickyRight + \"px;\";\n\n                if (column.columns) {\n                  childCols = visibleChildColumns([column]);\n                  childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                  that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                  if (updateStyles) {\n                    that._setStickyStyles(childCols, childStickyWidths);\n                  }\n                }\n\n                addColumnAttribute(column, \"attributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"headerAttributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"footerAttributes\", \"style\", stickyStyle);\n                column.stickyStyle = stickyStyle;\n              }\n            },\n            _removeStickyAttributes: function (columns) {\n              var that = this;\n              var i;\n              var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n              var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n              var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n              var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n              var column;\n\n              for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                  that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", rightRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", rightRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", rightRegExp);\n              }\n            },\n            _setStickyStyles: function (columns, stickyWidths) {\n              var that = this;\n              var i;\n              var j;\n              var leafsCols = leafColumns(nonLockedColumns(that.columns));\n              var rows = that.tbody.children(\":not(.k-detail-row)\");\n              var row;\n              var column;\n              var columnIndex;\n              var left;\n              var right;\n              var header;\n              var footer;\n              var groupHeader;\n              var cell;\n\n              for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n                header.addClass(STICKY_HEADER_CLASS);\n\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                  header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                  continue;\n                }\n\n                if (that.footer) {\n                  footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n                  footer.addClass(STICKY_FOOTER_CLASS);\n                  setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                  row = $(rows[j]);\n\n                  if (row.hasClass(\"k-grouping-row\")) {\n                    groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n                    groupHeader.addClass(STICKY_CELL_CLASS);\n                    setLeftAndRightStyles(groupHeader, left, right);\n                  } else {\n                    cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n                    cell.addClass(STICKY_CELL_CLASS);\n                    setLeftAndRightStyles(cell, left, right);\n                  }\n                }\n              }\n            },\n            _removeStickyStyles: function (columns) {\n              var that = this;\n              var i;\n              var j;\n              var leafsCols = leafColumns(nonLockedColumns(that.columns));\n              var rows = that.tbody.children(\":not(.k-detail-row)\");\n              var row;\n              var column;\n              var columnIndex;\n              var header;\n              var footer;\n              var groupHeader;\n              var cell;\n\n              for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                  that._removeStickyStyles(column.columns);\n\n                  continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                  footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n                  footer.removeClass(STICKY_FOOTER_CLASS);\n                  setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                  row = $(rows[j]);\n\n                  if (row.hasClass(\"k-grouping-row\")) {\n                    groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n                    groupHeader.removeClass(STICKY_CELL_CLASS);\n                    setLeftAndRightStyles(groupHeader, \"\", \"\");\n                  } else {\n                    cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n                    cell.removeClass(STICKY_CELL_CLASS);\n                    setLeftAndRightStyles(cell, \"\", \"\");\n                  }\n                }\n              }\n            },\n            _getColumnHeader: function (column) {\n              var that = this;\n              var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n              return header;\n            },\n            _sumColumnWidth: function (column) {\n              var that = this;\n              var width = 0;\n\n              if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n              } else {\n                width = that._sumCurrentWidths([column]);\n              }\n\n              return width;\n            },\n            _sumCurrentWidths: function (cols) {\n              var that = this;\n              var width = 0;\n              var colWidth = 0;\n              var col;\n              var header;\n              var i;\n              var length = cols.length;\n\n              for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                  colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n                  width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n              }\n\n              return width;\n            },\n            _belongsToGrid: function (element) {\n              return this.wrapper[0] === element.closest(WRAPPER)[0];\n            },\n            getSelectedData: function () {\n              var that = this;\n              var selectedRanges = that.selectable.selectedRanges();\n              var selectedRangeNames = Object.keys(selectedRanges);\n              var selectedSingleItems = that.selectable.selectedSingleItems();\n              var result = [];\n              var visibleColumns = visibleLeafColumns(that.columns);\n\n              for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n              }\n\n              if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n              }\n\n              return result;\n            },\n            exportSelectedToExcel: function (includeHeaders) {\n              if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n              }\n\n              var that = this;\n              var excel = this.options.excel || {};\n              var visibleColumns = visibleLeafColumns(that.columns);\n              var exporter = new kendo.excel.ExcelExporter({});\n\n              var columnHandler = function () {\n                return {\n                  autoWidth: true\n                };\n              };\n\n              var book = {\n                sheets: [{\n                  columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                  rows: [],\n                  freezePane: {},\n                  filter: false\n                }]\n              };\n              var selectedRanges = that.selectable.selectedRanges();\n              var selectedRangeNames = Object.keys(selectedRanges);\n              var selectedSingleItems = that.selectable.selectedSingleItems();\n              var idx;\n              var exportData = [];\n              var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n              var sortHandler = exportDataSort.bind(that);\n\n              for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n              }\n\n              if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n              }\n\n              exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n              if (exportData.length) {\n                if (hasLockedCols) {\n                  exportData = exportData.sort(sortHandler);\n                }\n\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n              }\n\n              if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                  workbook.options = {};\n                }\n\n                workbook.options.skipCustomHeight = true;\n                workbook.toDataURLAsync().then(function (dataURI) {\n                  kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: book.fileName || excel.fileName,\n                    proxyURL: excel.proxyURL,\n                    forceProxy: excel.forceProxy\n                  });\n                });\n              }\n            },\n            _addSingleSelectionRows: function (book, exporter, data, includeHeaders) {\n              var idx = 0;\n              var visibleColumns = visibleLeafColumns(this.columns);\n              var item;\n\n              for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n\n                this._setExporterColumns(exporter, visibleColumns, item);\n\n                this._createExportRows(book, exporter, includeHeaders);\n              }\n            },\n            _addRangeSelectionRows: function (book, exporter, data, includeHeaders) {\n              var visibleColumns = visibleLeafColumns(this.columns);\n              exporter.data = data;\n\n              this._setExporterColumns(exporter, visibleColumns, data[0]);\n\n              this._createExportRows(book, exporter, includeHeaders);\n            },\n            _createExportRows: function (book, exporter, includeHeaders) {\n              book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n            },\n            _setExporterColumns: function (exporter, columns, item) {\n              exporter.columns = exporter.options.columns = $.map(columns.filter(function (col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n              }), exporter._prepareColumn);\n            },\n            _mapSelectionToData: function (elements, visibleColumns, columnsFilter) {\n              var that = this;\n              var elementType = elements[0][0].nodeName;\n              var isRowSelection = elementType === 'TR';\n              var dataItem;\n              var result = {};\n              var element;\n              var curr;\n              var field;\n\n              var columnMapHandler = function (col) {\n                var result = {};\n\n                if (!col.field || columnsFilter && !columnsFilter(col)) {\n                  return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n              };\n\n              var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n              var column;\n\n              for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                  result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                  field = that._getCellField(element, hasLockedCols);\n\n                  if (!field) {\n                    continue;\n                  }\n\n                  curr = result[dataItem.uid];\n\n                  if (!curr) {\n                    curr = result[dataItem.uid] = {};\n                  }\n\n                  column = findColumnByField(visibleColumns, field);\n\n                  if (!column || columnsFilter && !columnsFilter(column)) {\n                    continue;\n                  }\n\n                  curr[field] = dataItem[field];\n                }\n              }\n\n              return Object.keys(result).map(function (id) {\n                result[id].uid = id;\n                return result[id];\n              });\n            },\n            _getCellField: function (cell, hasLockedCols) {\n              var grid = this;\n              var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n              var fieldAttr = kendo.attr('field');\n\n              if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th\").eq(cell.index()).attr(fieldAttr);\n              } else {\n                return grid.thead.find(\"th\").eq(cell.index()).attr(fieldAttr);\n              }\n            },\n            _relatedRow: function (row) {\n              var lockedTable = this.lockedTable;\n              row = $(row);\n\n              if (!lockedTable) {\n                return row;\n              }\n\n              var table = row.closest(this.table.add(this.lockedTable));\n              var index = table.find(\">tbody>tr\").index(row);\n              table = table[0] === this.table[0] ? lockedTable : this.table;\n              return table.find(\">tbody>tr\").eq(index);\n            },\n            _relatedCell: function (cell) {\n              var lockedTable = this.lockedTable;\n              cell = $(cell);\n\n              if (!lockedTable) {\n                return cell;\n              }\n\n              var table = cell.closest(this.table.add(this.lockedTable));\n              var index = table.find(\">tbody>tr>td\").index(cell);\n              table = table[0] === this.table[0] ? lockedTable : this.table;\n              return table.find(\">tbody>tr>td\").index(index);\n            },\n            clearSelection: function () {\n              var that = this;\n\n              if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n              }\n\n              if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n\n                return;\n              }\n\n              if (that.options.persistSelection) {\n                that._persistSelectedRows();\n              } else {\n                that._selectedIds = {};\n              }\n            },\n            select: function (items) {\n              var that = this,\n                  selectable = that.selectable,\n                  selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                  cell = selectableoptions.cell;\n              items = that.table.add(that.lockedTable).find(items);\n\n              if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                  selectable.clear();\n                  items = items.first();\n                }\n\n                if (that._isLocked()) {\n                  items = items.add(items.map(function () {\n                    if (cell) {\n                      return that._relatedCell(this);\n                    } else {\n                      return that._relatedRow(this);\n                    }\n                  }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                  selectable.value(items);\n                } else {\n                  that._checkRows(items);\n\n                  if (that.select().length === that.items().length) {\n                    that._toggleHeaderCheckState(true);\n                  }\n\n                  if (!cell) {\n                    that._persistSelectedRows();\n                  }\n\n                  that.trigger(CHANGE);\n                }\n\n                return;\n              }\n\n              return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n            },\n            _toggleHeaderCheckState: function (checked) {\n              var that = this;\n\n              if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT).prop(\"checked\", true).attr(\"aria-checked\", true).attr(\"aria-label\", \"Deselect all rows\");\n              } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT).prop(\"checked\", false).attr(\"aria-checked\", false).attr(\"aria-label\", \"Select all rows\");\n              }\n            },\n            _uncheckCheckBoxes: function () {\n              var that = this;\n              var tables = that.table.add(that.lockedTable);\n              tables.find(\"tbody \" + CHECKBOXINPUT).attr(\"aria-checked\", false).prop(\"checked\", false).attr(\"aria-label\", \"Select row\");\n            },\n            _deselectCheckRows: function (items) {\n              var that = this,\n                  rangeSelectedAttr = kendo.attr(\"range-selected\");\n              items = that.table.add(that.lockedTable).find(items);\n\n              if (that._isLocked()) {\n                items = items.add(items.map(function () {\n                  return that._relatedRow(this);\n                }));\n              }\n\n              items.each(function () {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(\"aria-checked\", false).prop(\"checked\", false).attr(\"aria-label\", \"Select row\");\n              });\n\n              that._toggleHeaderCheckState(false);\n\n              that._persistSelectedRows();\n\n              that.trigger(CHANGE);\n            },\n            _checkRows: function (items) {\n              items.each(function () {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT).prop(\"checked\", true).attr(\"aria-label\", \"Deselect row\").attr(\"aria-checked\", true);\n              });\n            },\n            _persistSelectedRows: function () {\n              var that = this,\n                  key,\n                  dataItem,\n                  allRows = that.items(),\n                  dataSourceOptions = that.dataSource.options,\n                  schema = dataSourceOptions.schema,\n                  modelId,\n                  selectedViewIds = {};\n\n              if (!schema || !schema.model || !that._data) {\n                return;\n              }\n\n              modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n              if (!modelId) {\n                return;\n              }\n\n              if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n              }\n\n              that.select().each(function () {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n              });\n\n              for (var i = 0; i < allRows.length; i++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n\n                if (selectedViewIds[key]) {\n                  that._selectedIds[key] = true;\n                } else {\n                  delete that._selectedIds[key];\n                }\n              }\n            },\n            selectedKeyNames: function () {\n              var that = this,\n                  ids = [];\n\n              for (var property in that._selectedIds) {\n                ids.push(property);\n              }\n\n              ids.sort();\n              return ids;\n            },\n            _updateCurrentAttr: function (current, next) {\n              var headerId = $(current).data(\"headerId\");\n              var nextId;\n              var descId;\n              $(current).removeClass(FOCUSED).closest(\"table\").removeAttr(\"aria-activedescendant\");\n\n              if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(\"id\", headerId);\n              } else {\n                $(current).removeAttr(\"id\");\n              }\n\n              nextId = next.attr(\"id\");\n\n              if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n              }\n\n              if (next.is(\"th\")) {\n                descId = nextId;\n              } else {\n                next.attr(\"id\", this._cellId);\n              }\n\n              next.addClass(FOCUSED).closest(\"table\").attr(\"aria-activedescendant\", descId || this._cellId);\n              this._current = next;\n            },\n            _scrollCurrent: function () {\n              var current = this._current;\n              var scrollable = this.options.scrollable;\n\n              if (!current || !scrollable) {\n                return;\n              }\n\n              var row = current.parent();\n              var tableContainer = row.closest(\"table\").parent();\n              var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n              var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n              var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0]; //adjust scroll vertically\n\n              if (isInContent) {\n                if (this.virtualScroll) {\n                  var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n\n                  if (this.virtualScroll.rows) {\n                    this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                    this.virtualScrollable.scrollIntoView(row);\n                  } else {\n                    this._rowVirtualIndex = rowIndex;\n\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                  }\n                } else {\n                  this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n              }\n\n              if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n              } //adjust scroll horizontally, if not inside locked tables\n\n\n              if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n              }\n            },\n            current: function (next) {\n              return this._setCurrent(next, true);\n            },\n            _setCurrent: function (next, preventTrigger, preventScroll) {\n              var current = this._current;\n              next = $(next);\n\n              if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(\"tabindex\", -1);\n              }\n\n              if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                  var parent = next.parent();\n                  var siblings = parent.children(DATA_CELL);\n                  var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                  if (this._hasVirtualColumns()) {\n                    this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                  }\n\n                  this._updateCurrentAttr(current, next);\n\n                  if (!preventScroll) {\n                    this._scrollCurrent();\n                  }\n\n                  if (!preventTrigger) {\n                    this.trigger(NAVIGATE, {\n                      element: next\n                    });\n                  }\n                }\n              }\n\n              if (next && next.length) {\n                this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n              }\n\n              this._updateSelctCheckbox(current, next);\n\n              return this._current;\n            },\n            _removeCurrent: function () {\n              if (this._current) {\n                this._current.removeClass(FOCUSED);\n\n                this._current = null;\n              }\n            },\n            _updateSelctCheckbox: function (current, next) {\n              var nextCheckbox;\n\n              if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                  nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                  focusTable(this.table, true);\n                }\n              }\n            },\n            _scrollTo: function (element, container) {\n              var elementToLowercase = element.tagName.toLowerCase();\n              var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n              var table = $(element).closest(\"table\")[0];\n              var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n              var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n              var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n              var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n              var bottomDistance = elementOffset + elementOffsetDir;\n              var result = 0;\n              var ieCorrection = 0;\n              var firefoxCorrection = 0;\n\n              if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                  ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || browser.webkit && browser.version > 85) {\n                  firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n              }\n\n              containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n              if (containerScroll > elementOffset) {\n                result = elementOffset;\n              } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                  result = bottomDistance - containerOffsetDir;\n                } else {\n                  result = elementOffset;\n                }\n              } else {\n                result = containerScroll;\n              }\n\n              result = Math.abs(result + ieCorrection) + firefoxCorrection;\n              container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n            },\n            _navigatable: function () {\n              var that = this;\n\n              if (!that.options.navigatable) {\n                return;\n              } //data tables - locked and non-locked\n\n\n              var dataTables = that.table.add(that.lockedTable); //header tables - locked and non-locked\n\n              var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader)); //the over wich keys will be handled\n\n              var tables = dataTables;\n\n              if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables); //data tables will recive first focus on TAB\n\n                headerTables.attr(TABINDEX, -1);\n              }\n\n              this._navigatableTables = tables;\n              this._headertables = headerTables; //dettach all previous events\n\n              tables.off(\"mousedown\" + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n              headerTables.on(\"keydown\" + NS, that._openHeaderMenu.bind(that)).find(\"a.k-link\").attr(\"tabIndex\", -1); //prevent propagation when clicked inside detail grid\n\n              dataTables.attr(TABINDEX, math.max(dataTables.attr(TABINDEX) || 0, 0)).on(\"keydown\" + NS, \".k-detail-cell\", function (e) {\n                if (e.target !== e.currentTarget) {\n                  e.stopImmediatePropagation();\n                }\n              });\n              tables //handle click on tables, will attempt to focus the table\n              .on(kendo.support.touch ? \"touchstart\" + NS : \"mousedown\" + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(that)).on(\"focus\" + NS, that._tableFocus.bind(that)).on(\"focusout\" + NS, that._tableBlur.bind(that)).on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n              that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n            },\n            _filterFocus: function (e) {\n              var header = e.target.closest(\"th\");\n\n              this._filterFocusable().attr(\"tabindex\", 0);\n\n              this._setCurrent(header);\n\n              $(header).removeClass(FOCUSED);\n            },\n            _openHeaderMenu: function (e) {\n              if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter, .k-header-column-menu\").click();\n                e.stopImmediatePropagation();\n              }\n            },\n            _setTabIndex: function (table) {\n              this._navigatableTables.attr(TABINDEX, -1);\n\n              table.attr(TABINDEX, 0);\n            },\n            _tableFocus: function (e) {\n              var current = this.current();\n              var table = $(e.currentTarget); //if there is already current, highlighted it\n              //otherwise highlight the first possible cell\n\n              if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n              } else {\n                if (this._virtualColScroll) {\n                  this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                  this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n              }\n\n              this._setTabIndex(table);\n            },\n            _tableBlur: function () {\n              var current = this.current();\n\n              if (current) {\n                current.removeClass(FOCUSED);\n              }\n            },\n            _findCellIndex: function (columns, startIndex, reversed) {\n              var cellIndex;\n              var i;\n\n              if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                  cellIndex = i;\n\n                  if (!columns[i].hidden) {\n                    break;\n                  }\n                }\n              } else {\n                for (i = startIndex; i < columns.length; i++) {\n                  cellIndex = i;\n\n                  if (!columns[i].hidden) {\n                    break;\n                  }\n                }\n              }\n\n              return cellIndex;\n            },\n            _scrollToColumn: function (key, e) {\n              if (this._virtualCellIndex === undefined) {\n                return false;\n              }\n\n              var that = this;\n              var cellIndex = that._virtualCellIndex;\n              var leafsCols = leafColumns(nonLockedColumns(that.columns));\n              var scrollWidth = 0;\n\n              if (key == (isRtl ? keys.LEFT : keys.RIGHT) && cellIndex !== leafsCols.length - 1) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n              } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex - 1, true);\n              } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n              } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n              }\n\n              for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n              }\n\n              that._virtualCellIndex = cellIndex;\n\n              if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n              }\n\n              kendo.scrollLeft(that.content, scrollWidth);\n              return true;\n            },\n            _tableKeyDown: function (e) {\n              var current = this.current();\n              var virtualScroll = this.virtualScroll || {};\n              var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n              var target = $(e.target);\n              var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon\"); // do not handle key down if request in progress\n              // or there isn't current set\n\n              if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n              }\n\n              if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && this._scrollToColumn(e.keyCode, e)) {\n                return;\n              }\n\n              if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n              }\n\n              if (!current.length) {\n                return;\n              }\n\n              var handled = false;\n\n              if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n              }\n\n              if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n              }\n\n              if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n              }\n\n              if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n              }\n\n              if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n              }\n\n              if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n              }\n\n              if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n              }\n\n              if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n              }\n\n              if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n              }\n\n              if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n              }\n\n              if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n              }\n\n              if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n              }\n\n              if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault(); //required in hierarchy\n\n                e.stopPropagation();\n              }\n            },\n            _moveLeft: function (current, altKey, shiftKey, ctrlKey, currentTable) {\n              var next, index;\n              var row = current.parent(); //thead or tbody\n\n              var container = row.parent();\n\n              if (altKey) {\n                if (row.hasClass(\"k-grouping-row\")) {\n                  this.collapseGroup(row);\n                } else {\n                  this.collapseRow(row);\n                }\n              } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, true);\n              } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                  if (shiftKey) {\n                    if (this.lockedTable) {\n                      next = this._relatedRow(row);\n\n                      if ($.contains(this.lockedTable[0], row[0])) {\n                        next = next.prevAll(ITEMROW).first();\n                      }\n\n                      next = next.children(DATA_CELL).last();\n                    } else {\n                      next = this._tabNext(current, currentTable, true);\n                    }\n                  } else {\n                    container = this._horizontalContainer(container);\n                    next = this._prevHorizontalCell(container, current, index);\n\n                    if (next[0] !== current[0]) {\n                      focusTable(container.parent(), true);\n                    }\n                  }\n                }\n\n                this._setCurrent(next);\n              }\n\n              return true;\n            },\n            _moveRight: function (current, altKey, shiftKey, ctrlKey, currentTable) {\n              var next, index;\n              var row = current.parent(); //thead or tbody\n\n              var container = row.parent();\n\n              if (altKey) {\n                if (row.hasClass(\"k-grouping-row\")) {\n                  this.expandGroup(row);\n                } else {\n                  this.expandRow(row);\n                }\n              } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, false);\n              } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                  if (shiftKey) {\n                    if (this.lockedTable) {\n                      next = this._relatedRow(row);\n\n                      if ($.contains(this.table[0], row[0])) {\n                        next = next.nextAll(ITEMROW).first();\n                      }\n\n                      next = next.children(DATA_CELL).first();\n                    } else {\n                      next = this._tabNext(current, currentTable, false);\n                    }\n                  } else {\n                    container = this._horizontalContainer(container, true);\n                    next = this._nextHorizontalCell(container, current, index);\n\n                    if (next[0] !== current[0]) {\n                      focusTable(container.parent(), true);\n                    }\n                  }\n                }\n\n                this._setCurrent(next);\n              }\n\n              return true;\n            },\n            _moveUp: function (current, shiftKey, ctrlKey) {\n              //thead or tbody\n              var container = current.parent().parent();\n              var next, cellIndex, index, oldIndex;\n\n              if (shiftKey) {\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n              } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, {\n                  oldIndex: oldIndex,\n                  newIndex: index,\n                  row: current.parent()\n                })) {\n                  this.reorderRows(current.parent(), index);\n                  next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n              } else {\n                next = this._prevVerticalCell(container, current);\n\n                if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                    focusTable(container.parent(), true);\n                  }\n                }\n              }\n\n              var tmp = this._lastCellIndex || 0;\n\n              this._setCurrent(next);\n\n              this._lastCellIndex = tmp;\n              return true;\n            },\n            _moveDown: function (current, shiftKey, ctrlKey) {\n              //thead or tbody\n              var container = current.parent().parent();\n              var next, cellIndex, index, oldIndex;\n\n              if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n              } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, {\n                  oldIndex: oldIndex,\n                  newIndex: index,\n                  row: current.parent()\n                })) {\n                  this.reorderRows(current.parent(), index + 1);\n                  next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n              } else {\n                next = this._nextVerticalCell(container, current);\n\n                if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container);\n                  next = this._nextVerticalCell(container, current);\n\n                  if (next[0]) {\n                    focusTable(container.parent(), true);\n                  }\n                }\n              }\n\n              var tmp = this._lastCellIndex || 0;\n\n              this._setCurrent(next);\n\n              this._lastCellIndex = tmp;\n              return true;\n            },\n            _moveColumn: function (current, isLeft) {\n              var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n              var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n              var oldIndex = elements.index($(current));\n              var offset = isLeft ? -1 : 1;\n              var column = columns[oldIndex];\n              var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n\n              if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                  newIndex: newIndex,\n                  oldIndex: oldIndex,\n                  column: column\n                });\n              }\n            },\n            _handleHome: function (current, ctrl) {\n              var row = current.parent();\n              var rowContainer = row.parent();\n              var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n              var isInBody = rowContainer[0] === this.tbody[0];\n              var prev;\n\n              if (this._hasVirtualColumns()) {\n                this._scrollToColumn(kendo.keys.HOME);\n\n                return true;\n              }\n\n              if (ctrl) {\n                if (this.lockedTable) {\n                  prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                  prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n              } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                  row = this._relatedRow(row);\n                }\n\n                prev = row.children(DATA_CELL).first();\n              }\n\n              if (prev && prev.length) {\n                this._setCurrent(prev);\n\n                return true;\n              }\n            },\n            _handleEnd: function (current, ctrl) {\n              var row = current.parent();\n              var rowContainer = row.parent();\n              var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n              var isInBody = rowContainer[0] === this.tbody[0];\n              var next;\n\n              if (this._hasVirtualColumns()) {\n                this._scrollToColumn(kendo.keys.END);\n\n                return true;\n              }\n\n              if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n              } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                  row = this._relatedRow(row);\n                }\n\n                next = row.children(DATA_CELL).last();\n              }\n\n              if (next && next.length) {\n                this._setCurrent(next);\n\n                return true;\n              }\n            },\n            _handlePageDown: function () {\n              if (!this.options.pageable) {\n                return false;\n              }\n\n              this.dataSource.page(this.dataSource.page() + 1);\n              return true;\n            },\n            _handlePageUp: function () {\n              if (!this.options.pageable) {\n                return false;\n              }\n\n              this.dataSource.page(this.dataSource.page() - 1);\n              return true;\n            },\n            _handleTabKey: function (current, currentTable, shiftKey, target) {\n              var isInCell = this.options.editable && this._editMode() == \"incell\";\n              var cell, filterFocusable;\n\n              if (!isInCell || current.is(\"th\") || (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                  filterFocusable = this._filterFocusable();\n\n                  if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                    filterFocusable.first().trigger(\"focus\");\n                    return true;\n                  } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                    filterFocusable.last().trigger(\"focus\");\n                    return true;\n                  }\n                }\n\n                return false;\n              }\n\n              cell = $(activeElement()).closest(\".k-edit-cell\");\n\n              if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n              }\n\n              cell = this._tabNext(current, currentTable, shiftKey);\n\n              if (cell[0] === current[0]) {\n                return false;\n              }\n\n              if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n              }\n\n              return false;\n            },\n            _handleEscKey: function (current, currentTable) {\n              var active = activeElement();\n              var isInCell = this._editMode() == \"incell\";\n\n              if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                  // return focus back to the table\n                  focusTable(currentTable, true);\n                  return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                  this._filterFocusable().attr(\"tabindex\", -1);\n\n                  focusTable(currentTable, true);\n                  return true;\n                }\n\n                return false;\n              }\n\n              if (isInCell) {\n                this.closeCell(true);\n              } else {\n                var currentIndex = $(current).parent().index();\n\n                if (active) {\n                  active.blur();\n                }\n\n                this.cancelRow(true);\n\n                if (currentIndex >= 0) {\n                  this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n              }\n\n              focusTable(currentTable, true);\n              return true;\n            },\n            _toggleCurrent: function (current, editable, hasDetails) {\n              var row = current.parent();\n\n              if (current.is(\".k-command-cell\")) {\n                return false;\n              }\n\n              if (row.is(\".k-grouping-row\")) {\n                row.find(\".k-icon\").first().click();\n                return true;\n              }\n\n              if (!editable && hasDetails) {\n                row.find(\".k-icon\").first().click();\n                return true;\n              }\n\n              return false;\n            },\n            _handleSpaceKey: function (current, ctrlKey) {\n              var that = this;\n\n              if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                return;\n              }\n\n              var descriptors = that.groupable.descriptors();\n              var field = current.attr(kendo.attr(\"field\"));\n              var aggregates = that.groupable.aggregates();\n              var label = current.attr(kendo.attr(\"title\")) || field;\n\n              if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                  field: field,\n                  dir: \"asc\",\n                  aggregates: aggregates || []\n                });\n                label += \" \" + that.options.messages.ungroupHeader;\n              } else {\n                descriptors = $.grep(descriptors, function (item) {\n                  return item.field !== field;\n                });\n                label += \" \" + that.options.messages.groupHeader;\n              }\n\n              current.attr(\"aria-label\", label);\n              that.dataSource.group(descriptors);\n              return true;\n            },\n            _handleEnterKey: function (current, currentTable, target) {\n              var editable = this.options.editable && this.options.editable.update !== false;\n              var container = target.closest(\"td\");\n\n              var hasDetails = this._hasDetails();\n\n              var link, filterFocusable;\n\n              if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n              }\n\n              if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                  return false;\n                } else if (link.length) {\n                  link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                  filterFocusable = this._filterFocusable();\n                  filterFocusable.attr(\"tabindex\", 0);\n                  current.find(\":kendoFocusable\").first().focus();\n                } else {\n                  current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n              }\n\n              if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n              }\n\n              var focusable = current.find(\":kendoFocusable\").first();\n\n              if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n                return true;\n              }\n\n              if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                  container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n              }\n\n              return false;\n            },\n            _nextHorizontalCell: function (table, current, originalIndex) {\n              var cells = current.nextAll(DATA_CELL);\n\n              if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent()); //no sibling cells are found and we've changed the table\n\n                if (rowIndex == -1) {\n                  if (current.hasClass(\"k-header\")) {\n                    var headerRows = [];\n                    mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                    if (headerRows[originalIndex]) {\n                      return headerRows[originalIndex][0];\n                    }\n\n                    return current;\n                  } //current is in filter row\n\n\n                  if (current.parent().hasClass(\"k-filter-row\")) {\n                    return rows.last().children(DATA_CELL).first();\n                  } //get the same row index in the new table\n\n\n                  return rows.eq(originalIndex).children(DATA_CELL).first();\n                }\n              }\n\n              return cells.first();\n            },\n            _prevHorizontalCell: function (table, current, originalIndex) {\n              var cells = current.prevAll(DATA_CELL);\n\n              if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent()); //no sibling cells are found and we've changed the table\n\n                if (rowIndex == -1) {\n                  if (current.hasClass(\"k-header\")) {\n                    var headerRows = [];\n                    var columns = lockedColumns(this.columns);\n                    mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                    if (headerRows[originalIndex]) {\n                      return headerRows[originalIndex][0];\n                    }\n\n                    return current;\n                  } //current is in filter row\n\n\n                  if (current.parent().hasClass(\"k-filter-row\")) {\n                    return rows.last().children(DATA_CELL).last();\n                  } //get the same row index in the new table\n\n\n                  return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n              }\n\n              return cells.first();\n            },\n            _currentDataIndex: function (table, current) {\n              var index = current.attr(\"data-index\");\n\n              if (!index) {\n                return undefined;\n              }\n\n              var lockedColumnsCount = lockedColumns(this.columns).length;\n\n              if (lockedColumnsCount && !table.closest(\"div\").hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n              }\n\n              return index;\n            },\n            _prevVerticalCell: function (container, current) {\n              var cells;\n              var row = current.parent();\n              var rows = container.children(NAVROW);\n              var rowIndex = rows.index(row); //get data-index in case of last level of multi-level columns\n\n              var index = this._currentDataIndex(container, current); //current is in the header, but not at the last level of multi-level columns\n\n\n              if (index || current.hasClass(\"k-header\")) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n              } //check this out\n\n\n              index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0); //if current is inside filter row\n\n              if (row.hasClass(\"k-filter-row\")) {\n                return leafDataCells(container).filter(isCellVisible).eq(index);\n              } //move up to header container\n\n\n              if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                  index = this._virtualCellIndex;\n                } //is there filter row in the header container\n\n\n                row = container.find(\"tr.k-filter-row:visible\");\n\n                if (!row[0]) {\n                  // in hierarchical grid we need to correct the index\n                  // since the k-hierarchy cell is navigatable\n                  if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                    index--;\n                  }\n\n                  return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n              } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n              }\n\n              cells = row.children(DATA_CELL);\n\n              if (cells.length > index) {\n                return cells.eq(index);\n              }\n\n              return cells.eq(0);\n            },\n            _nextVerticalCell: function (container, current) {\n              var cells;\n              var row = current.parent();\n              var rows = container.children(NAVROW);\n              var rowIndex = rows.index(row); //get data-index in case of last level of multi-level columns\n\n              var index = this._currentDataIndex(container, current);\n\n              var virtualScroll = this.virtualScroll || {};\n              var colspan; //current is in the header, but not at the last level of multi-level columns\n              //and we are not changing the table\n\n              if (rowIndex != -1 && index === undefined && current.hasClass(\"k-header\")) {\n                return childColumnsCells(current).eq(1);\n              }\n\n              index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n              index = Math.max(index, this._lastCellIndex || 0); //move down to data container\n\n              if (rowIndex == -1) {\n                row = rows.eq(0);\n\n                if (virtualScroll.columns) {\n                  colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                  index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                } // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n\n\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                  index++;\n                }\n              } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n              }\n\n              var tmpIndex = index; //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n\n              if (this._currentDataIndex(container, current) !== undefined) {\n                var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var hiddenColumns = currentRowCells.filter(\":hidden\");\n\n                for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                  if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                    tmpIndex--;\n                  }\n                }\n              }\n\n              index = tmpIndex;\n              cells = row.children(DATA_CELL);\n\n              if (cells.length > index) {\n                return cells.eq(index);\n              }\n\n              return cells.eq(0);\n            },\n            _verticalContainer: function (container, up) {\n              var table = container.parent();\n              var length = this._navigatableTables.length;\n              var step = Math.floor(length / 2);\n              var index = inArray(table[0], this._navigatableTables);\n\n              if (up) {\n                step *= -1;\n              }\n\n              index += step;\n\n              if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n              }\n\n              return table.find(up ? \">thead\" : \">tbody\");\n            },\n            _filterFocusable: function () {\n              return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n            },\n            _horizontalContainer: function (container, right) {\n              var length = this._navigatableTables.length;\n\n              if (length <= 2) {\n                return container;\n              }\n\n              var table = container.parent();\n              var index = inArray(table[0], this._navigatableTables);\n              index += right ? 1 : -1;\n\n              if (right && (index == 2 || index == length)) {\n                return container;\n              }\n\n              if (!right && (index == 1 || index < 0)) {\n                return container;\n              }\n\n              return this._navigatableTables.eq(index).find(\"thead, tbody\");\n            },\n            _tabNext: function (current, currentTable, back) {\n              var switchRow = true;\n              var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n              if (!next.length) {\n                next = current.parent();\n\n                if (this.lockedTable) {\n                  switchRow = back && currentTable == this.lockedTable[0] || !back && currentTable == this.table[0];\n                  next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                  if (this._hasVirtualColumns()) {\n                    return current;\n                  }\n\n                  next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n\n                if (back) {\n                  next = next.children(DATA_CELL).last();\n                } else {\n                  next = next.children(DATA_CELL).first();\n                }\n              }\n\n              return next;\n            },\n            _handleEditing: function (current, next, table) {\n              var that = this,\n                  active = $(activeElement()),\n                  mode = that._editMode(),\n                  isIE = browser.msie,\n                  editContainer = that._editContainer,\n                  focusable,\n                  editable = that.options.editable && that.options.editable.update !== false,\n                  isEdited;\n\n              table = $(table);\n\n              if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n              } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n              }\n\n              if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                  active.trigger(\"blur\");\n\n                  if (isIE) {\n                    //IE10 with jQuery 1.9.x does not trigger blur handler\n                    //numeric textbox does trigger change\n                    active.trigger(\"blur\");\n                  }\n                }\n\n                if (!that.editable) {\n                  focusTable(table);\n                  return;\n                }\n\n                if (that.editable.end()) {\n                  if (mode == \"incell\") {\n                    that.closeCell();\n                  } else {\n                    that.saveRow();\n                    isEdited = true;\n                  }\n                } else {\n                  if (mode == \"incell\") {\n                    that._setCurrent(editContainer);\n                  } else {\n                    that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                  }\n\n                  focusable = editContainer.find(\":kendoFocusable\").first()[0];\n\n                  if (focusable) {\n                    focusable.focus();\n                  }\n\n                  return;\n                }\n              }\n\n              if (next) {\n                that._setCurrent(next);\n              }\n\n              focusTable(table, true);\n\n              if (!editable) {\n                return;\n              }\n\n              if (!isEdited && !next || next) {\n                if (mode === INCELL) {\n                  if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                    that.editCell(that.current());\n                  }\n                } else {\n                  that.editRow(that.current().parent());\n                }\n              }\n            },\n            _wrapper: function () {\n              var that = this,\n                  table = that.table,\n                  height = that.options.height,\n                  width = that.options.width,\n                  wrapper = that.element;\n\n              if (!wrapper.is(\"div\")) {\n                wrapper = wrapper.wrap(\"<div/>\").parent();\n              }\n\n              that.wrapper = wrapper.addClass(\"k-grid k-widget k-grid-display-block\");\n\n              if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, \"auto\");\n              }\n\n              if (width) {\n                that.wrapper.css(\"width\", width);\n              }\n\n              that._initMobile();\n            },\n            _initMobile: function () {\n              var options = this.options;\n              var that = this;\n              this._isMobile = options.mobile === true && kendo.support.mobileOS || options.mobile === \"phone\" || options.mobile === \"tablet\";\n\n              if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap('<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' + 'data-' + kendo.ns + 'init-widgets=\"false\"></div>').parent();\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                  this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                  this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\"; // Grid transitions should not propagate to the view\n\n                that.wrapper.on(\"transitionend\" + NS, function (e) {\n                  e.stopPropagation();\n                });\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function (e) {\n                  e.preventDefault();\n                  return false;\n                });\n                this.view.bind(\"showStart\", function () {\n                  if (that._isLocked()) {\n                    that._updateTablesWidth();\n\n                    that._applyLockedContainersWidth();\n\n                    that._syncLockedContentHeight();\n\n                    that._syncLockedHeaderHeight();\n\n                    that._syncLockedFooterHeight();\n                  }\n                });\n              }\n            },\n            _createPane: function (html) {\n              var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                  viewOptions: {\n                    renderOnInit: true,\n                    wrap: false,\n                    wrapInSections: true,\n                    detachOnHide: false,\n                    detachOnDestroy: false\n                  }\n                }\n              });\n              return pane;\n            },\n            _tbody: function () {\n              var that = this,\n                  table = that.table,\n                  tbody;\n              tbody = table.find(\">tbody\");\n\n              if (!tbody.length) {\n                tbody = $(\"<tbody/>\").appendTo(table);\n              }\n\n              that.tbody = tbody.attr(\"role\", \"rowgroup\");\n            },\n            _scrollable: function () {\n              var that = this,\n                  header,\n                  table,\n                  options = that.options,\n                  scrollable = options.scrollable,\n                  hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                  virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                  scrollbar = !kendo.support.kineticScrollNeeded || virtualScroll && virtualScroll.rows ? kendo.support.scrollbar() : 0,\n                  headerWrap;\n\n              if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                  header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                } // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n\n\n                header.css(isRtl ? \"padding-left\" : \"padding-right\", scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"grid\" />');\n                table.width(that.table[0].style.width);\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                  that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                  that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                  that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n                  that.table.css({\n                    width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                  });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n                that.scrollables = headerWrap.add(that.content); // the footer may exists if rendered from the server\n\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                  that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function (e) {\n                  if (that._scrollLeft !== this.scrollLeft) {\n                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                  }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                  that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function () {\n                    var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                    that._scrollLeft = this.scrollLeft;\n                    kendo.scrollLeft(that.scrollables, this.scrollLeft);\n\n                    if (that.lockedContent) {\n                      that.lockedContent[0].scrollTop = this.scrollTop;\n                    }\n\n                    if (virtualScroll.columns && isScrollingLeft) {\n                      that.refresh();\n                    }\n                  });\n                } else {\n                  var endless = scrollable.endless;\n                  var originalPageSize = that.dataSource.options.pageSize;\n\n                  if (endless) {\n                    that._endlessPageSize = originalPageSize;\n                  }\n\n                  that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function (e) {\n                    var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                    that._scrollLeft = this.scrollLeft;\n                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n\n                    if (that.lockedContent && e.currentTarget == that.content[0]) {\n                      that.lockedContent[0].scrollTop = this.scrollTop;\n                    }\n\n                    if (endless) {\n                      if (this.scrollTop + this.clientHeight - this.scrollHeight >= -10 && !that._endlessFetchInProgress && that._endlessPageSize < that.dataSource.total()) {\n                        that._skipRerenderItemsCount = that._endlessPageSize;\n                        that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                        that.dataSource.options.endless = true;\n                        that._endlessFetchInProgress = true;\n                        that.dataSource.pageSize(that._endlessPageSize);\n                      }\n                    }\n\n                    if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                      that._virtualColScroll = true;\n\n                      that._cacheEditableState();\n\n                      that.refresh();\n\n                      that._restoreEditableState();\n\n                      that._virtualColScroll = false;\n                    }\n                  });\n                  var touchScroller = that.content.data(\"kendoTouchScroller\");\n\n                  if (touchScroller) {\n                    touchScroller.destroy();\n                  }\n\n                  touchScroller = kendo.touchScroller(that.content);\n\n                  if (touchScroller && touchScroller.movable) {\n                    that.touchScroller = touchScroller;\n                    touchScroller.movable.bind(\"change\", function (e) {\n                      kendo.scrollLeft(that.scrollables, -e.sender.x);\n\n                      if (that.lockedContent) {\n                        that.lockedContent.scrollTop(-e.sender.y);\n                      }\n                    });\n                    that.one(DATABOUND, function (e) {\n                      e.sender.wrapper.addClass(\"k-grid-backface\");\n                    });\n                  }\n                }\n              }\n            },\n            _createVirtualScrollable: function () {\n              var that = this;\n\n              if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n              }\n\n              that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function () {\n                  return that._averageRowHeight();\n                },\n                page: function () {\n                  that._restoreEditableState();\n                },\n                scroll: function () {\n                  that._focusEditable();\n                },\n                loadStart: function () {\n                  that._progress(true);\n                },\n                loadEnd: function () {\n                  that._progress(false);\n                }\n              });\n              that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n            },\n            _onVirtualPaging: function () {\n              var that = this;\n\n              that._cacheEditableState();\n\n              if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n              }\n            },\n            _isVirtualEditable: function () {\n              return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n            _isVirtualInlineEditable: function () {\n              return this.virtualScrollable && this._editMode() === INLINE;\n            },\n            _isVirtualIncellEditable: function () {\n              return this.virtualScrollable && this._editMode() === INCELL;\n            },\n            _isVirtualPopupEditable: function () {\n              return this.virtualScrollable && this._editMode() === \"popup\";\n            },\n            _hasVirtualColumns: function () {\n              return (this.virtualScroll || {}).columns ? true : false;\n            },\n            _scrollVirtualWrapper: function () {\n              var that = this;\n              var scrollable = that.virtualScrollable;\n\n              if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                  scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                  scrollable._scrollWrapperToTop();\n                }\n              }\n            },\n            _scrollVirtualWrapperOnColumnResize: function () {\n              var virtualScrollable = this.virtualScrollable;\n\n              if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n              }\n            },\n            _restoreEditableState: function () {\n              var that = this;\n              var editableState = that._editableState || {};\n              var editedModel = editableState.model;\n              var dataSource = that.dataSource;\n\n              var inlineMode = that._isVirtualInlineEditable();\n\n              var incellMode = that._isVirtualIncellEditable();\n\n              var virtualColumns = that._hasVirtualColumns();\n\n              var row;\n              var cell;\n\n              if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                  that._shouldClearEditableState = false;\n                  that.editRow(editedModel);\n\n                  if (!virtualColumns) {\n                    that._focusEditable();\n                  }\n                } else if (that._editMode() === INCELL) {\n                  row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                  cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                  if (cell[0]) {\n                    that._shouldClearEditableState = false;\n                    that.editCell(cell);\n\n                    if (!virtualColumns) {\n                      that._focusEditable();\n                    }\n                  }\n                }\n              }\n\n              that._shouldClearEditableState = true;\n            },\n            _focusEditable: function () {\n              var that = this;\n              var editedField = (that._editableState || {}).field;\n              var editContainer = that._editContainer;\n\n              if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                  editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                  editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n              }\n            },\n            _canFocusEditable: function () {\n              var that = this;\n              var result = (that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) && (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer));\n              return result;\n            },\n            _cacheEditableState: function () {\n              var that = this;\n              var editContainer = that._editContainer;\n              var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n\n              var inlineMode = that._isVirtualInlineEditable();\n\n              var incellMode = that._isVirtualIncellEditable();\n\n              var virtualColumns = that._hasVirtualColumns();\n\n              var active;\n              var widget;\n\n              if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                  //change event is not fired if the editable container is scrolled\n                  //out of the virtual view with the mousewheel right after editing\n                  active.change();\n                  widget = kendo.widgetInstance(active, kendo.ui);\n\n                  if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                    widget.value(active.val());\n                    widget.trigger(CHANGE);\n                  }\n                }\n\n                if (that._editMode() === INLINE) {\n                  that._editableState = {\n                    model: editedModel,\n                    field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                  };\n                } else if (that._editMode() === INCELL) {\n                  that._editableState = {\n                    model: editedModel,\n                    field: editContainer.attr(kendo.attr(FIELD))\n                  };\n                }\n              }\n            },\n            _clearSortClasses: function () {\n              var that = this,\n                  content = that.content || that.table,\n                  lockedContent = that.lockedContent;\n\n              if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n              }\n\n              if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n              }\n            },\n            _clearEditableState: function () {\n              var that = this;\n\n              if (that.virtualScrollable || that.virtualScroll && that._hasVirtualColumns()) {\n                that._editableState = null;\n              }\n            },\n            _destroyVirtualScrollable: function () {\n              var that = this;\n\n              that._clearEditableState();\n\n              if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n              }\n\n              that.virtualScrollable = null;\n            },\n            _renderNoRecordsContent: function () {\n              var that = this;\n\n              if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                  that.angular(\"cleanup\", function () {\n                    return {\n                      elements: noRecordsElement.get()\n                    };\n                  });\n                  noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                  noRecordsElement = $(that.noRecordsTemplate({})).insertAfter(that.table);\n                  that.angular(\"compile\", function () {\n                    return {\n                      elements: noRecordsElement.get(),\n                      data: [{}]\n                    };\n                  });\n                }\n              }\n            },\n            _setContentWidth: function (scrollLeft) {\n              var that = this,\n                  hiddenDivClass = 'k-grid-content-expander',\n                  hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                  resizable = that.resizable,\n                  expander;\n\n              if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                  if (!expander[0]) {\n                    expander = $(hiddenDiv).appendTo(that.table.parent());\n\n                    if (resizable) {\n                      resizable.bind(\"resize\", that._setContentWidthHandler);\n                    }\n                  }\n\n                  if (that.thead) {\n                    expander.width(that.thead.width());\n\n                    if (!isNaN(parseFloat(scrollLeft, 10))) {\n                      kendo.scrollLeft(that.content, scrollLeft);\n                    }\n                  }\n                } else if (expander[0]) {\n                  expander.remove();\n\n                  if (resizable) {\n                    resizable.unbind(\"resize\", that._setContentWidthHandler);\n                  }\n                }\n\n                that._applyLockedContainersWidth();\n\n                that._syncLockedContentHeight(); // workaround IE does not show vertical scrollbar for elements without width\n\n\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                  that.table[0].style.width = \"1px\";\n                }\n              }\n            },\n            _applyLockedContainersWidth: function () {\n              if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                  width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                  width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader.add(this.lockedContent).width(width);\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + \"px\";\n                headerTable.add(this.table).width(nonLockedColsWidth); //https://github.com/telerik/kendo-ui-core/issues/377\n\n                if (this.virtualScrollable && !isIE11) {\n                  contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + \"px\";\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                  this.lockedFooter.width(width);\n                  footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                  footerWrap[0].style.width = headerWrap[0].clientWidth + \"px\";\n                  footerWrap.children().first().width(nonLockedColsWidth);\n                }\n              }\n            },\n            _setContentHeight: function () {\n              var that = this,\n                  options = that.options,\n                  height,\n                  header = that.wrapper.children(\".k-grid-header\"),\n                  scrollbar = kendo.support.scrollbar();\n              var scrollableHeight = (options.scrollable || {}).height;\n\n              if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                  // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                  that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                  height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                  height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                  height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                  height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                var isGridHeightSet = function (el) {\n                  var initialHeight, newHeight;\n\n                  if (el[0].style.height) {\n                    return true;\n                  } else {\n                    initialHeight = el.height();\n                  }\n\n                  el.height(\"auto\");\n                  newHeight = el.height();\n\n                  if (initialHeight != newHeight) {\n                    el.height(\"\");\n                    return true;\n                  }\n\n                  el.height(\"\");\n                  return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) {\n                  // set content height only if needed\n                  if (height > scrollbar * 2) {\n                    // do not set height if proper scrollbar cannot be displayed\n                    if (that.lockedContent) {\n                      scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                      that.lockedContent.height(height - scrollbar);\n                    }\n\n                    that.content.height(height);\n                  } else {\n                    that.content.height(scrollbar * 2 + 1);\n                  }\n                }\n              }\n            },\n            _averageRowHeight: function () {\n              var that = this,\n                  itemsCount = that._items(that.tbody, true).length,\n                  rowHeight = that._rowHeight;\n\n              if (itemsCount === 0) {\n                return rowHeight;\n              }\n\n              if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n              }\n\n              var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n              if (rowHeight !== currentRowHeight) {\n                that._measures++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n              }\n\n              return rowHeight;\n            },\n            _dataSource: function () {\n              var that = this,\n                  options = that.options,\n                  pageable,\n                  dataSource = options.dataSource;\n              dataSource = isArray(dataSource) ? {\n                data: dataSource\n              } : dataSource;\n\n              if (isPlainObject(dataSource)) {\n                extend(dataSource, {\n                  table: that.table,\n                  fields: that.columns\n                });\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                  dataSource.pageSize = pageable.pageSize;\n                }\n              }\n\n              if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler).unbind(SORT, that._sortHandler);\n              } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n              }\n\n              that.dataSource = DataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler).bind(SORT, that._sortHandler);\n            },\n            _error: function () {\n              this._progress(false);\n            },\n            _requestStart: function () {\n              this._progress(true);\n            },\n            _modelChange: function (e) {\n              var that = this,\n                  tbody = that.tbody,\n                  model = e.model,\n                  row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                  relatedRow,\n                  cell,\n                  column,\n                  isAlt = row.hasClass(\"k-alt\"),\n                  tmp,\n                  idx = that._items(tbody).index(row),\n                  isLocked = that.lockedContent,\n                  selectable,\n                  selectableRow,\n                  childCells,\n                  originalCells,\n                  length;\n\n              if (isLocked) {\n                relatedRow = that._relatedRow(row);\n              }\n\n              if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function () {\n                  cell = $(this);\n                  column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                  if (column.field === e.field) {\n                    if (!cell.hasClass(\"k-edit-cell\")) {\n                      that._displayCell(cell, column, model);\n                    } else {\n                      cell.addClass(\"k-dirty-cell\");\n                    }\n                  }\n                });\n              } else if (!row.hasClass(\"k-grid-edit-row\")) {\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                  tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n                  selectableRow = selectableRow.add(relatedRow);\n                  relatedRow.replaceWith(tmp);\n                }\n\n                that.angular(\"cleanup\", function () {\n                  return {\n                    elements: selectableRow.get()\n                  };\n                });\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n                row.replaceWith(tmp);\n                tmp = that._items(tbody).eq(idx);\n                var angularData = [{\n                  dataItem: model\n                }];\n\n                if (isLocked) {\n                  row = row.add(relatedRow);\n                  relatedRow = that._relatedRow(tmp)[0];\n                  adjustRowHeight(tmp[0], relatedRow);\n                  tmp = tmp.add(relatedRow);\n                  angularData.push({\n                    dataItem: model\n                  });\n                }\n\n                that.angular(\"compile\", function () {\n                  return {\n                    elements: tmp.get(),\n                    data: angularData\n                  };\n                });\n                selectable = that.options.selectable;\n\n                if ((selectable || that._checkBoxSelection) && row.hasClass(\"k-selected\")) {\n                  that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                  column = that.columns[idx];\n                  cell = childCells.eq(idx);\n\n                  if (selectable && originalCells.eq(idx).hasClass(\"k-selected\")) {\n                    cell.addClass(\"k-selected\");\n                  }\n                }\n\n                that.trigger(\"itemChange\", {\n                  item: tmp,\n                  data: model,\n                  ns: ui\n                });\n              }\n            },\n            _pageable: function () {\n              var that = this,\n                  pagerWrap,\n                  pageable = that.options.pageable,\n                  navigatable = that.options.navigatable;\n\n              if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                  pagerWrap = $('<div class=\"k-pager-wrap k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                  pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                  pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                  that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                  that.pager = pageable;\n                } else {\n                  if (that.dataSource._groupPaging) {\n                    that.pager = new GroupsPager(pagerWrap, extend({}, pageable, {\n                      dataSource: that.dataSource,\n                      navigatable: navigatable\n                    }));\n                  } else {\n                    that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, {\n                      dataSource: that.dataSource,\n                      navigatable: navigatable\n                    }));\n                  }\n                }\n\n                that.pager.bind(\"pageChange\", function (e) {\n                  if (that.trigger(\"page\", {\n                    page: e.index\n                  })) {\n                    e.preventDefault();\n                  }\n                });\n\n                that._togglePagerVisibility();\n              }\n            },\n            _footer: function () {\n              var that = this,\n                  aggregates = that.dataSource.aggregates(),\n                  html = \"\",\n                  footerTemplate = that.footerTemplate,\n                  options = that.options,\n                  footerWrap,\n                  footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n              if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n\n                if (footer.length) {\n                  var tmp = html;\n                  that.angular(\"cleanup\", function () {\n                    return {\n                      elements: footer.get()\n                    };\n                  });\n                  footer.replaceWith(tmp);\n                  footer = that.footer = tmp;\n                } else {\n                  if (options.scrollable) {\n                    footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                  } else {\n                    footer = that.footer = html.insertAfter(that.tbody);\n                  }\n                }\n\n                that.angular(\"compile\", function () {\n                  return {\n                    elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                    data: map(that.columns, function (col) {\n                      return {\n                        column: col,\n                        aggregate: aggregates[col.field]\n                      };\n                    })\n                  };\n                });\n              } else if (footer && !that.footer) {\n                that.footer = footer;\n              }\n\n              if (footer.length) {\n                if (options.scrollable) {\n                  footerWrap = footer.attr(\"tabindex\", -1).children(\".k-grid-footer-wrap\");\n                  that.scrollables = $(that.scrollables.filter(function () {\n                    return !$(this).is(\".k-grid-footer-wrap\");\n                  }).toArray()).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                  footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                  var offset = kendo.scrollLeft(that.content);\n\n                  if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                    offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                  }\n\n                  kendo.scrollLeft(footerWrap, offset);\n                }\n              }\n\n              if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n\n                that._applyLockedContainersWidth();\n\n                that._syncLockedFooterHeight();\n              }\n            },\n            _wrapFooter: function (footerRow) {\n              var that = this,\n                  html = \"\",\n                  scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n              if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table><tbody>' + footerRow + '</tbody></table></div></div>');\n\n                that._appendCols(html.find(\"table\"));\n\n                html.css(isRtl ? \"padding-left\" : \"padding-right\", scrollbar); // Update inner fix.\n\n                return html;\n              }\n\n              return '<tfoot class=\"k-grid-footer\">' + footerRow + '</tfoot>';\n            },\n            _columnMenu: function () {\n              var that = this,\n                  menu,\n                  columns = leafColumns(that.columns),\n                  column,\n                  options = that.options,\n                  columnMenu = options.columnMenu,\n                  menuOptions,\n                  sortable,\n                  filterable,\n                  cells,\n                  hasMultiColumnHeaders = grep(that.columns, function (item) {\n                return item.columns !== undefined;\n              }).length > 0,\n                  hasLockableColumns = grep(that.columns, function (item) {\n                return item.lockable !== false;\n              }).length > 0,\n                  hasStickableColumns = grep(that.columns, function (item) {\n                return item.stickable === true;\n              }).length > 0,\n                  isMobile = this._isMobile,\n                  initCallback = function (e) {\n                that.trigger(COLUMNMENUINIT, {\n                  field: e.field,\n                  container: e.container\n                });\n              },\n                  openCallback = function (e) {\n                that.trigger(COLUMNMENUOPEN, {\n                  field: e.field,\n                  container: e.container\n                });\n              },\n                  closeCallback = function (element) {\n                focusTable(element.closest(\"table\"), true);\n              },\n                  stickCallback = function (e) {\n                that.trigger(COLUMNSTICK, {\n                  column: e.column\n                });\n              },\n                  unstickCallback = function (e) {\n                that.trigger(COLUMNUNSTICK, {\n                  column: e.column\n                });\n              },\n                  sortHandler = function (e) {\n                if (that.trigger(\"sort\", {\n                  sort: e.sort\n                })) {\n                  e.preventDefault();\n                } else {\n                  that._clearEditableState();\n\n                  if (that.dataSource.options.endless) {\n                    that._resetEndless();\n                  }\n                }\n              },\n                  filterHandler = function (e) {\n                if (that.trigger(\"filter\", {\n                  filter: e.filter,\n                  field: e.field\n                })) {\n                  e.preventDefault();\n                } else {\n                  that._clearEditableState();\n\n                  if (that.dataSource.options.endless) {\n                    that._resetEndless();\n                  }\n                }\n              },\n                  $angular = options.$angular;\n\n              if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                  columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                  column = columns[idx];\n                  var cell = cells.eq(idx);\n\n                  if (!column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                    menu = cell.data(\"kendoColumnMenu\");\n\n                    if (menu) {\n                      menu.destroy();\n                    }\n\n                    sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                      compare: (column.sortable || {}).compare\n                    }) : false;\n                    filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({\n                      pane: that.pane\n                    }, options.filterable, column.filterable) : false;\n\n                    if (column.filterable && column.filterable.dataSource) {\n                      filterable.forceUnique = false;\n                      filterable.checkSource = column.filterable.dataSource;\n                    }\n\n                    if (filterable) {\n                      filterable.format = column.format;\n                    }\n\n                    menuOptions = {\n                      dataSource: that.dataSource,\n                      values: column.values,\n                      columns: columnMenu.columns,\n                      sortable: sortable,\n                      filterable: filterable,\n                      messages: columnMenu.messages,\n                      owner: that,\n                      closeCallback: closeCallback,\n                      init: initCallback,\n                      open: openCallback,\n                      stick: stickCallback,\n                      unstick: unstickCallback,\n                      pane: that.pane,\n                      sort: sortHandler,\n                      filtering: filterHandler,\n                      filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                      hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                      hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                      encodeTitles: that.options.encodeTitles,\n                      componentType: columnMenu.componentType,\n                      appendTo: DOT + classNames.headerCellInner\n                    };\n\n                    if ($angular) {\n                      menuOptions.$angular = $angular;\n                    }\n\n                    cell.kendoColumnMenu(menuOptions);\n                  }\n                }\n              }\n            },\n            _headerCells: function () {\n              return $(this.thead).find(\"th\").filter(function () {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n              });\n            },\n            _hasFilterMenu: function () {\n              var filterable = this.options.filterable;\n\n              if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n              }\n\n              return filterable;\n            },\n            _filterable: function () {\n              var that = this,\n                  columns = leafColumns(that.columns),\n                  filterMenu,\n                  cells,\n                  cell,\n                  filterInit = function (e) {\n                that.trigger(FILTERMENUINIT, {\n                  field: e.field,\n                  container: e.container\n                });\n              },\n                  closeCallback = function (element) {\n                focusTable(element.closest(\"table\"), true);\n              },\n                  filterHandler = function (e) {\n                if (that.trigger(\"filter\", {\n                  filter: e.filter,\n                  field: e.field\n                })) {\n                  e.preventDefault();\n                } else {\n                  that._clearEditableState();\n\n                  if (that.dataSource.options.endless) {\n                    that._resetEndless();\n                  }\n                }\n              },\n                  filterOpen = function (e) {\n                that.trigger(FILTERMENUOPEN, {\n                  field: e.field,\n                  container: e.container\n                });\n              },\n                  filterable = that._hasFilterMenu();\n\n              if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead); //that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                  cell = cells.eq(idx);\n\n                  if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                    filterMenu = cell.data(\"kendoFilterMenu\");\n\n                    if (filterMenu) {\n                      filterMenu.destroy();\n                    }\n\n                    filterMenu = cell.data(\"kendoFilterMultiCheck\");\n\n                    if (filterMenu) {\n                      filterMenu.destroy();\n                    }\n\n                    var columnFilterable = columns[idx].filterable;\n                    var options = extend({}, filterable, columnFilterable, {\n                      dataSource: that.dataSource,\n                      values: columns[idx].values,\n                      format: columns[idx].format,\n                      closeCallback: closeCallback,\n                      title: columns[idx].title || columns[idx].field,\n                      init: filterInit,\n                      open: filterOpen,\n                      pane: that.pane,\n                      change: filterHandler,\n                      appendTo: DOT + classNames.headerCellInner\n                    });\n\n                    if (columnFilterable && columnFilterable.messages) {\n                      options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                    }\n\n                    if (columnFilterable && columnFilterable.dataSource) {\n                      options.forceUnique = false;\n                      options.checkSource = columnFilterable.dataSource;\n                    }\n\n                    if (columnFilterable && columnFilterable.multi) {\n                      cell.kendoFilterMultiCheck(options);\n                    } else {\n                      cell.kendoFilterMenu(options);\n                    }\n                  }\n                }\n              }\n            },\n            _filterRow: function () {\n              var that = this;\n\n              if (!that._hasFilterRow()) {\n                return;\n              }\n\n              var settings;\n              var $angular = that.options.$angular;\n\n              var columns = leafColumns(that.columns),\n                  filterable = that.options.filterable,\n                  rowheader = that.thead.find(\".k-filter-row\"),\n                  filterHandler = function (e) {\n                if (that.trigger(\"filter\", {\n                  filter: e.filter,\n                  field: e.field\n                })) {\n                  e.preventDefault();\n                } else {\n                  that._clearEditableState();\n\n                  if (that.dataSource.options.endless) {\n                    that._resetEndless();\n                  }\n                }\n              };\n\n              this._updateHeader(this.dataSource.group().length);\n\n              for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    th = $(\"<th/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                  th.hide();\n                }\n\n                rowheader.append(th);\n\n                if (field && col.filterable !== false) {\n                  var cellOptions = col.filterable && col.filterable.cell || {};\n                  suggestDataSource = that.options.dataSource;\n\n                  if (suggestDataSource instanceof DataSource) {\n                    suggestDataSource = that.options.dataSource.options;\n                  }\n\n                  var messages = extend(true, {}, filterable.messages);\n\n                  if (col.filterable) {\n                    extend(true, messages, col.filterable.messages);\n                  }\n\n                  if (cellOptions.enabled === false) {\n                    th.html(\"&nbsp;\");\n                    continue;\n                  }\n\n                  if (cellOptions.dataSource) {\n                    suggestDataSource = cellOptions.dataSource;\n                    customDataSource = true;\n                  }\n\n                  if (col.filterable && col.filterable.operators) {\n                    operators = col.filterable.operators;\n                  }\n\n                  settings = {\n                    column: col,\n                    dataSource: that.dataSource,\n                    suggestDataSource: suggestDataSource,\n                    customDataSource: customDataSource,\n                    field: field,\n                    messages: messages,\n                    values: col.values,\n                    template: cellOptions.template,\n                    delay: cellOptions.delay,\n                    inputWidth: cellOptions.inputWidth,\n                    suggestionOperator: cellOptions.suggestionOperator,\n                    minLength: cellOptions.minLength,\n                    dataTextField: cellOptions.dataTextField,\n                    operator: cellOptions.operator,\n                    operators: operators,\n                    showOperators: cellOptions.showOperators,\n                    change: filterHandler\n                  };\n\n                  if ($angular) {\n                    settings.$angular = $angular;\n                  }\n\n                  $(\"<span/>\").attr(kendo.attr(\"field\"), field).appendTo(th).kendoFilterCell(settings);\n                } else {\n                  th.html(\"&nbsp;\");\n                }\n\n                th.data(\"column\", col);\n              }\n\n              this._filterFocusable().attr(\"tabindex\", -1);\n            },\n            _sortable: function () {\n              var that = this,\n                  columns = leafColumns(that.columns),\n                  column,\n                  sorterInstance,\n                  cell,\n                  sortable = that.options.sortable,\n                  sortHandler = function (e) {\n                if (that.trigger(\"sort\", {\n                  sort: e.sort\n                })) {\n                  e.preventDefault();\n                } else {\n                  that._clearEditableState();\n                }\n              };\n\n              if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                  column = columns[idx];\n\n                  if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                      sorterInstance.destroy();\n                    }\n\n                    cell.attr(\"data-\" + kendo.ns + \"field\", column.field).kendoColumnSorter(extend({}, sortable, column.sortable, {\n                      dataSource: that.dataSource,\n                      aria: true,\n                      filter: \":not(.k-column-active)\",\n                      change: sortHandler\n                    }));\n                  }\n                }\n\n                cells = null;\n              }\n            },\n            _columns: function (columns) {\n              var that = this,\n                  table = that.table,\n                  encoded,\n                  cols = table.find(\"col\"),\n                  lockedCols,\n                  headerRows = that.element.find('thead tr'),\n                  dataSource = that.options.dataSource,\n                  draggableColumns; // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n\n              columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function (th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                  field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                  field: field,\n                  type: type,\n                  title: title,\n                  sortable: sortable !== \"false\",\n                  filterable: filterable !== \"false\",\n                  groupable: groupable !== \"false\",\n                  menu: menu !== \"false\",\n                  template: th.attr(kendo.attr(\"template\")),\n                  width: cols.eq(idx).css(\"width\")\n                };\n              });\n              encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n              if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                  throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n              }\n\n              if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n              }\n\n              that.columns = normalizeColumns(columns, encoded);\n\n              if ($.grep(leafColumns(that.columns), function (col) {\n                return col.selectable;\n              }).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n              }\n\n              draggableColumns = $.grep(leafColumns(that.columns), function (col) {\n                return col.draggable;\n              });\n\n              if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                  draggableColumns[i].headerAttributes = $.extend({\n                    \"aria-label\": that.options.messages.dragHandleLabel\n                  }, draggableColumns[i].headerAttributes);\n                }\n              }\n\n              that._foreignKeyBindings(that.columns);\n            },\n            _foreignKeyBindings: function (columns) {\n              var that = this;\n              var length = columns.length;\n              var column;\n\n              for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                  that._fetchForeignKeyValues(column);\n                }\n              }\n            },\n            _fetchForeignKeyValues: function (column) {\n              var that = this;\n              var promise = $.Deferred();\n              that._hasBoundForeignKey = true;\n              column.dataSource = DataSource.create(column.dataSource);\n\n              if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n              }\n\n              that._foreignKeyPromises.push(promise);\n\n              column.dataSource.fetch().then(function () {\n                var data = column.dataSource.data();\n                column.values = data.map(function (item) {\n                  return {\n                    value: item[column.dataValueField],\n                    text: item[column.dataTextField]\n                  };\n                });\n                promise.resolve();\n              });\n            },\n            _updateColumnIDs: function (columns, tr) {\n              if (!columns.length) {\n                return;\n              }\n\n              var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n              var id;\n\n              for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(\"id\");\n\n                if (id) {\n                  columns[i].headerAttributes = extend(columns[i].headerAttributes, {\n                    id: id\n                  });\n                }\n              }\n\n              this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n            _headerCheckboxClick: function (e) {\n              var that = this,\n                  checkBox = $(e.target),\n                  checked = checkBox.prop(\"checked\");\n\n              if (!that._belongsToGrid(checkBox)) {\n                return;\n              }\n\n              if (checked) {\n                that.select(that.items());\n              } else {\n                that.clearSelection();\n              }\n            },\n            _checkboxClick: function (e) {\n              var that = this,\n                  row = $(e.target).closest(\"tr\"),\n                  isSelecting = !row.hasClass(SELECTED);\n\n              if (!that._belongsToGrid(row)) {\n                return;\n              }\n\n              if (isSelecting) {\n                that.select(row);\n              } else {\n                that._deselectCheckRows(row);\n              }\n            },\n            _groups: function () {\n              var group = this.dataSource.group();\n              return group ? group.length : 0;\n            },\n            _tmpl: function (rowTemplate, columns, alt, skipGroupCells) {\n              var that = this,\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  paramName = settings.paramName,\n                  idx,\n                  length = columns.length,\n                  template,\n                  state = {\n                storage: {},\n                count: 0\n              },\n                  column,\n                  type,\n                  hasDetails = that._hasDetails(),\n                  className = [],\n                  groups = that._groups(),\n                  navigatable = that.options.navigatable;\n\n              var fieldAttr = kendo.attr(\"field\");\n              var field;\n              var dirtyCellTemplate = \"\";\n              var classAttribute;\n\n              if (!rowTemplate) {\n                rowTemplate = \"<tr\";\n\n                if (alt) {\n                  className.push(\"k-alt\");\n                }\n\n                className.push(\"k-master-row\");\n\n                if (className.length) {\n                  rowTemplate += ' class=\"' + className.join(\" \") + '\"';\n                }\n\n                if (length) {\n                  // data item is an object\n                  rowTemplate += ' ' + kendo.attr(\"uid\") + '=\"#=' + kendo.expr(\"uid\", settings.paramName) + '#\"';\n                }\n\n                rowTemplate += \" role='row'>\";\n\n                if (groups > 0 && !skipGroupCells) {\n                  rowTemplate += groupCells(groups);\n                }\n\n                if (hasDetails) {\n                  rowTemplate += '<td class=\"k-hierarchy-cell\" aria-expanded=\"false\"><a class=\"k-icon k-i-expand\" href=\"\\\\#\" ' + ARIALABEL + '=\"' + EXPAND + '\" tabindex=\"-1\"></a></td>';\n                }\n\n                for (idx = 0; idx < length; idx++) {\n                  column = columns[idx];\n                  template = column.template;\n                  type = typeof template;\n                  field = column.field;\n\n                  if (that._editMode() === INCELL && field) {\n                    column.attributes = column.attributes || {};\n\n                    if (that.virtualScroll) {\n                      column.attributes[fieldAttr] = field;\n                    }\n\n                    dirtyCellTemplate = that._dirtyCellTemplate(field, paramName);\n                    column.attributes[\"class\"] = column.attributes[\"class\"] || \"\";\n\n                    if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                      column.attributes[\"class\"] += dirtyCellTemplate;\n                    }\n                  }\n\n                  if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) {\n                    //virtual cell should be visible at all times\n                    column.attributes = removeHiddenStyle(column.attributes);\n                  } else if (!column.colSpan && column.hidden) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                  }\n\n                  if (column.command) {\n                    column.attributes = column.attributes || {};\n                    classAttribute = column.attributes[\"class\"];\n\n                    if (typeof classAttribute !== \"undefined\") {\n                      if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                        column.attributes[\"class\"] += \" k-command-cell\";\n                      }\n                    } else {\n                      column.attributes[\"class\"] = \"k-command-cell\";\n                    }\n                  }\n\n                  if (column.draggable) {\n                    column.attributes = column.attributes || {};\n\n                    if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                      column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                    } else {\n                      column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                    }\n\n                    if (typeof column.attributes[\"aria-label\"] === \"undefined\") {\n                      column.attributes[\"aria-label\"] = that.options.messages.dragHandleLabel;\n                    }\n\n                    if (typeof column.attributes.style !== \"undefined\") {\n                      column.attributes.style += \" cursor: move;\";\n                    } else {\n                      column.attributes.style = \"cursor: move;\";\n                    }\n                  }\n\n                  rowTemplate += \"<td\" + stringifyAttributes(column.attributes);\n\n                  if (navigatable && !column.draggable) {\n                    rowTemplate += \" aria-describedby='\" + column.headerAttributes.id + \"'\";\n                  }\n\n                  if (column.colSpan) {\n                    if (column.colSpan > 1) {\n                      rowTemplate += \" \" + kendo.attr(\"virtual\");\n                    }\n\n                    rowTemplate += \" colSpan='\" + column.colSpan + \"'\";\n                  }\n\n                  rowTemplate += \" role='gridcell'>\";\n                  rowTemplate += that._cellTmpl(column, state);\n                  rowTemplate += \"</td>\";\n                }\n\n                rowTemplate += \"</tr>\";\n              }\n\n              rowTemplate = kendo.template(rowTemplate, settings);\n\n              if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n              }\n\n              return rowTemplate;\n            },\n            _dirtyCellTemplate: function (field, paramName) {\n              var dirtyField;\n\n              if (field && paramName) {\n                dirtyField = field.charAt(0) === \"[\" ? kendo.expr(field, paramName + \".dirtyFields\") : paramName + \".dirtyFields['\" + field + \"']\";\n                return \"#= \" + paramName + \" && \" + paramName + \".dirty && \" + paramName + \".dirtyFields && \" + dirtyField + \" ? ' k-dirty-cell' : '' #\";\n              }\n\n              return \"\";\n            },\n            _headerCellText: function (column) {\n              var that = this,\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  template = column.headerTemplate,\n                  type = typeof template,\n                  text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n              if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n              } else if (type === STRING) {\n                text = template;\n              }\n\n              return text;\n            },\n            _cellTmpl: function (column, state) {\n              var that = this,\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  template = column.template,\n                  paramName = settings.paramName,\n                  field = column.field,\n                  html = \"\",\n                  idx,\n                  length,\n                  format = column.format,\n                  type = typeof template,\n                  columnValues = column.values;\n\n              if (column.command) {\n                if (isArray(column.command)) {\n                  for (idx = 0, length = column.command.length; idx < length; idx++) {\n                    if (column.command[idx].visible) {\n                      html += kendo.format(\"#= {0}(data)? '{1}':'' #\", column.command[idx].visible, that._createButton(column.command[idx]).replace(templateHashRegExp, \"\\\\#\").replace(/'/ig, \"\\\\'\"));\n                    } else {\n                      html += that._createButton(column.command[idx]).replace(templateHashRegExp, \"\\\\#\");\n                    }\n                  }\n\n                  return html;\n                }\n\n                return that._createButton(column.command).replace(templateHashRegExp, \"\\\\#\");\n              }\n\n              if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n              }\n\n              if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n              }\n\n              html += that._dirtyIndicatorTemplate(field, paramName);\n\n              if (type === FUNCTION) {\n                state.storage[\"tmpl\" + state.count] = template;\n                html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                state.count++;\n              } else if (type === STRING) {\n                html += template;\n              } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                html += \"#var v =\" + kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp, \"\\\\#\") + \"#\";\n                html += \"#var f = v[\";\n\n                if (!settings.useWithBlock) {\n                  html += paramName + \".\";\n                }\n\n                html += field + \"]#\";\n                html += \"${f != null ? f : ''}\";\n              } else {\n                html += column.encoded ? \"#:\" : \"#=\";\n\n                if (format) {\n                  html += 'kendo.format(\\\"' + format.replace(formatRegExp, \"\\\\$1\") + '\\\",';\n                }\n\n                if (field) {\n                  field = kendo.expr(field, paramName);\n                  html += field + \"==null?'':\" + field;\n                } else {\n                  html += \"''\";\n                }\n\n                if (format) {\n                  html += \")\";\n                }\n\n                html += \"#\";\n              }\n\n              return html;\n            },\n            _dirtyIndicatorTemplate: function (field, paramName) {\n              var dirtyField;\n\n              if (field && paramName) {\n                dirtyField = field.charAt(0) === \"[\" ? kendo.expr(field, paramName + \".dirtyFields\") : paramName + \".dirtyFields['\" + field + \"']\";\n                return \"#= \" + paramName + \" && \" + paramName + \".dirty && \" + paramName + \".dirtyFields && \" + dirtyField + \" ? '<span class=\\\"k-dirty\\\"></span>' : '' #\";\n              }\n\n              return \"\";\n            },\n            _virtualCols: function (columns) {\n              var that = this;\n              var widths = $.map(columns, function (c) {\n                return c.hidden ? 0 : parseInt(c.width, 10);\n              });\n              var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n              var tableWidth = outerWidth(that.content);\n              var sumOfWidths = sumWidths(columns);\n              var colsToRender = [];\n              var firstColspan = 0;\n              var lastColspan = 0;\n              var hiddenColumns = 0;\n              var idx = 0;\n              var widthOfHiddenColumns = 0;\n              var considerNext;\n\n              for (idx = 0; idx < columns.length; idx++) {\n                considerNext = idx < widths.length - 1 ? widths[idx + 1] : 0;\n\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                  if (widths[idx]) {\n                    hiddenColumns++;\n                  }\n\n                  widthOfHiddenColumns += widths[idx];\n                } else {\n                  firstColspan = 1 + hiddenColumns;\n                  break;\n                }\n              }\n\n              hiddenColumns = 0;\n              widthOfHiddenColumns = 0;\n\n              for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                  if (widths[i]) {\n                    hiddenColumns++;\n                  }\n\n                  widthOfHiddenColumns += widths[i];\n                } else {\n                  lastColspan = 1 + hiddenColumns;\n\n                  for (var j = idx; j <= i; j++) {\n                    if (columns[j].locked) {\n                      continue;\n                    }\n\n                    colsToRender.push(columns[j]);\n\n                    if (columns[j].colSpan) {\n                      delete columns[j].colSpan;\n                    }\n                  }\n\n                  colsToRender[0].colSpan = firstColspan;\n                  colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                  break;\n                }\n              }\n\n              if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n              }\n\n              that.virtualCols = colsToRender;\n              return colsToRender;\n            },\n            _templates: function () {\n              var that = this,\n                  options = that.options,\n                  dataSource = that.dataSource,\n                  groups = dataSource.group(),\n                  footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                  aggregates = dataSource.aggregate(),\n                  columnLeafs = leafColumns(that.columns),\n                  columnsLocked = leafColumns(lockedColumns(that.columns)),\n                  leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                  columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                  groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function (column, index) {\n                return column.groupHeaderColumnTemplate && index !== 0;\n              }),\n                  groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function (column) {\n                return column.groupHeaderColumnTemplate;\n              });\n\n              if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                  throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n              } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n              }\n\n              if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || \"\");\n              }\n\n              if (that._group && !isEmptyObject(aggregates) || !isEmptyObject(aggregates) && !footer.length || grep(columnLeafs, function (column) {\n                return column.footerTemplate;\n              }).length) {\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template\");\n              }\n\n              if (groups && grep(columnLeafs, function (column) {\n                return column.groupFooterTemplate;\n              }).length) {\n                aggregates = $.map(groups, function (g) {\n                  return g.aggregates;\n                });\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                  that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer\");\n                }\n              }\n\n              if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function (g) {\n                  return g.aggregates;\n                });\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-grouping-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                  that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-grouping-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n              } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n              }\n\n              if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n              }\n            },\n            _noRecordsTmpl: function () {\n              var wrapper = '<div class=\"{0}\">{1}</div>';\n              var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n              var scrollableNoGridHeightStyles = this.options.scrollable && !this.wrapper[0].style.height ? ' style=\"margin:0 auto;position:static;\"' : '';\n              var state = {\n                storage: {},\n                count: 0\n              };\n              var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n              var paramName = settings.paramName;\n              var template;\n              var html = \"\";\n              var type;\n              var tmpl;\n\n              if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n              } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n              }\n\n              type = typeof template;\n\n              if (type === \"function\") {\n                state.storage[\"tmpl\" + state.count] = template;\n                html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                state.count++;\n              } else if (type === \"string\") {\n                html += template;\n              }\n\n              tmpl = kendo.template(kendo.format(wrapper, NORECORDSCLASS, html), settings);\n\n              if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n              }\n\n              return tmpl;\n            },\n            _footerTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells) {\n              var that = this,\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  paramName = settings.paramName,\n                  html = \"\",\n                  idx,\n                  length,\n                  template,\n                  type,\n                  storage = {},\n                  count = 0,\n                  scope = {},\n                  groups = that._groups(),\n                  fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                  column;\n\n              html += '<tr class=\"' + rowClass + '\">';\n\n              if (groups > 0 && !skipGroupCells) {\n                html += groupCells(groups);\n              }\n\n              if (that._hasDetails()) {\n                html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n              }\n\n              for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n                template = column[templateName];\n                type = typeof template;\n                html += \"<td\" + stringifyAttributes(column.footerAttributes) + \">\";\n\n                if (template) {\n                  if (type !== FUNCTION) {\n                    scope = fieldsMap[column.field] ? extend({}, settings, {\n                      paramName: paramName + \"['\" + column.field + \"']\"\n                    }) : {};\n                    template = kendo.template(template, scope);\n                  }\n\n                  storage[\"tmpl\" + count] = template;\n                  html += \"#=this.tmpl\" + count + \"(\" + paramName + \")#\";\n                  count++;\n                } else {\n                  html += \"&nbsp;\";\n                }\n\n                html += \"</td>\";\n              }\n\n              html += '</tr>';\n              html = kendo.template(html, settings);\n\n              if (count > 0) {\n                return html.bind(storage);\n              }\n\n              return html;\n            },\n            _groupHeaderTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n              var that = this,\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  paramName = settings.paramName,\n                  html = \"\",\n                  idx,\n                  length,\n                  template,\n                  type,\n                  storage = {},\n                  count = 0,\n                  scope = {},\n                  fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                  column,\n                  headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                  groupHeaderColumnTemplateClass;\n\n              html += '<tr role=\"row\" class=\"' + rowClass + '\">';\n\n              if (!skipGroupCells) {\n                html += '# for (var i = 0; i < data.groupCells; i++) { #' + '<td class=\"k-group-cell\">' + '&nbsp;' + '</td>' + '# } #';\n              }\n\n              if (that._hasDetails()) {\n                html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n              }\n\n              if (headerTemplateIndex < 0) {\n                html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                return;\n              }\n\n              if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                return kendo.template(html, settings);\n              }\n\n              if (headerTemplateIndex < MINCOLSPANVALUE) {\n                headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : '';\n              } else {\n                html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : groupCellLockedContentBuilder(headerTemplateIndex);\n              }\n\n              for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n                template = column[templateName];\n                type = typeof template;\n\n                if (column.sticky) {\n                  groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass || '';\n\n                  if (!groupHeaderColumnTemplateClass) {\n                    groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                  }\n\n                  html += \"<td class='\" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"' style='\" + (column.stickyStyle || '') + \"'>\";\n                } else {\n                  html += \"<td>\";\n                }\n\n                if (template) {\n                  if (type !== FUNCTION) {\n                    scope = fieldsMap[column.field] ? extend({}, settings, {\n                      paramName: paramName + \"['\" + column.field + \"']\"\n                    }) : {};\n                    template = kendo.template(template, scope);\n                  }\n\n                  storage[\"tmpl\" + count] = template;\n                  html += \"#=this.tmpl\" + count + \"(\" + paramName + \")#\";\n                  count++;\n                } else {\n                  html += \"&nbsp;\";\n                }\n\n                html += \"</td>\";\n              }\n\n              html += '</tr>';\n              html = kendo.template(html, settings);\n\n              if (count > 0) {\n                return html.bind(storage);\n              }\n\n              return html;\n            },\n            _detailTmpl: function (template) {\n              var that = this,\n                  html = \"\",\n                  settings = extend({}, kendo.Template, that.options.templateSettings),\n                  paramName = settings.paramName,\n                  templateFunctionStorage = {},\n                  templateFunctionCount = 0,\n                  groups = that._groups(),\n                  colspan = visibleColumns(leafColumns(that.columns)).length,\n                  type = typeof template;\n\n              html += '<tr class=\"k-detail-row\">';\n\n              if (groups > 0) {\n                html += groupCells(groups);\n              }\n\n              html += '<td class=\"k-hierarchy-cell\"></td><td class=\"k-detail-cell\"' + (colspan ? ' colspan=\"' + colspan + '\"' : '') + \">\";\n\n              if (type === FUNCTION) {\n                templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                html += \"#=this.tmpl\" + templateFunctionCount + \"(\" + paramName + \")#\";\n                templateFunctionCount++;\n              } else {\n                html += template;\n              }\n\n              html += \"</td></tr>\";\n              html = kendo.template(html, settings);\n\n              if (templateFunctionCount > 0) {\n                return html.bind(templateFunctionStorage);\n              }\n\n              return html;\n            },\n            _hasDetails: function () {\n              var that = this;\n              return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function () {\n              var filterable = this.options.filterable;\n              var hasFiltering = filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"row\") != -1;\n              var columns = this.columns;\n              var columnsWithoutFiltering = $.grep(columns, function (col) {\n                return col.filterable === false;\n              });\n\n              if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n              }\n\n              return hasFiltering;\n            },\n            _details: function () {\n              var that = this;\n\n              if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n              }\n\n              that.table.on(CLICK + NS, \".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse\", function (e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n\n                e.preventDefault();\n                return false;\n              });\n            },\n            _toggleDetails: function (button, omitAnimation) {\n              var that = this,\n                  cell = button.closest(\"td.k-hierarchy-cell\"),\n                  expanding = button.hasClass(\"k-i-expand\"),\n                  masterRow = button.closest(\"tr.k-master-row\"),\n                  detailRow,\n                  detailTemplate = that.detailTemplate,\n                  data,\n                  hasDetails = that._hasDetails(),\n                  ariaLabelText = expanding ? COLLAPSE : EXPAND,\n                  ariaExpandText = expanding ? true : false;\n\n              button.toggleClass(\"k-i-expand\", !expanding).toggleClass(\"k-i-collapse\", expanding).attr(ARIALABEL, ariaLabelText);\n              cell.attr(\"aria-expanded\", ariaExpandText);\n              detailRow = masterRow.next();\n\n              if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n                detailRow = $(detailTemplate(data)).addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\").insertAfter(masterRow);\n                that.angular(\"compile\", function () {\n                  return {\n                    elements: detailRow.get(),\n                    data: [{\n                      dataItem: data\n                    }]\n                  };\n                });\n                that.trigger(DETAILINIT, {\n                  masterRow: masterRow,\n                  detailRow: detailRow,\n                  data: data,\n                  detailCell: detailRow.find(\".k-detail-cell\")\n                });\n              }\n\n              that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, {\n                masterRow: masterRow,\n                detailRow: detailRow\n              });\n\n              if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n              } else {\n                detailRow.toggle(expanding);\n              }\n            },\n            dataItem: function (tr) {\n              tr = $(tr)[0];\n\n              if (!tr) {\n                return null;\n              }\n\n              var rows = this.tbody.children(),\n                  classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                  idx = tr.sectionRowIndex,\n                  j,\n                  correctIdx;\n              correctIdx = idx;\n\n              for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                  correctIdx--;\n                }\n              }\n\n              return this._data[correctIdx];\n            },\n            expandRow: function (tr, omitAnimation) {\n              var button = $(tr).find('> td .k-i-expand');\n\n              if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n              }\n            },\n            collapseRow: function (tr, omitAnimation) {\n              var button = $(tr).find('> td .k-i-collapse');\n\n              if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n              }\n            },\n            _createHeaderCells: function (columns, rowSpan) {\n              var that = this,\n                  idx,\n                  th,\n                  text,\n                  html = \"\",\n                  length,\n                  title,\n                  columnMenu = that.options.columnMenu,\n                  sortable = that.options.sortable,\n                  filterable = that._hasFilterMenu(),\n                  messages = that.options.messages,\n                  leafs = leafColumns(that.columns),\n                  groups = that.dataSource.group(),\n                  field;\n\n              for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n                var index = inArray(th, leafs);\n\n                if (th.selectable) {\n                  html += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                  if (rowSpan && !columns[idx].colSpan) {\n                    html += \" rowspan='\" + rowSpan + \"'\";\n                  }\n\n                  if (index > -1) {\n                    html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                  }\n\n                  text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({});\n                  html += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                  html += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                  if (rowSpan && !columns[idx].colSpan) {\n                    html += \" rowspan='\" + rowSpan + \"'\";\n                  }\n\n                  if (index > -1) {\n                    html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                  }\n\n                  text = th.headerTemplate ? text : \"\";\n                  html += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                  html += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                  if (rowSpan && !columns[idx].colSpan) {\n                    html += \" rowspan='\" + rowSpan + \"'\";\n                  }\n\n                  if (index > -1) {\n                    html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                  }\n\n                  html += \">\" + text + \"</th>\";\n                } else {\n                  if (th.field) {\n                    field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                  }\n\n                  html += \"<th scope='col' role='columnheader' \" + field;\n\n                  if (columnMenu && th.field && th.menu !== false || filterable && th.filterable !== false && !th.command) {\n                    html += \" aria-haspopup='true'\";\n                  }\n\n                  if (rowSpan && !columns[idx].colSpan) {\n                    html += \" rowspan='\" + rowSpan + \"'\";\n                  }\n\n                  if (columns[idx].colSpan > 1) {\n                    html += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                    html += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                  } else if (columns[idx].colSpan === 1) {\n                    html += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                  }\n\n                  if (title) {\n                    title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                    html += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                  }\n\n                  if (th.groupable !== undefined) {\n                    html += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                  }\n\n                  if (isColumnGroupable(that, th)) {\n                    html += \"aria-label='\" + (title || th.field) + \" \";\n                    html += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                    html += \"' \";\n                  }\n\n                  if (th.aggregates && th.aggregates.length) {\n                    html += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                  }\n\n                  if (index > -1) {\n                    html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                  }\n\n                  html += stringifyAttributes(th.headerAttributes);\n\n                  if (sortable) {\n                    text = kendo.template(SORTHEADERTMPL)({\n                      text: text\n                    });\n                  }\n\n                  html += \">\" + text + \"</th>\";\n                }\n              }\n\n              return html;\n            },\n            _appendLockedColumnContent: function () {\n              var columns = this.columns,\n                  idx,\n                  colgroup = this.table.find(\"colgroup\"),\n                  cols = colgroup.find(COLGROUP),\n                  length,\n                  lockedCols = $(),\n                  skipHiddenCount = 0,\n                  container,\n                  colSpan,\n                  spanIdx,\n                  colOffset = 0;\n\n              for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                  if (isVisible(columns[idx])) {\n                    colSpan = 1;\n\n                    if (columns[idx].columns) {\n                      colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n\n                    colSpan = colSpan || 1;\n\n                    for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                      lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                    }\n\n                    colOffset += colSpan - 1;\n                  } else {\n                    skipHiddenCount++;\n                  }\n                }\n              }\n\n              container = $('<div class=\"k-grid-content-locked\"><table><colgroup></colgroup><tbody></tbody></table></div>'); // detach is required for IE8, otherwise it switches to compatibility mode\n\n              colgroup.detach();\n              container.find(\"colgroup\").append(lockedCols);\n              colgroup.insertBefore(this.table.find(\"tbody\"));\n              this.lockedContent = container.insertBefore(this.content);\n              this.lockedTable = container.children(\"table\");\n            },\n            _appendLockedColumnFooter: function () {\n              var that = this;\n              var footer = that.footer;\n              var cells = footer.find(\".k-footer-template>td\");\n              var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n              var html = $('<div class=\"k-grid-footer-locked\"><table><colgroup></colgroup><tbody><tr class=\"k-footer-template\"></tr></tbody></table></div>');\n              var idx, length;\n\n              var groups = that._groups();\n\n              var lockedCells = $(),\n                  lockedCols = $();\n              lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n\n              for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n              }\n\n              lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n\n              for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n              }\n\n              lockedCells.appendTo(html.find(\"tr\"));\n              lockedCols.appendTo(html.find(\"colgroup\"));\n              that.lockedFooter = html.prependTo(footer);\n            },\n            _appendLockedColumnHeader: function (container) {\n              var that = this,\n                  columns = this.columns,\n                  idx,\n                  html,\n                  length,\n                  colgroup,\n                  tr,\n                  trFilter,\n                  table,\n                  header,\n                  filtercellCells,\n                  rows = [],\n                  skipHiddenCount = 0,\n                  cols = $(),\n                  hasFilterRow = that._hasFilterRow(),\n                  filterCellOffset = 0,\n                  filterCells = $(),\n                  cell,\n                  leafColumnsCount = 0,\n                  cells = $();\n\n              colgroup = that.thead.prev().find(COLGROUP);\n              header = that.thead.find(\"tr\").first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n              filtercellCells = that.thead.find(\".k-filter-row\").find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n              var colOffset = 0;\n\n              for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                  cell = header.eq(idx);\n                  leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                  if (isVisible(columns[idx])) {\n                    var colSpan = null;\n\n                    if (columns[idx].columns) {\n                      colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n\n                    colSpan = colSpan || 1;\n\n                    for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                      cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                    }\n\n                    colOffset += colSpan - 1;\n                  }\n\n                  mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n                  leafColumnsCount = leafColumnsCount || 1;\n\n                  for (var j = 0; j < leafColumnsCount; j++) {\n                    filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                  }\n\n                  filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                  skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                  skipHiddenCount++;\n                }\n              }\n\n              if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table><colgroup></colgroup><thead>';\n                html += new Array(rows.length + 1).join(\"<tr></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row\"></tr>' : '') + '</thead></table></div>';\n                table = $(html);\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                  cells = toJQuery(rows[idx]);\n                  tr.eq(idx).append(that.thead.find(\"tr\").eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n\n                if (rows.length < count) {\n                  removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n                return true;\n              }\n\n              return false;\n            },\n            _removeLockedContainers: function () {\n              var elements = this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);\n              kendo.destroy(elements);\n              elements.off(NS).remove();\n              this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n              this.selectable = null;\n            },\n            _thead: function () {\n              var that = this,\n                  columns = that.columns,\n                  hasDetails = that._hasDetails() && columns.length,\n                  hasFilterRow = that._hasFilterRow(),\n                  idx,\n                  html = \"\",\n                  thead = that.table.find(\">thead\"),\n                  hasTHead = that.element.find(\"thead\").first().length > 0,\n                  headerContent = that.options.messages.expandCollapseColumnHeader,\n                  tr;\n\n              if (!thead.length) {\n                thead = $(\"<thead/>\").insertBefore(that.tbody);\n              }\n\n              if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n              } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n              } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n              }\n\n              if (!tr.length) {\n                tr = thead.children().first();\n\n                if (!tr.length) {\n                  var rows = [{\n                    rowSpan: 1,\n                    cells: [],\n                    index: 0\n                  }];\n\n                  that._prepareColumns(rows, columns);\n\n                  for (idx = 0; idx < rows.length; idx++) {\n                    html += \"<tr>\";\n\n                    if (hasDetails) {\n                      html += '<th class=\"k-hierarchy-cell\" scope=\"col\">' + headerContent + '</th>';\n                    }\n\n                    html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                    html += \"</tr>\";\n                  }\n\n                  tr = $(html);\n                }\n              } else {\n                for (idx = 0; idx < columns.length; idx++) {\n                  var columnIndex = inArray(columns[idx], leafColumns(columns));\n                  var cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n\n                  if (columns[idx].hidden && columnIndex >= 0) {\n                    cell[0].style.display = \"none\";\n                  }\n                }\n\n                that._updateHeadersAttr(childColumns(columns));\n              }\n\n              if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row\");\n\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) {\n                  // handles server side detail template\n                  filterRow.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n\n                if (existingFilterRow.length) {\n                  kendo.destroy(existingFilterRow);\n                  existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n              }\n\n              if (!tr.children().length) {\n                html = \"\";\n\n                if (hasDetails) {\n                  html += '<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n                tr.html(html);\n              } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n              }\n\n              tr.attr(\"role\", \"row\").find(\"th\").addClass(\"k-header\");\n\n              if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n              }\n\n              tr.find(\"script\").remove().end().prependTo(thead);\n\n              if (that.thead) {\n                that._destroyColumnAttachments();\n              }\n\n              this.angular(\"cleanup\", function () {\n                return {\n                  elements: thead.find(\"th\" + NAVCELL).get()\n                };\n              });\n              this.angular(\"compile\", function () {\n                return {\n                  elements: thead.find(HEADERCELLS).get(),\n                  data: map(columns, function (col) {\n                    return {\n                      column: col\n                    };\n                  })\n                };\n              });\n              that.thead = thead.attr(\"role\", \"rowgroup\");\n\n              that._sortable();\n\n              that._filterable();\n\n              that._filterRow();\n\n              that._scrollable();\n\n              that._columnMenu();\n\n              var syncHeight;\n              var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n              if (hasLockedColumns) {\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                  that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                    move: function (e) {\n                      that.content.scrollTop(that.content.scrollTop() + -e.y.delta);\n                      e.preventDefault();\n                    }\n                  });\n                }\n\n                that._updateLockedCols();\n              }\n\n              that._updateCols();\n\n              that._updateColumnCellIndex();\n\n              that._updateFirstColumnClass();\n\n              that._resizable();\n\n              that._draggable();\n\n              that._reorderable();\n\n              that._updateHeader(that._groups());\n\n              that._updateStickyColumns();\n\n              if (hasLockedColumns) {\n                if (syncHeight) {\n                  that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n              }\n\n              if (that.groupable) {\n                that._attachGroupable();\n              }\n            },\n            _retrieveFirstColumn: function (columns, rows) {\n              var result = $();\n\n              if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                  column = column.columns[0];\n                  rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n              }\n\n              return result;\n            },\n            _updateFirstColumnClass: function () {\n              var that = this,\n                  columns = that.columns || [],\n                  hasDetails = that._hasDetails() && columns.length;\n\n              if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                  tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                  columns = lockedColumns(that.columns);\n                  rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function () {\n                  var ths = $(this).find(\"th\");\n                  ths.removeClass(\"k-first\");\n                  ths.eq(0).addClass(\"k-first\");\n                });\n              }\n            },\n            _prepareColumns: function (rows, columns, parentCell, parentRow) {\n              var row = parentRow || rows[rows.length - 1];\n              var childRow = rows[row.index + 1];\n              var totalColSpan = 0;\n\n              for (var idx = 0; idx < columns.length; idx++) {\n                var cell = {\n                  column: columns[idx],\n                  colSpan: 0\n                };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                  if (!childRow) {\n                    childRow = {\n                      rowSpan: 0,\n                      cells: [],\n                      index: rows.length\n                    };\n                    rows.push(childRow);\n                  }\n\n                  cell.colSpan = columns[idx].columns.length;\n\n                  this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n\n                  totalColSpan += cell.colSpan - 1;\n                  row.rowSpan = rows.length - row.index;\n                }\n              }\n\n              if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n              }\n            },\n            _wheelScroll: function (e) {\n              if (e.ctrlKey) {\n                return;\n              }\n\n              var content = this.content;\n\n              if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n              }\n\n              var scrollTop = content.scrollTop(),\n                  delta = kendo.wheelDeltaY(e);\n\n              if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight && (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 || content[0].scrollTop > 0 && delta > 0)) {\n                  e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + -delta);\n              }\n            },\n            _isLocked: function () {\n              return this.lockedHeader != null;\n            },\n            _updateHeaderCols: function () {\n              var table = this.thead.parent().add(this.table);\n\n              if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n              } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n              }\n            },\n            _updateColumnSorters: function () {\n              var that = this;\n              var cells = leafDataCells(that.thead);\n              var columns = leafColumns(that.columns);\n              var column;\n              var cell;\n              var sorterInstance;\n\n              if (!that.options.sortable) {\n                return;\n              }\n\n              for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                  cell = cells.eq(idx);\n                  sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                  if (sorterInstance) {\n                    sorterInstance.refresh();\n                  }\n                }\n              }\n            },\n            _updateHeadersAttr: function (columns) {\n              if (!columns.length) {\n                return;\n              }\n\n              var that = this;\n\n              for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                  var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                  th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n              }\n\n              that._updateHeadersAttr(childColumns(columns));\n            },\n            _updateCols: function (table) {\n              table = table || this.thead.parent().add(this.table);\n\n              this._appendCols(table, this._isLocked());\n            },\n            _updateLockedCols: function (table) {\n              if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n              }\n            },\n            _appendCols: function (table, locked) {\n              if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n              } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n              }\n            },\n            _autoColumns: function (schema) {\n              if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n                schema = schema.toJSON();\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                  that.columns.push({\n                    field: field,\n                    encoded: encoded,\n                    headerAttributes: {\n                      id: kendo.guid()\n                    }\n                  });\n                }\n\n                that._thead();\n\n                that._templates();\n              }\n            },\n            _rowsHtml: function (data, templates) {\n              var that = this,\n                  html = \"\",\n                  idx,\n                  rowTemplate = templates.rowTemplate,\n                  altRowTemplate = templates.altRowTemplate,\n                  length;\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                  that._skipRerenderItemsCount--;\n                } else {\n                  if (idx % 2) {\n                    html += altRowTemplate(data[idx]);\n                  } else {\n                    html += rowTemplate(data[idx]);\n                  }\n                }\n\n                that._data.push(data[idx]);\n              }\n\n              return html;\n            },\n            _groupData: function (group, skipFooter, firstColumn) {\n              var that = this,\n                  footerDefaults = that._groupAggregatesDefaultObject || {},\n                  groupItems = group.items,\n                  aggregates = extend({}, footerDefaults, group.aggregates),\n                  headerData = extend({}, {\n                field: group.field,\n                value: group.value,\n                items: groupItems,\n                aggregates: aggregates\n              }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                  footerData = {};\n\n              if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                  footerData[aggregate] = extend({}, aggregates[aggregate], {\n                    group: {\n                      field: group.field,\n                      value: group.value,\n                      items: groupItems\n                    }\n                  });\n                }\n              }\n\n              return extend({}, footerData, headerData);\n            },\n            _removeGroupIfEmpty: function (row) {\n              var that = this,\n                  itemsCount,\n                  subgroupsCount,\n                  length = that.dataSource._group.length;\n\n              for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                  row.hide();\n                }\n              }\n            },\n            _groupRowHtml: function (group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n              var that = this,\n                  html = \"\",\n                  idx,\n                  length,\n                  isLocked = that.lockedContent != null,\n                  field = group.field,\n                  column = grep(leafColumns(that.columns), function (column) {\n                return column.field == field;\n              })[0] || {},\n                  firstColumn = visibleColumns(that.columns)[0],\n                  firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                  template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                  text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                  groupItems = group.currentItems || group.items,\n                  groups = that._groups(),\n                  groupFooterTemplate = templates.groupFooterTemplate,\n                  groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                  groupData,\n                  isGroupPaged = that.dataSource._isGroupPaged(),\n                  expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n              if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n              }\n\n              if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n              }\n\n              if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n              }\n\n              if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                  html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                  group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                  group.excludeHeader = false;\n                }\n              } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n              }\n\n              if (expanded) {\n                if (group.hasSubgroups) {\n                  for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                    html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                  }\n                } else {\n                  html += that._rowsHtml(groupItems, templates);\n                }\n              }\n\n              if (groupFooterTemplate) {\n                if (skipLastGroup) {\n                  if (!inArray(group.value, that._skippedGroups)) {\n                    that._skippedGroups.push(group.value);\n                  }\n                } else {\n                  if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                    that._skippedGroups.shift();\n                  }\n\n                  if (!that._skipRerenderItemsCount) {\n                    html += groupFooterTemplate(groupData);\n                  }\n                }\n              }\n\n              return html;\n            },\n            collapseGroup: function (group) {\n              var level,\n                  that = this,\n                  groupToCollapse = group,\n                  groupable = this.options.groupable,\n                  showFooter = groupable.showFooter,\n                  footerCount = showFooter ? 0 : 1,\n                  offset,\n                  relatedGroup = $(),\n                  idx,\n                  length,\n                  tr;\n              group = $(group);\n              level = group.find(\".k-group-cell\").length;\n\n              if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n\n                var groupCountAfterCollapse;\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n\n                that._progress(true);\n\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function () {\n                  that._progress(false);\n                }, \"collapseGroup\");\n                return;\n              }\n\n              if (this._isLocked()) {\n                if (!group.closest(\"div\").hasClass(\"k-grid-content-locked\")) {\n                  relatedGroup = group.nextAll(\"tr\");\n                  group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                  relatedGroup = this.tbody.children(\"tr\").eq(group.index()).nextAll(\"tr\");\n                }\n              }\n\n              group.find(\".k-i-collapse\").addClass(\"k-i-expand\").removeClass(\"k-i-collapse\");\n              group.find(\"td[aria-expanded='true']\").first().attr(\"aria-expanded\", false).find(\"a\").attr(ARIALABEL, EXPAND);\n              group = group.nextAll(\"tr\");\n              var toHide = [];\n\n              for (idx = 0, length = group.length; idx < length; idx++) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(\"k-grouping-row\")) {\n                  footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                  footerCount--;\n                }\n\n                if (offset <= level || tr.hasClass(\"k-group-footer\") && footerCount < 0) {\n                  break;\n                }\n\n                if (relatedGroup.length) {\n                  toHide.push(relatedGroup[idx]);\n                }\n\n                toHide.push(tr[0]);\n              }\n\n              $(toHide).hide();\n\n              if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function () {\n                  that.content.scroll();\n                  that._groupToCollapse = groupToCollapse;\n                });\n              }\n            },\n            expandGroup: function (group) {\n              group = $(group);\n              var that = this,\n                  showFooter = that.options.groupable.showFooter,\n                  level,\n                  tr,\n                  offset,\n                  relatedGroup = $(),\n                  idx,\n                  length,\n                  footersVisibility = [],\n                  groupsCount = 1;\n              level = group.find(\".k-group-cell\").length;\n\n              if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n\n                var groupCountAfterExpand;\n                that.dataSource._groupsState[groupUid] = true;\n\n                if (groupObject.items && groupObject.items.length) {\n                  groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                  that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function () {\n                  that._progress(false);\n                }, \"expandGroup\");\n                return;\n              }\n\n              if (this._isLocked()) {\n                if (!group.closest(\"div\").hasClass(\"k-grid-content-locked\")) {\n                  relatedGroup = group.nextAll(\"tr\");\n                  group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                  relatedGroup = this.tbody.children(\"tr\").eq(group.index()).nextAll(\"tr\");\n                }\n              }\n\n              group.find(\".k-i-expand\").addClass(\"k-i-collapse\").removeClass(\"k-i-expand\");\n              group.find(\"td[aria-expanded='false']\").first().attr(\"aria-expanded\", true).find(\"a\").attr(ARIALABEL, COLLAPSE);\n              group = group.nextAll(\"tr\");\n\n              for (idx = 0, length = group.length; idx < length; idx++) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (offset <= level) {\n                  break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                  tr.show();\n                  relatedGroup.eq(idx).show();\n\n                  if (tr.hasClass(\"k-grouping-row\") && tr.find(\".k-icon\").hasClass(\"k-i-collapse\")) {\n                    that.expandGroup(tr);\n                  }\n\n                  if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon\").hasClass(\"k-i-collapse\")) {\n                    tr.next().show();\n                    relatedGroup.eq(idx + 1).show();\n                  }\n                }\n\n                if (tr.hasClass(\"k-grouping-row\")) {\n                  if (showFooter) {\n                    footersVisibility.push(tr.is(\":visible\"));\n                  }\n\n                  groupsCount++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                  if (showFooter) {\n                    var toggleVisibility = footersVisibility.pop();\n                    tr.toggle(toggleVisibility);\n                    relatedGroup.eq(idx).toggle(toggleVisibility);\n                  }\n\n                  if (groupsCount == 1) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n                  } else {\n                    groupsCount--;\n                  }\n                }\n              }\n\n              if (level === 0 && that.options.scrollable.endless && this._isLocked() || !that.options.scrollable.endless && this._isLocked()) {\n                that._syncLockedContentHeight();\n              }\n            },\n            _updateHeader: function (groups) {\n              var that = this,\n                  container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                  filterCells = container.find(\"tr.k-filter-row\").find(\"th.k-group-cell\").length,\n                  length = container.find(\"tr\").first().find(\"th.k-group-cell\").length,\n                  rows = container.children(\"tr:not(:first)\").filter(function () {\n                return !$(this).children(\":visible\").length;\n              });\n\n              if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n\n                if (that.element.is(\":visible\")) {\n                  rows.find(\"th.k-group-cell\").hide();\n                }\n              } else if (groups < length) {\n                container.find(\"tr\").each(function () {\n                  $(this).find(\"th.k-group-cell\").eq(groups).remove();\n                  $(this).find(\"th.k-group-cell\").slice(groups).remove();\n                });\n              }\n\n              if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>')).prependTo(container.find(\".k-filter-row\"));\n              }\n            },\n            _firstDataItem: function (data, grouped) {\n              if (data && grouped) {\n                if (data.hasSubgroups) {\n                  data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                  data = data.items[0];\n                }\n              }\n\n              return data;\n            },\n            _updateTablesWidth: function () {\n              var that = this,\n                  tables;\n\n              if (!that._isLocked()) {\n                return;\n              }\n\n              tables = $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper).add(that.thead.parent()).add(that.table);\n              that._footerWidth = tableWidth(tables.eq(0));\n              tables.width(that._footerWidth);\n              tables = $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper).add(that.lockedHeader.find(\">table\")).add(that.lockedTable);\n              tables.width(tableWidth(tables.eq(0)));\n            },\n            hideColumn: function (column) {\n              var that = this,\n                  cell,\n                  tables,\n                  idx,\n                  cols,\n                  colWidth,\n                  position,\n                  width = 0,\n                  headerCellIndex,\n                  length,\n                  footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                  virtualScroll = that.virtualScroll || {},\n                  columns = that.columns,\n                  visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                  columnIndex,\n                  groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                return column.groupHeaderColumnTemplate;\n              });\n\n              if (typeof column == \"number\") {\n                column = columns[column];\n              } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function (item) {\n                  return item === column;\n                })[0];\n              } else {\n                column = grep(flatColumns(columns), function (item) {\n                  return item.field === column;\n                })[0];\n              }\n\n              if (!column || !isVisible(column)) {\n                return;\n              }\n\n              var setColumnVisibility = that._columnVisibilitySetter(column);\n\n              if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n                setColumnVisibility(column, false);\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                  this.hideColumn(column.columns[idx]);\n                }\n\n                that.trigger(COLUMNHIDE, {\n                  column: column\n                });\n                return;\n              }\n\n              columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n              setColumnVisibility(column, false);\n\n              that._setParentsVisibility(column, false);\n\n              that._templates();\n\n              that._updateCols();\n\n              that._updateLockedCols();\n\n              var container = that.thead;\n              headerCellIndex = columnIndex;\n\n              if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n              } else {\n                headerCellIndex -= visibleLocked;\n              }\n\n              cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n              cell[0].style.display = \"none\";\n              setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>th\"), columnIndex, false);\n\n              if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n              }\n\n              if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n\n                that.trigger(COLUMNHIDE, {\n                  column: column\n                });\n                return;\n              }\n\n              if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n              } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n              }\n\n              if (that.lockedTable) {\n                that._updateTablesWidth();\n\n                that._applyLockedContainersWidth();\n\n                that._syncLockedContentHeight();\n\n                that._syncLockedHeaderHeight();\n\n                that._syncLockedFooterHeight();\n              } else {\n                cols = that.thead.prev().find(\"col\");\n\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                  colWidth = cols[idx].style.width;\n\n                  if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                    width += outerWidth(cols[idx]);\n                    continue;\n                  }\n\n                  if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                    width += outerWidth(cols[idx]);\n                    continue;\n                  }\n\n                  if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    width += parseInt(colWidth, 10);\n                  } else {\n                    width = 0;\n                    break;\n                  }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                  tables.each(function () {\n                    this.style.width = width + \"px\";\n                  });\n                  that._footerWidth = width;\n\n                  that._setContentWidth();\n                }\n              }\n\n              that._updateFirstColumnClass();\n\n              that._updateStickyColumns();\n\n              if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n              }\n\n              that.trigger(COLUMNHIDE, {\n                column: column\n              });\n            },\n            _setParentsVisibility: function (column, visible) {\n              var that = this;\n              var columns = that.columns;\n              var idx;\n              var parents = [];\n              var parent;\n              var position;\n              var cell;\n              var colSpan;\n\n              var setColumnVisibility = that._columnVisibilitySetter(column);\n\n              var predicate = visible ? function (p) {\n                return visibleColumns(p.columns).length && p.hidden;\n              } : function (p) {\n                return !visibleColumns(p.columns).length && !p.hidden;\n              };\n\n              if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                  parent = parents[idx];\n                  position = columnPosition(parent, columns);\n                  cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                  if (predicate(parent)) {\n                    setColumnVisibility(parent, visible);\n                    cell[0].style.display = visible ? \"\" : \"none\";\n                  }\n\n                  if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                    colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                    cell[0].colSpan = colSpan - hiddenLeafColumnsCount(parent.columns) || 1;\n                  }\n                }\n              }\n            },\n            _updateContentWidth: function () {\n              var that = this;\n              var tables = that.table.add(that.thead.parent());\n              tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n              });\n              that.refresh();\n            },\n            showColumn: function (column) {\n              var that = this,\n                  idx,\n                  length,\n                  cell,\n                  tables,\n                  width,\n                  headerCellIndex,\n                  position,\n                  colWidth,\n                  cols,\n                  columns = that.columns,\n                  virtualScroll = that.virtualScroll || {},\n                  footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                  lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                  columnIndex,\n                  originalColumn,\n                  columnLeafIndex,\n                  groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                return column.groupHeaderColumnTemplate;\n              });\n\n              if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n              } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function (index, item) {\n                  if (item === column) {\n                    column = item;\n                    columnIndex = index;\n                    return false;\n                  }\n                });\n              } else {\n                $.each(flatColumns(columns), function (index, item) {\n                  if (item.field === column) {\n                    column = item;\n                    columnIndex = index;\n                    return false;\n                  }\n                });\n              }\n\n              if (!column || isVisible(column)) {\n                return;\n              }\n\n              var setColumnVisibility = that._columnVisibilitySetter(column);\n\n              if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n                setColumnVisibility(column, true);\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                  if (!originalColumn.columns[idx].hidden) {\n                    this.showColumn(column.columns[idx]);\n                  }\n                }\n\n                that.trigger(COLUMNSHOW, {\n                  column: column\n                });\n                return;\n              }\n\n              columnLeafIndex = inArray(column, leafColumns(columns));\n              setColumnVisibility(column, true);\n\n              that._setParentsVisibility(column, true);\n\n              that._templates();\n\n              that._updateCols();\n\n              that._updateLockedCols();\n\n              var container = that.thead;\n              headerCellIndex = columnLeafIndex;\n\n              if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n              } else {\n                headerCellIndex -= lockedColumnsCount;\n              }\n\n              cell = leafDataCells(container).eq(headerCellIndex);\n              cell[0].style.display = \"\";\n              setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>th\"), columnLeafIndex, true);\n\n              if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n              }\n\n              if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n\n                that.trigger(COLUMNSHOW, {\n                  column: column\n                });\n                return;\n              }\n\n              if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n              } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n              }\n\n              if (that.lockedTable) {\n                that._updateTablesWidth();\n\n                that._applyLockedContainersWidth();\n\n                that._syncLockedContentHeight();\n\n                that._syncLockedHeaderHeight();\n              } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n\n                if (!column.width) {\n                  tables.width(\"\");\n                } else {\n                  width = 0;\n                  cols = that.thead.prev().find(\"col\");\n\n                  for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                      width += outerWidth(cols[idx]);\n                      continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                      width += outerWidth(cols[idx]);\n                      continue;\n                    }\n\n                    if (colWidth.indexOf(\"%\") > -1) {\n                      width = 0;\n                      break;\n                    }\n\n                    width += parseInt(colWidth, 10);\n                  }\n\n                  that._footerWidth = null;\n\n                  if (width) {\n                    tables.each(function () {\n                      this.style.width = width + \"px\";\n                    });\n                    that._footerWidth = width;\n\n                    that._setContentWidth();\n                  }\n                }\n              }\n\n              that._updateFirstColumnClass();\n\n              that._updateStickyColumns();\n\n              if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n              }\n\n              that.trigger(COLUMNSHOW, {\n                column: column\n              });\n            },\n            _columnVisibilitySetter: function (column) {\n              var col = column || {};\n\n              if (isUndefined(col.media)) {\n                return setColumnVisibility;\n              } else {\n                return setColumnMediaVisibility;\n              }\n            },\n            _buildSkeleton: function () {\n              var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n              var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n              var loaderHTML = \"\";\n              var colspan;\n              var groups = (this.dataSource.group() || []).length;\n              var columnsCount = visibleColumns.length + groups;\n\n              if (this._hasDetails()) {\n                columnsCount++;\n              }\n\n              if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(\"tr\").first().find(\"td\").first().attr(\"colspan\"), 10);\n              }\n\n              for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr>\";\n\n                for (var j = 0; j < columnsCount; j++) {\n                  if (colspan && !j) {\n                    loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>\";\n                  } else {\n                    loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>\";\n                  }\n                }\n\n                loaderHTML += \"</tr>\";\n              }\n\n              return loaderHTML;\n            },\n            _progress: function (toggle) {\n              var element = this.element;\n              var endless = this.options.scrollable && this.options.scrollable.endless;\n              var loaderType = this.options.loaderType;\n              var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n              var skeleton;\n\n              if (isVirtualization) {\n                element = this.content;\n              } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n              } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n              } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n              } else if (this.content && this.content.length) {\n                element = this.content;\n              }\n\n              if (loaderType == \"skeleton\") {\n                if (toggle) {\n                  skeleton = this._buildSkeleton();\n                  element.find(\"tbody\").empty().append(skeleton);\n                } else {\n                  element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n              } else {\n                if (endless && toggle) {\n                  kendo.ui.progress(element, toggle, {\n                    height: this.content.height(),\n                    top: this.content[0].offsetTop,\n                    opacity: true\n                  });\n                } else {\n                  kendo.ui.progress(element, toggle);\n                }\n              }\n            },\n            _resize: function (size, force) {\n              this._syncLockedContentHeight();\n\n              this._syncLockedHeaderHeight();\n\n              if (this.content) {\n                this._setContentWidth();\n\n                this._setContentHeight();\n              }\n\n              if (this.lockedTable) {\n                this._syncLockedScroll();\n              }\n\n              if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                  this._rowHeight = null;\n                }\n\n                this.virtualScrollable.repaintScrollbar();\n              }\n\n              if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n              }\n\n              if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n              }\n            },\n            _isActiveInTable: function () {\n              var active = activeElement();\n\n              if (!active) {\n                return false;\n              }\n\n              return this.table[0] === active || $.contains(this.table[0], active) || this._isLocked() && (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active));\n            },\n            refresh: function (e) {\n              var that = this,\n                  data = that.dataSource.view(),\n                  navigatable = that.options.navigatable,\n                  virtualScroll = that.virtualScroll || {},\n                  currentIndex,\n                  current = $(that.current()),\n                  isCurrentInHeader = false,\n                  groups = (that.dataSource.group() || []).length,\n                  colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                  contentScrollLeft,\n                  cachedItemsToSkip;\n\n              if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) {\n                // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) {\n                  // popup editing animation has not finished yet and the editable is not destoyed\n                  return;\n                }\n              }\n\n              if (virtualScroll.columns) {\n                that._templates();\n              } //someone remove the edited item\n\n\n              if (e && e.action === \"remove\" && that.editable && that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n              }\n\n              e = e || {};\n\n              if (that.trigger(\"dataBinding\", {\n                action: e.action || \"rebind\",\n                index: e.index,\n                items: e.items\n              })) {\n                return;\n              }\n\n              if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n\n                that._clearEditableState();\n              }\n\n              that._angularItems(\"cleanup\");\n\n              if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || that._editContainer && that._editContainer.data(\"kendoWindow\"))) {\n                  isCurrentInHeader = current.is(\"th\");\n                  currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n\n                that._destroyEditable();\n              }\n\n              if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function () {\n                  if (!that._endlessFetchInProgress) {\n                    that._progress(false);\n                  }\n                }, 250);\n              } else {\n                that._progress(false);\n              }\n\n              that._hideResizeHandle();\n\n              that._data = [];\n\n              if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n\n                colspan = groups + that.columns.length;\n              }\n\n              that._group = groups > 0 || that._group;\n\n              if (that._group) {\n                that._templates();\n\n                that._updateCols();\n\n                that._updateLockedCols();\n\n                if (!that._virtualColScroll) {\n                  that._updateHeader(groups);\n                }\n\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n              }\n\n              if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n              }\n\n              cachedItemsToSkip = that._skipRerenderItemsCount;\n\n              that._renderContent(data, colspan, groups);\n\n              if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n              }\n\n              that._renderLockedContent(data, colspan, groups);\n\n              if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n              }\n\n              if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                  that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                  that.touchScroller.movable.trigger(\"change\");\n                } else {\n                  that.wrapper.one(\"scroll\", function (e) {\n                    e.stopPropagation();\n                  });\n                  that.content.trigger(\"scroll\");\n                }\n              }\n\n              if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n              }\n\n              if (that.touchScroller) {\n                that.touchScroller.contentResized();\n              }\n\n              if (that.selectable) {\n                that.selectable.resetTouchEvents();\n              }\n\n              that._muteAngularRebind(function () {\n                that._angularItems(\"compile\");\n              });\n\n              if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n              }\n\n              if (that.options.persistSelection && (that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell || that._checkBoxSelection) && (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n              }\n\n              if (!that.options.persistSelection) {\n                that._selectedIds = {};\n              }\n\n              if (that._hasReorderableRows()) {\n                that._draggableRows();\n\n                that._reorderableRows();\n              }\n\n              that.trigger(DATABOUND);\n            },\n            _restoreCurrent: function (currentIndex, isCurrentInHeader) {\n              if (currentIndex === undefined || currentIndex < 0) {\n                return;\n              }\n\n              this._removeCurrent();\n\n              if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n              } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                  if (virtualScroll.rows) {\n                    rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                  } else {\n                    rowIndex = this._rowVirtualIndex;\n                  }\n                } else {\n                  currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                  row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                  colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                  currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                  return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                  this._setCurrent(td, true, true);\n                } else {\n                  this._setCurrent(td);\n                }\n              }\n\n              if (this._current) {\n                focusTable(this._current.closest(\"table\")[0], true);\n              }\n            },\n            _restoreSelection: function () {\n              var that = this,\n                  allRows = that.items(),\n                  selectedRows,\n                  id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n              selectedRows = grep(allRows, function (row) {\n                var dataItemKey = that.dataItem(row)[id];\n\n                if (that._selectedIds[dataItemKey]) {\n                  return row;\n                }\n              });\n              that.select(selectedRows);\n            },\n            _angularItems: function (cmd) {\n              kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n              if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n                this._cleanupDetailItems();\n              }\n\n              this._angularGroupItems(cmd);\n\n              this._angularGroupFooterItems(cmd);\n            },\n            _cleanupDetailItems: function () {\n              var that = this;\n\n              if (that._hasDetails()) {\n                that.angular(\"cleanup\", function () {\n                  return {\n                    elements: that.tbody.children(\".k-detail-row\")\n                  };\n                });\n                that.tbody.find(\".k-detail-cell\").empty();\n              }\n            },\n            _angularGroupItems: function (cmd) {\n              var that = this,\n                  container = that.tbody;\n\n              if (that.lockedContent) {\n                container = that.lockedTable.find(\"tbody\");\n              }\n\n              if (that._group) {\n                that.angular(cmd, function () {\n                  return {\n                    elements: container.children(\".k-grouping-row\"),\n                    data: $.map(groupRows(that.dataSource.view()), function (dataItem) {\n                      return {\n                        dataItem: dataItem\n                      };\n                    })\n                  };\n                });\n              }\n            },\n            _angularGroupFooterItems: function (cmd) {\n              var that = this,\n                  container = that.tbody;\n\n              if (that.lockedContent) {\n                container = that.element;\n              }\n\n              if (that._group && that.groupFooterTemplate) {\n                that.angular(cmd, function () {\n                  return {\n                    elements: container.find(\".k-group-footer\"),\n                    data: $.map(groupFooters(that.dataSource.view()), function (dataItem) {\n                      return {\n                        dataItem: dataItem\n                      };\n                    })\n                  };\n                });\n              }\n            },\n            _renderContent: function (data, colspan, groups) {\n              var that = this,\n                  idx,\n                  length,\n                  html = \"\",\n                  isLocked = that.lockedContent != null,\n                  endlessAppend = null,\n                  skipLastGroup,\n                  flatViewLength,\n                  scrollable = that.options.scrollable,\n                  templates = {\n                rowTemplate: that.rowTemplate,\n                altRowTemplate: that.altRowTemplate,\n                groupFooterTemplate: that.groupFooterTemplate,\n                groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n              };\n\n              if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n\n                if (that.content) {\n                  that.content[0].scrollTop = 0;\n                }\n              }\n\n              endlessAppend = that._skipRerenderItemsCount > 0;\n              colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n\n              if (groups > 0) {\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                  colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                  that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n\n                if (that.options.scrollable.endless) {\n                  flatViewLength = that.dataSource.flatView().length;\n                }\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                  if (!that._skippedGroups) {\n                    that._skippedGroups = [];\n                  }\n\n                  skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                  html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n              } else {\n                html += that._rowsHtml(data, templates);\n              }\n\n              if (endlessAppend) {\n                that.tbody.append(html);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function () {\n                  if (that._groupToCollapse) {\n                    that.collapseGroup(that._groupToCollapse);\n                    that._groupToCollapse = null;\n                  }\n                });\n                that._endlessFetchInProgress = null;\n              } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular);\n              }\n            },\n            _renderGroupRows: function () {\n              var that = this,\n                  data = that._groupRows,\n                  groupRows = that.wrapper.find(\".k-grouping-row\"),\n                  groups = that._groups(),\n                  groupRowBuilderFunc,\n                  isLocked = that.lockedContent != null,\n                  columns,\n                  colspan,\n                  group,\n                  field,\n                  column,\n                  template,\n                  text,\n                  groupHeaderData,\n                  tableContainer,\n                  isInLockedContainer,\n                  prevElement,\n                  newGroupRowElement,\n                  currentRow,\n                  level,\n                  groupHeaderColumnTemplate,\n                  firstColumnGroupData;\n\n              groupRows.each(function (index, row) {\n                currentRow = $(row);\n                tableContainer = currentRow.closest(\"table\").parent();\n                isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n                columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n\n                if (isLocked) {\n                  groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                  colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                } else {\n                  groupRowBuilderFunc = groupRowBuilder;\n                  colspan = columns.length + groups - level;\n                }\n\n                group = index >= data.length ? data[index - data.length] : data[index];\n                field = group.field;\n                column = grep(leafColumns(that.columns), function (column) {\n                  return column.field == field;\n                })[0] || {};\n                firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                groups = groups;\n                groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n                if (template) {\n                  text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                }\n\n                prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n                newGroupRowElement = $(groupHeaderColumnTemplate ? groupHeaderColumnTemplate(extend({}, groupHeaderData, {\n                  groupCells: level,\n                  colspan: groups - level,\n                  text: text\n                })) : groupRowBuilderFunc(colspan, level, text));\n\n                if (prevElement.is(\"tbody\")) {\n                  prevElement.prepend(newGroupRowElement);\n                } else {\n                  prevElement.after(newGroupRowElement);\n                }\n\n                currentRow.remove();\n              });\n            },\n            _renderLockedContent: function (data, colspan, groups) {\n              var html = \"\",\n                  idx,\n                  length,\n                  skipLastGroup,\n                  endlessAppend = null,\n                  flatViewLength,\n                  templates = {\n                rowTemplate: this.lockedRowTemplate,\n                altRowTemplate: this.lockedAltRowTemplate,\n                groupFooterTemplate: this.lockedGroupFooterTemplate,\n                groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n              };\n\n              if (this.lockedContent) {\n                var table = this.lockedTable;\n                endlessAppend = this._skipRerenderItemsCount > 0;\n\n                if (groups > 0) {\n                  colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n\n                  if (this.options.scrollable.endless) {\n                    flatViewLength = this.dataSource.flatView().length;\n                  }\n\n                  for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                  }\n                } else {\n                  html = this._rowsHtml(data, templates);\n                }\n\n                if (endlessAppend) {\n                  table.children(\"tbody\").append(html);\n                } else {\n                  appendContent(table.children(\"tbody\"), table, html, this.options.$angular);\n                }\n\n                this._syncLockedContentHeight();\n              }\n            },\n            _togglePagerVisibility: function () {\n              if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n              }\n            },\n            _adjustRowsHeight: function (table1, table2) {\n              var rows = table1[0].rows,\n                  length = rows.length,\n                  idx,\n                  rows2 = table2[0].rows,\n                  containers = table1.add(table2),\n                  containersLength = containers.length,\n                  heights = [];\n\n              for (idx = 0; idx < length; idx++) {\n                if (!rows2[idx]) {\n                  break;\n                }\n\n                if (rows[idx].style.height) {\n                  rows[idx].style.height = rows2[idx].style.height = \"\";\n                }\n              }\n\n              for (idx = 0; idx < length; idx++) {\n                if (!rows2[idx]) {\n                  break;\n                }\n\n                var offsetHeight1 = rows[idx].offsetHeight;\n                var offsetHeight2 = rows2[idx].offsetHeight;\n                var height = 0;\n\n                if (offsetHeight1 > offsetHeight2) {\n                  height = offsetHeight1;\n                } else if (offsetHeight1 < offsetHeight2) {\n                  height = offsetHeight2;\n                }\n\n                heights.push(height);\n              }\n\n              for (idx = 0; idx < containersLength; idx++) {\n                containers[idx].style.display = \"none\";\n              }\n\n              for (idx = 0; idx < length; idx++) {\n                if (heights[idx]) {\n                  //add one to resolve row misalignment in IE\n                  rows[idx].style.height = rows2[idx].style.height = heights[idx] + 1 + \"px\";\n                }\n              }\n\n              for (idx = 0; idx < containersLength; idx++) {\n                containers[idx].style.display = \"\";\n              }\n            }\n          });\n\n          if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(Grid.prototype);\n          }\n\n          if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Grid.prototype);\n\n            Grid.prototype._drawPDF_autoPageBreak = function (progress) {\n              var grid = this;\n              var result = new $.Deferred();\n              var dataSource = grid.dataSource;\n              var allPages = grid.options.pdf.allPages;\n              var origBody = grid.wrapper.find('table[role$=\"grid\"] > tbody').first();\n              var cont = $(\"<div>\").css({\n                position: \"absolute\",\n                left: -10000,\n                top: -10000\n              });\n              var clone;\n              grid.toggleUnexportableColumns(grid.columns);\n              clone = grid.wrapper.clone().css({\n                height: \"auto\",\n                width: \"auto\"\n              }).appendTo(cont);\n              clone.find(\".k-grid-content\").css({\n                height: \"auto\",\n                width: \"auto\",\n                overflow: \"visible\"\n              });\n              clone.find('table[role$=\"grid\"], .k-grid-footer table').css({\n                height: \"auto\",\n                width: \"100%\",\n                overflow: \"visible\"\n              });\n              clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n              clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({\n                paddingRight: 0\n              });\n\n              this._initPDFProgress(progress);\n\n              var body = clone.find('table[role$=\"grid\"] > tbody').first().empty();\n              var startingPage = dataSource.page();\n\n              function resolve() {\n                if (allPages && startingPage !== undefined) {\n                  dataSource.one(\"change\", draw);\n                  dataSource.page(startingPage);\n                } else {\n                  grid.refresh();\n                  draw();\n                }\n              }\n\n              function draw() {\n                cont.appendTo(document.body);\n                var options = $.extend({}, grid.options.pdf, {\n                  _destructive: true,\n                  progress: function (p) {\n                    progress.notify({\n                      page: p.page,\n                      pageNumber: p.pageNum,\n                      progress: 0.5 + p.pageNum / p.totalPages / 2,\n                      totalPages: p.totalPages\n                    });\n                  }\n                });\n                kendo.drawing.drawDOM(clone, options).always(function () {\n                  cont.remove();\n                }).then(function (group) {\n                  result.resolve(group);\n                  grid.toggleUnexportableColumns(grid.columns, true);\n                }).fail(function (err) {\n                  result.reject(err);\n                });\n              }\n\n              function renderPage() {\n                var pageNum = dataSource.page();\n                var totalPages = allPages ? dataSource.totalPages() : 1;\n                body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n\n                if (pageNum < totalPages) {\n                  dataSource.page(pageNum + 1);\n                } else {\n                  dataSource.unbind(\"change\", renderPage);\n                  resolve();\n                }\n              }\n\n              if (allPages) {\n                dataSource.bind(\"change\", renderPage);\n                dataSource.page(1);\n              } else {\n                renderPage();\n              }\n\n              return result.promise();\n            };\n\n            Grid.prototype.toggleUnexportableColumns = function (columns, restore) {\n              var length = columns.length;\n              var column;\n              var exportable;\n              var visibleInExport;\n              var visibleInExportOnly;\n\n              for (var i = 0; i < length; i++) {\n                column = columns[i];\n                exportable = column.exportable;\n\n                if (!restore) {\n                  if (typeof column.exportable === \"object\") {\n                    exportable = column.exportable.pdf;\n                  }\n\n                  visibleInExport = !column.hidden && exportable !== false;\n                  visibleInExportOnly = column.hidden && exportable === true;\n                  exportable = visibleInExport || visibleInExportOnly;\n\n                  if (!exportable && !column.hidden) {\n                    column._toggledDuringExport = true;\n                    this.hideColumn(column);\n                  } else if (exportable && column.hidden) {\n                    column._toggledDuringExport = true;\n                    this.showColumn(column);\n                  } else if (exportable && column.columns) {\n                    this.toggleUnexportableColumns(column.columns);\n                  }\n                } else {\n                  if (column._toggledDuringExport) {\n                    column._toggledDuringExport = false;\n\n                    if (column.hidden) {\n                      this.showColumn(column);\n                    } else {\n                      this.hideColumn(column);\n                    }\n                  } else if (column.columns) {\n                    this.toggleUnexportableColumns(column.columns, restore);\n                  }\n                }\n              }\n            };\n\n            Grid.prototype._drawPDF = function (progress) {\n              var grid = this;\n\n              if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != \"auto\") {\n                return grid._drawPDF_autoPageBreak(progress);\n              }\n\n              var result = new $.Deferred();\n              var dataSource = grid.dataSource;\n              var allPages = grid.options.pdf.allPages;\n\n              this._initPDFProgress(progress); // This group will be our document containing all pages\n\n\n              var doc = new kendo.drawing.Group();\n              var startingPage = dataSource.page();\n\n              function resolve() {\n                if (allPages && startingPage !== undefined) {\n                  dataSource.unbind(\"change\", exportPage);\n                  dataSource.one(\"change\", function () {\n                    result.resolve(doc);\n                  });\n                  dataSource.page(startingPage);\n                } else {\n                  result.resolve(doc);\n                }\n              }\n\n              function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n\n                grid._drawPDFShadow({\n                  width: grid.wrapper.width()\n                }, {\n                  avoidLinks: grid.options.pdf.avoidLinks\n                }).done(function (group) {\n                  var pageNum = dataSource.page();\n                  var totalPages = allPages ? dataSource.totalPages() : 1;\n                  var args = {\n                    page: group,\n                    pageNumber: pageNum,\n                    progress: pageNum / totalPages,\n                    totalPages: totalPages\n                  };\n                  grid.toggleUnexportableColumns(grid.columns, true);\n                  progress.notify(args);\n                  doc.append(args.page);\n\n                  if (pageNum < totalPages) {\n                    dataSource.page(pageNum + 1);\n                  } else {\n                    resolve();\n                  }\n                }).fail(function (err) {\n                  result.reject(err);\n                });\n              }\n\n              if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n              } else {\n                exportPage();\n              }\n\n              return result.promise();\n            };\n\n            Grid.prototype._initPDFProgress = function (deferred) {\n              var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n              loading.prepend(this.wrapper.clone().css({\n                position: \"absolute\",\n                top: 0,\n                left: 0\n              }));\n              this._pdfInitialized = true;\n              this.wrapper.append(loading);\n              var pb = $(\"<div class='k-loading-pdf-progress'>\").appendTo(loading).kendoProgressBar({\n                type: \"chunk\",\n                chunkCount: 10,\n                min: 0,\n                max: 1,\n                value: 0\n              }).data(\"kendoProgressBar\");\n              deferred.progress(function (e) {\n                pb.value(e.progress);\n              }).always(function () {\n                kendo.destroy(loading);\n                loading.remove();\n              });\n            };\n          }\n\n          function syncTableHeight(table1, table2) {\n            table1 = table1[0];\n            table2 = table2[0];\n\n            if (table1.rows.length !== table2.rows.length) {\n              var lockedHeigth = table1.offsetHeight;\n              var tableHeigth = table2.offsetHeight;\n              var row;\n              var diff;\n\n              if (lockedHeigth > tableHeigth) {\n                row = table2.rows[table2.rows.length - 1];\n\n                if (filterRowRegExp.test(row.className)) {\n                  row = table2.rows[table2.rows.length - 2];\n                }\n\n                diff = lockedHeigth - tableHeigth;\n              } else {\n                row = table1.rows[table1.rows.length - 1];\n\n                if (filterRowRegExp.test(row.className)) {\n                  row = table1.rows[table1.rows.length - 2];\n                }\n\n                diff = tableHeigth - lockedHeigth;\n              }\n\n              row.style.height = row.offsetHeight + diff + \"px\";\n            }\n          }\n\n          function adjustRowHeight(row1, row2) {\n            var height;\n            var offsetHeight1 = row1.offsetHeight;\n            var offsetHeight2 = row2.offsetHeight;\n\n            if (offsetHeight1 > offsetHeight2) {\n              height = offsetHeight1 + \"px\";\n            } else if (offsetHeight1 < offsetHeight2) {\n              height = offsetHeight2 + \"px\";\n            }\n\n            if (height) {\n              row1.style.height = row2.style.height = height;\n            }\n          }\n\n          function getCommand(commands, name) {\n            var idx, length, command;\n\n            if (typeof commands === STRING && commands === name) {\n              return commands;\n            }\n\n            if (isPlainObject(commands) && commands.name === name) {\n              return commands;\n            }\n\n            if (isArray(commands)) {\n              for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n\n                if (typeof command === STRING && command === name || command.name === name) {\n                  return command;\n                }\n              }\n            }\n\n            return null;\n          }\n\n          function focusTable(table, direct) {\n            if (direct === true) {\n              table = $(table);\n              var scrollLeft = kendo.scrollLeft(table.parent());\n              kendo.focusElement(table);\n              kendo.scrollLeft(table.parent(), scrollLeft);\n            } else {\n              $(table).one(\"focusin\", function (e) {\n                e.preventDefault();\n              }).trigger(\"focus\");\n            }\n          }\n\n          function isColumnGroupable(grid, column) {\n            return grid.options.groupable && (column.groupable || column.groupable === undefined);\n          }\n\n          function isGroupedBy(groups, field) {\n            return !!$.grep(groups, function (item) {\n              return item.field === field;\n            }).length;\n          }\n\n          function isColumnEditable(column, model) {\n            if (!column.field || column.selectable) {\n              return false;\n            }\n\n            if (model.editable && !model.editable(column.field)) {\n              return false;\n            }\n\n            if (column.editable && !column.editable(model)) {\n              return false;\n            }\n\n            return true;\n          }\n\n          function isInputElement(element) {\n            return $(element).is(\":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n          }\n\n          function tableClick(e) {\n            var currentTarget = $(e.currentTarget),\n                isHeader = currentTarget.is(\"th\"),\n                table = this.table.add(this.lockedTable),\n                headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n                isInput = isInputElement(e.target),\n                preventScroll = $(e.target).is('.k-checkbox'),\n                target = $(e.target),\n                currentTable = currentTarget.closest(\"table\")[0];\n\n            if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n              this._setCurrent(currentTarget);\n\n              return;\n            }\n\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n              return;\n            }\n\n            if (target.is(\"a.k-i-expand, a.k-i-collapse\")) {\n              return;\n            }\n\n            if (this.options.navigatable) {\n              this._setCurrent(currentTarget, false, preventScroll);\n            }\n\n            if (isHeader || !isInput) {\n              setTimeout(function () {\n                var activeEl = $(kendo._activeElement());\n\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                  return;\n                } //Only if input element is not selected yet and it is not descendant of the grid's table\n\n\n                if (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                  //DOMElement.focus() only for header, because IE doesn't really focus the table\n                  focusTable(currentTable, true);\n                }\n              });\n            }\n\n            if (isHeader && !kendo.support.touch) {\n              e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n            }\n          }\n\n          function leftMostPosition(element, rtl) {\n            if (!rtl) {\n              return 0;\n            }\n\n            var result = 0;\n\n            if (kendo.support.browser.webkit) {\n              result = element.width();\n            }\n\n            return result;\n          }\n\n          function parseVirtualSettings(options) {\n            var asLowerString;\n\n            if (typeof options === \"string\") {\n              asLowerString = options.toLowerCase();\n\n              if (asLowerString === \"true\") {\n                return {\n                  rows: true\n                };\n              } else {\n                return {\n                  rows: asLowerString.indexOf(\"rows\") > -1,\n                  columns: asLowerString.indexOf(\"columns\") > -1\n                };\n              }\n            } else if (options === true) {\n              return {\n                rows: true\n              };\n            }\n          }\n\n          function isElementVisibleInWrapper(wrapper, element) {\n            var offsetTop;\n            var halfHeight;\n\n            if (!wrapper) {\n              return false;\n            }\n\n            element = $(element);\n\n            if (element[0] && contains(wrapper[0], element[0])) {\n              offsetTop = element.offset().top - wrapper.offset().top;\n              halfHeight = element.outerHeight() / 2;\n\n              if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && math.floor(offsetTop + halfHeight) <= wrapper.height()) {\n                return true;\n              }\n            }\n\n            return false;\n          }\n\n          function isInEdit(cell) {\n            return cell && (cell.hasClass(\"k-edit-cell\") || cell.parent().hasClass(\"k-grid-edit-row\"));\n          }\n\n          function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n            var html;\n\n            if (groupHeaderColumnTemplate) {\n              html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text\n              }));\n            } else {\n              html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            return html;\n          }\n\n          function groupCellBuilder(headerTemplateIndex) {\n            return '<td colspan=\"#=data.colspan +' + headerTemplateIndex + '#\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon k-i-collapse\" href=\"\\\\#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + COLLAPSE + '\"></a>#=data.text#' + '</p></td>';\n          }\n\n          function groupCellLockedContentBuilder(headerTemplateIndex) {\n            return '<td colspan=\"' + headerTemplateIndex + '\">' + '<p class=\"k-reset\">&nbsp;</p></td>';\n          }\n\n          function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData) {\n            return '<tr role=\"row\"' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-grouping-row\">' + groupCells(level) + '<td colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon ' + (expanded ? 'k-i-collapse' : 'k-i-expand') + '\" href=\"#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>' + text + '</p></td></tr>';\n          }\n\n          function groupRowLockedContentBuilder(colspan) {\n            return '<tr role=\"row\" class=\"k-grouping-row\">' + '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' + '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n          }\n\n          function toggleRow(row, visible) {\n            row = $(row)[0];\n\n            if (visible) {\n              row.style.display = \"\";\n            } else {\n              row.style.display = \"none\";\n            }\n          }\n\n          function htmlEncode(value, backslashEscapeQuotes) {\n            var ampRegExp = /&/g,\n                ltRegExp = /</g,\n                quoteRegExp = /\"/g,\n                aposRegExp = /'/g,\n                gtRegExp = />/g;\n            return (\"\" + value).replace(ampRegExp, \"&amp;\").replace(ltRegExp, \"&lt;\").replace(gtRegExp, \"&gt;\").replace(quoteRegExp, function (match) {\n              if (backslashEscapeQuotes) {\n                return \"\\\\\" + match;\n              }\n\n              return \"&quot;\";\n            }).replace(aposRegExp, \"&#39;\");\n          }\n\n          function getTitle(field, columns) {\n            return columns.filter(function (col) {\n              return col.field === field;\n            })[0].title || field;\n          }\n\n          function exportDataSort(a, b) {\n            return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n          }\n\n          function isExcelExportableColumn(column) {\n            return !(column.exportable === false || column.exportable && column.exportable.excel === false);\n          }\n\n          ui.plugin(Grid);\n          ui.plugin(VirtualScrollable);\n        })(window.kendo.jQuery);\n\n        return window.kendo;\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    80959:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.columnmenu\");\n      /***/\n    },\n\n    /***/\n    74733:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.columnsorter\");\n      /***/\n    },\n\n    /***/\n    36765:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.data\");\n      /***/\n    },\n\n    /***/\n    52220:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.dialog\");\n      /***/\n    },\n\n    /***/\n    63192:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.editable\");\n      /***/\n    },\n\n    /***/\n    1744:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.excel\");\n      /***/\n    },\n\n    /***/\n    79217:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.filtercell\");\n      /***/\n    },\n\n    /***/\n    12600:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.filtermenu\");\n      /***/\n    },\n\n    /***/\n    38847:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.form\");\n      /***/\n    },\n\n    /***/\n    19000:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.groupable\");\n      /***/\n    },\n\n    /***/\n    27451:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.html.button\");\n      /***/\n    },\n\n    /***/\n    35425:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.ooxml\");\n      /***/\n    },\n\n    /***/\n    31673:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.pager\");\n      /***/\n    },\n\n    /***/\n    1291:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.pane\");\n      /***/\n    },\n\n    /***/\n    20648:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.pdf\");\n      /***/\n    },\n\n    /***/\n    36842:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.progressbar\");\n      /***/\n    },\n\n    /***/\n    18426:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.reorderable\");\n      /***/\n    },\n\n    /***/\n    87190:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.resizable\");\n      /***/\n    },\n\n    /***/\n    49242:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.selectable\");\n      /***/\n    },\n\n    /***/\n    13397:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.sortable\");\n      /***/\n    },\n\n    /***/\n    63401:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.switch\");\n      /***/\n    },\n\n    /***/\n    52713:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.textbox\");\n      /***/\n    },\n\n    /***/\n    66098:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.window\");\n      /***/\n    },\n\n    /***/\n    72834:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"jquery\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(44211);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","jQuery","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","__meta__","id","name","category","description","depends","features","$","kendo","window","ui","DataSource","data","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","keys","isPlainObject","extend","map","grep","isArray","Array","inArray","push","prototype","isFunction","isEmptyObject","contains","math","Math","DOT","PROGRESS","ERROR","HIERARCHY_CELL_CLASS","DATA_CELL","attr","SELECTION_CELL_SELECTOR","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","WRAPPER","NS","CONTENTRLOCKEDCONTAINER","GROUPCELLCLASS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","RESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","HEIGHT","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","UNIQUE_ID","MINCOLSPANVALUE","COLSPAN","OVERFLOW","HIDDEN","SORT","GROUP_SORT","DELETECONFIRM","NORECORDS","CONFIRMDELETE","CANCELDELETE","COLLAPSE","EXPAND","ARIALABEL","formatRegExp","templateHashRegExp","whitespaceRegExp","leftRegExp","RegExp","rightRegExp","nonDataCellsRegExp","filterRowRegExp","COMMANDBUTTONTMPL","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","SORTHEADERTMPL","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","content","widget","scrollContainer","headerCellInner","GroupsPager","Pager","init","element","options","fn","call","dataSource","useRanges","_omitPrefetch","totalPages","that","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","bind","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","events","destroy","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","sender","capture","move","scrollTop","y","delta","scrollLeft","x","preventDefault","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","trigger","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","rangeStart","position","index","result","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","prefetchAt","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","html","maxHeight","wrapperElement","totalHeight","idx","wasScrolledToBottom","addScrollBarHeight","offsetWidth","action","cancel","page","attrEquals","attrName","attrValue","groupCells","count","join","stringifyAttributes","attributes","defaultCommands","create","text","className","iconClass","save","edit","update","themeColor","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","filter","find","attachCustomCommandEvent","commands","length","command","commandName","click","replace","normalizeColumns","columns","encoded","hide","locked","parentIds","column","field","hidden","isVisible","addHiddenStyle","footerAttributes","headerAttributes","uid","guid","headers","columnParent","parents","columnParents","inserted","splice","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","hideByMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","isElementVisible","visibleColumns","columnsWithMedia","i","minScreenWidth","Error","concat","toJQuery","toArray","updateCellRowSpan","cell","sourceLockedColumnsCount","lockedColumnDepth","depth","lockedColumns","nonLockedColumnDepth","nonLockedColumns","rowSpan","findColumnByField","moveCellsBetweenContainers","sources","target","leafs","destination","groups","sourcesDepth","targetDepth","rows","insertAfter","last","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","cells","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","findParentColumnWithChildren","rtl","targetLocked","findReorderTarget","masterColumns","parentColumns","targetIndex","flatColumnsInDomOrder","flatColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","indexOf","removeRowSpanValue","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","stickyColumns","sticky","visibleStickyColumns","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","childColumns","visibleChildColumns","getColumnsFields","editField","title","format","editor","values","editorOptions","label","leafDataCells","indexAttr","sort","a","b","indexA","indexB","parentColumnsCells","closest","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","next","appendContent","tbody","table","empty","placeholder","tmp","innerHTML","createElement","firstChild","replaceChild","match","hasHiddenStyle","normalizeCols","hasDetails","colgroup","is","append","prepend","normalizeHeaderCells","lastIndex","len","th","insertBefore","convertToObject","array","item","formatGroupValue","columnValues","isForeignKey","groupValue","htmlEncode","setCellVisibility","pad","state","hideColumnCells","columnIndex","groupRows","hasSubgroups","items","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_aria","_columns","_foreignKeyPromises","when","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","addClass","_resizeHandler","resize","notify","scrollable","scrollableContent","leftMostPosition","groupable","virtualScrollable","navigatable","selectable","toolbar","filterable","sortable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","messages","cancelDelete","confirmation","confirmDelete","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","_hasReorderableRows","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","$angular","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","get","each","filterMenu","_cellId","_hasDetails","_createResizeHandle","indicatorWidth","halfResizeHandle","rtlCorrection","headerWrap","ieCorrection","firefoxCorrection","leftMargin","invisibleSpace","leftBorderWidth","top","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","col","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_draggable","kendoDraggable","autoScroll","dragstart","not","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","newIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumns","targetLockedColumns","_reorderContent","lockedRows","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","headerCol","footerCol","beforeVisibleColumn","columnsArray","_findClosestVisibleColumnIndex","slice","prev","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","Selectable","parseOptions","select","clone","elm","innerText","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","args","reorderRows","rowsLength","targetItem","dataItem","_rowDropping","pushMove","autoFitColumns","headerTable","leafCols","visibleLocked","minWidth","contentDiv","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","menu","thWidth","footerTable","j","tables","safari","oldColumnWidth","newColumnWidth","destColumn","virtualScroll","lockChanged","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","_editMode","getByUid","_calculateColumnIndex","virtualOffset","handler","_editContainer","end","closeCell","_scrollVirtualWrapper","mode","editContainer","_mousedownOnEditCell","tap","isLockedCell","has","editCell","shouldCloseCell","_virtualColScroll","_belongsToGrid","editRow","_isVirtualInlineEditable","stopPropagation","removeRow","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","type","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","modelId","key","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","currentIndex","current","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","editMenuGuid","buttonsHTML","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","Form","buttonsTemplate","formData","clearContainer","_openPopUpEditor","windowEditor","windowOptions","center","open","_editAnimation","Editable","cancelChanges","_displayRow","deferred","Deferred","valid","resolve","promise","reject","related","newRow","nextRow","isSelected","isAlt","replaceWith","angularElements","angularData","_showMessage","confirm","confirmDialog","Confirm","preventScroll","closable","okText","done","fail","_isVirtualEditable","_virtualPageToTop","saveChanges","addRow","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_toolbarTmpl","prependTo","saveAsExcel","saveAsPDF","_pdfInitialized","input","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","searchText","attributeClassMatch","split","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","_resetEndless","_addGroupableOptionsToHeader","_skip","_pageSize","_take","columnFieldMap","headerCells","_headerCells","cellFieldAttr","headerCell","columnOptions","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","dragToSelect","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","event","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","eventObject","keyCode","SPACEBAR","shiftKey","clear","_deselectCheckRows","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","grid","stopImmediatePropagation","tableClick","copySelection","areaClipBoard","val","getTSV","copySelectionToClipboard","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","selection","createRange","opacity","selected","delimeter","onlyVisible","hasLockedCols","cellsOffset","lockedCols","inLockedArea","_getCellField","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","showColumn","initiallyHidden","hideColumn","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","any","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","_setStickyColumns","filterCells","stickyStyle","updateStyles","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","Object","selectedSingleItems","_mapSelectionToData","exportSelectedToExcel","ooxml","exporter","ExcelExporter","columnHandler","autoWidth","book","sheets","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","elementType","nodeName","isRowSelection","curr","columnMapHandler","fieldAttr","_relatedCell","clearSelection","selectableoptions","checked","prop","rangeSelectedAttr","removeAttr","allRows","dataSourceOptions","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","headerId","nextId","descId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","edge","dataTables","headerTables","_openHeaderMenu","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","altKey","_setTabIndex","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","handled","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","isInCell","filterFocusable","_handleEditing","active","isInEdit","blur","_toggleCurrent","descriptors","_canDrag","dir","link","focusable","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","back","switchRow","isIE","isEdited","_initMobile","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","hasVirtualScroll","parseVirtualSettings","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","hiddenDivClass","hiddenDiv","expander","isNaN","contentWidth","nonLockedCols","nonLockedColsWidth","footerWrap","scrollableHeight","isGridHeightSet","initialHeight","newHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","compare","forceUnique","checkSource","owner","stick","unstick","filtering","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","paramName","dirtyCellTemplate","classAttribute","expr","_dirtyCellTemplate","dirtyField","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","stringify","useWithBlock","_virtualCols","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","considerNext","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","defaultTemplate","scrollableNoGridHeightStyles","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","groupCellBuilder","groupCellLockedContentBuilder","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","expanding","masterRow","detailRow","ariaLabelText","ariaExpandText","toggleClass","detailCell","toggleRow","toggle","classesRegEx","sectionRowIndex","correctIdx","_createHeaderCells","isColumnGroupable","isGroupedBy","_appendLockedColumnContent","skipHiddenCount","spanIdx","colOffset","detach","lockedCells","_appendLockedColumnHeader","trFilter","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","hasTHead","headerContent","_prepareColumns","_updateHeadersAttr","filterRow","existingFilterRow","syncHeight","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_rowsHtml","templates","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","groupData","expanded","_groupsState","isNew","excludeHeader","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","showFooter","footerCount","relatedGroup","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","groupCountAfterCollapse","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCount","groupCountAfterExpand","toggleVisibility","pop","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","isVirtualization","skeleton","progress","_resize","size","force","_isActiveInTable","isCurrentInHeader","contentScrollLeft","cachedItemsToSkip","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","currentRow","firstColumnGroupData","alwaysVisible","table1","table2","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","exportable","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","lockedHeigth","tableHeigth","diff","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","asLowerString","halfHeight","templateColspan","includeAdditionalData","backslashEscapeQuotes","ampRegExp","ltRegExp","quoteRegExp","aposRegExp","gtRegExp","plugin","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/vuejs/app-router/node_modules/@progress/kendo-ui/js/kendo.grid.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 44211:\n/***/ (function(module, exports, __webpack_require__) {\n\n/* provided dependency */ var jQuery = __webpack_require__(72834);\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n        __webpack_require__(36765),\n        __webpack_require__(74733),\n        __webpack_require__(63192),\n        __webpack_require__(66098),\n        __webpack_require__(12600),\n        __webpack_require__(79217),\n        __webpack_require__(80959),\n        __webpack_require__(19000),\n        __webpack_require__(31673),\n        __webpack_require__(49242),\n        __webpack_require__(13397),\n        __webpack_require__(18426),\n        __webpack_require__(87190),\n        __webpack_require__(35425),\n        __webpack_require__(1744),\n        __webpack_require__(1291),\n        __webpack_require__(36842),\n        __webpack_require__(20648),\n        __webpack_require__(52220),\n        __webpack_require__(1291),\n        __webpack_require__(63401),\n        __webpack_require__(27451),\n        __webpack_require__(52713),\n        __webpack_require__(38847)\n    ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\nvar __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [ \"data\", \"columnsorter\", \"sortable\", \"html.button\" ],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n    } ]\n};\n\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        WRAPPER = \".k-grid.k-widget\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n\n        FOCUSED = \"k-focus\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_COLUMN_MENU_CLASS = \"k-header-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        RESIZE = \"resize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        HEIGHT = \"height\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ARIALABEL = \"aria-label\",\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = '<button type=\"button\" class=\"#=className#\" #=attr#>#=text#</button>',\n        SELECTCOLUMNTMPL = '<input tabindex=\"-1\" class=\"k-select-checkbox ' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">',\n        SELECTCOLUMNHEADERTMPL = '<input tabindex=\"-1\" class=\"k-select-checkbox ' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">',\n        DRAGHANDLECOLUMNTMPL = '<span class=\"k-icon k-i-reorder\"></span>',\n        SORTHEADERTMPL = '<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">#=text#</span></span></span>',\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        widget: \"k-widget\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: \"auto\",\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", \"none\");\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                html = \"\",\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n            }\n\n            if (totalHeight % maxHeight) {\n                html += '<div style=\"width:1px;height:' + (totalHeight % maxHeight) + 'px\"></div>';\n            }\n\n            that.verticalScrollbar.html(html);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-group-cell\">&nbsp;</td>');\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-icon k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-icon k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-icon k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-delete\",\n            iconClass: \"k-icon k-i-close\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit\",\n            iconClass: \"k-icon k-i-edit\"\n        },\n        update: {\n            text: \"Update\",\n            className: \"k-grid-update\",\n            iconClass: \"k-icon k-i-check\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel\",\n            iconClass: \"k-icon k-i-cancel\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-icon k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-icon k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== \"none\";\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== \"none\";\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(\".k-header\")\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        column[attribute][property] = column[attribute][property].replace(value, \"\");\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        cells.sort(function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n\n        return cells;\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(\"tr\");\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(\"tr\");\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, empty) {\n        var placeholder,\n            tmp = tbody;\n\n        // necessary for AngularJS to cleanup its guts.\n        if (empty) {\n            tbody.empty();\n        }\n\n        if (tbodySupportsInnerHtml) {\n            tbody[0].innerHTML = html;\n        } else {\n            placeholder = document.createElement(\"div\");\n            placeholder.innerHTML = \"<table><tbody>\" + html + \"</tbody></table>\";\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style;\n\n        if (!style) {\n            style = \"display:none\";\n        } else {\n            style = style.replace(/display:[^;]*/i, \"display:none\");\n            if (!style.match(/display:/i)) {\n                style = style.replace(/(.*)?/i, \"display:none;$1\");\n            }\n        }\n\n        return extend({}, attr, { style: style });\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style || \"\";\n\n        return style.indexOf(\"display:none\") !== -1;\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style;\n\n        if (style) {\n            attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/ig, \"\");\n        }\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups) {\n        var colgroup = table.find(\">colgroup\"),\n            width,\n            cols = map(visibleColumns, function(column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + \"px\");\n                    }\n\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n\n        return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== \"none\";\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : \"none\";\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(\"tr\").first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(\"tr\").first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n\n            that._element();\n\n            that._aria();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._groupable();\n\n            that._toolbar();\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._clipboard();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n           CHANGE,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            columnResizeHandleWidth: 3,\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element;\n\n            that._angularItems(\"cleanup\");\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            if (that.options.reorderable === true || (that.options.reorderable && that.options.reorderable.columns)) {\n                that.wrapper.data(\"kendoReorderable\").destroy();\n            }\n\n            if (that._hasReorderableRows()) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            result.$angular = undefined;\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(\"k-grouping-row\")) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            this.angular(\"cleanup\", function() {\n                return { elements: that.thead.get() };\n            });\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var id = this.element.attr(\"id\") || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _element: function() {\n            var that = this,\n                table = that.element;\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            that.table = table.attr(\"role\", that._hasDetails() ? \"treegrid\" : \"grid\");\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(\"dblclick\" + NS).on(\"dblclick\" + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(\"mousemove\" + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(\"div\"), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(\"div\"), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        var header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        var contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        var columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(\"tr\").first().add(that.thead.find(\"tr\").first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend('<span class=\"k-icon k-drag-status k-i-cancel\"></span>');\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                            that.table.find(\">tbody>tr.k-grouping-row\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\"><span class=\"k-icon k-drag-status k-i-cancel\"></span></div>');\n\n                    if (selectable && that.select().length > 1) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + that.options.messages.itemsSelected + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"k-i-insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-header-column-menu, a.k-grid-filter');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(\"auto\");\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(\"tr\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + \"px\";\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(\"tr\") && this._editMode() !== \"popup\") {\n                container = container.closest(\"tr\");\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(\"tr\").find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            var that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    var target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                };\n\n            if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(\"mousedown\" + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            var target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            tap: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-delete\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler(e);\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            that.editRow(element.closest(\"tr\"));\n                        });\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                if (editable.destroy !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete\", function(e) {\n                        var element = $(this);\n                        if (!that._belongsToGrid(element)) {\n                            return;\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.removeRow(element.closest(\"tr\"));\n                    });\n                } else {\n                    //Required for the MVC server wrapper delete button\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete\", function(e) {\n                        if (!that._belongsToGrid($(this))) {\n                            return;\n                        }\n                        e.stopPropagation();\n\n                        if (!that._confirmation()) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            var that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n\n                    var container = that.editView ? that.editView.element : that._editContainer;\n                    var window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        container.off(CLICK + NS, \".k-grid-cancel\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-update\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            var that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(\"height\", \"\")[0], that._relatedRow(tr).css(\"height\", \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n\n            that.angular(\"compile\", function() {\n                return {\n                    elements: cell,\n                    data: [ { dataItem: dataItem } ]\n                };\n            });\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            var mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            var model;\n            var that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            var mode = that._editMode();\n            var container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        var cell = $(this);\n                        var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-update\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-end\">';\n                buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass });\n                buttonsHTML += '</div>';\n\n                html += template ? buttonsHTML + '</div>' : '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                            '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel\" title=\"#=messages.cancel#\" ' +\n                            'aria-label=\"#=messages.cancel#\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                            (that.options.messages.commands.edit || \"Edit\") +\n                            '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-update\" title=\"#=messages.done#\" ' +\n                            'aria-label=\"#=messages.done#\"><span class=\"k-icon k-i-check\"></span></a>' +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: \"\",\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: that._isMobile ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth();\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n            var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(\"k-selected\"),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: row.get() }; });\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                var angularElements = newRow;\n                var angularData = [{ dataItem: model }];\n\n                if (related && related.length) {\n                    angularElements = newRow.add(related);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: angularElements.get(),\n                        data: angularData\n                    };\n                });\n\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    newRow.find(\".k-hierarchy-cell .k-icon\")\n                        .removeClass(\"k-i-expand\")\n                        .addClass(\"k-i-collapse\");\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n                editable = that.options.editable,\n                container;\n\n            if (toolbar) {\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    if (!isFunction(toolbar)) {\n                        toolbar = (typeof toolbar === STRING ? toolbar : that._toolbarTmpl(toolbar).replace(templateHashRegExp, \"\\\\#\"));\n                        toolbar = kendo.template(toolbar).bind(that);\n                    }\n\n                    container = $('<div class=\"k-toolbar k-grid-toolbar\" />')\n                        .html(toolbar({}))\n                        .prependTo(wrapper);\n\n                    that.angular(\"compile\", function() {\n                        return { elements: container.get() };\n                    });\n                }\n\n                if (editable && editable.create !== false) {\n                    container.on(CLICK + NS, \".k-grid-add\", function(e) { e.preventDefault(); that.addRow(); })\n                        .on(CLICK + NS, \".k-grid-cancel-changes\", function(e) { e.preventDefault(); that.cancelChanges(); })\n                        .on(CLICK + NS, \".k-grid-save-changes\", function(e) { e.preventDefault(); that.saveChanges(); });\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", function(e) {\n                    e.preventDefault();\n\n                    that.saveAsExcel();\n                });\n\n                container.on(CLICK + NS, \".k-grid-pdf\", function(e) {\n                    e.preventDefault();\n\n                    var promise = that.saveAsPDF();\n                    if (promise) {\n                        promise.done(function() {\n                            that._pdfInitialized = false;\n                        });\n                    }\n                });\n\n                container.on(INPUT + NS, \".k-grid-search input\", function(e) {\n                    var input = e.currentTarget;\n                    clearTimeout(that._searchTimeOut);\n                    that._searchTimeOut = setTimeout(function() {\n                        that._searchTimeOut = null;\n                        var options = that.options;\n                        var searchFields = options.search ? options.search.fields : null;\n                        var expression = { filters: [], logic: \"or\" };\n                        var value = input.value;\n\n                        if (!searchFields) {\n                            searchFields = getColumnsFields(options.columns);\n                        }\n\n                        if (that.dataSource.options.endless) {\n                            that.dataSource.options.endless = null;\n                            that._endlessPageSize = that.dataSource.options.pageSize;\n                        }\n\n                        if (value) {\n                            for (var i = 0; i < searchFields.length; i++) {\n                                that._pushExpression(expression.filters, searchFields[i], value);\n                            }\n                        } else {\n                            expression = {};\n                        }\n\n                        that.dataSource.filter(expression);\n\n                    }, 300);\n                });\n            }\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbarTmpl: function(commands) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                command,\n                searchText = \"\",\n                messages = that.options.messages.commands;\n\n            if (isArray(commands)) {\n                for (idx = 0, length = commands.length; idx < length; idx++) {\n                    command = typeof commands[idx] === 'string' ? commands[idx].toLowerCase() : (commands[idx].name || \"\").toLowerCase();\n                    if (command === \"search\") {\n                        if (typeof commands[idx] !== 'string') {\n                            searchText = commands[idx].text;\n                        }\n                        searchText = searchText || messages.search;\n                        html += \"<span class='k-spacer'></span>\";\n                        html += \"<span class='k-searchbox k-input k-input-md k-rounded-md k-input-solid k-grid-search'>\";\n                        html += \"<span class='k-input-icon k-icon k-i-search'></span>\";\n                        html += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' class='k-input-inner' />\";\n                        html += \"</span>\";\n                    } else {\n                        html += that._createButton(commands[idx]);\n                    }\n                }\n            }\n\n            return html;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: className, text: commandName, attr: \"\", iconClass: \"\" },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(\"tr\");\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(\".k-grouping-row\").index(groupRow)] : { };\n\n                    if (element.hasClass('k-i-collapse')) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse\", that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse\", that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div>&nbsp;</div>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", \"none\");\n                    wrapper.find(filter).css(\"touch-action\", \"none\");\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    allowDrag: that.options.reorderable,\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(that.columns).length : 1;\n            var nonLockedColumns = cell ? that.columns.length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable;\n\n            if (selectable) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        if (e.event) {\n                            that.trigger(CHANGE);\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current, eventObject);\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current, eventObject);\n                            } else {\n                                that.selectable.clear();\n                                that.selectable.value(current, eventObject);\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.add(grid.lockedTable)\n                        .attr(\"tabindex\", 0)\n                        .on(\"mousedown\" + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(\"mousedown\" + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                grid.bind(\"change\",grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(\"tr\")) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    var tr = cell.closest(\"tr\");\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            var table;\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                if (this.options.navigatable) {\n                    table = $(this.current()).closest(\"table\");\n                } else {\n                    table = this.table;\n                }\n                focusTable(table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && options.resizable) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(\"width\");\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(\"width\", \"auto\");\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(\"width\", currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n                    var style = th.attr(\"style\") || \"\";\n                    if (column.sticky) {\n                        th.attr(\"style\", style + column.stickyStyle);\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        style = style.replace(leftRegExp, \"\");\n                        style = style.replace(rightRegExp, \"\");\n                        th.attr(\"style\", style);\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = \"left: \" + stickyLeft + \"px; right: \" + stickyRight + \"px;\";\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"headerAttributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"footerAttributes\", \"style\", stickyStyle);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", rightRegExp);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", rightRegExp);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", rightRegExp);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(\"k-grouping-row\")) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(\"k-grouping-row\")) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n            }\n\n            return result;\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafColumns(this.columns);\n            var item;\n\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporter, visibleColumns, item);\n                this._createExportRows(book, exporter, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafColumns(this.columns);\n\n            exporter.data = data;\n            this._setExporterColumns(exporter, visibleColumns, data[0]);\n            this._createExportRows(book, exporter, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporter._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th\").eq(cell.index()).attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th\").eq(cell.index()).attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                   selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n\n                    if (!cell) {\n                        that._persistSelectedRows();\n                    }\n\n                    that.trigger(CHANGE);\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(\"aria-checked\", true)\n                    .attr(\"aria-label\", \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(\"aria-checked\", false)\n                    .attr(\"aria-label\", \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(\"aria-checked\", false)\n                .prop(\"checked\", false).attr(\"aria-label\", \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(\"aria-checked\", false)\n                    .prop(\"checked\", false).attr(\"aria-label\", \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n            that.trigger(CHANGE);\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT).prop(\"checked\", true)\n                    .attr(\"aria-label\", \"Deselect row\").attr(\"aria-checked\", true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current)\n                .removeClass(FOCUSED)\n                .closest(\"table\")\n                .removeAttr(\"aria-activedescendant\");\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(\"id\", headerId);\n            } else {\n                $(current).removeAttr(\"id\");\n            }\n\n            nextId = next.attr(\"id\");\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (next.is(\"th\")) {\n                descId = nextId;\n            } else {\n                next.attr(\"id\", this._cellId);\n            }\n\n            next.addClass(FOCUSED)\n                .closest(\"table\")\n                .attr(\"aria-activedescendant\", descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            var current = this._current;\n            var scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(\"tabindex\", -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n                //data tables will recive first focus on TAB\n                headerTables.attr(TABINDEX, -1);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(\"mousedown\" + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .on(\"keydown\" + NS, that._openHeaderMenu.bind(that))\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .attr(TABINDEX, math.max(dataTables.attr(TABINDEX) || 0, 0))\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : \"mousedown\" + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(\"tabindex\", 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _openHeaderMenu: function(e) {\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter, .k-header-column-menu\").click();\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _setTabIndex: function(table) {\n            this._navigatableTables.attr(TABINDEX, -1);\n\n            table.attr(TABINDEX, 0);\n        },\n\n        _tableFocus: function(e) {\n            var current = this.current();\n            var table = $(e.currentTarget);\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this._setTabIndex(table);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            var current = this.current();\n            var virtualScroll = this.virtualScroll || {};\n            var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n            var target = $(e.target);\n            var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon\");\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(\"k-grouping-row\")) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(\"k-grouping-row\")) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                      focusTable(container.parent(), true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(container.parent(), true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(kendo.keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(kendo.keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current, currentTable) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(currentTable, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(\"tabindex\", -1);\n                    focusTable(currentTable, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(currentTable, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(\".k-grouping-row\")) {\n                row.find(\".k-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n            var label = current.attr(kendo.attr(\"title\")) || field;\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n                label += \" \" + that.options.messages.ungroupHeader;\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n                label += \" \" + that.options.messages.groupHeader;\n            }\n\n            current.attr(\"aria-label\", label);\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(\"tabindex\", 0);\n                    current.find(\":kendoFocusable\").first().focus();\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).first();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(\"div\").hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(\"k-header\")) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                return leafDataCells(container).filter(isCellVisible).eq(index);\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined && current.hasClass(\"k-header\")) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            var tmpIndex = index;\n            //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n            if (this._currentDataIndex(container, current) !== undefined) {\n                var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var hiddenColumns = currentRowCells.filter(\":hidden\");\n                for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                    if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                        tmpIndex--;\n                    }\n                }\n            }\n            index = tmpIndex;\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(\"div\")) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid k-widget k-grid-display-block\");\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, \"auto\");\n            }\n\n            if (width) {\n                that.wrapper.css(\"width\", width);\n            }\n\n            that._initMobile();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody/>\").appendTo(table);\n            }\n\n            that.tbody = tbody.attr(\"role\", \"rowgroup\");\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"grid\" />');\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        widget.value(active.val());\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    that.angular(\"cleanup\", function() {\n                        return { elements: noRecordsElement.get() };\n                    });\n\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({})).insertAfter(that.table);\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: noRecordsElement.get(),\n                            data: [{}]\n                        };\n                    });\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function() {\n            if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + \"px\";\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + \"px\";\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + \"px\";\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(\"auto\");\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: selectableRow.get() }; });\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                row.replaceWith(tmp);\n\n                tmp = that._items(tbody).eq(idx);\n\n                var angularData = [ { dataItem: model } ];\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: tmp.get(),\n                        data: angularData\n                     };\n                });\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(\"k-selected\")) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(\"k-selected\")) {\n                        cell.addClass(\"k-selected\");\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager-wrap k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    that.angular(\"cleanup\", function() {\n                        return { elements: footer.get() };\n                    });\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                        data: map(that.columns, function(col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(\"tabindex\", -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table><tbody>' + footerRow + '</tbody></table></div></div>');\n                that._appendCols(html.find(\"table\"));\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer\">' + footerRow + '</tfoot>';\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function(element) {\n                    focusTable(element.closest(\"table\"), true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                $angular = options.$angular;\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (!column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner\n                        };\n\n                        if ($angular) {\n                            menuOptions.$angular = $angular;\n                        }\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function(element) {\n                    focusTable(element.closest(\"table\"), true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var $angular = that.options.$angular;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(this.dataSource.group().length);\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    th = $(\"<th/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    th.hide();\n                }\n                rowheader.append(th);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        th.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    if ($angular) {\n                        settings.$angular = $angular;\n                    }\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(th)\n                        .kendoFilterCell(settings);\n                } else {\n                    th.html(\"&nbsp;\");\n                }\n                th.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(\"tabindex\", -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(\"width\")\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(\"id\");\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(\"tr\"),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                className = [],\n                groups = that._groups(),\n                navigatable = that.options.navigatable;\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var dirtyCellTemplate = \"\";\n            var classAttribute;\n\n            if (!rowTemplate) {\n                rowTemplate = \"<tr\";\n\n                if (alt) {\n                    className.push(\"k-alt\");\n                }\n\n                className.push(\"k-master-row\");\n\n                if (className.length) {\n                    rowTemplate += ' class=\"' + className.join(\" \") + '\"';\n                }\n\n                if (length) { // data item is an object\n                    rowTemplate += ' ' + kendo.attr(\"uid\") + '=\"#=' + kendo.expr(\"uid\", settings.paramName) + '#\"';\n                }\n\n                rowTemplate += \" role='row'>\";\n\n                if (groups > 0 && !skipGroupCells) {\n                    rowTemplate += groupCells(groups);\n                }\n\n                if (hasDetails) {\n                    rowTemplate += '<td class=\"k-hierarchy-cell\" aria-expanded=\"false\"><a class=\"k-icon k-i-expand\" href=\"\\\\#\" ' + ARIALABEL + '=\"' + EXPAND + '\" tabindex=\"-1\"></a></td>';\n                }\n\n                for (idx = 0; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column.template;\n                    type = typeof template;\n                    field = column.field;\n\n                    if (that._editMode() === INCELL && field) {\n                        column.attributes = column.attributes || {};\n\n                        if (that.virtualScroll) {\n                            column.attributes[fieldAttr] = field;\n                        }\n\n                        dirtyCellTemplate = that._dirtyCellTemplate(field, paramName);\n                        column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                        if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                            column.attributes[\"class\"] += dirtyCellTemplate;\n                        }\n                    }\n\n                    if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                        column.attributes = removeHiddenStyle(column.attributes);\n                    } else if (!column.colSpan && column.hidden) {\n                        column.attributes = addHiddenStyle(column.attributes);\n                    }\n\n                    if (column.command) {\n                        column.attributes = column.attributes || {};\n                        classAttribute = column.attributes[\"class\"];\n\n                        if (typeof classAttribute !== \"undefined\") {\n                            if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                column.attributes[\"class\"] += \" k-command-cell\";\n                            }\n                        } else {\n                            column.attributes[\"class\"] = \"k-command-cell\";\n                        }\n                    }\n\n                    if (column.draggable) {\n                        column.attributes = column.attributes || {};\n\n                        if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                            column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                        } else {\n                            column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                        }\n\n                        if (typeof column.attributes[\"aria-label\"] === \"undefined\") {\n                            column.attributes[\"aria-label\"] = that.options.messages.dragHandleLabel;\n                        }\n\n                        if (typeof column.attributes.style !== \"undefined\") {\n                            column.attributes.style += \" cursor: move;\";\n                        } else {\n                            column.attributes.style = \"cursor: move;\";\n                        }\n                    }\n\n                    rowTemplate += \"<td\" + stringifyAttributes(column.attributes);\n\n                    if (navigatable && !column.draggable) {\n                        rowTemplate += \" aria-describedby='\" + column.headerAttributes.id + \"'\";\n                    }\n\n                    if (column.colSpan) {\n                        if (column.colSpan > 1) {\n                            rowTemplate += \" \" + kendo.attr(\"virtual\");\n                        }\n                        rowTemplate += \" colSpan='\" + column.colSpan + \"'\";\n                    }\n\n                    rowTemplate += \" role='gridcell'>\";\n                    rowTemplate += that._cellTmpl(column, state);\n\n                    rowTemplate += \"</td>\";\n                }\n\n                rowTemplate += \"</tr>\";\n            }\n\n            rowTemplate = kendo.template(rowTemplate, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field, paramName) {\n            var dirtyField;\n\n            if (field && paramName) {\n                dirtyField = field.charAt(0) === \"[\" ? kendo.expr(field, paramName + \".dirtyFields\") : paramName + \".dirtyFields['\" + field + \"']\";\n\n                return \"#= \" + paramName + \" && \" + paramName + \".dirty && \" + paramName + \".dirtyFields && \" + dirtyField + \" ? ' k-dirty-cell' : '' #\";\n            }\n\n            return \"\";\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                paramName = settings.paramName,\n                field = column.field,\n                html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    for (idx = 0, length = column.command.length; idx < length; idx++) {\n                        if (column.command[idx].visible) {\n                            html += kendo.format(\"#= {0}(data)? '{1}':'' #\",column.command[idx].visible, that._createButton(column.command[idx]).replace(templateHashRegExp, \"\\\\#\").replace(/'/ig,\"\\\\'\"));\n                        } else {\n                            html += that._createButton(column.command[idx]).replace(templateHashRegExp, \"\\\\#\");\n                        }\n                    }\n                    return html;\n                }\n                return that._createButton(column.command).replace(templateHashRegExp, \"\\\\#\");\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            html += that._dirtyIndicatorTemplate(field, paramName);\n\n            if (type === FUNCTION) {\n                state.storage[\"tmpl\" + state.count] = template;\n                html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                state.count ++;\n            } else if (type === STRING) {\n                html += template;\n            } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                html += \"#var v =\" + kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp, \"\\\\#\") + \"#\";\n                html += \"#var f = v[\";\n\n                if (!settings.useWithBlock) {\n                    html += paramName + \".\";\n                }\n\n                html += field + \"]#\";\n                html += \"${f != null ? f : ''}\";\n            } else {\n                html += column.encoded ? \"#:\" : \"#=\";\n\n                if (format) {\n                    html += 'kendo.format(\\\"' + format.replace(formatRegExp,\"\\\\$1\") + '\\\",';\n                }\n\n                if (field) {\n                    field = kendo.expr(field, paramName);\n                    html += field + \"==null?'':\" + field;\n                } else {\n                    html += \"''\";\n                }\n\n                if (format) {\n                    html += \")\";\n                }\n\n                html += \"#\";\n            }\n            return html;\n        },\n\n        _dirtyIndicatorTemplate: function(field, paramName) {\n            var dirtyField;\n\n            if (field && paramName) {\n                dirtyField = field.charAt(0) === \"[\" ? kendo.expr(field, paramName + \".dirtyFields\") : paramName + \".dirtyFields['\" + field + \"']\";\n\n                return \"#= \" + paramName + \" && \" + paramName + \".dirty && \" + paramName + \".dirtyFields && \" + dirtyField +\n                    \" ? '<span class=\\\"k-dirty\\\"></span>' : '' #\";\n            }\n\n            return \"\";\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || \"\");\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-grouping-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-grouping-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n                if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ' style=\"margin:0 auto;position:static;\"' : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            var html = \"\";\n            var type;\n            var tmpl;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                state.storage[\"tmpl\" + state.count] = template;\n                html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                state.count ++;\n            } else if (type === \"string\") {\n                html += template;\n            }\n\n            tmpl = kendo.template(kendo.format(wrapper, NORECORDSCLASS, html), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            html += '<tr class=\"' + rowClass + '\">';\n\n            if (groups > 0 && !skipGroupCells) {\n                html += groupCells(groups);\n            }\n\n            if (that._hasDetails()) {\n                html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n            }\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n                template = column[templateName];\n                type = typeof template;\n\n                html += \"<td\" + stringifyAttributes(column.footerAttributes) + \">\";\n\n                if (template) {\n                    if (type !== FUNCTION) {\n                        scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                        template = kendo.template(template, scope);\n                    }\n\n                    storage[\"tmpl\" + count] = template;\n                    html += \"#=this.tmpl\" + count + \"(\" + paramName + \")#\";\n                    count ++;\n                } else {\n                    html += \"&nbsp;\";\n                }\n\n                html += \"</td>\";\n            }\n\n            html += '</tr>';\n\n            html = kendo.template(html, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            html += '<tr role=\"row\" class=\"' + rowClass + '\">';\n\n            if (!skipGroupCells) {\n                html += '# for (var i = 0; i < data.groupCells; i++) { #' +\n                '<td class=\"k-group-cell\">' +\n                  '&nbsp;' +\n                '</td>' +\n                '# } #';\n            }\n\n            if (that._hasDetails()) {\n                html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n            }\n\n            if (headerTemplateIndex < 0) {\n                html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                return;\n            }\n\n            if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                return kendo.template(html, settings);\n            }\n\n            if (headerTemplateIndex < MINCOLSPANVALUE) {\n                headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : '';\n            }\n            else {\n                html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : groupCellLockedContentBuilder(headerTemplateIndex);\n            }\n\n            for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n                template = column[templateName];\n                type = typeof template;\n\n                if (column.sticky) {\n                    groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                    if (!groupHeaderColumnTemplateClass) {\n                        groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                    }\n\n                    html += \"<td class='\" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"' style='\" + (column.stickyStyle || '') + \"'>\";\n                } else {\n                    html += \"<td>\";\n                }\n\n                if (template) {\n                    if (type !== FUNCTION) {\n                        scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                        template = kendo.template(template, scope);\n                    }\n\n                    storage[\"tmpl\" + count] = template;\n                    html += \"#=this.tmpl\" + count + \"(\" + paramName + \")#\";\n                    count ++;\n                } else {\n                    html += \"&nbsp;\";\n                }\n\n                html += \"</td>\";\n            }\n\n            html += '</tr>';\n\n            html = kendo.template(html, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                html = \"\",\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            html += '<tr class=\"k-detail-row\">';\n            if (groups > 0) {\n                html += groupCells(groups);\n            }\n            html += '<td class=\"k-hierarchy-cell\"></td><td class=\"k-detail-cell\"' + (colspan ? ' colspan=\"' + colspan + '\"' : '') + \">\";\n\n            if (type === FUNCTION) {\n                templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                html += \"#=this.tmpl\" + templateFunctionCount + \"(\" + paramName + \")#\";\n                templateFunctionCount ++;\n            } else {\n                html += template;\n            }\n\n            html += \"</td></tr>\";\n\n            html = kendo.template(html, settings);\n\n            if (templateFunctionCount > 0) {\n                return html.bind(templateFunctionStorage);\n            }\n\n            return html;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(\"row\") != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse\", function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.hasClass(\"k-i-expand\"),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            button.toggleClass(\"k-i-expand\", !expanding)\n                .toggleClass(\"k-i-collapse\", expanding)\n                .attr(ARIALABEL, ariaLabelText);\n\n            cell.attr(\"aria-expanded\", ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: detailRow.get(),\n                        data: [ { dataItem: data } ]\n                    };\n                });\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td .k-i-expand');\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td .k-i-collapse');\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                var index = inArray(th, leafs);\n\n                if (th.selectable) {\n                    html += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({});\n                    html += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    html += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    html += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    html += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    html += \">\" + text + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    html += \"<th scope='col' role='columnheader' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false) || (filterable && th.filterable !== false && !th.command)) {\n                        html += \" aria-haspopup='true'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        html += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        html += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        html += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        html += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined) {\n                        html += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th)) {\n                        html += \"aria-label='\" + (title || th.field) + \" \";\n                        html += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        html += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        html += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    html += stringifyAttributes(th.headerAttributes);\n\n                    if (sortable) {\n                        text = kendo.template(SORTHEADERTMPL)({ text: text });\n                    }\n\n                    html += \">\" + text + \"</th>\";\n                }\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table><colgroup></colgroup><tbody></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table><colgroup></colgroup><tbody><tr class=\"k-footer-template\"></tr></tbody></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(\"tr\"));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(\"tr\").first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table><colgroup></colgroup><thead>';\n                html += new Array(rows.length + 1).join(\"<tr></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(\"tr\").eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead/>\").insertBefore(that.tbody);\n            }\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = \"none\";\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.attr(\"role\", \"row\").find(\"th\").addClass(\"k-header\");\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            this.angular(\"cleanup\", function() {\n                return {\n                    elements: thead.find(\"th\" + NAVCELL).get()\n                };\n            });\n\n            this.angular(\"compile\", function() {\n                return {\n                    elements: thead.find(HEADERCELLS).get(),\n                    data: map(columns, function(col) { return { column: col }; })\n                };\n            });\n\n            that.thead = thead.attr(\"role\", \"rowgroup\");\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n\n            if (that.groupable) {\n                that._attachGroupable();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        html += altRowTemplate(data[idx]);\n                    } else {\n                        html += rowTemplate(data[idx]);\n                    }\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(\"div\").hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(\"tr\");\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(\"tr\").eq(group.index()).nextAll(\"tr\");\n                }\n            }\n\n            group.find(\".k-i-collapse\").addClass(\"k-i-expand\").removeClass(\"k-i-collapse\");\n            group.find(\"td[aria-expanded='true']\").first().attr(\"aria-expanded\", false)\n                .find(\"a\").attr(ARIALABEL, EXPAND);\n\n            group = group.nextAll(\"tr\");\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(\"k-grouping-row\")) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(\"div\").hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(\"tr\");\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(\"tr\").eq(group.index()).nextAll(\"tr\");\n                }\n            }\n\n            group.find(\".k-i-expand\").addClass(\"k-i-collapse\").removeClass(\"k-i-expand\");\n            group.find(\"td[aria-expanded='false']\").first().attr(\"aria-expanded\", true)\n                .find(\"a\").attr(ARIALABEL, COLLAPSE);\n            group = group.nextAll(\"tr\");\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(\"k-grouping-row\") && tr.find(\".k-icon\").hasClass(\"k-i-collapse\")) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon\").hasClass(\"k-i-collapse\")) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(\"k-grouping-row\")) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"th.k-group-cell\").length,\n                length = container.find(\"tr\").first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(\"tr\").each(function() {\n                    $(this).find(\"th.k-group-cell\").eq(groups).remove();\n                    $(this).find(\"th.k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n\n                setColumnVisibility(column, false);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                   this.hideColumn(column.columns[idx]);\n                }\n\n                that.trigger(COLUMNHIDE, { column: column });\n\n                return;\n            }\n\n            columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n            setColumnVisibility(column, false);\n\n            that._setParentsVisibility(column, false);\n\n            that._templates();\n\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnIndex;\n            if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= visibleLocked;\n            }\n\n            cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n            cell[0].style.display = \"none\";\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>th\"), columnIndex, false);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNHIDE, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n            } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._syncLockedFooterHeight();\n            } else {\n                cols = that.thead.prev().find(\"col\");\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                    tables.each(function() {\n                        this.style.width = width + \"px\";\n                    });\n\n                    that._footerWidth = width;\n                    that._setContentWidth();\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that.trigger(COLUMNHIDE, { column: column });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : \"none\";\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            } else {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item.field === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            }\n\n            if (!column || isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                setColumnVisibility(column, true);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                    if (!originalColumn.columns[idx].hidden) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                }\n\n                that.trigger(COLUMNSHOW, { column: column });\n\n                return;\n            }\n\n            columnLeafIndex = inArray(column, leafColumns(columns));\n\n            setColumnVisibility(column, true);\n\n            that._setParentsVisibility(column, true);\n\n            that._templates();\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnLeafIndex;\n            if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= lockedColumnsCount;\n            }\n\n            cell = leafDataCells(container).eq(headerCellIndex);\n            cell[0].style.display = \"\";\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>th\"), columnLeafIndex, true);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNSHOW, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n            } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                if (!column.width) {\n                    tables.width(\"\");\n                } else {\n                    width = 0;\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth.indexOf(\"%\") > -1) {\n                            width = 0;\n                            break;\n                        }\n                        width += parseInt(colWidth, 10);\n                    }\n\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + \"px\";\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that.trigger(COLUMNSHOW, { column: column });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = (this.dataSource.group() || []).length;\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(\"tr\").first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\") {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = (that.dataSource.group() || []).length,\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                contentScrollLeft,\n                cachedItemsToSkip;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                 that._progress(false);\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n            cachedItemsToSkip = that._skipRerenderItemsCount;\n            that._renderContent(data, colspan, groups);\n            if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n            }\n            that._renderLockedContent(data, colspan, groups);\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            that._muteAngularRebind(function() {\n                that._angularItems(\"compile\");\n            });\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            that.trigger(DATABOUND);\n       },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n            if (currentIndex === undefined || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this._current.closest(\"table\")[0], true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n       _angularItems: function(cmd) {\n\n           kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n           if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n               this._cleanupDetailItems();\n           }\n\n           this._angularGroupItems(cmd);\n\n           this._angularGroupFooterItems(cmd);\n       },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n              that.angular(\"cleanup\", function() {\n                   return { elements: that.tbody.children(\".k-detail-row\") };\n               });\n\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _angularGroupItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n               container = that.lockedTable.find(\"tbody\");\n           }\n\n           if (that._group) {\n              that.angular(cmd, function() {\n                   return {\n                       elements: container.children(\".k-grouping-row\"),\n                       data: $.map(groupRows(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _angularGroupFooterItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n                container = that.element;\n           }\n\n           if (that._group && that.groupFooterTemplate) {\n\n               that.angular(cmd, function() {\n                   return {\n                       elements: container.find(\".k-group-footer\"),\n                       data: $.map(groupFooters(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(\".k-grouping-row\"),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text)\n            );\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.$angular);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"none\";\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + \"px\";\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('table[role$=\"grid\"] > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: \"auto\", width: \"auto\"\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: \"auto\", width: \"auto\", overflow: \"visible\" });\n           clone.find('table[role$=\"grid\"], .k-grid-footer table').css({ height: \"auto\", width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           this._initPDFProgress(progress);\n\n           var body = clone.find('table[role$=\"grid\"] > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != \"auto\") {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           this._initPDFProgress(progress);\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n\n        Grid.prototype._initPDFProgress = function(deferred) {\n           var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n           loading.prepend(this.wrapper.clone().css({\n               position: \"absolute\", top: 0, left: 0\n           }));\n\n           this._pdfInitialized = true;\n           this.wrapper.append(loading);\n\n           var pb = $(\"<div class='k-loading-pdf-progress'>\")\n           .appendTo(loading)\n           .kendoProgressBar({\n               type: \"chunk\",\n               chunkCount: 10,\n               min: 0,\n               max: 1,\n               value: 0\n           }).data(\"kendoProgressBar\");\n\n           deferred.progress(function(e) {\n               pb.value(e.progress);\n           })\n           .always(function() {\n               kendo.destroy(loading);\n               loading.remove();\n           });\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + \"px\";\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + \"px\";\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + \"px\";\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n    function focusTable(table, direct) {\n        if (direct === true) {\n            table = $(table);\n            var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(\":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n   }\n\n    function tableClick(e) {\n        var currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(\"a.k-i-expand, a.k-i-collapse\")) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(currentTable, true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return '<td colspan=\"#=data.colspan +' + headerTemplateIndex + '#\">' +\n    '<p class=\"k-reset\">' +\n    '<a class=\"k-icon k-i-collapse\" href=\"\\\\#\" tabindex=\"-1\" ' +\n    ARIALABEL + '=\"' + COLLAPSE +\n    '\"></a>#=data.text#' +\n    '</p></td>';\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td colspan=\"' + headerTemplateIndex + '\">' +\n    '<p class=\"k-reset\">&nbsp;</p></td>';\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData) {\n    return '<tr role=\"row\"' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-grouping-row\">' + groupCells(level) +\n        '<td colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        '<a class=\"k-icon ' + (expanded ? 'k-i-collapse' : 'k-i-expand') + '\" href=\"#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>' + text +\n    '</p></td></tr>';\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr role=\"row\" class=\"k-grouping-row\">' +\n        '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = \"none\";\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 80959:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.columnmenu\");\n\n/***/ }),\n\n/***/ 74733:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.columnsorter\");\n\n/***/ }),\n\n/***/ 36765:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.data\");\n\n/***/ }),\n\n/***/ 52220:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.dialog\");\n\n/***/ }),\n\n/***/ 63192:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.editable\");\n\n/***/ }),\n\n/***/ 1744:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.excel\");\n\n/***/ }),\n\n/***/ 79217:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.filtercell\");\n\n/***/ }),\n\n/***/ 12600:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.filtermenu\");\n\n/***/ }),\n\n/***/ 38847:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.form\");\n\n/***/ }),\n\n/***/ 19000:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.groupable\");\n\n/***/ }),\n\n/***/ 27451:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.html.button\");\n\n/***/ }),\n\n/***/ 35425:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.ooxml\");\n\n/***/ }),\n\n/***/ 31673:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.pager\");\n\n/***/ }),\n\n/***/ 1291:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.pane\");\n\n/***/ }),\n\n/***/ 20648:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.pdf\");\n\n/***/ }),\n\n/***/ 36842:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.progressbar\");\n\n/***/ }),\n\n/***/ 18426:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.reorderable\");\n\n/***/ }),\n\n/***/ 87190:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.resizable\");\n\n/***/ }),\n\n/***/ 49242:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.selectable\");\n\n/***/ }),\n\n/***/ 13397:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.sortable\");\n\n/***/ }),\n\n/***/ 63401:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.switch\");\n\n/***/ }),\n\n/***/ 52713:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.textbox\");\n\n/***/ }),\n\n/***/ 66098:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.window\");\n\n/***/ }),\n\n/***/ 72834:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"jquery\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(44211);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}