{"ast":null,"code":"require(\"core-js/modules/es.array.at.js\");\n\nrequire(\"core-js/modules/es.string.at-alternative.js\");\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    57100:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(57949), __webpack_require__(14458), __webpack_require__(74560)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        var __meta__ = {\n          id: \"data\",\n          name: \"Data source\",\n          category: \"framework\",\n          description: \"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.\",\n          depends: [\"core\"],\n          features: [{\n            id: \"data-odata\",\n            name: \"OData\",\n            description: \"Support for accessing Open Data Protocol (OData) services.\",\n            depends: [\"data.odata\"]\n          }, {\n            id: \"data-signalr\",\n            name: \"SignalR\",\n            description: \"Support for binding to SignalR hubs.\",\n            depends: [\"data.signalr\"]\n          }, {\n            id: \"data-XML\",\n            name: \"XML\",\n            description: \"Support for binding to XML.\",\n            depends: [\"data.xml\"]\n          }]\n        };\n\n        (function ($, undefined) {\n          var extend = $.extend,\n              isPlainObject = $.isPlainObject,\n              isEmptyObject = $.isEmptyObject,\n              isArray = Array.isArray,\n              grep = $.grep,\n              ajax = $.ajax,\n              map,\n              each = $.each,\n              noop = $.noop,\n              kendo = window.kendo,\n              isFunction = kendo.isFunction,\n              Observable = kendo.Observable,\n              Class = kendo.Class,\n              STRING = \"string\",\n              FUNCTION = \"function\",\n              ASCENDING = \"asc\",\n              CREATE = \"create\",\n              READ = \"read\",\n              UPDATE = \"update\",\n              DESTROY = \"destroy\",\n              CHANGE = \"change\",\n              SYNC = \"sync\",\n              GET = \"get\",\n              ERROR = \"error\",\n              REQUESTSTART = \"requestStart\",\n              PROGRESS = \"progress\",\n              REQUESTEND = \"requestEnd\",\n              ITEMSLOADED = \"itemsLoaded\",\n              ITEMLOAD = \"itemLoad\",\n              crud = [CREATE, READ, UPDATE, DESTROY],\n              identity = function (o) {\n            return o;\n          },\n              getter = kendo.getter,\n              stringify = kendo.stringify,\n              math = Math,\n              push = [].push,\n              join = [].join,\n              pop = [].pop,\n              splice = [].splice,\n              shift = [].shift,\n              slice = [].slice,\n              unshift = [].unshift,\n              toString = {}.toString,\n              stableSort = kendo.support.stableSort,\n              dateRegExp = /^\\/Date\\((.*?)\\)\\/$/,\n              objectKeys = [];\n\n          var ObservableArray = Observable.extend({\n            init: function (array, type) {\n              var that = this;\n              that.type = type || ObservableObject;\n              Observable.fn.init.call(that);\n              that.length = array.length;\n              that.wrapAll(array, that);\n              that._loadPromises = [];\n              that._loadedNodes = [];\n            },\n            at: function (index) {\n              return this[index];\n            },\n            toJSON: function (serializeFunctions) {\n              var idx,\n                  length = this.length,\n                  value,\n                  json = new Array(length);\n\n              for (idx = 0; idx < length; idx++) {\n                value = this[idx];\n\n                if (value instanceof ObservableObject) {\n                  value = value.toJSON(serializeFunctions);\n                }\n\n                json[idx] = value;\n              }\n\n              return json;\n            },\n            parent: noop,\n            wrapAll: function (source, target) {\n              var that = this,\n                  idx,\n                  length,\n                  parent = function () {\n                return that;\n              };\n\n              target = target || [];\n\n              for (idx = 0, length = source.length; idx < length; idx++) {\n                target[idx] = that.wrap(source[idx], parent);\n              }\n\n              return target;\n            },\n            wrap: function (object, parent) {\n              var that = this,\n                  observable;\n\n              if (object !== null && toString.call(object) === \"[object Object]\") {\n                observable = object instanceof that.type || object instanceof Model;\n\n                if (!observable) {\n                  object = object instanceof ObservableObject ? object.toJSON() : object;\n                  object = new that.type(object);\n                }\n\n                object.parent = parent;\n                object.bind(CHANGE, function (e) {\n                  var isGroup = object.hasOwnProperty(\"hasSubgroups\");\n                  that.trigger(CHANGE, {\n                    field: e.field,\n                    node: e.node,\n                    index: e.index,\n                    items: e.items || [this],\n                    action: e.node || isGroup ? e.action || \"itemloaded\" : \"itemchange\"\n                  });\n                });\n                object.bind(ITEMLOAD, function (e) {\n                  that._loadPromises.push(e.promise);\n\n                  that._loading = true;\n                  e.promise.done(function () {\n                    that._loadedNodes.push(e.node);\n\n                    var index = that._loadPromises.indexOf(e.promise);\n\n                    that._loadPromises.splice(index, 1);\n\n                    if (!that._loadPromises.length) {\n                      that._loading = false;\n                      that.trigger(ITEMSLOADED, {\n                        collection: that,\n                        nodes: that._loadedNodes\n                      });\n                      that._loadedNodes = [];\n                    }\n                  });\n                });\n              }\n\n              return object;\n            },\n            loading: function () {\n              return this._loading;\n            },\n            push: function () {\n              var index = this.length,\n                  items = this.wrapAll(arguments),\n                  result;\n              result = push.apply(this, items);\n\n              if (!this.omitChangeEvent) {\n                this.trigger(CHANGE, {\n                  action: \"add\",\n                  index: index,\n                  items: items\n                });\n              }\n\n              return result;\n            },\n            slice: slice,\n            sort: [].sort,\n            join: join,\n            pop: function () {\n              var length = this.length,\n                  result = pop.apply(this);\n\n              if (length) {\n                this.trigger(CHANGE, {\n                  action: \"remove\",\n                  index: length - 1,\n                  items: [result]\n                });\n              }\n\n              return result;\n            },\n            splice: function (index, howMany, item) {\n              var items = this.wrapAll(slice.call(arguments, 2)),\n                  result,\n                  i,\n                  len;\n              result = splice.apply(this, [index, howMany].concat(items));\n\n              if (result.length) {\n                if (!this.omitChangeEvent) {\n                  this.trigger(CHANGE, {\n                    action: \"remove\",\n                    index: index,\n                    items: result\n                  });\n                }\n\n                for (i = 0, len = result.length; i < len; i++) {\n                  if (result[i] && result[i].children) {\n                    result[i].unbind(CHANGE);\n                  }\n                }\n              }\n\n              if (item) {\n                if (!this.omitChangeEvent) {\n                  this.trigger(CHANGE, {\n                    action: \"add\",\n                    index: index,\n                    items: items\n                  });\n                }\n              }\n\n              return result;\n            },\n            shift: function () {\n              var length = this.length,\n                  result = shift.apply(this);\n\n              if (length) {\n                this.trigger(CHANGE, {\n                  action: \"remove\",\n                  index: 0,\n                  items: [result]\n                });\n              }\n\n              return result;\n            },\n            unshift: function () {\n              var items = this.wrapAll(arguments),\n                  result;\n              result = unshift.apply(this, items);\n              this.trigger(CHANGE, {\n                action: \"add\",\n                index: 0,\n                items: items\n              });\n              return result;\n            },\n            indexOf: function (item) {\n              var that = this,\n                  idx,\n                  length;\n\n              for (idx = 0, length = that.length; idx < length; idx++) {\n                if (that[idx] === item) {\n                  return idx;\n                }\n              }\n\n              return -1;\n            },\n            forEach: function (callback, thisArg) {\n              var idx = 0;\n              var length = this.length;\n              var context = thisArg || window;\n\n              for (; idx < length; idx++) {\n                callback.call(context, this[idx], idx, this);\n              }\n            },\n            map: function (callback, thisArg) {\n              var idx = 0;\n              var result = [];\n              var length = this.length;\n              var context = thisArg || window;\n\n              for (; idx < length; idx++) {\n                result[idx] = callback.call(context, this[idx], idx, this);\n              }\n\n              return result;\n            },\n            reduce: function (callback) {\n              var idx = 0,\n                  result,\n                  length = this.length;\n\n              if (arguments.length == 2) {\n                result = arguments[1];\n              } else if (idx < length) {\n                result = this[idx++];\n              }\n\n              for (; idx < length; idx++) {\n                result = callback(result, this[idx], idx, this);\n              }\n\n              return result;\n            },\n            reduceRight: function (callback) {\n              var idx = this.length - 1,\n                  result;\n\n              if (arguments.length == 2) {\n                result = arguments[1];\n              } else if (idx > 0) {\n                result = this[idx--];\n              }\n\n              for (; idx >= 0; idx--) {\n                result = callback(result, this[idx], idx, this);\n              }\n\n              return result;\n            },\n            filter: function (callback, thisArg) {\n              var idx = 0;\n              var result = [];\n              var item;\n              var length = this.length;\n              var context = thisArg || window;\n\n              for (; idx < length; idx++) {\n                item = this[idx];\n\n                if (callback.call(context, item, idx, this)) {\n                  result[result.length] = item;\n                }\n              }\n\n              return result;\n            },\n            find: function (callback, thisArg) {\n              var idx = 0;\n              var item;\n              var length = this.length;\n              var context = thisArg || window;\n\n              for (; idx < length; idx++) {\n                item = this[idx];\n\n                if (callback.call(context, item, idx, this)) {\n                  return item;\n                }\n              }\n            },\n            every: function (callback, thisArg) {\n              var idx = 0;\n              var item;\n              var length = this.length;\n              var context = thisArg || window;\n\n              for (; idx < length; idx++) {\n                item = this[idx];\n\n                if (!callback.call(context, item, idx, this)) {\n                  return false;\n                }\n              }\n\n              return true;\n            },\n            some: function (callback, thisArg) {\n              var idx = 0;\n              var item;\n              var length = this.length;\n              var context = thisArg || window;\n\n              for (; idx < length; idx++) {\n                item = this[idx];\n\n                if (callback.call(context, item, idx, this)) {\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            // non-standard collection methods\n            remove: function (item) {\n              var idx = this.indexOf(item);\n\n              if (idx !== -1) {\n                this.splice(idx, 1);\n              }\n            },\n            empty: function () {\n              this.splice(0, this.length);\n            }\n          }); // Polyfill for Symbol.iterator\n\n          if (typeof Symbol !== \"undefined\" && Symbol.iterator && !ObservableArray.prototype[Symbol.iterator]) {\n            ObservableArray.prototype[Symbol.iterator] = [][Symbol.iterator];\n          }\n\n          var LazyObservableArray = ObservableArray.extend({\n            init: function (data, type, events) {\n              var parentFn = function () {\n                return this;\n              };\n\n              Observable.fn.init.call(this);\n              this.type = type || ObservableObject;\n\n              if (events) {\n                this._events = events;\n              }\n\n              for (var idx = 0; idx < data.length; idx++) {\n                this[idx] = data[idx];\n              }\n\n              this.length = idx;\n              this._parent = parentFn.bind(this);\n            },\n            at: function (index) {\n              var item = this[index];\n\n              if (!(item instanceof this.type)) {\n                item = this[index] = this.wrap(item, this._parent);\n              } else {\n                item.parent = this._parent;\n              }\n\n              return item;\n            }\n          });\n\n          function eventHandler(context, type, field, prefix) {\n            return function (e) {\n              var event = {},\n                  key;\n\n              for (key in e) {\n                event[key] = e[key];\n              }\n\n              if (prefix) {\n                event.field = field + \".\" + e.field;\n              } else {\n                event.field = field;\n              }\n\n              if (type == CHANGE && context._notifyChange) {\n                context._notifyChange(event);\n              }\n\n              context.trigger(type, event);\n            };\n          }\n\n          function isPrimitiveType(value) {\n            return typeof value === \"object\" && Object.getPrototypeOf(value) === Object.getPrototypeOf({}) || Object.getPrototypeOf(value) === Object.getPrototypeOf(new Date()) || typeof value !== \"object\";\n          }\n\n          function ownKeys(value, ignoreObjectKeys) {\n            var props = [];\n            var protoKeys = [];\n            var keys, filteredObjectKeys;\n            value = value || {};\n\n            if (!isPrimitiveType(value)) {\n              protoKeys = Object.getOwnPropertyNames(Object.getPrototypeOf(value));\n            }\n\n            keys = Object.getOwnPropertyNames(value).concat(protoKeys);\n            filteredObjectKeys = objectKeys.filter(function (key) {\n              return keys.indexOf(key) < 0;\n            });\n\n            while (value) {\n              Object.getOwnPropertyNames(value).forEach(function (prop) {\n                if (props.indexOf(prop) === -1 && (!ignoreObjectKeys || filteredObjectKeys.indexOf(prop) < 0)) {\n                  props.push(prop);\n                }\n              });\n              value = Object.getPrototypeOf(value);\n            }\n\n            return props;\n          }\n\n          objectKeys = ownKeys({}, false);\n          var ObservableObject = Observable.extend({\n            init: function (value) {\n              var that = this,\n                  member,\n                  keys = ownKeys(value, true),\n                  parent = function () {\n                return that;\n              };\n\n              Observable.fn.init.call(this);\n              this._handlers = {};\n              keys.forEach(function (field) {\n                member = value[field];\n\n                if (typeof member === \"object\" && member && !member.getTime && field.charAt(0) != \"_\") {\n                  member = that.wrap(member, field, parent);\n                }\n\n                that[field] = member;\n              });\n              that.uid = kendo.guid();\n            },\n            shouldSerialize: function (field, serializeFunctions) {\n              return this.hasOwnProperty(field) && field !== \"_handlers\" && field !== \"_events\" && (serializeFunctions && serializeFunctions[field] || typeof this[field] !== FUNCTION) && field !== \"uid\";\n            },\n            forEach: function (f) {\n              for (var i in this) {\n                if (this.shouldSerialize(i)) {\n                  f(this[i], i);\n                }\n              }\n            },\n            toJSON: function (serializeFunctions) {\n              var result = {},\n                  value,\n                  field;\n\n              for (field in this) {\n                if (this.shouldSerialize(field, serializeFunctions)) {\n                  value = this[field];\n\n                  if (value instanceof ObservableObject || value instanceof ObservableArray) {\n                    value = value.toJSON(serializeFunctions);\n                  }\n\n                  result[field] = value;\n                }\n              }\n\n              return result;\n            },\n            get: function (field) {\n              var that = this,\n                  result;\n              that.trigger(GET, {\n                field: field\n              });\n\n              if (field === \"this\") {\n                result = that;\n              } else {\n                result = kendo.getter(field, true)(that);\n              }\n\n              return result;\n            },\n            _set: function (field, value) {\n              var that = this;\n              var composite = field.indexOf(\".\") >= 0;\n\n              if (composite) {\n                var paths = field.split(\".\"),\n                    path = \"\";\n\n                while (paths.length > 1) {\n                  path += paths.shift();\n                  var obj = kendo.getter(path, true)(that);\n\n                  if (obj instanceof ObservableObject) {\n                    obj.set(paths.join(\".\"), value);\n                    return composite;\n                  }\n\n                  path += \".\";\n                }\n              }\n\n              kendo.setter(field)(that, value);\n              return composite;\n            },\n            set: function (field, value) {\n              var that = this,\n                  isSetPrevented = false,\n                  composite = field.indexOf(\".\") >= 0,\n                  current = kendo.getter(field, true)(that);\n\n              if (current !== value) {\n                if (current instanceof Observable && this._handlers[field]) {\n                  if (this._handlers[field].get) {\n                    current.unbind(GET, this._handlers[field].get);\n                  }\n\n                  current.unbind(CHANGE, this._handlers[field].change);\n                }\n\n                isSetPrevented = that.trigger(\"set\", {\n                  field: field,\n                  value: value\n                });\n\n                if (!isSetPrevented) {\n                  if (!composite) {\n                    value = that.wrap(value, field, function () {\n                      return that;\n                    });\n                  }\n\n                  if (!that._set(field, value) || field.indexOf(\"(\") >= 0 || field.indexOf(\"[\") >= 0) {\n                    that.trigger(CHANGE, {\n                      field: field\n                    });\n                  }\n                }\n              }\n\n              return isSetPrevented;\n            },\n            parent: noop,\n            wrap: function (object, field, parent) {\n              var that = this;\n              var get;\n              var change;\n              var type = toString.call(object);\n\n              if (object != null && (type === \"[object Object]\" || type === \"[object Array]\")) {\n                var isObservableArray = object instanceof ObservableArray;\n                var isDataSource = object instanceof DataSource;\n\n                if (type === \"[object Object]\" && !isDataSource && !isObservableArray) {\n                  if (!(object instanceof ObservableObject)) {\n                    object = new ObservableObject(object);\n                  }\n\n                  get = eventHandler(that, GET, field, true);\n                  object.bind(GET, get);\n                  change = eventHandler(that, CHANGE, field, true);\n                  object.bind(CHANGE, change);\n                  that._handlers[field] = {\n                    get: get,\n                    change: change\n                  };\n                } else if (type === \"[object Array]\" || isObservableArray || isDataSource) {\n                  if (!isObservableArray && !isDataSource) {\n                    object = new ObservableArray(object);\n                  }\n\n                  change = eventHandler(that, CHANGE, field, false);\n                  object.bind(CHANGE, change);\n                  that._handlers[field] = {\n                    change: change\n                  };\n                }\n\n                object.parent = parent;\n              }\n\n              return object;\n            }\n          });\n\n          function equal(x, y) {\n            if (x === y) {\n              return true;\n            }\n\n            var xtype = kendo.type(x),\n                ytype = kendo.type(y),\n                field;\n\n            if (xtype !== ytype) {\n              return false;\n            }\n\n            if (xtype === \"date\") {\n              return x.getTime() === y.getTime();\n            }\n\n            if (xtype !== \"object\" && xtype !== \"array\") {\n              return false;\n            }\n\n            for (field in x) {\n              if (!equal(x[field], y[field])) {\n                return false;\n              }\n            }\n\n            return true;\n          }\n\n          var parsers = {\n            \"number\": function (value) {\n              if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n              }\n\n              return kendo.parseFloat(value);\n            },\n            \"date\": function (value) {\n              if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n              }\n\n              return kendo.parseDate(value);\n            },\n            \"boolean\": function (value) {\n              if (typeof value === STRING) {\n                if (value.toLowerCase() === \"null\") {\n                  return null;\n                } else {\n                  return value.toLowerCase() === \"true\";\n                }\n              }\n\n              return value != null ? !!value : value;\n            },\n            \"string\": function (value) {\n              if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n              }\n\n              return value != null ? value + \"\" : value;\n            },\n            \"default\": function (value) {\n              return value;\n            }\n          };\n          var defaultValues = {\n            \"string\": \"\",\n            \"number\": 0,\n            \"date\": new Date(),\n            \"boolean\": false,\n            \"default\": \"\"\n          };\n\n          function getFieldByName(obj, name) {\n            var field, fieldName;\n\n            for (fieldName in obj) {\n              field = obj[fieldName];\n\n              if (isPlainObject(field) && field.field && field.field === name) {\n                return field;\n              } else if (field === name) {\n                return field;\n              }\n            }\n\n            return null;\n          }\n\n          var Model = ObservableObject.extend({\n            init: function (data) {\n              var that = this;\n\n              if (!data || $.isEmptyObject(data)) {\n                data = $.extend({}, that.defaults, data);\n\n                if (that._initializers) {\n                  for (var idx = 0; idx < that._initializers.length; idx++) {\n                    var name = that._initializers[idx];\n                    data[name] = that.defaults[name]();\n                  }\n                }\n              }\n\n              ObservableObject.fn.init.call(that, data);\n              that.dirty = false;\n              that.dirtyFields = {};\n\n              if (that.idField) {\n                that.id = that.get(that.idField);\n\n                if (that.id === undefined) {\n                  that.id = that._defaultId;\n                }\n              }\n            },\n            shouldSerialize: function (field) {\n              return ObservableObject.fn.shouldSerialize.call(this, field) && field !== \"uid\" && !(this.idField !== \"id\" && field === \"id\") && field !== \"dirty\" && field !== \"dirtyFields\" && field !== \"_accessors\";\n            },\n            _parse: function (field, value) {\n              var that = this,\n                  fieldName = field,\n                  fields = that.fields || {},\n                  parse;\n              field = fields[field];\n\n              if (!field) {\n                field = getFieldByName(fields, fieldName);\n              }\n\n              if (field) {\n                parse = field.parse;\n\n                if (!parse && field.type) {\n                  parse = parsers[field.type.toLowerCase()];\n                }\n              }\n\n              return parse ? parse(value) : value;\n            },\n            _notifyChange: function (e) {\n              var action = e.action;\n\n              if (action == \"add\" || action == \"remove\") {\n                this.dirty = true;\n                this.dirtyFields[e.field] = true;\n              }\n            },\n            editable: function (field) {\n              field = (this.fields || {})[field];\n              return field ? field.editable !== false : true;\n            },\n            set: function (field, value) {\n              var that = this;\n              var dirty = that.dirty;\n\n              if (that.editable(field)) {\n                value = that._parse(field, value);\n\n                if (!equal(value, that.get(field))) {\n                  that.dirty = true;\n                  that.dirtyFields[field] = true;\n\n                  if (ObservableObject.fn.set.call(that, field, value) && !dirty) {\n                    that.dirty = dirty;\n\n                    if (!that.dirty) {\n                      that.dirtyFields[field] = false;\n                    }\n                  }\n                } else {\n                  that.trigger(\"equalSet\", {\n                    field: field,\n                    value: value\n                  });\n                }\n              }\n            },\n            accept: function (data) {\n              var that = this,\n                  parent = function () {\n                return that;\n              },\n                  field;\n\n              for (field in data) {\n                var value = data[field];\n\n                if (field.charAt(0) != \"_\") {\n                  value = that.wrap(data[field], field, parent);\n                }\n\n                that._set(field, value);\n              }\n\n              if (that.idField) {\n                that.id = that.get(that.idField);\n              }\n\n              that.dirty = false;\n              that.dirtyFields = {};\n            },\n            isNew: function () {\n              return this.id === this._defaultId;\n            }\n          });\n\n          Model.define = function (base, options) {\n            if (options === undefined) {\n              options = base;\n              base = Model;\n            }\n\n            var model,\n                proto = extend({\n              defaults: {}\n            }, options),\n                name,\n                field,\n                type,\n                value,\n                idx,\n                length,\n                fields = {},\n                originalName,\n                id = proto.id,\n                functionFields = [];\n\n            if (id) {\n              proto.idField = id;\n            }\n\n            if (proto.id) {\n              delete proto.id;\n            }\n\n            if (id) {\n              proto.defaults[id] = proto._defaultId = \"\";\n            }\n\n            if (toString.call(proto.fields) === \"[object Array]\") {\n              for (idx = 0, length = proto.fields.length; idx < length; idx++) {\n                field = proto.fields[idx];\n\n                if (typeof field === STRING) {\n                  fields[field] = {};\n                } else if (field.field) {\n                  fields[field.field] = field;\n                }\n              }\n\n              proto.fields = fields;\n            }\n\n            for (name in proto.fields) {\n              field = proto.fields[name];\n              type = field.type || \"default\";\n              value = null;\n              originalName = name;\n              name = typeof field.field === STRING ? field.field : name;\n\n              if (!field.nullable) {\n                value = proto.defaults[originalName !== name ? originalName : name] = field.defaultValue !== undefined ? field.defaultValue : defaultValues[type.toLowerCase()];\n\n                if (typeof value === \"function\") {\n                  functionFields.push(name);\n                }\n              }\n\n              if (options.id === name) {\n                proto._defaultId = value;\n              }\n\n              proto.defaults[originalName !== name ? originalName : name] = value;\n              field.parse = field.parse || parsers[type];\n            }\n\n            if (functionFields.length > 0) {\n              proto._initializers = functionFields;\n            }\n\n            model = base.extend(proto);\n\n            model.define = function (options) {\n              return Model.define(model, options);\n            };\n\n            if (proto.fields) {\n              model.fields = proto.fields;\n              model.idField = proto.idField;\n            }\n\n            return model;\n          };\n\n          var Comparer = {\n            selector: function (field) {\n              return isFunction(field) ? field : getter(field);\n            },\n            compare: function (field) {\n              var selector = this.selector(field);\n              return function (a, b) {\n                a = selector(a);\n                b = selector(b);\n\n                if (a == null && b == null) {\n                  return 0;\n                }\n\n                if (a == null) {\n                  return -1;\n                }\n\n                if (b == null) {\n                  return 1;\n                }\n\n                if (a.localeCompare) {\n                  return a.localeCompare(b);\n                }\n\n                return a > b ? 1 : a < b ? -1 : 0;\n              };\n            },\n            create: function (sort) {\n              var compare = sort.compare || this.compare(sort.field);\n\n              if (sort.dir == \"desc\") {\n                return function (a, b) {\n                  return compare(b, a, true);\n                };\n              }\n\n              return compare;\n            },\n            combine: function (comparers) {\n              return function (a, b) {\n                var result = comparers[0](a, b),\n                    idx,\n                    length;\n\n                for (idx = 1, length = comparers.length; idx < length; idx++) {\n                  result = result || comparers[idx](a, b);\n                }\n\n                return result;\n              };\n            }\n          };\n          var StableComparer = extend({}, Comparer, {\n            asc: function (field) {\n              var selector = this.selector(field);\n              return function (a, b) {\n                var valueA = selector(a);\n                var valueB = selector(b);\n\n                if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                  valueA = valueA.getTime();\n                  valueB = valueB.getTime();\n                }\n\n                if (valueA === valueB) {\n                  return a.__position - b.__position;\n                }\n\n                if (valueA == null) {\n                  return -1;\n                }\n\n                if (valueB == null) {\n                  return 1;\n                }\n\n                if (valueA.localeCompare) {\n                  return valueA.localeCompare(valueB);\n                }\n\n                return valueA > valueB ? 1 : -1;\n              };\n            },\n            desc: function (field) {\n              var selector = this.selector(field);\n              return function (a, b) {\n                var valueA = selector(a);\n                var valueB = selector(b);\n\n                if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                  valueA = valueA.getTime();\n                  valueB = valueB.getTime();\n                }\n\n                if (valueA === valueB) {\n                  return a.__position - b.__position;\n                }\n\n                if (valueA == null) {\n                  return 1;\n                }\n\n                if (valueB == null) {\n                  return -1;\n                }\n\n                if (valueB.localeCompare) {\n                  return valueB.localeCompare(valueA);\n                }\n\n                return valueA < valueB ? 1 : -1;\n              };\n            },\n            create: function (sort) {\n              return this[sort.dir](sort.field);\n            }\n          });\n\n          map = function (array, callback) {\n            var idx,\n                length = array.length,\n                result = new Array(length);\n\n            for (idx = 0; idx < length; idx++) {\n              result[idx] = callback(array[idx], idx, array);\n            }\n\n            return result;\n          };\n\n          var operators = function () {\n            function quote(str) {\n              if (typeof str == \"string\") {\n                str = str.replace(/[\\r\\n]+/g, \"\");\n              }\n\n              return JSON.stringify(str);\n            }\n\n            function textOp(impl) {\n              return function (a, b, ignore, accentFoldingFiltering) {\n                b += \"\";\n\n                if (ignore) {\n                  a = \"(\" + a + \" + '').toString()\" + (accentFoldingFiltering ? \".toLocaleLowerCase('\" + accentFoldingFiltering + \"')\" : \".toLowerCase()\");\n                  b = accentFoldingFiltering ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase();\n                }\n\n                return impl(a, quote(b), ignore);\n              };\n            }\n\n            function operator(op, a, b, ignore, accentFoldingFiltering) {\n              if (b != null) {\n                if (typeof b === STRING) {\n                  var date = dateRegExp.exec(b);\n\n                  if (date) {\n                    b = new Date(+date[1]);\n                  } else if (ignore) {\n                    b = quote(accentFoldingFiltering ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase());\n                    a = \"((\" + a + \" || '')+'')\" + (accentFoldingFiltering ? \".toLocaleLowerCase('\" + accentFoldingFiltering + \"')\" : \".toLowerCase()\");\n                  } else {\n                    b = quote(b);\n                  }\n                }\n\n                if (b.getTime) {\n                  //b looks like a Date\n                  a = \"(\" + a + \"&&\" + a + \".getTime?\" + a + \".getTime():\" + a + \")\";\n                  b = b.getTime();\n                }\n              }\n\n              return a + \" \" + op + \" \" + b;\n            }\n\n            function getMatchRegexp(pattern) {\n              // take a pattern, as supported by Excel match filter, and\n              // convert it to the equivalent JS regular expression.\n              // Excel patterns support:\n              //\n              //   * - match any sequence of characters\n              //   ? - match a single character\n              //\n              // to match a literal * or ?, they must be prefixed by a tilde (~)\n              for (var rx = \"/^\", esc = false, i = 0; i < pattern.length; ++i) {\n                var ch = pattern.charAt(i);\n\n                if (esc) {\n                  rx += \"\\\\\" + ch;\n                } else if (ch == \"~\") {\n                  esc = true;\n                  continue;\n                } else if (ch == \"*\") {\n                  rx += \".*\";\n                } else if (ch == \"?\") {\n                  rx += \".\";\n                } else if (\".+^$()[]{}|\\\\/\\n\\r\\u2028\\u2029\\xA0\".indexOf(ch) >= 0) {\n                  rx += \"\\\\\" + ch;\n                } else {\n                  rx += ch;\n                }\n\n                esc = false;\n              }\n\n              return rx + \"$/\";\n            }\n\n            return {\n              quote: function (value) {\n                if (value && value.getTime) {\n                  return \"new Date(\" + value.getTime() + \")\";\n                }\n\n                return quote(value);\n              },\n              eq: function (a, b, ignore, accentFoldingFiltering) {\n                return operator(\"==\", a, b, ignore, accentFoldingFiltering);\n              },\n              neq: function (a, b, ignore, accentFoldingFiltering) {\n                return operator(\"!=\", a, b, ignore, accentFoldingFiltering);\n              },\n              gt: function (a, b, ignore) {\n                return operator(\">\", a, b, ignore);\n              },\n              gte: function (a, b, ignore) {\n                return operator(\">=\", a, b, ignore);\n              },\n              lt: function (a, b, ignore) {\n                return operator(\"<\", a, b, ignore);\n              },\n              lte: function (a, b, ignore) {\n                return operator(\"<=\", a, b, ignore);\n              },\n              startswith: textOp(function (a, b) {\n                return a + \".lastIndexOf(\" + b + \", 0) == 0\";\n              }),\n              doesnotstartwith: textOp(function (a, b) {\n                return a + \".lastIndexOf(\" + b + \", 0) == -1\";\n              }),\n              endswith: textOp(function (a, b) {\n                var n = b ? b.length - 2 : 0;\n                return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") >= 0\";\n              }),\n              doesnotendwith: textOp(function (a, b) {\n                var n = b ? b.length - 2 : 0;\n                return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") < 0\";\n              }),\n              contains: textOp(function (a, b) {\n                return a + \".indexOf(\" + b + \") >= 0\";\n              }),\n              doesnotcontain: textOp(function (a, b) {\n                return a + \".indexOf(\" + b + \") == -1\";\n              }),\n              matches: textOp(function (a, b) {\n                b = b.substring(1, b.length - 1);\n                return getMatchRegexp(b) + \".test(\" + a + \")\";\n              }),\n              doesnotmatch: textOp(function (a, b) {\n                b = b.substring(1, b.length - 1);\n                return \"!\" + getMatchRegexp(b) + \".test(\" + a + \")\";\n              }),\n              isempty: function (a) {\n                return a + \" === ''\";\n              },\n              isnotempty: function (a) {\n                return a + \" !== ''\";\n              },\n              isnull: function (a) {\n                return \"(\" + a + \" == null)\";\n              },\n              isnotnull: function (a) {\n                return \"(\" + a + \" != null)\";\n              },\n              isnullorempty: function (a) {\n                return \"(\" + a + \" === null) || (\" + a + \" === '')\";\n              },\n              isnotnullorempty: function (a) {\n                return \"(\" + a + \" !== null) && (\" + a + \" !== '')\";\n              }\n            };\n          }();\n\n          function Query(data) {\n            this.data = data || [];\n          }\n\n          Query.filterExpr = function (expression) {\n            var expressions = [],\n                logic = {\n              and: \" && \",\n              or: \" || \"\n            },\n                idx,\n                length,\n                filter,\n                expr,\n                fieldFunctions = [],\n                operatorFunctions = [],\n                field,\n                operator,\n                filters = expression.filters;\n\n            for (idx = 0, length = filters.length; idx < length; idx++) {\n              filter = filters[idx];\n              field = filter.field;\n              operator = filter.operator;\n\n              if (filter.filters) {\n                expr = Query.filterExpr(filter); //Nested function fields or operators - update their index e.g. __o[0] -> __o[1]\n\n                filter = expr.expression.replace(/__o\\[(\\d+)\\]/g, function (match, index) {\n                  index = +index;\n                  return \"__o[\" + (operatorFunctions.length + index) + \"]\";\n                }).replace(/__f\\[(\\d+)\\]/g, function (match, index) {\n                  index = +index;\n                  return \"__f[\" + (fieldFunctions.length + index) + \"]\";\n                });\n                operatorFunctions.push.apply(operatorFunctions, expr.operators);\n                fieldFunctions.push.apply(fieldFunctions, expr.fields);\n              } else {\n                if (typeof field === FUNCTION) {\n                  expr = \"__f[\" + fieldFunctions.length + \"](d)\";\n                  fieldFunctions.push(field);\n                } else {\n                  expr = kendo.expr(field);\n                }\n\n                if (typeof operator === FUNCTION) {\n                  filter = \"__o[\" + operatorFunctions.length + \"](\" + expr + \", \" + operators.quote(filter.value) + \")\";\n                  operatorFunctions.push(operator);\n                } else {\n                  filter = operators[(operator || \"eq\").toLowerCase()](expr, filter.value, filter.ignoreCase !== undefined ? filter.ignoreCase : true, expression.accentFoldingFiltering);\n                }\n              }\n\n              expressions.push(filter);\n            }\n\n            return {\n              expression: \"(\" + expressions.join(logic[expression.logic]) + \")\",\n              fields: fieldFunctions,\n              operators: operatorFunctions\n            };\n          };\n\n          function normalizeSort(field, dir) {\n            if (field) {\n              var descriptor = typeof field === STRING ? {\n                field: field,\n                dir: dir\n              } : field,\n                  descriptors = isArray(descriptor) ? descriptor : descriptor !== undefined ? [descriptor] : [];\n              return grep(descriptors, function (d) {\n                return !!d.dir;\n              });\n            }\n          }\n\n          function sortFields(sorts, dir) {\n            var sortObject = {};\n\n            if (sorts) {\n              var descriptor = typeof sorts === STRING ? {\n                field: sorts,\n                dir: dir\n              } : sorts,\n                  descriptors = isArray(descriptor) ? descriptor : descriptor !== undefined ? [descriptor] : [];\n\n              for (var i = 0; i < descriptors.length; i++) {\n                sortObject[descriptors[i].field] = {\n                  dir: descriptors[i].dir,\n                  index: i + 1\n                };\n              }\n            }\n\n            return sortObject;\n          }\n\n          var operatorMap = {\n            \"==\": \"eq\",\n            equals: \"eq\",\n            isequalto: \"eq\",\n            equalto: \"eq\",\n            equal: \"eq\",\n            \"!=\": \"neq\",\n            ne: \"neq\",\n            notequals: \"neq\",\n            isnotequalto: \"neq\",\n            notequalto: \"neq\",\n            notequal: \"neq\",\n            \"<\": \"lt\",\n            islessthan: \"lt\",\n            lessthan: \"lt\",\n            less: \"lt\",\n            \"<=\": \"lte\",\n            le: \"lte\",\n            islessthanorequalto: \"lte\",\n            lessthanequal: \"lte\",\n            \">\": \"gt\",\n            isgreaterthan: \"gt\",\n            greaterthan: \"gt\",\n            greater: \"gt\",\n            \">=\": \"gte\",\n            isgreaterthanorequalto: \"gte\",\n            greaterthanequal: \"gte\",\n            ge: \"gte\",\n            notsubstringof: \"doesnotcontain\",\n            isnull: \"isnull\",\n            isempty: \"isempty\",\n            isnotempty: \"isnotempty\"\n          };\n\n          function normalizeOperator(expression) {\n            var idx,\n                length,\n                filter,\n                operator,\n                filters = expression.filters;\n\n            if (filters) {\n              for (idx = 0, length = filters.length; idx < length; idx++) {\n                filter = filters[idx];\n                operator = filter.operator;\n\n                if (operator && typeof operator === STRING) {\n                  filter.operator = operatorMap[operator.toLowerCase()] || operator;\n                }\n\n                normalizeOperator(filter);\n              }\n            }\n          }\n\n          function normalizeFilter(expression) {\n            if (expression && !isEmptyObject(expression)) {\n              if (isArray(expression) || !expression.filters) {\n                expression = {\n                  logic: \"and\",\n                  filters: isArray(expression) ? expression : [expression]\n                };\n              }\n\n              normalizeOperator(expression);\n              return expression;\n            }\n          }\n\n          Query.normalizeFilter = normalizeFilter;\n\n          function compareDescriptor(f1, f2) {\n            if (f1.logic || f2.logic) {\n              return false;\n            }\n\n            return f1.field === f2.field && f1.value === f2.value && f1.operator === f2.operator;\n          }\n\n          function normalizeDescriptor(filter) {\n            filter = filter || {};\n\n            if (isEmptyObject(filter)) {\n              return {\n                logic: \"and\",\n                filters: []\n              };\n            }\n\n            return normalizeFilter(filter);\n          }\n\n          function fieldComparer(a, b) {\n            if (b.logic || a.field > b.field) {\n              return 1;\n            } else if (a.field < b.field) {\n              return -1;\n            } else {\n              return 0;\n            }\n          }\n\n          function compareFilters(expr1, expr2) {\n            expr1 = normalizeDescriptor(expr1);\n            expr2 = normalizeDescriptor(expr2);\n\n            if (expr1.logic !== expr2.logic) {\n              return false;\n            }\n\n            var f1, f2;\n            var filters1 = (expr1.filters || []).slice();\n            var filters2 = (expr2.filters || []).slice();\n\n            if (filters1.length !== filters2.length) {\n              return false;\n            }\n\n            filters1 = filters1.sort(fieldComparer);\n            filters2 = filters2.sort(fieldComparer);\n\n            for (var idx = 0; idx < filters1.length; idx++) {\n              f1 = filters1[idx];\n              f2 = filters2[idx];\n\n              if (f1.logic && f2.logic) {\n                if (!compareFilters(f1, f2)) {\n                  return false;\n                }\n              } else if (!compareDescriptor(f1, f2)) {\n                return false;\n              }\n            }\n\n            return true;\n          }\n\n          Query.compareFilters = compareFilters;\n\n          function normalizeAggregate(expressions) {\n            return isArray(expressions) ? expressions : [expressions];\n          }\n\n          function normalizeGroup(field, dir, compare, skipItemSorting) {\n            var descriptor = typeof field === STRING ? {\n              field: field,\n              dir: dir,\n              compare: compare,\n              skipItemSorting: skipItemSorting\n            } : field,\n                descriptors = isArray(descriptor) ? descriptor : descriptor !== undefined ? [descriptor] : [];\n            return map(descriptors, function (d) {\n              return {\n                field: d.field,\n                dir: d.dir || \"asc\",\n                aggregates: d.aggregates,\n                compare: d.compare,\n                skipItemSorting: d.skipItemSorting\n              };\n            });\n          }\n\n          function normalizeGroupWithoutCompare(field, dir, compare) {\n            var descriptors = normalizeGroup(field, dir, compare);\n\n            for (var i = 0; i < descriptors.length; i++) {\n              delete descriptors[i].compare;\n            }\n\n            return descriptors;\n          }\n\n          function anyGroupDescriptorHasCompare(groupDescriptors) {\n            var descriptors = isArray(groupDescriptors) ? groupDescriptors : [groupDescriptors];\n\n            for (var i = 0; i < descriptors.length; i++) {\n              if (descriptors[i] && isFunction(descriptors[i].compare)) {\n                return true;\n              }\n            }\n\n            return false;\n          }\n\n          Query.prototype = {\n            toArray: function () {\n              return this.data;\n            },\n            range: function (index, count) {\n              return new Query(this.data.slice(index, index + count));\n            },\n            skip: function (count) {\n              return new Query(this.data.slice(count));\n            },\n            take: function (count) {\n              return new Query(this.data.slice(0, count));\n            },\n            select: function (selector) {\n              return new Query(map(this.data, selector));\n            },\n            order: function (selector, dir, inPlace) {\n              var sort = {\n                dir: dir\n              };\n\n              if (selector) {\n                if (selector.compare) {\n                  sort.compare = selector.compare;\n                } else {\n                  sort.field = selector;\n                }\n              }\n\n              if (inPlace) {\n                return new Query(this.data.sort(Comparer.create(sort)));\n              }\n\n              return new Query(this.data.slice(0).sort(Comparer.create(sort)));\n            },\n            orderBy: function (selector, inPlace) {\n              return this.order(selector, \"asc\", inPlace);\n            },\n            orderByDescending: function (selector, inPlace) {\n              return this.order(selector, \"desc\", inPlace);\n            },\n            sort: function (field, dir, comparer, inPlace) {\n              var idx,\n                  length,\n                  descriptors = normalizeSort(field, dir),\n                  comparers = [];\n              comparer = comparer || Comparer;\n\n              if (descriptors.length) {\n                for (idx = 0, length = descriptors.length; idx < length; idx++) {\n                  comparers.push(comparer.create(descriptors[idx]));\n                }\n\n                return this.orderBy({\n                  compare: comparer.combine(comparers)\n                }, inPlace);\n              }\n\n              return this;\n            },\n            filter: function (expressions) {\n              var idx,\n                  current,\n                  length,\n                  compiled,\n                  predicate,\n                  data = this.data,\n                  fields,\n                  operators,\n                  result = [],\n                  filter;\n              expressions = normalizeFilter(expressions);\n\n              if (!expressions || expressions.filters.length === 0) {\n                return this;\n              }\n\n              compiled = Query.filterExpr(expressions);\n              fields = compiled.fields;\n              operators = compiled.operators;\n              predicate = filter = new Function(\"d, __f, __o\", \"return \" + compiled.expression);\n\n              if (fields.length || operators.length) {\n                filter = function (d) {\n                  return predicate(d, fields, operators);\n                };\n              }\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                current = data[idx];\n\n                if (filter(current)) {\n                  result.push(current);\n                }\n              }\n\n              return new Query(result);\n            },\n            group: function (descriptors, allData, options) {\n              descriptors = normalizeGroup(descriptors || []);\n              allData = allData || this.data;\n              var that = this,\n                  result = new Query(that.data),\n                  descriptor;\n\n              if (descriptors.length > 0) {\n                descriptor = descriptors[0];\n\n                if (options && options.groupPaging) {\n                  result = new Query(allData).groupAllData(descriptor, allData).select(function (group) {\n                    var data = new Query(allData).filter([{\n                      field: group.field,\n                      operator: \"eq\",\n                      value: group.value,\n                      ignoreCase: false\n                    }]);\n                    var items = descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), data.toArray(), options).toArray() : group.items;\n                    return {\n                      field: group.field,\n                      value: group.value,\n                      hasSubgroups: descriptors.length > 1,\n                      items: items,\n                      aggregates: data.aggregate(descriptor.aggregates),\n                      uid: kendo.guid(),\n                      itemCount: items.length,\n                      subgroupCount: items.length\n                    };\n                  });\n                } else {\n                  result = result.groupBy(descriptor).select(function (group) {\n                    var data = new Query(allData).filter([{\n                      field: group.field,\n                      operator: \"eq\",\n                      value: group.value,\n                      ignoreCase: false\n                    }]);\n                    return {\n                      field: group.field,\n                      value: group.value,\n                      items: descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), data.toArray()).toArray() : group.items,\n                      hasSubgroups: descriptors.length > 1,\n                      aggregates: data.aggregate(descriptor.aggregates)\n                    };\n                  });\n                }\n              }\n\n              return result;\n            },\n            groupBy: function (descriptor) {\n              var that = this;\n\n              if (isEmptyObject(descriptor) || !this.data.length) {\n                return new Query([]);\n              }\n\n              var field = descriptor.field,\n                  sorted = descriptor.skipItemSorting ? this.data : this._sortForGrouping(field, descriptor.dir || \"asc\"),\n                  accessor = kendo.accessor(field),\n                  item,\n                  groupValue = accessor.get(sorted[0], field),\n                  group = {\n                field: field,\n                value: groupValue,\n                items: []\n              },\n                  currentValue,\n                  idx,\n                  len,\n                  result = [group];\n\n              for (idx = 0, len = sorted.length; idx < len; idx++) {\n                item = sorted[idx];\n                currentValue = accessor.get(item, field);\n\n                if (!groupValueComparer(groupValue, currentValue)) {\n                  groupValue = currentValue;\n                  group = {\n                    field: field,\n                    value: groupValue,\n                    items: []\n                  };\n                  result.push(group);\n                }\n\n                group.items.push(item);\n              }\n\n              result = that._sortGroups(result, descriptor);\n              return new Query(result);\n            },\n            groupAllData: function (descriptor, allData) {\n              if (isEmptyObject(descriptor) || this.data && !this.data.length) {\n                return new Query([]);\n              }\n\n              var field = descriptor.field,\n                  sorted = descriptor.skipItemSorting ? allData : new Query(allData).sort(field, descriptor.dir || \"asc\", StableComparer).toArray(),\n                  accessor = kendo.accessor(field),\n                  item,\n                  groupValue = accessor.get(sorted[0], field),\n                  group = {\n                field: field,\n                value: groupValue,\n                items: []\n              },\n                  currentValue,\n                  idx,\n                  len,\n                  result = [group];\n\n              for (idx = 0, len = sorted.length; idx < len; idx++) {\n                item = sorted[idx];\n                currentValue = accessor.get(item, field);\n\n                if (!groupValueComparer(groupValue, currentValue)) {\n                  groupValue = currentValue;\n                  group = {\n                    field: field,\n                    value: groupValue,\n                    items: []\n                  };\n                  result.push(group);\n                }\n\n                group.items.push(item);\n              }\n\n              result = this._sortGroups(result, descriptor);\n              return new Query(result);\n            },\n            _sortForGrouping: function (field, dir) {\n              var idx,\n                  length,\n                  data = this.data;\n\n              if (!stableSort) {\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                  data[idx].__position = idx;\n                }\n\n                data = new Query(data).sort(field, dir, StableComparer).toArray();\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                  delete data[idx].__position;\n                }\n\n                return data;\n              }\n\n              return this.sort(field, dir).toArray();\n            },\n            _sortGroups: function (groups, descriptor) {\n              var result = groups;\n\n              if (descriptor && isFunction(descriptor.compare)) {\n                result = new Query(result).order({\n                  compare: descriptor.compare\n                }, descriptor.dir || ASCENDING).toArray();\n              }\n\n              return result;\n            },\n            aggregate: function (aggregates) {\n              var idx,\n                  len,\n                  result = {},\n                  state = {};\n\n              if (aggregates && aggregates.length) {\n                for (idx = 0, len = this.data.length; idx < len; idx++) {\n                  calculateAggregate(result, aggregates, this.data[idx], idx, len, state);\n                }\n              }\n\n              return result;\n            }\n          };\n\n          function groupValueComparer(a, b) {\n            if (a && a.getTime && b && b.getTime) {\n              return a.getTime() === b.getTime();\n            }\n\n            return a === b;\n          }\n\n          function calculateAggregate(accumulator, aggregates, item, index, length, state) {\n            aggregates = aggregates || [];\n            var idx,\n                aggr,\n                functionName,\n                len = aggregates.length;\n\n            for (idx = 0; idx < len; idx++) {\n              aggr = aggregates[idx];\n              functionName = aggr.aggregate;\n              var field = aggr.field;\n              accumulator[field] = accumulator[field] || {};\n              state[field] = state[field] || {};\n              state[field][functionName] = state[field][functionName] || {};\n              accumulator[field][functionName] = functions[functionName.toLowerCase()](accumulator[field][functionName], item, kendo.accessor(field), index, length, state[field][functionName]);\n            }\n          }\n\n          var functions = {\n            sum: function (accumulator, item, accessor) {\n              var value = accessor.get(item);\n\n              if (!isNumber(accumulator)) {\n                accumulator = value;\n              } else if (isNumber(value)) {\n                accumulator += value;\n              }\n\n              return accumulator;\n            },\n            count: function (accumulator) {\n              return (accumulator || 0) + 1;\n            },\n            average: function (accumulator, item, accessor, index, length, state) {\n              var value = accessor.get(item);\n\n              if (state.count === undefined) {\n                state.count = 0;\n              }\n\n              if (!isNumber(accumulator)) {\n                accumulator = value;\n              } else if (isNumber(value)) {\n                accumulator += value;\n              }\n\n              if (isNumber(value)) {\n                state.count++;\n              }\n\n              if (index == length - 1 && isNumber(accumulator)) {\n                accumulator = accumulator / state.count;\n              }\n\n              return accumulator;\n            },\n            max: function (accumulator, item, accessor) {\n              var value = accessor.get(item);\n\n              if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n              }\n\n              if (accumulator < value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n              }\n\n              return accumulator;\n            },\n            min: function (accumulator, item, accessor) {\n              var value = accessor.get(item);\n\n              if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n              }\n\n              if (accumulator > value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n              }\n\n              return accumulator;\n            }\n          };\n\n          function isNumber(val) {\n            return typeof val === \"number\" && !isNaN(val);\n          }\n\n          function isDate(val) {\n            return val && val.getTime;\n          }\n\n          function toJSON(array) {\n            var idx,\n                length = array.length,\n                result = new Array(length);\n\n            for (idx = 0; idx < length; idx++) {\n              result[idx] = array[idx].toJSON();\n            }\n\n            return result;\n          }\n\n          Query.normalizeGroup = normalizeGroup;\n          Query.normalizeSort = normalizeSort;\n\n          Query.process = function (data, options, inPlace) {\n            options = options || {};\n            var group = options.group;\n            var customGroupSort = anyGroupDescriptorHasCompare(normalizeGroup(group || []));\n            var query = new Query(data),\n                groupDescriptorsWithoutCompare = normalizeGroupWithoutCompare(group || []),\n                normalizedSort = normalizeSort(options.sort || []),\n                sort = customGroupSort ? normalizedSort : groupDescriptorsWithoutCompare.concat(normalizedSort),\n                groupDescriptorsWithoutSort,\n                total,\n                filterCallback = options.filterCallback,\n                filter = options.filter,\n                skip = options.skip,\n                take = options.take;\n\n            if (sort && inPlace) {\n              query = query.sort(sort, undefined, undefined, inPlace);\n            }\n\n            if (filter) {\n              query = query.filter(filter);\n\n              if (filterCallback) {\n                query = filterCallback(query);\n              }\n\n              total = query.toArray().length;\n            }\n\n            if (sort) {\n              if (!inPlace) {\n                query = query.sort(sort);\n              }\n\n              if (group) {\n                data = query.toArray();\n              }\n            }\n\n            if (customGroupSort) {\n              query = query.group(group, data, options);\n\n              if (skip !== undefined && take !== undefined && !options.groupPaging) {\n                query = new Query(flatGroups(query.toArray())).range(skip, take);\n                groupDescriptorsWithoutSort = map(groupDescriptorsWithoutCompare, function (groupDescriptor) {\n                  return extend({}, groupDescriptor, {\n                    skipItemSorting: true\n                  });\n                });\n                query = query.group(groupDescriptorsWithoutSort, data, options);\n              }\n            } else {\n              if (skip !== undefined && take !== undefined) {\n                total = query.data.length;\n\n                if (skip + take > total && options.virtual) {\n                  skip -= skip + take - total;\n                }\n\n                query = query.range(skip, take);\n              }\n\n              if (group && (!isEmptyObject(group) || group.length !== 0)) {\n                query = query.group(group, data, options);\n              }\n            }\n\n            return {\n              total: total,\n              data: query.toArray()\n            };\n          };\n\n          var LocalTransport = Class.extend({\n            init: function (options) {\n              this.data = options.data;\n            },\n            read: function (options) {\n              options.success(this.data);\n            },\n            update: function (options) {\n              options.success(options.data);\n            },\n            create: function (options) {\n              options.success(options.data);\n            },\n            destroy: function (options) {\n              options.success(options.data);\n            }\n          });\n          var RemoteTransport = Class.extend({\n            init: function (options) {\n              var that = this,\n                  parameterMap;\n              options = that.options = extend({}, that.options, options);\n              each(crud, function (index, type) {\n                if (typeof options[type] === STRING) {\n                  options[type] = {\n                    url: options[type]\n                  };\n                }\n              });\n              that.cache = options.cache ? Cache.create(options.cache) : {\n                find: noop,\n                add: noop\n              };\n              parameterMap = options.parameterMap;\n\n              if (options.submit) {\n                that.submit = options.submit;\n              }\n\n              if (isFunction(options.push)) {\n                that.push = options.push;\n              }\n\n              if (!that.push) {\n                that.push = identity;\n              }\n\n              that.parameterMap = isFunction(parameterMap) ? parameterMap : function (options) {\n                var result = {};\n                each(options, function (option, value) {\n                  if (option in parameterMap) {\n                    option = parameterMap[option];\n\n                    if (isPlainObject(option)) {\n                      value = option.value(value);\n                      option = option.key;\n                    }\n                  }\n\n                  result[option] = value;\n                });\n                return result;\n              };\n            },\n            options: {\n              parameterMap: identity\n            },\n            create: function (options) {\n              return ajax(this.setup(options, CREATE));\n            },\n            read: function (options) {\n              var that = this,\n                  success,\n                  error,\n                  result,\n                  cache = that.cache;\n              options = that.setup(options, READ);\n              success = options.success || noop;\n              error = options.error || noop;\n              result = cache.find(options.data);\n\n              if (result !== undefined) {\n                success(result);\n              } else {\n                options.success = function (result) {\n                  cache.add(options.data, result);\n                  success(result);\n                };\n\n                $.ajax(options);\n              }\n            },\n            update: function (options) {\n              return ajax(this.setup(options, UPDATE));\n            },\n            destroy: function (options) {\n              return ajax(this.setup(options, DESTROY));\n            },\n            setup: function (options, type) {\n              options = options || {};\n              var that = this,\n                  parameters,\n                  operation = that.options[type],\n                  data = isFunction(operation.data) ? operation.data(options.data) : operation.data;\n              options = extend(true, {}, operation, options);\n              parameters = extend(true, {}, data, options.data);\n              options.data = that.parameterMap(parameters, type);\n\n              if (isFunction(options.url)) {\n                options.url = options.url(parameters);\n              }\n\n              return options;\n            }\n          });\n          var Cache = Class.extend({\n            init: function () {\n              this._store = {};\n            },\n            add: function (key, data) {\n              if (key !== undefined) {\n                this._store[stringify(key)] = data;\n              }\n            },\n            find: function (key) {\n              return this._store[stringify(key)];\n            },\n            clear: function () {\n              this._store = {};\n            },\n            remove: function (key) {\n              delete this._store[stringify(key)];\n            }\n          });\n\n          Cache.create = function (options) {\n            var store = {\n              \"inmemory\": function () {\n                return new Cache();\n              }\n            };\n\n            if (isPlainObject(options) && isFunction(options.find)) {\n              return options;\n            }\n\n            if (options === true) {\n              return new Cache();\n            }\n\n            return store[options]();\n          };\n\n          function serializeRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n            var record,\n                getter,\n                originalName,\n                idx,\n                setters = {},\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n              record = data[idx];\n\n              for (getter in getters) {\n                originalName = fieldNames[getter];\n\n                if (originalName && originalName !== getter) {\n                  if (!setters[originalName]) {\n                    setters[originalName] = kendo.setter(originalName);\n                  }\n\n                  setters[originalName](record, getters[getter](record));\n                  delete record[getter];\n                }\n              }\n            }\n          }\n\n          function convertRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n            var record, getter, originalName, idx, length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n              record = data[idx];\n\n              for (getter in getters) {\n                record[getter] = modelInstance._parse(getter, getters[getter](record));\n                originalName = fieldNames[getter];\n\n                if (originalName && originalName !== getter) {\n                  delete record[originalName];\n                }\n              }\n            }\n          }\n\n          function convertGroup(data, getters, modelInstance, originalFieldNames, fieldNames) {\n            var record, idx, fieldName, length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n              record = data[idx];\n              fieldName = originalFieldNames[record.field];\n\n              if (fieldName && fieldName != record.field) {\n                record.field = fieldName;\n              }\n\n              record.value = modelInstance._parse(record.field, record.value);\n\n              if (record.items) {\n                if (record.hasSubgroups) {\n                  convertGroup(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                } else {\n                  convertRecords(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                }\n              }\n            }\n          }\n\n          function wrapDataAccess(originalFunction, model, converter, getters, originalFieldNames, fieldNames) {\n            return function (data) {\n              data = originalFunction(data);\n              return wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames)(data);\n            };\n          }\n\n          function wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames) {\n            return function (data) {\n              if (data && !isEmptyObject(getters)) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof ObservableArray)) {\n                  data = [data];\n                }\n\n                converter(data, getters, new model(), originalFieldNames, fieldNames);\n              }\n\n              return data || [];\n            };\n          }\n\n          var DataReader = Class.extend({\n            init: function (schema) {\n              var that = this,\n                  member,\n                  get,\n                  model,\n                  base;\n              schema = schema || {};\n\n              for (member in schema) {\n                get = schema[member];\n                that[member] = typeof get === STRING ? getter(get) : get;\n              }\n\n              base = schema.modelBase || Model;\n\n              if (isPlainObject(that.model)) {\n                that.model = model = base.define(that.model);\n              }\n\n              var dataFunction = that.data.bind(that);\n              that._dataAccessFunction = dataFunction;\n\n              if (that.model) {\n                var groupsFunction = that.groups.bind(that),\n                    serializeFunction = that.serialize.bind(that),\n                    originalFieldNames = {},\n                    getters = {},\n                    serializeGetters = {},\n                    fieldNames = {},\n                    shouldSerialize = false,\n                    fieldName,\n                    name;\n                model = that.model;\n\n                if (model.fields) {\n                  each(model.fields, function (field, value) {\n                    var fromName;\n                    fieldName = field;\n\n                    if (isPlainObject(value) && value.field) {\n                      fieldName = value.field;\n                    } else if (typeof value === STRING) {\n                      fieldName = value;\n                    }\n\n                    if (isPlainObject(value) && value.from) {\n                      fromName = value.from;\n                    }\n\n                    shouldSerialize = shouldSerialize || fromName && fromName !== field || fieldName !== field;\n                    name = fromName || fieldName;\n                    getters[field] = name.indexOf(\".\") !== -1 ? getter(name, true) : getter(name);\n                    serializeGetters[field] = getter(field);\n                    originalFieldNames[fromName || fieldName] = field;\n                    fieldNames[field] = fromName || fieldName;\n                  });\n\n                  if (!schema.serialize && shouldSerialize) {\n                    that.serialize = wrapDataAccess(serializeFunction, model, serializeRecords, serializeGetters, originalFieldNames, fieldNames);\n                  }\n                }\n\n                that._dataAccessFunction = dataFunction;\n                that._wrapDataAccessBase = wrapDataAccessBase(model, convertRecords, getters, originalFieldNames, fieldNames);\n                that.data = wrapDataAccess(dataFunction, model, convertRecords, getters, originalFieldNames, fieldNames);\n                that.groups = wrapDataAccess(groupsFunction, model, convertGroup, getters, originalFieldNames, fieldNames);\n              }\n            },\n            errors: function (data) {\n              return data ? data.errors : null;\n            },\n            parse: identity,\n            data: identity,\n            total: function (data) {\n              return data.length;\n            },\n            groups: identity,\n            aggregates: function () {\n              return {};\n            },\n            serialize: function (data) {\n              return data;\n            }\n          });\n\n          function fillLastGroup(originalGroup, newGroup) {\n            var currOriginal;\n            var currentNew;\n\n            if (newGroup.items && newGroup.items.length) {\n              for (var i = 0; i < newGroup.items.length; i++) {\n                currOriginal = originalGroup.items[originalGroup.items.length - 1];\n                currentNew = newGroup.items[i];\n\n                if (currOriginal && currentNew) {\n                  if (currOriginal.hasSubgroups && currOriginal.value == currentNew.value) {\n                    fillLastGroup(currOriginal, currentNew);\n                  } else if (currOriginal.field && currOriginal.value == currentNew.value) {\n                    currOriginal.items.push.apply(currOriginal.items, currentNew.items);\n                  } else {\n                    originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                  }\n                } else if (currentNew) {\n                  originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                }\n              }\n            }\n          }\n\n          function mergeGroups(target, dest, skip, take) {\n            var group,\n                idx = 0,\n                items;\n\n            while (dest.length && take) {\n              group = dest[idx];\n              items = group.items;\n              var length = items.length;\n\n              if (target && target.field === group.field && target.value === group.value) {\n                if (target.hasSubgroups && target.items.length) {\n                  mergeGroups(target.items[target.items.length - 1], group.items, skip, take);\n                } else {\n                  items = items.slice(skip, skip + take);\n                  target.items = target.items.concat(items);\n                }\n\n                dest.splice(idx--, 1);\n              } else if (group.hasSubgroups && items.length) {\n                mergeGroups(group, items, skip, take);\n\n                if (!group.items.length) {\n                  dest.splice(idx--, 1);\n                }\n              } else {\n                items = items.slice(skip, skip + take);\n                group.items = items;\n\n                if (!group.items.length) {\n                  dest.splice(idx--, 1);\n                }\n              }\n\n              if (items.length === 0) {\n                skip -= length;\n              } else {\n                skip = 0;\n                take -= items.length;\n              }\n\n              if (++idx >= dest.length) {\n                break;\n              }\n            }\n\n            if (idx < dest.length) {\n              dest.splice(idx, dest.length - idx);\n            }\n          }\n\n          function flatGroups(groups, indexFunction) {\n            var result = [];\n            var groupsLength = (groups || []).length;\n            var group;\n            var items;\n            var indexFn = isFunction(indexFunction) ? indexFunction : function (array, index) {\n              return array[index];\n            };\n\n            for (var groupIndex = 0; groupIndex < groupsLength; groupIndex++) {\n              group = indexFn(groups, groupIndex);\n\n              if (group.hasSubgroups) {\n                result = result.concat(flatGroups(group.items));\n              } else {\n                items = group.items;\n\n                for (var itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                  result.push(indexFn(items, itemIndex));\n                }\n              }\n            }\n\n            return result;\n          }\n\n          function flattenGroups(data) {\n            var idx,\n                result = [],\n                length,\n                items,\n                itemIndex;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n              var group = data.at(idx);\n\n              if (group.items) {\n                if (group.hasSubgroups) {\n                  result = result.concat(flattenGroups(group.items));\n                } else {\n                  items = group.items;\n\n                  for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                    result.push(items.at(itemIndex));\n                  }\n                }\n              }\n            }\n\n            return result;\n          }\n\n          function wrapGroupItems(data, model) {\n            var idx, length, group;\n\n            if (model) {\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                group = data.at(idx);\n\n                if (group.items) {\n                  if (group.hasSubgroups) {\n                    wrapGroupItems(group.items, model);\n                  } else {\n                    group.items = new LazyObservableArray(group.items, model, group.items._events);\n                  }\n                }\n              }\n            }\n          }\n\n          function eachGroupItems(data, func) {\n            for (var idx = 0; idx < data.length; idx++) {\n              if (data[idx].hasSubgroups) {\n                if (eachGroupItems(data[idx].items, func)) {\n                  return true;\n                }\n              } else if (func(data[idx].items, data[idx])) {\n                return true;\n              }\n            }\n          }\n\n          function replaceInRanges(ranges, data, item, observable) {\n            for (var idx = 0; idx < ranges.length; idx++) {\n              if (ranges[idx].data === data) {\n                break;\n              }\n\n              if (replaceInRange(ranges[idx].data, item, observable)) {\n                break;\n              }\n            }\n          }\n\n          function replaceInRange(items, item, observable) {\n            for (var idx = 0, length = items.length; idx < length; idx++) {\n              if (items[idx] && items[idx].hasSubgroups) {\n                return replaceInRange(items[idx].items, item, observable);\n              } else if (items[idx] === item || items[idx] === observable) {\n                items[idx] = observable;\n                return true;\n              }\n            }\n          }\n\n          function replaceWithObservable(view, data, ranges, type, serverGrouping) {\n            for (var viewIndex = 0, length = view.length; viewIndex < length; viewIndex++) {\n              var item = view[viewIndex];\n\n              if (!item || item instanceof type) {\n                continue;\n              }\n\n              if (item.hasSubgroups !== undefined && !serverGrouping) {\n                replaceWithObservable(item.items, data, ranges, type, serverGrouping);\n              } else {\n                for (var idx = 0; idx < data.length; idx++) {\n                  if (data[idx] === item) {\n                    view[viewIndex] = data.at(idx);\n                    replaceInRanges(ranges, data, item, view[viewIndex]);\n                    break;\n                  }\n                }\n              }\n            }\n          }\n\n          function removeModel(data, model) {\n            if (!data) {\n              return;\n            }\n\n            var length = data.length;\n            var dataItem;\n            var idx;\n\n            for (idx = 0; idx < length; idx++) {\n              dataItem = data[idx];\n\n              if (dataItem.uid && dataItem.uid == model.uid) {\n                data.splice(idx, 1);\n                return dataItem;\n              }\n            }\n          }\n\n          function indexOfPristineModel(data, model) {\n            if (model) {\n              return indexOf(data, function (item) {\n                return item.uid && item.uid == model.uid || item[model.idField] === model.id && model.id !== model._defaultId;\n              });\n            }\n\n            return -1;\n          }\n\n          function indexOfModel(data, model) {\n            if (model) {\n              return indexOf(data, function (item) {\n                return item.uid == model.uid;\n              });\n            }\n\n            return -1;\n          }\n\n          function indexOf(data, comparer) {\n            var idx, length;\n\n            if (!data) {\n              return;\n            }\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n              if (comparer(data[idx])) {\n                return idx;\n              }\n            }\n\n            return -1;\n          }\n\n          function fieldNameFromModel(fields, name) {\n            if (fields && !isEmptyObject(fields)) {\n              var descriptor = fields[name];\n              var fieldName;\n\n              if (isPlainObject(descriptor)) {\n                fieldName = descriptor.from || descriptor.field || name;\n              } else {\n                fieldName = fields[name] || name;\n              }\n\n              if (isFunction(fieldName)) {\n                return name;\n              }\n\n              return fieldName;\n            }\n\n            return name;\n          }\n\n          function convertFilterDescriptorsField(descriptor, model) {\n            var idx,\n                length,\n                target = {};\n\n            for (var field in descriptor) {\n              if (field !== \"filters\") {\n                target[field] = descriptor[field];\n              }\n            }\n\n            if (descriptor.filters) {\n              target.filters = [];\n\n              for (idx = 0, length = descriptor.filters.length; idx < length; idx++) {\n                target.filters[idx] = convertFilterDescriptorsField(descriptor.filters[idx], model);\n              }\n            } else {\n              target.field = fieldNameFromModel(model.fields, target.field);\n            }\n\n            return target;\n          }\n\n          function convertDescriptorsField(descriptors, model) {\n            var idx,\n                length,\n                result = [],\n                target,\n                descriptor;\n\n            for (idx = 0, length = descriptors.length; idx < length; idx++) {\n              target = {};\n              descriptor = descriptors[idx];\n\n              for (var field in descriptor) {\n                target[field] = descriptor[field];\n              }\n\n              target.field = fieldNameFromModel(model.fields, target.field);\n\n              if (target.aggregates && isArray(target.aggregates)) {\n                target.aggregates = convertDescriptorsField(target.aggregates, model);\n              }\n\n              result.push(target);\n            }\n\n            return result;\n          }\n\n          var DataSource = Observable.extend({\n            init: function (options) {\n              var that = this,\n                  model,\n                  data;\n\n              if (options) {\n                data = options.data;\n              }\n\n              options = that.options = extend({}, that.options, options);\n              that._map = {};\n              that._prefetch = {};\n              that._data = [];\n              that._pristineData = [];\n              that._ranges = [];\n              that._view = [];\n              that._pristineTotal = 0;\n              that._destroyed = [];\n              that._pageSize = options.pageSize;\n              that._page = options.page || (options.pageSize ? 1 : undefined);\n              that._sort = normalizeSort(options.sort);\n              that._sortFields = sortFields(options.sort);\n              that._filter = normalizeFilter(options.filter);\n              that._group = normalizeGroup(options.group);\n              that._aggregate = options.aggregate;\n              that._total = options.total;\n              that._groupPaging = options.groupPaging;\n\n              if (that._groupPaging) {\n                that._groupsState = {};\n              }\n\n              that._shouldDetachObservableParents = true;\n              Observable.fn.init.call(that);\n              that.transport = Transport.create(options, data, that);\n\n              if (isFunction(that.transport.push)) {\n                that.transport.push({\n                  pushCreate: that._pushCreate.bind(that),\n                  pushUpdate: that._pushUpdate.bind(that),\n                  pushDestroy: that._pushDestroy.bind(that)\n                });\n              }\n\n              if (options.offlineStorage != null) {\n                if (typeof options.offlineStorage == \"string\") {\n                  var key = options.offlineStorage;\n                  that._storage = {\n                    getItem: function () {\n                      return JSON.parse(localStorage.getItem(key));\n                    },\n                    setItem: function (item) {\n                      localStorage.setItem(key, stringify(that.reader.serialize(item)));\n                    }\n                  };\n                } else {\n                  that._storage = options.offlineStorage;\n                }\n              }\n\n              that.reader = new kendo.data.readers[options.schema.type || \"json\"](options.schema);\n              model = that.reader.model || {};\n\n              that._detachObservableParents();\n\n              that._data = that._observe(that._data);\n              that._online = true;\n              that.bind([\"push\", ERROR, CHANGE, REQUESTSTART, SYNC, REQUESTEND, PROGRESS], options);\n            },\n            options: {\n              data: null,\n              schema: {\n                modelBase: Model\n              },\n              offlineStorage: null,\n              serverSorting: false,\n              serverPaging: false,\n              serverFiltering: false,\n              serverGrouping: false,\n              serverAggregates: false,\n              batch: false,\n              inPlaceSort: false\n            },\n            clone: function () {\n              return this;\n            },\n            online: function (value) {\n              if (value !== undefined) {\n                if (this._online != value) {\n                  this._online = value;\n\n                  if (value) {\n                    return this.sync();\n                  }\n                }\n\n                return $.Deferred().resolve().promise();\n              } else {\n                return this._online;\n              }\n            },\n            offlineData: function (state) {\n              if (this.options.offlineStorage == null) {\n                return null;\n              }\n\n              if (state !== undefined) {\n                return this._storage.setItem(state);\n              }\n\n              return this._storage.getItem() || [];\n            },\n            _isServerGrouped: function () {\n              var group = this.group() || [];\n              return this.options.serverGrouping && group.length;\n            },\n            _isServerGroupPaged: function () {\n              return this._isServerGrouped() && this._groupPaging;\n            },\n            _isGroupPaged: function () {\n              var group = this._group || [];\n              return this._groupPaging && group.length;\n            },\n            _pushCreate: function (result) {\n              this._push(result, \"pushCreate\");\n            },\n            _pushUpdate: function (result) {\n              this._push(result, \"pushUpdate\");\n            },\n            _pushDestroy: function (result) {\n              this._push(result, \"pushDestroy\");\n            },\n            _push: function (result, operation) {\n              var data = this._readData(result);\n\n              if (!data) {\n                data = result;\n              }\n\n              this[operation](data);\n            },\n            _flatData: function (data, skip) {\n              if (data) {\n                if (this._isServerGrouped()) {\n                  return flattenGroups(data);\n                }\n\n                if (!skip) {\n                  for (var idx = 0; idx < data.length; idx++) {\n                    data.at(idx);\n                  }\n                }\n              }\n\n              return data;\n            },\n            parent: noop,\n            get: function (id) {\n              var idx,\n                  length,\n                  data = this._flatData(this._data, this.options.useRanges);\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].id == id) {\n                  return data[idx];\n                }\n              }\n            },\n            getByUid: function (id) {\n              return this._getByUid(id, this._data);\n            },\n            _getByUid: function (id, dataItems) {\n              var idx,\n                  length,\n                  data = this._flatData(dataItems, this.options.useRanges);\n\n              if (!data) {\n                return;\n              }\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].uid == id) {\n                  return data[idx];\n                }\n              }\n            },\n            indexOf: function (model) {\n              return indexOfModel(this._data, model);\n            },\n            at: function (index) {\n              return this._data.at(index);\n            },\n            data: function (value) {\n              var that = this;\n\n              if (value !== undefined) {\n                that._detachObservableParents();\n\n                that._data = this._observe(value);\n                that._pristineData = value.slice(0);\n\n                that._storeData();\n\n                that._ranges = [];\n                that.trigger(\"reset\");\n\n                that._addRange(that._data);\n\n                that._total = that._data.length;\n                that._pristineTotal = that._total;\n\n                that._process(that._data);\n              } else {\n                if (that._data) {\n                  for (var idx = 0; idx < that._data.length; idx++) {\n                    that._data.at(idx);\n                  }\n                }\n\n                return that._data;\n              }\n            },\n            view: function (value) {\n              if (value === undefined) {\n                return this._view;\n              } else {\n                this._view = this._observeView(value);\n              }\n            },\n            _observeView: function (data) {\n              var that = this;\n              replaceWithObservable(data, that._data, that._ranges, that.reader.model || ObservableObject, that._isServerGrouped());\n              var view = new LazyObservableArray(data, that.reader.model);\n\n              view.parent = function () {\n                return that.parent();\n              };\n\n              return view;\n            },\n            flatView: function () {\n              var groups = this.group() || [];\n\n              if (groups.length) {\n                return flattenGroups(this._view);\n              } else {\n                return this._view;\n              }\n            },\n            add: function (model) {\n              return this.insert(this._data.length, model);\n            },\n            _createNewModel: function (model) {\n              if (this.reader.model) {\n                return new this.reader.model(model);\n              }\n\n              if (model instanceof ObservableObject) {\n                return model;\n              }\n\n              return new ObservableObject(model);\n            },\n            insert: function (index, model) {\n              if (!model) {\n                model = index;\n                index = 0;\n              }\n\n              if (!(model instanceof Model)) {\n                model = this._createNewModel(model);\n              }\n\n              if (this._isServerGrouped()) {\n                this._data.splice(index, 0, this._wrapInEmptyGroup(model));\n              } else {\n                this._data.splice(index, 0, model);\n              }\n\n              this._insertModelInRange(index, model);\n\n              return model;\n            },\n            pushInsert: function (index, items) {\n              var that = this;\n\n              var rangeSpan = that._getCurrentRangeSpan();\n\n              if (!items) {\n                items = index;\n                index = 0;\n              }\n\n              if (!isArray(items)) {\n                items = [items];\n              }\n\n              var pushed = [];\n              var autoSync = this.options.autoSync;\n              this.options.autoSync = false;\n\n              try {\n                for (var idx = 0; idx < items.length; idx++) {\n                  var item = items[idx];\n                  var result = this.insert(index, item);\n                  pushed.push(result);\n                  var pristine = result.toJSON();\n\n                  if (this._isServerGrouped()) {\n                    pristine = this._wrapInEmptyGroup(pristine);\n                  }\n\n                  this._pristineData.push(pristine);\n\n                  if (rangeSpan && rangeSpan.length) {\n                    $(rangeSpan).last()[0].pristineData.push(pristine);\n                  }\n\n                  index++;\n                }\n              } finally {\n                this.options.autoSync = autoSync;\n              }\n\n              if (pushed.length) {\n                this.trigger(\"push\", {\n                  type: \"create\",\n                  items: pushed\n                });\n              }\n            },\n            pushCreate: function (items) {\n              this.pushInsert(this._data.length, items);\n            },\n            pushUpdate: function (items) {\n              if (!isArray(items)) {\n                items = [items];\n              }\n\n              var pushed = [];\n\n              for (var idx = 0; idx < items.length; idx++) {\n                var item = items[idx];\n\n                var model = this._createNewModel(item);\n\n                var target = this.get(model.id);\n\n                if (target) {\n                  pushed.push(target);\n                  target.accept(item);\n                  target.trigger(CHANGE);\n\n                  this._updatePristineForModel(target, item);\n                } else {\n                  this.pushCreate(item);\n                }\n              }\n\n              if (pushed.length) {\n                this.trigger(\"push\", {\n                  type: \"update\",\n                  items: pushed\n                });\n              }\n            },\n            pushDestroy: function (items) {\n              var pushed = this._removeItems(items);\n\n              if (pushed.length) {\n                this.trigger(\"push\", {\n                  type: \"destroy\",\n                  items: pushed\n                });\n              }\n            },\n            _removeItems: function (items, removePristine) {\n              if (!isArray(items)) {\n                items = [items];\n              }\n\n              var shouldRemovePristine = typeof removePristine !== \"undefined\" ? removePristine : true;\n              var destroyed = [];\n              var autoSync = this.options.autoSync;\n              this.options.autoSync = false;\n\n              try {\n                for (var idx = 0; idx < items.length; idx++) {\n                  var item = items[idx];\n\n                  var model = this._createNewModel(item);\n\n                  var found = false;\n\n                  this._eachItem(this._data, function (items) {\n                    for (var idx = 0; idx < items.length; idx++) {\n                      var item = items.at(idx);\n\n                      if (item.id === model.id) {\n                        destroyed.push(item);\n                        items.splice(idx, 1);\n                        found = true;\n                        break;\n                      }\n                    }\n                  });\n\n                  if (found && shouldRemovePristine) {\n                    this._removePristineForModel(model);\n\n                    this._destroyed.pop();\n                  }\n                }\n              } finally {\n                this.options.autoSync = autoSync;\n              }\n\n              return destroyed;\n            },\n            pushMove: function (index, items) {\n              var pushed = this._moveItems(index, items);\n\n              if (pushed.length) {\n                this.trigger(\"push\", {\n                  type: \"update\",\n                  items: pushed\n                });\n              }\n            },\n            _moveItems: function (index, items) {\n              if (!isArray(items)) {\n                items = [items];\n              }\n\n              var moved = [];\n              var autoSync = this.options.autoSync;\n              this.options.autoSync = false;\n\n              try {\n                for (var i = 0; i < items.length; i++) {\n                  var item = items[i];\n\n                  var model = this._createNewModel(item);\n\n                  this._eachItem(this._data, function (dataItems) {\n                    for (var idx = 0; idx < dataItems.length; idx++) {\n                      var dataItem = dataItems.at(idx);\n\n                      if (dataItem.id === model.id) {\n                        moved.push(dataItem);\n                        dataItems.splice(index >= idx ? --index : index, 0, dataItems.splice(idx, 1)[0]);\n                        index++;\n                        break;\n                      }\n                    }\n                  });\n                }\n              } finally {\n                this.options.autoSync = autoSync;\n              }\n\n              return moved;\n            },\n            remove: function (model) {\n              var result,\n                  that = this,\n                  hasGroups = that._isServerGrouped();\n\n              if (hasGroups && model.uid && (!model.isNew || !model.isNew())) {\n                that._pushInDestroyed(model);\n              }\n\n              this._eachItem(that._data, function (items) {\n                result = removeModel(items, model);\n\n                if (result && hasGroups) {\n                  return true;\n                }\n              });\n\n              this._removeModelFromRanges(model);\n\n              return model;\n            },\n            destroyed: function () {\n              return this._destroyed;\n            },\n            created: function () {\n              var idx,\n                  length,\n                  result = [],\n                  data = this._flatData(this._data, this.options.useRanges);\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].isNew && data[idx].isNew()) {\n                  result.push(data[idx]);\n                }\n              }\n\n              return result;\n            },\n            updated: function () {\n              var idx,\n                  length,\n                  result = [],\n                  data = this._flatData(this._data, this.options.useRanges);\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].isNew && !data[idx].isNew() && data[idx].dirty) {\n                  result.push(data[idx]);\n                }\n              }\n\n              return result;\n            },\n            sync: function () {\n              var that = this,\n                  created = [],\n                  updated = [],\n                  destroyed = that._destroyed;\n              var promise = $.Deferred().resolve().promise();\n\n              if (that.online()) {\n                if (!that.reader.model) {\n                  return promise;\n                }\n\n                created = that.created();\n                updated = that.updated();\n                var promises = [];\n\n                if (that.options.batch && that.transport.submit) {\n                  promises = that._sendSubmit(created, updated, destroyed);\n                } else {\n                  promises.push.apply(promises, that._send(\"create\", created));\n                  promises.push.apply(promises, that._send(\"update\", updated));\n                  promises.push.apply(promises, that._send(\"destroy\", destroyed));\n                }\n\n                promise = $.when.apply(null, promises).then(function () {\n                  var idx, length;\n\n                  for (idx = 0, length = arguments.length; idx < length; idx++) {\n                    if (arguments[idx]) {\n                      that._accept(arguments[idx]);\n                    }\n                  }\n\n                  that._storeData(true);\n\n                  that._syncEnd();\n\n                  that._change({\n                    action: \"sync\"\n                  });\n\n                  that.trigger(SYNC);\n\n                  if (that._isServerGroupPaged()) {\n                    that.read();\n                  }\n                });\n              } else {\n                that._storeData(true);\n\n                that._syncEnd();\n\n                that._change({\n                  action: \"sync\"\n                });\n              }\n\n              return promise;\n            },\n            _syncEnd: noop,\n            cancelChanges: function (model) {\n              var that = this;\n\n              if (model instanceof kendo.data.Model) {\n                that._cancelModel(model);\n              } else {\n                that._destroyed = [];\n\n                that._detachObservableParents();\n\n                that._data = that._observe(that._pristineData);\n\n                if (that.options.serverPaging) {\n                  that._total = that._pristineTotal;\n                }\n\n                that._ranges = [];\n\n                that._addRange(that._data, 0);\n\n                that._changesCanceled();\n\n                that._change();\n\n                that._markOfflineUpdatesAsDirty();\n\n                if (that._isServerGrouped()) {\n                  that.read();\n                }\n              }\n            },\n            _changesCanceled: noop,\n            _markOfflineUpdatesAsDirty: function () {\n              var that = this;\n\n              if (that.options.offlineStorage != null) {\n                that._eachItem(that._data, function (items) {\n                  for (var idx = 0; idx < items.length; idx++) {\n                    var item = items.at(idx);\n\n                    if (item.__state__ == \"update\" || item.__state__ == \"create\") {\n                      item.dirty = true;\n                    }\n                  }\n                });\n              }\n            },\n            hasChanges: function () {\n              var idx,\n                  length,\n                  data = this._flatData(this._data, this.options.useRanges);\n\n              if (this._destroyed.length) {\n                return true;\n              }\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].isNew && data[idx].isNew() || data[idx].dirty) {\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            _accept: function (result) {\n              var that = this,\n                  models = result.models,\n                  response = result.response,\n                  idx = 0,\n                  serverGroup = that._isServerGrouped(),\n                  pristine = that._pristineData,\n                  type = result.type,\n                  length;\n\n              that.trigger(REQUESTEND, {\n                response: response,\n                type: type\n              });\n\n              if (response && !isEmptyObject(response)) {\n                response = that.reader.parse(response);\n\n                if (that._handleCustomErrors(response)) {\n                  return;\n                }\n\n                response = that.reader.data(response);\n\n                if (!isArray(response)) {\n                  response = [response];\n                }\n              } else {\n                response = $.map(models, function (model) {\n                  return model.toJSON();\n                });\n              }\n\n              if (type === \"destroy\") {\n                that._destroyed = [];\n              }\n\n              for (idx = 0, length = models.length; idx < length; idx++) {\n                if (type !== \"destroy\") {\n                  models[idx].accept(response[idx]);\n\n                  if (type === \"create\") {\n                    pristine.push(serverGroup ? that._wrapInEmptyGroup(models[idx].toJSON()) : response[idx]);\n                  } else if (type === \"update\") {\n                    that._updatePristineForModel(models[idx], response[idx]);\n                  }\n                } else {\n                  that._removePristineForModel(models[idx]);\n                }\n              }\n            },\n            _updatePristineForModel: function (model, values) {\n              this._executeOnPristineForModel(model, function (index, items) {\n                kendo.deepExtend(items[index], values);\n              });\n            },\n            _executeOnPristineForModel: function (model, callback) {\n              this._eachPristineItem(function (items) {\n                var index = indexOfPristineModel(items, model);\n\n                if (index > -1) {\n                  callback(index, items);\n                  return true;\n                }\n              });\n            },\n            _removePristineForModel: function (model) {\n              this._executeOnPristineForModel(model, function (index, items) {\n                items.splice(index, 1);\n              });\n            },\n            _readData: function (data) {\n              var read = !this._isServerGrouped() ? this.reader.data : this.reader.groups;\n              return read.call(this.reader, data);\n            },\n            _eachPristineItem: function (callback) {\n              var that = this;\n              var options = that.options;\n\n              var rangeSpan = that._getCurrentRangeSpan();\n\n              that._eachItem(that._pristineData, callback);\n\n              if (options.serverPaging && options.useRanges) {\n                each(rangeSpan, function (i, range) {\n                  that._eachItem(range.pristineData, callback);\n                });\n              }\n            },\n            _eachItem: function (data, callback) {\n              if (data && data.length) {\n                if (this._isServerGrouped()) {\n                  eachGroupItems(data, callback);\n                } else {\n                  callback(data);\n                }\n              }\n            },\n            _pristineForModel: function (model) {\n              var pristine,\n                  idx,\n                  callback = function (items) {\n                idx = indexOfPristineModel(items, model);\n\n                if (idx > -1) {\n                  pristine = items[idx];\n                  return true;\n                }\n              };\n\n              this._eachPristineItem(callback);\n\n              return pristine;\n            },\n            _cancelModel: function (model) {\n              var that = this;\n\n              var pristine = this._pristineForModel(model);\n\n              this._eachItem(this._data, function (items) {\n                var idx = indexOfModel(items, model);\n\n                if (idx >= 0) {\n                  if (pristine && (!model.isNew() || pristine.__state__)) {\n                    items[idx].accept(pristine);\n\n                    if (pristine.__state__ == \"update\") {\n                      items[idx].dirty = true;\n                    }\n                  } else {\n                    that._modelCanceled(model);\n\n                    items.splice(idx, 1);\n\n                    that._removeModelFromRanges(model);\n                  }\n                }\n              });\n            },\n            _modelCanceled: noop,\n            _submit: function (promises, data) {\n              var that = this;\n              that.trigger(REQUESTSTART, {\n                type: \"submit\"\n              });\n              that.trigger(PROGRESS);\n              that.transport.submit(extend({\n                success: function (response, type) {\n                  var promise = $.grep(promises, function (x) {\n                    return x.type == type;\n                  })[0];\n\n                  if (promise) {\n                    promise.resolve({\n                      response: response,\n                      models: promise.models,\n                      type: type\n                    });\n                  }\n                },\n                error: function (response, status, error) {\n                  for (var idx = 0; idx < promises.length; idx++) {\n                    promises[idx].reject(response);\n                  }\n\n                  that.error(response, status, error);\n                }\n              }, data));\n            },\n            _sendSubmit: function (created, updated, destroyed) {\n              var that = this,\n                  promises = [];\n\n              if (that.options.batch) {\n                if (created.length) {\n                  promises.push($.Deferred(function (deferred) {\n                    deferred.type = \"create\";\n                    deferred.models = created;\n                  }));\n                }\n\n                if (updated.length) {\n                  promises.push($.Deferred(function (deferred) {\n                    deferred.type = \"update\";\n                    deferred.models = updated;\n                  }));\n                }\n\n                if (destroyed.length) {\n                  promises.push($.Deferred(function (deferred) {\n                    deferred.type = \"destroy\";\n                    deferred.models = destroyed;\n                  }));\n                }\n\n                that._submit(promises, {\n                  data: {\n                    created: that.reader.serialize(toJSON(created)),\n                    updated: that.reader.serialize(toJSON(updated)),\n                    destroyed: that.reader.serialize(toJSON(destroyed))\n                  }\n                });\n              }\n\n              return promises;\n            },\n            _promise: function (data, models, type) {\n              var that = this;\n              return $.Deferred(function (deferred) {\n                that.trigger(REQUESTSTART, {\n                  type: type\n                });\n                that.trigger(PROGRESS);\n                that.transport[type].call(that.transport, extend({\n                  success: function (response) {\n                    deferred.resolve({\n                      response: response,\n                      models: models,\n                      type: type\n                    });\n                  },\n                  error: function (response, status, error) {\n                    deferred.reject(response);\n                    that.error(response, status, error);\n                  }\n                }, data));\n              }).promise();\n            },\n            _send: function (method, data) {\n              var that = this,\n                  idx,\n                  length,\n                  promises = [],\n                  converted = that.reader.serialize(toJSON(data));\n\n              if (that.options.batch) {\n                if (data.length) {\n                  promises.push(that._promise({\n                    data: {\n                      models: converted\n                    }\n                  }, data, method));\n                }\n              } else {\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                  promises.push(that._promise({\n                    data: converted[idx]\n                  }, [data[idx]], method));\n                }\n              }\n\n              return promises;\n            },\n            read: function (data) {\n              var that = this,\n                  params = that._params(data);\n\n              var deferred = $.Deferred();\n\n              that._queueRequest(params, function () {\n                var isPrevented = that.trigger(REQUESTSTART, {\n                  type: \"read\"\n                });\n\n                if (!isPrevented) {\n                  that.trigger(PROGRESS);\n                  that._ranges = [];\n                  that.trigger(\"reset\");\n\n                  if (that.online()) {\n                    that.transport.read({\n                      data: params,\n                      success: function (data) {\n                        that._ranges = [];\n                        that.success(data, params);\n                        deferred.resolve();\n                      },\n                      error: function () {\n                        var args = slice.call(arguments);\n                        that.error.apply(that, args);\n                        deferred.reject.apply(deferred, args);\n                      }\n                    });\n                  } else if (that.options.offlineStorage != null) {\n                    that.success(that.offlineData(), params);\n                    deferred.resolve();\n                  }\n                } else {\n                  that._dequeueRequest();\n\n                  deferred.resolve(isPrevented);\n                }\n              });\n\n              return deferred.promise();\n            },\n            _readAggregates: function (data) {\n              return this.reader.aggregates(data);\n            },\n            success: function (data) {\n              var that = this,\n                  options = that.options,\n                  items,\n                  replaceSubset;\n              that.trigger(REQUESTEND, {\n                response: data,\n                type: \"read\"\n              });\n\n              if (that.online()) {\n                data = that.reader.parse(data);\n\n                if (that._handleCustomErrors(data)) {\n                  that._dequeueRequest();\n\n                  return;\n                }\n\n                that._total = that.reader.total(data);\n\n                if (that._isServerGroupPaged()) {\n                  that._serverGroupsTotal = that._total;\n                }\n\n                if (that._pageSize > that._total) {\n                  that._pageSize = that._total;\n\n                  if (that.options.pageSize && that.options.pageSize > that._pageSize) {\n                    that._pageSize = that.options.pageSize;\n                  }\n                }\n\n                if (that._aggregate && options.serverAggregates) {\n                  that._aggregateResult = that._readAggregates(data);\n                }\n\n                data = that._readData(data);\n                that._destroyed = [];\n              } else {\n                data = that._readData(data);\n                items = [];\n                var itemIds = {};\n                var model = that.reader.model;\n                var idField = model ? model.idField : \"id\";\n                var idx;\n\n                for (idx = 0; idx < this._destroyed.length; idx++) {\n                  var id = this._destroyed[idx][idField];\n                  itemIds[id] = id;\n                }\n\n                for (idx = 0; idx < data.length; idx++) {\n                  var item = data[idx];\n                  var state = item.__state__;\n\n                  if (state == \"destroy\") {\n                    if (!itemIds[item[idField]]) {\n                      this._pushInDestroyed(this._createNewModel(item));\n                    }\n                  } else {\n                    items.push(item);\n                  }\n                }\n\n                data = items;\n                that._total = data.length;\n              }\n\n              that._pristineTotal = that._total;\n              replaceSubset = that._skip && that._data.length && that._skip < that._data.length;\n\n              if (that.options.endless) {\n                if (replaceSubset) {\n                  that._pristineData.splice(that._skip, that._pristineData.length);\n                }\n\n                items = data.slice(0);\n\n                for (var j = 0; j < items.length; j++) {\n                  that._pristineData.push(items[j]);\n                }\n              } else {\n                that._pristineData = data.slice(0);\n              }\n\n              that._detachObservableParents();\n\n              if (that.options.endless) {\n                that._data.unbind(CHANGE, that._changeHandler);\n\n                if (that._isServerGrouped() && that._data[that._data.length - 1].value === data[0].value) {\n                  fillLastGroup(that._data[that._data.length - 1], data[0]);\n                  data.shift();\n                }\n\n                data = that._observe(data);\n\n                if (replaceSubset) {\n                  that._data.splice(that._skip, that._data.length);\n                }\n\n                for (var i = 0; i < data.length; i++) {\n                  that._data.push(data[i]);\n                }\n\n                that._data.bind(CHANGE, that._changeHandler);\n              } else {\n                that._data = that._observe(data);\n              }\n\n              that._markOfflineUpdatesAsDirty();\n\n              that._storeData();\n\n              that._addRange(that._data);\n\n              that._process(that._data);\n\n              that._dequeueRequest();\n            },\n            _detachObservableParents: function () {\n              if (this._data && this._shouldDetachObservableParents) {\n                for (var idx = 0; idx < this._data.length; idx++) {\n                  if (this._data[idx].parent) {\n                    this._data[idx].parent = noop;\n                  }\n                }\n              }\n            },\n            _storeData: function (updatePristine) {\n              var serverGrouping = this._isServerGrouped();\n\n              var model = this.reader.model;\n\n              function items(data) {\n                var state = [];\n\n                for (var idx = 0; idx < data.length; idx++) {\n                  var dataItem = data.at(idx);\n                  var item = dataItem.toJSON();\n\n                  if (serverGrouping && dataItem.items) {\n                    item.items = items(dataItem.items);\n                  } else {\n                    item.uid = dataItem.uid;\n\n                    if (model) {\n                      if (dataItem.isNew()) {\n                        item.__state__ = \"create\";\n                      } else if (dataItem.dirty) {\n                        item.__state__ = \"update\";\n                      }\n                    }\n                  }\n\n                  state.push(item);\n                }\n\n                return state;\n              }\n\n              if (this.options.offlineStorage != null) {\n                var state = items(this._data);\n                var destroyed = [];\n\n                for (var idx = 0; idx < this._destroyed.length; idx++) {\n                  var item = this._destroyed[idx].toJSON();\n\n                  item.__state__ = \"destroy\";\n                  destroyed.push(item);\n                }\n\n                this.offlineData(state.concat(destroyed));\n\n                if (updatePristine) {\n                  this._pristineData = this.reader.reader ? this.reader.reader._wrapDataAccessBase(state) : this.reader._wrapDataAccessBase(state);\n                }\n              }\n            },\n            _addRange: function (data, skip) {\n              var that = this,\n                  start = typeof skip !== \"undefined\" ? skip : that._skip || 0,\n                  end,\n                  range = {\n                data: data,\n                pristineData: data.toJSON(),\n                timestamp: that._timeStamp()\n              };\n\n              if (this._isGroupPaged()) {\n                end = start + data.length;\n                range.outerStart = start;\n                range.outerEnd = end;\n              } else {\n                end = start + that._flatData(data, true).length;\n              }\n\n              range.start = start;\n              range.end = end;\n\n              that._ranges.push(range);\n\n              that._sortRanges();\n\n              if (that._isGroupPaged()) {\n                if (!that._groupsFlat) {\n                  that._groupsFlat = [];\n                }\n\n                that._appendToGroupsFlat(range.data);\n\n                that._updateOuterRangesLength();\n              }\n            },\n            _appendToGroupsFlat: function (data) {\n              var length = data.length;\n\n              for (var i = 0; i < length; i++) {\n                this._groupsFlat.push(data[i]);\n              }\n            },\n            _getGroupByUid: function (uid) {\n              var length = this._groupsFlat.length;\n              var group;\n\n              for (var i = 0; i < length; i++) {\n                group = this._groupsFlat[i];\n\n                if (group.uid === uid) {\n                  return group;\n                }\n              }\n            },\n            _sortRanges: function () {\n              this._ranges.sort(function (x, y) {\n                return x.start - y.start;\n              });\n            },\n            error: function (xhr, status, errorThrown) {\n              this._dequeueRequest();\n\n              this.trigger(REQUESTEND, {});\n              this.trigger(ERROR, {\n                xhr: xhr,\n                status: status,\n                errorThrown: errorThrown\n              });\n            },\n            _params: function (data) {\n              var that = this,\n                  options = extend({\n                take: that.take(),\n                skip: that.skip(),\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that._sort,\n                filter: that._filter,\n                group: that._group,\n                aggregate: that._aggregate,\n                groupPaging: !!that._groupPaging\n              }, data);\n\n              if (!that.options.serverPaging) {\n                delete options.take;\n                delete options.skip;\n                delete options.page;\n                delete options.pageSize;\n              }\n\n              if (!that.options.serverGrouping) {\n                delete options.group;\n              } else if (that.reader.model && options.group) {\n                options.group = convertDescriptorsField(options.group, that.reader.model);\n              }\n\n              if (!that.options.serverFiltering) {\n                delete options.filter;\n              } else if (that.reader.model && options.filter) {\n                options.filter = convertFilterDescriptorsField(options.filter, that.reader.model);\n              }\n\n              if (!that.options.serverSorting) {\n                delete options.sort;\n              } else if (that.reader.model && options.sort) {\n                options.sort = convertDescriptorsField(options.sort, that.reader.model);\n              }\n\n              if (!that.options.serverAggregates) {\n                delete options.aggregate;\n              } else if (that.reader.model && options.aggregate) {\n                options.aggregate = convertDescriptorsField(options.aggregate, that.reader.model);\n              }\n\n              if (!that.options.groupPaging) {\n                delete options.groupPaging;\n              }\n\n              return options;\n            },\n            _queueRequest: function (options, callback) {\n              var that = this;\n\n              if (!that._requestInProgress) {\n                that._requestInProgress = true;\n                that._pending = undefined;\n                callback();\n              } else {\n                that._pending = {\n                  callback: callback.bind(that),\n                  options: options\n                };\n              }\n            },\n            _dequeueRequest: function () {\n              var that = this;\n              that._requestInProgress = false;\n\n              if (that._pending) {\n                that._queueRequest(that._pending.options, that._pending.callback);\n              }\n            },\n            _handleCustomErrors: function (response) {\n              if (this.reader.errors) {\n                var errors = this.reader.errors(response);\n\n                if (errors) {\n                  this.trigger(ERROR, {\n                    xhr: null,\n                    status: \"customerror\",\n                    errorThrown: \"custom error\",\n                    errors: errors\n                  });\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            _shouldWrap: function (data) {\n              var model = this.reader.model;\n\n              if (model && data.length) {\n                return !(data[0] instanceof model);\n              }\n\n              return false;\n            },\n            _observe: function (data) {\n              var that = this,\n                  model = that.reader.model;\n              that._shouldDetachObservableParents = true;\n\n              if (data instanceof ObservableArray) {\n                that._shouldDetachObservableParents = false;\n\n                if (that._shouldWrap(data)) {\n                  data.type = that.reader.model;\n                  data.wrapAll(data, data);\n                }\n              } else {\n                var arrayType = that.pageSize() && !that.options.serverPaging ? LazyObservableArray : ObservableArray;\n                data = new arrayType(data, that.reader.model);\n\n                data.parent = function () {\n                  return that.parent();\n                };\n              }\n\n              if (that._isServerGrouped()) {\n                wrapGroupItems(data, model);\n              }\n\n              if (that._changeHandler && that._data && that._data instanceof ObservableArray && !(that.options.useRanges && that.options.serverPaging)) {\n                that._data.unbind(CHANGE, that._changeHandler);\n              } else {\n                that._changeHandler = that._change.bind(that);\n              }\n\n              return data.bind(CHANGE, that._changeHandler);\n            },\n            _updateTotalForAction: function (action, items) {\n              var that = this;\n              var total = parseInt(that._total, 10);\n\n              if (!isNumber(that._total)) {\n                total = parseInt(that._pristineTotal, 10);\n              }\n\n              if (action === \"add\") {\n                total += items.length;\n              } else if (action === \"remove\") {\n                total -= items.length;\n              } else if (action !== \"itemchange\" && action !== \"sync\" && !that.options.serverPaging) {\n                total = that._pristineTotal;\n              } else if (action === \"sync\") {\n                total = that._pristineTotal = parseInt(that._total, 10);\n              }\n\n              that._total = total;\n            },\n            _pushInDestroyed: function (model) {\n              var isPushed = this._destroyed.find(function (item) {\n                return item.uid === model.uid;\n              });\n\n              if (!isPushed) {\n                this._destroyed.push(model);\n              }\n            },\n            _change: function (e) {\n              var that = this,\n                  idx,\n                  length,\n                  action = e ? e.action : \"\";\n\n              if (action === \"remove\") {\n                for (idx = 0, length = e.items.length; idx < length; idx++) {\n                  if (!e.items[idx].isNew || !e.items[idx].isNew()) {\n                    that._pushInDestroyed(e.items[idx]);\n                  }\n                }\n              }\n\n              if (that.options.autoSync && (action === \"add\" || action === \"remove\" || action === \"itemchange\")) {\n                var handler = function (args) {\n                  if (args.action === \"sync\") {\n                    that.unbind(\"change\", handler);\n\n                    that._updateTotalForAction(action, e.items);\n                  }\n                };\n\n                that.first(\"change\", handler);\n                that.sync();\n              } else {\n                that._updateTotalForAction(action, e ? e.items : []);\n\n                that._process(that._data, e);\n              }\n            },\n            _calculateAggregates: function (data, options) {\n              options = options || {};\n              var query = new Query(data),\n                  aggregates = options.aggregate,\n                  filter = options.filter;\n\n              if (filter) {\n                query = query.filter(filter);\n              }\n\n              return query.aggregate(aggregates);\n            },\n            _process: function (data, e) {\n              var that = this,\n                  options = {},\n                  result;\n\n              if (that.options.serverPaging !== true) {\n                options.skip = that._skip;\n                options.take = that._take || that._pageSize;\n\n                if (options.skip === undefined && that._page !== undefined && that._pageSize !== undefined) {\n                  options.skip = (that._page - 1) * that._pageSize;\n                }\n\n                if (that.options.useRanges) {\n                  options.skip = that.currentRangeStart();\n                }\n              }\n\n              if (that.options.serverSorting !== true) {\n                options.sort = that._sort;\n              }\n\n              if (that.options.serverFiltering !== true) {\n                options.filter = that._filter;\n              }\n\n              if (that.options.serverGrouping !== true) {\n                options.group = that._group;\n              }\n\n              if (that.options.serverAggregates !== true) {\n                options.aggregate = that._aggregate;\n              }\n\n              if (that.options.serverGrouping) {\n                that._clearEmptyGroups(data);\n              }\n\n              options.groupPaging = that._groupPaging;\n\n              if (that._isGroupPaged() && e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                result = that._queryProcess(data, {\n                  aggregate: that._aggregate\n                });\n              } else {\n                result = that._queryProcess(data, options);\n              }\n\n              if (that._filter && e && e.action === \"add\") {\n                var model = e.items[0],\n                    resultData = result.data;\n                var modelIsInView = resultData.find(function (item) {\n                  return item.uid === model.uid;\n                });\n\n                if (!modelIsInView) {\n                  result.data.splice(model.index, 0, model);\n                  result.total++;\n                }\n              }\n\n              if (that.options.serverAggregates !== true) {\n                // for performance reasons, calculate aggregates for part of the data only after query process\n                // this is necessary in the TreeList when paging\n                that._aggregateResult = that._calculateAggregates(result.dataToAggregate || data, options);\n              }\n\n              that._setView(result, options, e);\n\n              that._setFilterTotal(result.total, false);\n\n              e = e || {};\n              e.items = e.items || that._view;\n              that.trigger(CHANGE, e);\n            },\n            _setView: function (result, options, e) {\n              var that = this;\n\n              if (that._isGroupPaged() && !that._isServerGrouped()) {\n                if (e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                  that.view(result.data);\n\n                  that._updateOuterRangesLength();\n                } else {\n                  that._ranges = [];\n                  var query = new Query(result.data);\n\n                  that._addRange(that._observe(result.data));\n\n                  if (options.skip + options.take > result.data.length) {\n                    options.skip = result.data.length - options.take;\n                  }\n\n                  that.view(query.range(options.skip, options.take).toArray());\n                }\n              } else {\n                that.view(result.data);\n              }\n            },\n            _clearEmptyGroups: function (data) {\n              for (var idx = data.length - 1; idx >= 0; idx--) {\n                var group = data[idx];\n\n                if (group.hasSubgroups) {\n                  this._clearEmptyGroups(group.items);\n                }\n\n                if (group.items && !group.items.length && !group.itemCount) {\n                  splice.apply(group.parent(), [idx, 1]);\n                }\n              }\n            },\n            _queryProcess: function (data, options) {\n              if (this.options.inPlaceSort) {\n                return Query.process(data, options, this.options.inPlaceSort);\n              } else {\n                return Query.process(data, options);\n              }\n            },\n            _mergeState: function (options) {\n              var that = this;\n\n              if (options !== undefined) {\n                that._pageSize = options.pageSize;\n                that._page = options.page;\n                that._sort = options.sort;\n                that._filter = options.filter;\n                that._group = options.group;\n                that._aggregate = options.aggregate;\n                that._skip = that._currentRangeStart = options.skip;\n                that._take = options.take;\n\n                if (that._skip === undefined) {\n                  that._skip = that._currentRangeStart = that.skip();\n                  options.skip = that.skip();\n                }\n\n                if (that._take === undefined && that._pageSize !== undefined) {\n                  that._take = that._pageSize;\n                  options.take = that._take;\n                }\n\n                if (that.options.virtual) {\n                  options.virtual = that.options.virtual;\n                }\n\n                if (options.sort) {\n                  that._sort = options.sort = normalizeSort(options.sort);\n                  that._sortFields = sortFields(options.sort);\n                }\n\n                if (options.filter) {\n                  that._filter = options.filter = that.options.accentFoldingFiltering && !$.isEmptyObject(options.filter) ? $.extend({}, normalizeFilter(options.filter), {\n                    accentFoldingFiltering: that.options.accentFoldingFiltering\n                  }) : normalizeFilter(options.filter);\n                }\n\n                if (options.group) {\n                  that._group = options.group = normalizeGroup(options.group);\n                }\n\n                if (options.aggregate) {\n                  that._aggregate = options.aggregate = normalizeAggregate(options.aggregate);\n                }\n              }\n\n              return options;\n            },\n            query: function (options) {\n              var result;\n              var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n\n              if (remote || (this._data === undefined || this._data.length === 0) && !this._destroyed.length) {\n                if (this.options.endless) {\n                  var moreItemsCount = options.pageSize - this.pageSize();\n\n                  if (moreItemsCount > 0) {\n                    moreItemsCount = this.pageSize();\n                    options.page = options.pageSize / moreItemsCount;\n                    options.pageSize = moreItemsCount;\n                  } else {\n                    options.page = 1;\n                    this.options.endless = false;\n                  }\n                }\n\n                return this.read(this._mergeState(options));\n              }\n\n              var isPrevented = this.trigger(REQUESTSTART, {\n                type: \"read\"\n              });\n\n              if (!isPrevented) {\n                this.trigger(PROGRESS);\n\n                if (options) {\n                  options.groupPaging = this._groupPaging;\n                }\n\n                result = this._queryProcess(this._data, this._mergeState(options));\n\n                this._setFilterTotal(result.total, true);\n\n                this._aggregateResult = this._calculateAggregates(result.dataToAggregate || this._data, options);\n\n                this._setView(result, options);\n\n                this.trigger(REQUESTEND, {\n                  type: \"read\"\n                });\n                this.trigger(CHANGE, {\n                  items: result.data,\n                  action: options ? options.action : \"\"\n                });\n              }\n\n              return $.Deferred().resolve(isPrevented).promise();\n            },\n            _hasExpandedSubGroups: function (group) {\n              var result = false;\n              var length = group.items ? group.items.length : 0;\n\n              if (!group.hasSubgroups) {\n                return false;\n              }\n\n              for (var i = 0; i < length; i++) {\n                if (this._groupsState[group.items[i].uid]) {\n                  result = true;\n                  break;\n                }\n              }\n\n              return result;\n            },\n            _findGroupedRange: function (data, result, options, parents, callback) {\n              var that = this;\n              var length = data.length;\n              var group;\n              var current;\n              var itemsLength;\n              var groupCount;\n              var itemsToSkip;\n\n              for (var i = 0; i < length; i++) {\n                group = data[i];\n\n                if (options.taken >= options.take) {\n                  break;\n                }\n\n                if (!that._getGroupByUid(group.uid)) {\n                  that._groupsFlat.push(group);\n                }\n\n                if (that._groupsState[group.uid]) {\n                  if (that._isServerGroupPaged()) {\n                    if (that._fetchGroupItems(group, options, parents, callback)) {\n                      that._fetchingGroupItems = true;\n                      return;\n                    }\n\n                    groupCount = (group.subgroupCount || group.itemCount) + 1;\n                    itemsToSkip = options.skip - options.skipped;\n\n                    if (!that._hasExpandedSubGroups(group) && itemsToSkip > groupCount) {\n                      options.skipped += groupCount;\n                      continue;\n                    }\n                  }\n\n                  if (options.includeParents && options.skipped < options.skip) {\n                    options.skipped++;\n                    group.excludeHeader = true;\n                  } else if (options.includeParents) {\n                    options.taken++;\n                    group.excludeHeader = false;\n                  }\n\n                  if (group.hasSubgroups && group.items && group.items.length) {\n                    group.currentItems = [];\n\n                    if (!parents) {\n                      parents = [];\n                    }\n\n                    parents.push(group);\n\n                    that._findGroupedRange(group.items, group.currentItems, options, parents, callback);\n\n                    parents.pop();\n\n                    if (group.currentItems.length || options.taken > 0) {\n                      result.push(group);\n                    } else {\n                      group.excludeHeader = false;\n                    }\n                  } else {\n                    current = [];\n                    itemsLength = group.items.length;\n\n                    for (var j = 0; j < itemsLength; j++) {\n                      if (options.skipped < options.skip) {\n                        options.skipped++;\n                        continue;\n                      }\n\n                      if (options.taken >= options.take) {\n                        break;\n                      }\n\n                      current.push(group.items[j]);\n                      options.taken++;\n                    }\n\n                    if (current.length || options.taken > 0) {\n                      group.currentItems = current;\n                      result.push(group);\n                    } else {\n                      group.excludeHeader = false;\n                    }\n                  }\n                } else {\n                  if (options.skipped < options.skip) {\n                    options.skipped++;\n                    continue;\n                  }\n\n                  result.push(group);\n                  options.taken++;\n                }\n              }\n            },\n            _expandedSubGroupItemsCount: function (group, end, includeCurrentItems) {\n              var that = this;\n              var result = 0;\n              var subGroup;\n              var endSpecified = typeof end === \"number\";\n              var length = endSpecified ? end : group.subgroupCount;\n              var temp;\n\n              if (!group.hasSubgroups) {\n                return result;\n              }\n\n              for (var i = 0; i < length; i++) {\n                subGroup = group.items[i];\n\n                if (!subGroup) {\n                  break;\n                }\n\n                if (subGroup.hasSubgroups && that._groupsState[group.uid]) {\n                  temp = that._expandedSubGroupItemsCount(subGroup, length, true);\n                  result += temp;\n\n                  if (endSpecified) {\n                    length -= temp;\n                  }\n                } else if (!subGroup.hasSubgroups && that._groupsState[subGroup.uid]) {\n                  temp = subGroup.items ? subGroup.items.length : 0;\n                  result += temp;\n\n                  if (endSpecified) {\n                    length -= temp;\n                  }\n                }\n\n                if (includeCurrentItems) {\n                  result += 1;\n\n                  if (endSpecified) {\n                    length -= 1;\n                  }\n                }\n\n                if (endSpecified && result > length) {\n                  return result;\n                }\n              }\n\n              return result;\n            },\n            _fetchGroupItems: function (group, options, parents, callback) {\n              var that = this;\n              var groupItemsSkip;\n              var firstItem;\n              var lastItem;\n              var groupItemCount = group.hasSubgroups ? group.subgroupCount : group.itemCount;\n              var take = options.take;\n              var skipped = options.skipped;\n              var pageSize = that.take();\n              var expandedSubGroupItemsCount;\n\n              if (options.includeParents) {\n                if (skipped < options.skip) {\n                  skipped += 1;\n                } else {\n                  take -= 1;\n                }\n              }\n\n              if (!group.items || group.items && !group.items.length) {\n                that.getGroupItems(group, options, parents, callback, 0);\n                return true;\n              } else {\n                expandedSubGroupItemsCount = this._expandedSubGroupItemsCount(group, options.skip - skipped);\n                groupItemsSkip = Math.max(options.skip - (skipped + expandedSubGroupItemsCount), 0);\n\n                if (groupItemsSkip >= groupItemCount) {\n                  return false;\n                }\n\n                firstItem = group.items[groupItemsSkip];\n                lastItem = group.items[Math.min(groupItemsSkip + take, groupItemCount - 1)];\n\n                if (firstItem.notFetched) {\n                  that.getGroupItems(group, options, parents, callback, math.max(math.floor(groupItemsSkip / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                  return true;\n                }\n\n                if (lastItem.notFetched) {\n                  that.getGroupItems(group, options, parents, callback, math.max(math.floor((groupItemsSkip + pageSize) / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                  return true;\n                }\n              }\n            },\n            getGroupItems: function (group, options, parents, callback, groupItemsSkip, page) {\n              var that = this;\n              var take;\n              var filter;\n              var data;\n              var subgroups;\n\n              if (!group.items) {\n                group.items = [];\n              }\n\n              take = that.take();\n              filter = this._composeItemsFilter(group, parents);\n              data = {\n                page: page || 1,\n                pageSize: take,\n                skip: groupItemsSkip,\n                take: take,\n                filter: filter,\n                aggregate: that._aggregate,\n                sort: that._sort\n              };\n              subgroups = that.findSubgroups(group);\n\n              if (subgroups && subgroups.length) {\n                data.group = subgroups;\n                data.groupPaging = true;\n              }\n\n              clearTimeout(that._timeout);\n              that._timeout = setTimeout(function () {\n                that._queueRequest(data, function () {\n                  if (!that.trigger(REQUESTSTART, {\n                    type: \"read\"\n                  })) {\n                    that.transport.read({\n                      data: data,\n                      success: that._groupItemsSuccessHandler(group, options.skip, that.take(), callback, groupItemsSkip),\n                      error: function () {\n                        var args = slice.call(arguments);\n                        that.error.apply(that, args);\n                      }\n                    });\n                  } else {\n                    that._dequeueRequest();\n                  }\n                });\n              }, 100);\n            },\n            _groupItemsSuccessHandler: function (group, skip, take, callback, groupItemsSkip) {\n              var that = this;\n\n              var timestamp = that._timeStamp();\n\n              callback = isFunction(callback) ? callback : noop;\n              var totalField = that.options.schema && that.options.schema.total ? that.options.schema.total : \"Total\";\n              return function (data) {\n                var temp;\n                var model = Model.define(that.options.schema.model);\n                var totalCount;\n\n                that._dequeueRequest();\n\n                that.trigger(REQUESTEND, {\n                  response: data,\n                  type: \"read\"\n                });\n\n                if (isFunction(totalField)) {\n                  totalCount = totalField(data);\n                } else {\n                  totalCount = data[totalField];\n                }\n\n                data = that.reader.parse(data);\n\n                if (group.hasSubgroups) {\n                  temp = that.reader.groups(data);\n                  group.subgroupCount = totalCount;\n                } else {\n                  temp = that.reader.data(data);\n                  temp = temp.map(function (item) {\n                    return new model(item);\n                  });\n                }\n\n                group.items.omitChangeEvent = true;\n\n                for (var i = 0; i < totalCount; i++) {\n                  if (i >= groupItemsSkip && i < groupItemsSkip + take) {\n                    group.items.splice(i, 1, temp[i - groupItemsSkip]);\n                  } else {\n                    if (!group.items[i]) {\n                      group.items.splice(i, 0, {\n                        notFetched: true\n                      });\n                    }\n                  }\n                }\n\n                group.items.omitChangeEvent = false;\n\n                that._updateRangePristineData(group);\n\n                that._fetchingGroupItems = false;\n\n                if (!group.countAdded) {\n                  that._serverGroupsTotal += totalCount;\n                  group.countAdded = true;\n                }\n\n                that.range(skip, take, callback, \"expandGroup\");\n\n                if (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress) {\n                  that.trigger(CHANGE, {});\n                }\n              };\n            },\n            findSubgroups: function (group) {\n              var indexOfCurrentGroup = this._group.map(function (g) {\n                return g.field;\n              }).indexOf(group.field);\n\n              return this._group.slice(indexOfCurrentGroup + 1, this._group.length);\n            },\n            _composeItemsFilter: function (group, parents) {\n              var filter = this.filter() || {\n                logic: \"and\",\n                filters: []\n              };\n              filter.logic = 'and';\n              filter = extend(true, {}, filter);\n              filter.filters.push({\n                field: group.field,\n                operator: \"eq\",\n                value: group.value\n              });\n\n              if (parents) {\n                for (var i = 0; i < parents.length; i++) {\n                  filter.filters.push({\n                    field: parents[i].field,\n                    operator: \"eq\",\n                    value: parents[i].value\n                  });\n                }\n              }\n\n              return filter;\n            },\n            _updateRangePristineData: function (group) {\n              var that = this;\n              var ranges = that._ranges;\n              var rangesLength = ranges.length;\n              var temp;\n              var currentGroup;\n              var range;\n              var dataLength;\n              var indexes;\n              var currIdx;\n\n              for (var i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                dataLength = range.data.length;\n                indexes = [];\n                temp = null;\n\n                for (var j = 0; j < dataLength; j++) {\n                  currentGroup = range.data[j];\n                  indexes.push(j);\n\n                  if (currentGroup.uid === group.uid || currentGroup.hasSubgroups && currentGroup.items.length && that._containsSubGroup(currentGroup, group, indexes)) {\n                    break;\n                  }\n\n                  indexes.pop();\n                }\n\n                if (indexes.length) {\n                  temp = ranges[i].pristineData;\n\n                  while (indexes.length > 1) {\n                    currIdx = indexes.splice(0, 1)[0];\n                    temp = temp[currIdx].items;\n                  }\n\n                  temp[indexes[0]] = that._cloneGroup(group);\n                  break;\n                }\n              }\n            },\n            _containsSubGroup: function (group, subgroup, indexes) {\n              var that = this;\n              var length = group.items.length;\n              var currentSubGroup;\n\n              if (group.hasSubgroups && length) {\n                for (var i = 0; i < length; i++) {\n                  currentSubGroup = group.items[i];\n                  indexes.push(i);\n\n                  if (currentSubGroup.uid === subgroup.uid || currentSubGroup.hasSubgroups && currentSubGroup.items.length && that._containsSubGroup(currentSubGroup, subgroup, indexes)) {\n                    return true;\n                  }\n\n                  indexes.pop();\n                }\n              }\n            },\n            _cloneGroup: function (group) {\n              var that = this;\n              group = typeof group.toJSON == \"function\" ? group.toJSON() : group;\n\n              if (group.items && group.items.length) {\n                group.items = group.items.map(function (item) {\n                  return that._cloneGroup(item);\n                });\n              }\n\n              return group;\n            },\n            _setFilterTotal: function (filterTotal, setDefaultValue) {\n              var that = this;\n\n              if (!that.options.serverFiltering) {\n                if (filterTotal !== undefined) {\n                  that._total = filterTotal;\n                } else if (setDefaultValue) {\n                  that._total = that._data.length;\n                }\n              }\n            },\n            fetch: function (callback) {\n              var that = this;\n\n              var fn = function (isPrevented) {\n                if (isPrevented !== true && isFunction(callback)) {\n                  callback.call(that);\n                }\n              };\n\n              return this._query().done(fn);\n            },\n            _query: function (options) {\n              var that = this;\n              return that.query(extend({}, {\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that.sort(),\n                filter: that.filter(),\n                group: that.group(),\n                aggregate: that.aggregate()\n              }, options));\n            },\n            next: function (options) {\n              var that = this,\n                  page = that.page(),\n                  total = that.total();\n              options = options || {};\n\n              if (!page || total && page + 1 > that.totalPages()) {\n                return;\n              }\n\n              that._skip = that._currentRangeStart = page * that.take();\n              page += 1;\n              options.page = page;\n\n              that._query(options);\n\n              return page;\n            },\n            prev: function (options) {\n              var that = this,\n                  page = that.page();\n              options = options || {};\n\n              if (!page || page === 1) {\n                return;\n              }\n\n              that._skip = that._currentRangeStart = that._skip - that.take();\n              page -= 1;\n              options.page = page;\n\n              that._query(options);\n\n              return page;\n            },\n            page: function (val) {\n              var that = this,\n                  skip;\n\n              if (val !== undefined) {\n                val = math.max(math.min(math.max(val, 1), that.totalPages()), 1);\n                var take = that.take();\n\n                if (that._isGroupPaged()) {\n                  val -= 1;\n                  that.range(val * take, take, null, \"page\");\n                  return;\n                }\n\n                that._query(that._pageableQueryOptions({\n                  page: val\n                }));\n\n                return;\n              }\n\n              skip = that.skip();\n              return skip !== undefined ? math.round((skip || 0) / (that.take() || 1)) + 1 : undefined;\n            },\n            pageSize: function (val) {\n              var that = this;\n\n              if (val !== undefined) {\n                that._query(that._pageableQueryOptions({\n                  pageSize: val,\n                  page: 1\n                }));\n\n                return;\n              }\n\n              return that.take();\n            },\n            sort: function (val) {\n              var that = this;\n\n              if (val !== undefined) {\n                that.trigger(\"sort\");\n\n                that._query({\n                  sort: val\n                });\n\n                return;\n              }\n\n              return that._sort;\n            },\n            filter: function (val) {\n              var that = this;\n\n              if (val === undefined) {\n                return that._filter;\n              }\n\n              that.trigger(\"reset\");\n\n              that._query({\n                filter: val,\n                page: 1\n              });\n            },\n            group: function (val) {\n              var that = this;\n              var options = {\n                group: val\n              };\n\n              if (that._groupPaging) {\n                // clear ranges if ungrouping is performed\n                if (val !== undefined && (!val || !val.length)) {\n                  that._ranges = [];\n                }\n\n                options.page = 1;\n              }\n\n              if (val !== undefined) {\n                that._query(options);\n\n                return;\n              }\n\n              return that._group;\n            },\n            getGroupsFlat: function (data) {\n              var idx,\n                  result = [],\n                  length;\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                var group = data[idx];\n\n                if (group.hasSubgroups) {\n                  result = result.concat(this.getGroupsFlat(group.items));\n                }\n\n                result.push(group);\n              }\n\n              return result;\n            },\n            total: function () {\n              return parseInt(this._total || 0, 10);\n            },\n            groupsTotal: function (includeExpanded) {\n              var that = this;\n\n              if (!that._group.length) {\n                return that.total();\n              }\n\n              if (that._isServerGrouped()) {\n                if (that._serverGroupsTotal) {\n                  return that._serverGroupsTotal;\n                }\n\n                that._serverGroupsTotal = that.total();\n                return that._serverGroupsTotal;\n              }\n\n              return that._calculateGroupsTotal(that._ranges.length ? that._ranges[0].data : [], includeExpanded);\n            },\n            _calculateGroupsTotal: function (groups, includeExpanded, itemsField, ignoreState) {\n              var that = this;\n              itemsField = itemsField || \"items\";\n              var total;\n              var length;\n\n              if (that._group.length && groups) {\n                total = 0;\n                length = groups.length;\n\n                for (var i = 0; i < length; i++) {\n                  total += that.groupCount(groups[i], includeExpanded, itemsField, ignoreState);\n                }\n\n                that._groupsTotal = total;\n                return total;\n              }\n\n              that._groupsTotal = that._data.length;\n              return that._groupsTotal;\n            },\n            groupCount: function (group, includeExpanded, itemsField, ignoreState) {\n              var that = this;\n              var total = 0;\n\n              if (group.hasSubgroups && that._groupsState[group.uid]) {\n                if (includeExpanded && !group.excludeHeader || ignoreState) {\n                  total += 1;\n                }\n\n                group[itemsField].forEach(function (subgroup) {\n                  total += that.groupCount(subgroup, includeExpanded, itemsField, ignoreState);\n                });\n              } else {\n                if (that._groupsState[group.uid]) {\n                  if (includeExpanded && !group.excludeHeader || ignoreState) {\n                    total++;\n                  }\n\n                  total += group[itemsField] ? group[itemsField].length : 0;\n                } else {\n                  total++;\n                }\n              }\n\n              return total;\n            },\n            countGroupRange: function (range) {\n              var total = 0;\n              var length = range.length;\n\n              for (var i = 0; i < length; i++) {\n                total += this.groupCount(range[i], true);\n              }\n\n              return total;\n            },\n            aggregate: function (val) {\n              var that = this;\n\n              if (val !== undefined) {\n                that._query({\n                  aggregate: val\n                });\n\n                return;\n              }\n\n              return that._aggregate;\n            },\n            aggregates: function () {\n              var result = this._aggregateResult;\n\n              if (isEmptyObject(result)) {\n                result = this._emptyAggregates(this.aggregate());\n              }\n\n              return result;\n            },\n            _emptyAggregates: function (aggregates) {\n              var result = {};\n\n              if (!isEmptyObject(aggregates)) {\n                var aggregate = {};\n\n                if (!isArray(aggregates)) {\n                  aggregates = [aggregates];\n                }\n\n                for (var idx = 0; idx < aggregates.length; idx++) {\n                  aggregate[aggregates[idx].aggregate] = 0;\n                  result[aggregates[idx].field] = aggregate;\n                }\n              }\n\n              return result;\n            },\n            _pageableQueryOptions: function (options) {\n              return options;\n            },\n            _wrapInEmptyGroup: function (model) {\n              var groups = this.group(),\n                  parent,\n                  group,\n                  idx,\n                  length;\n\n              for (idx = groups.length - 1, length = 0; idx >= length; idx--) {\n                group = groups[idx];\n                parent = {\n                  value: model.get ? model.get(group.field) : model[group.field],\n                  field: group.field,\n                  items: parent ? [parent] : [model],\n                  hasSubgroups: !!parent,\n                  aggregates: this._emptyAggregates(group.aggregates)\n                };\n              }\n\n              return parent;\n            },\n            totalPages: function () {\n              var that = this,\n                  pageSize = that.pageSize() || that.total(),\n                  total = that._isGroupPaged() ? that.groupsTotal(true) : that.total();\n              return math.ceil((total || 0) / pageSize);\n            },\n            inRange: function (skip, take) {\n              var that = this,\n                  end = math.min(skip + take, that.total());\n\n              if (!that.options.serverPaging && that._data.length > 0) {\n                return true;\n              }\n\n              return that._findRange(skip, end).length > 0;\n            },\n            lastRange: function () {\n              var ranges = this._ranges;\n              return ranges[ranges.length - 1] || {\n                start: 0,\n                end: 0,\n                data: []\n              };\n            },\n            firstItemUid: function () {\n              var ranges = this._ranges;\n              return ranges.length && ranges[0].data.length && ranges[0].data[0].uid;\n            },\n            enableRequestsInProgress: function () {\n              this._skipRequestsInProgress = false;\n            },\n            _timeStamp: function () {\n              return new Date().getTime();\n            },\n            range: function (skip, take, callback, action) {\n              this._currentRequestTimeStamp = this._timeStamp();\n              this._skipRequestsInProgress = true;\n              var total = this._isGroupPaged() ? this.groupsTotal(true) : this.total();\n\n              if (action === \"expandGroup\" || action === \"collapseGroup\") {\n                this._updateOuterRangesLength();\n              }\n\n              skip = math.min(skip || 0, total);\n              callback = isFunction(callback) ? callback : noop;\n              var that = this,\n                  pageSkip = math.max(math.floor(skip / take), 0) * take,\n                  size = math.min(pageSkip + take, total),\n                  data;\n              data = that._findRange(skip, math.min(skip + take, total), callback);\n\n              if ((data.length || total === 0) && !that._fetchingGroupItems) {\n                that._processRangeData(data, skip, take, that._originalPageSkip || pageSkip, that._originalSize || size, {\n                  action: action\n                });\n\n                that._originalPageSkip = null;\n                that._originalSize = null;\n                callback();\n                return;\n              }\n\n              if (that._isGroupPaged()) {\n                that._originalPageSkip = pageSkip;\n                that._originalSize = size;\n                pageSkip = math.max(math.floor(that._adjustPageSkip(skip, take) / take), 0) * take;\n                size = math.min(pageSkip + take, total);\n              }\n\n              if (take !== undefined && !that._fetchingGroupItems) {\n                if (that._isGroupPaged() && !that._groupRangeExists(pageSkip, take) || !that._rangeExists(pageSkip, size)) {\n                  that.prefetch(pageSkip, take, function () {\n                    if (skip > pageSkip && size < that.total() && !that._rangeExists(size, math.min(size + take, that.total()))) {\n                      that.prefetch(size, take, function () {\n                        that.range(skip, take, callback);\n                      });\n                    } else {\n                      that.range(skip, take, callback);\n                    }\n                  });\n                } else if (pageSkip < skip) {\n                  that.prefetch(size, take, function () {\n                    that.range(skip, take, callback);\n                  });\n                }\n              }\n            },\n            _findRange: function (start, end, callback) {\n              var that = this,\n                  ranges = that._ranges,\n                  range,\n                  data = [],\n                  skipIdx,\n                  takeIdx,\n                  startIndex,\n                  endIndex,\n                  rangeData,\n                  rangeEnd,\n                  processed,\n                  options = that.options,\n                  remote = options.serverSorting || options.serverPaging || options.serverFiltering || options.serverGrouping || options.serverAggregates,\n                  flatData,\n                  count,\n                  length,\n                  groupMapOptions = {\n                take: end - start,\n                skip: start,\n                skipped: 0,\n                taken: 0,\n                includeParents: true\n              },\n                  prevRangeEnd,\n                  isGroupPaged = that._isGroupPaged(),\n                  startField = isGroupPaged ? \"outerStart\" : \"start\",\n                  endField = isGroupPaged ? \"outerEnd\" : \"end\",\n                  currentDataLength;\n\n              for (skipIdx = 0, length = ranges.length; skipIdx < length; skipIdx++) {\n                range = ranges[skipIdx];\n\n                if (isGroupPaged) {\n                  if (range.outerStart >= end) {\n                    return [];\n                  }\n\n                  if (start > range.outerEnd) {\n                    groupMapOptions.skipped += range.outerEnd - (prevRangeEnd || 0);\n                    prevRangeEnd = range.outerEnd;\n                    continue;\n                  }\n\n                  if (typeof prevRangeEnd !== \"undefined\" && prevRangeEnd != range.outerStart) {\n                    groupMapOptions.skipped += range.outerStart - prevRangeEnd;\n                  }\n\n                  if (groupMapOptions.skipped > groupMapOptions.skip) {\n                    return [];\n                  }\n\n                  if (typeof prevRangeEnd === \"undefined\" && start > 0 && range.start > 0) {\n                    groupMapOptions.skipped = range.outerStart;\n                  }\n\n                  takeIdx = skipIdx;\n\n                  while (true) {\n                    this._findGroupedRange(range.data, data, groupMapOptions, null, callback);\n\n                    currentDataLength = that._calculateGroupsTotal(data, true, \"currentItems\");\n\n                    if (currentDataLength >= groupMapOptions.take) {\n                      return data;\n                    }\n\n                    if (that._fetchingGroupItems) {\n                      return [];\n                    }\n\n                    takeIdx++;\n\n                    if (ranges[takeIdx] && ranges[takeIdx].outerStart === range.outerEnd) {\n                      range = ranges[takeIdx];\n                    } else {\n                      break;\n                    }\n                  }\n                } else if (start >= range[startField] && start <= range[endField]) {\n                  count = 0;\n\n                  for (takeIdx = skipIdx; takeIdx < length; takeIdx++) {\n                    range = ranges[takeIdx];\n                    flatData = that._flatData(range.data, true);\n\n                    if (flatData.length && start + count >= range.start) {\n                      rangeData = range.data;\n                      rangeEnd = range.end;\n\n                      if (!remote) {\n                        if (options.inPlaceSort) {\n                          processed = that._queryProcess(range.data, {\n                            filter: that.filter()\n                          });\n                        } else {\n                          var sort = normalizeGroupWithoutCompare(that.group() || []).concat(normalizeSort(that.sort() || []));\n                          processed = that._queryProcess(range.data, {\n                            sort: sort,\n                            filter: that.filter()\n                          });\n                        }\n\n                        flatData = rangeData = processed.data;\n\n                        if (processed.total !== undefined) {\n                          rangeEnd = processed.total;\n                        }\n                      }\n\n                      startIndex = 0;\n\n                      if (start + count > range.start) {\n                        startIndex = start + count - range.start;\n                      }\n\n                      endIndex = flatData.length;\n\n                      if (rangeEnd > end) {\n                        endIndex = endIndex - (rangeEnd - end);\n                      }\n\n                      count += endIndex - startIndex;\n                      data = that._mergeGroups(data, rangeData, startIndex, endIndex);\n\n                      if (end <= range.end && count == end - start) {\n                        return data;\n                      }\n                    }\n                  }\n\n                  break;\n                }\n\n                prevRangeEnd = range.outerEnd;\n              }\n\n              return [];\n            },\n            _getRangesMismatch: function (pageSkip) {\n              var that = this;\n              var ranges = that._ranges;\n              var mismatch = 0;\n              var i = 0;\n\n              while (true) {\n                var range = ranges[i];\n\n                if (!range || range.outerStart > pageSkip) {\n                  break;\n                }\n\n                if (range.outerEnd != range.end) {\n                  mismatch = range.outerEnd - range.end;\n                }\n\n                i++;\n              }\n\n              return mismatch;\n            },\n            _mergeGroups: function (data, range, skip, take) {\n              if (this._isServerGrouped()) {\n                var temp = range.toJSON(),\n                    prevGroup;\n\n                if (data.length) {\n                  prevGroup = data[data.length - 1];\n                }\n\n                mergeGroups(prevGroup, temp, skip, take);\n                return data.concat(temp);\n              }\n\n              return data.concat(range.slice(skip, take));\n            },\n            _processRangeData: function (data, skip, take, pageSkip, size, eventData) {\n              var that = this;\n              that._pending = undefined;\n              that._skip = skip > that.skip() && !that._omitPrefetch ? math.min(size, (that.totalPages() - 1) * that.take()) : pageSkip;\n              that._currentRangeStart = skip;\n              that._take = take;\n              var paging = that.options.serverPaging;\n              var sorting = that.options.serverSorting;\n              var filtering = that.options.serverFiltering;\n              var aggregates = that.options.serverAggregates;\n\n              try {\n                that.options.serverPaging = true;\n\n                if (!that._isServerGrouped() && !(that.group() && that.group().length)) {\n                  that.options.serverSorting = true;\n                }\n\n                that.options.serverFiltering = true;\n                that.options.serverPaging = true;\n                that.options.serverAggregates = true;\n\n                if (paging) {\n                  that._detachObservableParents();\n\n                  that._data = data = that._observe(data);\n                }\n\n                that._process(data, eventData);\n              } finally {\n                that.options.serverPaging = paging;\n                that.options.serverSorting = sorting;\n                that.options.serverFiltering = filtering;\n                that.options.serverAggregates = aggregates;\n              }\n            },\n            skip: function () {\n              var that = this;\n\n              if (that._skip === undefined) {\n                return that._page !== undefined ? (that._page - 1) * (that.take() || 1) : undefined;\n              }\n\n              return that._skip;\n            },\n            currentRangeStart: function () {\n              return this._currentRangeStart || 0;\n            },\n            take: function () {\n              return this._take || this._pageSize;\n            },\n            _prefetchSuccessHandler: function (skip, size, callback, force) {\n              var that = this;\n\n              var timestamp = that._timeStamp();\n\n              return function (data) {\n                var found = false,\n                    range = {\n                  start: skip,\n                  end: size,\n                  data: [],\n                  timestamp: that._timeStamp()\n                },\n                    idx,\n                    length,\n                    temp;\n\n                that._dequeueRequest();\n\n                that.trigger(REQUESTEND, {\n                  response: data,\n                  type: \"read\"\n                });\n                data = that.reader.parse(data);\n                temp = that._readData(data);\n\n                if (temp.length) {\n                  for (idx = 0, length = that._ranges.length; idx < length; idx++) {\n                    if (that._ranges[idx].start === skip) {\n                      found = true;\n                      range = that._ranges[idx];\n\n                      if (!that._isGroupPaged()) {\n                        range.pristineData = temp;\n                        range.data = that._observe(temp);\n                        range.end = range.start + that._flatData(range.data, true).length;\n\n                        that._sortRanges();\n                      }\n\n                      break;\n                    }\n                  }\n\n                  if (!found) {\n                    that._addRange(that._observe(temp), skip);\n                  }\n                }\n\n                that._total = that.reader.total(data);\n\n                if (force || timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress) {\n                  if (callback && temp.length) {\n                    callback();\n                  } else {\n                    that.trigger(CHANGE, {});\n                  }\n                }\n              };\n            },\n            prefetch: function (skip, take, callback) {\n              var that = this,\n                  size = math.min(skip + take, that.total()),\n                  options = {\n                take: take,\n                skip: skip,\n                page: skip / take + 1,\n                pageSize: take,\n                sort: that._sort,\n                filter: that._filter,\n                group: that._group,\n                aggregate: that._aggregate\n              };\n\n              if (that._isGroupPaged() && !that._isServerGrouped() && that._groupRangeExists(skip, size)) {\n                if (callback) {\n                  callback();\n                }\n\n                return;\n              }\n\n              if (that._isServerGroupPaged() && !that._groupRangeExists(skip, size) || !that._rangeExists(skip, size)) {\n                clearTimeout(that._timeout);\n                that._timeout = setTimeout(function () {\n                  that._queueRequest(options, function () {\n                    if (!that.trigger(REQUESTSTART, {\n                      type: \"read\"\n                    })) {\n                      if (that._omitPrefetch) {\n                        that.trigger(PROGRESS);\n                      }\n\n                      that.transport.read({\n                        data: that._params(options),\n                        success: that._prefetchSuccessHandler(skip, size, callback),\n                        error: function () {\n                          var args = slice.call(arguments);\n                          that.error.apply(that, args);\n                        }\n                      });\n                    } else {\n                      that._dequeueRequest();\n                    }\n                  });\n                }, 100);\n              } else if (callback) {\n                callback();\n              }\n            },\n            _multiplePrefetch: function (skip, take, callback) {\n              var that = this,\n                  size = math.min(skip + take, that.total()),\n                  options = {\n                take: take,\n                skip: skip,\n                page: skip / take + 1,\n                pageSize: take,\n                sort: that._sort,\n                filter: that._filter,\n                group: that._group,\n                aggregate: that._aggregate\n              };\n\n              if (!that._rangeExists(skip, size)) {\n                if (!that.trigger(REQUESTSTART, {\n                  type: \"read\"\n                })) {\n                  that.transport.read({\n                    data: that._params(options),\n                    success: that._prefetchSuccessHandler(skip, size, callback, true)\n                  });\n                }\n              } else if (callback) {\n                callback();\n              }\n            },\n            _adjustPageSkip: function (start, take) {\n              var that = this;\n\n              var prevRange = that._getPrevRange(start);\n\n              var result;\n              var total = that.total();\n              var mismatch;\n\n              if (prevRange) {\n                mismatch = that._getRangesMismatch(start);\n\n                if (!mismatch) {\n                  return start;\n                }\n\n                start -= mismatch;\n              }\n\n              result = math.max(math.floor(start / take), 0) * take;\n\n              if (result > total) {\n                while (true) {\n                  result -= take;\n\n                  if (result < total) {\n                    break;\n                  }\n                }\n              }\n\n              return result;\n            },\n            _getNextRange: function (end) {\n              var that = this,\n                  ranges = that._ranges,\n                  idx,\n                  length;\n\n              for (idx = 0, length = ranges.length; idx < length; idx++) {\n                if (ranges[idx].start <= end && ranges[idx].end >= end) {\n                  return ranges[idx];\n                }\n              }\n            },\n            _getPrevRange: function (start) {\n              var that = this,\n                  ranges = that._ranges,\n                  idx,\n                  range,\n                  length = ranges.length;\n\n              for (idx = length - 1; idx >= 0; idx--) {\n                if (ranges[idx].outerStart <= start) {\n                  range = ranges[idx];\n                  break;\n                }\n              }\n\n              return range;\n            },\n            _rangeExists: function (start, end) {\n              var that = this,\n                  ranges = that._ranges,\n                  idx,\n                  length;\n\n              for (idx = 0, length = ranges.length; idx < length; idx++) {\n                if (ranges[idx].start <= start && ranges[idx].end >= end) {\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            _groupRangeExists: function (start, end) {\n              var that = this,\n                  ranges = that._ranges,\n                  idx,\n                  length,\n                  availableItemsCount = 0,\n                  total = that.groupsTotal(true);\n\n              if (end > total && !that._isServerGrouped()) {\n                end = total;\n              }\n\n              for (idx = 0, length = ranges.length; idx < length; idx++) {\n                var range = ranges[idx];\n\n                if (range.outerStart <= start && range.outerEnd >= start) {\n                  availableItemsCount += range.outerEnd - start;\n                } else if (range.outerStart <= end && range.outerEnd >= end) {\n                  availableItemsCount += end - range.outerStart;\n                }\n              }\n\n              return availableItemsCount >= end - start;\n            },\n            _getCurrentRangeSpan: function () {\n              var that = this;\n              var ranges = that._ranges;\n              var start = that.currentRangeStart();\n              var end = start + (that.take() || 0);\n              var rangeSpan = [];\n              var range;\n              var idx;\n              var length = ranges.length;\n\n              for (idx = 0; idx < length; idx++) {\n                range = ranges[idx];\n\n                if (range.start <= start && range.end >= start || range.start >= start && range.start <= end) {\n                  rangeSpan.push(range);\n                }\n              }\n\n              return rangeSpan;\n            },\n            _removeModelFromRanges: function (model) {\n              var that = this;\n              var range;\n\n              for (var idx = 0, length = this._ranges.length; idx < length; idx++) {\n                range = this._ranges[idx];\n\n                that._removeModelFromRange(range, model);\n              }\n\n              that._updateRangesLength();\n            },\n            _removeModelFromRange: function (range, model) {\n              this._eachItem(range.data, function (data) {\n                if (!data) {\n                  return;\n                }\n\n                for (var idx = 0; idx < data.length; idx++) {\n                  var dataItem = data[idx];\n\n                  if (dataItem.uid && dataItem.uid == model.uid) {\n                    [].splice.call(data, idx, 1);\n                    break;\n                  }\n                }\n              });\n            },\n            _insertModelInRange: function (index, model) {\n              var that = this;\n              var ranges = that._ranges || [];\n              var rangesLength = ranges.length;\n              var range;\n              var i;\n\n              for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n\n                if (range.start <= index && range.end >= index) {\n                  if (!that._getByUid(model.uid, range.data)) {\n                    if (that._isServerGrouped()) {\n                      range.data.splice(index, 0, that._wrapInEmptyGroup(model));\n                    } else {\n                      range.data.splice(index, 0, model);\n                    }\n                  }\n\n                  break;\n                }\n              }\n\n              that._updateRangesLength();\n            },\n            _updateRangesLength: function () {\n              var that = this;\n              var ranges = that._ranges || [];\n              var rangesLength = ranges.length;\n              var mismatchFound = false;\n              var mismatchLength = 0;\n              var lengthDifference = 0;\n              var rangeLength;\n              var range;\n              var i;\n\n              for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                rangeLength = that._isGroupPaged() ? range.data.length : that._flatData(range.data, true).length;\n                lengthDifference = rangeLength - math.abs(range.end - range.start);\n\n                if (!mismatchFound && lengthDifference !== 0) {\n                  mismatchFound = true;\n                  mismatchLength = lengthDifference;\n                  range.end += mismatchLength;\n                  continue;\n                }\n\n                if (mismatchFound) {\n                  range.start += mismatchLength;\n                  range.end += mismatchLength;\n                }\n              }\n            },\n            _updateOuterRangesLength: function () {\n              var that = this;\n              var ranges = that._ranges || [];\n              var rangesLength = ranges.length;\n              var mismatchLength = 0;\n              var range;\n              var i;\n              var prevRange;\n              var rangeLength;\n\n              for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                rangeLength = that._isGroupPaged() ? that._calculateGroupsTotal(range.data, true, \"items\", true) : that._flatData(range.data, true).length;\n\n                if (prevRange) {\n                  if (prevRange.end != range.start) {\n                    mismatchLength = range.start - prevRange.end;\n                  }\n\n                  range.outerStart = prevRange.outerEnd + mismatchLength;\n                  mismatchLength = 0;\n                } else {\n                  range.outerStart = range.start;\n                }\n\n                range.outerEnd = range.outerStart + rangeLength;\n                prevRange = range;\n              }\n            }\n          });\n          var Transport = {};\n\n          Transport.create = function (options, data, dataSource) {\n            var transport,\n                transportOptions = options.transport ? $.extend({}, options.transport) : null;\n\n            if (transportOptions) {\n              transportOptions.read = typeof transportOptions.read === STRING ? {\n                url: transportOptions.read\n              } : transportOptions.read;\n\n              if (options.type === \"jsdo\") {\n                transportOptions.dataSource = dataSource;\n              }\n\n              if (options.type) {\n                kendo.data.transports = kendo.data.transports || {};\n                kendo.data.schemas = kendo.data.schemas || {};\n\n                if (!kendo.data.transports[options.type]) {\n                  kendo.logToConsole(\"Unknown DataSource transport type '\" + options.type + \"'.\\nVerify that registration scripts for this type are included after Kendo UI on the page.\", \"warn\");\n                } else if (!isPlainObject(kendo.data.transports[options.type])) {\n                  transport = new kendo.data.transports[options.type](extend(transportOptions, {\n                    data: data\n                  }));\n                } else {\n                  transportOptions = extend(true, {}, kendo.data.transports[options.type], transportOptions);\n                }\n\n                options.schema = extend(true, {}, kendo.data.schemas[options.type], options.schema);\n              }\n\n              if (!transport) {\n                transport = isFunction(transportOptions.read) ? transportOptions : new RemoteTransport(transportOptions);\n              }\n            } else {\n              transport = new LocalTransport({\n                data: options.data || []\n              });\n            }\n\n            return transport;\n          };\n\n          DataSource.create = function (options) {\n            if (isArray(options) || options instanceof ObservableArray) {\n              options = {\n                data: options\n              };\n            }\n\n            var dataSource = options || {},\n                data = dataSource.data,\n                fields = dataSource.fields,\n                table = dataSource.table,\n                select = dataSource.select,\n                idx,\n                length,\n                model = {},\n                field;\n\n            if (!data && fields && !dataSource.transport) {\n              if (table) {\n                data = inferTable(table, fields);\n              } else if (select) {\n                data = inferSelect(select, fields);\n\n                if (dataSource.group === undefined && data[0] && data[0].optgroup !== undefined) {\n                  dataSource.group = \"optgroup\";\n                }\n              }\n            }\n\n            if (kendo.data.Model && fields && (!dataSource.schema || !dataSource.schema.model)) {\n              for (idx = 0, length = fields.length; idx < length; idx++) {\n                field = fields[idx];\n\n                if (field.type) {\n                  model[field.field] = field;\n                }\n              }\n\n              if (!isEmptyObject(model)) {\n                dataSource.schema = extend(true, dataSource.schema, {\n                  model: {\n                    fields: model\n                  }\n                });\n              }\n            }\n\n            dataSource.data = data;\n            select = null;\n            dataSource.select = null;\n            table = null;\n            dataSource.table = null;\n            return dataSource instanceof DataSource ? dataSource : new DataSource(dataSource);\n          };\n\n          function inferSelect(select, fields) {\n            select = $(select)[0];\n            var options = select.options;\n            var firstField = fields[0];\n            var secondField = fields[1];\n            var data = [];\n            var idx, length;\n            var optgroup;\n            var option;\n            var record;\n            var value;\n\n            for (idx = 0, length = options.length; idx < length; idx++) {\n              record = {};\n              option = options[idx];\n              optgroup = option.parentNode;\n\n              if (optgroup === select) {\n                optgroup = null;\n              }\n\n              if (option.disabled || optgroup && optgroup.disabled) {\n                continue;\n              }\n\n              if (optgroup) {\n                record.optgroup = optgroup.label;\n              }\n\n              record[firstField.field] = option.text;\n              value = option.attributes.value;\n\n              if (value && value.specified) {\n                value = option.value;\n              } else {\n                value = option.text;\n              }\n\n              record[secondField.field] = value;\n              data.push(record);\n            }\n\n            return data;\n          }\n\n          function inferTable(table, fields) {\n            var tbody = $(table)[0].tBodies[0],\n                rows = tbody ? tbody.rows : [],\n                idx,\n                length,\n                fieldIndex,\n                fieldCount = fields.length,\n                data = [],\n                cells,\n                record,\n                cell,\n                empty;\n\n            for (idx = 0, length = rows.length; idx < length; idx++) {\n              record = {};\n              empty = true;\n              cells = rows[idx].cells;\n\n              for (fieldIndex = 0; fieldIndex < fieldCount; fieldIndex++) {\n                cell = cells[fieldIndex];\n\n                if (cell.nodeName.toLowerCase() !== \"th\") {\n                  empty = false;\n                  record[fields[fieldIndex].field] = cell.innerHTML;\n                }\n              }\n\n              if (!empty) {\n                data.push(record);\n              }\n            }\n\n            return data;\n          }\n\n          var Node = Model.define({\n            idField: \"id\",\n            init: function (value) {\n              var that = this,\n                  hasChildren = that.hasChildren || value && value.hasChildren,\n                  childrenField = \"items\",\n                  childrenOptions = {};\n              kendo.data.Model.fn.init.call(that, value);\n\n              if (typeof that.children === STRING) {\n                childrenField = that.children;\n              }\n\n              childrenOptions = {\n                schema: {\n                  data: childrenField,\n                  model: {\n                    hasChildren: hasChildren,\n                    id: that.idField,\n                    fields: that.fields\n                  }\n                }\n              };\n\n              if (typeof that.children !== STRING) {\n                extend(childrenOptions, that.children);\n              }\n\n              childrenOptions.data = value;\n\n              if (!hasChildren) {\n                hasChildren = childrenOptions.schema.data;\n              }\n\n              if (typeof hasChildren === STRING) {\n                hasChildren = kendo.getter(hasChildren);\n              }\n\n              if (isFunction(hasChildren)) {\n                var hasChildrenObject = hasChildren.call(that, that);\n\n                if (hasChildrenObject && hasChildrenObject.length === 0) {\n                  that.hasChildren = false;\n                } else {\n                  that.hasChildren = !!hasChildrenObject;\n                }\n              }\n\n              that._childrenOptions = childrenOptions;\n\n              if (that.hasChildren) {\n                that._initChildren();\n              }\n\n              that._loaded = !!(value && value._loaded);\n            },\n            _initChildren: function () {\n              var that = this;\n              var children, transport, parameterMap;\n\n              if (!(that.children instanceof HierarchicalDataSource)) {\n                children = that.children = new HierarchicalDataSource(that._childrenOptions);\n                transport = children.transport;\n                parameterMap = transport.parameterMap;\n\n                transport.parameterMap = function (data, type) {\n                  data[that.idField || \"id\"] = that.id;\n\n                  if (parameterMap) {\n                    data = parameterMap.call(that, data, type);\n                  }\n\n                  return data;\n                };\n\n                children.parent = function () {\n                  return that;\n                };\n\n                children.bind(CHANGE, function (e) {\n                  e.node = e.node || that;\n                  that.trigger(CHANGE, e);\n                });\n                children.bind(ERROR, function (e) {\n                  var collection = that.parent();\n\n                  if (collection) {\n                    e.node = e.node || that;\n                    collection.trigger(ERROR, e);\n                  }\n                });\n                children.bind(ITEMSLOADED, function (e) {\n                  var collection = that.parent();\n\n                  if (collection) {\n                    collection.trigger(ITEMSLOADED, e);\n                  }\n                });\n\n                that._updateChildrenField();\n              }\n            },\n            append: function (model) {\n              this._initChildren();\n\n              this.loaded(true);\n              this.children.add(model);\n            },\n            hasChildren: false,\n            level: function () {\n              var parentNode = this.parentNode(),\n                  level = 0;\n\n              while (parentNode && parentNode.parentNode) {\n                level++;\n                parentNode = parentNode.parentNode ? parentNode.parentNode() : null;\n              }\n\n              return level;\n            },\n            _updateChildrenField: function () {\n              var fieldName = this._childrenOptions.schema.data;\n              this[fieldName || \"items\"] = this.children.data();\n            },\n            _childrenLoaded: function () {\n              this._loaded = true;\n\n              this._updateChildrenField();\n            },\n            load: function () {\n              var options = {};\n              var method = \"_query\";\n              var children, promise;\n\n              if (this.hasChildren) {\n                this._initChildren();\n\n                children = this.children;\n                options[this.idField || \"id\"] = this.id;\n\n                if (!this._loaded) {\n                  children._data = undefined;\n                  method = \"read\";\n                }\n\n                children.one(CHANGE, this._childrenLoaded.bind(this));\n\n                if (this._matchFilter) {\n                  options.filter = {\n                    field: '_matchFilter',\n                    operator: 'eq',\n                    value: true\n                  };\n                }\n\n                promise = children[method](options);\n\n                if (!this._loaded) {\n                  this.trigger(ITEMLOAD, {\n                    promise: promise,\n                    node: this\n                  });\n                }\n              } else {\n                this.loaded(true);\n              }\n\n              return promise || $.Deferred().resolve().promise();\n            },\n            parentNode: function () {\n              var array = this.parent();\n              return array.parent();\n            },\n            loaded: function (value) {\n              if (value !== undefined) {\n                this._loaded = value;\n              } else {\n                return this._loaded;\n              }\n            },\n            shouldSerialize: function (field) {\n              return Model.fn.shouldSerialize.call(this, field) && field !== \"children\" && field !== \"_loaded\" && field !== \"hasChildren\" && field !== \"_childrenOptions\";\n            }\n          });\n\n          function dataMethod(name) {\n            return function () {\n              var data = this._data,\n                  result = DataSource.fn[name].apply(this, slice.call(arguments));\n\n              if (this._data != data) {\n                this._attachBubbleHandlers();\n              }\n\n              return result;\n            };\n          }\n\n          var HierarchicalDataSource = DataSource.extend({\n            init: function (options) {\n              var node = Node.define({\n                children: options\n              });\n\n              if (options.filter && !options.serverFiltering) {\n                this._hierarchicalFilter = options.filter;\n                options.filter = null;\n              }\n\n              DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                  modelBase: node,\n                  model: node\n                }\n              }, options));\n\n              this._attachBubbleHandlers();\n            },\n            _attachBubbleHandlers: function () {\n              var that = this;\n\n              that._data.bind(ERROR, function (e) {\n                that.trigger(ERROR, e);\n              });\n\n              that._data.bind(ITEMSLOADED, function (e) {\n                that.trigger(ITEMSLOADED, e);\n              });\n            },\n            loading: function () {\n              if (this._data) {\n                return this._data.loading() || this._childrenLoading();\n              }\n\n              return false;\n            },\n            _childrenLoading: function () {\n              var isLoading = false;\n\n              this._data.forEach(function (node) {\n                if (node.hasChildren && node.children.loading()) {\n                  isLoading = true;\n                }\n              });\n\n              return isLoading;\n            },\n            read: function (data) {\n              var result = DataSource.fn.read.call(this, data);\n\n              if (this._hierarchicalFilter) {\n                if (this._data && this._data.length > 0) {\n                  this.filter(this._hierarchicalFilter);\n                } else {\n                  this.options.filter = this._hierarchicalFilter;\n                  this._filter = normalizeFilter(this.options.filter);\n                  this._hierarchicalFilter = null;\n                }\n              }\n\n              return result;\n            },\n            remove: function (node) {\n              var parentNode = node.parentNode(),\n                  dataSource = this,\n                  result;\n\n              if (parentNode && parentNode._initChildren) {\n                dataSource = parentNode.children;\n              }\n\n              result = DataSource.fn.remove.call(dataSource, node);\n\n              if (parentNode && !dataSource.data().length) {\n                parentNode.hasChildren = false;\n              }\n\n              return result;\n            },\n            success: dataMethod(\"success\"),\n            data: dataMethod(\"data\"),\n            insert: function (index, model) {\n              var parentNode = this.parent();\n\n              if (parentNode && parentNode._initChildren) {\n                parentNode.hasChildren = true;\n\n                parentNode._initChildren();\n              }\n\n              return DataSource.fn.insert.call(this, index, model);\n            },\n            filter: function (val) {\n              if (val === undefined) {\n                return this._filter;\n              }\n\n              if (!this.options.serverFiltering && this._markHierarchicalQuery(val)) {\n                val = {\n                  logic: \"or\",\n                  filters: [val, {\n                    field: '_matchFilter',\n                    operator: 'equals',\n                    value: true\n                  }]\n                };\n              }\n\n              this.trigger(\"reset\");\n\n              this._query({\n                filter: val,\n                page: 1\n              });\n            },\n            _markHierarchicalQuery: function (expressions) {\n              var compiled;\n              var predicate;\n              var fields;\n              var operators;\n              var filter;\n              var accentFoldingFiltering = this.options.accentFoldingFiltering;\n              expressions = accentFoldingFiltering ? $.extend({}, normalizeFilter(expressions), {\n                accentFoldingFiltering: accentFoldingFiltering\n              }) : normalizeFilter(expressions);\n\n              if (!expressions || expressions.filters.length === 0) {\n                this._updateHierarchicalFilter(function () {\n                  return true;\n                });\n\n                return false;\n              }\n\n              compiled = Query.filterExpr(expressions);\n              fields = compiled.fields;\n              operators = compiled.operators;\n              predicate = filter = new Function(\"d, __f, __o\", \"return \" + compiled.expression);\n\n              if (fields.length || operators.length) {\n                filter = function (d) {\n                  return predicate(d, fields, operators);\n                };\n              }\n\n              this._updateHierarchicalFilter(filter);\n\n              return true;\n            },\n            _updateHierarchicalFilter: function (filter) {\n              var current;\n              var data = this._data;\n              var result = false;\n\n              for (var idx = 0; idx < data.length; idx++) {\n                current = data[idx];\n\n                if (current.hasChildren) {\n                  current._matchFilter = current.children._updateHierarchicalFilter(filter);\n\n                  if (!current._matchFilter) {\n                    current._matchFilter = filter(current);\n                  }\n                } else {\n                  current._matchFilter = filter(current);\n                }\n\n                if (current._matchFilter) {\n                  result = true;\n                }\n              }\n\n              return result;\n            },\n            _find: function (method, value) {\n              var idx, length, node, children;\n              var data = this._data;\n\n              if (!data) {\n                return;\n              }\n\n              node = DataSource.fn[method].call(this, value);\n\n              if (node) {\n                return node;\n              }\n\n              data = this._flatData(this._data);\n\n              for (idx = 0, length = data.length; idx < length; idx++) {\n                children = data[idx].children;\n\n                if (!(children instanceof HierarchicalDataSource)) {\n                  continue;\n                }\n\n                node = children[method](value);\n\n                if (node) {\n                  return node;\n                }\n              }\n            },\n            get: function (id) {\n              return this._find(\"get\", id);\n            },\n            getByUid: function (uid) {\n              return this._find(\"getByUid\", uid);\n            }\n          });\n\n          function inferList(list, fields) {\n            var items = $(list).children(),\n                idx,\n                length,\n                data = [],\n                record,\n                textField = fields[0].field,\n                urlField = fields[1] && fields[1].field,\n                spriteCssClassField = fields[2] && fields[2].field,\n                imageUrlField = fields[3] && fields[3].field,\n                item,\n                id,\n                textChild,\n                className,\n                children;\n\n            function elements(collection, tagName) {\n              return collection.filter(tagName).add(collection.find(tagName));\n            }\n\n            for (idx = 0, length = items.length; idx < length; idx++) {\n              record = {\n                _loaded: true\n              };\n              item = items.eq(idx);\n              textChild = item[0].firstChild;\n              children = item.children();\n              list = children.filter(\"ul\");\n              children = children.filter(\":not(ul)\");\n              id = item.attr(\"data-id\");\n\n              if (id) {\n                record.id = id;\n              }\n\n              if (textChild) {\n                record[textField] = textChild.nodeType == 3 ? textChild.nodeValue : children.text();\n              }\n\n              if (urlField) {\n                record[urlField] = elements(children, \"a\").attr(\"href\");\n              }\n\n              if (imageUrlField) {\n                record[imageUrlField] = elements(children, \"img\").attr(\"src\");\n              }\n\n              if (spriteCssClassField) {\n                className = elements(children, \".k-sprite\").prop(\"className\");\n                record[spriteCssClassField] = className && kendo.trim(className.replace(\"k-sprite\", \"\"));\n              }\n\n              if (list.length) {\n                record.items = inferList(list.eq(0), fields);\n              }\n\n              if (item.attr(\"data-hasChildren\") == \"true\") {\n                record.hasChildren = true;\n              }\n\n              data.push(record);\n            }\n\n            return data;\n          }\n\n          HierarchicalDataSource.create = function (options) {\n            options = options && options.push ? {\n              data: options\n            } : options;\n            var dataSource = options || {},\n                data = dataSource.data,\n                fields = dataSource.fields,\n                list = dataSource.list;\n\n            if (data && data._dataSource) {\n              return data._dataSource;\n            }\n\n            if (!data && fields && !dataSource.transport) {\n              if (list) {\n                data = inferList(list, fields);\n              }\n            }\n\n            dataSource.data = data;\n            return dataSource instanceof HierarchicalDataSource ? dataSource : new HierarchicalDataSource(dataSource);\n          };\n\n          var Buffer = kendo.Observable.extend({\n            init: function (dataSource, viewSize, disablePrefetch) {\n              kendo.Observable.fn.init.call(this);\n              this._prefetching = false;\n              this.dataSource = dataSource;\n              this.prefetch = !disablePrefetch;\n              var buffer = this;\n              dataSource.bind(\"change\", function () {\n                buffer._change();\n              });\n              dataSource.bind(\"reset\", function () {\n                buffer._reset();\n              });\n\n              this._syncWithDataSource();\n\n              this.setViewSize(viewSize);\n            },\n            setViewSize: function (viewSize) {\n              this.viewSize = viewSize;\n\n              this._recalculate();\n            },\n            at: function (index) {\n              var pageSize = this.pageSize,\n                  itemPresent = true;\n\n              if (index >= this.total()) {\n                this.trigger(\"endreached\", {\n                  index: index\n                });\n                return null;\n              }\n\n              if (!this.useRanges) {\n                return this.dataSource.view()[index];\n              }\n\n              if (this.useRanges) {\n                // out of range request\n                if (index < this.dataOffset || index >= this.skip + pageSize) {\n                  itemPresent = this.range(Math.floor(index / pageSize) * pageSize);\n                } // prefetch\n\n\n                if (index === this.prefetchThreshold) {\n                  this._prefetch();\n                } // mid-range jump - prefetchThreshold and nextPageThreshold may be equal, do not change to else if\n\n\n                if (index === this.midPageThreshold) {\n                  this.range(this.nextMidRange, true);\n                } // next range jump\n                else if (index === this.nextPageThreshold) {\n                  this.range(this.nextFullRange);\n                } // pull-back\n                else if (index === this.pullBackThreshold) {\n                  if (this.offset === this.skip) {\n                    // from full range to mid range\n                    this.range(this.previousMidRange);\n                  } else {\n                    // from mid range to full range\n                    this.range(this.previousFullRange);\n                  }\n                }\n\n                if (itemPresent) {\n                  return this.dataSource.at(index - this.dataOffset);\n                } else {\n                  this.trigger(\"endreached\", {\n                    index: index\n                  });\n                  return null;\n                }\n              }\n            },\n            indexOf: function (item) {\n              return this.dataSource.data().indexOf(item) + this.dataOffset;\n            },\n            total: function () {\n              return parseInt(this.dataSource.total(), 10);\n            },\n            next: function () {\n              var buffer = this,\n                  pageSize = buffer.pageSize,\n                  offset = buffer.skip - buffer.viewSize + pageSize,\n                  pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize;\n              this.offset = offset;\n              this.dataSource.prefetch(pageSkip, pageSize, function () {\n                buffer._goToRange(offset, true);\n              });\n            },\n            range: function (offset, nextRange) {\n              if (this.offset === offset) {\n                return true;\n              }\n\n              var buffer = this,\n                  pageSize = this.pageSize,\n                  pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize,\n                  dataSource = this.dataSource;\n\n              if (nextRange) {\n                pageSkip += pageSize;\n              }\n\n              if (dataSource.inRange(offset, pageSize)) {\n                this.offset = offset;\n\n                this._recalculate();\n\n                this._goToRange(offset);\n\n                return true;\n              } else if (this.prefetch) {\n                dataSource.prefetch(pageSkip, pageSize, function () {\n                  buffer.offset = offset;\n\n                  buffer._recalculate();\n\n                  buffer._goToRange(offset, true);\n                });\n                return false;\n              }\n\n              return true;\n            },\n            syncDataSource: function () {\n              var offset = this.offset;\n              this.offset = null;\n              this.range(offset);\n            },\n            destroy: function () {\n              this.unbind();\n            },\n            _prefetch: function () {\n              var buffer = this,\n                  pageSize = this.pageSize,\n                  prefetchOffset = this.skip + pageSize,\n                  dataSource = this.dataSource;\n\n              if (!dataSource.inRange(prefetchOffset, pageSize) && !this._prefetching && this.prefetch) {\n                this._prefetching = true;\n                this.trigger(\"prefetching\", {\n                  skip: prefetchOffset,\n                  take: pageSize\n                });\n                dataSource.prefetch(prefetchOffset, pageSize, function () {\n                  buffer._prefetching = false;\n                  buffer.trigger(\"prefetched\", {\n                    skip: prefetchOffset,\n                    take: pageSize\n                  });\n                });\n              }\n            },\n            _goToRange: function (offset, expanding) {\n              if (this.offset !== offset) {\n                return;\n              }\n\n              this.dataOffset = offset;\n              this._expanding = expanding;\n              this.dataSource.range(offset, this.pageSize);\n              this.dataSource.enableRequestsInProgress();\n            },\n            _reset: function () {\n              this._syncPending = true;\n            },\n            _change: function () {\n              var dataSource = this.dataSource;\n              this.length = this.useRanges ? dataSource.lastRange().end : dataSource.view().length;\n\n              if (this._syncPending) {\n                this._syncWithDataSource();\n\n                this._recalculate();\n\n                this._syncPending = false;\n                this.trigger(\"reset\", {\n                  offset: this.offset\n                });\n              }\n\n              this.trigger(\"resize\");\n\n              if (this._expanding) {\n                this.trigger(\"expand\");\n              }\n\n              delete this._expanding;\n            },\n            _syncWithDataSource: function () {\n              var dataSource = this.dataSource;\n              this._firstItemUid = dataSource.firstItemUid();\n              this.dataOffset = this.offset = dataSource.skip() || 0;\n              this.pageSize = dataSource.pageSize();\n              this.useRanges = dataSource.options.serverPaging;\n            },\n            _recalculate: function () {\n              var pageSize = this.pageSize,\n                  offset = this.offset,\n                  viewSize = this.viewSize,\n                  skip = Math.ceil(offset / pageSize) * pageSize;\n              this.skip = skip;\n              this.midPageThreshold = skip + pageSize - 1;\n              this.nextPageThreshold = skip + viewSize - 1;\n              this.prefetchThreshold = skip + Math.floor(pageSize / 3 * 2);\n              this.pullBackThreshold = this.offset - 1;\n              this.nextMidRange = skip + pageSize - viewSize;\n              this.nextFullRange = skip;\n              this.previousMidRange = offset - viewSize;\n              this.previousFullRange = skip - pageSize;\n            }\n          });\n          var BatchBuffer = kendo.Observable.extend({\n            init: function (dataSource, batchSize) {\n              var batchBuffer = this;\n              kendo.Observable.fn.init.call(batchBuffer);\n              this.dataSource = dataSource;\n              this.batchSize = batchSize;\n              this._total = 0;\n              this.buffer = new Buffer(dataSource, batchSize * 3);\n              this.buffer.bind({\n                \"endreached\": function (e) {\n                  batchBuffer.trigger(\"endreached\", {\n                    index: e.index\n                  });\n                },\n                \"prefetching\": function (e) {\n                  batchBuffer.trigger(\"prefetching\", {\n                    skip: e.skip,\n                    take: e.take\n                  });\n                },\n                \"prefetched\": function (e) {\n                  batchBuffer.trigger(\"prefetched\", {\n                    skip: e.skip,\n                    take: e.take\n                  });\n                },\n                \"reset\": function () {\n                  batchBuffer._total = 0;\n                  batchBuffer.trigger(\"reset\");\n                },\n                \"resize\": function () {\n                  batchBuffer._total = Math.ceil(this.length / batchBuffer.batchSize);\n                  batchBuffer.trigger(\"resize\", {\n                    total: batchBuffer.total(),\n                    offset: this.offset\n                  });\n                }\n              });\n            },\n            syncDataSource: function () {\n              this.buffer.syncDataSource();\n            },\n            at: function (index) {\n              var buffer = this.buffer,\n                  skip = index * this.batchSize,\n                  take = this.batchSize,\n                  view = [],\n                  item;\n\n              if (buffer.offset > skip) {\n                buffer.at(buffer.offset - 1);\n              }\n\n              for (var i = 0; i < take; i++) {\n                item = buffer.at(skip + i);\n\n                if (item === null) {\n                  break;\n                }\n\n                view.push(item);\n              }\n\n              return view;\n            },\n            total: function () {\n              return this._total;\n            },\n            destroy: function () {\n              this.buffer.destroy();\n              this.unbind();\n            }\n          });\n          extend(true, kendo.data, {\n            readers: {\n              json: DataReader\n            },\n            Query: Query,\n            DataSource: DataSource,\n            HierarchicalDataSource: HierarchicalDataSource,\n            Node: Node,\n            Comparer: Comparer,\n            ObservableObject: ObservableObject,\n            ObservableArray: ObservableArray,\n            LazyObservableArray: LazyObservableArray,\n            LocalTransport: LocalTransport,\n            RemoteTransport: RemoteTransport,\n            Cache: Cache,\n            DataReader: DataReader,\n            Model: Model,\n            Buffer: Buffer,\n            BatchBuffer: BatchBuffer\n          });\n        })(window.kendo.jQuery);\n\n        return window.kendo;\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    57949:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.core\");\n      /***/\n    },\n\n    /***/\n    14458:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.data.odata\");\n      /***/\n    },\n\n    /***/\n    74560:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.data.xml\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(57100);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","__meta__","id","name","category","description","depends","features","$","extend","isPlainObject","isEmptyObject","isArray","Array","grep","ajax","map","each","noop","kendo","window","isFunction","Observable","Class","STRING","FUNCTION","ASCENDING","CREATE","READ","UPDATE","DESTROY","CHANGE","SYNC","GET","ERROR","REQUESTSTART","PROGRESS","REQUESTEND","ITEMSLOADED","ITEMLOAD","crud","identity","o","getter","stringify","math","Math","push","join","pop","splice","shift","slice","unshift","toString","stableSort","support","dateRegExp","objectKeys","ObservableArray","init","array","type","that","ObservableObject","fn","call","length","wrapAll","_loadPromises","_loadedNodes","at","index","toJSON","serializeFunctions","idx","value","json","parent","source","target","wrap","object","observable","Model","bind","e","isGroup","hasOwnProperty","trigger","field","node","items","action","promise","_loading","done","indexOf","collection","nodes","loading","arguments","result","omitChangeEvent","sort","howMany","item","i","len","concat","children","unbind","forEach","callback","thisArg","context","reduce","reduceRight","filter","find","every","some","remove","empty","Symbol","iterator","prototype","LazyObservableArray","data","events","parentFn","_events","_parent","eventHandler","prefix","event","key","_notifyChange","isPrimitiveType","Object","getPrototypeOf","Date","ownKeys","ignoreObjectKeys","props","protoKeys","keys","filteredObjectKeys","getOwnPropertyNames","prop","member","_handlers","getTime","charAt","uid","guid","shouldSerialize","get","_set","composite","paths","split","path","obj","set","setter","isSetPrevented","current","change","isObservableArray","isDataSource","DataSource","equal","x","y","xtype","ytype","parsers","toLowerCase","parseFloat","parseDate","defaultValues","getFieldByName","fieldName","defaults","_initializers","dirty","dirtyFields","idField","_defaultId","_parse","fields","parse","editable","accept","isNew","base","options","model","proto","originalName","functionFields","nullable","defaultValue","Comparer","selector","compare","a","b","localeCompare","create","dir","combine","comparers","StableComparer","asc","valueA","valueB","__position","desc","operators","quote","str","replace","JSON","textOp","impl","ignore","accentFoldingFiltering","toLocaleLowerCase","operator","op","date","exec","getMatchRegexp","pattern","rx","esc","ch","eq","neq","gt","gte","lt","lte","startswith","doesnotstartwith","endswith","n","doesnotendwith","contains","doesnotcontain","matches","substring","doesnotmatch","isempty","isnotempty","isnull","isnotnull","isnullorempty","isnotnullorempty","Query","filterExpr","expression","expressions","logic","and","or","expr","fieldFunctions","operatorFunctions","filters","match","ignoreCase","normalizeSort","descriptor","descriptors","d","sortFields","sorts","sortObject","operatorMap","equals","isequalto","equalto","ne","notequals","isnotequalto","notequalto","notequal","islessthan","lessthan","less","le","islessthanorequalto","lessthanequal","isgreaterthan","greaterthan","greater","isgreaterthanorequalto","greaterthanequal","ge","notsubstringof","normalizeOperator","normalizeFilter","compareDescriptor","f1","f2","normalizeDescriptor","fieldComparer","compareFilters","expr1","expr2","filters1","filters2","normalizeAggregate","normalizeGroup","skipItemSorting","aggregates","normalizeGroupWithoutCompare","anyGroupDescriptorHasCompare","groupDescriptors","toArray","range","count","skip","take","select","order","inPlace","orderBy","orderByDescending","comparer","compiled","predicate","Function","group","allData","groupPaging","groupAllData","hasSubgroups","aggregate","itemCount","subgroupCount","groupBy","sorted","_sortForGrouping","accessor","groupValue","currentValue","groupValueComparer","_sortGroups","groups","state","calculateAggregate","accumulator","aggr","functionName","functions","sum","isNumber","average","max","isDate","min","val","isNaN","process","customGroupSort","query","groupDescriptorsWithoutCompare","normalizedSort","groupDescriptorsWithoutSort","total","filterCallback","flatGroups","groupDescriptor","virtual","LocalTransport","read","success","update","destroy","RemoteTransport","parameterMap","url","cache","Cache","add","submit","option","setup","error","parameters","operation","_store","clear","store","serializeRecords","getters","modelInstance","originalFieldNames","fieldNames","record","setters","convertRecords","convertGroup","wrapDataAccess","originalFunction","converter","wrapDataAccessBase","DataReader","schema","modelBase","dataFunction","_dataAccessFunction","groupsFunction","serializeFunction","serialize","serializeGetters","fromName","from","_wrapDataAccessBase","errors","fillLastGroup","originalGroup","newGroup","currOriginal","currentNew","mergeGroups","dest","indexFunction","groupsLength","indexFn","groupIndex","itemIndex","flattenGroups","wrapGroupItems","eachGroupItems","func","replaceInRanges","ranges","replaceInRange","replaceWithObservable","view","serverGrouping","viewIndex","removeModel","dataItem","indexOfPristineModel","indexOfModel","fieldNameFromModel","convertFilterDescriptorsField","convertDescriptorsField","_map","_prefetch","_data","_pristineData","_ranges","_view","_pristineTotal","_destroyed","_pageSize","pageSize","_page","page","_sort","_sortFields","_filter","_group","_aggregate","_total","_groupPaging","_groupsState","_shouldDetachObservableParents","transport","Transport","pushCreate","_pushCreate","pushUpdate","_pushUpdate","pushDestroy","_pushDestroy","offlineStorage","_storage","getItem","localStorage","setItem","reader","readers","_detachObservableParents","_observe","_online","serverSorting","serverPaging","serverFiltering","serverAggregates","batch","inPlaceSort","clone","online","sync","Deferred","resolve","offlineData","_isServerGrouped","_isServerGroupPaged","_isGroupPaged","_push","_readData","_flatData","useRanges","getByUid","_getByUid","dataItems","_storeData","_addRange","_process","_observeView","flatView","insert","_createNewModel","_wrapInEmptyGroup","_insertModelInRange","pushInsert","rangeSpan","_getCurrentRangeSpan","pushed","autoSync","pristine","last","pristineData","_updatePristineForModel","_removeItems","removePristine","shouldRemovePristine","destroyed","found","_eachItem","_removePristineForModel","pushMove","_moveItems","moved","hasGroups","_pushInDestroyed","_removeModelFromRanges","created","updated","promises","_sendSubmit","_send","when","then","_accept","_syncEnd","_change","cancelChanges","_cancelModel","_changesCanceled","_markOfflineUpdatesAsDirty","__state__","hasChanges","models","response","serverGroup","_handleCustomErrors","values","_executeOnPristineForModel","deepExtend","_eachPristineItem","_pristineForModel","_modelCanceled","_submit","status","reject","deferred","_promise","method","converted","params","_params","_queueRequest","isPrevented","args","_dequeueRequest","_readAggregates","replaceSubset","_serverGroupsTotal","_aggregateResult","itemIds","_skip","endless","j","_changeHandler","updatePristine","start","end","timestamp","_timeStamp","outerStart","outerEnd","_sortRanges","_groupsFlat","_appendToGroupsFlat","_updateOuterRangesLength","_getGroupByUid","xhr","errorThrown","_requestInProgress","_pending","_shouldWrap","arrayType","_updateTotalForAction","parseInt","isPushed","handler","first","_calculateAggregates","_take","currentRangeStart","_clearEmptyGroups","_queryProcess","resultData","modelIsInView","dataToAggregate","_setView","_setFilterTotal","_mergeState","_currentRangeStart","remote","moreItemsCount","_hasExpandedSubGroups","_findGroupedRange","parents","itemsLength","groupCount","itemsToSkip","taken","_fetchGroupItems","_fetchingGroupItems","skipped","includeParents","excludeHeader","currentItems","_expandedSubGroupItemsCount","includeCurrentItems","subGroup","endSpecified","temp","groupItemsSkip","firstItem","lastItem","groupItemCount","expandedSubGroupItemsCount","getGroupItems","notFetched","floor","round","subgroups","_composeItemsFilter","findSubgroups","clearTimeout","_timeout","setTimeout","_groupItemsSuccessHandler","totalField","totalCount","_updateRangePristineData","countAdded","_currentRequestTimeStamp","_skipRequestsInProgress","indexOfCurrentGroup","g","rangesLength","currentGroup","dataLength","indexes","currIdx","_containsSubGroup","_cloneGroup","subgroup","currentSubGroup","filterTotal","setDefaultValue","fetch","_query","next","totalPages","prev","_pageableQueryOptions","getGroupsFlat","groupsTotal","includeExpanded","_calculateGroupsTotal","itemsField","ignoreState","_groupsTotal","countGroupRange","_emptyAggregates","ceil","inRange","_findRange","lastRange","firstItemUid","enableRequestsInProgress","pageSkip","size","_processRangeData","_originalPageSkip","_originalSize","_adjustPageSkip","_groupRangeExists","_rangeExists","prefetch","skipIdx","takeIdx","startIndex","endIndex","rangeData","rangeEnd","processed","flatData","groupMapOptions","prevRangeEnd","isGroupPaged","startField","endField","currentDataLength","_mergeGroups","_getRangesMismatch","mismatch","prevGroup","eventData","_omitPrefetch","paging","sorting","filtering","_prefetchSuccessHandler","force","_multiplePrefetch","prevRange","_getPrevRange","_getNextRange","availableItemsCount","_removeModelFromRange","_updateRangesLength","mismatchFound","mismatchLength","lengthDifference","rangeLength","abs","dataSource","transportOptions","transports","schemas","logToConsole","table","inferTable","inferSelect","optgroup","firstField","secondField","parentNode","disabled","label","text","attributes","specified","tbody","tBodies","rows","fieldIndex","fieldCount","cells","cell","nodeName","innerHTML","Node","hasChildren","childrenField","childrenOptions","hasChildrenObject","_childrenOptions","_initChildren","_loaded","HierarchicalDataSource","_updateChildrenField","append","loaded","level","_childrenLoaded","load","one","_matchFilter","dataMethod","_attachBubbleHandlers","_hierarchicalFilter","_childrenLoading","isLoading","_markHierarchicalQuery","_updateHierarchicalFilter","_find","inferList","list","textField","urlField","spriteCssClassField","imageUrlField","textChild","className","elements","tagName","firstChild","attr","nodeType","nodeValue","trim","_dataSource","Buffer","viewSize","disablePrefetch","_prefetching","buffer","_reset","_syncWithDataSource","setViewSize","_recalculate","itemPresent","dataOffset","prefetchThreshold","midPageThreshold","nextMidRange","nextPageThreshold","nextFullRange","pullBackThreshold","offset","previousMidRange","previousFullRange","_goToRange","nextRange","syncDataSource","prefetchOffset","expanding","_expanding","_syncPending","_firstItemUid","BatchBuffer","batchSize","batchBuffer","jQuery","amdD","require","__webpack_module_cache__","moduleId","cachedModule","Error","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/vuejs/app-router/node_modules/@progress/kendo-ui/js/kendo.data.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 57100:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(57949), __webpack_require__(14458), __webpack_require__(74560) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\nvar __meta__ = {\n    id: \"data\",\n    name: \"Data source\",\n    category: \"framework\",\n    description: \"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.\",\n    depends: [ \"core\" ],\n    features: [ {\n        id: \"data-odata\",\n        name: \"OData\",\n        description: \"Support for accessing Open Data Protocol (OData) services.\",\n        depends: [ \"data.odata\" ]\n    }, {\n        id: \"data-signalr\",\n        name: \"SignalR\",\n        description: \"Support for binding to SignalR hubs.\",\n        depends: [ \"data.signalr\" ]\n    }, {\n        id: \"data-XML\",\n        name: \"XML\",\n        description: \"Support for binding to XML.\",\n        depends: [ \"data.xml\" ]\n    }]\n};\n\n\n(function($, undefined) {\n    var extend = $.extend,\n        isPlainObject = $.isPlainObject,\n        isEmptyObject = $.isEmptyObject,\n        isArray = Array.isArray,\n        grep = $.grep,\n        ajax = $.ajax,\n        map,\n        each = $.each,\n        noop = $.noop,\n        kendo = window.kendo,\n        isFunction = kendo.isFunction,\n        Observable = kendo.Observable,\n        Class = kendo.Class,\n        STRING = \"string\",\n        FUNCTION = \"function\",\n        ASCENDING = \"asc\",\n        CREATE = \"create\",\n        READ = \"read\",\n        UPDATE = \"update\",\n        DESTROY = \"destroy\",\n        CHANGE = \"change\",\n        SYNC = \"sync\",\n        GET = \"get\",\n        ERROR = \"error\",\n        REQUESTSTART = \"requestStart\",\n        PROGRESS = \"progress\",\n        REQUESTEND = \"requestEnd\",\n        ITEMSLOADED = \"itemsLoaded\",\n        ITEMLOAD = \"itemLoad\",\n        crud = [CREATE, READ, UPDATE, DESTROY],\n        identity = function(o) { return o; },\n        getter = kendo.getter,\n        stringify = kendo.stringify,\n        math = Math,\n        push = [].push,\n        join = [].join,\n        pop = [].pop,\n        splice = [].splice,\n        shift = [].shift,\n        slice = [].slice,\n        unshift = [].unshift,\n        toString = {}.toString,\n        stableSort = kendo.support.stableSort,\n        dateRegExp = /^\\/Date\\((.*?)\\)\\/$/,\n        objectKeys = [];\n\n    var ObservableArray = Observable.extend({\n        init: function(array, type) {\n            var that = this;\n\n            that.type = type || ObservableObject;\n\n            Observable.fn.init.call(that);\n\n            that.length = array.length;\n\n            that.wrapAll(array, that);\n            that._loadPromises = [];\n            that._loadedNodes = [];\n        },\n\n        at: function(index) {\n            return this[index];\n        },\n\n        toJSON: function(serializeFunctions) {\n            var idx, length = this.length, value, json = new Array(length);\n\n            for (idx = 0; idx < length; idx++) {\n                value = this[idx];\n\n                if (value instanceof ObservableObject) {\n                    value = value.toJSON(serializeFunctions);\n                }\n\n                json[idx] = value;\n            }\n\n            return json;\n        },\n\n        parent: noop,\n\n        wrapAll: function(source, target) {\n            var that = this,\n                idx,\n                length,\n                parent = function() {\n                    return that;\n                };\n\n            target = target || [];\n\n            for (idx = 0, length = source.length; idx < length; idx++) {\n                target[idx] = that.wrap(source[idx], parent);\n            }\n\n            return target;\n        },\n\n        wrap: function(object, parent) {\n            var that = this,\n                observable;\n\n            if (object !== null && toString.call(object) === \"[object Object]\") {\n                observable = object instanceof that.type || object instanceof Model;\n\n                if (!observable) {\n                    object = object instanceof ObservableObject ? object.toJSON() : object;\n                    object = new that.type(object);\n                }\n\n                object.parent = parent;\n\n                object.bind(CHANGE, function(e) {\n                    var isGroup = object.hasOwnProperty(\"hasSubgroups\");\n                    that.trigger(CHANGE, {\n                        field: e.field,\n                        node: e.node,\n                        index: e.index,\n                        items: e.items || [this],\n                        action: e.node || isGroup ? (e.action || \"itemloaded\") : \"itemchange\"\n                    });\n                });\n\n                object.bind(ITEMLOAD, function(e) {\n                    that._loadPromises.push(e.promise);\n                    that._loading = true;\n\n                    e.promise.done(function() {\n                        that._loadedNodes.push(e.node);\n                        var index = that._loadPromises.indexOf(e.promise);\n                        that._loadPromises.splice(index, 1);\n\n                        if (!that._loadPromises.length) {\n                            that._loading = false;\n                            that.trigger(ITEMSLOADED, { collection: that, nodes: that._loadedNodes });\n                            that._loadedNodes = [];\n                        }\n                    });\n                });\n            }\n\n            return object;\n        },\n\n        loading: function() {\n            return this._loading;\n        },\n\n        push: function() {\n            var index = this.length,\n                items = this.wrapAll(arguments),\n                result;\n\n            result = push.apply(this, items);\n\n            if (!this.omitChangeEvent) {\n                this.trigger(CHANGE, {\n                    action: \"add\",\n                    index: index,\n                    items: items\n                });\n            }\n\n            return result;\n        },\n\n        slice: slice,\n\n        sort: [].sort,\n\n        join: join,\n\n        pop: function() {\n            var length = this.length, result = pop.apply(this);\n\n            if (length) {\n                this.trigger(CHANGE, {\n                    action: \"remove\",\n                    index: length - 1,\n                    items: [result]\n                });\n            }\n\n            return result;\n        },\n\n        splice: function(index, howMany, item) {\n            var items = this.wrapAll(slice.call(arguments, 2)),\n                result, i, len;\n\n            result = splice.apply(this, [index, howMany].concat(items));\n\n            if (result.length) {\n                if (!this.omitChangeEvent) {\n                    this.trigger(CHANGE, {\n                        action: \"remove\",\n                        index: index,\n                        items: result\n                    });\n                }\n\n                for (i = 0, len = result.length; i < len; i++) {\n                    if (result[i] && result[i].children) {\n                        result[i].unbind(CHANGE);\n                    }\n                }\n            }\n\n            if (item) {\n                if (!this.omitChangeEvent) {\n                    this.trigger(CHANGE, {\n                        action: \"add\",\n                        index: index,\n                        items: items\n                    });\n                }\n            }\n            return result;\n        },\n\n        shift: function() {\n            var length = this.length, result = shift.apply(this);\n\n            if (length) {\n                this.trigger(CHANGE, {\n                    action: \"remove\",\n                    index: 0,\n                    items: [result]\n                });\n            }\n\n            return result;\n        },\n\n        unshift: function() {\n            var items = this.wrapAll(arguments),\n                result;\n\n            result = unshift.apply(this, items);\n\n            this.trigger(CHANGE, {\n                action: \"add\",\n                index: 0,\n                items: items\n            });\n\n            return result;\n        },\n\n        indexOf: function(item) {\n            var that = this,\n                idx,\n                length;\n\n            for (idx = 0, length = that.length; idx < length; idx++) {\n                if (that[idx] === item) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        forEach: function(callback, thisArg) {\n            var idx = 0;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                callback.call(context, this[idx], idx, this);\n            }\n        },\n\n        map: function(callback, thisArg) {\n            var idx = 0;\n            var result = [];\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                result[idx] = callback.call(context, this[idx], idx, this);\n            }\n\n            return result;\n        },\n\n        reduce: function(callback) {\n            var idx = 0,\n                result,\n                length = this.length;\n\n            if (arguments.length == 2) {\n                result = arguments[1];\n            } else if (idx < length) {\n                result = this[idx++];\n            }\n\n            for (; idx < length; idx++) {\n                result = callback(result, this[idx], idx, this);\n            }\n\n            return result;\n        },\n\n        reduceRight: function(callback) {\n            var idx = this.length - 1,\n                result;\n\n            if (arguments.length == 2) {\n                result = arguments[1];\n            } else if (idx > 0) {\n                result = this[idx--];\n            }\n\n            for (; idx >= 0; idx--) {\n                result = callback(result, this[idx], idx, this);\n            }\n\n            return result;\n        },\n\n        filter: function(callback, thisArg) {\n            var idx = 0;\n            var result = [];\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (callback.call(context, item, idx, this)) {\n                    result[result.length] = item;\n                }\n            }\n\n            return result;\n        },\n\n        find: function(callback, thisArg) {\n            var idx = 0;\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (callback.call(context, item, idx, this)) {\n                    return item;\n                }\n            }\n        },\n\n        every: function(callback, thisArg) {\n            var idx = 0;\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (!callback.call(context, item, idx, this)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        some: function(callback, thisArg) {\n            var idx = 0;\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (callback.call(context, item, idx, this)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        // non-standard collection methods\n        remove: function(item) {\n            var idx = this.indexOf(item);\n\n            if (idx !== -1) {\n                this.splice(idx, 1);\n            }\n        },\n\n        empty: function() {\n            this.splice(0, this.length);\n        }\n    });\n\n    // Polyfill for Symbol.iterator\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator && !ObservableArray.prototype[Symbol.iterator]) {\n        ObservableArray.prototype[Symbol.iterator] = [][Symbol.iterator];\n    }\n\n    var LazyObservableArray = ObservableArray.extend({\n        init: function(data, type, events) {\n            var parentFn = function() { return this; };\n\n            Observable.fn.init.call(this);\n\n            this.type = type || ObservableObject;\n\n            if (events) {\n                this._events = events;\n            }\n\n            for (var idx = 0; idx < data.length; idx++) {\n                this[idx] = data[idx];\n            }\n\n            this.length = idx;\n            this._parent = parentFn.bind(this);\n        },\n        at: function(index) {\n            var item = this[index];\n\n            if (!(item instanceof this.type)) {\n                item = this[index] = this.wrap(item, this._parent);\n            } else {\n                item.parent = this._parent;\n            }\n\n            return item;\n        }\n    });\n\n    function eventHandler(context, type, field, prefix) {\n        return function(e) {\n            var event = {}, key;\n\n            for (key in e) {\n                event[key] = e[key];\n            }\n\n            if (prefix) {\n                event.field = field + \".\" + e.field;\n            } else {\n                event.field = field;\n            }\n\n            if (type == CHANGE && context._notifyChange) {\n                context._notifyChange(event);\n            }\n\n            context.trigger(type, event);\n        };\n    }\n\n    function isPrimitiveType(value) {\n        return (typeof value === \"object\" && Object.getPrototypeOf(value) === Object.getPrototypeOf({}))\n                || Object.getPrototypeOf(value) === Object.getPrototypeOf(new Date())\n                || typeof value !== \"object\";\n      }\n\n    function ownKeys(value, ignoreObjectKeys) {\n        var props = [];\n        var protoKeys = [];\n        var keys, filteredObjectKeys;\n\n        value = value || {};\n\n        if (!isPrimitiveType(value)) {\n            protoKeys = Object.getOwnPropertyNames(Object.getPrototypeOf(value));\n        }\n\n        keys = Object.getOwnPropertyNames(value).concat(protoKeys);\n\n        filteredObjectKeys = objectKeys.filter(function(key) {\n            return keys.indexOf(key) < 0;\n        });\n\n        while (value) {\n            Object.getOwnPropertyNames(value).forEach(function(prop) {\n                if (props.indexOf(prop) === -1 && (!ignoreObjectKeys || filteredObjectKeys.indexOf(prop) < 0)) {\n                    props.push(prop);\n                }\n            });\n            value = Object.getPrototypeOf(value);\n        }\n\n        return props;\n    }\n\n    objectKeys = ownKeys({}, false);\n\n    var ObservableObject = Observable.extend({\n        init: function(value) {\n            var that = this,\n                member,\n                keys = ownKeys(value, true),\n                parent = function() {\n                    return that;\n                };\n\n            Observable.fn.init.call(this);\n\n            this._handlers = {};\n\n            keys.forEach(function(field) {\n                member = value[field];\n\n                if (typeof member === \"object\" && member && !member.getTime && field.charAt(0) != \"_\") {\n                    member = that.wrap(member, field, parent);\n                }\n\n                that[field] = member;\n            });\n\n            that.uid = kendo.guid();\n        },\n\n        shouldSerialize: function(field, serializeFunctions) {\n            return this.hasOwnProperty(field) && field !== \"_handlers\" && field !== \"_events\" && ((serializeFunctions && serializeFunctions[field]) || typeof this[field] !== FUNCTION) && field !== \"uid\";\n        },\n\n        forEach: function(f) {\n            for (var i in this) {\n                if (this.shouldSerialize(i)) {\n                    f(this[i], i);\n                }\n            }\n        },\n\n        toJSON: function(serializeFunctions) {\n            var result = {}, value, field;\n\n            for (field in this) {\n                if (this.shouldSerialize(field, serializeFunctions)) {\n                    value = this[field];\n\n                    if (value instanceof ObservableObject || value instanceof ObservableArray) {\n                        value = value.toJSON(serializeFunctions);\n                    }\n\n                    result[field] = value;\n                }\n            }\n\n            return result;\n        },\n\n        get: function(field) {\n            var that = this, result;\n\n            that.trigger(GET, { field: field });\n\n            if (field === \"this\") {\n                result = that;\n            } else {\n                result = kendo.getter(field, true)(that);\n            }\n\n            return result;\n        },\n\n        _set: function(field, value) {\n            var that = this;\n            var composite = field.indexOf(\".\") >= 0;\n\n            if (composite) {\n                var paths = field.split(\".\"),\n                    path = \"\";\n\n                while (paths.length > 1) {\n                    path += paths.shift();\n                    var obj = kendo.getter(path, true)(that);\n                    if (obj instanceof ObservableObject) {\n                        obj.set(paths.join(\".\"), value);\n                        return composite;\n                    }\n                    path += \".\";\n                }\n            }\n\n            kendo.setter(field)(that, value);\n\n            return composite;\n        },\n\n        set: function(field, value) {\n            var that = this,\n                isSetPrevented = false,\n                composite = field.indexOf(\".\") >= 0,\n                current = kendo.getter(field, true)(that);\n\n            if (current !== value) {\n                if (current instanceof Observable && this._handlers[field]) {\n                    if (this._handlers[field].get) {\n                       current.unbind(GET, this._handlers[field].get);\n                    }\n                    current.unbind(CHANGE, this._handlers[field].change);\n                }\n\n                isSetPrevented = that.trigger(\"set\", { field: field, value: value });\n\n                if (!isSetPrevented) {\n                    if (!composite) {\n                        value = that.wrap(value, field, function() { return that; });\n                    }\n                    if (!that._set(field, value) || field.indexOf(\"(\") >= 0 || field.indexOf(\"[\") >= 0) {\n                        that.trigger(CHANGE, { field: field });\n                    }\n                }\n            }\n\n            return isSetPrevented;\n        },\n\n        parent: noop,\n\n        wrap: function(object, field, parent) {\n            var that = this;\n            var get;\n            var change;\n            var type = toString.call(object);\n\n            if (object != null && (type === \"[object Object]\" || type === \"[object Array]\")) {\n                var isObservableArray = object instanceof ObservableArray;\n                var isDataSource = object instanceof DataSource;\n\n                if (type === \"[object Object]\" && !isDataSource && !isObservableArray) {\n                    if (!(object instanceof ObservableObject)) {\n                        object = new ObservableObject(object);\n                    }\n\n                    get = eventHandler(that, GET, field, true);\n                    object.bind(GET, get);\n                    change = eventHandler(that, CHANGE, field, true);\n                    object.bind(CHANGE, change);\n\n                    that._handlers[field] = { get: get, change: change };\n                } else if (type === \"[object Array]\" || isObservableArray || isDataSource) {\n                    if (!isObservableArray && !isDataSource) {\n                        object = new ObservableArray(object);\n                    }\n\n                    change = eventHandler(that, CHANGE, field, false);\n\n                    object.bind(CHANGE, change);\n\n                    that._handlers[field] = { change: change };\n                }\n\n                object.parent = parent;\n            }\n\n            return object;\n        }\n    });\n\n    function equal(x, y) {\n        if (x === y) {\n            return true;\n        }\n\n        var xtype = kendo.type(x), ytype = kendo.type(y), field;\n\n        if (xtype !== ytype) {\n            return false;\n        }\n\n        if (xtype === \"date\") {\n            return x.getTime() === y.getTime();\n        }\n\n        if (xtype !== \"object\" && xtype !== \"array\") {\n            return false;\n        }\n\n        for (field in x) {\n            if (!equal(x[field], y[field])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    var parsers = {\n        \"number\": function(value) {\n            if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n            }\n            return kendo.parseFloat(value);\n        },\n\n        \"date\": function(value) {\n            if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n            }\n            return kendo.parseDate(value);\n        },\n\n        \"boolean\": function(value) {\n            if (typeof value === STRING) {\n                if (value.toLowerCase() === \"null\") {\n                    return null;\n                } else {\n                    return value.toLowerCase() === \"true\";\n                }\n            }\n            return value != null ? !!value : value;\n        },\n\n        \"string\": function(value) {\n            if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n            }\n            return value != null ? (value + \"\") : value;\n        },\n\n        \"default\": function(value) {\n            return value;\n        }\n    };\n\n    var defaultValues = {\n        \"string\": \"\",\n        \"number\": 0,\n        \"date\": new Date(),\n        \"boolean\": false,\n        \"default\": \"\"\n    };\n\n    function getFieldByName(obj, name) {\n        var field,\n            fieldName;\n\n        for (fieldName in obj) {\n            field = obj[fieldName];\n            if (isPlainObject(field) && field.field && field.field === name) {\n                return field;\n            } else if (field === name) {\n                return field;\n            }\n        }\n        return null;\n    }\n\n    var Model = ObservableObject.extend({\n        init: function(data) {\n            var that = this;\n\n            if (!data || $.isEmptyObject(data)) {\n                data = $.extend({}, that.defaults, data);\n\n                if (that._initializers) {\n                    for (var idx = 0; idx < that._initializers.length; idx++) {\n                         var name = that._initializers[idx];\n                         data[name] = that.defaults[name]();\n                    }\n                }\n            }\n\n            ObservableObject.fn.init.call(that, data);\n\n            that.dirty = false;\n            that.dirtyFields = {};\n\n            if (that.idField) {\n                that.id = that.get(that.idField);\n\n                if (that.id === undefined) {\n                    that.id = that._defaultId;\n                }\n            }\n        },\n\n        shouldSerialize: function(field) {\n            return ObservableObject.fn.shouldSerialize.call(this, field) &&\n                field !== \"uid\" && !(this.idField !== \"id\" && field === \"id\") &&\n                field !== \"dirty\" && field !== \"dirtyFields\" && field !== \"_accessors\";\n        },\n\n        _parse: function(field, value) {\n            var that = this,\n                fieldName = field,\n                fields = (that.fields || {}),\n                parse;\n\n            field = fields[field];\n            if (!field) {\n                field = getFieldByName(fields, fieldName);\n            }\n            if (field) {\n                parse = field.parse;\n                if (!parse && field.type) {\n                    parse = parsers[field.type.toLowerCase()];\n                }\n            }\n\n            return parse ? parse(value) : value;\n        },\n\n        _notifyChange: function(e) {\n            var action = e.action;\n\n            if (action == \"add\" || action == \"remove\") {\n                this.dirty = true;\n                this.dirtyFields[e.field] = true;\n            }\n        },\n\n        editable: function(field) {\n            field = (this.fields || {})[field];\n            return field ? field.editable !== false : true;\n        },\n\n        set: function(field, value) {\n            var that = this;\n            var dirty = that.dirty;\n\n            if (that.editable(field)) {\n                value = that._parse(field, value);\n\n                if (!equal(value, that.get(field))) {\n                    that.dirty = true;\n                    that.dirtyFields[field] = true;\n\n                    if (ObservableObject.fn.set.call(that, field, value) && !dirty) {\n                        that.dirty = dirty;\n\n                        if (!that.dirty) {\n                            that.dirtyFields[field] = false;\n                        }\n                    }\n                } else {\n                    that.trigger(\"equalSet\", { field: field, value: value });\n                }\n            }\n        },\n\n        accept: function(data) {\n            var that = this,\n                parent = function() { return that; },\n                field;\n\n            for (field in data) {\n                var value = data[field];\n\n                if (field.charAt(0) != \"_\") {\n                    value = that.wrap(data[field], field, parent);\n                }\n\n                that._set(field, value);\n            }\n\n            if (that.idField) {\n                that.id = that.get(that.idField);\n            }\n\n            that.dirty = false;\n            that.dirtyFields = {};\n        },\n\n        isNew: function() {\n            return this.id === this._defaultId;\n        }\n    });\n\n    Model.define = function(base, options) {\n        if (options === undefined) {\n            options = base;\n            base = Model;\n        }\n\n        var model,\n            proto = extend({ defaults: {} }, options),\n            name,\n            field,\n            type,\n            value,\n            idx,\n            length,\n            fields = {},\n            originalName,\n            id = proto.id,\n            functionFields = [];\n\n        if (id) {\n            proto.idField = id;\n        }\n\n        if (proto.id) {\n            delete proto.id;\n        }\n\n        if (id) {\n            proto.defaults[id] = proto._defaultId = \"\";\n        }\n\n        if (toString.call(proto.fields) === \"[object Array]\") {\n            for (idx = 0, length = proto.fields.length; idx < length; idx++) {\n                field = proto.fields[idx];\n                if (typeof field === STRING) {\n                    fields[field] = {};\n                } else if (field.field) {\n                    fields[field.field] = field;\n                }\n            }\n            proto.fields = fields;\n        }\n\n        for (name in proto.fields) {\n            field = proto.fields[name];\n            type = field.type || \"default\";\n            value = null;\n            originalName = name;\n\n            name = typeof (field.field) === STRING ? field.field : name;\n\n            if (!field.nullable) {\n                value = proto.defaults[originalName !== name ? originalName : name] = field.defaultValue !== undefined ? field.defaultValue : defaultValues[type.toLowerCase()];\n\n                if (typeof value === \"function\") {\n                    functionFields.push(name);\n                }\n            }\n\n            if (options.id === name) {\n                proto._defaultId = value;\n            }\n\n            proto.defaults[originalName !== name ? originalName : name] = value;\n\n            field.parse = field.parse || parsers[type];\n        }\n\n        if (functionFields.length > 0) {\n            proto._initializers = functionFields;\n        }\n\n        model = base.extend(proto);\n        model.define = function(options) {\n            return Model.define(model, options);\n        };\n\n        if (proto.fields) {\n            model.fields = proto.fields;\n            model.idField = proto.idField;\n        }\n\n        return model;\n    };\n\n    var Comparer = {\n        selector: function(field) {\n            return isFunction(field) ? field : getter(field);\n        },\n\n        compare: function(field) {\n            var selector = this.selector(field);\n            return function(a, b) {\n                a = selector(a);\n                b = selector(b);\n\n                if (a == null && b == null) {\n                    return 0;\n                }\n\n                if (a == null) {\n                    return -1;\n                }\n\n                if (b == null) {\n                    return 1;\n                }\n\n                if (a.localeCompare) {\n                    return a.localeCompare(b);\n                }\n\n                return a > b ? 1 : (a < b ? -1 : 0);\n            };\n        },\n\n        create: function(sort) {\n            var compare = sort.compare || this.compare(sort.field);\n\n            if (sort.dir == \"desc\") {\n                return function(a, b) {\n                    return compare(b, a, true);\n                };\n            }\n\n            return compare;\n        },\n\n        combine: function(comparers) {\n            return function(a, b) {\n                var result = comparers[0](a, b),\n                    idx,\n                    length;\n\n                for (idx = 1, length = comparers.length; idx < length; idx ++) {\n                    result = result || comparers[idx](a, b);\n                }\n\n                return result;\n            };\n        }\n    };\n\n    var StableComparer = extend({}, Comparer, {\n        asc: function(field) {\n            var selector = this.selector(field);\n            return function(a, b) {\n                var valueA = selector(a);\n                var valueB = selector(b);\n\n                if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                    valueA = valueA.getTime();\n                    valueB = valueB.getTime();\n                }\n\n                if (valueA === valueB) {\n                    return a.__position - b.__position;\n                }\n\n                if (valueA == null) {\n                    return -1;\n                }\n\n                if (valueB == null) {\n                    return 1;\n                }\n\n                if (valueA.localeCompare) {\n                    return valueA.localeCompare(valueB);\n                }\n\n                return valueA > valueB ? 1 : -1;\n            };\n        },\n\n        desc: function(field) {\n            var selector = this.selector(field);\n            return function(a, b) {\n                var valueA = selector(a);\n                var valueB = selector(b);\n\n                if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                    valueA = valueA.getTime();\n                    valueB = valueB.getTime();\n                }\n\n                if (valueA === valueB) {\n                    return a.__position - b.__position;\n                }\n\n                if (valueA == null) {\n                    return 1;\n                }\n\n                if (valueB == null) {\n                    return -1;\n                }\n\n                if (valueB.localeCompare) {\n                    return valueB.localeCompare(valueA);\n                }\n\n                return valueA < valueB ? 1 : -1;\n            };\n        },\n        create: function(sort) {\n           return this[sort.dir](sort.field);\n        }\n    });\n\n    map = function(array, callback) {\n        var idx, length = array.length, result = new Array(length);\n\n        for (idx = 0; idx < length; idx++) {\n            result[idx] = callback(array[idx], idx, array);\n        }\n\n        return result;\n    };\n\n    var operators = (function() {\n\n        function quote(str) {\n            if (typeof str == \"string\") {\n                str = str.replace(/[\\r\\n]+/g, \"\");\n            }\n            return JSON.stringify(str);\n        }\n\n        function textOp(impl) {\n            return function(a, b, ignore, accentFoldingFiltering) {\n                b += \"\";\n                if (ignore) {\n                    a = \"(\" + a + \" + '').toString()\" + ((accentFoldingFiltering) ? \".toLocaleLowerCase('\" + accentFoldingFiltering + \"')\" : \".toLowerCase()\");\n                    b = ((accentFoldingFiltering) ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase());\n                }\n                return impl(a, quote(b), ignore);\n            };\n        }\n\n        function operator(op, a, b, ignore, accentFoldingFiltering) {\n            if (b != null) {\n                if (typeof b === STRING) {\n                    var date = dateRegExp.exec(b);\n                    if (date) {\n                        b = new Date(+date[1]);\n                    } else if (ignore) {\n                        b = quote(((accentFoldingFiltering) ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase()));\n                        a = \"((\" + a + \" || '')+'')\" + ((accentFoldingFiltering) ? \".toLocaleLowerCase('\" + accentFoldingFiltering + \"')\" : \".toLowerCase()\");\n                    } else {\n                        b = quote(b);\n                    }\n                }\n\n                if (b.getTime) {\n                    //b looks like a Date\n                    a = \"(\" + a + \"&&\" + a + \".getTime?\" + a + \".getTime():\" + a + \")\";\n                    b = b.getTime();\n                }\n            }\n\n            return a + \" \" + op + \" \" + b;\n        }\n\n        function getMatchRegexp(pattern) {\n            // take a pattern, as supported by Excel match filter, and\n            // convert it to the equivalent JS regular expression.\n            // Excel patterns support:\n            //\n            //   * - match any sequence of characters\n            //   ? - match a single character\n            //\n            // to match a literal * or ?, they must be prefixed by a tilde (~)\n            for (var rx = \"/^\", esc = false, i = 0; i < pattern.length; ++i) {\n                var ch = pattern.charAt(i);\n                if (esc) {\n                    rx += \"\\\\\" + ch;\n                } else if (ch == \"~\") {\n                    esc = true;\n                    continue;\n                } else if (ch == \"*\") {\n                    rx += \".*\";\n                } else if (ch == \"?\") {\n                    rx += \".\";\n                } else if (\".+^$()[]{}|\\\\/\\n\\r\\u2028\\u2029\\xA0\".indexOf(ch) >= 0) {\n                    rx += \"\\\\\" + ch;\n                } else {\n                    rx += ch;\n                }\n                esc = false;\n            }\n            return rx + \"$/\";\n        }\n\n        return {\n            quote: function(value) {\n                if (value && value.getTime) {\n                    return \"new Date(\" + value.getTime() + \")\";\n                }\n                return quote(value);\n            },\n            eq: function(a, b, ignore, accentFoldingFiltering) {\n                return operator(\"==\", a, b, ignore, accentFoldingFiltering);\n            },\n            neq: function(a, b, ignore, accentFoldingFiltering) {\n                return operator(\"!=\", a, b, ignore, accentFoldingFiltering);\n            },\n            gt: function(a, b, ignore) {\n                return operator(\">\", a, b, ignore);\n            },\n            gte: function(a, b, ignore) {\n                return operator(\">=\", a, b, ignore);\n            },\n            lt: function(a, b, ignore) {\n                return operator(\"<\", a, b, ignore);\n            },\n            lte: function(a, b, ignore) {\n                return operator(\"<=\", a, b, ignore);\n            },\n            startswith: textOp(function(a, b) {\n                return a + \".lastIndexOf(\" + b + \", 0) == 0\";\n            }),\n            doesnotstartwith: textOp(function(a, b) {\n                return a + \".lastIndexOf(\" + b + \", 0) == -1\";\n            }),\n            endswith: textOp(function(a, b) {\n                var n = b ? b.length - 2 : 0;\n                return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") >= 0\";\n            }),\n            doesnotendwith: textOp(function(a, b) {\n                var n = b ? b.length - 2 : 0;\n                return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") < 0\";\n            }),\n            contains: textOp(function(a, b) {\n                return a + \".indexOf(\" + b + \") >= 0\";\n            }),\n            doesnotcontain: textOp(function(a, b) {\n                return a + \".indexOf(\" + b + \") == -1\";\n            }),\n            matches: textOp(function(a, b) {\n                b = b.substring(1, b.length - 1);\n                return getMatchRegexp(b) + \".test(\" + a + \")\";\n            }),\n            doesnotmatch: textOp(function(a, b) {\n                b = b.substring(1, b.length - 1);\n                return \"!\" + getMatchRegexp(b) + \".test(\" + a + \")\";\n            }),\n            isempty: function(a) {\n                return a + \" === ''\";\n            },\n            isnotempty: function(a) {\n                return a + \" !== ''\";\n            },\n            isnull: function(a) {\n                return \"(\" + a + \" == null)\";\n            },\n            isnotnull: function(a) {\n                return \"(\" + a + \" != null)\";\n            },\n            isnullorempty: function(a) {\n                return \"(\" + a + \" === null) || (\" + a + \" === '')\";\n            },\n            isnotnullorempty: function(a) {\n                return \"(\" + a + \" !== null) && (\" + a + \" !== '')\";\n            }\n        };\n    })();\n\n    function Query(data) {\n        this.data = data || [];\n    }\n\n    Query.filterExpr = function(expression) {\n        var expressions = [],\n            logic = { and: \" && \", or: \" || \" },\n            idx,\n            length,\n            filter,\n            expr,\n            fieldFunctions = [],\n            operatorFunctions = [],\n            field,\n            operator,\n            filters = expression.filters;\n\n        for (idx = 0, length = filters.length; idx < length; idx++) {\n            filter = filters[idx];\n            field = filter.field;\n            operator = filter.operator;\n\n            if (filter.filters) {\n                expr = Query.filterExpr(filter);\n                //Nested function fields or operators - update their index e.g. __o[0] -> __o[1]\n                filter = expr.expression\n                .replace(/__o\\[(\\d+)\\]/g, function(match, index) {\n                    index = +index;\n                    return \"__o[\" + (operatorFunctions.length + index) + \"]\";\n                })\n                .replace(/__f\\[(\\d+)\\]/g, function(match, index) {\n                    index = +index;\n                    return \"__f[\" + (fieldFunctions.length + index) + \"]\";\n                });\n\n                operatorFunctions.push.apply(operatorFunctions, expr.operators);\n                fieldFunctions.push.apply(fieldFunctions, expr.fields);\n            } else {\n                if (typeof field === FUNCTION) {\n                    expr = \"__f[\" + fieldFunctions.length + \"](d)\";\n                    fieldFunctions.push(field);\n                } else {\n                    expr = kendo.expr(field);\n                }\n\n                if (typeof operator === FUNCTION) {\n                    filter = \"__o[\" + operatorFunctions.length + \"](\" + expr + \", \" + operators.quote(filter.value) + \")\";\n                    operatorFunctions.push(operator);\n                } else {\n                    filter = operators[(operator || \"eq\").toLowerCase()](expr, filter.value, filter.ignoreCase !== undefined ? filter.ignoreCase : true, expression.accentFoldingFiltering);\n                }\n            }\n\n            expressions.push(filter);\n        }\n\n        return { expression: \"(\" + expressions.join(logic[expression.logic]) + \")\", fields: fieldFunctions, operators: operatorFunctions };\n    };\n\n    function normalizeSort(field, dir) {\n        if (field) {\n            var descriptor = typeof field === STRING ? { field: field, dir: dir } : field,\n            descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n            return grep(descriptors, function(d) { return !!d.dir; });\n        }\n    }\n\n    function sortFields(sorts, dir) {\n        var sortObject = {};\n\n        if (sorts) {\n            var descriptor = typeof sorts === STRING ? { field: sorts, dir: dir } : sorts,\n            descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n            for (var i = 0; i < descriptors.length; i++) {\n                sortObject[descriptors[i].field] = { dir: descriptors[i].dir, index: i + 1 };\n            }\n        }\n\n        return sortObject;\n    }\n\n    var operatorMap = {\n        \"==\": \"eq\",\n        equals: \"eq\",\n        isequalto: \"eq\",\n        equalto: \"eq\",\n        equal: \"eq\",\n        \"!=\": \"neq\",\n        ne: \"neq\",\n        notequals: \"neq\",\n        isnotequalto: \"neq\",\n        notequalto: \"neq\",\n        notequal: \"neq\",\n        \"<\": \"lt\",\n        islessthan: \"lt\",\n        lessthan: \"lt\",\n        less: \"lt\",\n        \"<=\": \"lte\",\n        le: \"lte\",\n        islessthanorequalto: \"lte\",\n        lessthanequal: \"lte\",\n        \">\": \"gt\",\n        isgreaterthan: \"gt\",\n        greaterthan: \"gt\",\n        greater: \"gt\",\n        \">=\": \"gte\",\n        isgreaterthanorequalto: \"gte\",\n        greaterthanequal: \"gte\",\n        ge: \"gte\",\n        notsubstringof: \"doesnotcontain\",\n        isnull: \"isnull\",\n        isempty: \"isempty\",\n        isnotempty: \"isnotempty\"\n    };\n\n    function normalizeOperator(expression) {\n        var idx,\n        length,\n        filter,\n        operator,\n        filters = expression.filters;\n\n        if (filters) {\n            for (idx = 0, length = filters.length; idx < length; idx++) {\n                filter = filters[idx];\n                operator = filter.operator;\n\n                if (operator && typeof operator === STRING) {\n                    filter.operator = operatorMap[operator.toLowerCase()] || operator;\n                }\n\n                normalizeOperator(filter);\n            }\n        }\n    }\n\n    function normalizeFilter(expression) {\n        if (expression && !isEmptyObject(expression)) {\n            if (isArray(expression) || !expression.filters) {\n                expression = {\n                    logic: \"and\",\n                    filters: isArray(expression) ? expression : [expression]\n                };\n            }\n\n            normalizeOperator(expression);\n\n            return expression;\n        }\n    }\n\n    Query.normalizeFilter = normalizeFilter;\n\n    function compareDescriptor(f1, f2) {\n        if (f1.logic || f2.logic) {\n            return false;\n        }\n\n        return f1.field === f2.field && f1.value === f2.value && f1.operator === f2.operator;\n    }\n\n    function normalizeDescriptor(filter) {\n        filter = filter || {};\n\n        if (isEmptyObject(filter)) {\n            return { logic: \"and\", filters: [] };\n        }\n\n        return normalizeFilter(filter);\n    }\n\n    function fieldComparer(a, b) {\n        if (b.logic || (a.field > b.field)) {\n            return 1;\n        } else if (a.field < b.field) {\n            return -1;\n        } else {\n            return 0;\n        }\n    }\n\n    function compareFilters(expr1, expr2) {\n        expr1 = normalizeDescriptor(expr1);\n        expr2 = normalizeDescriptor(expr2);\n\n        if (expr1.logic !== expr2.logic) {\n            return false;\n        }\n\n        var f1, f2;\n        var filters1 = (expr1.filters || []).slice();\n        var filters2 = (expr2.filters || []).slice();\n\n        if (filters1.length !== filters2.length) {\n            return false;\n        }\n\n        filters1 = filters1.sort(fieldComparer);\n        filters2 = filters2.sort(fieldComparer);\n\n        for (var idx = 0; idx < filters1.length; idx++) {\n            f1 = filters1[idx];\n            f2 = filters2[idx];\n\n            if (f1.logic && f2.logic) {\n                if (!compareFilters(f1, f2)) {\n                    return false;\n                }\n            } else if (!compareDescriptor(f1, f2)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    Query.compareFilters = compareFilters;\n\n    function normalizeAggregate(expressions) {\n        return isArray(expressions) ? expressions : [expressions];\n    }\n\n    function normalizeGroup(field, dir, compare, skipItemSorting) {\n        var descriptor = typeof field === STRING ? { field: field, dir: dir, compare: compare, skipItemSorting: skipItemSorting } : field,\n        descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n        return map(descriptors, function(d) {\n            return {\n                field: d.field,\n                dir: d.dir || \"asc\",\n                aggregates: d.aggregates,\n                compare: d.compare,\n                skipItemSorting: d.skipItemSorting\n            };\n        });\n    }\n\n    function normalizeGroupWithoutCompare(field, dir, compare) {\n        var descriptors = normalizeGroup(field, dir, compare);\n\n        for (var i = 0; i < descriptors.length; i++) {\n            delete descriptors[i].compare;\n        }\n\n        return descriptors;\n    }\n\n    function anyGroupDescriptorHasCompare(groupDescriptors) {\n        var descriptors = isArray(groupDescriptors) ? groupDescriptors : [groupDescriptors];\n\n        for (var i = 0; i < descriptors.length; i++) {\n            if (descriptors[i] && isFunction(descriptors[i].compare)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    Query.prototype = {\n        toArray: function() {\n            return this.data;\n        },\n        range: function(index, count) {\n            return new Query(this.data.slice(index, index + count));\n        },\n        skip: function(count) {\n            return new Query(this.data.slice(count));\n        },\n        take: function(count) {\n            return new Query(this.data.slice(0, count));\n        },\n        select: function(selector) {\n            return new Query(map(this.data, selector));\n        },\n        order: function(selector, dir, inPlace) {\n            var sort = { dir: dir };\n\n            if (selector) {\n                if (selector.compare) {\n                    sort.compare = selector.compare;\n                } else {\n                    sort.field = selector;\n                }\n            }\n\n            if (inPlace) {\n                return new Query(this.data.sort(Comparer.create(sort)));\n            }\n\n            return new Query(this.data.slice(0).sort(Comparer.create(sort)));\n        },\n        orderBy: function(selector, inPlace) {\n            return this.order(selector, \"asc\", inPlace);\n        },\n        orderByDescending: function(selector, inPlace) {\n            return this.order(selector, \"desc\", inPlace);\n        },\n        sort: function(field, dir, comparer, inPlace) {\n            var idx,\n            length,\n            descriptors = normalizeSort(field, dir),\n            comparers = [];\n\n            comparer = comparer || Comparer;\n\n            if (descriptors.length) {\n                for (idx = 0, length = descriptors.length; idx < length; idx++) {\n                    comparers.push(comparer.create(descriptors[idx]));\n                }\n\n                return this.orderBy({ compare: comparer.combine(comparers) }, inPlace);\n            }\n\n            return this;\n        },\n\n        filter: function(expressions) {\n            var idx,\n            current,\n            length,\n            compiled,\n            predicate,\n            data = this.data,\n            fields,\n            operators,\n            result = [],\n            filter;\n\n            expressions = normalizeFilter(expressions);\n\n            if (!expressions || expressions.filters.length === 0) {\n                return this;\n            }\n\n            compiled = Query.filterExpr(expressions);\n            fields = compiled.fields;\n            operators = compiled.operators;\n\n            predicate = filter = new Function(\"d, __f, __o\", \"return \" + compiled.expression);\n\n            if (fields.length || operators.length) {\n                filter = function(d) {\n                    return predicate(d, fields, operators);\n                };\n            }\n\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                current = data[idx];\n\n                if (filter(current)) {\n                    result.push(current);\n                }\n            }\n\n            return new Query(result);\n        },\n\n        group: function(descriptors, allData, options) {\n            descriptors = normalizeGroup(descriptors || []);\n            allData = allData || this.data;\n\n            var that = this,\n            result = new Query(that.data),\n            descriptor;\n\n            if (descriptors.length > 0) {\n                descriptor = descriptors[0];\n\n                if (options && options.groupPaging) {\n                    result = new Query(allData).groupAllData(descriptor, allData).select(function(group) {\n                        var data = new Query(allData).filter([{\n                            field: group.field,\n                            operator: \"eq\",\n                            value: group.value,\n                            ignoreCase: false\n                        }]);\n                        var items = descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), data.toArray(), options).toArray() : group.items;\n                        return {\n                            field: group.field,\n                            value: group.value,\n                            hasSubgroups: descriptors.length > 1,\n                            items: items,\n                            aggregates: data.aggregate(descriptor.aggregates),\n                            uid: kendo.guid(),\n                            itemCount: items.length,\n                            subgroupCount: items.length\n                        };\n                    });\n\n                } else {\n                    result = result.groupBy(descriptor).select(function(group) {\n                        var data = new Query(allData).filter([ { field: group.field, operator: \"eq\", value: group.value, ignoreCase: false } ]);\n                        return {\n                            field: group.field,\n                            value: group.value,\n                            items: descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), data.toArray()).toArray() : group.items,\n                            hasSubgroups: descriptors.length > 1,\n                            aggregates: data.aggregate(descriptor.aggregates)\n                        };\n                    });\n                }\n            }\n            return result;\n        },\n\n        groupBy: function(descriptor) {\n            var that = this;\n\n            if (isEmptyObject(descriptor) || !this.data.length) {\n                return new Query([]);\n            }\n\n            var field = descriptor.field,\n                sorted = descriptor.skipItemSorting ? this.data : this._sortForGrouping(field, descriptor.dir || \"asc\"),\n                accessor = kendo.accessor(field),\n                item,\n                groupValue = accessor.get(sorted[0], field),\n                group = {\n                    field: field,\n                    value: groupValue,\n                    items: []\n                },\n                currentValue,\n                idx,\n                len,\n                result = [group];\n\n            for (idx = 0, len = sorted.length; idx < len; idx++) {\n                item = sorted[idx];\n                currentValue = accessor.get(item, field);\n                if (!groupValueComparer(groupValue, currentValue)) {\n                    groupValue = currentValue;\n                    group = {\n                        field: field,\n                        value: groupValue,\n                        items: []\n                    };\n                    result.push(group);\n                }\n                group.items.push(item);\n            }\n\n            result = that._sortGroups(result, descriptor);\n\n            return new Query(result);\n        },\n\n        groupAllData: function(descriptor, allData) {\n            if (isEmptyObject(descriptor) || this.data && !this.data.length) {\n                return new Query([]);\n            }\n\n            var field = descriptor.field,\n                sorted = descriptor.skipItemSorting ? allData : new Query(allData).sort(field, descriptor.dir || \"asc\", StableComparer).toArray(),\n                accessor = kendo.accessor(field),\n                item,\n                groupValue = accessor.get(sorted[0], field),\n                group = {\n                    field: field,\n                    value: groupValue,\n                    items: []\n                },\n                currentValue,\n                idx,\n                len,\n                result = [group];\n\n            for (idx = 0, len = sorted.length; idx < len; idx++) {\n                item = sorted[idx];\n                currentValue = accessor.get(item, field);\n                if (!groupValueComparer(groupValue, currentValue)) {\n                    groupValue = currentValue;\n                    group = {\n                        field: field,\n                        value: groupValue,\n                        items: []\n                    };\n                    result.push(group);\n                }\n                group.items.push(item);\n            }\n\n            result = this._sortGroups(result, descriptor);\n\n            return new Query(result);\n        },\n\n        _sortForGrouping: function(field, dir) {\n            var idx, length,\n                data = this.data;\n\n            if (!stableSort) {\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    data[idx].__position = idx;\n                }\n\n                data = new Query(data).sort(field, dir, StableComparer).toArray();\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    delete data[idx].__position;\n                }\n                return data;\n            }\n\n            return this.sort(field, dir).toArray();\n        },\n\n        _sortGroups: function(groups, descriptor) {\n            var result = groups;\n\n            if (descriptor && isFunction(descriptor.compare)) {\n                result = new Query(result).order({ compare: descriptor.compare }, descriptor.dir || ASCENDING).toArray();\n            }\n\n            return result;\n        },\n\n        aggregate: function(aggregates) {\n            var idx,\n                len,\n                result = {},\n                state = {};\n\n            if (aggregates && aggregates.length) {\n                for (idx = 0, len = this.data.length; idx < len; idx++) {\n                    calculateAggregate(result, aggregates, this.data[idx], idx, len, state);\n                }\n            }\n            return result;\n        }\n    };\n\n    function groupValueComparer(a, b) {\n        if (a && a.getTime && b && b.getTime) {\n            return a.getTime() === b.getTime();\n        }\n        return a === b;\n    }\n\n    function calculateAggregate(accumulator, aggregates, item, index, length, state) {\n        aggregates = aggregates || [];\n        var idx,\n            aggr,\n            functionName,\n            len = aggregates.length;\n\n        for (idx = 0; idx < len; idx++) {\n            aggr = aggregates[idx];\n            functionName = aggr.aggregate;\n            var field = aggr.field;\n            accumulator[field] = accumulator[field] || {};\n            state[field] = state[field] || {};\n            state[field][functionName] = state[field][functionName] || {};\n            accumulator[field][functionName] = functions[functionName.toLowerCase()](accumulator[field][functionName], item, kendo.accessor(field), index, length, state[field][functionName]);\n        }\n    }\n\n    var functions = {\n        sum: function(accumulator, item, accessor) {\n            var value = accessor.get(item);\n\n            if (!isNumber(accumulator)) {\n                accumulator = value;\n            } else if (isNumber(value)) {\n                accumulator += value;\n            }\n\n            return accumulator;\n        },\n        count: function(accumulator) {\n            return (accumulator || 0) + 1;\n        },\n        average: function(accumulator, item, accessor, index, length, state) {\n            var value = accessor.get(item);\n\n            if (state.count === undefined) {\n                state.count = 0;\n            }\n\n            if (!isNumber(accumulator)) {\n                accumulator = value;\n            } else if (isNumber(value)) {\n                accumulator += value;\n            }\n\n            if (isNumber(value)) {\n                state.count++;\n            }\n\n            if (index == length - 1 && isNumber(accumulator)) {\n                accumulator = accumulator / state.count;\n            }\n            return accumulator;\n        },\n        max: function(accumulator, item, accessor) {\n            var value = accessor.get(item);\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if (accumulator < value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        },\n        min: function(accumulator, item, accessor) {\n            var value = accessor.get(item);\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if (accumulator > value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        }\n    };\n\n    function isNumber(val) {\n        return typeof val === \"number\" && !isNaN(val);\n    }\n\n    function isDate(val) {\n        return val && val.getTime;\n    }\n\n    function toJSON(array) {\n        var idx, length = array.length, result = new Array(length);\n\n        for (idx = 0; idx < length; idx++) {\n            result[idx] = array[idx].toJSON();\n        }\n\n        return result;\n    }\n\n    Query.normalizeGroup = normalizeGroup;\n    Query.normalizeSort = normalizeSort;\n\n    Query.process = function(data, options, inPlace) {\n        options = options || {};\n\n        var group = options.group;\n        var customGroupSort = anyGroupDescriptorHasCompare(normalizeGroup(group || []));\n        var query = new Query(data),\n            groupDescriptorsWithoutCompare = normalizeGroupWithoutCompare(group || []),\n            normalizedSort = normalizeSort(options.sort || []),\n            sort = customGroupSort ? normalizedSort : groupDescriptorsWithoutCompare.concat(normalizedSort),\n            groupDescriptorsWithoutSort,\n            total,\n            filterCallback = options.filterCallback,\n            filter = options.filter,\n            skip = options.skip,\n            take = options.take;\n\n        if (sort && inPlace) {\n            query = query.sort(sort, undefined, undefined, inPlace);\n        }\n\n        if (filter) {\n            query = query.filter(filter);\n\n            if (filterCallback) {\n                query = filterCallback(query);\n            }\n\n            total = query.toArray().length;\n        }\n\n        if (sort) {\n            if (!inPlace) {\n                query = query.sort(sort);\n            }\n\n            if (group) {\n                data = query.toArray();\n            }\n        }\n\n        if (customGroupSort) {\n            query = query.group(group, data, options);\n\n            if (skip !== undefined && take !== undefined && !options.groupPaging) {\n                query = new Query(flatGroups(query.toArray())).range(skip, take);\n\n                groupDescriptorsWithoutSort = map(groupDescriptorsWithoutCompare, function(groupDescriptor) {\n                    return extend({}, groupDescriptor, {\n                        skipItemSorting: true\n                    });\n                });\n\n                query = query.group(groupDescriptorsWithoutSort, data, options);\n            }\n        } else {\n            if (skip !== undefined && take !== undefined) {\n                total = query.data.length;\n\n                if (skip + take > total && options.virtual) {\n                    skip -= skip + take - total;\n                }\n                query = query.range(skip, take);\n            }\n\n            if (group && (!isEmptyObject(group) || group.length !== 0)) {\n                query = query.group(group, data, options);\n            }\n        }\n\n        return {\n            total: total,\n            data: query.toArray()\n        };\n    };\n\n    var LocalTransport = Class.extend({\n        init: function(options) {\n            this.data = options.data;\n        },\n\n        read: function(options) {\n            options.success(this.data);\n        },\n        update: function(options) {\n            options.success(options.data);\n        },\n        create: function(options) {\n            options.success(options.data);\n        },\n        destroy: function(options) {\n            options.success(options.data);\n        }\n    });\n\n    var RemoteTransport = Class.extend( {\n        init: function(options) {\n            var that = this, parameterMap;\n\n            options = that.options = extend({}, that.options, options);\n\n            each(crud, function(index, type) {\n                if (typeof options[type] === STRING) {\n                    options[type] = {\n                        url: options[type]\n                    };\n                }\n            });\n\n            that.cache = options.cache ? Cache.create(options.cache) : {\n                find: noop,\n                add: noop\n            };\n\n            parameterMap = options.parameterMap;\n\n            if (options.submit) {\n                that.submit = options.submit;\n            }\n\n            if (isFunction(options.push)) {\n                that.push = options.push;\n            }\n\n            if (!that.push) {\n                that.push = identity;\n            }\n\n            that.parameterMap = isFunction(parameterMap) ? parameterMap : function(options) {\n                var result = {};\n\n                each(options, function(option, value) {\n                    if (option in parameterMap) {\n                        option = parameterMap[option];\n                        if (isPlainObject(option)) {\n                            value = option.value(value);\n                            option = option.key;\n                        }\n                    }\n\n                    result[option] = value;\n                });\n\n                return result;\n            };\n        },\n\n        options: {\n            parameterMap: identity\n        },\n\n        create: function(options) {\n            return ajax(this.setup(options, CREATE));\n        },\n\n        read: function(options) {\n            var that = this,\n                success,\n                error,\n                result,\n                cache = that.cache;\n\n            options = that.setup(options, READ);\n\n            success = options.success || noop;\n            error = options.error || noop;\n\n            result = cache.find(options.data);\n\n            if (result !== undefined) {\n                success(result);\n            } else {\n                options.success = function(result) {\n                    cache.add(options.data, result);\n\n                    success(result);\n                };\n\n                $.ajax(options);\n            }\n        },\n\n        update: function(options) {\n            return ajax(this.setup(options, UPDATE));\n        },\n\n        destroy: function(options) {\n            return ajax(this.setup(options, DESTROY));\n        },\n\n        setup: function(options, type) {\n            options = options || {};\n\n            var that = this,\n                parameters,\n                operation = that.options[type],\n                data = isFunction(operation.data) ? operation.data(options.data) : operation.data;\n\n            options = extend(true, {}, operation, options);\n            parameters = extend(true, {}, data, options.data);\n\n            options.data = that.parameterMap(parameters, type);\n\n            if (isFunction(options.url)) {\n                options.url = options.url(parameters);\n            }\n\n            return options;\n        }\n    });\n\n    var Cache = Class.extend({\n        init: function() {\n            this._store = {};\n        },\n        add: function(key, data) {\n            if (key !== undefined) {\n                this._store[stringify(key)] = data;\n            }\n        },\n        find: function(key) {\n            return this._store[stringify(key)];\n        },\n        clear: function() {\n            this._store = {};\n        },\n        remove: function(key) {\n            delete this._store[stringify(key)];\n        }\n    });\n\n    Cache.create = function(options) {\n        var store = {\n            \"inmemory\": function() { return new Cache(); }\n        };\n\n        if (isPlainObject(options) && isFunction(options.find)) {\n            return options;\n        }\n\n        if (options === true) {\n            return new Cache();\n        }\n\n        return store[options]();\n    };\n\n    function serializeRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n        var record,\n            getter,\n            originalName,\n            idx,\n            setters = {},\n            length;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            record = data[idx];\n            for (getter in getters) {\n                originalName = fieldNames[getter];\n\n                if (originalName && originalName !== getter) {\n                    if (!setters[originalName]) {\n                        setters[originalName] = kendo.setter(originalName);\n                    }\n                    setters[originalName](record, getters[getter](record));\n                    delete record[getter];\n                }\n            }\n        }\n    }\n\n    function convertRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n        var record,\n            getter,\n            originalName,\n            idx,\n            length;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            record = data[idx];\n            for (getter in getters) {\n                record[getter] = modelInstance._parse(getter, getters[getter](record));\n\n                originalName = fieldNames[getter];\n                if (originalName && originalName !== getter) {\n                    delete record[originalName];\n                }\n            }\n        }\n    }\n\n    function convertGroup(data, getters, modelInstance, originalFieldNames, fieldNames) {\n        var record,\n            idx,\n            fieldName,\n            length;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            record = data[idx];\n\n            fieldName = originalFieldNames[record.field];\n            if (fieldName && fieldName != record.field) {\n                record.field = fieldName;\n            }\n\n            record.value = modelInstance._parse(record.field, record.value);\n\n            if (record.items) {\n                if (record.hasSubgroups) {\n                    convertGroup(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                } else {\n                    convertRecords(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                }\n            }\n        }\n    }\n\n    function wrapDataAccess(originalFunction, model, converter, getters, originalFieldNames, fieldNames) {\n        return function(data) {\n            data = originalFunction(data);\n\n            return wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames)(data);\n        };\n    }\n\n    function wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames) {\n        return function(data) {\n\n            if (data && !isEmptyObject(getters)) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof ObservableArray)) {\n                    data = [data];\n                }\n\n                converter(data, getters, new model(), originalFieldNames, fieldNames);\n            }\n\n            return data || [];\n        };\n    }\n\n    var DataReader = Class.extend({\n        init: function(schema) {\n            var that = this, member, get, model, base;\n\n            schema = schema || {};\n\n            for (member in schema) {\n                get = schema[member];\n\n                that[member] = typeof get === STRING ? getter(get) : get;\n            }\n\n            base = schema.modelBase || Model;\n\n            if (isPlainObject(that.model)) {\n                that.model = model = base.define(that.model);\n            }\n\n            var dataFunction = that.data.bind(that);\n\n            that._dataAccessFunction = dataFunction;\n\n            if (that.model) {\n                var groupsFunction = that.groups.bind(that),\n                    serializeFunction = that.serialize.bind(that),\n                    originalFieldNames = {},\n                    getters = {},\n                    serializeGetters = {},\n                    fieldNames = {},\n                    shouldSerialize = false,\n                    fieldName,\n                    name;\n\n                model = that.model;\n\n                if (model.fields) {\n                    each(model.fields, function(field, value) {\n                        var fromName;\n\n                        fieldName = field;\n\n                        if (isPlainObject(value) && value.field) {\n                            fieldName = value.field;\n                        } else if (typeof value === STRING) {\n                            fieldName = value;\n                        }\n\n                        if (isPlainObject(value) && value.from) {\n                            fromName = value.from;\n                        }\n\n                        shouldSerialize = shouldSerialize || (fromName && fromName !== field) || fieldName !== field;\n                        name = fromName || fieldName;\n                        getters[field] = name.indexOf(\".\") !== -1 ? getter(name, true) : getter(name);\n                        serializeGetters[field] = getter(field);\n                        originalFieldNames[fromName || fieldName] = field;\n                        fieldNames[field] = fromName || fieldName;\n                    });\n\n                    if (!schema.serialize && shouldSerialize) {\n                        that.serialize = wrapDataAccess(serializeFunction, model, serializeRecords, serializeGetters, originalFieldNames, fieldNames);\n                    }\n                }\n\n                that._dataAccessFunction = dataFunction;\n                that._wrapDataAccessBase = wrapDataAccessBase(model, convertRecords, getters, originalFieldNames, fieldNames);\n                that.data = wrapDataAccess(dataFunction, model, convertRecords, getters, originalFieldNames, fieldNames);\n                that.groups = wrapDataAccess(groupsFunction, model, convertGroup, getters, originalFieldNames, fieldNames);\n            }\n        },\n        errors: function(data) {\n            return data ? data.errors : null;\n        },\n        parse: identity,\n        data: identity,\n        total: function(data) {\n            return data.length;\n        },\n        groups: identity,\n        aggregates: function() {\n            return {};\n        },\n        serialize: function(data) {\n            return data;\n        }\n    });\n\n    function fillLastGroup(originalGroup, newGroup) {\n        var currOriginal;\n        var currentNew;\n\n        if (newGroup.items && newGroup.items.length) {\n            for (var i = 0; i < newGroup.items.length; i++) {\n                currOriginal = originalGroup.items[originalGroup.items.length - 1];\n                currentNew = newGroup.items[i];\n                if (currOriginal && currentNew) {\n                    if (currOriginal.hasSubgroups && currOriginal.value == currentNew.value) {\n                        fillLastGroup(currOriginal, currentNew);\n                    } else if (currOriginal.field && currOriginal.value == currentNew.value) {\n                        currOriginal.items.push.apply(currOriginal.items, currentNew.items);\n                    } else {\n                        originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                    }\n                } else if (currentNew) {\n                    originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                }\n            }\n        }\n    }\n    function mergeGroups(target, dest, skip, take) {\n        var group,\n            idx = 0,\n            items;\n\n        while (dest.length && take) {\n            group = dest[idx];\n            items = group.items;\n\n            var length = items.length;\n\n            if (target && target.field === group.field && target.value === group.value) {\n                if (target.hasSubgroups && target.items.length) {\n                    mergeGroups(target.items[target.items.length - 1], group.items, skip, take);\n                } else {\n                    items = items.slice(skip, skip + take);\n                    target.items = target.items.concat(items);\n                }\n                dest.splice(idx--, 1);\n            } else if (group.hasSubgroups && items.length) {\n                mergeGroups(group, items, skip, take);\n                if (!group.items.length) {\n                    dest.splice(idx--, 1);\n                }\n            } else {\n                items = items.slice(skip, skip + take);\n                group.items = items;\n\n                if (!group.items.length) {\n                    dest.splice(idx--, 1);\n                }\n            }\n\n            if (items.length === 0) {\n                skip -= length;\n            } else {\n                skip = 0;\n                take -= items.length;\n            }\n\n            if (++idx >= dest.length) {\n                break;\n            }\n        }\n\n        if (idx < dest.length) {\n            dest.splice(idx, dest.length - idx);\n        }\n    }\n\n    function flatGroups(groups, indexFunction) {\n        var result = [];\n        var groupsLength = (groups || []).length;\n        var group;\n        var items;\n        var indexFn = isFunction(indexFunction) ? indexFunction : function(array, index) {\n            return array[index];\n        };\n\n        for (var groupIndex = 0; groupIndex < groupsLength; groupIndex++) {\n            group = indexFn(groups, groupIndex);\n\n            if (group.hasSubgroups) {\n                result = result.concat(flatGroups(group.items));\n            } else {\n                items = group.items;\n\n                for (var itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                    result.push(indexFn(items, itemIndex));\n                }\n            }\n        }\n        return result;\n    }\n\n    function flattenGroups(data) {\n        var idx,\n            result = [],\n            length,\n            items,\n            itemIndex;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            var group = data.at(idx);\n            if (group.items) {\n                if (group.hasSubgroups) {\n                    result = result.concat(flattenGroups(group.items));\n                } else {\n                    items = group.items;\n                    for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                        result.push(items.at(itemIndex));\n                    }\n                }\n            }\n        }\n        return result;\n    }\n\n    function wrapGroupItems(data, model) {\n        var idx, length, group;\n        if (model) {\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                group = data.at(idx);\n                if (group.items) {\n                    if (group.hasSubgroups) {\n                        wrapGroupItems(group.items, model);\n                    } else {\n                        group.items = new LazyObservableArray(group.items, model, group.items._events);\n                    }\n                }\n            }\n        }\n    }\n\n    function eachGroupItems(data, func) {\n        for (var idx = 0; idx < data.length; idx++) {\n            if (data[idx].hasSubgroups) {\n                if (eachGroupItems(data[idx].items, func)) {\n                    return true;\n                }\n            } else if (func(data[idx].items, data[idx])) {\n                return true;\n            }\n        }\n    }\n\n    function replaceInRanges(ranges, data, item, observable) {\n        for (var idx = 0; idx < ranges.length; idx++) {\n            if (ranges[idx].data === data) {\n                break;\n            }\n            if (replaceInRange(ranges[idx].data, item, observable)) {\n                break;\n            }\n        }\n    }\n\n    function replaceInRange(items, item, observable) {\n        for (var idx = 0, length = items.length; idx < length; idx++) {\n            if (items[idx] && items[idx].hasSubgroups) {\n                return replaceInRange(items[idx].items, item, observable);\n            } else if (items[idx] === item || items[idx] === observable) {\n               items[idx] = observable;\n               return true;\n            }\n        }\n    }\n\n    function replaceWithObservable(view, data, ranges, type, serverGrouping) {\n        for (var viewIndex = 0, length = view.length; viewIndex < length; viewIndex++) {\n            var item = view[viewIndex];\n\n            if (!item || item instanceof type) {\n                continue;\n            }\n\n            if (item.hasSubgroups !== undefined && !serverGrouping) {\n                replaceWithObservable(item.items, data, ranges, type, serverGrouping);\n            } else {\n                for (var idx = 0; idx < data.length; idx++) {\n                    if (data[idx] === item) {\n                        view[viewIndex] = data.at(idx);\n                        replaceInRanges(ranges, data, item, view[viewIndex]);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    function removeModel(data, model) {\n        if (!data) {\n            return;\n        }\n        var length = data.length;\n        var dataItem;\n        var idx;\n\n        for (idx = 0; idx < length; idx++) {\n            dataItem = data[idx];\n\n            if (dataItem.uid && dataItem.uid == model.uid) {\n                data.splice(idx, 1);\n                return dataItem;\n            }\n        }\n    }\n\n    function indexOfPristineModel(data, model) {\n        if (model) {\n            return indexOf(data, function(item) {\n                return (item.uid && item.uid == model.uid) || (item[model.idField] === model.id && model.id !== model._defaultId);\n            });\n        }\n        return -1;\n    }\n\n    function indexOfModel(data, model) {\n        if (model) {\n            return indexOf(data, function(item) {\n                return item.uid == model.uid;\n            });\n        }\n        return -1;\n    }\n\n    function indexOf(data, comparer) {\n        var idx, length;\n        if (!data) {\n            return;\n        }\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            if (comparer(data[idx])) {\n                return idx;\n            }\n        }\n\n        return -1;\n    }\n\n    function fieldNameFromModel(fields, name) {\n        if (fields && !isEmptyObject(fields)) {\n            var descriptor = fields[name];\n            var fieldName;\n            if (isPlainObject(descriptor)) {\n                fieldName = descriptor.from || descriptor.field || name;\n            } else {\n                fieldName = fields[name] || name;\n            }\n\n            if (isFunction(fieldName)) {\n                return name;\n            }\n\n            return fieldName;\n        }\n        return name;\n    }\n\n    function convertFilterDescriptorsField(descriptor, model) {\n        var idx,\n            length,\n            target = {};\n\n        for (var field in descriptor) {\n            if (field !== \"filters\") {\n                target[field] = descriptor[field];\n            }\n        }\n\n        if (descriptor.filters) {\n            target.filters = [];\n            for (idx = 0, length = descriptor.filters.length; idx < length; idx++) {\n                target.filters[idx] = convertFilterDescriptorsField(descriptor.filters[idx], model);\n            }\n        } else {\n            target.field = fieldNameFromModel(model.fields, target.field);\n        }\n        return target;\n    }\n\n    function convertDescriptorsField(descriptors, model) {\n        var idx,\n            length,\n            result = [],\n            target,\n            descriptor;\n\n        for (idx = 0, length = descriptors.length; idx < length; idx ++) {\n            target = {};\n\n            descriptor = descriptors[idx];\n\n            for (var field in descriptor) {\n                target[field] = descriptor[field];\n            }\n\n            target.field = fieldNameFromModel(model.fields, target.field);\n\n            if (target.aggregates && isArray(target.aggregates)) {\n                target.aggregates = convertDescriptorsField(target.aggregates, model);\n            }\n            result.push(target);\n        }\n        return result;\n    }\n\n    var DataSource = Observable.extend({\n        init: function(options) {\n            var that = this, model, data;\n\n            if (options) {\n                data = options.data;\n            }\n\n            options = that.options = extend({}, that.options, options);\n\n            that._map = {};\n            that._prefetch = {};\n            that._data = [];\n            that._pristineData = [];\n            that._ranges = [];\n            that._view = [];\n            that._pristineTotal = 0;\n            that._destroyed = [];\n            that._pageSize = options.pageSize;\n            that._page = options.page || (options.pageSize ? 1 : undefined);\n            that._sort = normalizeSort(options.sort);\n            that._sortFields = sortFields(options.sort);\n            that._filter = normalizeFilter(options.filter);\n            that._group = normalizeGroup(options.group);\n            that._aggregate = options.aggregate;\n            that._total = options.total;\n            that._groupPaging = options.groupPaging;\n\n            if (that._groupPaging) {\n                that._groupsState = {};\n            }\n            that._shouldDetachObservableParents = true;\n\n            Observable.fn.init.call(that);\n\n            that.transport = Transport.create(options, data, that);\n\n            if (isFunction(that.transport.push)) {\n                that.transport.push({\n                    pushCreate: that._pushCreate.bind(that),\n                    pushUpdate: that._pushUpdate.bind(that),\n                    pushDestroy: that._pushDestroy.bind(that)\n                });\n            }\n\n            if (options.offlineStorage != null) {\n                if (typeof options.offlineStorage == \"string\") {\n                    var key = options.offlineStorage;\n\n                    that._storage = {\n                        getItem: function() {\n                            return JSON.parse(localStorage.getItem(key));\n                        },\n                        setItem: function(item) {\n                            localStorage.setItem(key, stringify(that.reader.serialize(item)));\n                        }\n                    };\n                } else {\n                    that._storage = options.offlineStorage;\n                }\n            }\n\n            that.reader = new kendo.data.readers[options.schema.type || \"json\" ](options.schema);\n\n            model = that.reader.model || {};\n\n            that._detachObservableParents();\n\n            that._data = that._observe(that._data);\n            that._online = true;\n\n            that.bind([\"push\", ERROR, CHANGE, REQUESTSTART, SYNC, REQUESTEND, PROGRESS], options);\n        },\n\n        options: {\n            data: null,\n            schema: {\n               modelBase: Model\n            },\n            offlineStorage: null,\n            serverSorting: false,\n            serverPaging: false,\n            serverFiltering: false,\n            serverGrouping: false,\n            serverAggregates: false,\n            batch: false,\n            inPlaceSort: false\n        },\n\n        clone: function() {\n            return this;\n        },\n\n        online: function(value) {\n            if (value !== undefined) {\n                if (this._online != value) {\n                    this._online = value;\n\n                    if (value) {\n                        return this.sync();\n                    }\n                }\n\n                return $.Deferred().resolve().promise();\n            } else {\n                return this._online;\n            }\n        },\n\n        offlineData: function(state) {\n            if (this.options.offlineStorage == null) {\n                return null;\n            }\n\n            if (state !== undefined) {\n                return this._storage.setItem(state);\n            }\n\n            return this._storage.getItem() || [];\n        },\n\n        _isServerGrouped: function() {\n            var group = this.group() || [];\n\n            return this.options.serverGrouping && group.length;\n        },\n\n        _isServerGroupPaged: function() {\n            return this._isServerGrouped() && this._groupPaging;\n        },\n\n        _isGroupPaged: function() {\n            var group = this._group || [];\n\n            return this._groupPaging && group.length;\n        },\n\n        _pushCreate: function(result) {\n            this._push(result, \"pushCreate\");\n        },\n\n        _pushUpdate: function(result) {\n            this._push(result, \"pushUpdate\");\n        },\n\n        _pushDestroy: function(result) {\n            this._push(result, \"pushDestroy\");\n        },\n\n        _push: function(result, operation) {\n            var data = this._readData(result);\n\n            if (!data) {\n                data = result;\n            }\n\n            this[operation](data);\n        },\n\n        _flatData: function(data, skip) {\n            if (data) {\n                if (this._isServerGrouped()) {\n                    return flattenGroups(data);\n                }\n\n                if (!skip) {\n                    for (var idx = 0; idx < data.length; idx++) {\n                        data.at(idx);\n                    }\n                }\n            }\n\n            return data;\n        },\n\n        parent: noop,\n\n        get: function(id) {\n            var idx, length, data = this._flatData(this._data, this.options.useRanges);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].id == id) {\n                    return data[idx];\n                }\n            }\n        },\n\n        getByUid: function(id) {\n            return this._getByUid(id, this._data);\n        },\n\n        _getByUid: function(id, dataItems) {\n            var idx, length, data = this._flatData(dataItems, this.options.useRanges);\n\n            if (!data) {\n                return;\n            }\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].uid == id) {\n                    return data[idx];\n                }\n            }\n        },\n\n        indexOf: function(model) {\n            return indexOfModel(this._data, model);\n        },\n\n        at: function(index) {\n            return this._data.at(index);\n        },\n\n        data: function(value) {\n            var that = this;\n            if (value !== undefined) {\n                that._detachObservableParents();\n                that._data = this._observe(value);\n\n                that._pristineData = value.slice(0);\n\n                that._storeData();\n\n                that._ranges = [];\n                that.trigger(\"reset\");\n                that._addRange(that._data);\n\n                that._total = that._data.length;\n                that._pristineTotal = that._total;\n\n                that._process(that._data);\n            } else {\n                if (that._data) {\n                    for (var idx = 0; idx < that._data.length; idx++) {\n                        that._data.at(idx);\n                    }\n                }\n\n                return that._data;\n            }\n        },\n\n        view: function(value) {\n            if (value === undefined) {\n                return this._view;\n            } else {\n                this._view = this._observeView(value);\n            }\n        },\n\n        _observeView: function(data) {\n            var that = this;\n            replaceWithObservable(data, that._data, that._ranges, that.reader.model || ObservableObject, that._isServerGrouped());\n\n            var view = new LazyObservableArray(data, that.reader.model);\n            view.parent = function() { return that.parent(); };\n            return view;\n        },\n\n        flatView: function() {\n            var groups = this.group() || [];\n\n            if (groups.length) {\n                return flattenGroups(this._view);\n            } else {\n                return this._view;\n            }\n        },\n\n        add: function(model) {\n            return this.insert(this._data.length, model);\n        },\n\n        _createNewModel: function(model) {\n            if (this.reader.model) {\n                return new this.reader.model(model);\n            }\n\n            if (model instanceof ObservableObject) {\n                return model;\n            }\n\n            return new ObservableObject(model);\n        },\n\n        insert: function(index, model) {\n            if (!model) {\n                model = index;\n                index = 0;\n            }\n\n            if (!(model instanceof Model)) {\n                model = this._createNewModel(model);\n            }\n\n            if (this._isServerGrouped()) {\n                this._data.splice(index, 0, this._wrapInEmptyGroup(model));\n            } else {\n                this._data.splice(index, 0, model);\n            }\n\n            this._insertModelInRange(index, model);\n\n            return model;\n        },\n\n        pushInsert: function(index, items) {\n            var that = this;\n            var rangeSpan = that._getCurrentRangeSpan();\n\n            if (!items) {\n                items = index;\n                index = 0;\n            }\n\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var pushed = [];\n            var autoSync = this.options.autoSync;\n            this.options.autoSync = false;\n\n            try {\n                for (var idx = 0; idx < items.length; idx ++) {\n                    var item = items[idx];\n\n                    var result = this.insert(index, item);\n\n                    pushed.push(result);\n\n                    var pristine = result.toJSON();\n\n                    if (this._isServerGrouped()) {\n                        pristine = this._wrapInEmptyGroup(pristine);\n                    }\n\n                    this._pristineData.push(pristine);\n\n                    if (rangeSpan && rangeSpan.length) {\n                        $(rangeSpan).last()[0].pristineData.push(pristine);\n                    }\n\n                    index++;\n                }\n            } finally {\n                this.options.autoSync = autoSync;\n            }\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"create\",\n                    items: pushed\n                });\n            }\n        },\n\n        pushCreate: function(items) {\n            this.pushInsert(this._data.length, items);\n        },\n\n        pushUpdate: function(items) {\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var pushed = [];\n\n            for (var idx = 0; idx < items.length; idx ++) {\n                var item = items[idx];\n                var model = this._createNewModel(item);\n\n                var target = this.get(model.id);\n\n                if (target) {\n                    pushed.push(target);\n\n                    target.accept(item);\n\n                    target.trigger(CHANGE);\n\n                    this._updatePristineForModel(target, item);\n                } else {\n                    this.pushCreate(item);\n                }\n            }\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"update\",\n                    items: pushed\n                });\n            }\n        },\n\n        pushDestroy: function(items) {\n            var pushed = this._removeItems(items);\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"destroy\",\n                    items: pushed\n                });\n            }\n        },\n\n        _removeItems: function(items, removePristine) {\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var shouldRemovePristine = typeof removePristine !== \"undefined\" ? removePristine : true;\n\n            var destroyed = [];\n            var autoSync = this.options.autoSync;\n            this.options.autoSync = false;\n            try {\n                for (var idx = 0; idx < items.length; idx ++) {\n                    var item = items[idx];\n                    var model = this._createNewModel(item);\n                    var found = false;\n\n                    this._eachItem(this._data, function(items) {\n                        for (var idx = 0; idx < items.length; idx++) {\n                            var item = items.at(idx);\n                            if (item.id === model.id) {\n                                destroyed.push(item);\n                                items.splice(idx, 1);\n                                found = true;\n                                break;\n                            }\n                        }\n                    });\n\n                    if (found && shouldRemovePristine) {\n                        this._removePristineForModel(model);\n                        this._destroyed.pop();\n                    }\n                }\n            } finally {\n                this.options.autoSync = autoSync;\n            }\n\n            return destroyed;\n        },\n\n        pushMove: function(index, items) {\n            var pushed = this._moveItems(index, items);\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"update\",\n                    items: pushed\n                });\n            }\n        },\n\n        _moveItems: function(index, items) {\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var moved = [];\n            var autoSync = this.options.autoSync;\n            this.options.autoSync = false;\n\n            try {\n                for (var i = 0; i < items.length; i ++) {\n                    var item = items[i];\n                    var model = this._createNewModel(item);\n\n                    this._eachItem(this._data, function(dataItems) {\n                        for (var idx = 0; idx < dataItems.length; idx++) {\n                            var dataItem = dataItems.at(idx);\n                            if (dataItem.id === model.id) {\n                                moved.push(dataItem);\n                                dataItems.splice(index >= idx ? --index : index, 0, dataItems.splice(idx, 1)[0]);\n                                index++;\n                                break;\n                            }\n                        }\n                    });\n                }\n            } finally {\n                this.options.autoSync = autoSync;\n            }\n\n            return moved;\n        },\n\n        remove: function(model) {\n            var result,\n                that = this,\n                hasGroups = that._isServerGrouped();\n\n            if (hasGroups && model.uid && (!model.isNew || !model.isNew())) {\n                that._pushInDestroyed(model);\n            }\n\n            this._eachItem(that._data, function(items) {\n                result = removeModel(items, model);\n\n                if (result && hasGroups) {\n                    return true;\n                }\n            });\n\n            this._removeModelFromRanges(model);\n\n            return model;\n        },\n\n        destroyed: function() {\n            return this._destroyed;\n        },\n\n        created: function() {\n            var idx,\n                length,\n                result = [],\n                data = this._flatData(this._data, this.options.useRanges);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].isNew && data[idx].isNew()) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        updated: function() {\n            var idx,\n                length,\n                result = [],\n                data = this._flatData(this._data, this.options.useRanges);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if ((data[idx].isNew && !data[idx].isNew()) && data[idx].dirty) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        sync: function() {\n            var that = this,\n                created = [],\n                updated = [],\n                destroyed = that._destroyed;\n\n            var promise = $.Deferred().resolve().promise();\n\n            if (that.online()) {\n\n                if (!that.reader.model) {\n                    return promise;\n                }\n\n                created = that.created();\n                updated = that.updated();\n\n                var promises = [];\n\n                if (that.options.batch && that.transport.submit) {\n                    promises = that._sendSubmit(created, updated, destroyed);\n                } else {\n                    promises.push.apply(promises, that._send(\"create\", created));\n                    promises.push.apply(promises, that._send(\"update\", updated));\n                    promises.push.apply(promises, that._send(\"destroy\", destroyed));\n                }\n\n                promise = $.when\n                 .apply(null, promises)\n                 .then(function() {\n                    var idx, length;\n\n                    for (idx = 0, length = arguments.length; idx < length; idx++) {\n                        if (arguments[idx]) {\n                            that._accept(arguments[idx]);\n                        }\n                    }\n\n                    that._storeData(true);\n\n                    that._syncEnd();\n\n                    that._change({ action: \"sync\" });\n\n                    that.trigger(SYNC);\n\n                    if (that._isServerGroupPaged()) {\n                        that.read();\n                    }\n                });\n            } else {\n                that._storeData(true);\n\n                that._syncEnd();\n\n                that._change({ action: \"sync\" });\n            }\n\n            return promise;\n        },\n\n        _syncEnd: noop,\n\n        cancelChanges: function(model) {\n            var that = this;\n\n            if (model instanceof kendo.data.Model) {\n                that._cancelModel(model);\n            } else {\n                that._destroyed = [];\n                that._detachObservableParents();\n                that._data = that._observe(that._pristineData);\n                if (that.options.serverPaging) {\n                    that._total = that._pristineTotal;\n                }\n\n                that._ranges = [];\n                that._addRange(that._data, 0);\n\n                that._changesCanceled();\n\n                that._change();\n\n                that._markOfflineUpdatesAsDirty();\n\n                if (that._isServerGrouped()) {\n                    that.read();\n                }\n            }\n        },\n\n        _changesCanceled: noop,\n\n        _markOfflineUpdatesAsDirty: function() {\n            var that = this;\n\n            if (that.options.offlineStorage != null) {\n                that._eachItem(that._data, function(items) {\n                    for (var idx = 0; idx < items.length; idx++) {\n                        var item = items.at(idx);\n                        if (item.__state__ == \"update\" || item.__state__ == \"create\") {\n                            item.dirty = true;\n                        }\n                    }\n                });\n            }\n        },\n\n        hasChanges: function() {\n            var idx,\n                length,\n                data = this._flatData(this._data, this.options.useRanges);\n\n            if (this._destroyed.length) {\n                return true;\n            }\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if ((data[idx].isNew && data[idx].isNew()) || data[idx].dirty) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _accept: function(result) {\n            var that = this,\n                models = result.models,\n                response = result.response,\n                idx = 0,\n                serverGroup = that._isServerGrouped(),\n                pristine = that._pristineData,\n                type = result.type,\n                length;\n\n            that.trigger(REQUESTEND, { response: response, type: type });\n\n            if (response && !isEmptyObject(response)) {\n                response = that.reader.parse(response);\n\n                if (that._handleCustomErrors(response)) {\n                    return;\n                }\n\n                response = that.reader.data(response);\n\n                if (!isArray(response)) {\n                    response = [response];\n                }\n            } else {\n                response = $.map(models, function(model) { return model.toJSON(); } );\n            }\n\n            if (type === \"destroy\") {\n                that._destroyed = [];\n            }\n\n            for (idx = 0, length = models.length; idx < length; idx++) {\n                if (type !== \"destroy\") {\n                    models[idx].accept(response[idx]);\n\n                    if (type === \"create\") {\n                        pristine.push(serverGroup ? that._wrapInEmptyGroup(models[idx].toJSON()) : response[idx]);\n                    } else if (type === \"update\") {\n                        that._updatePristineForModel(models[idx], response[idx]);\n                    }\n                } else {\n                    that._removePristineForModel(models[idx]);\n                }\n            }\n        },\n\n        _updatePristineForModel: function(model, values) {\n            this._executeOnPristineForModel(model, function(index, items) {\n                kendo.deepExtend(items[index], values);\n            });\n        },\n\n        _executeOnPristineForModel: function(model, callback) {\n            this._eachPristineItem(\n                function(items) {\n                    var index = indexOfPristineModel(items, model);\n                    if (index > -1) {\n                        callback(index, items);\n                        return true;\n                    }\n                });\n        },\n\n        _removePristineForModel: function(model) {\n            this._executeOnPristineForModel(model, function(index, items) {\n                items.splice(index, 1);\n            });\n        },\n\n        _readData: function(data) {\n            var read = !this._isServerGrouped() ? this.reader.data : this.reader.groups;\n            return read.call(this.reader, data);\n        },\n\n        _eachPristineItem: function(callback) {\n            var that = this;\n            var options = that.options;\n            var rangeSpan = that._getCurrentRangeSpan();\n\n            that._eachItem(that._pristineData, callback);\n\n            if (options.serverPaging && options.useRanges) {\n                each(rangeSpan, function(i, range) {\n                    that._eachItem(range.pristineData, callback);\n                });\n            }\n        },\n\n       _eachItem: function(data, callback) {\n            if (data && data.length) {\n                if (this._isServerGrouped()) {\n                    eachGroupItems(data, callback);\n                } else {\n                    callback(data);\n                }\n            }\n        },\n\n        _pristineForModel: function(model) {\n            var pristine,\n                idx,\n                callback = function(items) {\n                    idx = indexOfPristineModel(items, model);\n                    if (idx > -1) {\n                        pristine = items[idx];\n                        return true;\n                    }\n                };\n\n            this._eachPristineItem(callback);\n\n            return pristine;\n        },\n\n        _cancelModel: function(model) {\n            var that = this;\n            var pristine = this._pristineForModel(model);\n\n            this._eachItem(this._data, function(items) {\n                var idx = indexOfModel(items, model);\n                if (idx >= 0) {\n                    if (pristine && (!model.isNew() || pristine.__state__)) {\n                        items[idx].accept(pristine);\n\n                        if (pristine.__state__ == \"update\") {\n                            items[idx].dirty = true;\n                        }\n\n                    } else {\n                        that._modelCanceled(model);\n\n                        items.splice(idx, 1);\n\n                        that._removeModelFromRanges(model);\n                    }\n                }\n            });\n        },\n\n        _modelCanceled: noop,\n\n        _submit: function(promises, data) {\n            var that = this;\n\n            that.trigger(REQUESTSTART, { type: \"submit\" });\n\n            that.trigger(PROGRESS);\n\n            that.transport.submit(extend({\n                success: function(response, type) {\n                    var promise = $.grep(promises, function(x) {\n                        return x.type == type;\n                    })[0];\n\n                    if (promise) {\n                        promise.resolve({\n                            response: response,\n                            models: promise.models,\n                            type: type\n                        });\n                    }\n                },\n                error: function(response, status, error) {\n                    for (var idx = 0; idx < promises.length; idx++) {\n                        promises[idx].reject(response);\n                    }\n\n                    that.error(response, status, error);\n                }\n            }, data));\n        },\n\n        _sendSubmit: function(created, updated, destroyed) {\n            var that = this,\n                promises = [];\n\n            if (that.options.batch) {\n                if (created.length) {\n                    promises.push($.Deferred(function(deferred) {\n                        deferred.type = \"create\";\n                        deferred.models = created;\n                    }));\n                }\n\n                if (updated.length) {\n                    promises.push($.Deferred(function(deferred) {\n                        deferred.type = \"update\";\n                        deferred.models = updated;\n                    }));\n                }\n\n                if (destroyed.length) {\n                    promises.push($.Deferred(function(deferred) {\n                        deferred.type = \"destroy\";\n                        deferred.models = destroyed;\n                    }));\n                }\n\n                that._submit(promises, {\n                    data: {\n                        created: that.reader.serialize(toJSON(created)),\n                        updated: that.reader.serialize(toJSON(updated)),\n                        destroyed: that.reader.serialize(toJSON(destroyed))\n                    }\n                });\n            }\n\n            return promises;\n        },\n\n        _promise: function(data, models, type) {\n            var that = this;\n\n            return $.Deferred(function(deferred) {\n                that.trigger(REQUESTSTART, { type: type });\n\n                that.trigger(PROGRESS);\n\n                that.transport[type].call(that.transport, extend({\n                    success: function(response) {\n                        deferred.resolve({\n                            response: response,\n                            models: models,\n                            type: type\n                        });\n                    },\n                    error: function(response, status, error) {\n                        deferred.reject(response);\n                        that.error(response, status, error);\n                    }\n                }, data));\n            }).promise();\n        },\n\n        _send: function(method, data) {\n            var that = this,\n                idx,\n                length,\n                promises = [],\n                converted = that.reader.serialize(toJSON(data));\n\n            if (that.options.batch) {\n                if (data.length) {\n                    promises.push(that._promise( { data: { models: converted } }, data , method));\n                }\n            } else {\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    promises.push(that._promise( { data: converted[idx] }, [ data[idx] ], method));\n                }\n            }\n\n            return promises;\n        },\n\n        read: function(data) {\n            var that = this, params = that._params(data);\n            var deferred = $.Deferred();\n\n            that._queueRequest(params, function() {\n                var isPrevented = that.trigger(REQUESTSTART, { type: \"read\" });\n                if (!isPrevented) {\n                    that.trigger(PROGRESS);\n\n                    that._ranges = [];\n                    that.trigger(\"reset\");\n                    if (that.online()) {\n                        that.transport.read({\n                            data: params,\n                            success: function(data) {\n                                that._ranges = [];\n                                that.success(data, params);\n\n                                deferred.resolve();\n                            },\n                            error: function() {\n                                var args = slice.call(arguments);\n\n                                that.error.apply(that, args);\n\n                                deferred.reject.apply(deferred, args);\n                            }\n                        });\n                    } else if (that.options.offlineStorage != null) {\n                        that.success(that.offlineData(), params);\n\n                        deferred.resolve();\n                    }\n                } else {\n                    that._dequeueRequest();\n\n                    deferred.resolve(isPrevented);\n                }\n            });\n\n            return deferred.promise();\n        },\n\n        _readAggregates: function(data) {\n            return this.reader.aggregates(data);\n        },\n\n        success: function(data) {\n            var that = this,\n                options = that.options,\n                items,\n                replaceSubset;\n\n            that.trigger(REQUESTEND, { response: data, type: \"read\" });\n\n            if (that.online()) {\n                data = that.reader.parse(data);\n\n                if (that._handleCustomErrors(data)) {\n                    that._dequeueRequest();\n                    return;\n                }\n\n                that._total = that.reader.total(data);\n\n                if (that._isServerGroupPaged()) {\n                    that._serverGroupsTotal = that._total;\n                }\n\n                if (that._pageSize > that._total) {\n                    that._pageSize = that._total;\n                    if (that.options.pageSize && that.options.pageSize > that._pageSize) {\n                        that._pageSize = that.options.pageSize;\n                    }\n                }\n\n                if (that._aggregate && options.serverAggregates) {\n                    that._aggregateResult = that._readAggregates(data);\n                }\n\n                data = that._readData(data);\n\n                that._destroyed = [];\n            } else {\n                data = that._readData(data);\n\n                items = [];\n                var itemIds = {};\n                var model = that.reader.model;\n                var idField = model ? model.idField : \"id\";\n                var idx;\n\n                for (idx = 0; idx < this._destroyed.length; idx++) {\n                    var id = this._destroyed[idx][idField];\n                    itemIds[id] = id;\n                }\n\n                for (idx = 0; idx < data.length; idx++) {\n                    var item = data[idx];\n                    var state = item.__state__;\n                    if (state == \"destroy\") {\n                        if (!itemIds[item[idField]]) {\n                            this._pushInDestroyed(this._createNewModel(item));\n                        }\n                    } else {\n                        items.push(item);\n                    }\n                }\n\n                data = items;\n\n                that._total = data.length;\n            }\n\n            that._pristineTotal = that._total;\n            replaceSubset = that._skip && that._data.length && that._skip < that._data.length;\n\n            if (that.options.endless) {\n                if (replaceSubset) {\n                    that._pristineData.splice(that._skip, that._pristineData.length);\n                }\n                items = data.slice(0);\n                for (var j = 0; j < items.length; j++) {\n                    that._pristineData.push(items[j]);\n                }\n            } else {\n                that._pristineData = data.slice(0);\n            }\n\n            that._detachObservableParents();\n\n            if (that.options.endless) {\n                that._data.unbind(CHANGE, that._changeHandler);\n\n                if (that._isServerGrouped() && that._data[that._data.length - 1].value === data[0].value) {\n                    fillLastGroup(that._data[that._data.length - 1], data[0]);\n                    data.shift();\n                }\n\n                data = that._observe(data);\n                if (replaceSubset) {\n                    that._data.splice(that._skip, that._data.length);\n                }\n                for (var i = 0; i < data.length; i++) {\n                    that._data.push(data[i]);\n                }\n                that._data.bind(CHANGE, that._changeHandler);\n            } else {\n                that._data = that._observe(data);\n            }\n\n            that._markOfflineUpdatesAsDirty();\n\n            that._storeData();\n\n            that._addRange(that._data);\n\n            that._process(that._data);\n\n            that._dequeueRequest();\n        },\n\n        _detachObservableParents: function() {\n            if (this._data && this._shouldDetachObservableParents) {\n                for (var idx = 0; idx < this._data.length; idx++) {\n                    if (this._data[idx].parent) {\n                        this._data[idx].parent = noop;\n                    }\n                }\n            }\n        },\n\n        _storeData: function(updatePristine) {\n            var serverGrouping = this._isServerGrouped();\n            var model = this.reader.model;\n\n            function items(data) {\n                var state = [];\n\n                for (var idx = 0; idx < data.length; idx++) {\n                    var dataItem = data.at(idx);\n                    var item = dataItem.toJSON();\n\n                    if (serverGrouping && dataItem.items) {\n                        item.items = items(dataItem.items);\n                    } else {\n                        item.uid = dataItem.uid;\n\n                        if (model) {\n                            if (dataItem.isNew()) {\n                                item.__state__ = \"create\";\n                            } else if (dataItem.dirty) {\n                                item.__state__ = \"update\";\n                            }\n                        }\n                    }\n                    state.push(item);\n                }\n\n                return state;\n            }\n\n            if (this.options.offlineStorage != null) {\n                var state = items(this._data);\n\n                var destroyed = [];\n\n                for (var idx = 0; idx < this._destroyed.length; idx++) {\n                    var item = this._destroyed[idx].toJSON();\n                    item.__state__ = \"destroy\";\n                    destroyed.push(item);\n                }\n\n                this.offlineData(state.concat(destroyed));\n\n                if (updatePristine) {\n                    this._pristineData = this.reader.reader ? this.reader.reader._wrapDataAccessBase(state) : this.reader._wrapDataAccessBase(state);\n                }\n            }\n        },\n\n        _addRange: function(data, skip) {\n            var that = this,\n                start = typeof (skip) !== \"undefined\" ? skip : (that._skip || 0),\n                end,\n                range = {\n                    data: data,\n                    pristineData: data.toJSON(),\n                    timestamp: that._timeStamp()\n                };\n\n            if (this._isGroupPaged()) {\n                end = start + data.length;\n                range.outerStart = start;\n                range.outerEnd = end;\n            } else {\n                end = start + that._flatData(data, true).length;\n            }\n\n            range.start = start;\n            range.end = end;\n            that._ranges.push(range);\n            that._sortRanges();\n\n            if (that._isGroupPaged()) {\n                if (!that._groupsFlat) {\n                    that._groupsFlat = [];\n                }\n                that._appendToGroupsFlat(range.data);\n                that._updateOuterRangesLength();\n            }\n        },\n\n        _appendToGroupsFlat: function(data) {\n            var length = data.length;\n\n            for (var i = 0; i < length; i++) {\n                this._groupsFlat.push(data[i]);\n            }\n        },\n\n        _getGroupByUid: function(uid) {\n            var length = this._groupsFlat.length;\n            var group;\n\n            for (var i = 0; i < length; i++) {\n                group = this._groupsFlat[i];\n                if (group.uid === uid) {\n                    return group;\n                }\n            }\n        },\n\n        _sortRanges: function() {\n            this._ranges.sort(function(x, y) {\n                return x.start - y.start;\n            });\n        },\n\n        error: function(xhr, status, errorThrown) {\n            this._dequeueRequest();\n            this.trigger(REQUESTEND, { });\n            this.trigger(ERROR, { xhr: xhr, status: status, errorThrown: errorThrown });\n        },\n\n        _params: function(data) {\n            var that = this,\n                options = extend({\n                    take: that.take(),\n                    skip: that.skip(),\n                    page: that.page(),\n                    pageSize: that.pageSize(),\n                    sort: that._sort,\n                    filter: that._filter,\n                    group: that._group,\n                    aggregate: that._aggregate,\n                    groupPaging: !!that._groupPaging\n                }, data);\n\n            if (!that.options.serverPaging) {\n                delete options.take;\n                delete options.skip;\n                delete options.page;\n                delete options.pageSize;\n            }\n\n            if (!that.options.serverGrouping) {\n                delete options.group;\n            } else if (that.reader.model && options.group) {\n                options.group = convertDescriptorsField(options.group, that.reader.model);\n            }\n\n            if (!that.options.serverFiltering) {\n                delete options.filter;\n            } else if (that.reader.model && options.filter) {\n               options.filter = convertFilterDescriptorsField(options.filter, that.reader.model);\n            }\n\n            if (!that.options.serverSorting) {\n                delete options.sort;\n            } else if (that.reader.model && options.sort) {\n                options.sort = convertDescriptorsField(options.sort, that.reader.model);\n            }\n\n            if (!that.options.serverAggregates) {\n                delete options.aggregate;\n            } else if (that.reader.model && options.aggregate) {\n                options.aggregate = convertDescriptorsField(options.aggregate, that.reader.model);\n            }\n\n            if (!that.options.groupPaging) {\n                delete options.groupPaging;\n            }\n\n            return options;\n        },\n\n        _queueRequest: function(options, callback) {\n            var that = this;\n            if (!that._requestInProgress) {\n                that._requestInProgress = true;\n                that._pending = undefined;\n                callback();\n            } else {\n                that._pending = { callback: callback.bind(that), options: options };\n            }\n        },\n\n        _dequeueRequest: function() {\n            var that = this;\n            that._requestInProgress = false;\n            if (that._pending) {\n                that._queueRequest(that._pending.options, that._pending.callback);\n            }\n        },\n\n        _handleCustomErrors: function(response) {\n            if (this.reader.errors) {\n                var errors = this.reader.errors(response);\n                if (errors) {\n                    this.trigger(ERROR, { xhr: null, status: \"customerror\", errorThrown: \"custom error\", errors: errors });\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _shouldWrap: function(data) {\n            var model = this.reader.model;\n\n            if (model && data.length) {\n                return !(data[0] instanceof model);\n            }\n\n            return false;\n        },\n\n        _observe: function(data) {\n            var that = this,\n                model = that.reader.model;\n\n            that._shouldDetachObservableParents = true;\n\n            if (data instanceof ObservableArray) {\n                that._shouldDetachObservableParents = false;\n                if (that._shouldWrap(data)) {\n                    data.type = that.reader.model;\n                    data.wrapAll(data, data);\n                }\n            } else {\n                var arrayType = that.pageSize() && !that.options.serverPaging ? LazyObservableArray : ObservableArray;\n                data = new arrayType(data, that.reader.model);\n                data.parent = function() { return that.parent(); };\n            }\n\n            if (that._isServerGrouped()) {\n                wrapGroupItems(data, model);\n            }\n\n            if (that._changeHandler && that._data && that._data instanceof ObservableArray &&\n                !(that.options.useRanges && that.options.serverPaging)) {\n                that._data.unbind(CHANGE, that._changeHandler);\n            } else {\n                that._changeHandler = that._change.bind(that);\n            }\n\n            return data.bind(CHANGE, that._changeHandler);\n        },\n\n        _updateTotalForAction: function(action, items) {\n            var that = this;\n\n            var total = parseInt(that._total, 10);\n\n            if (!isNumber(that._total)) {\n                total = parseInt(that._pristineTotal, 10);\n            }\n            if (action === \"add\") {\n                total += items.length;\n            } else if (action === \"remove\") {\n                total -= items.length;\n            } else if (action !== \"itemchange\" && action !== \"sync\" && !that.options.serverPaging) {\n                total = that._pristineTotal;\n            } else if (action === \"sync\") {\n                total = that._pristineTotal = parseInt(that._total, 10);\n            }\n\n            that._total = total;\n        },\n\n        _pushInDestroyed: function(model) {\n            var isPushed = this._destroyed.find(function(item) {\n                return item.uid === model.uid;\n            });\n            if (!isPushed) {\n                this._destroyed.push(model);\n            }\n        },\n\n        _change: function(e) {\n            var that = this, idx, length, action = e ? e.action : \"\";\n\n            if (action === \"remove\") {\n                for (idx = 0, length = e.items.length; idx < length; idx++) {\n                    if (!e.items[idx].isNew || !e.items[idx].isNew()) {\n                        that._pushInDestroyed(e.items[idx]);\n                    }\n                }\n            }\n\n            if (that.options.autoSync && (action === \"add\" || action === \"remove\" || action === \"itemchange\")) {\n\n                var handler = function(args) {\n                    if (args.action === \"sync\") {\n                        that.unbind(\"change\", handler);\n                        that._updateTotalForAction(action, e.items);\n                    }\n                };\n\n                that.first(\"change\", handler);\n\n                that.sync();\n\n            } else {\n                that._updateTotalForAction(action, e ? e.items : []);\n\n                that._process(that._data, e);\n            }\n        },\n\n        _calculateAggregates: function(data, options) {\n            options = options || {};\n\n            var query = new Query(data),\n                aggregates = options.aggregate,\n                filter = options.filter;\n\n            if (filter) {\n                query = query.filter(filter);\n            }\n\n            return query.aggregate(aggregates);\n        },\n\n        _process: function(data, e) {\n            var that = this,\n                options = {},\n                result;\n\n            if (that.options.serverPaging !== true) {\n                options.skip = that._skip;\n                options.take = that._take || that._pageSize;\n\n                if (options.skip === undefined && that._page !== undefined && that._pageSize !== undefined) {\n                    options.skip = (that._page - 1) * that._pageSize;\n                }\n\n                if (that.options.useRanges) {\n                    options.skip = that.currentRangeStart();\n                }\n            }\n\n            if (that.options.serverSorting !== true) {\n                options.sort = that._sort;\n            }\n\n            if (that.options.serverFiltering !== true) {\n                options.filter = that._filter;\n            }\n\n            if (that.options.serverGrouping !== true) {\n                options.group = that._group;\n            }\n\n            if (that.options.serverAggregates !== true) {\n                options.aggregate = that._aggregate;\n            }\n\n            if (that.options.serverGrouping) {\n                that._clearEmptyGroups(data);\n            }\n\n            options.groupPaging = that._groupPaging;\n\n            if (that._isGroupPaged() && e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                result = that._queryProcess(data, {\n                    aggregate: that._aggregate\n                });\n            } else {\n                result = that._queryProcess(data, options);\n            }\n\n            if (that._filter && e && e.action === \"add\") {\n                var model = e.items[0],\n                    resultData = result.data;\n\n                var modelIsInView = resultData.find(function(item) {\n                    return item.uid === model.uid;\n                });\n\n                if (!modelIsInView) {\n                    result.data.splice(model.index, 0, model);\n                    result.total++;\n                }\n            }\n\n            if (that.options.serverAggregates !== true) {\n                // for performance reasons, calculate aggregates for part of the data only after query process\n                // this is necessary in the TreeList when paging\n                that._aggregateResult = that._calculateAggregates(result.dataToAggregate || data, options);\n            }\n\n            that._setView(result, options, e);\n\n            that._setFilterTotal(result.total, false);\n\n            e = e || {};\n\n            e.items = e.items || that._view;\n\n            that.trigger(CHANGE, e);\n        },\n\n        _setView: function(result, options, e) {\n            var that = this;\n\n            if (that._isGroupPaged() && !that._isServerGrouped()) {\n                if (e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                    that.view(result.data);\n                    that._updateOuterRangesLength();\n                } else {\n                    that._ranges = [];\n                    var query = new Query(result.data);\n                    that._addRange(that._observe(result.data));\n\n                    if (options.skip + options.take > result.data.length) {\n                        options.skip = result.data.length - options.take;\n                    }\n\n                    that.view(query.range(options.skip, options.take).toArray());\n                }\n\n            } else {\n                that.view(result.data);\n            }\n        },\n\n        _clearEmptyGroups: function(data) {\n            for (var idx = data.length - 1; idx >= 0; idx--) {\n                var group = data[idx];\n                if (group.hasSubgroups) {\n                    this._clearEmptyGroups(group.items);\n                }\n\n                if (group.items && !group.items.length && !group.itemCount) {\n                    splice.apply(group.parent(), [idx, 1]);\n                }\n            }\n        },\n\n        _queryProcess: function(data, options) {\n            if (this.options.inPlaceSort) {\n                return Query.process(data, options, this.options.inPlaceSort);\n            }\n            else {\n                return Query.process(data, options);\n            }\n        },\n\n        _mergeState: function(options) {\n            var that = this;\n\n            if (options !== undefined) {\n                that._pageSize = options.pageSize;\n                that._page = options.page;\n                that._sort = options.sort;\n                that._filter = options.filter;\n                that._group = options.group;\n                that._aggregate = options.aggregate;\n                that._skip = that._currentRangeStart = options.skip;\n                that._take = options.take;\n\n                if (that._skip === undefined) {\n                    that._skip = that._currentRangeStart = that.skip();\n                    options.skip = that.skip();\n                }\n\n                if (that._take === undefined && that._pageSize !== undefined) {\n                    that._take = that._pageSize;\n                    options.take = that._take;\n                }\n\n                if (that.options.virtual) {\n                    options.virtual = that.options.virtual;\n                }\n\n                if (options.sort) {\n                    that._sort = options.sort = normalizeSort(options.sort);\n                    that._sortFields = sortFields(options.sort);\n                }\n\n                if (options.filter) {\n                    that._filter = options.filter = (that.options.accentFoldingFiltering && !$.isEmptyObject(options.filter)) ? $.extend({}, normalizeFilter(options.filter), { accentFoldingFiltering: that.options.accentFoldingFiltering }) : normalizeFilter(options.filter);\n                }\n\n                if (options.group) {\n                    that._group = options.group = normalizeGroup(options.group);\n                }\n                if (options.aggregate) {\n                    that._aggregate = options.aggregate = normalizeAggregate(options.aggregate);\n                }\n            }\n            return options;\n        },\n\n        query: function(options) {\n            var result;\n            var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n\n            if (remote || ((this._data === undefined || this._data.length === 0) && !this._destroyed.length)) {\n                if (this.options.endless) {\n                    var moreItemsCount = options.pageSize - this.pageSize();\n                    if (moreItemsCount > 0) {\n                        moreItemsCount = this.pageSize();\n                        options.page = options.pageSize / moreItemsCount;\n                        options.pageSize = moreItemsCount;\n                    } else {\n                        options.page = 1;\n                        this.options.endless = false;\n                    }\n                }\n                return this.read(this._mergeState(options));\n            }\n\n            var isPrevented = this.trigger(REQUESTSTART, { type: \"read\" });\n            if (!isPrevented) {\n                this.trigger(PROGRESS);\n                if (options) {\n                    options.groupPaging = this._groupPaging;\n                }\n                result = this._queryProcess(this._data, this._mergeState(options));\n\n                this._setFilterTotal(result.total, true);\n\n                this._aggregateResult = this._calculateAggregates(result.dataToAggregate || this._data, options);\n                this._setView(result, options);\n                this.trigger(REQUESTEND, { type: \"read\" });\n                this.trigger(CHANGE, { items: result.data, action: options ? options.action : \"\" });\n            }\n\n            return $.Deferred().resolve(isPrevented).promise();\n        },\n\n        _hasExpandedSubGroups: function(group) {\n            var result = false;\n            var length = group.items ? group.items.length : 0;\n\n            if (!group.hasSubgroups) {\n                return false;\n            }\n\n            for (var i = 0; i < length; i++) {\n                if (this._groupsState[group.items[i].uid]) {\n                    result = true;\n                    break;\n                }\n            }\n            return result;\n        },\n\n        _findGroupedRange: function(data, result, options, parents, callback) {\n            var that = this;\n            var length = data.length;\n            var group;\n            var current;\n            var itemsLength;\n            var groupCount;\n            var itemsToSkip;\n\n            for (var i = 0; i < length; i++) {\n                group = data[i];\n\n                if (options.taken >= options.take) {\n                    break;\n                }\n\n                if (!that._getGroupByUid(group.uid)) {\n                    that._groupsFlat.push(group);\n                }\n\n                if (that._groupsState[group.uid]) {\n                    if (that._isServerGroupPaged()) {\n                       if (that._fetchGroupItems(group, options, parents, callback)) {\n                            that._fetchingGroupItems = true;\n                            return;\n                       }\n                       groupCount = (group.subgroupCount || group.itemCount) + 1;\n                       itemsToSkip = options.skip - options.skipped;\n                       if (!that._hasExpandedSubGroups(group) && itemsToSkip > groupCount) {\n                           options.skipped += groupCount;\n                           continue;\n                       }\n                    }\n\n                    if (options.includeParents && options.skipped < options.skip) {\n                        options.skipped++;\n                        group.excludeHeader = true;\n                    } else if (options.includeParents) {\n                        options.taken++;\n                        group.excludeHeader = false;\n                    }\n\n                    if (group.hasSubgroups && group.items && group.items.length) {\n                        group.currentItems = [];\n\n                        if (!parents) {\n                            parents = [];\n                        }\n                        parents.push(group);\n\n                        that._findGroupedRange(group.items, group.currentItems, options, parents, callback);\n                        parents.pop();\n\n                        if (group.currentItems.length || options.taken > 0) {\n                            result.push(group);\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    } else {\n                        current = [];\n                        itemsLength = group.items.length;\n\n                        for (var j = 0; j < itemsLength; j++) {\n                            if (options.skipped < options.skip) {\n                                options.skipped++;\n                                continue;\n                            }\n\n                            if (options.taken >= options.take) {\n                                break;\n                            }\n                            current.push(group.items[j]);\n                            options.taken++;\n                        }\n\n                        if (current.length || options.taken > 0) {\n                            group.currentItems = current;\n                            result.push(group);\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    }\n                } else {\n                    if (options.skipped < options.skip) {\n                        options.skipped++;\n                        continue;\n                    }\n                    result.push(group);\n                    options.taken++;\n                }\n            }\n        },\n\n        _expandedSubGroupItemsCount: function(group, end, includeCurrentItems) {\n            var that = this;\n            var result = 0;\n            var subGroup;\n            var endSpecified = typeof end === \"number\";\n            var length = endSpecified ? end : group.subgroupCount;\n            var temp;\n\n            if (!group.hasSubgroups) {\n                return result;\n            }\n\n            for (var i = 0; i < length; i++) {\n                subGroup = group.items[i];\n\n                if (!subGroup) {\n                    break;\n                }\n\n                if (subGroup.hasSubgroups && that._groupsState[group.uid]) {\n                    temp = that._expandedSubGroupItemsCount(subGroup, length, true);\n                    result += temp;\n\n                    if (endSpecified) {\n                        length -= temp;\n                    }\n                } else if (!subGroup.hasSubgroups && that._groupsState[subGroup.uid]) {\n                    temp = subGroup.items ? subGroup.items.length : 0;\n                    result += temp;\n                    if (endSpecified) {\n                        length -= temp;\n                    }\n                }\n\n                if (includeCurrentItems) {\n                    result += 1;\n                    if (endSpecified) {\n                        length -= 1;\n                    }\n                }\n\n                if (endSpecified && result > length) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        _fetchGroupItems: function(group, options, parents, callback) {\n            var that = this;\n            var groupItemsSkip;\n            var firstItem;\n            var lastItem;\n            var groupItemCount = group.hasSubgroups ? group.subgroupCount : group.itemCount;\n            var take = options.take;\n            var skipped = options.skipped;\n            var pageSize = that.take();\n            var expandedSubGroupItemsCount;\n\n            if (options.includeParents) {\n                if (skipped < options.skip) {\n                    skipped += 1;\n                } else {\n                    take -= 1;\n                }\n            }\n\n            if (!group.items || (group.items && !group.items.length)) {\n                that.getGroupItems(group, options, parents, callback, 0);\n                return true;\n            } else {\n                expandedSubGroupItemsCount = this._expandedSubGroupItemsCount(group, options.skip - skipped);\n                groupItemsSkip = Math.max(options.skip - (skipped + expandedSubGroupItemsCount), 0);\n\n                if (groupItemsSkip >= groupItemCount) {\n                    return false;\n                }\n\n                firstItem = group.items[groupItemsSkip];\n                lastItem = group.items[Math.min(groupItemsSkip + take, groupItemCount - 1)];\n\n                if (firstItem.notFetched) {\n                    that.getGroupItems(group, options, parents, callback, math.max(math.floor(groupItemsSkip / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                    return true;\n                }\n\n                if (lastItem.notFetched) {\n                    that.getGroupItems(group, options, parents, callback, math.max(math.floor((groupItemsSkip + pageSize) / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                    return true;\n                }\n            }\n        },\n\n        getGroupItems: function(group, options, parents, callback, groupItemsSkip, page) {\n            var that = this;\n            var take;\n            var filter;\n            var data;\n            var subgroups;\n\n            if (!group.items) {\n                group.items = [];\n            }\n\n            take = that.take();\n            filter = this._composeItemsFilter(group, parents);\n            data = {\n                page: page || 1,\n                pageSize: take,\n                skip: groupItemsSkip,\n                take: take,\n                filter: filter,\n                aggregate: that._aggregate,\n                sort: that._sort\n            };\n            subgroups = that.findSubgroups(group);\n\n            if (subgroups && subgroups.length) {\n                data.group = subgroups;\n                data.groupPaging = true;\n            }\n\n            clearTimeout(that._timeout);\n            that._timeout = setTimeout(function() {\n                that._queueRequest(data, function() {\n                    if (!that.trigger(REQUESTSTART, {\n                            type: \"read\"\n                        })) {\n                        that.transport.read({\n                            data: data,\n                            success: that._groupItemsSuccessHandler(group, options.skip, that.take(), callback, groupItemsSkip),\n                            error: function() {\n                                var args = slice.call(arguments);\n                                that.error.apply(that, args);\n                            }\n                        });\n                    } else {\n                        that._dequeueRequest();\n                    }\n                });\n            }, 100);\n        },\n\n        _groupItemsSuccessHandler: function(group, skip, take, callback, groupItemsSkip) {\n            var that = this;\n            var timestamp = that._timeStamp();\n            callback = isFunction(callback) ? callback : noop;\n            var totalField = that.options.schema && that.options.schema.total ? that.options.schema.total : \"Total\";\n\n            return function(data) {\n                var temp;\n                var model = Model.define(that.options.schema.model);\n                var totalCount;\n\n                that._dequeueRequest();\n\n                that.trigger(REQUESTEND, {\n                    response: data,\n                    type: \"read\"\n                });\n\n                if (isFunction(totalField)) {\n                    totalCount = totalField(data);\n                } else {\n                    totalCount = data[totalField];\n                }\n\n                data = that.reader.parse(data);\n\n                if (group.hasSubgroups) {\n                    temp = that.reader.groups(data);\n                    group.subgroupCount = totalCount;\n                } else {\n                    temp = that.reader.data(data);\n                    temp = temp.map(function(item) {\n                        return new model(item);\n                    });\n                }\n\n                group.items.omitChangeEvent = true;\n                for (var i = 0; i < totalCount; i++) {\n                    if (i >= groupItemsSkip && i < (groupItemsSkip + take) ) {\n                        group.items.splice(i, 1, temp[i - groupItemsSkip]);\n                    } else {\n                        if (!group.items[i]) {\n                            group.items.splice(i, 0, { notFetched: true });\n                        }\n                    }\n                }\n                group.items.omitChangeEvent = false;\n\n                that._updateRangePristineData(group);\n                that._fetchingGroupItems = false;\n\n                if (!group.countAdded) {\n                    that._serverGroupsTotal += totalCount;\n                    group.countAdded = true;\n                }\n\n                that.range(skip, take, callback, \"expandGroup\");\n\n                if (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress) {\n                    that.trigger(CHANGE, {});\n                }\n            };\n        },\n\n        findSubgroups: function(group) {\n            var indexOfCurrentGroup = this._group.map(function(g) {\n                return g.field;\n            }).indexOf(group.field);\n\n            return this._group.slice(indexOfCurrentGroup + 1, this._group.length);\n        },\n\n        _composeItemsFilter: function(group, parents) {\n            var filter = this.filter() || {\n                logic: \"and\",\n                filters: []\n            };\n\n            filter.logic = 'and';\n            filter = extend(true, {}, filter);\n            filter.filters.push({\n                field: group.field,\n                operator: \"eq\",\n                value: group.value\n            });\n\n            if (parents) {\n                for (var i = 0; i < parents.length; i++) {\n                    filter.filters.push({\n                        field: parents[i].field,\n                        operator: \"eq\",\n                        value: parents[i].value\n                    });\n                }\n            }\n\n            return filter;\n        },\n\n        _updateRangePristineData: function(group) {\n            var that = this;\n            var ranges = that._ranges;\n            var rangesLength = ranges.length;\n            var temp;\n            var currentGroup;\n            var range;\n            var dataLength;\n            var indexes;\n            var currIdx;\n\n            for (var i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                dataLength = range.data.length;\n                indexes = [];\n                temp = null;\n\n                for (var j = 0; j < dataLength; j++) {\n                    currentGroup = range.data[j];\n                    indexes.push(j);\n\n                    if ((currentGroup.uid === group.uid) || (currentGroup.hasSubgroups && currentGroup.items.length && that._containsSubGroup(currentGroup, group, indexes))) {\n                        break;\n                    }\n                    indexes.pop();\n                }\n\n                if (indexes.length) {\n                    temp = ranges[i].pristineData;\n\n                    while (indexes.length > 1) {\n                        currIdx = indexes.splice(0, 1)[0];\n                        temp = temp[currIdx].items;\n                    }\n                    temp[indexes[0]] = that._cloneGroup(group);\n                    break;\n                }\n            }\n        },\n\n        _containsSubGroup: function(group, subgroup, indexes) {\n            var that = this;\n            var length = group.items.length;\n            var currentSubGroup;\n\n            if (group.hasSubgroups && length) {\n                for (var i = 0; i < length; i++) {\n                    currentSubGroup = group.items[i];\n                    indexes.push(i);\n                    if (currentSubGroup.uid === subgroup.uid ||\n                            (currentSubGroup.hasSubgroups &&\n                            currentSubGroup.items.length &&\n                            that._containsSubGroup(currentSubGroup, subgroup, indexes))) {\n                        return true;\n                    }\n                    indexes.pop();\n                }\n            }\n\n        },\n\n        _cloneGroup: function(group) {\n            var that = this;\n            group = typeof group.toJSON == \"function\" ? group.toJSON() : group;\n\n            if (group.items && group.items.length) {\n                group.items = group.items.map(function(item) {\n                    return that._cloneGroup(item);\n                });\n            }\n\n            return group;\n        },\n\n        _setFilterTotal: function(filterTotal, setDefaultValue) {\n            var that = this;\n\n            if (!that.options.serverFiltering) {\n                if (filterTotal !== undefined) {\n                    that._total = filterTotal;\n                } else if (setDefaultValue) {\n                    that._total = that._data.length;\n                }\n            }\n        },\n\n        fetch: function(callback) {\n            var that = this;\n            var fn = function(isPrevented) {\n                if (isPrevented !== true && isFunction(callback)) {\n                    callback.call(that);\n                }\n            };\n\n            return this._query().done(fn);\n        },\n\n        _query: function(options) {\n            var that = this;\n\n            return that.query(extend({}, {\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that.sort(),\n                filter: that.filter(),\n                group: that.group(),\n                aggregate: that.aggregate()\n            }, options));\n        },\n\n        next: function(options) {\n            var that = this,\n                page = that.page(),\n                total = that.total();\n\n            options = options || {};\n\n            if (!page || (total && page + 1 > that.totalPages())) {\n                return;\n            }\n\n            that._skip = that._currentRangeStart = page * that.take();\n\n            page += 1;\n            options.page = page;\n\n            that._query(options);\n\n            return page;\n        },\n\n        prev: function(options) {\n            var that = this,\n                page = that.page();\n\n            options = options || {};\n\n            if (!page || page === 1) {\n                return;\n            }\n\n            that._skip = that._currentRangeStart = that._skip - that.take();\n\n            page -= 1;\n            options.page = page;\n\n            that._query(options);\n\n            return page;\n        },\n\n        page: function(val) {\n            var that = this,\n            skip;\n\n            if (val !== undefined) {\n                val = math.max(math.min(math.max(val, 1), that.totalPages()), 1);\n                var take = that.take();\n\n                if (that._isGroupPaged()) {\n                    val -= 1;\n                    that.range(val * take, take, null, \"page\");\n                    return;\n                }\n                that._query(that._pageableQueryOptions({ page: val }));\n                return;\n            }\n            skip = that.skip();\n\n            return skip !== undefined ? math.round((skip || 0) / (that.take() || 1)) + 1 : undefined;\n        },\n\n        pageSize: function(val) {\n            var that = this;\n\n            if (val !== undefined) {\n                that._query(that._pageableQueryOptions({ pageSize: val, page: 1 }));\n                return;\n            }\n\n            return that.take();\n        },\n\n        sort: function(val) {\n            var that = this;\n\n            if (val !== undefined) {\n                that.trigger(\"sort\");\n                that._query({ sort: val });\n                return;\n            }\n\n            return that._sort;\n        },\n\n        filter: function(val) {\n            var that = this;\n\n            if (val === undefined) {\n                return that._filter;\n            }\n\n            that.trigger(\"reset\");\n            that._query({ filter: val, page: 1 });\n        },\n\n        group: function(val) {\n            var that = this;\n            var options = { group: val };\n\n            if (that._groupPaging) {\n                // clear ranges if ungrouping is performed\n                if (val !== undefined && (!val || !val.length) ) {\n                    that._ranges = [];\n                }\n                options.page = 1;\n            }\n\n            if (val !== undefined) {\n                that._query(options);\n                return;\n            }\n\n            return that._group;\n        },\n\n        getGroupsFlat: function(data) {\n            var idx,\n                result = [],\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                var group = data[idx];\n                if (group.hasSubgroups) {\n                    result = result.concat(this.getGroupsFlat(group.items));\n                }\n\n                result.push(group);\n            }\n\n            return result;\n        },\n\n        total: function() {\n            return parseInt(this._total || 0, 10);\n        },\n\n        groupsTotal: function(includeExpanded) {\n            var that = this;\n\n            if (!that._group.length) {\n                return that.total();\n            }\n\n            if (that._isServerGrouped()) {\n                if (that._serverGroupsTotal) {\n                    return that._serverGroupsTotal;\n                }\n                that._serverGroupsTotal = that.total();\n\n                return that._serverGroupsTotal;\n            }\n\n            return that._calculateGroupsTotal(that._ranges.length ? that._ranges[0].data : [], includeExpanded);\n        },\n\n        _calculateGroupsTotal: function(groups, includeExpanded, itemsField, ignoreState) {\n            var that = this;\n            itemsField = itemsField || \"items\";\n            var total;\n            var length;\n\n            if (that._group.length && groups) {\n                total = 0;\n                length = groups.length;\n\n                for (var i = 0; i < length; i++) {\n                    total += that.groupCount(groups[i], includeExpanded, itemsField, ignoreState);\n                }\n                that._groupsTotal = total;\n                return total;\n            }\n\n            that._groupsTotal = that._data.length;\n            return that._groupsTotal;\n        },\n\n        groupCount: function(group, includeExpanded, itemsField, ignoreState) {\n            var that = this;\n            var total = 0;\n\n            if (group.hasSubgroups && that._groupsState[group.uid]) {\n                if (includeExpanded && !group.excludeHeader || ignoreState) {\n                    total += 1;\n                }\n\n                group[itemsField].forEach(function(subgroup) {\n                    total += that.groupCount(subgroup, includeExpanded, itemsField, ignoreState);\n                });\n            } else {\n                if (that._groupsState[group.uid]) {\n                    if (includeExpanded && !group.excludeHeader || ignoreState) {\n                        total++;\n                    }\n                    total += group[itemsField] ? group[itemsField].length : 0;\n                } else {\n                    total++;\n                }\n            }\n            return total;\n        },\n\n        countGroupRange: function(range) {\n            var total = 0;\n            var length = range.length;\n\n            for (var i = 0; i < length; i++) {\n                total += this.groupCount(range[i], true);\n            }\n\n            return total;\n        },\n\n        aggregate: function(val) {\n            var that = this;\n\n            if (val !== undefined) {\n                that._query({ aggregate: val });\n                return;\n            }\n\n            return that._aggregate;\n        },\n\n        aggregates: function() {\n            var result = this._aggregateResult;\n\n            if (isEmptyObject(result)) {\n                result = this._emptyAggregates(this.aggregate());\n            }\n\n            return result;\n        },\n\n        _emptyAggregates: function(aggregates) {\n            var result = {};\n\n            if (!isEmptyObject(aggregates)) {\n                var aggregate = {};\n\n                if (!isArray(aggregates)) {\n                    aggregates = [aggregates];\n                }\n\n                for (var idx = 0; idx < aggregates.length; idx++) {\n                    aggregate[aggregates[idx].aggregate] = 0;\n                    result[aggregates[idx].field] = aggregate;\n                }\n            }\n\n            return result;\n        },\n\n        _pageableQueryOptions: function(options) {\n            return options;\n        },\n\n        _wrapInEmptyGroup: function(model) {\n            var groups = this.group(),\n                parent,\n                group,\n                idx,\n                length;\n\n            for (idx = groups.length - 1, length = 0; idx >= length; idx--) {\n                group = groups[idx];\n                parent = {\n                    value: model.get ? model.get(group.field) : model[group.field],\n                    field: group.field,\n                    items: parent ? [parent] : [model],\n                    hasSubgroups: !!parent,\n                    aggregates: this._emptyAggregates(group.aggregates)\n                };\n            }\n\n            return parent;\n        },\n\n        totalPages: function() {\n            var that = this,\n                pageSize = that.pageSize() || that.total(),\n                total = that._isGroupPaged() ? that.groupsTotal(true) : that.total();\n\n            return math.ceil((total || 0) / pageSize);\n        },\n\n        inRange: function(skip, take) {\n            var that = this,\n                end = math.min(skip + take, that.total());\n\n            if (!that.options.serverPaging && that._data.length > 0) {\n                return true;\n            }\n\n            return that._findRange(skip, end).length > 0;\n        },\n\n        lastRange: function() {\n            var ranges = this._ranges;\n            return ranges[ranges.length - 1] || { start: 0, end: 0, data: [] };\n        },\n\n        firstItemUid: function() {\n            var ranges = this._ranges;\n            return ranges.length && ranges[0].data.length && ranges[0].data[0].uid;\n        },\n\n        enableRequestsInProgress: function() {\n            this._skipRequestsInProgress = false;\n        },\n\n        _timeStamp: function() {\n            return new Date().getTime();\n        },\n\n        range: function(skip, take, callback, action) {\n            this._currentRequestTimeStamp = this._timeStamp();\n            this._skipRequestsInProgress = true;\n            var total = this._isGroupPaged() ? this.groupsTotal(true) : this.total();\n\n            if (action === \"expandGroup\" || action === \"collapseGroup\") {\n                this._updateOuterRangesLength();\n            }\n\n            skip = math.min(skip || 0, total);\n            callback = isFunction(callback) ? callback : noop;\n\n            var that = this,\n                pageSkip = math.max(math.floor(skip / take), 0) * take,\n                size = math.min(pageSkip + take, total),\n                data;\n\n            data = that._findRange(skip, math.min(skip + take, total), callback);\n\n            if ((data.length || total === 0) && !that._fetchingGroupItems) {\n                that._processRangeData(data, skip, take, that._originalPageSkip || pageSkip, that._originalSize || size, {\n                    action: action\n                });\n                that._originalPageSkip = null;\n                that._originalSize = null;\n                callback();\n                return;\n            }\n\n            if (that._isGroupPaged()) {\n                that._originalPageSkip = pageSkip;\n                that._originalSize = size;\n\n                pageSkip = math.max(math.floor(that._adjustPageSkip(skip, take) / take), 0) * take;\n                size = math.min(pageSkip + take, total);\n            }\n\n            if (take !== undefined && !that._fetchingGroupItems) {\n                if ((that._isGroupPaged() && !that._groupRangeExists(pageSkip, take)) || !that._rangeExists(pageSkip, size)) {\n                    that.prefetch(pageSkip, take, function() {\n                        if (skip > pageSkip && size < that.total() && !that._rangeExists(size, math.min(size + take, that.total()))) {\n                            that.prefetch(size, take, function() {\n                                that.range(skip, take, callback );\n                            });\n                        } else {\n                            that.range(skip, take, callback);\n                        }\n                    });\n                } else if (pageSkip < skip) {\n                    that.prefetch(size, take, function() {\n                        that.range(skip, take, callback );\n                    });\n                }\n            }\n        },\n\n        _findRange: function(start, end, callback) {\n            var that = this,\n                ranges = that._ranges,\n                range,\n                data = [],\n                skipIdx,\n                takeIdx,\n                startIndex,\n                endIndex,\n                rangeData,\n                rangeEnd,\n                processed,\n                options = that.options,\n                remote = options.serverSorting || options.serverPaging || options.serverFiltering || options.serverGrouping || options.serverAggregates,\n                flatData,\n                count,\n                length,\n                groupMapOptions = {\n                        take: end - start,\n                        skip: start,\n                        skipped: 0,\n                        taken: 0,\n                        includeParents: true\n                    },\n                prevRangeEnd,\n                isGroupPaged = that._isGroupPaged(),\n                startField = isGroupPaged ? \"outerStart\" : \"start\",\n                endField = isGroupPaged ? \"outerEnd\" : \"end\",\n                currentDataLength;\n\n            for (skipIdx = 0, length = ranges.length; skipIdx < length; skipIdx++) {\n                range = ranges[skipIdx];\n\n                if (isGroupPaged) {\n                    if (range.outerStart >= end) {\n                        return [];\n                    }\n\n                    if (start > range.outerEnd) {\n                        groupMapOptions.skipped += range.outerEnd - (prevRangeEnd || 0);\n                        prevRangeEnd = range.outerEnd;\n                        continue;\n                    }\n\n                    if (typeof prevRangeEnd !== \"undefined\" && prevRangeEnd != range.outerStart) {\n                        groupMapOptions.skipped += range.outerStart - prevRangeEnd;\n                    }\n\n                    if (groupMapOptions.skipped > groupMapOptions.skip) {\n                        return [];\n                    }\n\n                    if (typeof prevRangeEnd === \"undefined\" && start > 0 && range.start > 0) {\n                        groupMapOptions.skipped = range.outerStart;\n                    }\n\n                    takeIdx = skipIdx;\n                    while (true) {\n                        this._findGroupedRange(range.data, data, groupMapOptions, null, callback);\n                        currentDataLength = that._calculateGroupsTotal(data, true, \"currentItems\");\n\n                        if (currentDataLength >= groupMapOptions.take) {\n                            return data;\n                        }\n\n                        if (that._fetchingGroupItems) {\n                            return [];\n                        }\n                        takeIdx++;\n\n                        if (ranges[takeIdx] && ranges[takeIdx].outerStart === range.outerEnd) {\n                            range = ranges[takeIdx];\n                        } else {\n                            break;\n                        }\n                    }\n                } else if (start >= range[startField] && start <= range[endField]) {\n                    count = 0;\n\n                    for (takeIdx = skipIdx; takeIdx < length; takeIdx++) {\n                        range = ranges[takeIdx];\n                        flatData = that._flatData(range.data, true);\n\n                        if (flatData.length && start + count >= range.start) {\n                            rangeData = range.data;\n                            rangeEnd = range.end;\n\n                            if (!remote) {\n                                if (options.inPlaceSort) {\n                                    processed = that._queryProcess(range.data, { filter: that.filter() });\n                                } else {\n                                    var sort = normalizeGroupWithoutCompare(that.group() || []).concat(normalizeSort(that.sort() || []));\n                                    processed = that._queryProcess(range.data, { sort: sort, filter: that.filter() });\n                                }\n                                flatData = rangeData = processed.data;\n\n                                if (processed.total !== undefined) {\n                                    rangeEnd = processed.total;\n                                }\n                            }\n\n                            startIndex = 0;\n                            if (start + count > range.start) {\n                                startIndex = (start + count) - range.start;\n                            }\n                            endIndex = flatData.length;\n                            if (rangeEnd > end) {\n                                endIndex = endIndex - (rangeEnd - end);\n                            }\n                            count += endIndex - startIndex;\n                            data = that._mergeGroups(data, rangeData, startIndex, endIndex);\n\n                            if (end <= range.end && count == end - start) {\n                                return data;\n                            }\n                        }\n                    }\n                    break;\n                }\n                prevRangeEnd = range.outerEnd;\n            }\n            return [];\n        },\n\n        _getRangesMismatch: function(pageSkip) {\n            var that = this;\n            var ranges = that._ranges;\n            var mismatch = 0;\n            var i = 0;\n\n            while (true) {\n                var range = ranges[i];\n                if (!range || range.outerStart > pageSkip) {\n                    break;\n                }\n\n                if (range.outerEnd != range.end) {\n                    mismatch = range.outerEnd - range.end;\n                }\n                i++;\n            }\n\n            return mismatch;\n        },\n\n        _mergeGroups: function(data, range, skip, take) {\n            if (this._isServerGrouped()) {\n                var temp = range.toJSON(),\n                    prevGroup;\n\n                if (data.length) {\n                    prevGroup = data[data.length - 1];\n                }\n\n                mergeGroups(prevGroup, temp, skip, take);\n\n                return data.concat(temp);\n            }\n            return data.concat(range.slice(skip, take));\n        },\n\n        _processRangeData: function(data, skip, take, pageSkip, size, eventData) {\n            var that = this;\n\n            that._pending = undefined;\n\n            that._skip = skip > that.skip() && !that._omitPrefetch ? math.min(size, (that.totalPages() - 1) * that.take()) : pageSkip;\n\n            that._currentRangeStart = skip;\n\n            that._take = take;\n\n            var paging = that.options.serverPaging;\n            var sorting = that.options.serverSorting;\n            var filtering = that.options.serverFiltering;\n            var aggregates = that.options.serverAggregates;\n            try {\n                that.options.serverPaging = true;\n                if (!that._isServerGrouped() && !(that.group() && that.group().length)) {\n                    that.options.serverSorting = true;\n                }\n                that.options.serverFiltering = true;\n                that.options.serverPaging = true;\n                that.options.serverAggregates = true;\n\n                if (paging) {\n                    that._detachObservableParents();\n                    that._data = data = that._observe(data);\n                }\n                that._process(data, eventData);\n            } finally {\n                that.options.serverPaging = paging;\n                that.options.serverSorting = sorting;\n                that.options.serverFiltering = filtering;\n                that.options.serverAggregates = aggregates;\n            }\n        },\n\n        skip: function() {\n            var that = this;\n\n            if (that._skip === undefined) {\n                return (that._page !== undefined ? (that._page - 1) * (that.take() || 1) : undefined);\n            }\n            return that._skip;\n        },\n\n        currentRangeStart: function() {\n            return this._currentRangeStart || 0;\n        },\n\n        take: function() {\n            return this._take || this._pageSize;\n        },\n\n        _prefetchSuccessHandler: function(skip, size, callback, force) {\n            var that = this;\n            var timestamp = that._timeStamp();\n\n            return function(data) {\n                var found = false,\n                    range = { start: skip, end: size, data: [], timestamp: that._timeStamp() },\n                    idx,\n                    length,\n                    temp;\n\n                that._dequeueRequest();\n\n                that.trigger(REQUESTEND, { response: data, type: \"read\" });\n\n                data = that.reader.parse(data);\n\n                temp = that._readData(data);\n\n                if (temp.length) {\n                    for (idx = 0, length = that._ranges.length; idx < length; idx++) {\n                        if (that._ranges[idx].start === skip) {\n                            found = true;\n                            range = that._ranges[idx];\n\n                            if (!that._isGroupPaged()) {\n                                range.pristineData = temp;\n                                range.data = that._observe(temp);\n                                range.end = range.start + that._flatData(range.data, true).length;\n                                that._sortRanges();\n                            }\n\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        that._addRange(that._observe(temp), skip);\n                    }\n                }\n\n                that._total = that.reader.total(data);\n\n                if (force || (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress)) {\n                    if (callback && temp.length) {\n                        callback();\n                    } else {\n                        that.trigger(CHANGE, {});\n                    }\n                }\n            };\n        },\n\n        prefetch: function(skip, take, callback) {\n            var that = this,\n                size = math.min(skip + take, that.total()),\n                options = {\n                    take: take,\n                    skip: skip,\n                    page: skip / take + 1,\n                    pageSize: take,\n                    sort: that._sort,\n                    filter: that._filter,\n                    group: that._group,\n                    aggregate: that._aggregate\n                };\n\n\n            if ((that._isGroupPaged() && !that._isServerGrouped() && that._groupRangeExists(skip, size))) {\n                if (callback) {\n                    callback();\n                }\n                return;\n            }\n\n            if ((that._isServerGroupPaged() && !that._groupRangeExists(skip, size)) || !that._rangeExists(skip, size)) {\n                clearTimeout(that._timeout);\n\n                that._timeout = setTimeout(function() {\n                    that._queueRequest(options, function() {\n                        if (!that.trigger(REQUESTSTART, { type: \"read\" })) {\n                            if (that._omitPrefetch) {\n                                that.trigger(PROGRESS);\n                            }\n                            that.transport.read({\n                                data: that._params(options),\n                                success: that._prefetchSuccessHandler(skip, size, callback),\n                                error: function() {\n                                    var args = slice.call(arguments);\n                                    that.error.apply(that, args);\n                                }\n                            });\n                        } else {\n                            that._dequeueRequest();\n                        }\n                    });\n                }, 100);\n            } else if (callback) {\n                callback();\n            }\n        },\n\n        _multiplePrefetch: function(skip, take, callback) {\n            var that = this,\n                size = math.min(skip + take, that.total()),\n                options = {\n                    take: take,\n                    skip: skip,\n                    page: skip / take + 1,\n                    pageSize: take,\n                    sort: that._sort,\n                    filter: that._filter,\n                    group: that._group,\n                    aggregate: that._aggregate\n                };\n\n            if (!that._rangeExists(skip, size)) {\n                if (!that.trigger(REQUESTSTART, { type: \"read\" })) {\n                    that.transport.read({\n                        data: that._params(options),\n                        success: that._prefetchSuccessHandler(skip, size, callback, true)\n                    });\n                }\n            } else if (callback) {\n                callback();\n            }\n        },\n\n        _adjustPageSkip: function(start, take) {\n            var that = this;\n            var prevRange = that._getPrevRange(start);\n            var result;\n            var total = that.total();\n            var mismatch;\n\n            if (prevRange) {\n                mismatch = that._getRangesMismatch(start);\n\n                if (!mismatch) {\n                    return start;\n                }\n                start -= mismatch;\n            }\n            result = math.max(math.floor(start / take), 0) * take;\n\n            if (result > total) {\n                while (true) {\n                    result -= take;\n                    if (result < total) {\n                        break;\n                    }\n                }\n            }\n            return result;\n        },\n\n        _getNextRange: function(end) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                length;\n\n            for (idx = 0, length = ranges.length; idx < length; idx++) {\n                if (ranges[idx].start <= end && ranges[idx].end >= end) {\n                    return ranges[idx];\n                }\n            }\n        },\n\n        _getPrevRange: function(start) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                range,\n                length = ranges.length;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n                if (ranges[idx].outerStart <= start) {\n                    range = ranges[idx];\n                    break;\n                }\n\n            }\n\n            return range;\n        },\n\n        _rangeExists: function(start, end) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                length;\n\n            for (idx = 0, length = ranges.length; idx < length; idx++) {\n                if (ranges[idx].start <= start && ranges[idx].end >= end) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _groupRangeExists: function(start, end) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                length,\n                availableItemsCount = 0,\n                total = that.groupsTotal(true);\n\n            if (end > total && !that._isServerGrouped()) {\n                end = total;\n            }\n\n            for (idx = 0, length = ranges.length; idx < length; idx++) {\n                var range = ranges[idx];\n                if (range.outerStart <= start && range.outerEnd >= start) {\n                    availableItemsCount += range.outerEnd - start;\n                } else if (range.outerStart <= end && range.outerEnd >= end) {\n                    availableItemsCount += end - range.outerStart;\n                }\n            }\n\n            return availableItemsCount >= end - start;\n        },\n\n        _getCurrentRangeSpan: function() {\n            var that = this;\n            var ranges = that._ranges;\n            var start = that.currentRangeStart();\n            var end = start + (that.take() || 0);\n            var rangeSpan = [];\n            var range;\n            var idx;\n            var length = ranges.length;\n\n            for (idx = 0; idx < length; idx++) {\n                range = ranges[idx];\n\n                if ((range.start <= start && range.end >= start) || (range.start >= start && range.start <= end)) {\n                    rangeSpan.push(range);\n                }\n            }\n\n            return rangeSpan;\n        },\n\n        _removeModelFromRanges: function(model) {\n            var that = this;\n            var range;\n\n            for (var idx = 0, length = this._ranges.length; idx < length; idx++) {\n                range = this._ranges[idx];\n\n                that._removeModelFromRange(range, model);\n            }\n\n            that._updateRangesLength();\n        },\n\n        _removeModelFromRange: function(range, model) {\n            this._eachItem(range.data, function(data) {\n                if (!data) {\n                    return;\n                }\n                for (var idx = 0; idx < data.length; idx++) {\n                    var dataItem = data[idx];\n\n                    if (dataItem.uid && dataItem.uid == model.uid) {\n                        [].splice.call(data, idx, 1);\n                        break;\n                    }\n                }\n            });\n        },\n\n        _insertModelInRange: function(index, model) {\n            var that = this;\n            var ranges = that._ranges || [];\n            var rangesLength = ranges.length;\n            var range;\n            var i;\n\n            for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n\n                if (range.start <= index && range.end >= index) {\n                    if (!that._getByUid(model.uid, range.data)) {\n                        if (that._isServerGrouped()) {\n                            range.data.splice(index, 0, that._wrapInEmptyGroup(model));\n                        } else {\n                            range.data.splice(index, 0, model);\n                        }\n                    }\n\n                    break;\n                }\n            }\n\n            that._updateRangesLength();\n        },\n\n        _updateRangesLength: function() {\n            var that = this;\n            var ranges = that._ranges || [];\n            var rangesLength = ranges.length;\n            var mismatchFound = false;\n            var mismatchLength = 0;\n            var lengthDifference = 0;\n            var rangeLength;\n            var range;\n            var i;\n\n            for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                rangeLength = that._isGroupPaged() ? range.data.length : that._flatData(range.data, true).length;\n                lengthDifference = rangeLength - math.abs(range.end - range.start);\n\n                if (!mismatchFound && lengthDifference !== 0) {\n                    mismatchFound = true;\n                    mismatchLength = lengthDifference;\n                    range.end += mismatchLength;\n                    continue;\n                }\n\n                if (mismatchFound) {\n                    range.start += mismatchLength;\n                    range.end += mismatchLength;\n                }\n            }\n        },\n\n        _updateOuterRangesLength: function() {\n            var that = this;\n            var ranges = that._ranges || [];\n            var rangesLength = ranges.length;\n            var mismatchLength = 0;\n            var range;\n            var i;\n            var prevRange;\n            var rangeLength;\n\n            for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                rangeLength = that._isGroupPaged() ? that._calculateGroupsTotal(range.data, true, \"items\", true) : that._flatData(range.data, true).length;\n\n                if (prevRange) {\n                    if (prevRange.end != range.start) {\n                        mismatchLength = range.start - prevRange.end;\n                    }\n                    range.outerStart = prevRange.outerEnd + mismatchLength;\n                    mismatchLength = 0;\n                } else {\n                    range.outerStart = range.start;\n                }\n\n                range.outerEnd = range.outerStart + rangeLength;\n                prevRange = range;\n            }\n        }\n    });\n\n    var Transport = {};\n\n    Transport.create = function(options, data, dataSource) {\n        var transport,\n            transportOptions = options.transport ? $.extend({}, options.transport) : null;\n\n        if (transportOptions) {\n            transportOptions.read = typeof transportOptions.read === STRING ? { url: transportOptions.read } : transportOptions.read;\n\n            if (options.type === \"jsdo\") {\n                transportOptions.dataSource = dataSource;\n            }\n\n            if (options.type) {\n                kendo.data.transports = kendo.data.transports || {};\n                kendo.data.schemas = kendo.data.schemas || {};\n\n                if (!kendo.data.transports[options.type]) {\n                    kendo.logToConsole(\"Unknown DataSource transport type '\" + options.type + \"'.\\nVerify that registration scripts for this type are included after Kendo UI on the page.\", \"warn\");\n                } else if (!isPlainObject(kendo.data.transports[options.type])) {\n                    transport = new kendo.data.transports[options.type](extend(transportOptions, { data: data }));\n                } else {\n                    transportOptions = extend(true, {}, kendo.data.transports[options.type], transportOptions);\n                }\n\n                options.schema = extend(true, {}, kendo.data.schemas[options.type], options.schema);\n            }\n\n            if (!transport) {\n                transport = isFunction(transportOptions.read) ? transportOptions : new RemoteTransport(transportOptions);\n            }\n        } else {\n            transport = new LocalTransport({ data: options.data || [] });\n        }\n        return transport;\n    };\n\n    DataSource.create = function(options) {\n        if (isArray(options) || options instanceof ObservableArray) {\n           options = { data: options };\n        }\n\n        var dataSource = options || {},\n            data = dataSource.data,\n            fields = dataSource.fields,\n            table = dataSource.table,\n            select = dataSource.select,\n            idx,\n            length,\n            model = {},\n            field;\n\n        if (!data && fields && !dataSource.transport) {\n            if (table) {\n                data = inferTable(table, fields);\n            } else if (select) {\n                data = inferSelect(select, fields);\n\n                if (dataSource.group === undefined && data[0] && data[0].optgroup !== undefined) {\n                    dataSource.group = \"optgroup\";\n                }\n            }\n        }\n\n        if (kendo.data.Model && fields && (!dataSource.schema || !dataSource.schema.model)) {\n            for (idx = 0, length = fields.length; idx < length; idx++) {\n                field = fields[idx];\n                if (field.type) {\n                    model[field.field] = field;\n                }\n            }\n\n            if (!isEmptyObject(model)) {\n                dataSource.schema = extend(true, dataSource.schema, { model: { fields: model } });\n            }\n        }\n\n        dataSource.data = data;\n\n        select = null;\n        dataSource.select = null;\n        table = null;\n        dataSource.table = null;\n\n        return dataSource instanceof DataSource ? dataSource : new DataSource(dataSource);\n    };\n\n    function inferSelect(select, fields) {\n        select = $(select)[0];\n        var options = select.options;\n        var firstField = fields[0];\n        var secondField = fields[1];\n\n        var data = [];\n        var idx, length;\n        var optgroup;\n        var option;\n        var record;\n        var value;\n\n        for (idx = 0, length = options.length; idx < length; idx++) {\n            record = {};\n            option = options[idx];\n            optgroup = option.parentNode;\n\n            if (optgroup === select) {\n                optgroup = null;\n            }\n\n            if (option.disabled || (optgroup && optgroup.disabled)) {\n                continue;\n            }\n\n            if (optgroup) {\n                record.optgroup = optgroup.label;\n            }\n\n            record[firstField.field] = option.text;\n\n            value = option.attributes.value;\n\n            if (value && value.specified) {\n                value = option.value;\n            } else {\n                value = option.text;\n            }\n\n            record[secondField.field] = value;\n\n            data.push(record);\n        }\n\n        return data;\n    }\n\n    function inferTable(table, fields) {\n        var tbody = $(table)[0].tBodies[0],\n        rows = tbody ? tbody.rows : [],\n        idx,\n        length,\n        fieldIndex,\n        fieldCount = fields.length,\n        data = [],\n        cells,\n        record,\n        cell,\n        empty;\n\n        for (idx = 0, length = rows.length; idx < length; idx++) {\n            record = {};\n            empty = true;\n            cells = rows[idx].cells;\n\n            for (fieldIndex = 0; fieldIndex < fieldCount; fieldIndex++) {\n                cell = cells[fieldIndex];\n                if (cell.nodeName.toLowerCase() !== \"th\") {\n                    empty = false;\n                    record[fields[fieldIndex].field] = cell.innerHTML;\n                }\n            }\n            if (!empty) {\n                data.push(record);\n            }\n        }\n\n        return data;\n    }\n\n    var Node = Model.define({\n        idField: \"id\",\n\n        init: function(value) {\n            var that = this,\n                hasChildren = that.hasChildren || value && value.hasChildren,\n                childrenField = \"items\",\n                childrenOptions = {};\n\n            kendo.data.Model.fn.init.call(that, value);\n\n            if (typeof that.children === STRING) {\n                childrenField = that.children;\n            }\n\n            childrenOptions = {\n                schema: {\n                    data: childrenField,\n                    model: {\n                        hasChildren: hasChildren,\n                        id: that.idField,\n                        fields: that.fields\n                    }\n                }\n            };\n\n            if (typeof that.children !== STRING) {\n                extend(childrenOptions, that.children);\n            }\n\n            childrenOptions.data = value;\n\n            if (!hasChildren) {\n                hasChildren = childrenOptions.schema.data;\n            }\n\n            if (typeof hasChildren === STRING) {\n                hasChildren = kendo.getter(hasChildren);\n            }\n\n            if (isFunction(hasChildren)) {\n                var hasChildrenObject = hasChildren.call(that, that);\n\n                if (hasChildrenObject && hasChildrenObject.length === 0) {\n                    that.hasChildren = false;\n                } else {\n                    that.hasChildren = !!hasChildrenObject;\n                }\n            }\n\n            that._childrenOptions = childrenOptions;\n\n            if (that.hasChildren) {\n                that._initChildren();\n            }\n\n            that._loaded = !!(value && value._loaded);\n        },\n\n        _initChildren: function() {\n            var that = this;\n            var children, transport, parameterMap;\n\n            if (!(that.children instanceof HierarchicalDataSource)) {\n                children = that.children = new HierarchicalDataSource(that._childrenOptions);\n\n                transport = children.transport;\n                parameterMap = transport.parameterMap;\n\n                transport.parameterMap = function(data, type) {\n                    data[that.idField || \"id\"] = that.id;\n\n                    if (parameterMap) {\n                        data = parameterMap.call(that, data, type);\n                    }\n\n                    return data;\n                };\n\n                children.parent = function() {\n                    return that;\n                };\n\n                children.bind(CHANGE, function(e) {\n                    e.node = e.node || that;\n                    that.trigger(CHANGE, e);\n                });\n\n                children.bind(ERROR, function(e) {\n                    var collection = that.parent();\n\n                    if (collection) {\n                        e.node = e.node || that;\n                        collection.trigger(ERROR, e);\n                    }\n                });\n\n                children.bind(ITEMSLOADED, function(e) {\n                    var collection = that.parent();\n\n                    if (collection) {\n                        collection.trigger(ITEMSLOADED, e);\n                    }\n                });\n\n                that._updateChildrenField();\n            }\n        },\n\n        append: function(model) {\n            this._initChildren();\n            this.loaded(true);\n            this.children.add(model);\n        },\n\n        hasChildren: false,\n\n        level: function() {\n            var parentNode = this.parentNode(),\n                level = 0;\n\n            while (parentNode && parentNode.parentNode) {\n                level++;\n                parentNode = parentNode.parentNode ? parentNode.parentNode() : null;\n            }\n\n            return level;\n        },\n\n        _updateChildrenField: function() {\n            var fieldName = this._childrenOptions.schema.data;\n\n            this[fieldName || \"items\"] = this.children.data();\n        },\n\n        _childrenLoaded: function() {\n            this._loaded = true;\n\n            this._updateChildrenField();\n        },\n\n        load: function() {\n            var options = {};\n            var method = \"_query\";\n            var children, promise;\n\n            if (this.hasChildren) {\n                this._initChildren();\n\n                children = this.children;\n\n                options[this.idField || \"id\"] = this.id;\n\n                if (!this._loaded) {\n                    children._data = undefined;\n                    method = \"read\";\n                }\n\n                children.one(CHANGE, this._childrenLoaded.bind(this));\n\n                if (this._matchFilter) {\n                    options.filter = { field: '_matchFilter', operator: 'eq', value: true };\n                }\n\n                promise = children[method](options);\n                if (!this._loaded) {\n                    this.trigger(ITEMLOAD, { promise: promise, node: this });\n                }\n            } else {\n                this.loaded(true);\n            }\n\n            return promise || $.Deferred().resolve().promise();\n        },\n\n        parentNode: function() {\n            var array = this.parent();\n\n            return array.parent();\n        },\n\n        loaded: function(value) {\n            if (value !== undefined) {\n                this._loaded = value;\n            } else {\n                return this._loaded;\n            }\n        },\n\n        shouldSerialize: function(field) {\n            return Model.fn.shouldSerialize.call(this, field) &&\n                    field !== \"children\" &&\n                    field !== \"_loaded\" &&\n                    field !== \"hasChildren\" &&\n                    field !== \"_childrenOptions\";\n        }\n    });\n\n    function dataMethod(name) {\n        return function() {\n            var data = this._data,\n                result = DataSource.fn[name].apply(this, slice.call(arguments));\n\n            if (this._data != data) {\n                this._attachBubbleHandlers();\n            }\n\n            return result;\n        };\n    }\n\n    var HierarchicalDataSource = DataSource.extend({\n        init: function(options) {\n            var node = Node.define({\n                children: options\n            });\n\n            if (options.filter && !options.serverFiltering) {\n                this._hierarchicalFilter = options.filter;\n                options.filter = null;\n            }\n\n            DataSource.fn.init.call(this, extend(true, {}, { schema: { modelBase: node, model: node } }, options));\n\n            this._attachBubbleHandlers();\n        },\n\n        _attachBubbleHandlers: function() {\n            var that = this;\n\n            that._data.bind(ERROR, function(e) {\n                that.trigger(ERROR, e);\n            });\n\n            that._data.bind(ITEMSLOADED, function(e) {\n                that.trigger(ITEMSLOADED, e);\n            });\n        },\n\n        loading: function() {\n            if (this._data) {\n                return this._data.loading() || this._childrenLoading();\n            }\n            return false;\n        },\n\n        _childrenLoading: function() {\n            var isLoading = false;\n            this._data.forEach(function(node) {\n                if (node.hasChildren && node.children.loading()) {\n                    isLoading = true;\n                }\n            });\n            return isLoading;\n        },\n\n        read: function(data) {\n            var result = DataSource.fn.read.call(this, data);\n\n            if (this._hierarchicalFilter) {\n                if (this._data && this._data.length > 0) {\n                    this.filter(this._hierarchicalFilter);\n                } else {\n                    this.options.filter = this._hierarchicalFilter;\n                    this._filter = normalizeFilter(this.options.filter);\n                    this._hierarchicalFilter = null;\n                }\n            }\n\n            return result;\n        },\n\n        remove: function(node) {\n            var parentNode = node.parentNode(),\n                dataSource = this,\n                result;\n\n            if (parentNode && parentNode._initChildren) {\n                dataSource = parentNode.children;\n            }\n\n            result = DataSource.fn.remove.call(dataSource, node);\n\n            if (parentNode && !dataSource.data().length) {\n                parentNode.hasChildren = false;\n            }\n\n            return result;\n        },\n\n        success: dataMethod(\"success\"),\n\n        data: dataMethod(\"data\"),\n\n        insert: function(index, model) {\n            var parentNode = this.parent();\n\n            if (parentNode && parentNode._initChildren) {\n                parentNode.hasChildren = true;\n                parentNode._initChildren();\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n\n        filter: function(val) {\n            if (val === undefined) {\n                 return this._filter;\n            }\n\n            if (!this.options.serverFiltering && this._markHierarchicalQuery(val)) {\n                val = { logic: \"or\", filters: [val, { field: '_matchFilter', operator: 'equals', value: true }] };\n            }\n\n            this.trigger(\"reset\");\n            this._query({ filter: val, page: 1 });\n        },\n\n        _markHierarchicalQuery: function(expressions) {\n            var compiled;\n            var predicate;\n            var fields;\n            var operators;\n            var filter;\n            var accentFoldingFiltering = this.options.accentFoldingFiltering;\n\n            expressions = accentFoldingFiltering ? $.extend({}, normalizeFilter(expressions), { accentFoldingFiltering: accentFoldingFiltering }) : normalizeFilter(expressions);\n\n            if (!expressions || expressions.filters.length === 0) {\n                this._updateHierarchicalFilter(function() {return true;});\n                return false;\n            }\n\n            compiled = Query.filterExpr(expressions);\n            fields = compiled.fields;\n            operators = compiled.operators;\n\n            predicate = filter = new Function(\"d, __f, __o\", \"return \" + compiled.expression);\n\n            if (fields.length || operators.length) {\n                filter = function(d) {\n                    return predicate(d, fields, operators);\n                };\n            }\n\n            this._updateHierarchicalFilter(filter);\n            return true;\n        },\n\n         _updateHierarchicalFilter: function(filter) {\n            var current;\n            var data = this._data;\n            var result = false;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                 current = data[idx];\n\n                 if (current.hasChildren) {\n                     current._matchFilter = current.children._updateHierarchicalFilter(filter);\n                    if (!current._matchFilter) {\n                        current._matchFilter = filter(current);\n                    }\n                } else {\n                    current._matchFilter = filter(current);\n                }\n\n                if (current._matchFilter) {\n                    result = true;\n                }\n            }\n            return result;\n        },\n\n        _find: function(method, value) {\n            var idx, length, node, children;\n            var data = this._data;\n\n            if (!data) {\n                return;\n            }\n\n            node = DataSource.fn[method].call(this, value);\n\n            if (node) {\n                return node;\n            }\n\n            data = this._flatData(this._data);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                children = data[idx].children;\n\n                if (!(children instanceof HierarchicalDataSource)) {\n                    continue;\n                }\n\n                node = children[method](value);\n\n                if (node) {\n                    return node;\n                }\n            }\n        },\n\n        get: function(id) {\n            return this._find(\"get\", id);\n        },\n\n        getByUid: function(uid) {\n            return this._find(\"getByUid\", uid);\n        }\n    });\n\n    function inferList(list, fields) {\n        var items = $(list).children(),\n            idx,\n            length,\n            data = [],\n            record,\n            textField = fields[0].field,\n            urlField = fields[1] && fields[1].field,\n            spriteCssClassField = fields[2] && fields[2].field,\n            imageUrlField = fields[3] && fields[3].field,\n            item,\n            id,\n            textChild,\n            className,\n            children;\n\n        function elements(collection, tagName) {\n            return collection.filter(tagName).add(collection.find(tagName));\n        }\n\n        for (idx = 0, length = items.length; idx < length; idx++) {\n            record = { _loaded: true };\n            item = items.eq(idx);\n\n            textChild = item[0].firstChild;\n            children = item.children();\n            list = children.filter(\"ul\");\n            children = children.filter(\":not(ul)\");\n\n            id = item.attr(\"data-id\");\n\n            if (id) {\n                record.id = id;\n            }\n\n            if (textChild) {\n                record[textField] = textChild.nodeType == 3 ? textChild.nodeValue : children.text();\n            }\n\n            if (urlField) {\n                record[urlField] = elements(children, \"a\").attr(\"href\");\n            }\n\n            if (imageUrlField) {\n                record[imageUrlField] = elements(children, \"img\").attr(\"src\");\n            }\n\n            if (spriteCssClassField) {\n                className = elements(children, \".k-sprite\").prop(\"className\");\n                record[spriteCssClassField] = className && kendo.trim(className.replace(\"k-sprite\", \"\"));\n            }\n\n            if (list.length) {\n                record.items = inferList(list.eq(0), fields);\n            }\n\n            if (item.attr(\"data-hasChildren\") == \"true\") {\n                record.hasChildren = true;\n            }\n\n            data.push(record);\n        }\n\n        return data;\n    }\n\n    HierarchicalDataSource.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data,\n            fields = dataSource.fields,\n            list = dataSource.list;\n\n        if (data && data._dataSource) {\n            return data._dataSource;\n        }\n\n        if (!data && fields && !dataSource.transport) {\n            if (list) {\n                data = inferList(list, fields);\n            }\n        }\n\n        dataSource.data = data;\n\n        return dataSource instanceof HierarchicalDataSource ? dataSource : new HierarchicalDataSource(dataSource);\n    };\n\n    var Buffer = kendo.Observable.extend({\n        init: function(dataSource, viewSize, disablePrefetch) {\n            kendo.Observable.fn.init.call(this);\n\n            this._prefetching = false;\n            this.dataSource = dataSource;\n            this.prefetch = !disablePrefetch;\n\n            var buffer = this;\n\n            dataSource.bind(\"change\", function() {\n                buffer._change();\n            });\n\n            dataSource.bind(\"reset\", function() {\n                buffer._reset();\n            });\n\n            this._syncWithDataSource();\n\n            this.setViewSize(viewSize);\n        },\n\n        setViewSize: function(viewSize) {\n            this.viewSize = viewSize;\n            this._recalculate();\n        },\n\n        at: function(index) {\n            var pageSize = this.pageSize,\n                itemPresent = true;\n\n            if (index >= this.total()) {\n                this.trigger(\"endreached\", { index: index });\n                return null;\n            }\n\n            if (!this.useRanges) {\n               return this.dataSource.view()[index];\n            }\n            if (this.useRanges) {\n                // out of range request\n                if (index < this.dataOffset || index >= this.skip + pageSize) {\n                    itemPresent = this.range(Math.floor(index / pageSize) * pageSize);\n                }\n\n                // prefetch\n                if (index === this.prefetchThreshold) {\n                    this._prefetch();\n                }\n\n                // mid-range jump - prefetchThreshold and nextPageThreshold may be equal, do not change to else if\n                if (index === this.midPageThreshold) {\n                    this.range(this.nextMidRange, true);\n                }\n                // next range jump\n                else if (index === this.nextPageThreshold) {\n                    this.range(this.nextFullRange);\n                }\n                // pull-back\n                else if (index === this.pullBackThreshold) {\n                    if (this.offset === this.skip) { // from full range to mid range\n                        this.range(this.previousMidRange);\n                    } else { // from mid range to full range\n                        this.range(this.previousFullRange);\n                    }\n                }\n\n                if (itemPresent) {\n                    return this.dataSource.at(index - this.dataOffset);\n                } else {\n                    this.trigger(\"endreached\", { index: index });\n                    return null;\n                }\n            }\n        },\n\n        indexOf: function(item) {\n            return this.dataSource.data().indexOf(item) + this.dataOffset;\n        },\n\n        total: function() {\n            return parseInt(this.dataSource.total(), 10);\n        },\n\n        next: function() {\n            var buffer = this,\n                pageSize = buffer.pageSize,\n                offset = buffer.skip - buffer.viewSize + pageSize,\n                pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize;\n\n            this.offset = offset;\n            this.dataSource.prefetch(pageSkip, pageSize, function() {\n                buffer._goToRange(offset, true);\n            });\n        },\n\n        range: function(offset, nextRange) {\n            if (this.offset === offset) {\n                return true;\n            }\n\n            var buffer = this,\n                pageSize = this.pageSize,\n                pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize,\n                dataSource = this.dataSource;\n\n            if (nextRange) {\n                pageSkip += pageSize;\n            }\n\n            if (dataSource.inRange(offset, pageSize)) {\n                this.offset = offset;\n                this._recalculate();\n                this._goToRange(offset);\n                return true;\n            } else if (this.prefetch) {\n                dataSource.prefetch(pageSkip, pageSize, function() {\n                    buffer.offset = offset;\n                    buffer._recalculate();\n                    buffer._goToRange(offset, true);\n                });\n                return false;\n            }\n\n            return true;\n        },\n\n        syncDataSource: function() {\n            var offset = this.offset;\n            this.offset = null;\n            this.range(offset);\n        },\n\n        destroy: function() {\n            this.unbind();\n        },\n\n        _prefetch: function() {\n            var buffer = this,\n                pageSize = this.pageSize,\n                prefetchOffset = this.skip + pageSize,\n                dataSource = this.dataSource;\n\n            if (!dataSource.inRange(prefetchOffset, pageSize) && !this._prefetching && this.prefetch) {\n                this._prefetching = true;\n                this.trigger(\"prefetching\", { skip: prefetchOffset, take: pageSize });\n\n                dataSource.prefetch(prefetchOffset, pageSize, function() {\n                    buffer._prefetching = false;\n                    buffer.trigger(\"prefetched\", { skip: prefetchOffset, take: pageSize });\n                });\n            }\n        },\n\n        _goToRange: function(offset, expanding) {\n            if (this.offset !== offset) {\n                return;\n            }\n\n            this.dataOffset = offset;\n            this._expanding = expanding;\n            this.dataSource.range(offset, this.pageSize);\n            this.dataSource.enableRequestsInProgress();\n        },\n\n        _reset: function() {\n            this._syncPending = true;\n        },\n\n        _change: function() {\n            var dataSource = this.dataSource;\n\n            this.length = this.useRanges ? dataSource.lastRange().end : dataSource.view().length;\n\n            if (this._syncPending) {\n                this._syncWithDataSource();\n                this._recalculate();\n                this._syncPending = false;\n                this.trigger(\"reset\", { offset: this.offset });\n            }\n\n            this.trigger(\"resize\");\n\n            if (this._expanding) {\n                this.trigger(\"expand\");\n            }\n\n            delete this._expanding;\n        },\n\n        _syncWithDataSource: function() {\n            var dataSource = this.dataSource;\n\n            this._firstItemUid = dataSource.firstItemUid();\n            this.dataOffset = this.offset = dataSource.skip() || 0;\n            this.pageSize = dataSource.pageSize();\n            this.useRanges = dataSource.options.serverPaging;\n        },\n\n        _recalculate: function() {\n            var pageSize = this.pageSize,\n                offset = this.offset,\n                viewSize = this.viewSize,\n                skip = Math.ceil(offset / pageSize) * pageSize;\n\n            this.skip = skip;\n            this.midPageThreshold = skip + pageSize - 1;\n            this.nextPageThreshold = skip + viewSize - 1;\n            this.prefetchThreshold = skip + Math.floor(pageSize / 3 * 2);\n            this.pullBackThreshold = this.offset - 1;\n\n            this.nextMidRange = skip + pageSize - viewSize;\n            this.nextFullRange = skip;\n            this.previousMidRange = offset - viewSize;\n            this.previousFullRange = skip - pageSize;\n        }\n    });\n\n    var BatchBuffer = kendo.Observable.extend({\n        init: function(dataSource, batchSize) {\n            var batchBuffer = this;\n\n            kendo.Observable.fn.init.call(batchBuffer);\n\n            this.dataSource = dataSource;\n            this.batchSize = batchSize;\n            this._total = 0;\n\n            this.buffer = new Buffer(dataSource, batchSize * 3);\n\n            this.buffer.bind({\n                \"endreached\": function(e) {\n                    batchBuffer.trigger(\"endreached\", { index: e.index });\n                },\n                \"prefetching\": function(e) {\n                    batchBuffer.trigger(\"prefetching\", { skip: e.skip, take: e.take });\n                },\n                \"prefetched\": function(e) {\n                    batchBuffer.trigger(\"prefetched\", { skip: e.skip, take: e.take });\n                },\n                \"reset\": function() {\n                    batchBuffer._total = 0;\n                    batchBuffer.trigger(\"reset\");\n                },\n                \"resize\": function() {\n                    batchBuffer._total = Math.ceil(this.length / batchBuffer.batchSize);\n                    batchBuffer.trigger(\"resize\", { total: batchBuffer.total(), offset: this.offset });\n                }\n            });\n        },\n\n        syncDataSource: function() {\n            this.buffer.syncDataSource();\n        },\n\n        at: function(index) {\n            var buffer = this.buffer,\n                skip = index * this.batchSize,\n                take = this.batchSize,\n                view = [],\n                item;\n\n            if (buffer.offset > skip) {\n                buffer.at(buffer.offset - 1);\n            }\n\n            for (var i = 0; i < take; i++) {\n                item = buffer.at(skip + i);\n\n                if (item === null) {\n                    break;\n                }\n\n                view.push(item);\n            }\n\n            return view;\n        },\n\n        total: function() {\n            return this._total;\n        },\n\n        destroy: function() {\n            this.buffer.destroy();\n            this.unbind();\n        }\n    });\n\n    extend(true, kendo.data, {\n        readers: {\n            json: DataReader\n        },\n        Query: Query,\n        DataSource: DataSource,\n        HierarchicalDataSource: HierarchicalDataSource,\n        Node: Node,\n        Comparer: Comparer,\n        ObservableObject: ObservableObject,\n        ObservableArray: ObservableArray,\n        LazyObservableArray: LazyObservableArray,\n        LocalTransport: LocalTransport,\n        RemoteTransport: RemoteTransport,\n        Cache: Cache,\n        DataReader: DataReader,\n        Model: Model,\n        Buffer: Buffer,\n        BatchBuffer: BatchBuffer\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 57949:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.core\");\n\n/***/ }),\n\n/***/ 14458:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.data.odata\");\n\n/***/ }),\n\n/***/ 74560:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.data.xml\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(57100);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}