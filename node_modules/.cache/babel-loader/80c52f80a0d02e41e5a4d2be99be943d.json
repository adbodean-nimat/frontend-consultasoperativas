{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    14912:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__; // -*- fill-column: 100 -*-\n\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(81200)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        \"use strict\"; // WARNING: removing the following jshint declaration and turning\n        // == into === to make JSHint happy will break functionality.\n\n        /* global console */\n\n        var calc = {};\n        var spreadsheet = kendo.spreadsheet;\n        spreadsheet.calc = calc;\n        var exports = calc.runtime = {};\n        var Class = kendo.Class;\n        var Ref = spreadsheet.Ref;\n        var CellRef = spreadsheet.CellRef;\n        var RangeRef = spreadsheet.RangeRef;\n        var UnionRef = spreadsheet.UnionRef;\n        var NULL = spreadsheet.NULLREF;\n        /* -----[ Errors ]----- */\n\n        function CalcError(code) {\n          if (code instanceof CalcError) {\n            return code;\n          }\n\n          this.code = code;\n        }\n\n        CalcError.prototype.toString = function () {\n          return \"#\" + this.code + (this.code == \"NAME\" ? \"?\" : \"!\");\n        };\n        /* -----[ Context ]----- */\n\n\n        var Context = Class.extend({\n          init: function Context(callback, formula, ss, parent) {\n            this.callback = callback;\n            this.formula = formula;\n            this.ss = ss;\n            this.parent = parent;\n          },\n          resolve: function (val) {\n            var self = this;\n\n            if (val instanceof Ref) {\n              self.resolveCells([val], function () {\n                self._resolve(val);\n              });\n            } else {\n              self._resolve(val);\n            }\n          },\n          error: function (val) {\n            return new CalcError(val);\n          },\n          _resolve: function (val) {\n            if (val === undefined) {\n              val = null;\n            } else if (Array.isArray(val)) {\n              val = this.asMatrix(val);\n            } else {\n              val = maybeRoundFloatErrors(val);\n            }\n\n            var f = this.formula;\n\n            if (f.arrayFormulaRange) {\n              // when this is an array formula, make sure we return a Matrix.  The value already\n              // *should* be a Matrix, so this won't incur speed penalty in normal cases.\n              val = this.asMatrix(val) || this.asMatrix([[val]]);\n            } else if (val instanceof RangeRef) {\n              val = this._arrayArg(val);\n            }\n\n            f.value = val;\n\n            if (this.ss.onFormula(f) && this.callback) {\n              this.callback.call(f, val);\n            }\n          },\n          resolveCells: function (a, f) {\n            var context = this,\n                formulas = [];\n\n            (function loop(a) {\n              for (var i = 0; i < a.length; ++i) {\n                var x = a[i];\n\n                if (x instanceof Ref) {\n                  add(context.getRefCells(x));\n                }\n\n                if (Array.isArray(x)) {\n                  // make sure we resolve cells in literal matrices\n                  loop(x);\n                }\n              }\n            })(a);\n\n            if (!formulas.length) {\n              return f.call(context);\n            }\n\n            for (var pending = formulas.length, i = 0; i < formulas.length; ++i) {\n              fetch(formulas[i]);\n            }\n\n            function fetch(formula) {\n              formula.exec(context.ss, function () {\n                if (! --pending) {\n                  f.call(context);\n                }\n              }, context);\n            }\n\n            function add(a) {\n              for (var i = 0; i < a.length; ++i) {\n                var cell = a[i];\n\n                if (cell.formula) {\n                  formulas.push(cell.formula);\n                }\n              }\n\n              return true;\n            }\n          },\n          cellValues: function (a, wantNulls) {\n            var ret = [];\n\n            for (var i = 0; i < a.length; ++i) {\n              var val = a[i];\n\n              if (val instanceof Ref) {\n                val = this.getRefData(val, wantNulls);\n                ret = ret.concat(val);\n              } else if (Array.isArray(val)) {\n                ret = ret.concat(this.cellValues(val, wantNulls));\n              } else if (val instanceof Matrix) {\n                ret = ret.concat(this.cellValues(val.data, wantNulls));\n              } else {\n                ret.push(val);\n              }\n            }\n\n            return ret;\n          },\n          fetchName: function (ref, callback) {\n            var f = this.formula;\n            var val = this.ss.nameValue(ref, f.sheet, f.row, f.col);\n\n            if (val instanceof Formula) {\n              // clone and relocate to calling formula, so that relative references in a named\n              // formula would work as expected.\n              val = val.clone(f.sheet, f.row, f.col, true); // XXX: I don't like this dependency here; basically we only need ss.onFormula to\n              // return true and do nothing else.\n\n              var ss = new spreadsheet.ValidationFormulaContext(this.ss.workbook);\n              val.exec(ss, callback, this);\n            } else {\n              if (val instanceof Ref) {\n                // relocate for relative refs\n                val = val.absolute(f.row, f.col);\n\n                if (val instanceof RangeRef && this.ss.isMerged(val)) {\n                  val = val.topLeft;\n                }\n\n                if (!val.sheet) {\n                  val.sheet = f.sheet;\n                }\n              }\n\n              callback(val == null ? new CalcError(\"NAME\") : val);\n            }\n          },\n          force: function (val) {\n            if (val instanceof Ref) {\n              return this.getRefData(val);\n            }\n\n            return val;\n          },\n          func: function (fname, callback, args) {\n            fname = fname.toLowerCase();\n            var f = FUNCS[fname];\n\n            if (f) {\n              return f.call(this, callback, args);\n            }\n\n            callback(new CalcError(\"NAME\"));\n          },\n          bool: function (val) {\n            if (val instanceof Ref) {\n              val = this.getRefData(val);\n            }\n\n            if (typeof val == \"string\") {\n              return val.toLowerCase() == \"true\";\n            }\n\n            if (typeof val == \"number\") {\n              return val !== 0;\n            }\n\n            if (typeof val == \"boolean\") {\n              return val;\n            }\n\n            return val != null;\n          },\n          _arrayArg: function (ref) {\n            // not necessarily a reference though\n            var f = this.formula;\n\n            if (!f.arrayFormulaRange && ref instanceof RangeRef) {\n              // if formula wasn't saved with Ctrl-Shift-Enter but a range is passed, Excel does\n              // something special:\n              //\n              // - if range is Wx1 (horizontal array) and current formula resides within the\n              //   horizontal bounds of the range, the appropriate cell is selected.  Example:\n              //   A1..D1 contain 1, 2, 3, 4 and we have in B2: =A1:D1, then B2 will get 2 (the\n              //   value in A2).  If the same formula is typed outside the horizontal span of the\n              //   range, say in E2: =A1:D1, then #VALUE! is returned.\n              //\n              // - similarly, if the range is 1xH (vertical array), the formula must reside within\n              //   the vertical bounds of the range and it gets the corresponding cell; otherwise,\n              //   #VALUE!.\n              if (ref.height() == 1 && f.col >= ref.topLeft.col && f.col <= ref.bottomRight.col) {\n                return this.getRefData(new CellRef(ref.topLeft.row, f.col).setSheet(ref.sheet));\n              }\n\n              if (ref.width() == 1 && f.row >= ref.topLeft.row && f.row <= ref.bottomRight.row) {\n                return this.getRefData(new CellRef(f.row, ref.topLeft.col).setSheet(ref.sheet));\n              }\n\n              return new CalcError(\"VALUE\");\n            } else {\n              return this.asMatrix(ref);\n            }\n          },\n          asMatrix: function (range) {\n            if (range instanceof Matrix) {\n              return range;\n            }\n\n            var self = this;\n\n            if (range instanceof RangeRef) {\n              var tl = range.topLeft;\n              var top = tl.row,\n                  left = tl.col;\n              var cells = self.getRefCells(range);\n              var m = new Matrix(self);\n\n              if (isFinite(range.width())) {\n                m.width = range.width();\n              }\n\n              if (isFinite(range.height())) {\n                m.height = range.height();\n              }\n\n              if (!isFinite(top)) {\n                top = 0;\n              }\n\n              if (!isFinite(left)) {\n                left = 0;\n              }\n\n              cells.forEach(function (cell) {\n                m.set(cell.row - top, cell.col - left, cell.value);\n              });\n              return m;\n            }\n\n            if (Array.isArray(range) && range.length > 0) {\n              var m = new Matrix(self),\n                  row = 0;\n              range.forEach(function (line) {\n                var col = 0;\n                var h = 1;\n                line.forEach(function (el) {\n                  var isRange = el instanceof RangeRef;\n\n                  if (el instanceof Ref && !isRange) {\n                    el = self.getRefData(el);\n                  }\n\n                  if (isRange || Array.isArray(el)) {\n                    el = self.asMatrix(el);\n                  }\n\n                  if (el instanceof Matrix) {\n                    el.each(function (el, r, c) {\n                      m.set(row + r, col + c, el);\n                    });\n                    h = Math.max(h, el.height);\n                    col += el.width;\n                  } else {\n                    if (typeof el === \"string\" && el.length && !isNaN(el)) {\n                      el = Number(el);\n                    }\n\n                    m.set(row, col++, el);\n                  }\n                });\n                row += h;\n              });\n              return m;\n            }\n          },\n          getRefCells: function (refs, hiddenInfo, wantNulls) {\n            var f = this.formula;\n            return this.ss.getRefCells(refs, hiddenInfo, f.sheet, f.row, f.col, wantNulls);\n          },\n          getRefData: function (ref, wantNulls) {\n            var f = this.formula;\n            return this.ss.getData(ref, f.sheet, f.row, f.col, wantNulls);\n          },\n          workbook: function () {\n            return this.ss.workbook;\n          }\n        });\n        var Matrix = Class.extend({\n          init: function Matrix(context) {\n            this.context = context;\n            this.height = 0;\n            this.width = 0;\n            this.data = [];\n          },\n          clone: function () {\n            var m = new Matrix(this.context);\n            m.height = this.height;\n            m.width = this.width;\n            m.data = this.data.map(function (row) {\n              return row.slice();\n            });\n            return m;\n          },\n          get: function (row, col) {\n            var line = this.data[row];\n            var val = line ? line[col] : null;\n            return val instanceof Ref ? this.context.getRefData(val) : val;\n          },\n          getNA: function (row, col) {\n            if (row < this.height && col < this.width) {\n              return this.get(row, col);\n            }\n\n            return new CalcError(\"N/A\");\n          },\n          set: function (row, col, data) {\n            var line = this.data[row];\n\n            if (line == null) {\n              line = this.data[row] = [];\n            }\n\n            line[col] = data;\n\n            if (row >= this.height) {\n              this.height = row + 1;\n            }\n\n            if (col >= this.width) {\n              this.width = col + 1;\n            }\n          },\n          each: function (f, includeEmpty) {\n            for (var row = 0; row < this.height; ++row) {\n              for (var col = 0; col < this.width; ++col) {\n                var val = this.get(row, col);\n\n                if (includeEmpty || val != null) {\n                  val = f.call(this.context, val, row, col);\n\n                  if (val !== undefined) {\n                    return val;\n                  }\n                }\n              }\n            }\n          },\n          map: function (f, includeEmpty) {\n            var m = new Matrix(this.context);\n            this.each(function (el, row, col) {\n              // here `this` is actually the context\n              m.set(row, col, f.call(this, el, row, col));\n            }, includeEmpty);\n            return m;\n          },\n          eachRow: function (f) {\n            for (var row = 0; row < this.height; ++row) {\n              var val = f.call(this.context, row);\n\n              if (val !== undefined) {\n                return val;\n              }\n            }\n          },\n          eachCol: function (f) {\n            for (var col = 0; col < this.width; ++col) {\n              var val = f.call(this.context, col);\n\n              if (val !== undefined) {\n                return val;\n              }\n            }\n          },\n          mapRow: function (f) {\n            var m = new Matrix(this.context);\n            this.eachRow(function (row) {\n              m.set(row, 0, f.call(this.context, row));\n            });\n            return m;\n          },\n          mapCol: function (f) {\n            var m = new Matrix(this.context);\n            this.eachCol(function (col) {\n              m.set(0, col, f.call(this.context, col));\n            });\n            return m;\n          },\n          toString: function () {\n            return JSON.stringify(this.data);\n          },\n          transpose: function () {\n            var m = new Matrix(this.context);\n            this.each(function (el, row, col) {\n              m.set(col, row, el);\n            });\n            return m;\n          },\n          unit: function (n) {\n            this.width = this.height = n;\n            var a = this.data = new Array(n);\n\n            for (var i = n; --i >= 0;) {\n              var row = a[i] = new Array(n);\n\n              for (var j = n; --j >= 0;) {\n                row[j] = i == j ? 1 : 0;\n              }\n            }\n\n            return this;\n          },\n          multiply: function (b) {\n            var a = this,\n                m = new Matrix(a.context);\n\n            for (var row = 0; row < a.height; ++row) {\n              for (var col = 0; col < b.width; ++col) {\n                var s = 0;\n\n                for (var i = 0; i < a.width; ++i) {\n                  var va = a.get(row, i);\n                  var vb = b.get(i, col);\n\n                  if (typeof va != \"number\" || typeof vb != \"number\") {\n                    throw new CalcError(\"VALUE\");\n                  }\n\n                  s += va * vb;\n                }\n\n                m.set(row, col, s);\n              }\n            }\n\n            return m;\n          },\n          adds: function (b, s) {\n            var a = this,\n                m = new Matrix(a.context);\n            var sign = s ? -1 : 1;\n\n            for (var row = 0; row < a.height; ++row) {\n              for (var col = 0; col < a.width; ++col) {\n                var x = a.get(row, col),\n                    y = b.get(row, col);\n                m.set(row, col, x + sign * y);\n              }\n            }\n\n            return m;\n          },\n          determinant: function () {\n            var a = this.clone().data;\n            var n = a.length;\n            var d = 1,\n                C,\n                L,\n                i,\n                k;\n\n            for (C = 0; C < n; C++) {\n              for (L = C; L < n && !a[L][C]; L++) {}\n\n              if (L == n) {\n                return 0;\n              }\n\n              if (L != C) {\n                d = -d;\n\n                for (k = C; k < n; k++) {\n                  var t = a[C][k];\n                  a[C][k] = a[L][k];\n                  a[L][k] = t;\n                }\n              }\n\n              for (i = C + 1; i < n; i++) {\n                for (k = C + 1; k < n; k++) {\n                  a[i][k] -= a[C][k] * a[i][C] / a[C][C];\n                }\n              }\n\n              d *= a[C][C];\n            }\n\n            return d;\n          },\n          inverse: function () {\n            var n = this.width;\n            var m = this.augment(new Matrix(this.context).unit(n));\n            var a = m.data;\n            var tmp; // Gaussian elimination\n            // https://en.wikipedia.org/wiki/Gaussian_elimination#Finding_the_inverse_of_a_matrix\n            // 1. Get zeros below main diagonal\n\n            for (var k = 0; k < n; ++k) {\n              var imax = argmax(k, n, function (i) {\n                return a[i][k];\n              });\n\n              if (!a[imax][k]) {\n                return null; // singular matrix\n              }\n\n              if (k != imax) {\n                tmp = a[k];\n                a[k] = a[imax];\n                a[imax] = tmp;\n              }\n\n              for (var i = k + 1; i < n; ++i) {\n                for (var j = k + 1; j < 2 * n; ++j) {\n                  a[i][j] -= a[k][j] * a[i][k] / a[k][k];\n                }\n\n                a[i][k] = 0;\n              }\n            } // 2. Get 1-s on main diagonal, dividing by pivot\n\n\n            for (var i = 0; i < n; ++i) {\n              for (var f = a[i][i], j = 0; j < 2 * n; ++j) {\n                a[i][j] /= f;\n              }\n            } // 3. Get zeros above main diagonal.  Actually, we only care to compute the right side\n            // here (that will be the inverse), so in the inner loop below we go while j >= n,\n            // instead of j >= k.\n\n\n            for (var k = n; --k >= 0;) {\n              for (var i = k; --i >= 0;) {\n                if (a[i][k]) {\n                  for (var j = 2 * n; --j >= n;) {\n                    a[i][j] -= a[k][j] * a[i][k];\n                  }\n                }\n              }\n            }\n\n            return m.slice(0, n, n, n);\n          },\n          augment: function (m) {\n            var ret = this.clone(),\n                n = ret.width;\n            m.each(function (val, row, col) {\n              ret.set(row, col + n, val);\n            });\n            return ret;\n          },\n          slice: function (row, col, height, width) {\n            var m = new Matrix(this.context);\n\n            for (var i = 0; i < height; ++i) {\n              for (var j = 0; j < width; ++j) {\n                m.set(i, j, this.get(row + i, col + j));\n              }\n            }\n\n            return m;\n          } // XXX: debug\n          // dump: function() {\n          //     this.data.forEach(function(row){\n          //         console.log(row.map(function(val){\n          //             var str = val.toFixed(3).replace(/\\.?0*$/, function(s){\n          //                 return [ \"\", \" \", \"  \", \"   \", \"    \" ][s.length];\n          //             });\n          //             if (val >= 0) { str = \" \" + str; }\n          //             return str;\n          //         }).join(\"  \"));\n          //     });\n          // }\n\n        });\n\n        function argmax(i, end, f) {\n          var max = f(i),\n              pos = i;\n\n          while (++i < end) {\n            var v = f(i);\n\n            if (v > max) {\n              max = v;\n              pos = i;\n            }\n          }\n\n          return pos;\n        }\n        /* -----[ Formula ]----- */\n\n\n        var Formula = Class.extend({\n          init: function Formula(refs, handler, printer, sheet, row, col, arrayFormulaRange) {\n            this.refs = refs;\n            this.handler = handler;\n            this.print = printer;\n            this.absrefs = null;\n            this.sheet = sheet;\n            this.row = row;\n            this.col = col;\n            this.onReady = [];\n            this.pending = false;\n            this.arrayFormulaRange = arrayFormulaRange;\n          },\n          setArrayFormulaRange: function (ref) {\n            this.arrayFormulaRange = ref.clone().setSheet(this.sheet);\n          },\n          clone: function (sheet, row, col, forceRefs) {\n            var lcsheet = sheet.toLowerCase();\n            var refs = this.refs;\n            var range = this.arrayFormulaRange;\n\n            if (forceRefs || lcsheet != this.sheet.toLowerCase()) {\n              refs = refs.map(function (ref) {\n                if (!ref.hasSheet() && (!ref.sheet || ref.sheet.toLowerCase() != lcsheet)) {\n                  ref = ref.clone().setSheet(sheet);\n                }\n\n                return ref;\n              });\n\n              if (range) {\n                range = range.clone().setSheet(sheet);\n              }\n            }\n\n            return new Formula(refs, this.handler, this.print, sheet, row, col, range);\n          },\n          deepClone: function () {\n            var refs = this.refs.map(function (ref) {\n              return ref.clone();\n            });\n            return new Formula(refs, this.handler, this.print, this.sheet, this.row, this.col, this.arrayFormulaRange);\n          },\n          resolve: function (val) {\n            this.pending = false;\n            this.onReady.forEach(function (callback) {\n              callback(val);\n            });\n          },\n          exec: function (ss, callback, parentContext) {\n            if (\"value\" in this) {\n              if (callback) {\n                callback(this.value);\n              }\n            } else {\n              if (callback) {\n                this.onReady.push(callback);\n              }\n\n              var ctx = new Context(this.resolve, this, ss, parentContext);\n              var level = 0; // if the call chain leads back to this same formula, we have a circular dependency.\n\n              while (parentContext) {\n                if (parentContext.formula === this) {\n                  this.pending = false;\n                  ctx.resolve(new CalcError(\"CIRCULAR\"));\n                  return;\n                }\n\n                parentContext = parentContext.parent;\n                ++level;\n              } // pending is still useful for ASYNC formulas\n\n\n              if (this.pending) {\n                return;\n              }\n\n              this.pending = true;\n\n              var next = function () {\n                // compute and cache the absolute references\n                if (!this.absrefs) {\n                  this.absrefs = this.refs.map(function (ref) {\n                    return ref.absolute(this.row, this.col);\n                  }, this);\n                } // finally invoke the handler given to us by the compiler in calc.js\n\n\n                this.handler.call(ctx);\n              }.bind(this);\n\n              if (level < 20) {\n                next();\n              } else {\n                setTimeout(next, 0);\n              }\n            }\n          },\n          reset: function () {\n            this.onReady = [];\n            this.pending = false;\n            delete this.value;\n          },\n          renameSheet: function (oldSheetName, newSheetName) {\n            oldSheetName = oldSheetName.toLowerCase();\n            this.absrefs = null;\n\n            if (this.sheet.toLowerCase() == oldSheetName) {\n              this.sheet = newSheetName;\n            }\n\n            this.refs.forEach(function (ref) {\n              ref.renameSheet(oldSheetName, newSheetName);\n            });\n          },\n          adjust: function (affectedSheet, operation, start, delta) {\n            affectedSheet = affectedSheet.toLowerCase();\n            var formulaRow = this.row;\n            var formulaCol = this.col;\n            var formulaSheet = this.sheet.toLowerCase();\n            var formulaMoves = false;\n\n            if (formulaSheet == affectedSheet) {\n              // move formula if it's after the change point\n              if (operation == \"row\" && formulaRow >= start) {\n                this.row += delta;\n                formulaMoves = true;\n              }\n\n              if (operation == \"col\" && formulaCol >= start) {\n                this.col += delta;\n                formulaMoves = true;\n              }\n            }\n\n            var newFormulaRow = this.row;\n            var newFormulaCol = this.col;\n            this.absrefs = null;\n            var prevRefs = this.refs;\n            var modified = formulaMoves;\n            this.refs = prevRefs.map(function (ref) {\n              var newRef = adjust(ref);\n\n              if (!modified && !sameRef(newRef, ref)) {\n                modified = true;\n              }\n\n              return newRef;\n            });\n            var prevRange = this.arrayFormulaRange;\n\n            if (prevRange) {\n              this.arrayFormulaRange = adjust(prevRange);\n\n              if (!modified && !sameRef(prevRange, this.arrayFormulaRange)) {\n                modified = true;\n              }\n            }\n\n            if (modified) {\n              // return a clone of the original formula.  needed to undo operations like\n              // deleteRow, which can transform a reference into NULL.\n              return new Formula(prevRefs, this.handler, this.print, this.sheet, formulaRow, formulaCol, prevRange);\n            }\n\n            function adjust(ref) {\n              if (ref === NULL) {\n                return ref;\n              }\n\n              if (ref.sheet.toLowerCase() != affectedSheet) {\n                if (formulaMoves) {\n                  // a reference to another sheet should still point to the same location\n                  // after adjustment; thus if row/col was removed before formula, relative\n                  // references must be adjusted by delta.\n                  if (operation == \"row\" && formulaRow >= start) {\n                    ref = ref.relative(delta, 0);\n                  }\n\n                  if (operation == \"col\" && formulaCol >= start) {\n                    ref = ref.relative(0, delta);\n                  }\n                }\n\n                return ref;\n              }\n\n              return ref.adjust(formulaRow, formulaCol, newFormulaRow, newFormulaCol, operation == \"row\", start, delta);\n            }\n          },\n          toString: function () {\n            return this.print(this.row, this.col);\n          }\n        });\n\n        function sameRef(r1, r2) {\n          // note: r1.eq(r2) will not do, because it returns true for A1 and A1:A1 (CellRef\n          // vs. RangeRef).  To properly undo we need to assert that the references are exactly the\n          // same (including type).\n          if (r1.constructor !== r2.constructor) {\n            return false;\n          }\n\n          if (r1 instanceof CellRef) {\n            return r1.sheet == r2.sheet && r1.row == r2.row && r1.col == r2.col && r1.rel == r2.rel;\n          }\n\n          if (r1 instanceof RangeRef) {\n            return sameRef(r1.topLeft, r2.topLeft) && sameRef(r1.bottomRight, r2.bottomRight) && r1.endSheet == r2.endSheet;\n          }\n\n          if (r1 instanceof UnionRef) {\n            var i = r1.refs.length;\n\n            if (i != r2.refs.length) {\n              return false;\n            }\n\n            while (--i >= 0) {\n              if (!sameRef(r1.refs[i], r2.refs[i])) {\n                return false;\n              }\n            }\n          }\n\n          return true;\n        } // spreadsheet functions --------\n\n\n        var FUNCS = Object.create(null);\n\n        FUNCS[\"if\"] = function (callback, args) {\n          var self = this;\n          var co = args[0],\n              th = args[1],\n              el = args[2]; // XXX: I don't like this resolveCells here.  We should try to declare IF with\n          // defineFunction.\n\n          this.resolveCells([co], function () {\n            var comatrix = self.asMatrix(co);\n\n            if (comatrix) {\n              // XXX: calling both branches in this case, since we'll typically need values from\n              // both.  We could optimize and call them only when first needed, but oh well.\n              th(function (th) {\n                el(function (el) {\n                  var thmatrix = self.asMatrix(th);\n                  var elmatrix = self.asMatrix(el);\n                  callback(comatrix.map(function (val, row, col) {\n                    if (val instanceof CalcError) {\n                      return val;\n                    } else if (self.bool(val)) {\n                      return thmatrix ? thmatrix.get(row, col) : th;\n                    } else {\n                      return elmatrix ? elmatrix.get(row, col) : el;\n                    }\n                  }));\n                });\n              });\n            } else {\n              co = this.force(co);\n\n              if (co instanceof CalcError) {\n                callback(co);\n              } else if (self.bool(co)) {\n                th(callback);\n              } else {\n                el(callback);\n              }\n            }\n          });\n        };\n\n        FUNCS[\"Ï†\"] = function (callback) {\n          callback((1 + Math.sqrt(5)) / 2);\n        }; // Lasciate ogni speranza, voi ch'entrate.\n        //\n        // XXX: document this function.\n\n\n        function compileArgumentChecks(functionName, args) {\n          var arrayArgs = \"function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; \";\n          var resolve = \"function resolve(args, callback) { var toResolve = [], i = 0; \";\n          var name,\n              forced,\n              main = \"'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; \",\n              haveForced = false;\n          var canBeArrayArg = false,\n              hasArrayArgs = false;\n          main += args.map(comp).join(\"\");\n          main += \"if (i < args.length) return new CalcError('N/A'); \";\n          main += \"return xargs; } \";\n          arrayArgs += \"return { args: xargs, width: width, height: height, arrays: arrays }; } \";\n          var f;\n\n          if (haveForced) {\n            resolve += \"this.resolveCells(toResolve, callback); } \";\n            f = new Function(\"CalcError\", \"round\", main + resolve + arrayArgs + \" return { resolve: resolve, check: check, arrayArgs: arrayArgs };\");\n          } else {\n            f = new Function(\"CalcError\", \"round\", main + \" return { check: check };\");\n          }\n\n          f = f(CalcError, limitPrecision);\n\n          if (!hasArrayArgs) {\n            delete f.arrayArgs;\n          }\n\n          return f;\n\n          function comp(x) {\n            name = x[0];\n            var code = \"{ \";\n\n            if (Array.isArray(name)) {\n              arrayArgs += \"while (i < args.length) { \";\n              resolve += \"while (i < args.length) { \";\n              code += \"xargs.push(tmp = []); stack.push(xargs); xargs = tmp; \";\n              code += \"while (i < args.length) { \";\n              code += x.map(comp).join(\"\");\n              code += \"} \";\n              code += \"xargs = stack.pop(); \";\n              resolve += \"} \";\n              arrayArgs += \"} \";\n            } else if (name == \"+\") {\n              arrayArgs += \"while (i < args.length) { \";\n              resolve += \"while (i < args.length) { \";\n              code += \"if (i >= args.length) return new CalcError('N/A'); \";\n              code += \"xargs.push(tmp = []); stack.push(xargs); xargs = tmp; \";\n              code += \"do { \";\n              code += x.slice(1).map(comp).join(\"\");\n              code += \"} while (i < args.length); \";\n              code += \"xargs = stack.pop(); \";\n              resolve += \"} \";\n              arrayArgs += \"} \";\n            } else if (name == \"?\") {\n              // standalone assertion without a new argument\n              code += \"if (!(\" + cond(x[1]) + \")) return new CalcError(err); \";\n            } else {\n              var type = x[1];\n\n              if (Array.isArray(type) && /^#?collect/.test(type[0])) {\n                var wantNulls = /!$/.test(type[0]);\n                var n = type[2];\n                force();\n                code += \"try {\" + \"var $\" + name + \" = this.cellValues(args.slice(i\";\n\n                if (n) {\n                  code += \", i + \" + n;\n                }\n\n                code += \")\" + (wantNulls ? \",true\" : \"\") + \").reduce(function(ret, $\" + name + \"){ \";\n\n                if (type[0].charAt(0) != \"#\") {\n                  code += \"if ($\" + name + \" instanceof CalcError) throw $\" + name + \"; \";\n                }\n\n                code += \"if (\" + cond(type[1]) + \") ret.push($\" + name + \"); \";\n                code += \"return ret; \";\n                code += \"}.bind(this), []); \";\n\n                if (n) {\n                  code += \"i += \" + n + \"; \";\n                } else {\n                  code += \"i = args.length; \";\n                }\n\n                code += \"xargs.push($\" + name + \")\" + \"} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } \";\n                resolve += \"toResolve.push(args.slice(i)); \";\n              } else if (type == \"rest\") {\n                code += \"xargs.push(args.slice(i)); i = args.length; \";\n              } else {\n                if (canBeArrayArg = /^\\*/.test(name)) {\n                  hasArrayArgs = true;\n                  name = name.substr(1);\n                }\n\n                code += \"var $\" + name + \" = args[i++]; \";\n                var allowError = false;\n\n                if (/!$/.test(type)) {\n                  type = type.substr(0, type.length - 1);\n                  allowError = true;\n                } else {\n                  code += \"if ($\" + name + \" instanceof CalcError) return $\" + name + \"; \";\n                }\n\n                code += typeCheck(type, allowError) + \"xargs.push($\" + name + \"); \";\n              }\n            }\n\n            code += \"} \";\n            return code;\n          }\n\n          function force() {\n            if (forced) {\n              return \"$\" + name + \"\";\n            }\n\n            haveForced = true;\n            forced = true;\n            resolve += \"toResolve.push(args[i++]); \";\n            return \"($\" + name + \" = this.force($\" + name + \"))\";\n          }\n\n          function forceNum(round) {\n            return \"(\" + (round ? \"(typeof \" + force() + \" == 'number' ? ($\" + name + \" = round($\" + name + \"), true) : false) || \" : \"(typeof \" + force() + \" == 'number') || \") + \"(typeof $\" + name + \" == 'boolean' ? ($\" + name + \" = +$\" + name + \", true) : false) || \" + \"(typeof $\" + name + \" == 'string' && !/^(?:=|true|false)/i.test($\" + name + \") ? (\" + \"tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $\" + name + \"), \" + \"/^date|number|percent$/.test(tmp.type) ? ($\" + name + \" = +tmp.value, true) : false\" + \") : false)\" + \")\";\n          }\n\n          function typeCheck(type, allowError) {\n            forced = false;\n            var ret = \"if (!(\" + cond(type) + \")) { \";\n\n            if (forced && !allowError) {\n              ret += \" if ($\" + name + \" instanceof CalcError) return $\" + name + \"; \";\n            }\n\n            ret += \"return new CalcError(err); } \";\n\n            if (!forced) {\n              resolve += \"i++; \";\n            }\n\n            if (canBeArrayArg) {\n              arrayArgs += \"var $\" + name + \" = this._arrayArg(args[i]); \" + \"if ($\" + name + \") { \" + \"xargs.push($\" + name + \"); \" + \"width = Math.max(width, $\" + name + \".width); \" + \"height = Math.max(height, $\" + name + \".height); \" + \"arrays.push(true) } else { \" + \"xargs.push(args[i]); \" + \"arrays.push(false); } i++; \";\n            } else {\n              arrayArgs += \"xargs.push(args[i++]); arrays.push(false); \";\n            }\n\n            return ret;\n          }\n\n          function cond(type) {\n            if (Array.isArray(type)) {\n              if (type[0] == \"or\") {\n                return \"(\" + type.slice(1).map(cond).join(\") || (\") + \")\";\n              }\n\n              if (type[0] == \"and\") {\n                return \"(\" + type.slice(1).map(cond).join(\") && (\") + \")\";\n              }\n\n              if (type[0] == \"values\") {\n                return \"(\" + type.slice(1).map(function (val) {\n                  return force() + \" === \" + val;\n                }).join(\") || (\") + \")\";\n              }\n\n              if (type[0] == \"null\") {\n                return \"(\" + cond(\"null\") + \" ? (($\" + name + \" = \" + type[1] + \"), true) : false)\";\n              }\n\n              if (type[0] == \"between\" || type[0] == \"[between]\") {\n                return \"(\" + force() + \" >= \" + type[1] + \" && \" + \"$\" + name + \" <= \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n              }\n\n              if (type[0] == \"(between)\") {\n                return \"(\" + force() + \" > \" + type[1] + \" && \" + \"$\" + name + \" < \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n              }\n\n              if (type[0] == \"(between]\") {\n                return \"(\" + force() + \" > \" + type[1] + \" && \" + \"$\" + name + \" <= \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n              }\n\n              if (type[0] == \"[between)\") {\n                return \"(\" + force() + \" >= \" + type[1] + \" && \" + \"$\" + name + \" < \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n              }\n\n              if (type[0] == \"assert\") {\n                var err = type[2] || \"N/A\";\n                return \"((\" + type[1] + \") ? true : (err = \" + JSON.stringify(err) + \", false))\";\n              }\n\n              if (type[0] == \"not\") {\n                return \"!(\" + cond(type[1]) + \")\";\n              }\n\n              throw new Error(\"Unknown array type condition: \" + type[0]);\n            }\n\n            if (type == \"number\" || type == \"datetime\") {\n              return forceNum(true);\n            }\n\n            if (type == \"number!\") {\n              return \"(typeof \" + force() + \" == 'number' ? ($\" + name + \" = round($\" + name + \"), true) : false)\";\n            }\n\n            if (type == \"integer\" || type == \"date\") {\n              return \"(\" + forceNum() + \" && (($\" + name + \" |= 0), true))\";\n            }\n\n            if (type == \"divisor\") {\n              return \"(\" + forceNum(true) + \" && ($\" + name + \" == 0 ? ((err = 'DIV/0'), false) : true))\";\n            }\n\n            if (type == \"number+\") {\n              return \"(\" + forceNum(true) + \" && ($\" + name + \" >= 0 ? true : ((err = 'NUM'), false)))\";\n            }\n\n            if (type == \"integer+\") {\n              return \"(\" + forceNum() + \" && (($\" + name + \" |= 0) >= 0 ? true : ((err = 'NUM'), false)))\";\n            }\n\n            if (type == \"number++\") {\n              return \"(\" + forceNum(true) + \" && ($\" + name + \" > 0 ? true : ((err = 'NUM'), false)))\";\n            }\n\n            if (type == \"integer++\") {\n              return \"(\" + forceNum() + \" && (($\" + name + \" |= 0) > 0 ? true : ((err = 'NUM'), false)))\";\n            }\n\n            if (type == \"string\") {\n              return \"((typeof \" + force() + \" == 'string' || typeof $\" + name + \" == 'boolean' || typeof $\" + name + \" == 'number') ? ($\" + name + \" += '', true) : ($\" + name + \" === undefined ? (($\" + name + \" = ''), true) : false))\";\n            }\n\n            if (type == \"boolean\") {\n              return \"(typeof \" + force() + \" == 'boolean')\";\n            }\n\n            if (type == \"logical\") {\n              return \"(typeof \" + force() + \" == 'boolean' || (typeof $\" + name + \" == 'number' ? ($\" + name + \" = !!$\" + name + \", true) : false))\";\n            }\n\n            if (type == \"matrix\") {\n              force();\n              return \"((m = this.asMatrix($\" + name + \")) ? ($\" + name + \" = m) : false)\";\n            }\n\n            if (type == \"#matrix\") {\n              return \"((m = this.asMatrix($\" + name + \")) ? ($\" + name + \" = m) : false)\";\n            }\n\n            if (type == \"ref\") {\n              return \"($\" + name + \" instanceof kendo.spreadsheet.Ref)\";\n            }\n\n            if (type == \"area\") {\n              return \"($\" + name + \" instanceof kendo.spreadsheet.CellRef || $\" + name + \" instanceof kendo.spreadsheet.RangeRef)\";\n            }\n\n            if (type == \"cell\") {\n              return \"($\" + name + \" instanceof kendo.spreadsheet.CellRef)\";\n            }\n\n            if (type == \"null\") {\n              return \"(\" + force() + \" == null)\";\n            }\n\n            if (type == \"anyvalue\") {\n              return \"(\" + force() + \" != null && i <= args.length)\";\n            }\n\n            if (type == \"forced\") {\n              return \"(\" + force() + \", i <= args.length)\";\n            }\n\n            if (type == \"anything\") {\n              return \"(i <= args.length)\";\n            }\n\n            if (type == \"blank\") {\n              return \"(\" + force() + \" == null || $\" + name + \" === '')\";\n            }\n\n            throw new Error(\"Can't check for type: \" + type);\n          }\n        }\n\n        function limitPrecision(num) {\n          return num === parseInt(num, 10) ? num : +num.toPrecision(14);\n        }\n\n        function maybeRoundFloatErrors(num) {\n          if (typeof num == \"number\") {\n            return limitPrecision(num);\n          } else {\n            return num;\n          }\n        }\n\n        function withErrorHandling(obj, f, args) {\n          if (args instanceof CalcError) {\n            return args;\n          }\n\n          try {\n            return f.apply(obj, args);\n          } catch (ex) {\n            if (ex instanceof CalcError) {\n              return ex;\n            } else {\n              throw ex;\n            }\n          }\n        }\n\n        function makeSyncFunction(handler, resolve, check, arrayArgs) {\n          return function (callback, args) {\n            function doit() {\n              if (arrayArgs) {\n                var x = arrayArgs.call(this, args);\n                args = x.args;\n\n                if (x.width > 0 && x.height > 0) {\n                  var result = new Matrix(this);\n\n                  for (var row = 0; row < x.height; ++row) {\n                    for (var col = 0; col < x.width; ++col) {\n                      var xargs = [];\n\n                      for (var i = 0; i < args.length; ++i) {\n                        if (x.arrays[i]) {\n                          xargs[i] = args[i].getNA(row, col);\n                        } else {\n                          xargs[i] = args[i];\n                        }\n                      }\n\n                      xargs = check.call(this, xargs);\n                      result.set(row, col, withErrorHandling(this, handler, xargs));\n                    }\n                  }\n\n                  return callback(result);\n                }\n              }\n\n              var xargs = check.call(this, args);\n              callback(withErrorHandling(this, handler, xargs));\n            }\n\n            if (resolve) {\n              resolve.call(this, args, doit);\n            } else {\n              doit.call(this);\n            }\n          };\n        }\n\n        function makeAsyncFunction(handler, resolve, check, arrayArgs) {\n          return function (callback, args) {\n            function doit() {\n              if (arrayArgs) {\n                var x = arrayArgs.call(this, args);\n                args = x.args;\n\n                if (x.width > 0 && x.height > 0) {\n                  var result = new Matrix(this);\n                  var count = x.width * x.height;\n\n                  var makeCallback = function (row, col) {\n                    return function (value) {\n                      result.set(row, col, value);\n                      --count;\n\n                      if (count === 0) {\n                        return callback(result);\n                      }\n                    };\n                  };\n\n                  for (var row = 0; row < x.height && count > 0; ++row) {\n                    for (var col = 0; col < x.width && count > 0; ++col) {\n                      var xargs = [];\n\n                      for (var i = 0; i < args.length; ++i) {\n                        if (x.arrays[i]) {\n                          xargs[i] = args[i].getNA(row, col);\n                        } else {\n                          xargs[i] = args[i];\n                        }\n                      }\n\n                      xargs = check.call(this, xargs);\n\n                      if (xargs instanceof CalcError) {\n                        result.set(row, col, xargs);\n                        --count;\n\n                        if (count === 0) {\n                          return callback(result);\n                        }\n                      } else {\n                        xargs.unshift(makeCallback(row, col));\n                        handler.apply(this, xargs);\n                      }\n                    }\n                  }\n\n                  return;\n                }\n              }\n\n              var x = check.call(this, args);\n\n              if (x instanceof CalcError) {\n                callback(x);\n              } else {\n                x.unshift(callback);\n                handler.apply(this, x);\n              }\n            }\n\n            if (resolve) {\n              resolve.call(this, args, doit);\n            } else {\n              doit.call(this);\n            }\n          };\n        }\n\n        function defineFunction(name, func) {\n          name = name.toLowerCase();\n          FUNCS[name] = func;\n          return {\n            args: function (args, log) {\n              var code = compileArgumentChecks(name, args); // XXX: DEBUG\n\n              if (log) {\n                if (code.arrayArgs) {\n                  console.log(code.arrayArgs.toString());\n                }\n\n                if (code.resolve) {\n                  console.log(code.resolve.toString());\n                }\n\n                if (code.check) {\n                  console.log(code.check.toString());\n                }\n              }\n\n              var f = FUNCS[name] = makeSyncFunction(func, code.resolve, code.check, code.arrayArgs);\n              f.kendoSpreadsheetArgs = args;\n              return this;\n            },\n            argsAsync: function (args, log) {\n              var code = compileArgumentChecks(name, args); // XXX: DEBUG\n\n              if (log) {\n                if (code.arrayArgs) {\n                  console.log(code.arrayArgs.toString());\n                }\n\n                if (code.resolve) {\n                  console.log(code.resolve.toString());\n                }\n\n                if (code.check) {\n                  console.log(code.check.toString());\n                }\n              }\n\n              var f = FUNCS[name] = makeAsyncFunction(func, code.resolve, code.check, code.arrayArgs);\n              f.kendoSpreadsheetArgs = args;\n              return this;\n            }\n          };\n        }\n        /* -----[ date calculations ]----- */\n        // Julian days algorithms from http://www.hermetic.ch/cal_stud/jdn.htm#comp\n\n\n        function dateToJulianDays(y, m, d) {\n          m++;\n          return (1461 * (y + 4800 + ((m - 14) / 12 | 0)) / 4 | 0) + (367 * (m - 2 - 12 * ((m - 14) / 12 | 0)) / 12 | 0) - (3 * ((y + 4900 + ((m - 14) / 12 | 0)) / 100 | 0) / 4 | 0) + d - 32075;\n        }\n\n        function julianDaysToDate(jd) {\n          var l, n, j, i, m, d, y;\n          l = jd + 68569;\n          n = 4 * l / 146097 | 0;\n          l = l - ((146097 * n + 3) / 4 | 0);\n          i = 4000 * (l + 1) / 1461001 | 0;\n          l = l - (1461 * i / 4 | 0) + 31;\n          j = 80 * l / 2447 | 0;\n          d = l - (2447 * j / 80 | 0);\n          l = j / 11 | 0;\n          m = j + 2 - 12 * l;\n          y = 100 * (n - 49) + i + l;\n          m--;\n          return {\n            year: y,\n            month: m,\n            date: d,\n            day: (jd + 1) % 7,\n            ord: ORDINAL_ADD_DAYS[isLeapYear(y)][m] + d\n          };\n        } // This uses the Google Spreadsheet approach: treat 1899-12-31 as day 1, allowing to avoid\n        // implementing the \"Leap Year Bug\" yet still be Excel compatible for dates starting 1900-03-01.\n\n\n        var BASE_DATE = dateToJulianDays(1900, 0, -1);\n        var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        var ORDINAL_ADD_DAYS = [[0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334], // non-leap year\n        [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335] // leap year\n        ];\n\n        function isLeapYear(yr) {\n          if (yr % 4) {\n            return 0;\n          }\n\n          if (yr % 100) {\n            return 1;\n          }\n\n          if (yr % 400) {\n            return 0;\n          }\n\n          return 1;\n        }\n\n        function daysInYear(yr) {\n          return isLeapYear(yr) ? 366 : 365;\n        }\n\n        function daysInMonth(yr, mo) {\n          return isLeapYear(yr) && mo == 1 ? 29 : DAYS_IN_MONTH[mo];\n        }\n\n        function validDate(yr, mo, da) {\n          return mo >= 1 && mo <= 12 && da >= 1 && da <= daysInMonth(yr, mo - 1);\n        }\n\n        function unpackDate(serial) {\n          return julianDaysToDate((serial | 0) + BASE_DATE);\n        }\n\n        function packDate(year, month, date) {\n          return dateToJulianDays(year, month, date) - BASE_DATE;\n        }\n\n        var MS_IN_MIN = 60 * 1000;\n        var MS_IN_HOUR = 60 * MS_IN_MIN;\n        var MS_IN_DAY = 24 * MS_IN_HOUR;\n\n        function unpackTime(serial) {\n          var frac = serial - (serial | 0);\n\n          if (frac < 0) {\n            frac++;\n          }\n\n          var ms = Math.round(MS_IN_DAY * frac);\n          var hours = Math.floor(ms / MS_IN_HOUR);\n          ms -= hours * MS_IN_HOUR;\n          var minutes = Math.floor(ms / MS_IN_MIN);\n          ms -= minutes * MS_IN_MIN;\n          var seconds = Math.floor(ms / 1000);\n          ms -= seconds * 1000;\n          return {\n            hours: hours,\n            minutes: minutes,\n            seconds: seconds,\n            milliseconds: ms\n          };\n        }\n\n        function serialToDate(serial) {\n          var d = unpackDate(serial),\n              t = unpackTime(serial);\n          return new Date(d.year, d.month, d.date, t.hours, t.minutes, t.seconds, t.milliseconds);\n        }\n\n        function packTime(hh, mm, ss, ms) {\n          return (hh + (mm + (ss + ms / 1000) / 60) / 60) / 24;\n        }\n\n        function dateToSerial(date) {\n          var time = packTime(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n          date = packDate(date.getFullYear(), date.getMonth(), date.getDate());\n\n          if (date < 0) {\n            return date - 1 + time;\n          } else {\n            return date + time;\n          }\n        }\n\n        function parseDate(str, format) {\n          if (format) {\n            format = kendo.spreadsheet.formatting.makeDateFormat(format);\n          }\n\n          return kendo.parseExactDate(str, format) || kendo.parseExactDate(str) || kendo.parseExactDate(str, [\"MMMM dd yyyy\", \"MMMM dd yy\", \"MMM dd yyyy\", \"MMM dd yy\", \"dd MMMM yyyy\", \"dd MMMM yy\", \"dd MMM yyyy\", \"dd MMM yy\", \"MMMM dd, yyyy\", \"MMMM dd, yy\", \"MMM dd, yyyy\", \"MMM dd, yy\", \"MMMM dd\", \"MMM dd\", \"MMMM yyyy\", \"MMM yyyy\", \"dd MMMM\", \"dd MMM\"]);\n        }\n        /* -----[ exports ]----- */\n\n\n        exports.CalcError = CalcError;\n        exports.Formula = Formula;\n        exports.Matrix = Matrix;\n        exports.packDate = packDate;\n        exports.unpackDate = unpackDate;\n        exports.packTime = packTime;\n        exports.unpackTime = unpackTime;\n        exports.serialToDate = serialToDate;\n        exports.dateToSerial = dateToSerial;\n        exports.daysInMonth = daysInMonth;\n        exports.validDate = validDate;\n        exports.isLeapYear = isLeapYear;\n        exports.daysInYear = daysInYear;\n        exports.parseDate = parseDate;\n        exports.limitPrecision = limitPrecision;\n        spreadsheet.dateToNumber = dateToSerial;\n        spreadsheet.numberToDate = serialToDate;\n        spreadsheet.defineFunction = defineFunction;\n        spreadsheet.CalcError = CalcError;\n        exports.defineFunction = defineFunction;\n\n        exports.defineAlias = function (alias, name) {\n          var orig = FUNCS[name];\n\n          if (!orig) {\n            throw new Error(\"Function \" + name + \" is not yet defined\");\n          }\n\n          if (!orig.kendoSpreadsheetAliases) {\n            orig.kendoSpreadsheetAliases = [name];\n          }\n\n          orig.kendoSpreadsheetAliases.push(alias);\n          FUNCS[alias] = orig;\n        };\n\n        exports.FUNCS = FUNCS;\n        /* -----[ Excel operators ]----- */\n\n        var NUMBER_OR_ZERO = [\"or\", \"number\", [\"null\", 0]];\n        var ARGS_NUMERIC = [[\"*a\", NUMBER_OR_ZERO], [\"*b\", NUMBER_OR_ZERO]];\n        var ARGS_ANYVALUE = [[\"*a\", \"forced\"], [\"*b\", \"forced\"]];\n        defineFunction(\"binary+\", function (a, b) {\n          return a + b;\n        }).args(ARGS_NUMERIC);\n        defineFunction(\"binary-\", function (a, b) {\n          return a - b;\n        }).args(ARGS_NUMERIC);\n        defineFunction(\"binary*\", function (a, b) {\n          return a * b;\n        }).args(ARGS_NUMERIC);\n        defineFunction(\"binary/\", function (a, b) {\n          return a / b;\n        }).args([[\"*a\", NUMBER_OR_ZERO], [\"*b\", \"divisor\"]]);\n        defineFunction(\"binary^\", function (a, b) {\n          return Math.pow(a, b);\n        }).args(ARGS_NUMERIC);\n        defineFunction(\"binary&\", function (a, b) {\n          if (a == null) {\n            a = \"\";\n          }\n\n          if (b == null) {\n            b = \"\";\n          }\n\n          return \"\" + a + b;\n        }).args([[\"*a\", [\"or\", \"number\", \"string\", \"boolean\", \"null\"]], [\"*b\", [\"or\", \"number\", \"string\", \"boolean\", \"null\"]]]);\n\n        function equals(a, b) {\n          a = typeof a === \"string\" ? a.toLowerCase() : a;\n          b = typeof b === \"string\" ? b.toLowerCase() : b; // special cases\n\n          if (a === false && b == null) {\n            return true;\n          }\n\n          if (b === false && a == null) {\n            return true;\n          }\n\n          if (a === 0 && b == null) {\n            return true;\n          }\n\n          if (b === 0 && a == null) {\n            return true;\n          }\n\n          if (a === \"\" && b == null) {\n            return true;\n          }\n\n          if (b === \"\" && a == null) {\n            return true;\n          }\n\n          return a === b;\n        }\n\n        defineFunction(\"binary=\", equals).args(ARGS_ANYVALUE);\n        defineFunction(\"binary<>\", function (a, b) {\n          return !equals(a, b);\n        }).args(ARGS_ANYVALUE);\n        defineFunction(\"binary<\", binaryCompare(function (a, b) {\n          return a < b;\n        })).args(ARGS_ANYVALUE);\n        defineFunction(\"binary<=\", binaryCompare(function (a, b) {\n          return a <= b;\n        })).args(ARGS_ANYVALUE);\n        defineFunction(\"binary>\", binaryCompare(function (a, b) {\n          return a > b;\n        })).args(ARGS_ANYVALUE);\n        defineFunction(\"binary>=\", binaryCompare(function (a, b) {\n          return a >= b;\n        })).args(ARGS_ANYVALUE);\n        defineFunction(\"unary+\", function (a) {\n          return a;\n        }).args([[\"*a\", NUMBER_OR_ZERO]]);\n        defineFunction(\"unary-\", function (a) {\n          return -a;\n        }).args([[\"*a\", NUMBER_OR_ZERO]]);\n        defineFunction(\"unary%\", function (a) {\n          return a / 100;\n        }).args([[\"*a\", NUMBER_OR_ZERO]]); // range operator\n\n        defineFunction(\"binary:\", function (a, b) {\n          return new RangeRef(a, b).setSheet(a.sheet || this.formula.sheet, a.hasSheet());\n        }).args([[\"a\", \"cell\"], [\"b\", \"cell\"]]); // union operator\n\n        defineFunction(\"binary,\", function (a, b) {\n          return new UnionRef([a, b]);\n        }).args([[\"a\", \"ref\"], [\"b\", \"ref\"]]); // intersection operator\n\n        defineFunction(\"binary \", function (a, b) {\n          return a.intersect(b);\n        }).args([[\"a\", \"ref\"], [\"b\", \"ref\"]]);\n        /* -----[ conditionals ]----- */\n\n        defineFunction(\"not\", function (a) {\n          return !this.bool(a);\n        }).args([[\"*a\", [\"or\", \"anyvalue\", [\"null\", 0]]]]);\n        /* -----[ the IS* functions ]----- */\n\n        defineFunction(\"isblank\", function (val) {\n          if (val instanceof CellRef) {\n            val = this.getRefData(val);\n            return val == null;\n          }\n\n          return false;\n        }).args([[\"*value\", \"anything!\"]]);\n        defineFunction(\"iserror\", function (val) {\n          return val instanceof CalcError;\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"iserr\", function (val) {\n          return val instanceof CalcError && val.code != \"N/A\";\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"isna\", function (val) {\n          return val instanceof CalcError && val.code == \"N/A\";\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"islogical\", function (val) {\n          return typeof val == \"boolean\";\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"isnontext\", function (val) {\n          return typeof val != \"string\";\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"istext\", function (val) {\n          return typeof val == \"string\";\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"isnumber\", function (val) {\n          return typeof val == \"number\";\n        }).args([[\"*value\", \"forced!\"]]);\n        defineFunction(\"isref\", function (val) {\n          // apparently should return true only for cell and range\n          return val instanceof CellRef || val instanceof RangeRef;\n        }).args([[\"*value\", \"anything!\"]]);\n        /* -----[ resolve NameRef-s ]----- */\n\n        FUNCS[\",getname\"] = function (callback, args) {\n          this.fetchName(args[0], callback);\n        }; /// utils\n\n\n        function binaryCompare(func) {\n          return function (left, right) {\n            if (typeof left == \"string\" && typeof right != \"string\") {\n              right = right == null ? \"\" : right + \"\";\n            }\n\n            if (typeof left != \"string\" && typeof right == \"string\") {\n              left = left == null ? \"\" : left + \"\";\n            }\n\n            if (typeof left == \"number\" && right == null) {\n              right = 0;\n            }\n\n            if (typeof right == \"number\" && left == null) {\n              left = 0;\n            }\n\n            if (typeof left == \"string\" && typeof right == \"string\") {\n              // string comparison is case insensitive\n              left = left.toLowerCase();\n              right = right.toLowerCase();\n            }\n\n            if (typeof right == typeof left) {\n              return func(left, right);\n            } else {\n              return new CalcError(\"VALUE\");\n            }\n          };\n        }\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    81200:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./references\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(14912);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","calc","spreadsheet","kendo","runtime","Class","Ref","CellRef","RangeRef","UnionRef","NULL","NULLREF","CalcError","code","prototype","toString","Context","extend","init","callback","formula","ss","parent","resolve","val","self","resolveCells","_resolve","error","Array","isArray","asMatrix","maybeRoundFloatErrors","arrayFormulaRange","_arrayArg","value","onFormula","call","a","context","formulas","loop","i","length","x","add","getRefCells","pending","fetch","exec","cell","push","cellValues","wantNulls","ret","getRefData","concat","Matrix","data","fetchName","ref","nameValue","sheet","row","col","Formula","clone","ValidationFormulaContext","workbook","absolute","isMerged","topLeft","force","func","fname","args","toLowerCase","FUNCS","bool","height","bottomRight","setSheet","width","range","tl","top","left","cells","m","isFinite","forEach","set","line","h","el","isRange","each","r","c","Math","max","isNaN","Number","refs","hiddenInfo","getData","map","slice","get","getNA","includeEmpty","eachRow","eachCol","mapRow","mapCol","JSON","stringify","transpose","unit","n","j","multiply","b","s","va","vb","adds","sign","y","determinant","d","C","L","k","t","inverse","augment","tmp","imax","argmax","end","pos","v","handler","printer","print","absrefs","onReady","setArrayFormulaRange","forceRefs","lcsheet","hasSheet","deepClone","parentContext","ctx","level","next","bind","setTimeout","reset","renameSheet","oldSheetName","newSheetName","adjust","affectedSheet","operation","start","delta","formulaRow","formulaCol","formulaSheet","formulaMoves","newFormulaRow","newFormulaCol","prevRefs","modified","newRef","sameRef","prevRange","relative","r1","r2","constructor","rel","endSheet","Object","create","co","th","comatrix","thmatrix","elmatrix","sqrt","compileArgumentChecks","functionName","arrayArgs","name","forced","main","haveForced","canBeArrayArg","hasArrayArgs","comp","join","Function","limitPrecision","cond","type","test","charAt","substr","allowError","typeCheck","forceNum","round","err","Error","num","parseInt","toPrecision","withErrorHandling","obj","ex","makeSyncFunction","check","doit","result","xargs","arrays","makeAsyncFunction","count","makeCallback","unshift","defineFunction","log","console","kendoSpreadsheetArgs","argsAsync","dateToJulianDays","julianDaysToDate","jd","l","year","month","date","day","ord","ORDINAL_ADD_DAYS","isLeapYear","BASE_DATE","DAYS_IN_MONTH","yr","daysInYear","daysInMonth","mo","validDate","da","unpackDate","serial","packDate","MS_IN_MIN","MS_IN_HOUR","MS_IN_DAY","unpackTime","frac","ms","hours","floor","minutes","seconds","milliseconds","serialToDate","Date","packTime","hh","mm","dateToSerial","time","getHours","getMinutes","getSeconds","getMilliseconds","getFullYear","getMonth","getDate","parseDate","str","format","formatting","makeDateFormat","parseExactDate","dateToNumber","numberToDate","defineAlias","alias","orig","kendoSpreadsheetAliases","NUMBER_OR_ZERO","ARGS_NUMERIC","ARGS_ANYVALUE","pow","equals","binaryCompare","intersect","right","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/client/app-router/node_modules/@progress/kendo-ui/js/spreadsheet/runtime.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 14912:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// -*- fill-column: 100 -*-\n\n(function(f, define){\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(81200) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function(){\n    \"use strict\";\n\n    // WARNING: removing the following jshint declaration and turning\n    // == into === to make JSHint happy will break functionality.\n\n    /* global console */\n\n\n    var calc = {};\n    var spreadsheet = kendo.spreadsheet;\n    spreadsheet.calc = calc;\n    var exports = calc.runtime = {};\n    var Class = kendo.Class;\n\n    var Ref = spreadsheet.Ref;\n    var CellRef = spreadsheet.CellRef;\n    var RangeRef = spreadsheet.RangeRef;\n    var UnionRef = spreadsheet.UnionRef;\n    var NULL = spreadsheet.NULLREF;\n\n    /* -----[ Errors ]----- */\n\n    function CalcError(code) {\n        if (code instanceof CalcError) {\n            return code;\n        }\n        this.code = code;\n    }\n\n    CalcError.prototype.toString = function() {\n        return \"#\" + this.code + (this.code == \"NAME\" ? \"?\" : \"!\");\n    };\n\n    /* -----[ Context ]----- */\n\n    var Context = Class.extend({\n        init: function Context(callback, formula, ss, parent) {\n            this.callback = callback;\n            this.formula = formula;\n            this.ss = ss;\n            this.parent = parent;\n        },\n\n        resolve: function(val) {\n            var self = this;\n            if (val instanceof Ref) {\n                self.resolveCells([ val ], function(){\n                    self._resolve(val);\n                });\n            } else {\n                self._resolve(val);\n            }\n        },\n\n        error: function(val) {\n            return new CalcError(val);\n        },\n\n        _resolve: function(val) {\n            if (val === undefined) {\n                val = null;\n            } else if (Array.isArray(val)) {\n                val = this.asMatrix(val);\n            } else {\n                val = maybeRoundFloatErrors(val);\n            }\n            var f = this.formula;\n            if (f.arrayFormulaRange) {\n                // when this is an array formula, make sure we return a Matrix.  The value already\n                // *should* be a Matrix, so this won't incur speed penalty in normal cases.\n                val = this.asMatrix(val) || this.asMatrix([[ val ]]);\n            } else if (val instanceof RangeRef) {\n                val = this._arrayArg(val);\n            }\n            f.value = val;\n            if (this.ss.onFormula(f) && this.callback) {\n                this.callback.call(f, val);\n            }\n        },\n\n        resolveCells: function(a, f) {\n            var context = this, formulas = [];\n\n            (function loop(a){\n                for (var i = 0; i < a.length; ++i) {\n                    var x = a[i];\n                    if (x instanceof Ref) {\n                        add(context.getRefCells(x));\n                    }\n                    if (Array.isArray(x)) {\n                        // make sure we resolve cells in literal matrices\n                        loop(x);\n                    }\n                }\n            })(a);\n\n            if (!formulas.length) {\n                return f.call(context);\n            }\n\n            for (var pending = formulas.length, i = 0; i < formulas.length; ++i) {\n                fetch(formulas[i]);\n            }\n            function fetch(formula) { \n                formula.exec(context.ss, function(){\n                    if (!--pending) {\n                        f.call(context);\n                    }\n                }, context);\n            }\n            function add(a) {\n                for (var i = 0; i < a.length; ++i) {\n                    var cell = a[i];\n                    if (cell.formula) {\n                        formulas.push(cell.formula);\n                    }\n                }\n                return true;\n            }\n        },\n\n        cellValues: function(a, wantNulls) {\n            var ret = [];\n            for (var i = 0; i < a.length; ++i) {\n                var val = a[i];\n                if (val instanceof Ref) {\n                    val = this.getRefData(val, wantNulls);\n                    ret = ret.concat(val);\n                } else if (Array.isArray(val)) {\n                    ret = ret.concat(this.cellValues(val, wantNulls));\n                } else if (val instanceof Matrix) {\n                    ret = ret.concat(this.cellValues(val.data, wantNulls));\n                } else {\n                    ret.push(val);\n                }\n            }\n            return ret;\n        },\n\n        fetchName: function(ref, callback) {\n            var f = this.formula;\n            var val = this.ss.nameValue(ref, f.sheet, f.row, f.col);\n            if (val instanceof Formula) {\n                // clone and relocate to calling formula, so that relative references in a named\n                // formula would work as expected.\n                val = val.clone(f.sheet, f.row, f.col, true);\n\n                // XXX: I don't like this dependency here; basically we only need ss.onFormula to\n                // return true and do nothing else.\n                var ss = new spreadsheet.ValidationFormulaContext(this.ss.workbook);\n\n                val.exec(ss, callback, this);\n            } else {\n                if (val instanceof Ref) {\n                    // relocate for relative refs\n                    val = val.absolute(f.row, f.col);\n                    if (val instanceof RangeRef && this.ss.isMerged(val)) {\n                        val = val.topLeft;\n                    }\n                    if (!val.sheet) {\n                        val.sheet = f.sheet;\n                    }\n                }\n                callback(val == null ? new CalcError(\"NAME\") : val);\n            }\n        },\n\n        force: function(val) {\n            if (val instanceof Ref) {\n                return this.getRefData(val);\n            }\n            return val;\n        },\n\n        func: function(fname, callback, args) {\n            fname = fname.toLowerCase();\n            var f = FUNCS[fname];\n            if (f) {\n                return f.call(this, callback, args);\n            }\n            callback(new CalcError(\"NAME\"));\n        },\n\n        bool: function(val) {\n            if (val instanceof Ref) {\n                val = this.getRefData(val);\n            }\n            if (typeof val == \"string\") {\n                return val.toLowerCase() == \"true\";\n            }\n            if (typeof val == \"number\") {\n                return val !== 0;\n            }\n            if (typeof val == \"boolean\") {\n                return val;\n            }\n            return val != null;\n        },\n\n        _arrayArg: function(ref) { // not necessarily a reference though\n            var f = this.formula;\n            if (!f.arrayFormulaRange && ref instanceof RangeRef) {\n                // if formula wasn't saved with Ctrl-Shift-Enter but a range is passed, Excel does\n                // something special:\n                //\n                // - if range is Wx1 (horizontal array) and current formula resides within the\n                //   horizontal bounds of the range, the appropriate cell is selected.  Example:\n                //   A1..D1 contain 1, 2, 3, 4 and we have in B2: =A1:D1, then B2 will get 2 (the\n                //   value in A2).  If the same formula is typed outside the horizontal span of the\n                //   range, say in E2: =A1:D1, then #VALUE! is returned.\n                //\n                // - similarly, if the range is 1xH (vertical array), the formula must reside within\n                //   the vertical bounds of the range and it gets the corresponding cell; otherwise,\n                //   #VALUE!.\n                if (ref.height() == 1 && f.col >= ref.topLeft.col && f.col <= ref.bottomRight.col) {\n                    return this.getRefData(new CellRef(ref.topLeft.row, f.col).setSheet(ref.sheet));\n                }\n                if (ref.width() == 1 && f.row >= ref.topLeft.row && f.row <= ref.bottomRight.row) {\n                    return this.getRefData(new CellRef(f.row, ref.topLeft.col).setSheet(ref.sheet));\n                }\n                return new CalcError(\"VALUE\");\n            } else {\n                return this.asMatrix(ref);\n            }\n        },\n\n        asMatrix: function(range) {\n            if (range instanceof Matrix) {\n                return range;\n            }\n            var self = this;\n            if (range instanceof RangeRef) {\n                var tl = range.topLeft;\n                var top = tl.row, left = tl.col;\n                var cells = self.getRefCells(range);\n                var m = new Matrix(self);\n                if (isFinite(range.width())) {\n                    m.width = range.width();\n                }\n                if (isFinite(range.height())) {\n                    m.height = range.height();\n                }\n                if (!isFinite(top)) {\n                    top = 0;\n                }\n                if (!isFinite(left)) {\n                    left = 0;\n                }\n                cells.forEach(function(cell){\n                    m.set(cell.row - top,\n                          cell.col - left,\n                          cell.value);\n                });\n                return m;\n            }\n            if (Array.isArray(range) && range.length > 0) {\n                var m = new Matrix(self), row = 0;\n                range.forEach(function(line){\n                    var col = 0;\n                    var h = 1;\n                    line.forEach(function(el){\n                        var isRange = el instanceof RangeRef;\n                        if (el instanceof Ref && !isRange) {\n                            el = self.getRefData(el);\n                        }\n                        if (isRange || Array.isArray(el)) {\n                            el = self.asMatrix(el);\n                        }\n                        if (el instanceof Matrix) {\n                            el.each(function(el, r, c){\n                                m.set(row + r, col + c, el);\n                            });\n                            h = Math.max(h, el.height);\n                            col += el.width;\n                        } else {\n                            if(typeof el === \"string\" && el.length && !isNaN(el)) {\n                                el = Number(el);\n                            }\n\n                            m.set(row, col++, el);\n                        }\n                    });\n                    row += h;\n                });\n                return m;\n            }\n        },\n\n        getRefCells: function(refs, hiddenInfo, wantNulls) {\n            var f = this.formula;\n            return this.ss.getRefCells(refs, hiddenInfo, f.sheet, f.row, f.col, wantNulls);\n        },\n\n        getRefData: function(ref, wantNulls) {\n            var f = this.formula;\n            return this.ss.getData(ref, f.sheet, f.row, f.col, wantNulls);\n        },\n\n        workbook: function() {\n            return this.ss.workbook;\n        }\n    });\n\n    var Matrix = Class.extend({\n        init: function Matrix(context) {\n            this.context = context;\n            this.height = 0;\n            this.width = 0;\n            this.data = [];\n        },\n        clone: function() {\n            var m = new Matrix(this.context);\n            m.height = this.height;\n            m.width = this.width;\n            m.data = this.data.map(function(row){ return row.slice(); });\n            return m;\n        },\n        get: function(row, col) {\n            var line = this.data[row];\n            var val = line ? line[col] : null;\n            return val instanceof Ref ? this.context.getRefData(val) : val;\n        },\n        getNA: function(row, col) {\n            if (row < this.height && col < this.width) {\n                return this.get(row, col);\n            }\n            return new CalcError(\"N/A\");\n        },\n        set: function(row, col, data) {\n            var line = this.data[row];\n            if (line == null) {\n                line = this.data[row] = [];\n            }\n            line[col] = data;\n            if (row >= this.height) {\n                this.height = row + 1;\n            }\n            if (col >= this.width) {\n                this.width = col + 1;\n            }\n        },\n        each: function(f, includeEmpty) {\n            for (var row = 0; row < this.height; ++row) {\n                for (var col = 0; col < this.width; ++col) {\n                    var val = this.get(row, col);\n                    if (includeEmpty || val != null) {\n                        val = f.call(this.context, val, row, col);\n                        if (val !== undefined) {\n                            return val;\n                        }\n                    }\n                }\n            }\n        },\n        map: function(f, includeEmpty) {\n            var m = new Matrix(this.context);\n            this.each(function(el, row, col){\n                // here `this` is actually the context\n                m.set(row, col, f.call(this, el, row, col));\n            }, includeEmpty);\n            return m;\n        },\n        eachRow: function(f) {\n            for (var row = 0; row < this.height; ++row) {\n                var val = f.call(this.context, row);\n                if (val !== undefined) {\n                    return val;\n                }\n            }\n        },\n        eachCol: function(f) {\n            for (var col = 0; col < this.width; ++col) {\n                var val = f.call(this.context, col);\n                if (val !== undefined) {\n                    return val;\n                }\n            }\n        },\n        mapRow: function(f) {\n            var m = new Matrix(this.context);\n            this.eachRow(function(row){\n                m.set(row, 0, f.call(this.context, row));\n            });\n            return m;\n        },\n        mapCol: function(f) {\n            var m = new Matrix(this.context);\n            this.eachCol(function(col){\n                m.set(0, col, f.call(this.context, col));\n            });\n            return m;\n        },\n        toString: function() {\n            return JSON.stringify(this.data);\n        },\n        transpose: function() {\n            var m = new Matrix(this.context);\n            this.each(function(el, row, col){\n                m.set(col, row, el);\n            });\n            return m;\n        },\n        unit: function(n) {\n            this.width = this.height = n;\n            var a = this.data = new Array(n);\n            for (var i = n; --i >= 0;) {\n                var row = a[i] = new Array(n);\n                for (var j = n; --j >= 0;) {\n                    row[j] = i == j ? 1 : 0;\n                }\n            }\n            return this;\n        },\n        multiply: function(b) {\n            var a = this, m = new Matrix(a.context);\n            for (var row = 0; row < a.height; ++row) {\n                for (var col = 0; col < b.width; ++col) {\n                    var s = 0;\n                    for (var i = 0; i < a.width; ++i) {\n                        var va = a.get(row, i);\n                        var vb = b.get(i, col);\n                        if (typeof va != \"number\" || typeof vb != \"number\") {\n                            throw new CalcError(\"VALUE\");\n                        }\n                        s += va * vb;\n                    }\n                    m.set(row, col, s);\n                }\n            }\n            return m;\n        },\n        adds: function(b, s) {\n            var a = this, m = new Matrix(a.context);\n            var sign = s ? -1 : 1;\n            for (var row = 0; row < a.height; ++row) {\n                for (var col = 0; col < a.width; ++col) {\n                    var x = a.get(row, col),\n                        y = b.get(row, col);\n                    m.set(row, col, x + sign * y);\n                }\n            }\n            return m;\n        },\n        determinant: function() {\n            var a = this.clone().data;\n            var n = a.length;\n            var d = 1, C, L, i, k;\n            for (C = 0; C < n; C++) {\n                for (L = C; (L < n) && (!a[L][C]); L++) {}\n                if (L == n) {\n                    return 0;\n                }\n                if (L != C) {\n                    d = -d;\n                    for (k = C; k < n; k++) {\n                        var t = a[C][k];\n                        a[C][k] = a[L][k];\n                        a[L][k] = t;\n                    }\n                }\n                for (i = C+1; i < n; i++) {\n                    for (k = C+1; k < n; k++) {\n                        a[i][k] -= a[C][k] * a[i][C] / a[C][C];\n                    }\n                }\n                d *= a[C][C];\n            }\n            return d;\n        },\n        inverse: function() {\n            var n = this.width;\n            var m = this.augment(new Matrix(this.context).unit(n));\n            var a = m.data;\n            var tmp;\n\n            // Gaussian elimination\n            // https://en.wikipedia.org/wiki/Gaussian_elimination#Finding_the_inverse_of_a_matrix\n\n            // 1. Get zeros below main diagonal\n            for (var k = 0; k < n; ++k) {\n                var imax = argmax(k, n, function(i){ return a[i][k]; });\n                if (!a[imax][k]) {\n                    return null; // singular matrix\n                }\n                if (k != imax) {\n                    tmp = a[k];\n                    a[k] = a[imax];\n                    a[imax] = tmp;\n                }\n                for (var i = k+1; i < n; ++i) {\n                    for (var j = k+1; j < 2*n; ++j) {\n                        a[i][j] -= a[k][j] * a[i][k] / a[k][k];\n                    }\n                    a[i][k] = 0;\n                }\n            }\n\n            // 2. Get 1-s on main diagonal, dividing by pivot\n            for (var i = 0; i < n; ++i) {\n                for (var f = a[i][i], j = 0; j < 2*n; ++j) {\n                    a[i][j] /= f;\n                }\n            }\n\n            // 3. Get zeros above main diagonal.  Actually, we only care to compute the right side\n            // here (that will be the inverse), so in the inner loop below we go while j >= n,\n            // instead of j >= k.\n            for (var k = n; --k >= 0;) {\n                for (var i = k; --i >= 0;) {\n                    if (a[i][k]) {\n                        for (var j = 2*n; --j >= n;) {\n                            a[i][j] -= a[k][j] * a[i][k];\n                        }\n                    }\n                }\n            }\n\n            return m.slice(0, n, n, n);\n        },\n        augment: function(m) {\n            var ret = this.clone(), n = ret.width;\n            m.each(function(val, row, col){\n                ret.set(row, col + n, val);\n            });\n            return ret;\n        },\n        slice: function(row, col, height, width) {\n            var m = new Matrix(this.context);\n            for (var i = 0; i < height; ++i) {\n                for (var j = 0; j < width; ++j) {\n                    m.set(i, j, this.get(row + i, col + j));\n                }\n            }\n            return m;\n        }\n\n        // XXX: debug\n        // dump: function() {\n        //     this.data.forEach(function(row){\n        //         console.log(row.map(function(val){\n        //             var str = val.toFixed(3).replace(/\\.?0*$/, function(s){\n        //                 return [ \"\", \" \", \"  \", \"   \", \"    \" ][s.length];\n        //             });\n        //             if (val >= 0) { str = \" \" + str; }\n        //             return str;\n        //         }).join(\"  \"));\n        //     });\n        // }\n    });\n\n    function argmax(i, end, f) {\n        var max = f(i), pos = i;\n        while (++i < end) {\n            var v = f(i);\n            if (v > max) {\n                max = v;\n                pos = i;\n            }\n        }\n        return pos;\n    }\n\n    /* -----[ Formula ]----- */\n\n    var Formula = Class.extend({\n        init: function Formula(refs, handler, printer, sheet, row, col, arrayFormulaRange){\n            this.refs = refs;\n            this.handler = handler;\n            this.print = printer;\n            this.absrefs = null;\n            this.sheet = sheet;\n            this.row = row;\n            this.col = col;\n            this.onReady = [];\n            this.pending = false;\n            this.arrayFormulaRange = arrayFormulaRange;\n        },\n        setArrayFormulaRange: function(ref) {\n            this.arrayFormulaRange = ref.clone().setSheet(this.sheet);\n        },\n        clone: function(sheet, row, col, forceRefs) {\n            var lcsheet = sheet.toLowerCase();\n            var refs = this.refs;\n            var range = this.arrayFormulaRange;\n            if (forceRefs || lcsheet != this.sheet.toLowerCase()) {\n                refs = refs.map(function(ref){\n                    if (!ref.hasSheet() && (!ref.sheet || ref.sheet.toLowerCase() != lcsheet)) {\n                        ref = ref.clone().setSheet(sheet);\n                    }\n                    return ref;\n                });\n                if (range) {\n                    range = range.clone().setSheet(sheet);\n                }\n            }\n            return new Formula(refs, this.handler, this.print, sheet, row, col, range);\n        },\n        deepClone: function() {\n            var refs = this.refs.map(function(ref){ return ref.clone(); });\n            return new Formula(refs, this.handler, this.print, this.sheet, this.row, this.col, this.arrayFormulaRange);\n        },\n        resolve: function(val) {\n            this.pending = false;\n            this.onReady.forEach(function(callback){\n                callback(val);\n            });\n        },\n        exec: function(ss, callback, parentContext) {\n            if (\"value\" in this) {\n                if (callback) {\n                    callback(this.value);\n                }\n            } else {\n                if (callback) {\n                    this.onReady.push(callback);\n                }\n\n                var ctx = new Context(this.resolve, this, ss, parentContext);\n                var level = 0;\n                // if the call chain leads back to this same formula, we have a circular dependency.\n                while (parentContext) {\n                    if (parentContext.formula === this) {\n                        this.pending = false;\n                        ctx.resolve(new CalcError(\"CIRCULAR\"));\n                        return;\n                    }\n                    parentContext = parentContext.parent;\n                    ++level;\n                }\n\n                // pending is still useful for ASYNC formulas\n                if (this.pending) {\n                    return;\n                }\n                this.pending = true;\n\n                var next = function() {\n                    // compute and cache the absolute references\n                    if (!this.absrefs) {\n                        this.absrefs = this.refs.map(function(ref){\n                            return ref.absolute(this.row, this.col);\n                        }, this);\n                    }\n\n                    // finally invoke the handler given to us by the compiler in calc.js\n                    this.handler.call(ctx);\n                }.bind(this);\n\n                if (level < 20) {\n                    next();\n                } else {\n                    setTimeout(next, 0);\n                }\n            }\n        },\n        reset: function() {\n            this.onReady = [];\n            this.pending = false;\n            delete this.value;\n        },\n        renameSheet: function(oldSheetName, newSheetName) {\n            oldSheetName = oldSheetName.toLowerCase();\n            this.absrefs = null;\n            if (this.sheet.toLowerCase() == oldSheetName) {\n                this.sheet = newSheetName;\n            }\n            this.refs.forEach(function(ref){\n                ref.renameSheet(oldSheetName, newSheetName);\n            });\n        },\n        adjust: function(affectedSheet, operation, start, delta) {\n            affectedSheet = affectedSheet.toLowerCase();\n            var formulaRow = this.row;\n            var formulaCol = this.col;\n            var formulaSheet = this.sheet.toLowerCase();\n            var formulaMoves = false;\n            if (formulaSheet == affectedSheet) {\n                // move formula if it's after the change point\n                if (operation == \"row\" && formulaRow >= start) {\n                    this.row += delta;\n                    formulaMoves = true;\n                }\n                if (operation == \"col\" && formulaCol >= start) {\n                    this.col += delta;\n                    formulaMoves = true;\n                }\n            }\n            var newFormulaRow = this.row;\n            var newFormulaCol = this.col;\n            this.absrefs = null;\n            var prevRefs = this.refs;\n            var modified = formulaMoves;\n            this.refs = prevRefs.map(function(ref){\n                var newRef = adjust(ref);\n                if (!modified && !sameRef(newRef, ref)) {\n                    modified = true;\n                }\n                return newRef;\n            });\n\n            var prevRange = this.arrayFormulaRange;\n            if (prevRange) {\n                this.arrayFormulaRange = adjust(prevRange);\n                if (!modified && !sameRef(prevRange, this.arrayFormulaRange)) {\n                    modified = true;\n                }\n            }\n\n            if (modified) {\n                // return a clone of the original formula.  needed to undo operations like\n                // deleteRow, which can transform a reference into NULL.\n                return new Formula(prevRefs, this.handler, this.print, this.sheet, formulaRow, formulaCol, prevRange);\n            }\n\n            function adjust(ref){\n                if (ref === NULL) {\n                    return ref;\n                }\n                if (ref.sheet.toLowerCase() != affectedSheet) {\n                    if (formulaMoves) {\n                        // a reference to another sheet should still point to the same location\n                        // after adjustment; thus if row/col was removed before formula, relative\n                        // references must be adjusted by delta.\n                        if (operation == \"row\" && formulaRow >= start) {\n                            ref = ref.relative(delta, 0);\n                        }\n                        if (operation == \"col\" && formulaCol >= start) {\n                            ref = ref.relative(0, delta);\n                        }\n                    }\n                    return ref;\n                }\n                return ref.adjust(\n                    formulaRow, formulaCol,\n                    newFormulaRow, newFormulaCol,\n                    operation == \"row\",\n                    start, delta\n                );\n            }\n        },\n        toString: function() {\n            return this.print(this.row, this.col);\n        }\n    });\n\n    function sameRef(r1, r2) {\n        // note: r1.eq(r2) will not do, because it returns true for A1 and A1:A1 (CellRef\n        // vs. RangeRef).  To properly undo we need to assert that the references are exactly the\n        // same (including type).\n        if (r1.constructor !== r2.constructor) {\n            return false;\n        }\n        if (r1 instanceof CellRef) {\n            return r1.sheet == r2.sheet\n                && r1.row == r2.row\n                && r1.col == r2.col\n                && r1.rel == r2.rel;\n        }\n        if (r1 instanceof RangeRef) {\n            return sameRef(r1.topLeft     , r2.topLeft)\n                && sameRef(r1.bottomRight , r2.bottomRight)\n                && r1.endSheet == r2.endSheet;\n        }\n        if (r1 instanceof UnionRef) {\n            var i = r1.refs.length;\n            if (i != r2.refs.length) {\n                return false;\n            }\n            while (--i >= 0) {\n                if (!sameRef(r1.refs[i], r2.refs[i])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    // spreadsheet functions --------\n    var FUNCS = Object.create(null);\n\n    FUNCS[\"if\"] = function(callback, args) {\n        var self = this;\n        var co = args[0], th = args[1], el = args[2];\n        // XXX: I don't like this resolveCells here.  We should try to declare IF with\n        // defineFunction.\n        this.resolveCells([ co ], function(){\n            var comatrix = self.asMatrix(co);\n            if (comatrix) {\n                // XXX: calling both branches in this case, since we'll typically need values from\n                // both.  We could optimize and call them only when first needed, but oh well.\n                th(function(th){\n                    el(function(el){\n                        var thmatrix = self.asMatrix(th);\n                        var elmatrix = self.asMatrix(el);\n                        callback(comatrix.map(function(val, row, col){\n                            if (val instanceof CalcError) {\n                                return val;\n                            } else if (self.bool(val)) {\n                                return thmatrix ? thmatrix.get(row, col) : th;\n                            } else {\n                                return elmatrix ? elmatrix.get(row, col) : el;\n                            }\n                        }));\n                    });\n                });\n            } else {\n                co = this.force(co);\n                if (co instanceof CalcError) {\n                    callback(co);\n                } else if (self.bool(co)) {\n                    th(callback);\n                } else {\n                    el(callback);\n                }\n            }\n        });\n    };\n\n    FUNCS[\"Ï†\"] = function(callback) {\n        callback((1+Math.sqrt(5))/2);\n    };\n\n    // Lasciate ogni speranza, voi ch'entrate.\n    //\n    // XXX: document this function.\n    function compileArgumentChecks(functionName, args) {\n        var arrayArgs = \"function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; \";\n        var resolve = \"function resolve(args, callback) { var toResolve = [], i = 0; \";\n        var name, forced, main = \"'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; \", haveForced = false;\n        var canBeArrayArg = false, hasArrayArgs = false;\n        main += args.map(comp).join(\"\");\n        main += \"if (i < args.length) return new CalcError('N/A'); \";\n        main += \"return xargs; } \";\n        arrayArgs += \"return { args: xargs, width: width, height: height, arrays: arrays }; } \";\n\n        var f;\n        if (haveForced) {\n            resolve += \"this.resolveCells(toResolve, callback); } \";\n            f = new Function(\"CalcError\", \"round\", main + resolve + arrayArgs + \" return { resolve: resolve, check: check, arrayArgs: arrayArgs };\");\n        } else {\n            f = new Function(\"CalcError\", \"round\", main + \" return { check: check };\");\n        }\n        f = f(CalcError, limitPrecision);\n        if (!hasArrayArgs) {\n            delete f.arrayArgs;\n        }\n        return f;\n\n        function comp(x) {\n            name = x[0];\n            var code = \"{ \";\n            if (Array.isArray(name)) {\n                arrayArgs += \"while (i < args.length) { \";\n                resolve += \"while (i < args.length) { \";\n                code += \"xargs.push(tmp = []); stack.push(xargs); xargs = tmp; \";\n                code += \"while (i < args.length) { \";\n                code += x.map(comp).join(\"\");\n                code += \"} \";\n                code += \"xargs = stack.pop(); \";\n                resolve += \"} \";\n                arrayArgs += \"} \";\n            } else if (name == \"+\") {\n                arrayArgs += \"while (i < args.length) { \";\n                resolve += \"while (i < args.length) { \";\n                code += \"if (i >= args.length) return new CalcError('N/A'); \";\n                code += \"xargs.push(tmp = []); stack.push(xargs); xargs = tmp; \";\n                code += \"do { \";\n                code += x.slice(1).map(comp).join(\"\");\n                code += \"} while (i < args.length); \";\n                code += \"xargs = stack.pop(); \";\n                resolve += \"} \";\n                arrayArgs += \"} \";\n            } else if (name == \"?\") {\n                // standalone assertion without a new argument\n                code += \"if (!(\" + cond(x[1]) + \")) return new CalcError(err); \";\n            } else {\n                var type = x[1];\n                if (Array.isArray(type) && /^#?collect/.test(type[0])) {\n                    var wantNulls = /!$/.test(type[0]);\n                    var n = type[2];\n                    force();\n                    code += \"try {\"\n                        + \"var $\" + name + \" = this.cellValues(args.slice(i\";\n                    if (n) {\n                        code += \", i + \" + n;\n                    }\n                    code += \")\" + (wantNulls ? \",true\" : \"\") + \").reduce(function(ret, $\"+name+\"){ \";\n                    if (type[0].charAt(0) != \"#\") {\n                        code += \"if ($\"+name+\" instanceof CalcError) throw $\"+name+\"; \";\n                    }\n                    code += \"if (\" + cond(type[1]) + \") ret.push($\"+name+\"); \";\n                    code += \"return ret; \";\n                    code += \"}.bind(this), []); \";\n                    if (n) {\n                        code += \"i += \" + n + \"; \";\n                    } else {\n                        code += \"i = args.length; \";\n                    }\n                    code += \"xargs.push($\"+name+\")\"\n                        + \"} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } \";\n                    resolve += \"toResolve.push(args.slice(i)); \";\n                } else if (type == \"rest\") {\n                    code += \"xargs.push(args.slice(i)); i = args.length; \";\n                } else {\n                    if ((canBeArrayArg = /^\\*/.test(name))) {\n                        hasArrayArgs = true;\n                        name = name.substr(1);\n                    }\n                    code += \"var $\" + name + \" = args[i++]; \";\n                    var allowError = false;\n                    if (/!$/.test(type)) {\n                        type = type.substr(0, type.length - 1);\n                        allowError = true;\n                    } else {\n                        code += \"if ($\"+name+\" instanceof CalcError) return $\"+name+\"; \";\n                    }\n                    code += typeCheck(type, allowError) + \"xargs.push($\"+name+\"); \";\n                }\n            }\n            code += \"} \";\n            return code;\n        }\n\n        function force() {\n            if (forced) {\n                return \"$\"+name+\"\";\n            }\n            haveForced = true;\n            forced = true;\n            resolve += \"toResolve.push(args[i++]); \";\n            return \"($\"+name+\" = this.force($\"+name+\"))\";\n        }\n\n        function forceNum(round) {\n            return \"(\"\n                +     (round\n                       ? (\"(typeof \" + force() + \" == 'number' ? ($\"+name+\" = round($\"+name+\"), true) : false) || \")\n                       : (\"(typeof \" + force() + \" == 'number') || \"))\n                +     \"(typeof $\"+name+\" == 'boolean' ? ($\"+name+\" = +$\" + name + \", true) : false) || \"\n                +     \"(typeof $\"+name+\" == 'string' && !/^(?:=|true|false)/i.test($\"+name+\") ? (\"\n                +       \"tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $\"+name+\"), \"\n                +       \"/^date|number|percent$/.test(tmp.type) ? ($\"+name+\" = +tmp.value, true) : false\"\n                +     \") : false)\"\n                +  \")\";\n        }\n\n        function typeCheck(type, allowError) {\n            forced = false;\n            var ret = \"if (!(\" + cond(type) + \")) { \";\n            if (forced && !allowError) {\n                ret += \" if ($\" + name + \" instanceof CalcError) return $\" + name + \"; \";\n            }\n            ret += \"return new CalcError(err); } \";\n            if (!forced) {\n                resolve += \"i++; \";\n            }\n            if (canBeArrayArg) {\n                arrayArgs += \"var $\" + name + \" = this._arrayArg(args[i]); \"\n                    + \"if ($\" + name + \") { \"\n                    + \"xargs.push($\" + name + \"); \"\n                    + \"width = Math.max(width, $\" + name + \".width); \"\n                    + \"height = Math.max(height, $\" + name + \".height); \"\n                    + \"arrays.push(true) } else { \"\n                    + \"xargs.push(args[i]); \"\n                    + \"arrays.push(false); } i++; \";\n            } else {\n                arrayArgs += \"xargs.push(args[i++]); arrays.push(false); \";\n            }\n            return ret;\n        }\n\n        function cond(type) {\n            if (Array.isArray(type)) {\n                if (type[0] == \"or\") {\n                    return \"(\" + type.slice(1).map(cond).join(\") || (\") + \")\";\n                }\n                if (type[0] == \"and\") {\n                    return \"(\" + type.slice(1).map(cond).join(\") && (\") + \")\";\n                }\n                if (type[0] == \"values\") {\n                    return \"(\" + type.slice(1).map(function(val){\n                        return force() + \" === \" + val;\n                    }).join(\") || (\") + \")\";\n                }\n                if (type[0] == \"null\") {\n                    return \"(\" + cond(\"null\") + \" ? (($\"+name+\" = \" + type[1] + \"), true) : false)\";\n                }\n                if (type[0] == \"between\" || type[0] == \"[between]\") {\n                    return \"(\" + force() + \" >= \" + type[1] + \" && \" + \"$\"+name+\" <= \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n                }\n                if (type[0] == \"(between)\") {\n                    return \"(\" + force() + \" > \" + type[1] + \" && \" + \"$\"+name+\" < \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n                }\n                if (type[0] == \"(between]\") {\n                    return \"(\" + force() + \" > \" + type[1] + \" && \" + \"$\"+name+\" <= \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n                }\n                if (type[0] == \"[between)\") {\n                    return \"(\" + force() + \" >= \" + type[1] + \" && \" + \"$\"+name+\" < \" + type[2] + \" ? true : ((err = 'NUM'), false))\";\n                }\n                if (type[0] == \"assert\") {\n                    var err = type[2] || \"N/A\";\n                    return \"((\" + type[1] + \") ? true : (err = \" + JSON.stringify(err) + \", false))\";\n                }\n                if (type[0] == \"not\") {\n                    return \"!(\" + cond(type[1]) + \")\";\n                }\n                throw new Error(\"Unknown array type condition: \" + type[0]);\n            }\n            if (type == \"number\" || type == \"datetime\") {\n                return forceNum(true);\n            }\n            if (type == \"number!\") {\n                return \"(typeof \" + force() + \" == 'number' ? ($\"+name+\" = round($\"+name+\"), true) : false)\";\n            }\n            if (type == \"integer\" || type == \"date\") {\n                return \"(\" + forceNum() + \" && (($\"+name+\" |= 0), true))\";\n            }\n            if (type == \"divisor\") {\n                return \"(\" + forceNum(true) + \" && ($\"+name+\" == 0 ? ((err = 'DIV/0'), false) : true))\";\n            }\n            if (type == \"number+\") {\n                return \"(\" + forceNum(true) + \" && ($\"+name+\" >= 0 ? true : ((err = 'NUM'), false)))\";\n            }\n            if (type == \"integer+\") {\n                return \"(\" + forceNum() + \" && (($\"+name+\" |= 0) >= 0 ? true : ((err = 'NUM'), false)))\";\n            }\n            if (type == \"number++\") {\n                return \"(\" + forceNum(true) + \" && ($\"+name+\" > 0 ? true : ((err = 'NUM'), false)))\";\n            }\n            if (type == \"integer++\") {\n                return \"(\" + forceNum() + \" && (($\"+name+\" |= 0) > 0 ? true : ((err = 'NUM'), false)))\";\n            }\n            if (type == \"string\") {\n                return \"((typeof \" + force() + \" == 'string' || typeof $\"+name+\" == 'boolean' || typeof $\"+name+\" == 'number') ? ($\"+name+\" += '', true) : ($\"+name+\" === undefined ? (($\"+name+\" = ''), true) : false))\";\n            }\n            if (type == \"boolean\") {\n                return \"(typeof \" + force() + \" == 'boolean')\";\n            }\n            if (type == \"logical\") {\n                return \"(typeof \" + force() + \" == 'boolean' || (typeof $\"+name+\" == 'number' ? ($\"+name+\" = !!$\"+name+\", true) : false))\";\n            }\n            if (type == \"matrix\") {\n                force();\n                return \"((m = this.asMatrix($\"+name+\")) ? ($\"+name+\" = m) : false)\";\n            }\n            if (type == \"#matrix\") {\n                return \"((m = this.asMatrix($\"+name+\")) ? ($\"+name+\" = m) : false)\";\n            }\n            if (type == \"ref\") {\n                return \"($\"+name+\" instanceof kendo.spreadsheet.Ref)\";\n            }\n            if (type == \"area\") {\n                return \"($\"+name+\" instanceof kendo.spreadsheet.CellRef || $\"+name+\" instanceof kendo.spreadsheet.RangeRef)\";\n            }\n            if (type == \"cell\") {\n                return \"($\"+name+\" instanceof kendo.spreadsheet.CellRef)\";\n            }\n            if (type == \"null\") {\n                return \"(\" + force() + \" == null)\";\n            }\n            if (type == \"anyvalue\") {\n                return \"(\" + force() + \" != null && i <= args.length)\";\n            }\n            if (type == \"forced\") {\n                return \"(\" + force() + \", i <= args.length)\";\n            }\n            if (type == \"anything\") {\n                return \"(i <= args.length)\";\n            }\n            if (type == \"blank\") {\n                return \"(\" + force() + \" == null || $\"+name+\" === '')\";\n            }\n            throw new Error(\"Can't check for type: \" + type);\n        }\n    }\n\n    function limitPrecision(num) {\n        return num === parseInt(num, 10) ? num : +num.toPrecision(14);\n    }\n\n    function maybeRoundFloatErrors(num) {\n        if (typeof num == \"number\") {\n            return limitPrecision(num);\n        } else {\n            return num;\n        }\n    }\n\n    function withErrorHandling(obj, f, args) {\n        if (args instanceof CalcError) {\n            return args;\n        }\n        try {\n            return f.apply(obj, args);\n        } catch(ex) {\n            if (ex instanceof CalcError) {\n                return ex;\n            } else {\n                throw ex;\n            }\n        }\n    }\n\n    function makeSyncFunction(handler, resolve, check, arrayArgs) {\n        return function(callback, args) {\n            function doit() {\n                if (arrayArgs) {\n                    var x = arrayArgs.call(this, args);\n                    args = x.args;\n                    if (x.width > 0 && x.height > 0) {\n                        var result = new Matrix(this);\n                        for (var row = 0; row < x.height; ++row) {\n                            for (var col = 0; col < x.width; ++col) {\n                                var xargs = [];\n                                for (var i = 0; i < args.length; ++i) {\n                                    if (x.arrays[i]) {\n                                        xargs[i] = args[i].getNA(row, col);\n                                    } else {\n                                        xargs[i] = args[i];\n                                    }\n                                }\n                                xargs = check.call(this, xargs);\n                                result.set(row, col, withErrorHandling(this, handler, xargs));\n                            }\n                        }\n                        return callback(result);\n                    }\n                }\n                var xargs = check.call(this, args);\n                callback(withErrorHandling(this, handler, xargs));\n            }\n            if (resolve) {\n                resolve.call(this, args, doit);\n            } else {\n                doit.call(this);\n            }\n        };\n    }\n\n    function makeAsyncFunction(handler, resolve, check, arrayArgs) {\n        return function(callback, args) {\n            function doit() {\n                if (arrayArgs) {\n                    var x = arrayArgs.call(this, args);\n                    args = x.args;\n                    if (x.width > 0 && x.height > 0) {\n                        var result = new Matrix(this);\n                        var count = x.width * x.height;\n                        var makeCallback = function(row, col) {\n                            return function(value) {\n                                result.set(row, col, value);\n                                --count;\n                                if (count === 0) {\n                                    return callback(result);\n                                }\n                            };\n                        };\n                        for (var row = 0; row < x.height && count > 0; ++row) {\n                            for (var col = 0; col < x.width && count > 0; ++col) {\n                                var xargs = [];\n                                for (var i = 0; i < args.length; ++i) {\n                                    if (x.arrays[i]) {\n                                        xargs[i] = args[i].getNA(row, col);\n                                    } else {\n                                        xargs[i] = args[i];\n                                    }\n                                }\n                                xargs = check.call(this, xargs);\n                                if (xargs instanceof CalcError) {\n                                    result.set(row, col, xargs);\n                                    --count;\n                                    if (count === 0) {\n                                        return callback(result);\n                                    }\n                                } else {\n                                    xargs.unshift(makeCallback(row, col));\n                                    handler.apply(this, xargs);\n                                }\n                            }\n                        }\n                        return;\n                    }\n                }\n                var x = check.call(this, args);\n                if (x instanceof CalcError) {\n                    callback(x);\n                } else {\n                    x.unshift(callback);\n                    handler.apply(this, x);\n                }\n            }\n            if (resolve) {\n                resolve.call(this, args, doit);\n            } else {\n                doit.call(this);\n            }\n        };\n    }\n\n    function defineFunction(name, func) {\n        name = name.toLowerCase();\n        FUNCS[name] = func;\n        return {\n            args: function(args, log) {\n                var code = compileArgumentChecks(name, args);\n                // XXX: DEBUG\n                if (log) {\n                    if (code.arrayArgs) {console.log(code.arrayArgs.toString());}\n                    if (code.resolve) {console.log(code.resolve.toString());}\n                    if (code.check) {console.log(code.check.toString());}\n                }\n                var f = FUNCS[name] = makeSyncFunction(func, code.resolve, code.check, code.arrayArgs);\n                f.kendoSpreadsheetArgs = args;\n                return this;\n            },\n            argsAsync: function(args, log) {\n                var code = compileArgumentChecks(name, args);\n                // XXX: DEBUG\n                if (log) {\n                    if (code.arrayArgs) {console.log(code.arrayArgs.toString());}\n                    if (code.resolve) {console.log(code.resolve.toString());}\n                    if (code.check) {console.log(code.check.toString());}\n                }\n                var f = FUNCS[name] = makeAsyncFunction(func, code.resolve, code.check, code.arrayArgs);\n                f.kendoSpreadsheetArgs = args;\n                return this;\n            }\n        };\n    }\n\n    /* -----[ date calculations ]----- */\n\n    // Julian days algorithms from http://www.hermetic.ch/cal_stud/jdn.htm#comp\n\n    function dateToJulianDays(y, m, d) {\n        m++;\n        return ((1461 * (y + 4800 + ((m - 14) / 12 | 0))) / 4 | 0) +\n            ((367 * (m - 2 - 12 * ((m - 14) / 12 | 0))) / 12 | 0) -\n            ((3 * (((y + 4900 + ((m - 14) / 12 | 0)) / 100 | 0))) / 4 | 0) +\n            d - 32075;\n    }\n\n    function julianDaysToDate(jd) {\n        var l, n, j, i, m, d, y;\n        l = jd + 68569;\n        n = (4 * l) / 146097 | 0;\n        l = l - ((146097 * n + 3) / 4 | 0);\n        i = (4000 * (l + 1) / 1461001) | 0;\n        l = l - ((1461 * i) / 4 | 0) + 31;\n        j = (80 * l) / 2447 | 0;\n        d = l - ((2447 * j) / 80 | 0);\n        l = j / 11 | 0;\n        m = j + 2 - (12 * l);\n        y = 100 * (n - 49) + i + l;\n        m--;\n        return {\n            year  : y,\n            month : m,\n            date  : d,\n            day   : (jd + 1) % 7,\n            ord   : ORDINAL_ADD_DAYS[isLeapYear(y)][m] + d\n        };\n    }\n\n    // This uses the Google Spreadsheet approach: treat 1899-12-31 as day 1, allowing to avoid\n    // implementing the \"Leap Year Bug\" yet still be Excel compatible for dates starting 1900-03-01.\n    var BASE_DATE = dateToJulianDays(1900, 0, -1);\n\n    var DAYS_IN_MONTH = [ 31, 28, 31,\n                          30, 31, 30,\n                          31, 31, 30,\n                          31, 30, 31 ];\n\n    var ORDINAL_ADD_DAYS = [\n        [ 0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334 ], // non-leap year\n        [ 0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335 ]  // leap year\n    ];\n\n    function isLeapYear(yr) {\n        if (yr % 4) {\n            return 0;\n        }\n        if (yr % 100) {\n            return 1;\n        }\n        if (yr % 400) {\n            return 0;\n        }\n        return 1;\n    }\n\n    function daysInYear(yr) {\n        return isLeapYear(yr) ? 366 : 365;\n    }\n\n    function daysInMonth(yr, mo) {\n        return (isLeapYear(yr) && mo == 1) ? 29 : DAYS_IN_MONTH[mo];\n    }\n\n    function validDate(yr, mo, da) {\n        return mo >= 1 && mo <= 12 && da >= 1 && da <= daysInMonth(yr, mo - 1);\n    }\n\n    function unpackDate(serial) {\n        return julianDaysToDate((serial | 0) + BASE_DATE);\n    }\n\n    function packDate(year, month, date) {\n        return dateToJulianDays(year, month, date) - BASE_DATE;\n    }\n\n    var MS_IN_MIN = 60 * 1000;\n    var MS_IN_HOUR = 60 * MS_IN_MIN;\n    var MS_IN_DAY = 24 * MS_IN_HOUR;\n\n    function unpackTime(serial) {\n        var frac = serial - (serial|0);\n        if (frac < 0) {\n            frac++;\n        }\n        var ms = Math.round(MS_IN_DAY * frac);\n        var hours = Math.floor(ms / MS_IN_HOUR);\n        ms -= hours * MS_IN_HOUR;\n        var minutes = Math.floor(ms / MS_IN_MIN);\n        ms -= minutes * MS_IN_MIN;\n        var seconds = Math.floor(ms / 1000);\n        ms -= seconds * 1000;\n        return {\n            hours: hours,\n            minutes: minutes,\n            seconds: seconds,\n            milliseconds: ms\n        };\n    }\n\n    function serialToDate(serial) {\n        var d = unpackDate(serial), t = unpackTime(serial);\n        return new Date(d.year, d.month, d.date,\n                        t.hours, t.minutes, t.seconds, t.milliseconds);\n    }\n\n    function packTime(hh, mm, ss, ms) {\n        return (hh+(mm+(ss+ms/1000)/60)/60)/24;\n    }\n\n    function dateToSerial(date) {\n        var time = packTime(date.getHours(),\n                            date.getMinutes(),\n                            date.getSeconds(),\n                            date.getMilliseconds());\n        date = packDate(date.getFullYear(),\n                        date.getMonth(),\n                        date.getDate());\n        if (date < 0) {\n            return date - 1 + time;\n        } else {\n            return date + time;\n        }\n    }\n\n    function parseDate(str, format) {\n        if (format) {\n            format = kendo.spreadsheet.formatting.makeDateFormat(format);\n        }\n        return kendo.parseExactDate(str, format)\n            || kendo.parseExactDate(str)\n            || kendo.parseExactDate(str, [\n                \"MMMM dd yyyy\",\n                \"MMMM dd yy\",\n                \"MMM dd yyyy\",\n                \"MMM dd yy\",\n                \"dd MMMM yyyy\",\n                \"dd MMMM yy\",\n                \"dd MMM yyyy\",\n                \"dd MMM yy\",\n                \"MMMM dd, yyyy\",\n                \"MMMM dd, yy\",\n                \"MMM dd, yyyy\",\n                \"MMM dd, yy\",\n                \"MMMM dd\",\n                \"MMM dd\",\n                \"MMMM yyyy\",\n                \"MMM yyyy\",\n                \"dd MMMM\",\n                \"dd MMM\"\n            ]);\n    }\n\n    /* -----[ exports ]----- */\n\n    exports.CalcError = CalcError;\n    exports.Formula = Formula;\n    exports.Matrix = Matrix;\n\n    exports.packDate = packDate;\n    exports.unpackDate = unpackDate;\n    exports.packTime = packTime;\n    exports.unpackTime = unpackTime;\n    exports.serialToDate = serialToDate;\n    exports.dateToSerial = dateToSerial;\n    exports.daysInMonth = daysInMonth;\n    exports.validDate = validDate;\n    exports.isLeapYear = isLeapYear;\n    exports.daysInYear = daysInYear;\n    exports.parseDate = parseDate;\n    exports.limitPrecision = limitPrecision;\n\n    spreadsheet.dateToNumber = dateToSerial;\n    spreadsheet.numberToDate = serialToDate;\n    spreadsheet.defineFunction = defineFunction;\n    spreadsheet.CalcError = CalcError;\n\n    exports.defineFunction = defineFunction;\n    exports.defineAlias = function(alias, name) {\n        var orig = FUNCS[name];\n        if (!orig) {\n            throw new Error(\"Function \" + name + \" is not yet defined\");\n        }\n        if (!orig.kendoSpreadsheetAliases) {\n            orig.kendoSpreadsheetAliases = [ name ];\n        }\n        orig.kendoSpreadsheetAliases.push(alias);\n        FUNCS[alias] = orig;\n    };\n    exports.FUNCS = FUNCS;\n\n    /* -----[ Excel operators ]----- */\n\n    var NUMBER_OR_ZERO = [ \"or\", \"number\", [ \"null\", 0 ] ];\n\n    var ARGS_NUMERIC = [\n        [ \"*a\", NUMBER_OR_ZERO ],\n        [ \"*b\", NUMBER_OR_ZERO ]\n    ];\n\n    var ARGS_ANYVALUE = [\n        [ \"*a\", \"forced\" ],\n        [ \"*b\", \"forced\" ]\n    ];\n\n    defineFunction(\"binary+\", function(a, b){\n        return a + b;\n    }).args(ARGS_NUMERIC);\n\n    defineFunction(\"binary-\", function(a, b){\n        return a - b;\n    }).args(ARGS_NUMERIC);\n\n    defineFunction(\"binary*\", function(a, b){\n        return a * b;\n    }).args(ARGS_NUMERIC);\n\n    defineFunction(\"binary/\", function(a, b){\n        return a / b;\n    }).args([\n        [ \"*a\", NUMBER_OR_ZERO ],\n        [ \"*b\", \"divisor\" ]\n    ]);\n\n    defineFunction(\"binary^\", function(a, b){\n        return Math.pow(a, b);\n    }).args(ARGS_NUMERIC);\n\n    defineFunction(\"binary&\", function(a, b){\n        if (a == null) { a = \"\"; }\n        if (b == null) { b = \"\"; }\n        return \"\" + a + b;\n    }).args([\n        [ \"*a\", [ \"or\", \"number\", \"string\", \"boolean\", \"null\" ] ],\n        [ \"*b\", [ \"or\", \"number\", \"string\", \"boolean\", \"null\" ] ]\n    ]);\n\n    function equals(a, b){\n        a = typeof(a) === \"string\" ? a.toLowerCase() : a;\n        b = typeof(b) === \"string\" ? b.toLowerCase() : b;\n\n        // special cases\n        if (a === false && b == null) { return true; }\n        if (b === false && a == null) { return true; }\n        if (a === 0     && b == null) { return true; }\n        if (b === 0     && a == null) { return true; }\n        if (a === \"\"    && b == null) { return true; }\n        if (b === \"\"    && a == null) { return true; }\n\n        return a === b;\n    }\n\n    defineFunction(\"binary=\", equals).args(ARGS_ANYVALUE);\n\n    defineFunction(\"binary<>\", function(a, b){\n        return !equals(a, b);\n    }).args(ARGS_ANYVALUE);\n\n    defineFunction(\"binary<\", binaryCompare(function(a, b){\n        return a < b;\n    })).args(ARGS_ANYVALUE);\n\n    defineFunction(\"binary<=\", binaryCompare(function(a, b){\n        return a <= b;\n    })).args(ARGS_ANYVALUE);\n\n    defineFunction(\"binary>\", binaryCompare(function(a, b){\n        return a > b;\n    })).args(ARGS_ANYVALUE);\n\n    defineFunction(\"binary>=\", binaryCompare(function(a, b){\n        return a >= b;\n    })).args(ARGS_ANYVALUE);\n\n    defineFunction(\"unary+\", function(a){\n        return a;\n    }).args([\n        [ \"*a\", NUMBER_OR_ZERO ]\n    ]);\n\n    defineFunction(\"unary-\", function(a){\n        return -a;\n    }).args([\n        [ \"*a\", NUMBER_OR_ZERO ]\n    ]);\n\n    defineFunction(\"unary%\", function(a){\n        return a / 100;\n    }).args([\n        [ \"*a\", NUMBER_OR_ZERO ]\n    ]);\n\n    // range operator\n    defineFunction(\"binary:\", function(a, b){\n        return new RangeRef(a, b)\n            .setSheet(a.sheet || this.formula.sheet, a.hasSheet());\n    }).args([\n        [ \"a\", \"cell\" ],\n        [ \"b\", \"cell\" ]\n    ]);\n\n    // union operator\n    defineFunction(\"binary,\", function(a, b){\n        return new UnionRef([ a, b ]);\n    }).args([\n        [ \"a\", \"ref\" ],\n        [ \"b\", \"ref\" ]\n    ]);\n\n    // intersection operator\n    defineFunction(\"binary \", function(a, b){\n        return a.intersect(b);\n    }).args([\n        [ \"a\", \"ref\" ],\n        [ \"b\", \"ref\" ]\n    ]);\n\n    /* -----[ conditionals ]----- */\n\n    defineFunction(\"not\", function(a){\n        return !this.bool(a);\n    }).args([\n        [ \"*a\", [ \"or\", \"anyvalue\", [ \"null\", 0 ] ] ]\n    ]);\n\n    /* -----[ the IS* functions ]----- */\n\n    defineFunction(\"isblank\", function(val){\n        if (val instanceof CellRef) {\n            val = this.getRefData(val);\n            return val == null;\n        }\n        return false;\n    }).args([\n        [ \"*value\", \"anything!\" ]\n    ]);\n\n    defineFunction(\"iserror\", function(val){\n        return val instanceof CalcError;\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"iserr\", function(val){\n        return val instanceof CalcError && val.code != \"N/A\";\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"isna\", function(val){\n        return val instanceof CalcError && val.code == \"N/A\";\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"islogical\", function(val){\n        return typeof val == \"boolean\";\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"isnontext\", function(val){\n        return typeof val != \"string\";\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"istext\", function(val){\n        return typeof val == \"string\";\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"isnumber\", function(val){\n        return typeof val == \"number\";\n    }).args([\n        [ \"*value\", \"forced!\" ]\n    ]);\n\n    defineFunction(\"isref\", function(val){\n        // apparently should return true only for cell and range\n        return val instanceof CellRef || val instanceof RangeRef;\n    }).args([\n        [ \"*value\", \"anything!\" ]\n    ]);\n\n    /* -----[ resolve NameRef-s ]----- */\n\n    FUNCS[\",getname\"] = function(callback, args) {\n        this.fetchName(args[0], callback);\n    };\n\n    /// utils\n\n    function binaryCompare(func) {\n        return function(left, right){\n            if (typeof left == \"string\" && typeof right != \"string\") {\n                right = right == null ? \"\" : right + \"\";\n            }\n            if (typeof left != \"string\" && typeof right == \"string\") {\n                left = left == null ? \"\" : left + \"\";\n            }\n            if (typeof left == \"number\" && right == null) {\n                right = 0;\n            }\n            if (typeof right == \"number\" && left == null) {\n                left = 0;\n            }\n            if (typeof left == \"string\" && typeof right == \"string\") {\n                // string comparison is case insensitive\n                left = left.toLowerCase();\n                right = right.toLowerCase();\n            }\n            if (typeof right == typeof left) {\n                return func(left, right);\n            } else {\n                return new CalcError(\"VALUE\");\n            }\n        };\n    }\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 81200:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./references\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(14912);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}