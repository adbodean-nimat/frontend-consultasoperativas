{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    70834:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(12273), __webpack_require__(32549)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        (function ($, undefined) {\n          // Imports ================================================================\n          var kendo = window.kendo,\n              diagram = kendo.dataviz.diagram,\n              Class = kendo.Class,\n              deepExtend = kendo.deepExtend,\n              dataviz = kendo.dataviz,\n              Utils = diagram.Utils,\n              Point = dataviz.Point2D,\n              isFunction = kendo.isFunction,\n              contains = Utils.contains,\n              map = $.map; // Constants ==============================================================\n\n          var HITTESTAREA = 3,\n              EPSILON = 1e-06;\n          deepExtend(Point.fn, {\n            plus: function (p) {\n              return new Point(this.x + p.x, this.y + p.y);\n            },\n            minus: function (p) {\n              return new Point(this.x - p.x, this.y - p.y);\n            },\n            offset: function (value) {\n              return new Point(this.x - value, this.y - value);\n            },\n            times: function (s) {\n              return new Point(this.x * s, this.y * s);\n            },\n            normalize: function () {\n              if (this.length() === 0) {\n                return new Point();\n              }\n\n              return this.times(1 / this.length());\n            },\n            length: function () {\n              return Math.sqrt(this.x * this.x + this.y * this.y);\n            },\n            toString: function () {\n              return \"(\" + this.x + \",\" + this.y + \")\";\n            },\n            lengthSquared: function () {\n              return this.x * this.x + this.y * this.y;\n            },\n            middleOf: function MiddleOf(p, q) {\n              return new Point(q.x - p.x, q.y - p.y).times(0.5).plus(p);\n            },\n            toPolar: function (useDegrees) {\n              var factor = 1;\n\n              if (useDegrees) {\n                factor = 180 / Math.PI;\n              }\n\n              var a = Math.atan2(Math.abs(this.y), Math.abs(this.x));\n              var halfpi = Math.PI / 2;\n              var len = this.length();\n\n              if (this.x === 0) {\n                // note that the angle goes down and not the usual mathematical convention\n                if (this.y === 0) {\n                  return new Polar(0, 0);\n                }\n\n                if (this.y > 0) {\n                  return new Polar(len, factor * halfpi);\n                }\n\n                if (this.y < 0) {\n                  return new Polar(len, factor * 3 * halfpi);\n                }\n              } else if (this.x > 0) {\n                if (this.y === 0) {\n                  return new Polar(len, 0);\n                }\n\n                if (this.y > 0) {\n                  return new Polar(len, factor * a);\n                }\n\n                if (this.y < 0) {\n                  return new Polar(len, factor * (4 * halfpi - a));\n                }\n              } else {\n                if (this.y === 0) {\n                  return new Polar(len, 2 * halfpi);\n                }\n\n                if (this.y > 0) {\n                  return new Polar(len, factor * (2 * halfpi - a));\n                }\n\n                if (this.y < 0) {\n                  return new Polar(len, factor * (2 * halfpi + a));\n                }\n              }\n            },\n            isOnLine: function (from, to) {\n              if (from.x > to.x) {\n                // from must be the leftmost point\n                var temp = to;\n                to = from;\n                from = temp;\n              }\n\n              var r1 = new Rect(from.x, from.y).inflate(HITTESTAREA, HITTESTAREA),\n                  r2 = new Rect(to.x, to.y).inflate(HITTESTAREA, HITTESTAREA),\n                  o1,\n                  u1;\n\n              if (r1.union(r2).contains(this)) {\n                if (from.x === to.x || from.y === to.y) {\n                  return true;\n                } else if (from.y < to.y) {\n                  o1 = r1.x + (r2.x - r1.x) * (this.y - (r1.y + r1.height)) / (r2.y + r2.height - (r1.y + r1.height));\n                  u1 = r1.x + r1.width + (r2.x + r2.width - (r1.x + r1.width)) * (this.y - r1.y) / (r2.y - r1.y);\n                } else {\n                  o1 = r1.x + (r2.x - r1.x) * (this.y - r1.y) / (r2.y - r1.y);\n                  u1 = r1.x + r1.width + (r2.x + r2.width - (r1.x + r1.width)) * (this.y - (r1.y + r1.height)) / (r2.y + r2.height - (r1.y + r1.height));\n                }\n\n                return this.x > o1 && this.x < u1;\n              }\n\n              return false;\n            }\n          });\n          deepExtend(Point, {\n            parse: function (str) {\n              var tempStr = str.slice(1, str.length - 1),\n                  xy = tempStr.split(\",\"),\n                  x = parseInt(xy[0], 10),\n                  y = parseInt(xy[1], 10);\n\n              if (!isNaN(x) && !isNaN(y)) {\n                return new Point(x, y);\n              }\n            }\n          });\n          /**\n           * Structure combining a Point with two additional points representing the handles or tangents attached to the first point.\n           * If the additional points are null or equal to the first point the path will be sharp.\n           * Left and right correspond to the direction of the underlying path.\n           */\n\n          var PathDefiner = Class.extend({\n            init: function (p, left, right) {\n              this.point = p;\n              this.left = left;\n              this.right = right;\n            }\n          });\n          /**\n           * Defines a rectangular region.\n           */\n\n          var Rect = Class.extend({\n            init: function (x, y, width, height) {\n              this.x = x || 0;\n              this.y = y || 0;\n              this.width = width || 0;\n              this.height = height || 0;\n            },\n            contains: function (point) {\n              return point.x >= this.x && point.x <= this.x + this.width && point.y >= this.y && point.y <= this.y + this.height;\n            },\n            inflate: function (dx, dy) {\n              if (dy === undefined) {\n                dy = dx;\n              }\n\n              this.x -= dx;\n              this.y -= dy;\n              this.width += 2 * dx + 1;\n              this.height += 2 * dy + 1;\n              return this;\n            },\n            offset: function (dx, dy) {\n              var x = dx,\n                  y = dy;\n\n              if (dx instanceof Point) {\n                x = dx.x;\n                y = dx.y;\n              }\n\n              this.x += x;\n              this.y += y;\n              return this;\n            },\n            union: function (r) {\n              var x1 = Math.min(this.x, r.x);\n              var y1 = Math.min(this.y, r.y);\n              var x2 = Math.max(this.x + this.width, r.x + r.width);\n              var y2 = Math.max(this.y + this.height, r.y + r.height);\n              return new Rect(x1, y1, x2 - x1, y2 - y1);\n            },\n            center: function () {\n              return new Point(this.x + this.width / 2, this.y + this.height / 2);\n            },\n            top: function () {\n              return new Point(this.x + this.width / 2, this.y);\n            },\n            right: function () {\n              return new Point(this.x + this.width, this.y + this.height / 2);\n            },\n            bottom: function () {\n              return new Point(this.x + this.width / 2, this.y + this.height);\n            },\n            left: function () {\n              return new Point(this.x, this.y + this.height / 2);\n            },\n            topLeft: function () {\n              return new Point(this.x, this.y);\n            },\n            topRight: function () {\n              return new Point(this.x + this.width, this.y);\n            },\n            bottomLeft: function () {\n              return new Point(this.x, this.y + this.height);\n            },\n            bottomRight: function () {\n              return new Point(this.x + this.width, this.y + this.height);\n            },\n            clone: function () {\n              return new Rect(this.x, this.y, this.width, this.height);\n            },\n            isEmpty: function () {\n              return !this.width && !this.height;\n            },\n            equals: function (rect) {\n              return this.x === rect.x && this.y === rect.y && this.width === rect.width && this.height === rect.height;\n            },\n            rotatedBounds: function (angle) {\n              var rect = this.clone(),\n                  points = this.rotatedPoints(angle),\n                  tl = points[0],\n                  tr = points[1],\n                  br = points[2],\n                  bl = points[3];\n              rect.x = Math.min(br.x, tl.x, tr.x, bl.x);\n              rect.y = Math.min(br.y, tl.y, tr.y, bl.y);\n              rect.width = Math.max(br.x, tl.x, tr.x, bl.x) - rect.x;\n              rect.height = Math.max(br.y, tl.y, tr.y, bl.y) - rect.y;\n              return rect;\n            },\n            rotatedPoints: function (angle) {\n              var rect = this,\n                  c = rect.center(),\n                  br = rect.bottomRight().rotate(c, 360 - angle),\n                  tl = rect.topLeft().rotate(c, 360 - angle),\n                  tr = rect.topRight().rotate(c, 360 - angle),\n                  bl = rect.bottomLeft().rotate(c, 360 - angle);\n              return [tl, tr, br, bl];\n            },\n            toString: function (delimiter) {\n              delimiter = delimiter || \" \";\n              return this.x + delimiter + this.y + delimiter + this.width + delimiter + this.height;\n            },\n            scale: function (scaleX, scaleY, staicPoint, adornerCenter, angle) {\n              var tl = this.topLeft();\n              var thisCenter = this.center();\n              tl.rotate(thisCenter, 360 - angle).rotate(adornerCenter, angle);\n              var delta = staicPoint.minus(tl);\n              var scaled = new Point(delta.x * scaleX, delta.y * scaleY);\n              var position = delta.minus(scaled);\n              tl = tl.plus(position);\n              tl.rotate(adornerCenter, 360 - angle).rotate(thisCenter, angle);\n              this.x = tl.x;\n              this.y = tl.y;\n              this.width *= scaleX;\n              this.height *= scaleY;\n            },\n            zoom: function (zoom) {\n              this.x *= zoom;\n              this.y *= zoom;\n              this.width *= zoom;\n              this.height *= zoom;\n              return this;\n            },\n            overlaps: function (rect) {\n              var bottomRight = this.bottomRight();\n              var rectBottomRight = rect.bottomRight();\n              var overlaps = !(bottomRight.x < rect.x || bottomRight.y < rect.y || rectBottomRight.x < this.x || rectBottomRight.y < this.y);\n              return overlaps;\n            }\n          });\n          var Size = Class.extend({\n            init: function (width, height) {\n              this.width = width;\n              this.height = height;\n            }\n          });\n          Size.prototype.Empty = new Size(0, 0);\n\n          Rect.toRect = function (rect) {\n            if (!(rect instanceof Rect)) {\n              rect = new Rect(rect.x, rect.y, rect.width, rect.height);\n            }\n\n            return rect;\n          };\n\n          Rect.empty = function () {\n            return new Rect(0, 0, 0, 0);\n          };\n\n          Rect.fromPoints = function (p, q) {\n            if (isNaN(p.x) || isNaN(p.y) || isNaN(q.x) || isNaN(q.y)) {\n              throw \"Some values are NaN.\";\n            }\n\n            return new Rect(Math.min(p.x, q.x), Math.min(p.y, q.y), Math.abs(p.x - q.x), Math.abs(p.y - q.y));\n          };\n\n          function isNearZero(num) {\n            return Math.abs(num) < EPSILON;\n          }\n\n          function intersectLine(start1, end1, start2, end2, isSegment) {\n            var tangensdiff = (end1.x - start1.x) * (end2.y - start2.y) - (end1.y - start1.y) * (end2.x - start2.x);\n\n            if (isNearZero(tangensdiff)) {\n              //parallel lines\n              return;\n            }\n\n            var num1 = (start1.y - start2.y) * (end2.x - start2.x) - (start1.x - start2.x) * (end2.y - start2.y);\n            var num2 = (start1.y - start2.y) * (end1.x - start1.x) - (start1.x - start2.x) * (end1.y - start1.y);\n            var r = num1 / tangensdiff;\n            var s = num2 / tangensdiff;\n\n            if (isSegment && (r < 0 || r > 1 || s < 0 || s > 1)) {\n              //r < 0 => line 1 is below line 2\n              //r > 1 => line 1 is above line 2\n              //s < 0 => line 2 is below line 1\n              //s > 1 => line 2 is above line 1\n              return;\n            }\n\n            return new Point(start1.x + r * (end1.x - start1.x), start1.y + r * (end1.y - start1.y));\n          }\n\n          var Intersect = {\n            lines: function (start1, end1, start2, end2) {\n              return intersectLine(start1, end1, start2, end2);\n            },\n            segments: function (start1, end1, start2, end2) {\n              return intersectLine(start1, end1, start2, end2, true);\n            },\n            rectWithLine: function (rect, start, end) {\n              return Intersect.segments(start, end, rect.topLeft(), rect.topRight()) || Intersect.segments(start, end, rect.topRight(), rect.bottomRight()) || Intersect.segments(start, end, rect.bottomLeft(), rect.bottomRight()) || Intersect.segments(start, end, rect.topLeft(), rect.bottomLeft());\n            },\n            rects: function (rect1, rect2, angle) {\n              var tl = rect2.topLeft(),\n                  tr = rect2.topRight(),\n                  bl = rect2.bottomLeft(),\n                  br = rect2.bottomRight();\n              var center = rect2.center();\n\n              if (angle) {\n                tl = tl.rotate(center, angle);\n                tr = tr.rotate(center, angle);\n                bl = bl.rotate(center, angle);\n                br = br.rotate(center, angle);\n              }\n\n              var intersect = rect1.contains(tl) || rect1.contains(tr) || rect1.contains(bl) || rect1.contains(br) || Intersect.rectWithLine(rect1, tl, tr) || Intersect.rectWithLine(rect1, tl, bl) || Intersect.rectWithLine(rect1, tr, br) || Intersect.rectWithLine(rect1, bl, br);\n\n              if (!intersect) {\n                //last possible case is rect1 to be completely within rect2\n                tl = rect1.topLeft();\n                tr = rect1.topRight();\n                bl = rect1.bottomLeft();\n                br = rect1.bottomRight();\n\n                if (angle) {\n                  var reverseAngle = 360 - angle;\n                  tl = tl.rotate(center, reverseAngle);\n                  tr = tr.rotate(center, reverseAngle);\n                  bl = bl.rotate(center, reverseAngle);\n                  br = br.rotate(center, reverseAngle);\n                }\n\n                intersect = rect2.contains(tl) || rect2.contains(tr) || rect2.contains(bl) || rect2.contains(br);\n              }\n\n              return intersect;\n            }\n          };\n          /**\n           * Aligns two rectangles, where one is the container and the other is content.\n           */\n\n          var RectAlign = Class.extend({\n            init: function (container) {\n              this.container = Rect.toRect(container);\n            },\n            align: function (content, alignment) {\n              var alignValues = alignment.toLowerCase().split(\" \");\n\n              for (var i = 0; i < alignValues.length; i++) {\n                content = this._singleAlign(content, alignValues[i]);\n              }\n\n              return content;\n            },\n            _singleAlign: function (content, alignment) {\n              if (isFunction(this[alignment])) {\n                return this[alignment](content);\n              } else {\n                return content;\n              }\n            },\n            left: function (content) {\n              return this._align(content, this._left);\n            },\n            center: function (content) {\n              return this._align(content, this._center);\n            },\n            right: function (content) {\n              return this._align(content, this._right);\n            },\n            stretch: function (content) {\n              return this._align(content, this._stretch);\n            },\n            top: function (content) {\n              return this._align(content, this._top);\n            },\n            middle: function (content) {\n              return this._align(content, this._middle);\n            },\n            bottom: function (content) {\n              return this._align(content, this._bottom);\n            },\n            _left: function (container, content) {\n              content.x = container.x;\n            },\n            _center: function (container, content) {\n              content.x = (container.width - content.width) / 2 || 0;\n            },\n            _right: function (container, content) {\n              content.x = container.width - content.width;\n            },\n            _top: function (container, content) {\n              content.y = container.y;\n            },\n            _middle: function (container, content) {\n              content.y = (container.height - content.height) / 2 || 0;\n            },\n            _bottom: function (container, content) {\n              content.y = container.height - content.height;\n            },\n            _stretch: function (container, content) {\n              content.x = 0;\n              content.y = 0;\n              content.height = container.height;\n              content.width = container.width;\n            },\n            _align: function (content, alignCalc) {\n              content = Rect.toRect(content);\n              alignCalc(this.container, content);\n              return content;\n            }\n          });\n          var Polar = Class.extend({\n            init: function (r, a) {\n              this.r = r;\n              this.angle = a;\n            }\n          });\n          /**\n           * SVG transformation matrix.\n           */\n\n          var Matrix = Class.extend({\n            init: function (a, b, c, d, e, f) {\n              this.a = a || 0;\n              this.b = b || 0;\n              this.c = c || 0;\n              this.d = d || 0;\n              this.e = e || 0;\n              this.f = f || 0;\n            },\n            plus: function (m) {\n              this.a += m.a;\n              this.b += m.b;\n              this.c += m.c;\n              this.d += m.d;\n              this.e += m.e;\n              this.f += m.f;\n            },\n            minus: function (m) {\n              this.a -= m.a;\n              this.b -= m.b;\n              this.c -= m.c;\n              this.d -= m.d;\n              this.e -= m.e;\n              this.f -= m.f;\n            },\n            times: function (m) {\n              return new Matrix(this.a * m.a + this.c * m.b, this.b * m.a + this.d * m.b, this.a * m.c + this.c * m.d, this.b * m.c + this.d * m.d, this.a * m.e + this.c * m.f + this.e, this.b * m.e + this.d * m.f + this.f);\n            },\n            apply: function (p) {\n              return new Point(this.a * p.x + this.c * p.y + this.e, this.b * p.x + this.d * p.y + this.f);\n            },\n            applyRect: function (r) {\n              return Rect.fromPoints(this.apply(r.topLeft()), this.apply(r.bottomRight()));\n            },\n            toString: function () {\n              return \"matrix(\" + this.a + \" \" + this.b + \" \" + this.c + \" \" + this.d + \" \" + this.e + \" \" + this.f + \")\";\n            }\n          });\n          deepExtend(Matrix, {\n            fromSVGMatrix: function (vm) {\n              var m = new Matrix();\n              m.a = vm.a;\n              m.b = vm.b;\n              m.c = vm.c;\n              m.d = vm.d;\n              m.e = vm.e;\n              m.f = vm.f;\n              return m;\n            },\n            fromMatrixVector: function (v) {\n              var m = new Matrix();\n              m.a = v.a;\n              m.b = v.b;\n              m.c = v.c;\n              m.d = v.d;\n              m.e = v.e;\n              m.f = v.f;\n              return m;\n            },\n            fromList: function (v) {\n              if (v.length !== 6) {\n                throw \"The given list should consist of six elements.\";\n              }\n\n              var m = new Matrix();\n              m.a = v[0];\n              m.b = v[1];\n              m.c = v[2];\n              m.d = v[3];\n              m.e = v[4];\n              m.f = v[5];\n              return m;\n            },\n            translation: function (x, y) {\n              var m = new Matrix();\n              m.a = 1;\n              m.b = 0;\n              m.c = 0;\n              m.d = 1;\n              m.e = x;\n              m.f = y;\n              return m;\n            },\n            unit: function () {\n              return new Matrix(1, 0, 0, 1, 0, 0);\n            },\n            rotation: function (angle, x, y) {\n              var m = new Matrix();\n              m.a = Math.cos(angle * Math.PI / 180);\n              m.b = Math.sin(angle * Math.PI / 180);\n              m.c = -m.b;\n              m.d = m.a;\n              m.e = x - x * m.a + y * m.b || 0;\n              m.f = y - y * m.a - x * m.b || 0;\n              return m;\n            },\n            scaling: function (scaleX, scaleY) {\n              var m = new Matrix();\n              m.a = scaleX;\n              m.b = 0;\n              m.c = 0;\n              m.d = scaleY;\n              m.e = 0;\n              m.f = 0;\n              return m;\n            },\n            parse: function (v) {\n              var parts, nums;\n\n              if (v) {\n                v = v.trim(); // of the form \"matrix(...)\"\n\n                if (v.slice(0, 6).toLowerCase() === \"matrix\") {\n                  nums = v.slice(7, v.length - 1).trim();\n                  parts = nums.split(\",\");\n\n                  if (parts.length === 6) {\n                    return Matrix.fromList(map(parts, function (p) {\n                      return parseFloat(p);\n                    }));\n                  }\n\n                  parts = nums.split(\" \");\n\n                  if (parts.length === 6) {\n                    return Matrix.fromList(map(parts, function (p) {\n                      return parseFloat(p);\n                    }));\n                  }\n                } // of the form \"(...)\"\n\n\n                if (v.slice(0, 1) === \"(\" && v.slice(v.length - 1) === \")\") {\n                  v = v.substr(1, v.length - 1);\n                }\n\n                if (v.indexOf(\",\") > 0) {\n                  parts = v.split(\",\");\n\n                  if (parts.length === 6) {\n                    return Matrix.fromList(map(parts, function (p) {\n                      return parseFloat(p);\n                    }));\n                  }\n                }\n\n                if (v.indexOf(\" \") > 0) {\n                  parts = v.split(\" \");\n\n                  if (parts.length === 6) {\n                    return Matrix.fromList(map(parts, function (p) {\n                      return parseFloat(p);\n                    }));\n                  }\n                }\n              }\n\n              return parts;\n            }\n          });\n          /**\n           * SVG transformation represented as a vector.\n           */\n\n          var MatrixVector = Class.extend({\n            init: function (a, b, c, d, e, f) {\n              this.a = a || 0;\n              this.b = b || 0;\n              this.c = c || 0;\n              this.d = d || 0;\n              this.e = e || 0;\n              this.f = f || 0;\n            },\n            fromMatrix: function FromMatrix(m) {\n              var v = new MatrixVector();\n              v.a = m.a;\n              v.b = m.b;\n              v.c = m.c;\n              v.d = m.d;\n              v.e = m.e;\n              v.f = m.f;\n              return v;\n            }\n          });\n          /**\n           * Returns a value with Gaussian (normal) distribution.\n           * @param mean The mean value of the distribution.\n           * @param deviation The deviation (spreading at half-height) of the distribution.\n           * @returns {number}\n           */\n\n          function normalVariable(mean, deviation) {\n            var x, y, r;\n\n            do {\n              x = Math.random() * 2 - 1;\n              y = Math.random() * 2 - 1;\n              r = x * x + y * y;\n            } while (!r || r > 1);\n\n            return mean + deviation * x * Math.sqrt(-2 * Math.log(r) / r);\n          }\n          /**\n           * Returns a random identifier which can be used as an ID of objects, eventually augmented with a prefix.\n           * @returns {string}\n           */\n\n\n          function randomId(length) {\n            if (Utils.isUndefined(length)) {\n              length = 10;\n            } // old version return Math.floor((1 + Math.random()) * 0x1000000).toString(16).substring(1);\n\n\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n            for (var i = length; i > 0; --i) {\n              result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n\n            return result;\n          }\n\n          var Geometry = {\n            /**\n             * Returns the squared distance to the line defined by the two given Points.\n             * @param p An arbitrary Point.\n             * @param a An endpoint of the line or segment.\n             * @param b The complementary endpoint of the line or segment.\n             */\n            _distanceToLineSquared: function (p, a, b) {\n              function d2(pt1, pt2) {\n                return (pt1.x - pt2.x) * (pt1.x - pt2.x) + (pt1.y - pt2.y) * (pt1.y - pt2.y);\n              }\n\n              if (a === b) {\n                // returns the distance of p to a\n                return d2(p, a);\n              }\n\n              var vx = b.x - a.x,\n                  vy = b.y - a.y,\n                  dot = (p.x - a.x) * vx + (p.y - a.y) * vy;\n\n              if (dot < 0) {\n                return d2(a, p); // sits on side of a\n              }\n\n              dot = (b.x - p.x) * vx + (b.y - p.y) * vy;\n\n              if (dot < 0) {\n                return d2(b, p); // sits on side of b\n              } // regular case, use crossproduct to get the sine out\n\n\n              dot = (b.x - p.x) * vy - (b.y - p.y) * vx;\n              return dot * dot / (vx * vx + vy * vy);\n            },\n\n            /**\n             * Returns the distance to the line defined by the two given Points.\n             * @param p An arbitrary Point.\n             * @param a An endpoint of the line or segment.\n             * @param b The complementary endpoint of the line or segment.\n             */\n            distanceToLine: function (p, a, b) {\n              return Math.sqrt(this._distanceToLineSquared(p, a, b));\n            },\n\n            /**\n             * Returns the distance of the given points to the polyline defined by the points.\n             * @param p An arbitrary point.\n             * @param points The points defining the polyline.\n             * @returns {Number}\n             */\n            distanceToPolyline: function (p, points) {\n              var minimum = Number.MAX_VALUE;\n\n              if (Utils.isUndefined(points) || points.length === 0) {\n                return Number.MAX_VALUE;\n              }\n\n              for (var s = 0; s < points.length - 1; s++) {\n                var p1 = points[s];\n                var p2 = points[s + 1];\n\n                var d = this._distanceToLineSquared(p, p1, p2);\n\n                if (d < minimum) {\n                  minimum = d;\n                }\n              }\n\n              return Math.sqrt(minimum);\n            }\n          };\n          /*---------------The HashTable structure--------------------------------*/\n\n          /**\n           * Represents a collection of key-value pairs that are organized based on the hash code of the key.\n           * _buckets[hashId] = {key: key, value:...}\n           * Important: do not use the standard Array access method, use the get/set methods instead.\n           * See http://en.wikipedia.org/wiki/Hash_table\n           */\n\n          var HashTable = kendo.Class.extend({\n            init: function () {\n              this._buckets = [];\n              this.length = 0;\n            },\n\n            /**\n             * Adds the literal object with the given key (of the form {key: key,....}).\n             */\n            add: function (key, value) {\n              var obj = this._createGetBucket(key);\n\n              if (Utils.isDefined(value)) {\n                obj.value = value;\n              }\n\n              return obj;\n            },\n\n            /**\n             * Gets the literal object with the given key.\n             */\n            get: function (key) {\n              if (this._bucketExists(key)) {\n                return this._createGetBucket(key);\n              }\n\n              return null;\n            },\n\n            /**\n             * Set the key-value pair.\n             * @param key The key of the entry.\n             * @param value The value to set. If the key already exists the value will be overwritten.\n             */\n            set: function (key, value) {\n              this.add(key, value);\n            },\n\n            /**\n             * Determines whether the HashTable contains a specific key.\n             */\n            containsKey: function (key) {\n              return this._bucketExists(key);\n            },\n\n            /**\n             * Removes the element with the specified key from the hashtable.\n             * Returns the removed bucket.\n             */\n            remove: function (key) {\n              if (this._bucketExists(key)) {\n                var hashId = this._hash(key);\n\n                delete this._buckets[hashId];\n                this.length--;\n                return key;\n              }\n            },\n\n            /**\n             * Foreach with an iterator working on the key-value pairs.\n             * @param func\n             */\n            forEach: function (func) {\n              var hashes = this._hashes();\n\n              for (var i = 0, len = hashes.length; i < len; i++) {\n                var hash = hashes[i];\n                var bucket = this._buckets[hash];\n\n                if (Utils.isUndefined(bucket)) {\n                  continue;\n                }\n\n                func(bucket);\n              }\n            },\n\n            /**\n             * Returns a (shallow) clone of the current HashTable.\n             * @returns {HashTable}\n             */\n            clone: function () {\n              var ht = new HashTable();\n\n              var hashes = this._hashes();\n\n              for (var i = 0, len = hashes.length; i < len; i++) {\n                var hash = hashes[i];\n                var bucket = this._buckets[hash];\n\n                if (Utils.isUndefined(bucket)) {\n                  continue;\n                }\n\n                ht.add(bucket.key, bucket.value);\n              }\n\n              return ht;\n            },\n\n            /**\n             * Returns the hashes of the buckets.\n             * @returns {Array}\n             * @private\n             */\n            _hashes: function () {\n              var hashes = [];\n\n              for (var hash in this._buckets) {\n                if (this._buckets.hasOwnProperty(hash)) {\n                  hashes.push(hash);\n                }\n              }\n\n              return hashes;\n            },\n            _bucketExists: function (key) {\n              var hashId = this._hash(key);\n\n              return Utils.isDefined(this._buckets[hashId]);\n            },\n\n            /**\n             * Returns-adds the createGetBucket with the given key. If not present it will\n             * be created and returned.\n             * A createGetBucket is a literal object of the form {key: key, ...}.\n             */\n            _createGetBucket: function (key) {\n              var hashId = this._hash(key);\n\n              var bucket = this._buckets[hashId];\n\n              if (Utils.isUndefined(bucket)) {\n                bucket = {\n                  key: key\n                };\n                this._buckets[hashId] = bucket;\n                this.length++;\n              }\n\n              return bucket;\n            },\n\n            /**\n             * Hashing of the given key.\n             */\n            _hash: function (key) {\n              if (Utils.isNumber(key)) {\n                return key;\n              }\n\n              if (Utils.isString(key)) {\n                return this._hashString(key);\n              }\n\n              if (Utils.isObject(key)) {\n                return this._objectHashId(key);\n              }\n\n              throw \"Unsupported key type.\";\n            },\n\n            /**\n             * Hashing of a string.\n             */\n            _hashString: function (s) {\n              // see for example http://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript-jquery\n              var result = 0;\n\n              if (s.length === 0) {\n                return result;\n              }\n\n              for (var i = 0; i < s.length; i++) {\n                var ch = s.charCodeAt(i);\n                result = result * 32 - result + ch;\n              }\n\n              return result;\n            },\n\n            /**\n             * Returns the unique identifier for an object. This is automatically assigned and add on the object.\n             */\n            _objectHashId: function (key) {\n              var id = key._hashId;\n\n              if (Utils.isUndefined(id)) {\n                id = randomId();\n                key._hashId = id;\n              }\n\n              return id;\n            }\n          });\n          /*---------------The Dictionary structure--------------------------------*/\n\n          /**\n           * Represents a collection of key-value pairs.\n           * Important: do not use the standard Array access method, use the get/Set methods instead.\n           */\n\n          var Dictionary = kendo.Observable.extend({\n            /**\n             * Initializes a new instance of the Dictionary class.\n             * @param dictionary Loads the content of the given dictionary into this new one.\n             */\n            init: function (dictionary) {\n              var that = this;\n              kendo.Observable.fn.init.call(that);\n              this._hashTable = new HashTable();\n              this.length = 0;\n\n              if (Utils.isDefined(dictionary)) {\n                if (Array.isArray(dictionary)) {\n                  for (var i = 0; i < dictionary.length; i++) {\n                    this.add(dictionary[i]);\n                  }\n                } else {\n                  dictionary.forEach(function (k, v) {\n                    this.add(k, v);\n                  }, this);\n                }\n              }\n            },\n\n            /**\n             * Adds a key-value to the dictionary.\n             * If the key already exists this will assign the given value to the existing entry.\n             */\n            add: function (key, value) {\n              var entry = this._hashTable.get(key);\n\n              if (!entry) {\n                entry = this._hashTable.add(key);\n                this.length++;\n                this.trigger('changed');\n              }\n\n              entry.value = value;\n            },\n\n            /**\n             * Set the key-value pair.\n             * @param key The key of the entry.\n             * @param value The value to set. If the key already exists the value will be overwritten.\n             */\n            set: function (key, value) {\n              this.add(key, value);\n            },\n\n            /**\n             * Gets the value associated with the given key in the dictionary.\n             */\n            get: function (key) {\n              var entry = this._hashTable.get(key);\n\n              if (entry) {\n                return entry.value;\n              }\n\n              throw new Error(\"Cannot find key \" + key);\n            },\n\n            /**\n             * Returns whether the dictionary contains the given key.\n             */\n            containsKey: function (key) {\n              return this._hashTable.containsKey(key);\n            },\n\n            /**\n             * Removes the element with the specified key from the dictionary.\n             */\n            remove: function (key) {\n              if (this.containsKey(key)) {\n                this.trigger(\"changed\");\n                this.length--;\n                return this._hashTable.remove(key);\n              }\n            },\n\n            /**\n             * The functional gets the key and value as parameters.\n             */\n            forEach: function (func, thisRef) {\n              this._hashTable.forEach(function (entry) {\n                func.call(thisRef, entry.key, entry.value);\n              });\n            },\n\n            /**\n             * Same as forEach except that only the value is passed to the functional.\n             */\n            forEachValue: function (func, thisRef) {\n              this._hashTable.forEach(function (entry) {\n                func.call(thisRef, entry.value);\n              });\n            },\n\n            /**\n             * Calls a defined callback function for each key in the dictionary.\n             */\n            forEachKey: function (func, thisRef) {\n              this._hashTable.forEach(function (entry) {\n                func.call(thisRef, entry.key);\n              });\n            },\n\n            /**\n             * Gets an array with all keys in the dictionary.\n             */\n            keys: function () {\n              var keys = [];\n              this.forEachKey(function (key) {\n                keys.push(key);\n              });\n              return keys;\n            }\n          });\n          /*---------------Queue structure--------------------------------*/\n\n          var Queue = kendo.Class.extend({\n            init: function () {\n              this._tail = null;\n              this._head = null;\n              this.length = 0;\n            },\n\n            /**\n             * Enqueues an object to the end of the queue.\n             */\n            enqueue: function (value) {\n              var entry = {\n                value: value,\n                next: null\n              };\n\n              if (!this._head) {\n                this._head = entry;\n                this._tail = this._head;\n              } else {\n                this._tail.next = entry;\n                this._tail = this._tail.next;\n              }\n\n              this.length++;\n            },\n\n            /**\n             * Removes and returns the object at top of the queue.\n             */\n            dequeue: function () {\n              if (this.length < 1) {\n                throw new Error(\"The queue is empty.\");\n              }\n\n              var value = this._head.value;\n              this._head = this._head.next;\n              this.length--;\n              return value;\n            },\n            contains: function (item) {\n              var current = this._head;\n\n              while (current) {\n                if (current.value === item) {\n                  return true;\n                }\n\n                current = current.next;\n              }\n\n              return false;\n            }\n          });\n          /**\n           * While other data structures can have multiple times the same item a Set owns only\n           * once a particular item.\n           * @type {*}\n           */\n\n          var Set = kendo.Observable.extend({\n            init: function (resource) {\n              var that = this;\n              kendo.Observable.fn.init.call(that);\n              this._hashTable = new HashTable();\n              this.length = 0;\n\n              if (Utils.isDefined(resource)) {\n                if (resource instanceof HashTable) {\n                  resource.forEach(function (d) {\n                    this.add(d);\n                  });\n                } else if (resource instanceof Dictionary) {\n                  resource.forEach(function (k, v) {\n                    this.add({\n                      key: k,\n                      value: v\n                    });\n                  }, this);\n                }\n              }\n            },\n            contains: function (item) {\n              return this._hashTable.containsKey(item);\n            },\n            add: function (item) {\n              var entry = this._hashTable.get(item);\n\n              if (!entry) {\n                this._hashTable.add(item, item);\n\n                this.length++;\n                this.trigger('changed');\n              }\n            },\n            get: function (item) {\n              if (this.contains(item)) {\n                return this._hashTable.get(item).value;\n              } else {\n                return null;\n              }\n            },\n\n            /**\n             * Returns the hash of the item.\n             * @param item\n             * @returns {*}\n             */\n            hash: function (item) {\n              return this._hashTable._hash(item);\n            },\n\n            /**\n             * Removes the given item from the set. No exception is thrown if the item is not in the Set.\n             * @param item\n             */\n            remove: function (item) {\n              if (this.contains(item)) {\n                this._hashTable.remove(item);\n\n                this.length--;\n                this.trigger('changed');\n              }\n            },\n\n            /**\n             * Foreach with an iterator working on the key-value pairs.\n             * @param func\n             */\n            forEach: function (func, context) {\n              this._hashTable.forEach(function (kv) {\n                func(kv.value);\n              }, context);\n            },\n            toArray: function () {\n              var r = [];\n              this.forEach(function (d) {\n                r.push(d);\n              });\n              return r;\n            }\n          });\n          /*----------------Node-------------------------------*/\n\n          /**\n           * Defines the node (vertex) of a Graph.\n           */\n\n          var Node = kendo.Class.extend({\n            init: function (id, shape) {\n              /**\n               * Holds all the links incident with the current node.\n               * Do not use this property to manage the incoming links, use the appropriate add/remove methods instead.\n               */\n              this.links = [];\n              /**\n               * Holds the links from the current one to another Node .\n               * Do not use this property to manage the incoming links, use the appropriate add/remove methods instead.\n               */\n\n              this.outgoing = [];\n              /**\n               * Holds the links from another Node to the current one.\n               * Do not use this property to manage the incoming links, use the appropriate add/remove methods instead.\n               */\n\n              this.incoming = [];\n              /**\n               * Holds the weight of this Node.\n               */\n\n              this.weight = 1;\n\n              if (Utils.isDefined(id)) {\n                this.id = id;\n              } else {\n                this.id = randomId();\n              }\n\n              if (Utils.isDefined(shape)) {\n                this.associatedShape = shape; // transfer the shape's bounds to the runtime props\n\n                var b = shape.bounds();\n                this.width = b.width;\n                this.height = b.height;\n                this.x = b.x;\n                this.y = b.y;\n              } else {\n                this.associatedShape = null;\n              }\n              /**\n               * The payload of the node.\n               * @type {null}\n               */\n\n\n              this.data = null;\n              this.type = \"Node\";\n              this.shortForm = \"Node '\" + this.id + \"'\";\n              /**\n               * Whether this is an injected node during the analysis or layout process.\n               * @type {boolean}\n               */\n\n              this.isVirtual = false;\n            },\n\n            /**\n             * Returns whether this node has no links attached.\n             */\n            isIsolated: function () {\n              return Utils.isEmpty(this.links);\n            },\n\n            /**\n             * Gets or sets the bounding rectangle of this node.\n             * This should be considered as runtime data, the property is not hotlinked to a SVG item.\n             */\n            bounds: function (r) {\n              if (!Utils.isDefined(r)) {\n                return new diagram.Rect(this.x, this.y, this.width, this.height);\n              }\n\n              this.x = r.x;\n              this.y = r.y;\n              this.width = r.width;\n              this.height = r.height;\n            },\n\n            /**\n             * Returns whether there is at least one link with the given (complementary) node. This can be either an\n             * incoming or outgoing link.\n             */\n            isLinkedTo: function (node) {\n              var that = this;\n              return Utils.any(that.links, function (link) {\n                return link.getComplement(that) === node;\n              });\n            },\n\n            /**\n             * Gets the children of this node, defined as the adjacent nodes with a link from this node to the adjacent one.\n             * @returns {Array}\n             */\n            getChildren: function () {\n              if (this.outgoing.length === 0) {\n                return [];\n              }\n\n              var children = [];\n\n              for (var i = 0, len = this.outgoing.length; i < len; i++) {\n                var link = this.outgoing[i];\n                children.push(link.getComplement(this));\n              }\n\n              return children;\n            },\n\n            /**\n             * Gets the parents of this node, defined as the adjacent nodes with a link from the adjacent node to this one.\n             * @returns {Array}\n             */\n            getParents: function () {\n              if (this.incoming.length === 0) {\n                return [];\n              }\n\n              var parents = [];\n\n              for (var i = 0, len = this.incoming.length; i < len; i++) {\n                var link = this.incoming[i];\n                parents.push(link.getComplement(this));\n              }\n\n              return parents;\n            },\n\n            /**\n             * Returns a clone of the Node. Note that the identifier is not cloned since it's a different Node instance.\n             * @returns {Node}\n             */\n            clone: function () {\n              var copy = new Node();\n\n              if (Utils.isDefined(this.weight)) {\n                copy.weight = this.weight;\n              }\n\n              if (Utils.isDefined(this.balance)) {\n                copy.balance = this.balance;\n              }\n\n              if (Utils.isDefined(this.owner)) {\n                copy.owner = this.owner;\n              }\n\n              copy.associatedShape = this.associatedShape;\n              copy.x = this.x;\n              copy.y = this.y;\n              copy.width = this.width;\n              copy.height = this.height;\n              return copy;\n            },\n\n            /**\n             * Returns whether there is a link from the current node to the given node.\n             */\n            adjacentTo: function (node) {\n              return this.isLinkedTo(node) !== null;\n            },\n\n            /**\n             * Removes the given link from the link collection this node owns.\n             * @param link\n             */\n            removeLink: function (link) {\n              if (link.source === this) {\n                Utils.remove(this.links, link);\n                Utils.remove(this.outgoing, link);\n                link.source = null;\n              }\n\n              if (link.target === this) {\n                Utils.remove(this.links, link);\n                Utils.remove(this.incoming, link);\n                link.target = null;\n              }\n            },\n\n            /**\n             * Returns whether there is a (outgoing) link from the current node to the given one.\n             */\n            hasLinkTo: function (node) {\n              return Utils.any(this.outgoing, function (link) {\n                return link.target === node;\n              });\n            },\n\n            /**\n             * Returns the degree of this node, i.e. the sum of incoming and outgoing links.\n             */\n            degree: function () {\n              return this.links.length;\n            },\n\n            /**\n             * Returns whether this node is either the source or the target of the given link.\n             */\n            incidentWith: function (link) {\n              return contains(this.links, link);\n            },\n\n            /**\n             * Returns the links between this node and the given one.\n             */\n            getLinksWith: function (node) {\n              return Utils.all(this.links, function (link) {\n                return link.getComplement(this) === node;\n              }, this);\n            },\n\n            /**\n             * Returns the nodes (either parent or child) which are linked to the current one.\n             */\n            getNeighbors: function () {\n              var neighbors = [];\n              Utils.forEach(this.incoming, function (e) {\n                neighbors.push(e.getComplement(this));\n              }, this);\n              Utils.forEach(this.outgoing, function (e) {\n                neighbors.push(e.getComplement(this));\n              }, this);\n              return neighbors;\n            }\n          });\n          /**\n           * Defines a directed link (edge, connection) of a Graph.\n           */\n\n          var Link = kendo.Class.extend({\n            init: function (source, target, id, connection) {\n              if (Utils.isUndefined(source)) {\n                throw \"The source of the new link is not set.\";\n              }\n\n              if (Utils.isUndefined(target)) {\n                throw \"The target of the new link is not set.\";\n              }\n\n              var sourceFound, targetFound;\n\n              if (Utils.isString(source)) {\n                sourceFound = new Node(source);\n              } else {\n                sourceFound = source;\n              }\n\n              if (Utils.isString(target)) {\n                targetFound = new Node(target);\n              } else {\n                targetFound = target;\n              }\n\n              this.source = sourceFound;\n              this.target = targetFound;\n              this.source.links.push(this);\n              this.target.links.push(this);\n              this.source.outgoing.push(this);\n              this.target.incoming.push(this);\n\n              if (Utils.isDefined(id)) {\n                this.id = id;\n              } else {\n                this.id = randomId();\n              }\n\n              if (Utils.isDefined(connection)) {\n                this.associatedConnection = connection;\n              } else {\n                this.associatedConnection = null;\n              }\n\n              this.type = \"Link\";\n              this.shortForm = \"Link '\" + this.source.id + \"->\" + this.target.id + \"'\";\n            },\n\n            /**\n             * Returns the complementary node of the given one, if any.\n             */\n            getComplement: function (node) {\n              if (this.source !== node && this.target !== node) {\n                throw \"The given node is not incident with this link.\";\n              }\n\n              return this.source === node ? this.target : this.source;\n            },\n\n            /**\n             * Returns the overlap of the current link with the given one, if any.\n             */\n            getCommonNode: function (link) {\n              if (this.source === link.source || this.source === link.target) {\n                return this.source;\n              }\n\n              if (this.target === link.source || this.target === link.target) {\n                return this.target;\n              }\n\n              return null;\n            },\n\n            /**\n             * Returns whether the current link is bridging the given nodes.\n             */\n            isBridging: function (v1, v2) {\n              return this.source === v1 && this.target === v2 || this.source === v2 && this.target === v1;\n            },\n\n            /**\n             * Returns the source and target of this link as a tuple.\n             */\n            getNodes: function () {\n              return [this.source, this.target];\n            },\n\n            /**\n             * Returns whether the given node is either the source or the target of the current link.\n             */\n            incidentWith: function (node) {\n              return this.source === node || this.target === node;\n            },\n\n            /**\n             * Returns whether the given link is a continuation of the current one. This can be both\n             * via an incoming or outgoing link.\n             */\n            adjacentTo: function (link) {\n              return contains(this.source.links, link) || contains(this.target.links, link);\n            },\n\n            /**\n             * Changes the source-node of this link.\n             */\n            changeSource: function (node) {\n              Utils.remove(this.source.links, this);\n              Utils.remove(this.source.outgoing, this);\n              node.links.push(this);\n              node.outgoing.push(this);\n              this.source = node;\n            },\n\n            /**\n             * Changes the target-node of this link.\n             * @param node\n             */\n            changeTarget: function (node) {\n              Utils.remove(this.target.links, this);\n              Utils.remove(this.target.incoming, this);\n              node.links.push(this);\n              node.incoming.push(this);\n              this.target = node;\n            },\n\n            /**\n             * Changes both the source and the target nodes of this link.\n             */\n            changesNodes: function (v, w) {\n              if (this.source === v) {\n                this.changeSource(w);\n              } else if (this.target === v) {\n                this.changeTarget(w);\n              }\n            },\n\n            /**\n             * Reverses the direction of this link.\n             */\n            reverse: function () {\n              var oldSource = this.source;\n              var oldTarget = this.target;\n              this.source = oldTarget;\n              Utils.remove(oldSource.outgoing, this);\n              this.source.outgoing.push(this);\n              this.target = oldSource;\n              Utils.remove(oldTarget.incoming, this);\n              this.target.incoming.push(this);\n              return this;\n            },\n\n            /**\n             * Ensures that the given target defines the endpoint of this link.\n             */\n            directTo: function (target) {\n              if (this.source !== target && this.target !== target) {\n                throw \"The given node is not incident with this link.\";\n              }\n\n              if (this.target !== target) {\n                this.reverse();\n              }\n            },\n\n            /**\n             * Returns a reversed clone of this link.\n             */\n            createReverseEdge: function () {\n              var r = this.clone();\n              r.reverse();\n              r.reversed = true;\n              return r;\n            },\n\n            /**\n             * Returns a clone of this link.\n             */\n            clone: function () {\n              var clone = new Link(this.source, this.target);\n              return clone;\n            }\n          });\n          /*--------------Graph structure---------------------------------*/\n\n          /**\n           * Defines a directed graph structure.\n           * Note that the incidence structure resides in the nodes through the incoming and outgoing links collection, rahter than\n           * inside the Graph.\n           */\n\n          var Graph = kendo.Class.extend({\n            init: function (idOrDiagram) {\n              /**\n               * The links or edge collection of this Graph.\n               * @type {Array}\n               */\n              this.links = [];\n              /**\n               * The node or vertex collection of this Graph.\n               * @type {Array}\n               */\n\n              this.nodes = [];\n              this._nodeMap = new Dictionary();\n              /**\n               * The optional reference to the Diagram on which this Graph is based.\n               * @type {null}\n               */\n\n              this.diagram = null;\n              /**\n               * The root of this Graph. If not set explicitly the first Node with zero incoming links will be taken.\n               * @type {null}\n               * @private\n               */\n\n              this._root = null;\n\n              if (Utils.isDefined(idOrDiagram)) {\n                if (Utils.isString(idOrDiagram)) {\n                  this.id = idOrDiagram;\n                } else {\n                  this.diagram = idOrDiagram;\n                  this.id = idOrDiagram.id;\n                }\n              } else {\n                this.id = randomId();\n              }\n              /**\n               * The bounds of this graph if the nodes have spatial extension defined.\n               * @type {Rect}\n               */\n\n\n              this.bounds = new Rect(); // keeps track whether the children & parents have been created\n\n              this._hasCachedRelationships = false;\n              this.type = \"Graph\";\n            },\n\n            /**\n             * Caches the relational information of parents and children in the 'parents' and 'children'\n             * properties.\n             * @param forceRebuild If set to true the relational info will be rebuild even if already present.\n             */\n            cacheRelationships: function (forceRebuild) {\n              if (Utils.isUndefined(forceRebuild)) {\n                forceRebuild = false;\n              }\n\n              if (this._hasCachedRelationships && !forceRebuild) {\n                return;\n              }\n\n              for (var i = 0, len = this.nodes.length; i < len; i++) {\n                var node = this.nodes[i];\n                node.children = this.getChildren(node);\n                node.parents = this.getParents(node);\n              }\n\n              this._hasCachedRelationships = true;\n            },\n\n            /**\n             * Assigns tree-levels to the nodes assuming this is a tree graph.\n             * If not connected or not a tree the process will succeed but\n             * will have little meaning.\n             * @param startNode The node from where the level numbering starts, usually the root of the tree.\n             * @param visited The collection of visited nodes.\n             * @param offset The offset or starting counter of the level info.\n             */\n            assignLevels: function (startNode, offset, visited) {\n              if (!startNode) {\n                throw \"Start node not specified.\";\n              }\n\n              if (Utils.isUndefined(offset)) {\n                offset = 0;\n              } // if not done before, cache the parents and children\n\n\n              this.cacheRelationships();\n\n              if (Utils.isUndefined(visited)) {\n                visited = new Dictionary();\n                Utils.forEach(this.nodes, function (n) {\n                  visited.add(n, false);\n                });\n              }\n\n              visited.set(startNode, true);\n              startNode.level = offset;\n              var children = startNode.children;\n\n              for (var i = 0, len = children.length; i < len; i++) {\n                var child = children[i];\n\n                if (!child || visited.get(child)) {\n                  continue;\n                }\n\n                this.assignLevels(child, offset + 1, visited);\n              }\n            },\n\n            /**\n             * Gets or set the root of this graph.\n             * If not set explicitly the first Node with zero incoming links will be taken.\n             * @param value\n             * @returns {*}\n             */\n            root: function (value) {\n              if (Utils.isUndefined(value)) {\n                if (!this._root) {\n                  // TODO: better to use the longest path for the most probable root?\n                  var found = Utils.first(this.nodes, function (n) {\n                    return n.incoming.length === 0;\n                  });\n\n                  if (found) {\n                    return found;\n                  }\n\n                  return Utils.first(this.nodes);\n                } else {\n                  return this._root;\n                }\n              } else {\n                this._root = value;\n              }\n            },\n\n            /**\n             * Returns the connected components of this graph.\n             * Note that the returned graphs are made up of the nodes and links of this graph, i.e. a pointer to the items of this graph.\n             * If you alter the items of the components you'll alter the original graph and vice versa.\n             * @returns {Array}\n             */\n            getConnectedComponents: function () {\n              this.componentIndex = 0;\n              this.setItemIndices();\n              var componentId = Utils.initArray(this.nodes.length, -1);\n\n              for (var v = 0; v < this.nodes.length; v++) {\n                if (componentId[v] === -1) {\n                  this._collectConnectedNodes(componentId, v);\n\n                  this.componentIndex++;\n                }\n              }\n\n              var components = [],\n                  i;\n\n              for (i = 0; i < this.componentIndex; ++i) {\n                components[i] = new Graph();\n              }\n\n              for (i = 0; i < componentId.length; ++i) {\n                var graph = components[componentId[i]];\n                graph.addNodeAndOutgoings(this.nodes[i]);\n              } // sorting the components in decreasing order of node count\n\n\n              components.sort(function (a, b) {\n                return b.nodes.length - a.nodes.length;\n              });\n              return components;\n            },\n            _collectConnectedNodes: function (setIds, nodeIndex) {\n              setIds[nodeIndex] = this.componentIndex; // part of the current component\n\n              var node = this.nodes[nodeIndex];\n              Utils.forEach(node.links, function (link) {\n                var next = link.getComplement(node);\n                var nextId = next.index;\n\n                if (setIds[nextId] === -1) {\n                  this._collectConnectedNodes(setIds, nextId);\n                }\n              }, this);\n            },\n\n            /**\n             * Calculates the bounds of this Graph if the Nodes have spatial dimensions defined.\n             * @returns {Rect}\n             */\n            calcBounds: function () {\n              if (this.isEmpty()) {\n                this.bounds = new Rect();\n                return this.bounds;\n              }\n\n              var b = null;\n\n              for (var i = 0, len = this.nodes.length; i < len; i++) {\n                var node = this.nodes[i];\n\n                if (!b) {\n                  b = node.bounds();\n                } else {\n                  b = b.union(node.bounds());\n                }\n              }\n\n              this.bounds = b;\n              return this.bounds;\n            },\n\n            /**\n             * Creates a spanning tree for the current graph.\n             * Important: this will not return a spanning forest if the graph is disconnected.\n             * Prim's algorithm  finds a minimum-cost spanning tree of an edge-weighted, connected, undirected graph;\n             * see http://en.wikipedia.org/wiki/Prim%27s_algorithm .\n             * @param root The root of the spanning tree.\n             * @returns {Graph}\n             */\n            getSpanningTree: function (root) {\n              var tree = new Graph();\n              var map = new Dictionary(),\n                  source,\n                  target;\n              tree.root = root.clone();\n              tree.root.level = 0;\n              tree.root.id = root.id;\n              map.add(root, tree.root);\n              root.level = 0;\n              var visited = [];\n              var remaining = [];\n\n              tree._addNode(tree.root);\n\n              visited.push(root);\n              remaining.push(root);\n              var levelCount = 1;\n\n              while (remaining.length > 0) {\n                var next = remaining.pop();\n\n                for (var ni = 0; ni < next.links.length; ni++) {\n                  var link = next.links[ni];\n                  var cn = link.getComplement(next);\n\n                  if (contains(visited, cn)) {\n                    continue;\n                  }\n\n                  cn.level = next.level + 1;\n\n                  if (levelCount < cn.level + 1) {\n                    levelCount = cn.level + 1;\n                  }\n\n                  if (!contains(remaining, cn)) {\n                    remaining.push(cn);\n                  }\n\n                  if (!contains(visited, cn)) {\n                    visited.push(cn);\n                  }\n\n                  if (map.containsKey(next)) {\n                    source = map.get(next);\n                  } else {\n                    source = next.clone();\n                    source.level = next.level;\n                    source.id = next.id;\n                    map.add(next, source);\n                  }\n\n                  if (map.containsKey(cn)) {\n                    target = map.get(cn);\n                  } else {\n                    target = cn.clone();\n                    target.level = cn.level;\n                    target.id = cn.id;\n                    map.add(cn, target);\n                  }\n\n                  var newLink = new Link(source, target);\n                  tree.addLink(newLink);\n                }\n              }\n\n              var treeLevels = [];\n\n              for (var i = 0; i < levelCount; i++) {\n                treeLevels.push([]);\n              }\n\n              Utils.forEach(tree.nodes, function (node) {\n                treeLevels[node.level].push(node);\n              });\n              tree.treeLevels = treeLevels;\n              tree.cacheRelationships();\n              return tree;\n            },\n\n            /**\n             * Returns a random node in this graph.\n             * @param excludedNodes The collection of nodes which should not be considered.\n             * @param incidenceLessThan The maximum degree or incidence the random node should have.\n             * @returns {*}\n             */\n            takeRandomNode: function (excludedNodes, incidenceLessThan) {\n              if (Utils.isUndefined(excludedNodes)) {\n                excludedNodes = [];\n              }\n\n              if (Utils.isUndefined(incidenceLessThan)) {\n                incidenceLessThan = 4;\n              }\n\n              if (this.nodes.length === 0) {\n                return null;\n              }\n\n              if (this.nodes.length === 1) {\n                return contains(excludedNodes, this.nodes[0]) ? null : this.nodes[0];\n              }\n\n              var pool = $.grep(this.nodes, function (node) {\n                return !contains(excludedNodes, node) && node.degree() <= incidenceLessThan;\n              });\n\n              if (Utils.isEmpty(pool)) {\n                return null;\n              }\n\n              return pool[Utils.randomInteger(0, pool.length)];\n            },\n\n            /**\n             * Returns whether this is an empty graph.\n             */\n            isEmpty: function () {\n              return Utils.isEmpty(this.nodes);\n            },\n\n            /**\n             * Checks whether the endpoints of the links are all in the nodes collection.\n             */\n            isHealthy: function () {\n              return Utils.all(this.links, function (link) {\n                return contains(this.nodes, link.source) && contains(this.nodes, link.target);\n              }, this);\n            },\n\n            /**\n             * Gets the parents of this node, defined as the adjacent nodes with a link from the adjacent node to this one.\n             * @returns {Array}\n             */\n            getParents: function (n) {\n              if (!this.hasNode(n)) {\n                throw \"The given node is not part of this graph.\";\n              }\n\n              return n.getParents();\n            },\n\n            /**\n             * Gets the children of this node, defined as the adjacent nodes with a link from this node to the adjacent one.\n             * @returns {Array}\n             */\n            getChildren: function (n) {\n              if (!this.hasNode(n)) {\n                throw \"The given node is not part of this graph.\";\n              }\n\n              return n.getChildren();\n            },\n\n            /**\n             * Adds a new link to the graph between the given nodes.\n             */\n            addLink: function (sourceOrLink, target, owner) {\n              if (Utils.isUndefined(sourceOrLink)) {\n                throw \"The source of the link is not defined.\";\n              }\n\n              if (Utils.isUndefined(target)) {\n                // can only be undefined if the first one is a Link\n                if (Utils.isDefined(sourceOrLink.type) && sourceOrLink.type === \"Link\") {\n                  this.addExistingLink(sourceOrLink);\n                  return;\n                } else {\n                  throw \"The target of the link is not defined.\";\n                }\n              }\n\n              var foundSource = this.getNode(sourceOrLink);\n\n              if (Utils.isUndefined(foundSource)) {\n                foundSource = this.addNode(sourceOrLink);\n              }\n\n              var foundTarget = this.getNode(target);\n\n              if (Utils.isUndefined(foundTarget)) {\n                foundTarget = this.addNode(target);\n              }\n\n              var newLink = new Link(foundSource, foundTarget);\n\n              if (Utils.isDefined(owner)) {\n                newLink.owner = owner;\n              }\n              /*newLink.source.outgoing.push(newLink);\n               newLink.source.links.push(newLink);\n               newLink.target.incoming.push(newLink);\n               newLink.target.links.push(newLink);*/\n\n\n              this.links.push(newLink);\n              return newLink;\n            },\n\n            /**\n             * Removes all the links in this graph.\n             */\n            removeAllLinks: function () {\n              while (this.links.length > 0) {\n                var link = this.links[0];\n                this.removeLink(link);\n              }\n            },\n\n            /**\n             * Adds the given link to the current graph.\n             */\n            addExistingLink: function (link) {\n              if (this.hasLink(link)) {\n                return;\n              }\n\n              this.links.push(link);\n\n              if (this.hasNode(link.source.id)) {\n                // priority to the existing node with the id even if other props are different\n                var s = this.getNode(link.source.id);\n                link.changeSource(s);\n              } else {\n                this.addNode(link.source);\n              }\n\n              if (this.hasNode(link.target.id)) {\n                var t = this.getNode(link.target.id);\n                link.changeTarget(t);\n              } else {\n                this.addNode(link.target);\n              }\n              /*  if (!link.source.outgoing.contains(link)) {\n               link.source.outgoing.push(link);\n               }\n               if (!link.source.links.contains(link)) {\n               link.source.links.push(link);\n               }\n               if (!link.target.incoming.contains(link)) {\n               link.target.incoming.push(link);\n               }\n               if (!link.target.links.contains(link)) {\n               link.target.links.push(link);\n               }*/\n\n            },\n\n            /**\n             * Returns whether the given identifier or Link is part of this graph.\n             * @param linkOrId An identifier or a Link object.\n             * @returns {*}\n             */\n            hasLink: function (linkOrId) {\n              if (Utils.isString(linkOrId)) {\n                return Utils.any(this.links, function (link) {\n                  return link.id === linkOrId;\n                });\n              }\n\n              if (linkOrId.type === \"Link\") {\n                return contains(this.links, linkOrId);\n              }\n\n              throw \"The given object is neither an identifier nor a Link.\";\n            },\n\n            /**\n             * Gets the node with the specified Id or null if not part of this graph.\n             */\n            getNode: function (nodeOrId) {\n              var id = nodeOrId.id || nodeOrId;\n\n              if (this._nodeMap.containsKey(id)) {\n                return this._nodeMap.get(id);\n              }\n            },\n\n            /**\n             * Returns whether the given node or node Id is part of this graph.\n             */\n            hasNode: function (nodeOrId) {\n              var id = nodeOrId.id || nodeOrId;\n              return this._nodeMap.containsKey(id);\n            },\n            _addNode: function (node) {\n              this.nodes.push(node);\n\n              this._nodeMap.add(node.id, node);\n            },\n            _removeNode: function (node) {\n              Utils.remove(this.nodes, node);\n\n              this._nodeMap.remove(node.id);\n            },\n\n            /**\n             * Removes the given node from this graph.\n             * The node can be specified as an object or as an identifier (string).\n             */\n            removeNode: function (nodeOrId) {\n              var n = nodeOrId;\n\n              if (Utils.isString(nodeOrId)) {\n                n = this.getNode(nodeOrId);\n              }\n\n              if (Utils.isDefined(n)) {\n                var links = n.links;\n                n.links = [];\n\n                for (var i = 0, len = links.length; i < len; i++) {\n                  var link = links[i];\n                  this.removeLink(link);\n                }\n\n                this._removeNode(n);\n              } else {\n                throw \"The identifier should be a Node or the Id (string) of a node.\";\n              }\n            },\n\n            /**\n             * Returns whether the given nodes are connected with a least one link independently of the direction.\n             */\n            areConnected: function (n1, n2) {\n              return Utils.any(this.links, function (link) {\n                return link.source == n1 && link.target == n2 || link.source == n2 && link.target == n1;\n              });\n            },\n\n            /**\n             * Removes the given link from this graph.\n             */\n            removeLink: function (link) {\n              /*    if (!this.links.contains(link)) {\n               throw \"The given link is not part of the Graph.\";\n               }\n               */\n              Utils.remove(this.links, link);\n              Utils.remove(link.source.outgoing, link);\n              Utils.remove(link.source.links, link);\n              Utils.remove(link.target.incoming, link);\n              Utils.remove(link.target.links, link);\n            },\n\n            /**\n             * Adds a new node to this graph, if not already present.\n             * The node can be an existing Node or the identifier of a new node.\n             * No error is thrown if the node is already there and the existing one is returned.\n             */\n            addNode: function (nodeOrId, layoutRect, owner) {\n              var newNode = null;\n\n              if (!Utils.isDefined(nodeOrId)) {\n                throw \"No Node or identifier for a new Node is given.\";\n              }\n\n              if (Utils.isString(nodeOrId)) {\n                if (this.hasNode(nodeOrId)) {\n                  return this.getNode(nodeOrId);\n                }\n\n                newNode = new Node(nodeOrId);\n              } else {\n                if (this.hasNode(nodeOrId)) {\n                  return this.getNode(nodeOrId);\n                } // todo: ensure that the param is a Node?\n\n\n                newNode = nodeOrId;\n              }\n\n              if (Utils.isDefined(layoutRect)) {\n                newNode.bounds(layoutRect);\n              }\n\n              if (Utils.isDefined(owner)) {\n                newNode.owner = owner;\n              }\n\n              this._addNode(newNode);\n\n              return newNode;\n            },\n\n            /**\n             * Adds the given Node and its outgoing links.\n             */\n            addNodeAndOutgoings: function (node) {\n              if (!this.hasNode(node)) {\n                this._addNode(node);\n              }\n\n              var newLinks = node.outgoing;\n              node.outgoing = [];\n              Utils.forEach(newLinks, function (link) {\n                this.addExistingLink(link);\n              }, this);\n            },\n\n            /**\n             * Sets the 'index' property on the links and nodes of this graph.\n             */\n            setItemIndices: function () {\n              var i;\n\n              for (i = 0; i < this.nodes.length; ++i) {\n                this.nodes[i].index = i;\n              }\n\n              for (i = 0; i < this.links.length; ++i) {\n                this.links[i].index = i;\n              }\n            },\n\n            /**\n             * Returns a clone of this graph.\n             */\n            clone: function (saveMapping) {\n              var copy = new Graph();\n              var save = Utils.isDefined(saveMapping) && saveMapping === true;\n\n              if (save) {\n                copy.nodeMap = new Dictionary();\n                copy.linkMap = new Dictionary();\n              } // we need a map even if the saveMapping is not set\n\n\n              var map = new Dictionary();\n              Utils.forEach(this.nodes, function (nOriginal) {\n                var nCopy = nOriginal.clone();\n                map.set(nOriginal, nCopy);\n\n                copy._addNode(nCopy);\n\n                if (save) {\n                  copy.nodeMap.set(nCopy, nOriginal);\n                }\n              });\n              Utils.forEach(this.links, function (linkOriginal) {\n                if (map.containsKey(linkOriginal.source) && map.containsKey(linkOriginal.target)) {\n                  var linkCopy = copy.addLink(map.get(linkOriginal.source), map.get(linkOriginal.target));\n\n                  if (save) {\n                    copy.linkMap.set(linkCopy, linkOriginal);\n                  }\n                }\n              });\n              return copy;\n            },\n\n            /**\n             * The parsing allows a quick way to create graphs.\n             *  - [\"n1->n2\", \"n2->n3\"]: creates the three nodes and adds the links\n             *  - [\"n1->n2\", {id: \"QSDF\"}, \"n2->n3\"]: same as previous but also performs a deep extend of the link between n1 and n2 with the given object.\n             */\n            linearize: function (addIds) {\n              return Graph.Utils.linearize(this, addIds);\n            },\n\n            /**\n             * Performs a depth-first traversal starting at the given node.\n             * @param startNode a node or id of a node in this graph\n             * @param action\n             */\n            depthFirstTraversal: function (startNode, action) {\n              if (Utils.isUndefined(startNode)) {\n                throw \"You need to supply a starting node.\";\n              }\n\n              if (Utils.isUndefined(action)) {\n                throw \"You need to supply an action.\";\n              }\n\n              if (!this.hasNode(startNode)) {\n                throw \"The given start-node is not part of this graph\";\n              }\n\n              var foundNode = this.getNode(startNode); // case the given one is an Id\n\n              var visited = [];\n\n              this._dftIterator(foundNode, action, visited);\n            },\n            _dftIterator: function (node, action, visited) {\n              action(node);\n              visited.push(node);\n              var children = node.getChildren();\n\n              for (var i = 0, len = children.length; i < len; i++) {\n                var child = children[i];\n\n                if (contains(visited, child)) {\n                  continue;\n                }\n\n                this._dftIterator(child, action, visited);\n              }\n            },\n\n            /**\n             * Performs a breadth-first traversal starting at the given node.\n             * @param startNode a node or id of a node in this graph\n             * @param action\n             */\n            breadthFirstTraversal: function (startNode, action) {\n              if (Utils.isUndefined(startNode)) {\n                throw \"You need to supply a starting node.\";\n              }\n\n              if (Utils.isUndefined(action)) {\n                throw \"You need to supply an action.\";\n              }\n\n              if (!this.hasNode(startNode)) {\n                throw \"The given start-node is not part of this graph\";\n              }\n\n              var foundNode = this.getNode(startNode); // case the given one is an Id\n\n              var queue = new Queue();\n              var visited = [];\n              queue.enqueue(foundNode);\n\n              while (queue.length > 0) {\n                var node = queue.dequeue();\n                action(node);\n                visited.push(node);\n                var children = node.getChildren();\n\n                for (var i = 0, len = children.length; i < len; i++) {\n                  var child = children[i];\n\n                  if (contains(visited, child) || contains(queue, child)) {\n                    continue;\n                  }\n\n                  queue.enqueue(child);\n                }\n              }\n            },\n\n            /**\n             * This is the classic Tarjan algorithm for strongly connected components.\n             * See e.g. http://en.wikipedia.org/wiki/Tarjan's_strongly_connected_components_algorithm\n             * @param excludeSingleItems Whether isolated nodes should be excluded from the analysis.\n             * @param node The start node from which the analysis starts.\n             * @param indices  Numbers the nodes consecutively in the order in which they are discovered.\n             * @param lowLinks The smallest index of any node known to be reachable from the node, including the node itself\n             * @param connected The current component.\n             * @param stack The bookkeeping stack of things to visit.\n             * @param index The counter of visited nodes used to assign the indices.\n             * @private\n             */\n            _stronglyConnectedComponents: function (excludeSingleItems, node, indices, lowLinks, connected, stack, index) {\n              indices.add(node, index);\n              lowLinks.add(node, index);\n              index++;\n              stack.push(node);\n              var children = node.getChildren(),\n                  next;\n\n              for (var i = 0, len = children.length; i < len; i++) {\n                next = children[i];\n\n                if (!indices.containsKey(next)) {\n                  this._stronglyConnectedComponents(excludeSingleItems, next, indices, lowLinks, connected, stack, index);\n\n                  lowLinks.add(node, Math.min(lowLinks.get(node), lowLinks.get(next)));\n                } else if (contains(stack, next)) {\n                  lowLinks.add(node, Math.min(lowLinks.get(node), indices.get(next)));\n                }\n              } // If v is a root node, pop the stack and generate a strong component\n\n\n              if (lowLinks.get(node) === indices.get(node)) {\n                var component = [];\n\n                do {\n                  next = stack.pop();\n                  component.push(next);\n                } while (next !== node);\n\n                if (!excludeSingleItems || component.length > 1) {\n                  connected.push(component);\n                }\n              }\n            },\n\n            /**\n             * Returns the cycles found in this graph.\n             * The returned arrays consist of the nodes which are strongly coupled.\n             * @param excludeSingleItems Whether isolated nodes should be excluded.\n             * @returns {Array} The array of cycles found.\n             */\n            findCycles: function (excludeSingleItems) {\n              if (Utils.isUndefined(excludeSingleItems)) {\n                excludeSingleItems = true;\n              }\n\n              var indices = new Dictionary();\n              var lowLinks = new Dictionary();\n              var connected = [];\n              var stack = [];\n\n              for (var i = 0, len = this.nodes.length; i < len; i++) {\n                var node = this.nodes[i];\n\n                if (indices.containsKey(node)) {\n                  continue;\n                }\n\n                this._stronglyConnectedComponents(excludeSingleItems, node, indices, lowLinks, connected, stack, 0);\n              }\n\n              return connected;\n            },\n\n            /**\n             * Returns whether this graph is acyclic.\n             * @returns {*}\n             */\n            isAcyclic: function () {\n              return Utils.isEmpty(this.findCycles());\n            },\n\n            /**\n             * Returns whether the given graph is a subgraph of this one.\n             * @param other Another graph instance.\n             */\n            isSubGraph: function (other) {\n              var otherArray = other.linearize();\n              var thisArray = this.linearize();\n              return Utils.all(otherArray, function (s) {\n                return contains(thisArray, s);\n              });\n            },\n\n            /**\n             *  Makes an acyclic graph from the current (connected) one.\n             * * @returns {Array} The reversed links.\n             */\n            makeAcyclic: function () {\n              // if empty or almost empty\n              if (this.isEmpty() || this.nodes.length <= 1 || this.links.length <= 1) {\n                return [];\n              } // singular case of just two nodes\n\n\n              if (this.nodes.length == 2) {\n                var result = [];\n\n                if (this.links.length > 1) {\n                  var oneLink = this.links[0];\n                  var oneNode = oneLink.source;\n\n                  for (var i = 0, len = this.links.length; i < len; i++) {\n                    var link = this.links[i];\n\n                    if (link.source == oneNode) {\n                      continue;\n                    }\n\n                    var rev = link.reverse();\n                    result.push(rev);\n                  }\n                }\n\n                return result;\n              }\n\n              var copy = this.clone(true); // copy.nodeMap tells you the mapping\n\n              var N = this.nodes.length;\n              var intensityCatalog = new Dictionary();\n              /**\n               * If there are both incoming and outgoing links this will return the flow intensity (out-in).\n               * Otherwise the node acts as a flow source with N specifying the (equal) intensity.\n               * @param node\n               * @returns {number}\n               */\n\n              var flowIntensity = function (node) {\n                if (node.outgoing.length === 0) {\n                  return 2 - N;\n                } else if (node.incoming.length === 0) {\n                  return N - 2;\n                } else {\n                  return node.outgoing.length - node.incoming.length;\n                }\n              };\n              /**\n               * Collects the nodes with the same intensity.\n               * @param node\n               * @param intensityCatalog\n               */\n\n\n              var catalogEqualIntensity = function (node, intensityCatalog) {\n                var intensity = flowIntensity(node, N);\n\n                if (!intensityCatalog.containsKey(intensity)) {\n                  intensityCatalog.set(intensity, []);\n                }\n\n                intensityCatalog.get(intensity).push(node);\n              };\n\n              Utils.forEach(copy.nodes, function (v) {\n                catalogEqualIntensity(v, intensityCatalog);\n              });\n              var sourceStack = [];\n              var targetStack = [];\n\n              while (copy.nodes.length > 0) {\n                var source, target, intensity;\n\n                if (intensityCatalog.containsKey(2 - N)) {\n                  var targets = intensityCatalog.get(2 - N); // nodes without outgoings\n\n                  while (targets.length > 0) {\n                    target = targets.pop();\n\n                    for (var li = 0; li < target.links.length; li++) {\n                      var targetLink = target.links[li];\n                      source = targetLink.getComplement(target);\n                      intensity = flowIntensity(source, N);\n                      Utils.remove(intensityCatalog.get(intensity), source);\n                      source.removeLink(targetLink);\n                      catalogEqualIntensity(source, intensityCatalog);\n                    }\n\n                    copy._removeNode(target);\n\n                    targetStack.unshift(target);\n                  }\n                } // move sources to sourceStack\n\n\n                if (intensityCatalog.containsKey(N - 2)) {\n                  var sources = intensityCatalog.get(N - 2); // nodes without incomings\n\n                  while (sources.length > 0) {\n                    source = sources.pop();\n\n                    for (var si = 0; si < source.links.length; si++) {\n                      var sourceLink = source.links[si];\n                      target = sourceLink.getComplement(source);\n                      intensity = flowIntensity(target, N);\n                      Utils.remove(intensityCatalog.get(intensity), target);\n                      target.removeLink(sourceLink);\n                      catalogEqualIntensity(target, intensityCatalog);\n                    }\n\n                    sourceStack.push(source);\n\n                    copy._removeNode(source);\n                  }\n                }\n\n                if (copy.nodes.length > 0) {\n                  for (var k = N - 3; k > 2 - N; k--) {\n                    if (intensityCatalog.containsKey(k) && intensityCatalog.get(k).length > 0) {\n                      var maxdiff = intensityCatalog.get(k);\n                      var v = maxdiff.pop();\n\n                      for (var ri = 0; ri < v.links.length; ri++) {\n                        var ril = v.links[ri];\n                        var u = ril.getComplement(v);\n                        intensity = flowIntensity(u, N);\n                        Utils.remove(intensityCatalog.get(intensity), u);\n                        u.removeLink(ril);\n                        catalogEqualIntensity(u, intensityCatalog);\n                      }\n\n                      sourceStack.push(v);\n\n                      copy._removeNode(v);\n\n                      break;\n                    }\n                  }\n                }\n              }\n\n              sourceStack = sourceStack.concat(targetStack);\n              var vertexOrder = new Dictionary();\n\n              for (var kk = 0; kk < this.nodes.length; kk++) {\n                vertexOrder.set(copy.nodeMap.get(sourceStack[kk]), kk);\n              }\n\n              var reversedEdges = [];\n              Utils.forEach(this.links, function (link) {\n                if (vertexOrder.get(link.source) > vertexOrder.get(link.target)) {\n                  link.reverse();\n                  reversedEdges.push(link);\n                }\n              });\n              return reversedEdges;\n            }\n          });\n          /**\n           * A collection of predefined graphs for demo and testing purposes.\n           */\n\n          Graph.Predefined = {\n            /**\n             * Eight-shapes graph all connected in a cycle.\n             * @returns {*}\n             * @constructor\n             */\n            EightGraph: function () {\n              return Graph.Utils.parse([\"1->2\", \"2->3\", \"3->4\", \"4->1\", \"3->5\", \"5->6\", \"6->7\", \"7->3\"]);\n            },\n\n            /**\n             * Creates a typical mindmap diagram.\n             * @returns {*}\n             * @constructor\n             */\n            Mindmap: function () {\n              return Graph.Utils.parse([\"0->1\", \"0->2\", \"0->3\", \"0->4\", \"0->5\", \"1->6\", \"1->7\", \"7->8\", \"2->9\", \"9->10\", \"9->11\", \"3->12\", \"12->13\", \"13->14\", \"4->15\", \"4->16\", \"15->17\", \"15->18\", \"18->19\", \"18->20\", \"14->21\", \"14->22\", \"5->23\", \"23->24\", \"23->25\", \"6->26\"]);\n            },\n\n            /**\n             * Three nodes connected in a cycle.\n             * @returns {*}\n             * @constructor\n             */\n            ThreeGraph: function () {\n              return Graph.Utils.parse([\"1->2\", \"2->3\", \"3->1\"]);\n            },\n\n            /**\n             * A tree with each node having two children.\n             * @param levels How many levels the binary tree should have.\n             * @returns {diagram.Graph}\n             * @constructor\n             */\n            BinaryTree: function (levels) {\n              if (Utils.isUndefined(levels)) {\n                levels = 5;\n              }\n\n              return Graph.Utils.createBalancedTree(levels, 2);\n            },\n\n            /**\n             * A linear graph (discrete line segment).\n             * @param length How many segments (the node count is hence (length+1)).\n             * @returns {diagram.Graph}\n             * @constructor\n             */\n            Linear: function (length) {\n              if (Utils.isUndefined(length)) {\n                length = 10;\n              }\n\n              return Graph.Utils.createBalancedTree(length, 1);\n            },\n\n            /**\n             * A standard tree-graph with the specified levels and children (siblings) count.\n             * Note that for a balanced tree of level N and sibling count s, counting the root as level zero:\n             *  - NodeCount = (1-s^(N+1))/(1-s)]\n             *  - LinkCount = s.(1-s^N)/(1-s)\n             * @param levels How many levels the tree should have.\n             * @param siblingsCount How many siblings each level should have.\n             * @returns {diagram.Graph}\n             * @constructor\n             */\n            Tree: function (levels, siblingsCount) {\n              return Graph.Utils.createBalancedTree(levels, siblingsCount);\n            },\n\n            /**\n             * Creates a forest.\n             * Note that for a balanced forest of level N, sibling count s and tree count t, counting the root as level zero:\n             *  - NodeCount = t.(1-s^(N+1))/(1-s)]\n             *  - LinkCount = t.s.(1-s^N)/(1-s)\n             * @param levels How many levels the tree should have.\n             * @param siblingsCount How many siblings each level should have.\n             * @param trees The amount of trees the forest should have.\n             * @returns {diagram.Graph}\n             * @constructor\n             */\n            Forest: function (levels, siblingsCount, trees) {\n              return Graph.Utils.createBalancedForest(levels, siblingsCount, trees);\n            },\n\n            /**\n             * A workflow-like graph with cycles.\n             * @returns {*}\n             * @constructor\n             */\n            Workflow: function () {\n              return Graph.Utils.parse([\"0->1\", \"1->2\", \"2->3\", \"1->4\", \"4->3\", \"3->5\", \"5->6\", \"6->3\", \"6->7\", \"5->4\"]);\n            },\n\n            /**\n             * A grid graph with the direction of the links avoiding cycles.\n             * Node count: (n+1).(m+1)\n             * Link count: n.(m+1) + m.(n+1)\n             * @param n Horizontal count of grid cells. If zero this will result in a linear graph.\n             * @param m Vertical count of grid cells. If zero this will result in a linear graph.\n             * @constructor\n             */\n            Grid: function (n, m) {\n              var g = new diagram.Graph();\n\n              if (n <= 0 && m <= 0) {\n                return g;\n              }\n\n              for (var i = 0; i < n + 1; i++) {\n                var previous = null;\n\n                for (var j = 0; j < m + 1; j++) {\n                  // using x-y coordinates to name the nodes\n                  var node = new Node(i.toString() + \".\" + j.toString());\n                  g.addNode(node);\n\n                  if (previous) {\n                    g.addLink(previous, node);\n                  }\n\n                  if (i > 0) {\n                    var left = g.getNode((i - 1).toString() + \".\" + j.toString());\n                    g.addLink(left, node);\n                  }\n\n                  previous = node;\n                }\n              }\n\n              return g;\n            }\n          };\n          /**\n           * Graph generation and other utilities.\n           */\n\n          Graph.Utils = {\n            /**\n             * The parsing allows a quick way to create graphs.\n             *  - [\"n1->n2\", \"n2->n3\"]: creates the three nodes and adds the links\n             *  - [\"n1->n2\", {id: \"id177\"}, \"n2->n3\"]: same as previous but also performs a deep extend of the link between n1 and n2 with the given object.\n             */\n            parse: function (graphString) {\n              var previousLink,\n                  graph = new diagram.Graph(),\n                  parts = graphString.slice();\n\n              for (var i = 0, len = parts.length; i < len; i++) {\n                var part = parts[i];\n\n                if (Utils.isString(part)) // link spec\n                  {\n                    if (part.indexOf(\"->\") < 0) {\n                      throw \"The link should be specified as 'a->b'.\";\n                    }\n\n                    var p = part.split(\"->\");\n\n                    if (p.length != 2) {\n                      throw \"The link should be specified as 'a->b'.\";\n                    }\n\n                    previousLink = new Link(p[0], p[1]);\n                    graph.addLink(previousLink);\n                  }\n\n                if (Utils.isObject(part)) {\n                  if (!previousLink) {\n                    throw \"Specification found before Link definition.\";\n                  }\n\n                  kendo.deepExtend(previousLink, part);\n                }\n              }\n\n              return graph;\n            },\n\n            /**\n             * Returns a linearized representation of the given Graph.\n             * See also the Graph.Utils.parse method for the inverse operation.\n             */\n            linearize: function (graph, addIds) {\n              if (Utils.isUndefined(graph)) {\n                throw \"Expected an instance of a Graph object in slot one.\";\n              }\n\n              if (Utils.isUndefined(addIds)) {\n                addIds = false;\n              }\n\n              var lin = [];\n\n              for (var i = 0, len = graph.links.length; i < len; i++) {\n                var link = graph.links[i];\n                lin.push(link.source.id + \"->\" + link.target.id);\n\n                if (addIds) {\n                  lin.push({\n                    id: link.id\n                  });\n                }\n              }\n\n              return lin;\n            },\n\n            /**\n             * The method used by the diagram creation to instantiate a shape.\n             * @param kendoDiagram The Kendo diagram where the diagram will be created.\n             * @param p The position at which to place the shape.\n             * @param shapeDefaults Optional Shape options.\n             * @param id Optional identifier of the shape.\n             * @returns {*}\n             * @private\n             */\n            _addShape: function (kendoDiagram, p, id, shapeDefaults) {\n              if (Utils.isUndefined(p)) {\n                p = new diagram.Point(0, 0);\n              }\n\n              if (Utils.isUndefined(id)) {\n                id = randomId();\n              }\n\n              shapeDefaults = kendo.deepExtend({\n                width: 20,\n                height: 20,\n                id: id,\n                radius: 10,\n                fill: \"#778899\",\n                data: \"circle\",\n                undoable: false,\n                x: p.x,\n                y: p.y\n              }, shapeDefaults);\n              return kendoDiagram.addShape(shapeDefaults);\n            },\n\n            /**\n             * The method used by the diagram creation to instantiate a connection.\n             * @param diagram he Kendo diagram where the diagram will be created.\n             * @param from The source shape.\n             * @param to The target shape.\n             * @param options Optional Connection options.\n             * @returns {*}\n             * @private\n             */\n            _addConnection: function (diagram, from, to, options) {\n              return diagram.connect(from, to, options);\n            },\n\n            /**\n             * Creates a diagram from the given Graph.\n             * @param diagram The Kendo diagram where the diagram will be created.\n             * @param graph The graph structure defining the diagram.\n             */\n            createDiagramFromGraph: function (diagram, graph, doLayout, randomSize) {\n              if (Utils.isUndefined(diagram)) {\n                throw \"The diagram surface is undefined.\";\n              }\n\n              if (Utils.isUndefined(graph)) {\n                throw \"No graph specification defined.\";\n              }\n\n              if (Utils.isUndefined(doLayout)) {\n                doLayout = true;\n              }\n\n              if (Utils.isUndefined(randomSize)) {\n                randomSize = false;\n              }\n\n              var width = diagram.element.clientWidth || 200;\n              var height = diagram.element.clientHeight || 200;\n              var map = [],\n                  node,\n                  shape;\n\n              for (var i = 0, len = graph.nodes.length; i < len; i++) {\n                node = graph.nodes[i];\n                var p = node.position;\n\n                if (Utils.isUndefined(p)) {\n                  if (Utils.isDefined(node.x) && Utils.isDefined(node.y)) {\n                    p = new Point(node.x, node.y);\n                  } else {\n                    p = new Point(Utils.randomInteger(10, width - 20), Utils.randomInteger(10, height - 20));\n                  }\n                }\n\n                var opt = {};\n\n                if (node.id === \"0\") {\n                  /* kendo.deepExtend(opt,\n                   {\n                   fill: \"Orange\",\n                   data: 'circle',\n                   width: 100,\n                   height: 100,\n                   center: new Point(50, 50)\n                   });*/\n                } else if (randomSize) {\n                  kendo.deepExtend(opt, {\n                    width: Math.random() * 150 + 20,\n                    height: Math.random() * 80 + 50,\n                    data: 'rectangle',\n                    fill: {\n                      color: \"#778899\"\n                    }\n                  });\n                }\n\n                shape = this._addShape(diagram, p, node.id, opt); //shape.content(node.id);\n\n                var bounds = shape.bounds();\n\n                if (Utils.isDefined(bounds)) {\n                  node.x = bounds.x;\n                  node.y = bounds.y;\n                  node.width = bounds.width;\n                  node.height = bounds.height;\n                }\n\n                map[node.id] = shape;\n              }\n\n              for (var gli = 0; gli < graph.links.length; gli++) {\n                var link = graph.links[gli];\n                var sourceShape = map[link.source.id];\n\n                if (Utils.isUndefined(sourceShape)) {\n                  continue;\n                }\n\n                var targetShape = map[link.target.id];\n\n                if (Utils.isUndefined(targetShape)) {\n                  continue;\n                }\n\n                this._addConnection(diagram, sourceShape, targetShape, {\n                  id: link.id\n                });\n              }\n\n              if (doLayout) {\n                var l = new diagram.SpringLayout(diagram);\n                l.layoutGraph(graph, {\n                  limitToView: false\n                });\n\n                for (var shi = 0; shi < graph.nodes.length; shi++) {\n                  node = graph.nodes[shi];\n                  shape = map[node.id];\n                  shape.bounds(new Rect(node.x, node.y, node.width, node.height));\n                }\n              }\n            },\n\n            /**\n             * Creates a balanced tree with the specified number of levels and siblings count.\n             * Note that for a balanced tree of level N and sibling count s, counting the root as level zero:\n             *  - NodeCount = (1-s^(N+1))/(1-s)]\n             *  - LinkCount = s.(1-s^N)/(1-s)\n             * @param levels How many levels the tree should have.\n             * @param siblingsCount How many siblings each level should have.\n             * @returns {diagram.Graph}\n             */\n            createBalancedTree: function (levels, siblingsCount) {\n              if (Utils.isUndefined(levels)) {\n                levels = 3;\n              }\n\n              if (Utils.isUndefined(siblingsCount)) {\n                siblingsCount = 3;\n              }\n\n              var g = new diagram.Graph(),\n                  counter = -1,\n                  lastAdded = [],\n                  news;\n\n              if (levels <= 0 || siblingsCount <= 0) {\n                return g;\n              }\n\n              var root = new Node((++counter).toString());\n              g.addNode(root);\n              g.root = root;\n              lastAdded.push(root);\n\n              for (var i = 0; i < levels; i++) {\n                news = [];\n\n                for (var j = 0; j < lastAdded.length; j++) {\n                  var parent = lastAdded[j];\n\n                  for (var k = 0; k < siblingsCount; k++) {\n                    var item = new Node((++counter).toString());\n                    g.addLink(parent, item);\n                    news.push(item);\n                  }\n                }\n\n                lastAdded = news;\n              }\n\n              return g;\n            },\n\n            /**\n             * Creates a balanced tree with the specified number of levels and siblings count.\n             * Note that for a balanced forest of level N, sibling count s and tree count t, counting the root as level zero:\n             *  - NodeCount = t.(1-s^(N+1))/(1-s)]\n             *  - LinkCount = t.s.(1-s^N)/(1-s)\n             * @param levels How many levels the tree should have.\n             * @param siblingsCount How many siblings each level should have.\n             * @returns {diagram.Graph}\n             * @param treeCount The number of trees the forest should have.\n             */\n            createBalancedForest: function (levels, siblingsCount, treeCount) {\n              if (Utils.isUndefined(levels)) {\n                levels = 3;\n              }\n\n              if (Utils.isUndefined(siblingsCount)) {\n                siblingsCount = 3;\n              }\n\n              if (Utils.isUndefined(treeCount)) {\n                treeCount = 5;\n              }\n\n              var g = new diagram.Graph(),\n                  counter = -1,\n                  lastAdded = [],\n                  news;\n\n              if (levels <= 0 || siblingsCount <= 0 || treeCount <= 0) {\n                return g;\n              }\n\n              for (var t = 0; t < treeCount; t++) {\n                var root = new Node((++counter).toString());\n                g.addNode(root);\n                lastAdded = [root];\n\n                for (var i = 0; i < levels; i++) {\n                  news = [];\n\n                  for (var j = 0; j < lastAdded.length; j++) {\n                    var parent = lastAdded[j];\n\n                    for (var k = 0; k < siblingsCount; k++) {\n                      var item = new Node((++counter).toString());\n                      g.addLink(parent, item);\n                      news.push(item);\n                    }\n                  }\n\n                  lastAdded = news;\n                }\n              }\n\n              return g;\n            },\n\n            /**\n             * Creates a random graph (uniform distribution) with the specified amount of nodes.\n             * @param nodeCount The amount of nodes the random graph should have.\n             * @param maxIncidence The maximum allowed degree of the nodes.\n             * @param isTree Whether the return graph should be a tree (default: false).\n             * @returns {diagram.Graph}\n             */\n            createRandomConnectedGraph: function (nodeCount, maxIncidence, isTree) {\n              /* Swa's Mathematica export of random Bernoulli graphs\n               gr[n_,p_]:=Module[{g=RandomGraph[BernoulliGraphDistribution[n,p],VertexLabels->\"Name\",DirectedEdges->True]},\n               While[Not[ConnectedGraphQ[g]],g=RandomGraph[BernoulliGraphDistribution[n,p],VertexLabels->\"Name\",DirectedEdges->True]];g];\n               project[a_]:=(\"\\\"\"<>ToString[Part[#,1]]<>\"->\"<>ToString[Part[#,2]]<>\"\\\"\")&     @ a;\n               export[g_]:=project/@ EdgeList[g]\n               g = gr[12,.1]\n               export [g]\n               */\n              if (Utils.isUndefined(nodeCount)) {\n                nodeCount = 40;\n              }\n\n              if (Utils.isUndefined(maxIncidence)) {\n                maxIncidence = 4;\n              }\n\n              if (Utils.isUndefined(isTree)) {\n                isTree = false;\n              }\n\n              var g = new diagram.Graph(),\n                  counter = -1;\n\n              if (nodeCount <= 0) {\n                return g;\n              }\n\n              var root = new Node((++counter).toString());\n              g.addNode(root);\n\n              if (nodeCount === 1) {\n                return g;\n              }\n\n              if (nodeCount > 1) {\n                // random tree\n                for (var i = 1; i < nodeCount; i++) {\n                  var poolNode = g.takeRandomNode([], maxIncidence);\n\n                  if (!poolNode) {\n                    //failed to find one so the graph will have less nodes than specified\n                    break;\n                  }\n\n                  var newNode = g.addNode(i.toString());\n                  g.addLink(poolNode, newNode);\n                }\n\n                if (!isTree && nodeCount > 1) {\n                  var randomAdditions = Utils.randomInteger(1, nodeCount);\n\n                  for (var ri = 0; ri < randomAdditions; ri++) {\n                    var n1 = g.takeRandomNode([], maxIncidence);\n                    var n2 = g.takeRandomNode([], maxIncidence);\n\n                    if (n1 && n2 && !g.areConnected(n1, n2)) {\n                      g.addLink(n1, n2);\n                    }\n                  }\n                }\n\n                return g;\n              }\n            },\n\n            /**\n             * Generates a random diagram.\n             * @param diagram The host diagram.\n             * @param shapeCount The number of shapes the random diagram should contain.\n             * @param maxIncidence The maximum degree the shapes can have.\n             * @param isTree Whether the generated diagram should be a tree\n             * @param layoutType The optional layout type to apply after the diagram is generated.\n             */\n            randomDiagram: function (diagram, shapeCount, maxIncidence, isTree, randomSize) {\n              var g = kendo.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(shapeCount, maxIncidence, isTree);\n              Graph.Utils.createDiagramFromGraph(diagram, g, false, randomSize);\n            }\n          };\n          kendo.deepExtend(diagram, {\n            init: function (element) {\n              kendo.init(element, diagram.ui);\n            },\n            Point: Point,\n            Intersect: Intersect,\n            Geometry: Geometry,\n            Rect: Rect,\n            Size: Size,\n            RectAlign: RectAlign,\n            Matrix: Matrix,\n            MatrixVector: MatrixVector,\n            normalVariable: normalVariable,\n            randomId: randomId,\n            Dictionary: Dictionary,\n            HashTable: HashTable,\n            Queue: Queue,\n            Set: Set,\n            Node: Node,\n            Link: Link,\n            Graph: Graph,\n            PathDefiner: PathDefiner\n          });\n        })(window.kendo.jQuery);\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    32549:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"../../kendo.dataviz.core\");\n      /***/\n    },\n\n    /***/\n    12273:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./utils\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(70834);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","$","kendo","window","diagram","dataviz","Class","deepExtend","Utils","Point","Point2D","isFunction","contains","map","HITTESTAREA","EPSILON","fn","plus","p","x","y","minus","offset","value","times","s","normalize","length","Math","sqrt","toString","lengthSquared","middleOf","MiddleOf","q","toPolar","useDegrees","factor","PI","a","atan2","abs","halfpi","len","Polar","isOnLine","from","to","temp","r1","Rect","inflate","r2","o1","u1","union","height","width","parse","str","tempStr","slice","xy","split","parseInt","isNaN","PathDefiner","extend","init","left","right","point","dx","dy","r","x1","min","y1","x2","max","y2","center","top","bottom","topLeft","topRight","bottomLeft","bottomRight","clone","isEmpty","equals","rect","rotatedBounds","angle","points","rotatedPoints","tl","tr","br","bl","c","rotate","delimiter","scale","scaleX","scaleY","staicPoint","adornerCenter","thisCenter","delta","scaled","position","zoom","overlaps","rectBottomRight","Size","prototype","Empty","toRect","empty","fromPoints","isNearZero","num","intersectLine","start1","end1","start2","end2","isSegment","tangensdiff","num1","num2","Intersect","lines","segments","rectWithLine","start","end","rects","rect1","rect2","intersect","reverseAngle","RectAlign","container","align","content","alignment","alignValues","toLowerCase","i","_singleAlign","_align","_left","_center","_right","stretch","_stretch","_top","middle","_middle","_bottom","alignCalc","Matrix","b","d","e","m","applyRect","fromSVGMatrix","vm","fromMatrixVector","v","fromList","translation","unit","rotation","cos","sin","scaling","parts","nums","trim","parseFloat","substr","indexOf","MatrixVector","fromMatrix","FromMatrix","normalVariable","mean","deviation","random","log","randomId","isUndefined","result","chars","charAt","round","Geometry","_distanceToLineSquared","d2","pt1","pt2","vx","vy","dot","distanceToLine","distanceToPolyline","minimum","Number","MAX_VALUE","p1","p2","HashTable","_buckets","add","key","obj","_createGetBucket","isDefined","get","_bucketExists","set","containsKey","remove","hashId","_hash","forEach","func","hashes","_hashes","hash","bucket","ht","hasOwnProperty","push","isNumber","isString","_hashString","isObject","_objectHashId","ch","charCodeAt","id","_hashId","Dictionary","Observable","dictionary","that","call","_hashTable","Array","isArray","k","entry","trigger","Error","thisRef","forEachValue","forEachKey","keys","Queue","_tail","_head","enqueue","next","dequeue","item","current","Set","resource","context","kv","toArray","Node","shape","links","outgoing","incoming","weight","associatedShape","bounds","data","type","shortForm","isVirtual","isIsolated","isLinkedTo","node","any","link","getComplement","getChildren","children","getParents","parents","copy","balance","owner","adjacentTo","removeLink","source","target","hasLinkTo","degree","incidentWith","getLinksWith","all","getNeighbors","neighbors","Link","connection","sourceFound","targetFound","associatedConnection","getCommonNode","isBridging","v1","v2","getNodes","changeSource","changeTarget","changesNodes","w","reverse","oldSource","oldTarget","directTo","createReverseEdge","reversed","Graph","idOrDiagram","nodes","_nodeMap","_root","_hasCachedRelationships","cacheRelationships","forceRebuild","assignLevels","startNode","visited","n","level","child","root","found","first","getConnectedComponents","componentIndex","setItemIndices","componentId","initArray","_collectConnectedNodes","components","graph","addNodeAndOutgoings","sort","setIds","nodeIndex","nextId","index","calcBounds","getSpanningTree","tree","remaining","_addNode","levelCount","pop","ni","cn","newLink","addLink","treeLevels","takeRandomNode","excludedNodes","incidenceLessThan","pool","grep","randomInteger","isHealthy","hasNode","sourceOrLink","addExistingLink","foundSource","getNode","addNode","foundTarget","removeAllLinks","hasLink","t","linkOrId","nodeOrId","_removeNode","removeNode","areConnected","n1","n2","layoutRect","newNode","newLinks","saveMapping","save","nodeMap","linkMap","nOriginal","nCopy","linkOriginal","linkCopy","linearize","addIds","depthFirstTraversal","action","foundNode","_dftIterator","breadthFirstTraversal","queue","_stronglyConnectedComponents","excludeSingleItems","indices","lowLinks","connected","stack","component","findCycles","isAcyclic","isSubGraph","other","otherArray","thisArray","makeAcyclic","oneLink","oneNode","rev","N","intensityCatalog","flowIntensity","catalogEqualIntensity","intensity","sourceStack","targetStack","targets","li","targetLink","unshift","sources","si","sourceLink","maxdiff","ri","ril","u","concat","vertexOrder","kk","reversedEdges","Predefined","EightGraph","Mindmap","ThreeGraph","BinaryTree","levels","createBalancedTree","Linear","Tree","siblingsCount","Forest","trees","createBalancedForest","Workflow","Grid","g","previous","j","graphString","previousLink","part","lin","_addShape","kendoDiagram","shapeDefaults","radius","fill","undoable","addShape","_addConnection","options","connect","createDiagramFromGraph","doLayout","randomSize","element","clientWidth","clientHeight","opt","color","gli","sourceShape","targetShape","l","SpringLayout","layoutGraph","limitToView","shi","counter","lastAdded","news","parent","treeCount","createRandomConnectedGraph","nodeCount","maxIncidence","isTree","poolNode","randomAdditions","randomDiagram","shapeCount","ui","jQuery","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/vuejs/app-router/node_modules/@progress/kendo-ui/js/dataviz/diagram/math.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 70834:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(12273), __webpack_require__(32549) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\n(function($, undefined) {\n    // Imports ================================================================\n    var kendo = window.kendo,\n        diagram = kendo.dataviz.diagram,\n        Class = kendo.Class,\n        deepExtend = kendo.deepExtend,\n        dataviz = kendo.dataviz,\n        Utils = diagram.Utils,\n        Point = dataviz.Point2D,\n        isFunction = kendo.isFunction,\n        contains = Utils.contains,\n        map = $.map;\n\n    // Constants ==============================================================\n    var HITTESTAREA = 3,\n        EPSILON = 1e-06;\n\n    deepExtend(Point.fn, {\n        plus: function(p) {\n            return new Point(this.x + p.x, this.y + p.y);\n        },\n        minus: function(p) {\n            return new Point(this.x - p.x, this.y - p.y);\n        },\n        offset: function(value) {\n            return new Point(this.x - value, this.y - value);\n        },\n        times: function(s) {\n            return new Point(this.x * s, this.y * s);\n        },\n        normalize: function() {\n            if (this.length() === 0) {\n                return new Point();\n            }\n            return this.times(1 / this.length());\n        },\n        length: function() {\n            return Math.sqrt(this.x * this.x + this.y * this.y);\n        },\n        toString: function() {\n            return \"(\" + this.x + \",\" + this.y + \")\";\n        },\n        lengthSquared: function() {\n            return (this.x * this.x + this.y * this.y);\n        },\n        middleOf: function MiddleOf(p, q) {\n            return new Point(q.x - p.x, q.y - p.y).times(0.5).plus(p);\n        },\n        toPolar: function(useDegrees) {\n            var factor = 1;\n            if (useDegrees) {\n                factor = 180 / Math.PI;\n            }\n            var a = Math.atan2(Math.abs(this.y), Math.abs(this.x));\n            var halfpi = Math.PI / 2;\n            var len = this.length();\n            if (this.x === 0) {\n                // note that the angle goes down and not the usual mathematical convention\n\n                if (this.y === 0) {\n                    return new Polar(0, 0);\n                }\n                if (this.y > 0) {\n                    return new Polar(len, factor * halfpi);\n                }\n                if (this.y < 0) {\n                    return new Polar(len, factor * 3 * halfpi);\n                }\n            }\n            else if (this.x > 0) {\n                if (this.y === 0) {\n                    return new Polar(len, 0);\n                }\n                if (this.y > 0) {\n                    return new Polar(len, factor * a);\n                }\n                if (this.y < 0) {\n                    return new Polar(len, factor * (4 * halfpi - a));\n                }\n            }\n            else {\n                if (this.y === 0) {\n                    return new Polar(len, 2 * halfpi);\n                }\n                if (this.y > 0) {\n                    return new Polar(len, factor * (2 * halfpi - a));\n                }\n                if (this.y < 0) {\n                    return new Polar(len, factor * (2 * halfpi + a));\n                }\n            }\n        },\n        isOnLine: function(from, to) {\n            if (from.x > to.x) { // from must be the leftmost point\n                var temp = to;\n                to = from;\n                from = temp;\n            }\n            var r1 = new Rect(from.x, from.y).inflate(HITTESTAREA, HITTESTAREA),\n                r2 = new Rect(to.x, to.y).inflate(HITTESTAREA, HITTESTAREA), o1, u1;\n            if (r1.union(r2).contains(this)) {\n                if (from.x === to.x || from.y === to.y) {\n                    return true;\n                }\n                else if (from.y < to.y) {\n                    o1 = r1.x + (((r2.x - r1.x) * (this.y - (r1.y + r1.height))) / ((r2.y + r2.height) - (r1.y + r1.height)));\n                    u1 = (r1.x + r1.width) + ((((r2.x + r2.width) - (r1.x + r1.width)) * (this.y - r1.y)) / (r2.y - r1.y));\n                }\n                else {\n                    o1 = r1.x + (((r2.x - r1.x) * (this.y - r1.y)) / (r2.y - r1.y));\n                    u1 = (r1.x + r1.width) + ((((r2.x + r2.width) - (r1.x + r1.width)) * (this.y - (r1.y + r1.height))) / ((r2.y + r2.height) - (r1.y + r1.height)));\n                }\n                return (this.x > o1 && this.x < u1);\n            }\n            return false;\n        }\n    });\n\n    deepExtend(Point, {\n        parse: function(str) {\n            var tempStr = str.slice(1, str.length - 1),\n                xy = tempStr.split(\",\"),\n                x = parseInt(xy[0], 10),\n                y = parseInt(xy[1], 10);\n            if (!isNaN(x) && !isNaN(y)) {\n                return new Point(x, y);\n            }\n        }\n    });\n\n    /**\n     * Structure combining a Point with two additional points representing the handles or tangents attached to the first point.\n     * If the additional points are null or equal to the first point the path will be sharp.\n     * Left and right correspond to the direction of the underlying path.\n     */\n    var PathDefiner = Class.extend(\n        {\n            init: function(p, left, right) {\n                this.point = p;\n                this.left = left;\n                this.right = right;\n            }\n        }\n    );\n\n    /**\n     * Defines a rectangular region.\n     */\n    var Rect = Class.extend({\n        init: function(x, y, width, height) {\n            this.x = x || 0;\n            this.y = y || 0;\n            this.width = width || 0;\n            this.height = height || 0;\n        },\n        contains: function(point) {\n            return ((point.x >= this.x) && (point.x <= (this.x + this.width)) && (point.y >= this.y) && (point.y <= (this.y + this.height)));\n        },\n        inflate: function(dx, dy) {\n            if (dy === undefined) {\n                dy = dx;\n            }\n\n            this.x -= dx;\n            this.y -= dy;\n            this.width += 2 * dx + 1;\n            this.height += 2 * dy + 1;\n            return this;\n        },\n        offset: function(dx, dy) {\n            var x = dx, y = dy;\n            if (dx instanceof Point) {\n                x = dx.x;\n                y = dx.y;\n            }\n            this.x += x;\n            this.y += y;\n            return this;\n        },\n        union: function(r) {\n            var x1 = Math.min(this.x, r.x);\n            var y1 = Math.min(this.y, r.y);\n            var x2 = Math.max((this.x + this.width), (r.x + r.width));\n            var y2 = Math.max((this.y + this.height), (r.y + r.height));\n            return new Rect(x1, y1, x2 - x1, y2 - y1);\n        },\n        center: function() {\n            return new Point(this.x + this.width / 2, this.y + this.height / 2);\n        },\n        top: function() {\n            return new Point(this.x + this.width / 2, this.y);\n        },\n        right: function() {\n            return new Point(this.x + this.width, this.y + this.height / 2);\n        },\n        bottom: function() {\n            return new Point(this.x + this.width / 2, this.y + this.height);\n        },\n        left: function() {\n            return new Point(this.x, this.y + this.height / 2);\n        },\n        topLeft: function() {\n            return new Point(this.x, this.y);\n        },\n        topRight: function() {\n            return new Point(this.x + this.width, this.y);\n        },\n        bottomLeft: function() {\n            return new Point(this.x, this.y + this.height);\n        },\n        bottomRight: function() {\n            return new Point(this.x + this.width, this.y + this.height);\n        },\n        clone: function() {\n            return new Rect(this.x, this.y, this.width, this.height);\n        },\n        isEmpty: function() {\n            return !this.width && !this.height;\n        },\n        equals: function(rect) {\n            return this.x === rect.x && this.y === rect.y && this.width === rect.width && this.height === rect.height;\n        },\n        rotatedBounds: function(angle) {\n            var rect = this.clone(),\n                points = this.rotatedPoints(angle),\n                tl = points[0],\n                tr = points[1],\n                br = points[2],\n                bl = points[3];\n\n            rect.x = Math.min(br.x, tl.x, tr.x, bl.x);\n            rect.y = Math.min(br.y, tl.y, tr.y, bl.y);\n            rect.width = Math.max(br.x, tl.x, tr.x, bl.x) - rect.x;\n            rect.height = Math.max(br.y, tl.y, tr.y, bl.y) - rect.y;\n\n            return rect;\n        },\n        rotatedPoints: function(angle) {\n            var rect = this,\n                c = rect.center(),\n                br = rect.bottomRight().rotate(c, 360 - angle),\n                tl = rect.topLeft().rotate(c, 360 - angle),\n                tr = rect.topRight().rotate(c, 360 - angle),\n                bl = rect.bottomLeft().rotate(c, 360 - angle);\n\n            return [tl, tr, br, bl];\n        },\n        toString: function(delimiter) {\n            delimiter = delimiter || \" \";\n\n            return this.x + delimiter + this.y + delimiter + this.width + delimiter + this.height;\n        },\n        scale: function(scaleX, scaleY, staicPoint, adornerCenter, angle) {\n            var tl = this.topLeft();\n            var thisCenter = this.center();\n            tl.rotate(thisCenter, 360 - angle).rotate(adornerCenter, angle);\n\n            var delta = staicPoint.minus(tl);\n            var scaled = new Point(delta.x * scaleX, delta.y * scaleY);\n            var position = delta.minus(scaled);\n            tl = tl.plus(position);\n            tl.rotate(adornerCenter, 360 - angle).rotate(thisCenter, angle);\n\n            this.x = tl.x;\n            this.y = tl.y;\n\n            this.width *= scaleX;\n            this.height *= scaleY;\n        },\n\n        zoom: function(zoom) {\n            this.x *= zoom;\n            this.y *= zoom;\n            this.width *= zoom;\n            this.height *= zoom;\n            return this;\n        },\n\n        overlaps: function(rect) {\n            var bottomRight = this.bottomRight();\n            var rectBottomRight = rect.bottomRight();\n            var overlaps = !(bottomRight.x < rect.x || bottomRight.y < rect.y ||\n                rectBottomRight.x < this.x || rectBottomRight.y < this.y);\n            return overlaps;\n        }\n    });\n\n    var Size = Class.extend({\n        init: function(width, height) {\n            this.width = width;\n            this.height = height;\n        }\n    });\n\n    Size.prototype.Empty = new Size(0, 0);\n\n    Rect.toRect = function(rect) {\n        if (!(rect instanceof Rect)) {\n            rect = new Rect(rect.x, rect.y, rect.width, rect.height);\n        }\n\n        return rect;\n    };\n\n    Rect.empty = function() {\n        return new Rect(0, 0, 0, 0);\n    };\n\n    Rect.fromPoints = function(p, q) {\n        if (isNaN(p.x) || isNaN(p.y) || isNaN(q.x) || isNaN(q.y)) {\n            throw \"Some values are NaN.\";\n        }\n        return new Rect(Math.min(p.x, q.x), Math.min(p.y, q.y), Math.abs(p.x - q.x), Math.abs(p.y - q.y));\n    };\n\n    function isNearZero(num) {\n        return Math.abs(num) < EPSILON;\n    }\n\n    function intersectLine(start1, end1, start2, end2, isSegment) {\n        var tangensdiff = ((end1.x - start1.x) * (end2.y - start2.y)) - ((end1.y - start1.y) * (end2.x - start2.x));\n        if (isNearZero(tangensdiff)) {\n            //parallel lines\n            return;\n        }\n\n        var num1 = ((start1.y - start2.y) * (end2.x - start2.x)) - ((start1.x - start2.x) * (end2.y - start2.y));\n        var num2 = ((start1.y - start2.y) * (end1.x - start1.x)) - ((start1.x - start2.x) * (end1.y - start1.y));\n        var r = num1 / tangensdiff;\n        var s = num2 / tangensdiff;\n\n        if (isSegment && (r < 0 || r > 1 || s < 0 || s > 1)) {\n            //r < 0 => line 1 is below line 2\n            //r > 1 => line 1 is above line 2\n            //s < 0 => line 2 is below line 1\n            //s > 1 => line 2 is above line 1\n            return;\n        }\n\n        return new Point(start1.x + (r * (end1.x - start1.x)), start1.y + (r * (end1.y - start1.y)));\n    }\n\n    var Intersect = {\n        lines: function(start1, end1, start2, end2) {\n            return intersectLine(start1, end1, start2, end2);\n        },\n        segments: function(start1, end1, start2, end2) {\n            return intersectLine(start1, end1, start2, end2, true);\n        },\n        rectWithLine: function(rect, start, end) {\n            return Intersect.segments(start, end, rect.topLeft(), rect.topRight()) ||\n                Intersect.segments(start, end, rect.topRight(), rect.bottomRight()) ||\n                Intersect.segments(start, end, rect.bottomLeft(), rect.bottomRight()) ||\n                Intersect.segments(start, end, rect.topLeft(), rect.bottomLeft());\n        },\n        rects: function(rect1, rect2, angle) {\n            var tl = rect2.topLeft(),\n                tr = rect2.topRight(),\n                bl = rect2.bottomLeft(),\n                br = rect2.bottomRight();\n            var center = rect2.center();\n            if (angle) {\n                tl = tl.rotate(center, angle);\n                tr = tr.rotate(center, angle);\n                bl = bl.rotate(center, angle);\n                br = br.rotate(center, angle);\n            }\n\n            var intersect = rect1.contains(tl) ||\n                rect1.contains(tr) ||\n                rect1.contains(bl) ||\n                rect1.contains(br) ||\n                Intersect.rectWithLine(rect1, tl, tr) ||\n                Intersect.rectWithLine(rect1, tl, bl) ||\n                Intersect.rectWithLine(rect1, tr, br) ||\n                Intersect.rectWithLine(rect1, bl, br);\n\n            if (!intersect) {//last possible case is rect1 to be completely within rect2\n                tl = rect1.topLeft();\n                tr = rect1.topRight();\n                bl = rect1.bottomLeft();\n                br = rect1.bottomRight();\n\n                if (angle) {\n                    var reverseAngle = 360 - angle;\n                    tl = tl.rotate(center, reverseAngle);\n                    tr = tr.rotate(center, reverseAngle);\n                    bl = bl.rotate(center, reverseAngle);\n                    br = br.rotate(center, reverseAngle);\n                }\n\n                intersect = rect2.contains(tl) ||\n                    rect2.contains(tr) ||\n                    rect2.contains(bl) ||\n                    rect2.contains(br);\n            }\n\n            return intersect;\n        }\n    };\n\n    /**\n     * Aligns two rectangles, where one is the container and the other is content.\n     */\n    var RectAlign = Class.extend({\n        init: function(container) {\n            this.container = Rect.toRect(container);\n        },\n\n        align: function(content, alignment) {\n            var alignValues = alignment.toLowerCase().split(\" \");\n\n            for (var i = 0; i < alignValues.length; i++) {\n                content = this._singleAlign(content, alignValues[i]);\n            }\n\n            return content;\n        },\n        _singleAlign: function(content, alignment) {\n            if (isFunction(this[alignment])) {\n                return this[alignment](content);\n            }\n            else {\n                return content;\n            }\n        },\n\n        left: function(content) {\n            return this._align(content, this._left);\n        },\n        center: function(content) {\n            return this._align(content, this._center);\n        },\n        right: function(content) {\n            return this._align(content, this._right);\n        },\n        stretch: function(content) {\n            return this._align(content, this._stretch);\n        },\n        top: function(content) {\n            return this._align(content, this._top);\n        },\n        middle: function(content) {\n            return this._align(content, this._middle);\n        },\n        bottom: function(content) {\n            return this._align(content, this._bottom);\n        },\n\n        _left: function(container, content) {\n            content.x = container.x;\n        },\n        _center: function(container, content) {\n            content.x = ((container.width - content.width) / 2) || 0;\n        },\n        _right: function(container, content) {\n            content.x = container.width - content.width;\n        },\n        _top: function(container, content) {\n            content.y = container.y;\n        },\n        _middle: function(container, content) {\n            content.y = ((container.height - content.height) / 2) || 0;\n        },\n        _bottom: function(container, content) {\n            content.y = container.height - content.height;\n        },\n        _stretch: function(container, content) {\n            content.x = 0;\n            content.y = 0;\n            content.height = container.height;\n            content.width = container.width;\n        },\n        _align: function(content, alignCalc) {\n            content = Rect.toRect(content);\n            alignCalc(this.container, content);\n\n            return content;\n        }\n    });\n\n    var Polar = Class.extend({\n        init: function(r, a) {\n            this.r = r;\n            this.angle = a;\n        }\n    });\n\n    /**\n     * SVG transformation matrix.\n     */\n    var Matrix = Class.extend({\n        init: function(a, b, c, d, e, f) {\n            this.a = a || 0;\n            this.b = b || 0;\n            this.c = c || 0;\n            this.d = d || 0;\n            this.e = e || 0;\n            this.f = f || 0;\n        },\n        plus: function(m) {\n            this.a += m.a;\n            this.b += m.b;\n            this.c += m.c;\n            this.d += m.d;\n            this.e += m.e;\n            this.f += m.f;\n        },\n        minus: function(m) {\n            this.a -= m.a;\n            this.b -= m.b;\n            this.c -= m.c;\n            this.d -= m.d;\n            this.e -= m.e;\n            this.f -= m.f;\n        },\n        times: function(m) {\n            return new Matrix(\n                this.a * m.a + this.c * m.b,\n                this.b * m.a + this.d * m.b,\n                this.a * m.c + this.c * m.d,\n                this.b * m.c + this.d * m.d,\n                this.a * m.e + this.c * m.f + this.e,\n                this.b * m.e + this.d * m.f + this.f\n            );\n        },\n        apply: function(p) {\n            return new Point(this.a * p.x + this.c * p.y + this.e, this.b * p.x + this.d * p.y + this.f);\n        },\n        applyRect: function(r) {\n            return Rect.fromPoints(this.apply(r.topLeft()), this.apply(r.bottomRight()));\n        },\n        toString: function() {\n            return \"matrix(\" + this.a + \" \" + this.b + \" \" + this.c + \" \" + this.d + \" \" + this.e + \" \" + this.f + \")\";\n        }\n    });\n\n    deepExtend(Matrix, {\n        fromSVGMatrix: function(vm) {\n            var m = new Matrix();\n            m.a = vm.a;\n            m.b = vm.b;\n            m.c = vm.c;\n            m.d = vm.d;\n            m.e = vm.e;\n            m.f = vm.f;\n            return m;\n        },\n        fromMatrixVector: function(v) {\n            var m = new Matrix();\n            m.a = v.a;\n            m.b = v.b;\n            m.c = v.c;\n            m.d = v.d;\n            m.e = v.e;\n            m.f = v.f;\n            return m;\n        },\n        fromList: function(v) {\n            if (v.length !== 6) {\n                throw \"The given list should consist of six elements.\";\n            }\n            var m = new Matrix();\n            m.a = v[0];\n            m.b = v[1];\n            m.c = v[2];\n            m.d = v[3];\n            m.e = v[4];\n            m.f = v[5];\n            return m;\n        },\n        translation: function(x, y) {\n            var m = new Matrix();\n            m.a = 1;\n            m.b = 0;\n            m.c = 0;\n            m.d = 1;\n            m.e = x;\n            m.f = y;\n            return m;\n        },\n        unit: function() {\n            return new Matrix(1, 0, 0, 1, 0, 0);\n        },\n        rotation: function(angle, x, y) {\n            var m = new Matrix();\n            m.a = Math.cos(angle * Math.PI / 180);\n            m.b = Math.sin(angle * Math.PI / 180);\n            m.c = -m.b;\n            m.d = m.a;\n            m.e = (x - x * m.a + y * m.b) || 0;\n            m.f = (y - y * m.a - x * m.b) || 0;\n            return m;\n        },\n        scaling: function(scaleX, scaleY) {\n            var m = new Matrix();\n            m.a = scaleX;\n            m.b = 0;\n            m.c = 0;\n            m.d = scaleY;\n            m.e = 0;\n            m.f = 0;\n            return m;\n        },\n        parse: function(v) {\n            var parts, nums;\n            if (v) {\n                v = v.trim();\n                // of the form \"matrix(...)\"\n                if (v.slice(0, 6).toLowerCase() === \"matrix\") {\n                    nums = v.slice(7, v.length - 1).trim();\n                    parts = nums.split(\",\");\n                    if (parts.length === 6) {\n                        return Matrix.fromList(map(parts, function(p) {\n                            return parseFloat(p);\n                        }));\n                    }\n                    parts = nums.split(\" \");\n                    if (parts.length === 6) {\n                        return Matrix.fromList(map(parts, function(p) {\n                            return parseFloat(p);\n                        }));\n                    }\n                }\n                // of the form \"(...)\"\n                if (v.slice(0, 1) === \"(\" && v.slice(v.length - 1) === \")\") {\n                    v = v.substr(1, v.length - 1);\n                }\n                if (v.indexOf(\",\") > 0) {\n                    parts = v.split(\",\");\n                    if (parts.length === 6) {\n                        return Matrix.fromList(map(parts, function(p) {\n                            return parseFloat(p);\n                        }));\n                    }\n                }\n                if (v.indexOf(\" \") > 0) {\n                    parts = v.split(\" \");\n                    if (parts.length === 6) {\n                        return Matrix.fromList(map(parts, function(p) {\n                            return parseFloat(p);\n                        }));\n                    }\n                }\n            }\n            return parts;\n        }\n    });\n\n    /**\n     * SVG transformation represented as a vector.\n     */\n    var MatrixVector = Class.extend({\n        init: function(a, b, c, d, e, f) {\n            this.a = a || 0;\n            this.b = b || 0;\n            this.c = c || 0;\n            this.d = d || 0;\n            this.e = e || 0;\n            this.f = f || 0;\n        },\n        fromMatrix: function FromMatrix(m) {\n            var v = new MatrixVector();\n            v.a = m.a;\n            v.b = m.b;\n            v.c = m.c;\n            v.d = m.d;\n            v.e = m.e;\n            v.f = m.f;\n            return v;\n        }\n    });\n\n    /**\n     * Returns a value with Gaussian (normal) distribution.\n     * @param mean The mean value of the distribution.\n     * @param deviation The deviation (spreading at half-height) of the distribution.\n     * @returns {number}\n     */\n    function normalVariable(mean, deviation) {\n        var x, y, r;\n        do {\n            x = Math.random() * 2 - 1;\n            y = Math.random() * 2 - 1;\n            r = x * x + y * y;\n        }\n        while (!r || r > 1);\n        return mean + deviation * x * Math.sqrt(-2 * Math.log(r) / r);\n    }\n\n    /**\n     * Returns a random identifier which can be used as an ID of objects, eventually augmented with a prefix.\n     * @returns {string}\n     */\n    function randomId(length) {\n        if (Utils.isUndefined(length)) {\n            length = 10;\n        }\n        // old version return Math.floor((1 + Math.random()) * 0x1000000).toString(16).substring(1);\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    }\n\n    var Geometry = {\n\n        /**\n         * Returns the squared distance to the line defined by the two given Points.\n         * @param p An arbitrary Point.\n         * @param a An endpoint of the line or segment.\n         * @param b The complementary endpoint of the line or segment.\n         */\n        _distanceToLineSquared: function(p, a, b) {\n            function d2(pt1, pt2) {\n                return (pt1.x - pt2.x) * (pt1.x - pt2.x) + (pt1.y - pt2.y) * (pt1.y - pt2.y);\n            }\n\n            if (a === b) { // returns the distance of p to a\n                return d2(p, a);\n            }\n\n            var vx = b.x - a.x,\n                vy = b.y - a.y,\n                dot = (p.x - a.x) * vx + (p.y - a.y) * vy;\n            if (dot < 0) {\n                return d2(a, p); // sits on side of a\n            }\n\n            dot = (b.x - p.x) * vx + (b.y - p.y) * vy;\n            if (dot < 0) {\n                return d2(b, p); // sits on side of b\n            }\n            // regular case, use crossproduct to get the sine out\n            dot = (b.x - p.x) * vy - (b.y - p.y) * vx;\n            return dot * dot / (vx * vx + vy * vy);\n        },\n\n        /**\n         * Returns the distance to the line defined by the two given Points.\n         * @param p An arbitrary Point.\n         * @param a An endpoint of the line or segment.\n         * @param b The complementary endpoint of the line or segment.\n         */\n        distanceToLine: function(p, a, b) {\n            return Math.sqrt(this._distanceToLineSquared(p, a, b));\n        },\n\n        /**\n         * Returns the distance of the given points to the polyline defined by the points.\n         * @param p An arbitrary point.\n         * @param points The points defining the polyline.\n         * @returns {Number}\n         */\n        distanceToPolyline: function(p, points) {\n            var minimum = Number.MAX_VALUE;\n            if (Utils.isUndefined(points) || points.length === 0) {\n                return Number.MAX_VALUE;\n            }\n            for (var s = 0; s < points.length - 1; s++) {\n                var p1 = points[s];\n                var p2 = points[s + 1];\n\n                var d = this._distanceToLineSquared(p, p1, p2);\n                if (d < minimum) {\n                    minimum = d;\n                }\n            }\n            return Math.sqrt(minimum);\n        }\n    };\n\n    /*---------------The HashTable structure--------------------------------*/\n\n    /**\n     * Represents a collection of key-value pairs that are organized based on the hash code of the key.\n     * _buckets[hashId] = {key: key, value:...}\n     * Important: do not use the standard Array access method, use the get/set methods instead.\n     * See http://en.wikipedia.org/wiki/Hash_table\n     */\n    var HashTable = kendo.Class.extend({\n        init: function() {\n            this._buckets = [];\n            this.length = 0;\n        },\n\n        /**\n         * Adds the literal object with the given key (of the form {key: key,....}).\n         */\n        add: function(key, value) {\n\n            var obj = this._createGetBucket(key);\n            if (Utils.isDefined(value)) {\n                obj.value = value;\n            }\n            return obj;\n        },\n\n        /**\n         * Gets the literal object with the given key.\n         */\n        get: function(key) {\n            if (this._bucketExists(key)) {\n                return this._createGetBucket(key);\n            }\n            return null;\n        },\n\n        /**\n         * Set the key-value pair.\n         * @param key The key of the entry.\n         * @param value The value to set. If the key already exists the value will be overwritten.\n         */\n        set: function(key, value) {\n            this.add(key, value);\n        },\n\n        /**\n         * Determines whether the HashTable contains a specific key.\n         */\n        containsKey: function(key) {\n            return this._bucketExists(key);\n        },\n\n        /**\n         * Removes the element with the specified key from the hashtable.\n         * Returns the removed bucket.\n         */\n        remove: function(key) {\n            if (this._bucketExists(key)) {\n                var hashId = this._hash(key);\n                delete this._buckets[hashId];\n                this.length--;\n                return key;\n            }\n        },\n\n        /**\n         * Foreach with an iterator working on the key-value pairs.\n         * @param func\n         */\n        forEach: function(func) {\n            var hashes = this._hashes();\n            for (var i = 0, len = hashes.length; i < len; i++) {\n                var hash = hashes[i];\n                var bucket = this._buckets[hash];\n                if (Utils.isUndefined(bucket)) {\n                    continue;\n                }\n                func(bucket);\n            }\n        },\n\n        /**\n         * Returns a (shallow) clone of the current HashTable.\n         * @returns {HashTable}\n         */\n        clone: function() {\n            var ht = new HashTable();\n            var hashes = this._hashes();\n            for (var i = 0, len = hashes.length; i < len; i++) {\n                var hash = hashes[i];\n                var bucket = this._buckets[hash];\n                if (Utils.isUndefined(bucket)) {\n                    continue;\n                }\n                ht.add(bucket.key, bucket.value);\n            }\n            return ht;\n        },\n\n        /**\n         * Returns the hashes of the buckets.\n         * @returns {Array}\n         * @private\n         */\n        _hashes: function() {\n            var hashes = [];\n            for (var hash in this._buckets) {\n                if (this._buckets.hasOwnProperty(hash)) {\n                    hashes.push(hash);\n                }\n            }\n            return hashes;\n        },\n\n        _bucketExists: function(key) {\n            var hashId = this._hash(key);\n            return Utils.isDefined(this._buckets[hashId]);\n        },\n\n        /**\n         * Returns-adds the createGetBucket with the given key. If not present it will\n         * be created and returned.\n         * A createGetBucket is a literal object of the form {key: key, ...}.\n         */\n        _createGetBucket: function(key) {\n            var hashId = this._hash(key);\n            var bucket = this._buckets[hashId];\n            if (Utils.isUndefined(bucket)) {\n                bucket = { key: key };\n                this._buckets[hashId] = bucket;\n                this.length++;\n            }\n            return bucket;\n        },\n\n        /**\n         * Hashing of the given key.\n         */\n        _hash: function(key) {\n            if (Utils.isNumber(key)) {\n                return key;\n            }\n            if (Utils.isString(key)) {\n                return this._hashString(key);\n            }\n            if (Utils.isObject(key)) {\n                return this._objectHashId(key);\n            }\n            throw \"Unsupported key type.\";\n        },\n\n        /**\n         * Hashing of a string.\n         */\n        _hashString: function(s) {\n            // see for example http://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript-jquery\n            var result = 0;\n            if (s.length === 0) {\n                return result;\n            }\n            for (var i = 0; i < s.length; i++) {\n                var ch = s.charCodeAt(i);\n                result = ((result * 32) - result) + ch;\n            }\n            return result;\n        },\n\n        /**\n         * Returns the unique identifier for an object. This is automatically assigned and add on the object.\n         */\n        _objectHashId: function(key) {\n            var id = key._hashId;\n            if (Utils.isUndefined(id)) {\n                id = randomId();\n                key._hashId = id;\n            }\n            return id;\n        }\n    });\n\n    /*---------------The Dictionary structure--------------------------------*/\n\n    /**\n     * Represents a collection of key-value pairs.\n     * Important: do not use the standard Array access method, use the get/Set methods instead.\n     */\n    var Dictionary = kendo.Observable.extend({\n        /**\n         * Initializes a new instance of the Dictionary class.\n         * @param dictionary Loads the content of the given dictionary into this new one.\n         */\n        init: function(dictionary) {\n            var that = this;\n            kendo.Observable.fn.init.call(that);\n            this._hashTable = new HashTable();\n            this.length = 0;\n            if (Utils.isDefined(dictionary)) {\n                if (Array.isArray(dictionary)) {\n                    for (var i = 0; i < dictionary.length; i++) {\n                        this.add(dictionary[i]);\n                    }\n                } else {\n                    dictionary.forEach(function(k, v) {\n                        this.add(k, v);\n                    }, this);\n                }\n            }\n        },\n\n        /**\n         * Adds a key-value to the dictionary.\n         * If the key already exists this will assign the given value to the existing entry.\n         */\n        add: function(key, value) {\n            var entry = this._hashTable.get(key);\n            if (!entry) {\n                entry = this._hashTable.add(key);\n                this.length++;\n                this.trigger('changed');\n            }\n            entry.value = value;\n        },\n\n        /**\n         * Set the key-value pair.\n         * @param key The key of the entry.\n         * @param value The value to set. If the key already exists the value will be overwritten.\n         */\n        set: function(key, value) {\n            this.add(key, value);\n        },\n\n        /**\n         * Gets the value associated with the given key in the dictionary.\n         */\n        get: function(key) {\n            var entry = this._hashTable.get(key);\n            if (entry) {\n                return entry.value;\n            }\n            throw new Error(\"Cannot find key \" + key);\n        },\n\n        /**\n         * Returns whether the dictionary contains the given key.\n         */\n        containsKey: function(key) {\n            return this._hashTable.containsKey(key);\n        },\n\n        /**\n         * Removes the element with the specified key from the dictionary.\n         */\n        remove: function(key) {\n            if (this.containsKey(key)) {\n                this.trigger(\"changed\");\n                this.length--;\n                return this._hashTable.remove(key);\n            }\n        },\n\n        /**\n         * The functional gets the key and value as parameters.\n         */\n        forEach: function(func, thisRef) {\n            this._hashTable.forEach(function(entry) {\n                func.call(thisRef, entry.key, entry.value);\n            });\n        },\n\n        /**\n         * Same as forEach except that only the value is passed to the functional.\n         */\n        forEachValue: function(func, thisRef) {\n            this._hashTable.forEach(function(entry) {\n                func.call(thisRef, entry.value);\n            });\n        },\n\n        /**\n         * Calls a defined callback function for each key in the dictionary.\n         */\n        forEachKey: function(func, thisRef) {\n            this._hashTable.forEach(function(entry) {\n                func.call(thisRef, entry.key);\n            });\n        },\n\n        /**\n         * Gets an array with all keys in the dictionary.\n         */\n        keys: function() {\n            var keys = [];\n            this.forEachKey(function(key) {\n                keys.push(key);\n            });\n            return keys;\n        }\n    });\n\n    /*---------------Queue structure--------------------------------*/\n\n    var Queue = kendo.Class.extend({\n\n        init: function() {\n            this._tail = null;\n            this._head = null;\n            this.length = 0;\n        },\n\n        /**\n         * Enqueues an object to the end of the queue.\n         */\n        enqueue: function(value) {\n            var entry = { value: value, next: null };\n            if (!this._head) {\n                this._head = entry;\n                this._tail = this._head;\n            }\n            else {\n                this._tail.next = entry;\n                this._tail = this._tail.next;\n            }\n            this.length++;\n        },\n\n        /**\n         * Removes and returns the object at top of the queue.\n         */\n        dequeue: function() {\n            if (this.length < 1) {\n                throw new Error(\"The queue is empty.\");\n            }\n            var value = this._head.value;\n            this._head = this._head.next;\n            this.length--;\n            return value;\n        },\n\n        contains: function(item) {\n            var current = this._head;\n            while (current) {\n                if (current.value === item) {\n                    return true;\n                }\n                current = current.next;\n            }\n            return false;\n        }\n    });\n\n\n    /**\n     * While other data structures can have multiple times the same item a Set owns only\n     * once a particular item.\n     * @type {*}\n     */\n    var Set = kendo.Observable.extend({\n        init: function(resource) {\n            var that = this;\n            kendo.Observable.fn.init.call(that);\n            this._hashTable = new HashTable();\n            this.length = 0;\n            if (Utils.isDefined(resource)) {\n                if (resource instanceof HashTable) {\n                    resource.forEach(function(d) {\n                        this.add(d);\n                    });\n                }\n                else if (resource instanceof Dictionary) {\n                    resource.forEach(function(k, v) {\n                        this.add({ key: k, value: v });\n                    }, this);\n                }\n            }\n        },\n\n        contains: function(item) {\n            return this._hashTable.containsKey(item);\n        },\n\n        add: function(item) {\n            var entry = this._hashTable.get(item);\n            if (!entry) {\n                this._hashTable.add(item, item);\n                this.length++;\n                this.trigger('changed');\n            }\n        },\n\n        get: function(item) {\n            if (this.contains(item)) {\n                return this._hashTable.get(item).value;\n            }\n            else {\n                return null;\n            }\n        },\n\n        /**\n         * Returns the hash of the item.\n         * @param item\n         * @returns {*}\n         */\n        hash: function(item) {\n            return this._hashTable._hash(item);\n        },\n\n        /**\n         * Removes the given item from the set. No exception is thrown if the item is not in the Set.\n         * @param item\n         */\n        remove: function(item) {\n            if (this.contains(item)) {\n                this._hashTable.remove(item);\n                this.length--;\n                this.trigger('changed');\n            }\n        },\n        /**\n         * Foreach with an iterator working on the key-value pairs.\n         * @param func\n         */\n        forEach: function(func, context) {\n            this._hashTable.forEach(function(kv) {\n                func(kv.value);\n            }, context);\n        },\n        toArray: function() {\n            var r = [];\n            this.forEach(function(d) {\n                r.push(d);\n            });\n            return r;\n        }\n    });\n\n    /*----------------Node-------------------------------*/\n\n    /**\n     * Defines the node (vertex) of a Graph.\n     */\n    var Node = kendo.Class.extend({\n\n        init: function(id, shape) {\n\n            /**\n             * Holds all the links incident with the current node.\n             * Do not use this property to manage the incoming links, use the appropriate add/remove methods instead.\n             */\n            this.links = [];\n\n            /**\n             * Holds the links from the current one to another Node .\n             * Do not use this property to manage the incoming links, use the appropriate add/remove methods instead.\n             */\n            this.outgoing = [];\n\n            /**\n             * Holds the links from another Node to the current one.\n             * Do not use this property to manage the incoming links, use the appropriate add/remove methods instead.\n             */\n            this.incoming = [];\n\n            /**\n             * Holds the weight of this Node.\n             */\n            this.weight = 1;\n\n            if (Utils.isDefined(id)) {\n                this.id = id;\n            }\n            else {\n                this.id = randomId();\n            }\n            if (Utils.isDefined(shape)) {\n                this.associatedShape = shape;\n                // transfer the shape's bounds to the runtime props\n                var b = shape.bounds();\n                this.width = b.width;\n                this.height = b.height;\n                this.x = b.x;\n                this.y = b.y;\n            }\n            else {\n                this.associatedShape = null;\n            }\n            /**\n             * The payload of the node.\n             * @type {null}\n             */\n            this.data = null;\n            this.type = \"Node\";\n            this.shortForm = \"Node '\" + this.id + \"'\";\n            /**\n             * Whether this is an injected node during the analysis or layout process.\n             * @type {boolean}\n             */\n            this.isVirtual = false;\n        },\n\n        /**\n         * Returns whether this node has no links attached.\n         */\n        isIsolated: function() {\n            return Utils.isEmpty(this.links);\n        },\n\n        /**\n         * Gets or sets the bounding rectangle of this node.\n         * This should be considered as runtime data, the property is not hotlinked to a SVG item.\n         */\n        bounds: function(r) {\n            if (!Utils.isDefined(r)) {\n                return new diagram.Rect(this.x, this.y, this.width, this.height);\n            }\n\n            this.x = r.x;\n            this.y = r.y;\n            this.width = r.width;\n            this.height = r.height;\n        },\n\n        /**\n         * Returns whether there is at least one link with the given (complementary) node. This can be either an\n         * incoming or outgoing link.\n         */\n        isLinkedTo: function(node) {\n            var that = this;\n            return Utils.any(that.links, function(link) {\n                return link.getComplement(that) === node;\n            });\n        },\n\n        /**\n         * Gets the children of this node, defined as the adjacent nodes with a link from this node to the adjacent one.\n         * @returns {Array}\n         */\n        getChildren: function() {\n            if (this.outgoing.length === 0) {\n                return [];\n            }\n            var children = [];\n            for (var i = 0, len = this.outgoing.length; i < len; i++) {\n                var link = this.outgoing[i];\n                children.push(link.getComplement(this));\n            }\n            return children;\n        },\n\n        /**\n         * Gets the parents of this node, defined as the adjacent nodes with a link from the adjacent node to this one.\n         * @returns {Array}\n         */\n        getParents: function() {\n            if (this.incoming.length === 0) {\n                return [];\n            }\n            var parents = [];\n            for (var i = 0, len = this.incoming.length; i < len; i++) {\n                var link = this.incoming[i];\n                parents.push(link.getComplement(this));\n            }\n            return parents;\n        },\n\n        /**\n         * Returns a clone of the Node. Note that the identifier is not cloned since it's a different Node instance.\n         * @returns {Node}\n         */\n        clone: function() {\n            var copy = new Node();\n            if (Utils.isDefined(this.weight)) {\n                copy.weight = this.weight;\n            }\n            if (Utils.isDefined(this.balance)) {\n                copy.balance = this.balance;\n            }\n            if (Utils.isDefined(this.owner)) {\n                copy.owner = this.owner;\n            }\n            copy.associatedShape = this.associatedShape;\n            copy.x = this.x;\n            copy.y = this.y;\n            copy.width = this.width;\n            copy.height = this.height;\n            return copy;\n        },\n\n        /**\n         * Returns whether there is a link from the current node to the given node.\n         */\n        adjacentTo: function(node) {\n            return this.isLinkedTo(node) !== null;\n        },\n\n        /**\n         * Removes the given link from the link collection this node owns.\n         * @param link\n         */\n        removeLink: function(link) {\n            if (link.source === this) {\n                Utils.remove(this.links, link);\n                Utils.remove(this.outgoing, link);\n                link.source = null;\n            }\n\n            if (link.target === this) {\n                Utils.remove(this.links, link);\n                Utils.remove(this.incoming, link);\n                link.target = null;\n            }\n        },\n\n        /**\n         * Returns whether there is a (outgoing) link from the current node to the given one.\n         */\n        hasLinkTo: function(node) {\n            return Utils.any(this.outgoing, function(link) {\n                return link.target === node;\n            });\n        },\n\n        /**\n         * Returns the degree of this node, i.e. the sum of incoming and outgoing links.\n         */\n        degree: function() {\n            return this.links.length;\n        },\n\n        /**\n         * Returns whether this node is either the source or the target of the given link.\n         */\n        incidentWith: function(link) {\n            return contains(this.links, link);\n        },\n\n        /**\n         * Returns the links between this node and the given one.\n         */\n        getLinksWith: function(node) {\n            return Utils.all(this.links, function(link) {\n                return link.getComplement(this) === node;\n            }, this);\n        },\n\n        /**\n         * Returns the nodes (either parent or child) which are linked to the current one.\n         */\n        getNeighbors: function() {\n            var neighbors = [];\n            Utils.forEach(this.incoming, function(e) {\n                neighbors.push(e.getComplement(this));\n            }, this);\n            Utils.forEach(this.outgoing, function(e) {\n                neighbors.push(e.getComplement(this));\n            }, this);\n            return neighbors;\n        }\n    });\n\n    /**\n     * Defines a directed link (edge, connection) of a Graph.\n     */\n    var Link = kendo.Class.extend({\n\n        init: function(source, target, id, connection) {\n            if (Utils.isUndefined(source)) {\n                throw \"The source of the new link is not set.\";\n            }\n            if (Utils.isUndefined(target)) {\n                throw \"The target of the new link is not set.\";\n            }\n            var sourceFound, targetFound;\n            if (Utils.isString(source)) {\n                sourceFound = new Node(source);\n            }\n            else {\n                sourceFound = source;\n            }\n            if (Utils.isString(target)) {\n                targetFound = new Node(target);\n            }\n            else {\n                targetFound = target;\n            }\n\n            this.source = sourceFound;\n            this.target = targetFound;\n            this.source.links.push(this);\n            this.target.links.push(this);\n            this.source.outgoing.push(this);\n            this.target.incoming.push(this);\n            if (Utils.isDefined(id)) {\n                this.id = id;\n            }\n            else {\n                this.id = randomId();\n            }\n            if (Utils.isDefined(connection)) {\n                this.associatedConnection = connection;\n            }\n            else {\n                this.associatedConnection = null;\n            }\n            this.type = \"Link\";\n            this.shortForm = \"Link '\" + this.source.id + \"->\" + this.target.id + \"'\";\n        },\n\n        /**\n         * Returns the complementary node of the given one, if any.\n         */\n        getComplement: function(node) {\n            if (this.source !== node && this.target !== node) {\n                throw \"The given node is not incident with this link.\";\n            }\n            return this.source === node ? this.target : this.source;\n        },\n\n        /**\n         * Returns the overlap of the current link with the given one, if any.\n         */\n        getCommonNode: function(link) {\n            if (this.source === link.source || this.source === link.target) {\n                return this.source;\n            }\n            if (this.target === link.source || this.target === link.target) {\n                return this.target;\n            }\n            return null;\n        },\n\n        /**\n         * Returns whether the current link is bridging the given nodes.\n         */\n        isBridging: function(v1, v2) {\n            return this.source === v1 && this.target === v2 || this.source === v2 && this.target === v1;\n        },\n\n        /**\n         * Returns the source and target of this link as a tuple.\n         */\n        getNodes: function() {\n            return [this.source, this.target];\n        },\n\n        /**\n         * Returns whether the given node is either the source or the target of the current link.\n         */\n        incidentWith: function(node) {\n            return this.source === node || this.target === node;\n        },\n\n        /**\n         * Returns whether the given link is a continuation of the current one. This can be both\n         * via an incoming or outgoing link.\n         */\n        adjacentTo: function(link) {\n            return contains(this.source.links, link) || contains(this.target.links, link);\n        },\n\n        /**\n         * Changes the source-node of this link.\n         */\n        changeSource: function(node) {\n            Utils.remove(this.source.links, this);\n            Utils.remove(this.source.outgoing, this);\n\n            node.links.push(this);\n            node.outgoing.push(this);\n\n            this.source = node;\n        },\n\n        /**\n         * Changes the target-node of this link.\n         * @param node\n         */\n        changeTarget: function(node) {\n            Utils.remove(this.target.links, this);\n            Utils.remove(this.target.incoming, this);\n\n            node.links.push(this);\n            node.incoming.push(this);\n\n            this.target = node;\n        },\n\n        /**\n         * Changes both the source and the target nodes of this link.\n         */\n        changesNodes: function(v, w) {\n            if (this.source === v) {\n                this.changeSource(w);\n            }\n            else if (this.target === v) {\n                this.changeTarget(w);\n            }\n        },\n\n        /**\n         * Reverses the direction of this link.\n         */\n        reverse: function() {\n            var oldSource = this.source;\n            var oldTarget = this.target;\n\n            this.source = oldTarget;\n            Utils.remove(oldSource.outgoing, this);\n            this.source.outgoing.push(this);\n\n            this.target = oldSource;\n            Utils.remove(oldTarget.incoming, this);\n            this.target.incoming.push(this);\n            return this;\n        },\n\n        /**\n         * Ensures that the given target defines the endpoint of this link.\n         */\n        directTo: function(target) {\n            if (this.source !== target && this.target !== target) {\n                throw \"The given node is not incident with this link.\";\n            }\n            if (this.target !== target) {\n                this.reverse();\n            }\n        },\n\n        /**\n         * Returns a reversed clone of this link.\n         */\n        createReverseEdge: function() {\n            var r = this.clone();\n            r.reverse();\n            r.reversed = true;\n            return r;\n        },\n\n        /**\n         * Returns a clone of this link.\n         */\n        clone: function() {\n            var clone = new Link(this.source, this.target);\n            return clone;\n        }\n    });\n\n    /*--------------Graph structure---------------------------------*/\n    /**\n     * Defines a directed graph structure.\n     * Note that the incidence structure resides in the nodes through the incoming and outgoing links collection, rahter than\n     * inside the Graph.\n     */\n    var Graph = kendo.Class.extend({\n        init: function(idOrDiagram) {\n            /**\n             * The links or edge collection of this Graph.\n             * @type {Array}\n             */\n            this.links = [];\n            /**\n             * The node or vertex collection of this Graph.\n             * @type {Array}\n             */\n            this.nodes = [];\n\n            this._nodeMap = new Dictionary();\n            /**\n             * The optional reference to the Diagram on which this Graph is based.\n             * @type {null}\n             */\n            this.diagram = null;\n\n            /**\n             * The root of this Graph. If not set explicitly the first Node with zero incoming links will be taken.\n             * @type {null}\n             * @private\n             */\n            this._root = null;\n            if (Utils.isDefined(idOrDiagram)) {\n                if (Utils.isString(idOrDiagram)) {\n                    this.id = idOrDiagram;\n                }\n                else {\n                    this.diagram = idOrDiagram;\n                    this.id = idOrDiagram.id;\n                }\n            }\n            else {\n                this.id = randomId();\n            }\n\n            /**\n             * The bounds of this graph if the nodes have spatial extension defined.\n             * @type {Rect}\n             */\n            this.bounds = new Rect();\n            // keeps track whether the children & parents have been created\n            this._hasCachedRelationships = false;\n            this.type = \"Graph\";\n        },\n        /**\n         * Caches the relational information of parents and children in the 'parents' and 'children'\n         * properties.\n         * @param forceRebuild If set to true the relational info will be rebuild even if already present.\n         */\n        cacheRelationships: function(forceRebuild) {\n            if (Utils.isUndefined(forceRebuild)) {\n                forceRebuild = false;\n            }\n            if (this._hasCachedRelationships && !forceRebuild) {\n                return;\n            }\n            for (var i = 0, len = this.nodes.length; i < len; i++) {\n                var node = this.nodes[i];\n                node.children = this.getChildren(node);\n                node.parents = this.getParents(node);\n            }\n            this._hasCachedRelationships = true;\n        },\n\n        /**\n         * Assigns tree-levels to the nodes assuming this is a tree graph.\n         * If not connected or not a tree the process will succeed but\n         * will have little meaning.\n         * @param startNode The node from where the level numbering starts, usually the root of the tree.\n         * @param visited The collection of visited nodes.\n         * @param offset The offset or starting counter of the level info.\n         */\n        assignLevels: function(startNode, offset, visited) {\n            if (!startNode) {\n                throw \"Start node not specified.\";\n            }\n            if (Utils.isUndefined(offset)) {\n                offset = 0;\n            }\n            // if not done before, cache the parents and children\n            this.cacheRelationships();\n            if (Utils.isUndefined(visited)) {\n                visited = new Dictionary();\n                Utils.forEach(this.nodes, function(n) {\n                    visited.add(n, false);\n                });\n            }\n            visited.set(startNode, true);\n            startNode.level = offset;\n            var children = startNode.children;\n            for (var i = 0, len = children.length; i < len; i++) {\n                var child = children[i];\n                if (!child || visited.get(child)) {\n                    continue;\n                }\n                this.assignLevels(child, offset + 1, visited);\n            }\n        },\n\n        /**\n         * Gets or set the root of this graph.\n         * If not set explicitly the first Node with zero incoming links will be taken.\n         * @param value\n         * @returns {*}\n         */\n        root: function(value) {\n            if (Utils.isUndefined(value)) {\n                if (!this._root) {\n                    // TODO: better to use the longest path for the most probable root?\n                    var found = Utils.first(this.nodes, function(n) {\n                        return n.incoming.length === 0;\n                    });\n                    if (found) {\n                        return found;\n                    }\n                    return Utils.first(this.nodes);\n                }\n                else {\n                    return this._root;\n                }\n            }\n            else {\n                this._root = value;\n            }\n        },\n\n        /**\n         * Returns the connected components of this graph.\n         * Note that the returned graphs are made up of the nodes and links of this graph, i.e. a pointer to the items of this graph.\n         * If you alter the items of the components you'll alter the original graph and vice versa.\n         * @returns {Array}\n         */\n        getConnectedComponents: function() {\n            this.componentIndex = 0;\n            this.setItemIndices();\n            var componentId = Utils.initArray(this.nodes.length, -1);\n\n            for (var v = 0; v < this.nodes.length; v++) {\n                if (componentId[v] === -1) {\n                    this._collectConnectedNodes(componentId, v);\n                    this.componentIndex++;\n                }\n            }\n\n            var components = [], i;\n            for (i = 0; i < this.componentIndex; ++i) {\n                components[i] = new Graph();\n            }\n            for (i = 0; i < componentId.length; ++i) {\n                var graph = components[componentId[i]];\n                graph.addNodeAndOutgoings(this.nodes[i]);\n            }\n            // sorting the components in decreasing order of node count\n            components.sort(function(a, b) {\n                return b.nodes.length - a.nodes.length;\n            });\n            return components;\n        },\n\n        _collectConnectedNodes: function(setIds, nodeIndex) {\n            setIds[nodeIndex] = this.componentIndex; // part of the current component\n            var node = this.nodes[nodeIndex];\n            Utils.forEach(node.links,\n                function(link) {\n                    var next = link.getComplement(node);\n                    var nextId = next.index;\n                    if (setIds[nextId] === -1) {\n                        this._collectConnectedNodes(setIds, nextId);\n                    }\n                }, this);\n        },\n\n        /**\n         * Calculates the bounds of this Graph if the Nodes have spatial dimensions defined.\n         * @returns {Rect}\n         */\n        calcBounds: function() {\n            if (this.isEmpty()) {\n                this.bounds = new Rect();\n                return this.bounds;\n            }\n            var b = null;\n            for (var i = 0, len = this.nodes.length; i < len; i++) {\n                var node = this.nodes[i];\n                if (!b) {\n                    b = node.bounds();\n                }\n                else {\n                    b = b.union(node.bounds());\n                }\n            }\n            this.bounds = b;\n            return this.bounds;\n        },\n\n        /**\n         * Creates a spanning tree for the current graph.\n         * Important: this will not return a spanning forest if the graph is disconnected.\n         * Prim's algorithm  finds a minimum-cost spanning tree of an edge-weighted, connected, undirected graph;\n         * see http://en.wikipedia.org/wiki/Prim%27s_algorithm .\n         * @param root The root of the spanning tree.\n         * @returns {Graph}\n         */\n        getSpanningTree: function(root) {\n            var tree = new Graph();\n            var map = new Dictionary(), source, target;\n            tree.root = root.clone();\n            tree.root.level = 0;\n            tree.root.id = root.id;\n            map.add(root, tree.root);\n            root.level = 0;\n\n            var visited = [];\n            var remaining = [];\n            tree._addNode(tree.root);\n            visited.push(root);\n            remaining.push(root);\n\n            var levelCount = 1;\n            while (remaining.length > 0) {\n                var next = remaining.pop();\n                for (var ni = 0; ni < next.links.length; ni++) {\n                    var link = next.links[ni];\n                    var cn = link.getComplement(next);\n                    if (contains(visited, cn)) {\n                        continue;\n                    }\n\n                    cn.level = next.level + 1;\n                    if (levelCount < cn.level + 1) {\n                        levelCount = cn.level + 1;\n                    }\n                    if (!contains(remaining, cn)) {\n                        remaining.push(cn);\n                    }\n                    if (!contains(visited, cn)) {\n                        visited.push(cn);\n                    }\n                    if (map.containsKey(next)) {\n                        source = map.get(next);\n                    }\n                    else {\n                        source = next.clone();\n                        source.level = next.level;\n                        source.id = next.id;\n                        map.add(next, source);\n                    }\n                    if (map.containsKey(cn)) {\n                        target = map.get(cn);\n                    }\n                    else {\n                        target = cn.clone();\n                        target.level = cn.level;\n                        target.id = cn.id;\n                        map.add(cn, target);\n                    }\n                    var newLink = new Link(source, target);\n                    tree.addLink(newLink);\n                }\n\n            }\n\n            var treeLevels = [];\n            for (var i = 0; i < levelCount; i++) {\n                treeLevels.push([]);\n            }\n\n            Utils.forEach(tree.nodes, function(node) {\n                treeLevels[node.level].push(node);\n            });\n\n            tree.treeLevels = treeLevels;\n            tree.cacheRelationships();\n            return tree;\n        },\n\n        /**\n         * Returns a random node in this graph.\n         * @param excludedNodes The collection of nodes which should not be considered.\n         * @param incidenceLessThan The maximum degree or incidence the random node should have.\n         * @returns {*}\n         */\n        takeRandomNode: function(excludedNodes, incidenceLessThan) {\n            if (Utils.isUndefined(excludedNodes)) {\n                excludedNodes = [];\n            }\n            if (Utils.isUndefined(incidenceLessThan)) {\n                incidenceLessThan = 4;\n            }\n            if (this.nodes.length === 0) {\n                return null;\n            }\n            if (this.nodes.length === 1) {\n                return contains(excludedNodes, this.nodes[0]) ? null : this.nodes[0];\n            }\n            var pool = $.grep(this.nodes, function(node) {\n                return !contains(excludedNodes, node) && node.degree() <= incidenceLessThan;\n            });\n            if (Utils.isEmpty(pool)) {\n                return null;\n            }\n            return pool[Utils.randomInteger(0, pool.length)];\n        },\n\n        /**\n         * Returns whether this is an empty graph.\n         */\n        isEmpty: function() {\n            return Utils.isEmpty(this.nodes);\n        },\n\n        /**\n         * Checks whether the endpoints of the links are all in the nodes collection.\n         */\n        isHealthy: function() {\n            return Utils.all(this.links, function(link) {\n                return contains(this.nodes, link.source) && contains(this.nodes, link.target);\n            }, this);\n        },\n\n        /**\n         * Gets the parents of this node, defined as the adjacent nodes with a link from the adjacent node to this one.\n         * @returns {Array}\n         */\n        getParents: function(n) {\n            if (!this.hasNode(n)) {\n                throw \"The given node is not part of this graph.\";\n            }\n            return n.getParents();\n        },\n\n        /**\n         * Gets the children of this node, defined as the adjacent nodes with a link from this node to the adjacent one.\n         * @returns {Array}\n         */\n        getChildren: function(n) {\n            if (!this.hasNode(n)) {\n                throw \"The given node is not part of this graph.\";\n            }\n            return n.getChildren();\n        },\n\n        /**\n         * Adds a new link to the graph between the given nodes.\n         */\n        addLink: function(sourceOrLink, target, owner) {\n\n            if (Utils.isUndefined(sourceOrLink)) {\n                throw \"The source of the link is not defined.\";\n            }\n            if (Utils.isUndefined(target)) {\n                // can only be undefined if the first one is a Link\n                if (Utils.isDefined(sourceOrLink.type) && sourceOrLink.type === \"Link\") {\n                    this.addExistingLink(sourceOrLink);\n                    return;\n                }\n                else {\n                    throw \"The target of the link is not defined.\";\n                }\n            }\n\n            var foundSource = this.getNode(sourceOrLink);\n            if (Utils.isUndefined(foundSource)) {\n                foundSource = this.addNode(sourceOrLink);\n            }\n            var foundTarget = this.getNode(target);\n            if (Utils.isUndefined(foundTarget)) {\n                foundTarget = this.addNode(target);\n            }\n\n            var newLink = new Link(foundSource, foundTarget);\n\n            if (Utils.isDefined(owner)) {\n                newLink.owner = owner;\n            }\n\n            /*newLink.source.outgoing.push(newLink);\n             newLink.source.links.push(newLink);\n             newLink.target.incoming.push(newLink);\n             newLink.target.links.push(newLink);*/\n\n            this.links.push(newLink);\n\n            return newLink;\n        },\n\n        /**\n         * Removes all the links in this graph.\n         */\n        removeAllLinks: function() {\n            while (this.links.length > 0) {\n                var link = this.links[0];\n                this.removeLink(link);\n            }\n        },\n\n        /**\n         * Adds the given link to the current graph.\n         */\n        addExistingLink: function(link) {\n\n            if (this.hasLink(link)) {\n                return;\n            }\n            this.links.push(link);\n            if (this.hasNode(link.source.id)) {\n                // priority to the existing node with the id even if other props are different\n                var s = this.getNode(link.source.id);\n                link.changeSource(s);\n            }\n            else {\n                this.addNode(link.source);\n            }\n\n            if (this.hasNode(link.target.id)) {\n                var t = this.getNode(link.target.id);\n                link.changeTarget(t);\n            }\n            else {\n                this.addNode(link.target);\n            }\n\n            /*  if (!link.source.outgoing.contains(link)) {\n             link.source.outgoing.push(link);\n             }\n             if (!link.source.links.contains(link)) {\n             link.source.links.push(link);\n             }\n             if (!link.target.incoming.contains(link)) {\n             link.target.incoming.push(link);\n             }\n             if (!link.target.links.contains(link)) {\n             link.target.links.push(link);\n             }*/\n        },\n\n        /**\n         * Returns whether the given identifier or Link is part of this graph.\n         * @param linkOrId An identifier or a Link object.\n         * @returns {*}\n         */\n        hasLink: function(linkOrId) {\n            if (Utils.isString(linkOrId)) {\n                return Utils.any(this.links, function(link) {\n                    return link.id === linkOrId;\n                });\n            }\n            if (linkOrId.type === \"Link\") {\n                return contains(this.links, linkOrId);\n            }\n            throw \"The given object is neither an identifier nor a Link.\";\n        },\n        /**\n         * Gets the node with the specified Id or null if not part of this graph.\n         */\n        getNode: function(nodeOrId) {\n            var id = nodeOrId.id || nodeOrId;\n            if (this._nodeMap.containsKey(id)) {\n                return this._nodeMap.get(id);\n            }\n        },\n\n        /**\n         * Returns whether the given node or node Id is part of this graph.\n         */\n        hasNode: function(nodeOrId) {\n            var id = nodeOrId.id || nodeOrId;\n            return this._nodeMap.containsKey(id);\n        },\n\n        _addNode: function(node) {\n            this.nodes.push(node);\n            this._nodeMap.add(node.id, node);\n        },\n\n        _removeNode: function(node) {\n            Utils.remove(this.nodes, node);\n            this._nodeMap.remove(node.id);\n        },\n\n        /**\n         * Removes the given node from this graph.\n         * The node can be specified as an object or as an identifier (string).\n         */\n        removeNode: function(nodeOrId) {\n            var n = nodeOrId;\n            if (Utils.isString(nodeOrId)) {\n                n = this.getNode(nodeOrId);\n            }\n\n            if (Utils.isDefined(n)) {\n                var links = n.links;\n                n.links = [];\n                for (var i = 0, len = links.length; i < len; i++) {\n                    var link = links[i];\n                    this.removeLink(link);\n                }\n                this._removeNode(n);\n            }\n            else {\n                throw \"The identifier should be a Node or the Id (string) of a node.\";\n            }\n        },\n\n        /**\n         * Returns whether the given nodes are connected with a least one link independently of the direction.\n         */\n        areConnected: function(n1, n2) {\n            return Utils.any(this.links, function(link) {\n                return link.source == n1 && link.target == n2 || link.source == n2 && link.target == n1;\n            });\n        },\n\n        /**\n         * Removes the given link from this graph.\n         */\n        removeLink: function(link) {\n            /*    if (!this.links.contains(link)) {\n             throw \"The given link is not part of the Graph.\";\n             }\n             */\n            Utils.remove(this.links, link);\n\n            Utils.remove(link.source.outgoing, link);\n            Utils.remove(link.source.links, link);\n            Utils.remove(link.target.incoming, link);\n            Utils.remove(link.target.links, link);\n        },\n\n        /**\n         * Adds a new node to this graph, if not already present.\n         * The node can be an existing Node or the identifier of a new node.\n         * No error is thrown if the node is already there and the existing one is returned.\n         */\n        addNode: function(nodeOrId, layoutRect, owner) {\n\n            var newNode = null;\n\n            if (!Utils.isDefined(nodeOrId)) {\n                throw \"No Node or identifier for a new Node is given.\";\n            }\n\n            if (Utils.isString(nodeOrId)) {\n                if (this.hasNode(nodeOrId)) {\n                    return this.getNode(nodeOrId);\n                }\n                newNode = new Node(nodeOrId);\n            }\n            else {\n                if (this.hasNode(nodeOrId)) {\n                    return this.getNode(nodeOrId);\n                }\n                // todo: ensure that the param is a Node?\n                newNode = nodeOrId;\n            }\n\n            if (Utils.isDefined(layoutRect)) {\n                newNode.bounds(layoutRect);\n            }\n\n            if (Utils.isDefined(owner)) {\n                newNode.owner = owner;\n            }\n            this._addNode(newNode);\n            return newNode;\n        },\n\n        /**\n         * Adds the given Node and its outgoing links.\n         */\n        addNodeAndOutgoings: function(node) {\n            if (!this.hasNode(node)) {\n                this._addNode(node);\n            }\n\n            var newLinks = node.outgoing;\n            node.outgoing = [];\n            Utils.forEach(newLinks, function(link) {\n                this.addExistingLink(link);\n            }, this);\n        },\n\n        /**\n         * Sets the 'index' property on the links and nodes of this graph.\n         */\n        setItemIndices: function() {\n            var i;\n            for (i = 0; i < this.nodes.length; ++i) {\n                this.nodes[i].index = i;\n            }\n\n            for (i = 0; i < this.links.length; ++i) {\n                this.links[i].index = i;\n            }\n        },\n\n        /**\n         * Returns a clone of this graph.\n         */\n        clone: function(saveMapping) {\n            var copy = new Graph();\n            var save = Utils.isDefined(saveMapping) && saveMapping === true;\n            if (save) {\n                copy.nodeMap = new Dictionary();\n                copy.linkMap = new Dictionary();\n            }\n            // we need a map even if the saveMapping is not set\n            var map = new Dictionary();\n            Utils.forEach(this.nodes, function(nOriginal) {\n                var nCopy = nOriginal.clone();\n                map.set(nOriginal, nCopy);\n                copy._addNode(nCopy);\n\n                if (save) {\n                    copy.nodeMap.set(nCopy, nOriginal);\n                }\n            });\n\n            Utils.forEach(this.links, function(linkOriginal) {\n                if (map.containsKey(linkOriginal.source) && map.containsKey(linkOriginal.target)) {\n                    var linkCopy = copy.addLink(map.get(linkOriginal.source), map.get(linkOriginal.target));\n                    if (save) {\n                        copy.linkMap.set(linkCopy, linkOriginal);\n                    }\n                }\n            });\n\n            return copy;\n        },\n\n        /**\n         * The parsing allows a quick way to create graphs.\n         *  - [\"n1->n2\", \"n2->n3\"]: creates the three nodes and adds the links\n         *  - [\"n1->n2\", {id: \"QSDF\"}, \"n2->n3\"]: same as previous but also performs a deep extend of the link between n1 and n2 with the given object.\n         */\n        linearize: function(addIds) {\n            return Graph.Utils.linearize(this, addIds);\n        },\n\n        /**\n         * Performs a depth-first traversal starting at the given node.\n         * @param startNode a node or id of a node in this graph\n         * @param action\n         */\n        depthFirstTraversal: function(startNode, action) {\n            if (Utils.isUndefined(startNode)) {\n                throw \"You need to supply a starting node.\";\n            }\n            if (Utils.isUndefined(action)) {\n                throw \"You need to supply an action.\";\n            }\n            if (!this.hasNode(startNode)) {\n                throw \"The given start-node is not part of this graph\";\n            }\n            var foundNode = this.getNode(startNode);// case the given one is an Id\n            var visited = [];\n            this._dftIterator(foundNode, action, visited);\n        },\n\n        _dftIterator: function(node, action, visited) {\n\n            action(node);\n            visited.push(node);\n            var children = node.getChildren();\n            for (var i = 0, len = children.length; i < len; i++) {\n                var child = children[i];\n                if (contains(visited, child)) {\n                    continue;\n                }\n                this._dftIterator(child, action, visited);\n            }\n        },\n\n        /**\n         * Performs a breadth-first traversal starting at the given node.\n         * @param startNode a node or id of a node in this graph\n         * @param action\n         */\n        breadthFirstTraversal: function(startNode, action) {\n\n            if (Utils.isUndefined(startNode)) {\n                throw \"You need to supply a starting node.\";\n            }\n            if (Utils.isUndefined(action)) {\n                throw \"You need to supply an action.\";\n            }\n\n            if (!this.hasNode(startNode)) {\n                throw \"The given start-node is not part of this graph\";\n            }\n            var foundNode = this.getNode(startNode);// case the given one is an Id\n            var queue = new Queue();\n            var visited = [];\n            queue.enqueue(foundNode);\n\n            while (queue.length > 0) {\n                var node = queue.dequeue();\n                action(node);\n                visited.push(node);\n                var children = node.getChildren();\n                for (var i = 0, len = children.length; i < len; i++) {\n                    var child = children[i];\n                    if (contains(visited, child) || contains(queue, child)) {\n                        continue;\n                    }\n                    queue.enqueue(child);\n                }\n            }\n        },\n\n        /**\n         * This is the classic Tarjan algorithm for strongly connected components.\n         * See e.g. http://en.wikipedia.org/wiki/Tarjan's_strongly_connected_components_algorithm\n         * @param excludeSingleItems Whether isolated nodes should be excluded from the analysis.\n         * @param node The start node from which the analysis starts.\n         * @param indices  Numbers the nodes consecutively in the order in which they are discovered.\n         * @param lowLinks The smallest index of any node known to be reachable from the node, including the node itself\n         * @param connected The current component.\n         * @param stack The bookkeeping stack of things to visit.\n         * @param index The counter of visited nodes used to assign the indices.\n         * @private\n         */\n        _stronglyConnectedComponents: function(excludeSingleItems, node, indices, lowLinks, connected, stack, index) {\n            indices.add(node, index);\n            lowLinks.add(node, index);\n            index++;\n\n            stack.push(node);\n\n            var children = node.getChildren(), next;\n            for (var i = 0, len = children.length; i < len; i++) {\n                next = children[i];\n                if (!indices.containsKey(next)) {\n                    this._stronglyConnectedComponents(excludeSingleItems, next, indices, lowLinks, connected, stack, index);\n                    lowLinks.add(node, Math.min(lowLinks.get(node), lowLinks.get(next)));\n                }\n                else if (contains(stack, next)) {\n                    lowLinks.add(node, Math.min(lowLinks.get(node), indices.get(next)));\n                }\n            }\n            // If v is a root node, pop the stack and generate a strong component\n            if (lowLinks.get(node) === indices.get(node)) {\n                var component = [];\n                do {\n                    next = stack.pop();\n                    component.push(next);\n                }\n                while (next !== node);\n                if (!excludeSingleItems || (component.length > 1)) {\n                    connected.push(component);\n                }\n            }\n        },\n\n        /**\n         * Returns the cycles found in this graph.\n         * The returned arrays consist of the nodes which are strongly coupled.\n         * @param excludeSingleItems Whether isolated nodes should be excluded.\n         * @returns {Array} The array of cycles found.\n         */\n        findCycles: function(excludeSingleItems) {\n            if (Utils.isUndefined(excludeSingleItems)) {\n                excludeSingleItems = true;\n            }\n            var indices = new Dictionary();\n            var lowLinks = new Dictionary();\n            var connected = [];\n            var stack = [];\n            for (var i = 0, len = this.nodes.length; i < len; i++) {\n                var node = this.nodes[i];\n                if (indices.containsKey(node)) {\n                    continue;\n                }\n                this._stronglyConnectedComponents(excludeSingleItems, node, indices, lowLinks, connected, stack, 0);\n            }\n            return connected;\n        },\n\n        /**\n         * Returns whether this graph is acyclic.\n         * @returns {*}\n         */\n        isAcyclic: function() {\n            return Utils.isEmpty(this.findCycles());\n        },\n\n        /**\n         * Returns whether the given graph is a subgraph of this one.\n         * @param other Another graph instance.\n         */\n        isSubGraph: function(other) {\n            var otherArray = other.linearize();\n            var thisArray = this.linearize();\n            return Utils.all(otherArray, function(s) {\n                return contains(thisArray, s);\n            });\n        },\n\n        /**\n         *  Makes an acyclic graph from the current (connected) one.\n         * * @returns {Array} The reversed links.\n         */\n        makeAcyclic: function() {\n            // if empty or almost empty\n            if (this.isEmpty() || this.nodes.length <= 1 || this.links.length <= 1) {\n                return [];\n            }\n            // singular case of just two nodes\n            if (this.nodes.length == 2) {\n                var result = [];\n                if (this.links.length > 1) {\n                    var oneLink = this.links[0];\n                    var oneNode = oneLink.source;\n                    for (var i = 0, len = this.links.length; i < len; i++) {\n                        var link = this.links[i];\n                        if (link.source == oneNode) {\n                            continue;\n                        }\n                        var rev = link.reverse();\n                        result.push(rev);\n                    }\n                }\n                return result;\n            }\n\n            var copy = this.clone(true); // copy.nodeMap tells you the mapping\n            var N = this.nodes.length;\n\n            var intensityCatalog = new Dictionary();\n\n            /**\n             * If there are both incoming and outgoing links this will return the flow intensity (out-in).\n             * Otherwise the node acts as a flow source with N specifying the (equal) intensity.\n             * @param node\n             * @returns {number}\n             */\n            var flowIntensity = function(node) {\n                if (node.outgoing.length === 0) {\n                    return (2 - N);\n                }\n                else if (node.incoming.length === 0) {\n                    return (N - 2);\n                }\n                else {\n                    return node.outgoing.length - node.incoming.length;\n                }\n            };\n\n            /**\n             * Collects the nodes with the same intensity.\n             * @param node\n             * @param intensityCatalog\n             */\n            var catalogEqualIntensity = function(node, intensityCatalog) {\n                var intensity = flowIntensity(node, N);\n                if (!intensityCatalog.containsKey(intensity)) {\n                    intensityCatalog.set(intensity, []);\n                }\n                intensityCatalog.get(intensity).push(node);\n            };\n\n            Utils.forEach(copy.nodes, function(v) {\n                catalogEqualIntensity(v, intensityCatalog);\n            });\n\n            var sourceStack = [];\n            var targetStack = [];\n\n            while (copy.nodes.length > 0) {\n                var source, target, intensity;\n                if (intensityCatalog.containsKey(2 - N)) {\n                    var targets = intensityCatalog.get(2 - N); // nodes without outgoings\n                    while (targets.length > 0) {\n                        target = targets.pop();\n                        for (var li = 0; li < target.links.length; li++) {\n                            var targetLink = target.links[li];\n                            source = targetLink.getComplement(target);\n                            intensity = flowIntensity(source, N);\n                            Utils.remove(intensityCatalog.get(intensity), source);\n                            source.removeLink(targetLink);\n                            catalogEqualIntensity(source, intensityCatalog);\n                        }\n                        copy._removeNode(target);\n                        targetStack.unshift(target);\n                    }\n                }\n\n                // move sources to sourceStack\n                if (intensityCatalog.containsKey(N - 2)) {\n                    var sources = intensityCatalog.get(N - 2); // nodes without incomings\n                    while (sources.length > 0) {\n                        source = sources.pop();\n                        for (var si = 0; si < source.links.length; si++) {\n                            var sourceLink = source.links[si];\n                            target = sourceLink.getComplement(source);\n                            intensity = flowIntensity(target, N);\n                            Utils.remove(intensityCatalog.get(intensity), target);\n                            target.removeLink(sourceLink);\n                            catalogEqualIntensity(target, intensityCatalog);\n                        }\n                        sourceStack.push(source);\n                        copy._removeNode(source);\n                    }\n                }\n\n                if (copy.nodes.length > 0) {\n                    for (var k = N - 3; k > 2 - N; k--) {\n                        if (intensityCatalog.containsKey(k) &&\n                            intensityCatalog.get(k).length > 0) {\n                            var maxdiff = intensityCatalog.get(k);\n                            var v = maxdiff.pop();\n                            for (var ri = 0; ri < v.links.length; ri++) {\n                                var ril = v.links[ri];\n                                var u = ril.getComplement(v);\n                                intensity = flowIntensity(u, N);\n                                Utils.remove(intensityCatalog.get(intensity), u);\n                                u.removeLink(ril);\n                                catalogEqualIntensity(u, intensityCatalog);\n                            }\n                            sourceStack.push(v);\n                            copy._removeNode(v);\n                            break;\n                        }\n                    }\n                }\n            }\n\n            sourceStack = sourceStack.concat(targetStack);\n\n            var vertexOrder = new Dictionary();\n            for (var kk = 0; kk < this.nodes.length; kk++) {\n                vertexOrder.set(copy.nodeMap.get(sourceStack[kk]), kk);\n            }\n\n            var reversedEdges = [];\n            Utils.forEach(this.links, function(link) {\n                if (vertexOrder.get(link.source) > vertexOrder.get(link.target)) {\n                    link.reverse();\n                    reversedEdges.push(link);\n                }\n            });\n            return reversedEdges;\n        }\n    });\n\n    /**\n     * A collection of predefined graphs for demo and testing purposes.\n     */\n    Graph.Predefined = {\n        /**\n         * Eight-shapes graph all connected in a cycle.\n         * @returns {*}\n         * @constructor\n         */\n        EightGraph: function() {\n            return Graph.Utils.parse([ \"1->2\", \"2->3\", \"3->4\", \"4->1\", \"3->5\", \"5->6\", \"6->7\", \"7->3\"]);\n        },\n\n        /**\n         * Creates a typical mindmap diagram.\n         * @returns {*}\n         * @constructor\n         */\n        Mindmap: function() {\n            return Graph.Utils.parse([\"0->1\", \"0->2\", \"0->3\", \"0->4\", \"0->5\", \"1->6\", \"1->7\", \"7->8\", \"2->9\", \"9->10\", \"9->11\", \"3->12\",\n                \"12->13\", \"13->14\", \"4->15\", \"4->16\", \"15->17\", \"15->18\", \"18->19\", \"18->20\", \"14->21\", \"14->22\", \"5->23\", \"23->24\", \"23->25\", \"6->26\"]);\n        },\n\n        /**\n         * Three nodes connected in a cycle.\n         * @returns {*}\n         * @constructor\n         */\n        ThreeGraph: function() {\n            return Graph.Utils.parse([ \"1->2\", \"2->3\", \"3->1\"]);\n        },\n\n        /**\n         * A tree with each node having two children.\n         * @param levels How many levels the binary tree should have.\n         * @returns {diagram.Graph}\n         * @constructor\n         */\n        BinaryTree: function(levels) {\n            if (Utils.isUndefined(levels)) {\n                levels = 5;\n            }\n            return Graph.Utils.createBalancedTree(levels, 2);\n        },\n\n        /**\n         * A linear graph (discrete line segment).\n         * @param length How many segments (the node count is hence (length+1)).\n         * @returns {diagram.Graph}\n         * @constructor\n         */\n        Linear: function(length) {\n            if (Utils.isUndefined(length)) {\n                length = 10;\n            }\n            return Graph.Utils.createBalancedTree(length, 1);\n        },\n\n        /**\n         * A standard tree-graph with the specified levels and children (siblings) count.\n         * Note that for a balanced tree of level N and sibling count s, counting the root as level zero:\n         *  - NodeCount = (1-s^(N+1))/(1-s)]\n         *  - LinkCount = s.(1-s^N)/(1-s)\n         * @param levels How many levels the tree should have.\n         * @param siblingsCount How many siblings each level should have.\n         * @returns {diagram.Graph}\n         * @constructor\n         */\n        Tree: function(levels, siblingsCount) {\n            return Graph.Utils.createBalancedTree(levels, siblingsCount);\n        },\n\n        /**\n         * Creates a forest.\n         * Note that for a balanced forest of level N, sibling count s and tree count t, counting the root as level zero:\n         *  - NodeCount = t.(1-s^(N+1))/(1-s)]\n         *  - LinkCount = t.s.(1-s^N)/(1-s)\n         * @param levels How many levels the tree should have.\n         * @param siblingsCount How many siblings each level should have.\n         * @param trees The amount of trees the forest should have.\n         * @returns {diagram.Graph}\n         * @constructor\n         */\n        Forest: function(levels, siblingsCount, trees) {\n            return Graph.Utils.createBalancedForest(levels, siblingsCount, trees);\n        },\n\n        /**\n         * A workflow-like graph with cycles.\n         * @returns {*}\n         * @constructor\n         */\n        Workflow: function() {\n            return Graph.Utils.parse(\n                [\"0->1\", \"1->2\", \"2->3\", \"1->4\", \"4->3\", \"3->5\", \"5->6\", \"6->3\", \"6->7\", \"5->4\"]\n            );\n        },\n\n        /**\n         * A grid graph with the direction of the links avoiding cycles.\n         * Node count: (n+1).(m+1)\n         * Link count: n.(m+1) + m.(n+1)\n         * @param n Horizontal count of grid cells. If zero this will result in a linear graph.\n         * @param m Vertical count of grid cells. If zero this will result in a linear graph.\n         * @constructor\n         */\n        Grid: function(n, m) {\n            var g = new diagram.Graph();\n            if (n <= 0 && m <= 0) {\n                return g;\n            }\n\n            for (var i = 0; i < n + 1; i++) {\n                var previous = null;\n                for (var j = 0; j < m + 1; j++) {\n                    // using x-y coordinates to name the nodes\n                    var node = new Node(i.toString() + \".\" + j.toString());\n                    g.addNode(node);\n                    if (previous) {\n                        g.addLink(previous, node);\n                    }\n                    if (i > 0) {\n                        var left = g.getNode((i - 1).toString() + \".\" + j.toString());\n                        g.addLink(left, node);\n                    }\n                    previous = node;\n                }\n            }\n            return g;\n        }\n\n    };\n\n    /**\n     * Graph generation and other utilities.\n     */\n    Graph.Utils = {\n        /**\n         * The parsing allows a quick way to create graphs.\n         *  - [\"n1->n2\", \"n2->n3\"]: creates the three nodes and adds the links\n         *  - [\"n1->n2\", {id: \"id177\"}, \"n2->n3\"]: same as previous but also performs a deep extend of the link between n1 and n2 with the given object.\n         */\n        parse: function(graphString) {\n\n            var previousLink, graph = new diagram.Graph(), parts = graphString.slice();\n            for (var i = 0, len = parts.length; i < len; i++) {\n                var part = parts[i];\n                if (Utils.isString(part)) // link spec\n                {\n                    if (part.indexOf(\"->\") < 0) {\n                        throw \"The link should be specified as 'a->b'.\";\n                    }\n                    var p = part.split(\"->\");\n                    if (p.length != 2) {\n                        throw \"The link should be specified as 'a->b'.\";\n                    }\n                    previousLink = new Link(p[0], p[1]);\n                    graph.addLink(previousLink);\n                }\n                if (Utils.isObject(part)) {\n                    if (!previousLink) {\n                        throw \"Specification found before Link definition.\";\n                    }\n                    kendo.deepExtend(previousLink, part);\n                }\n            }\n            return graph;\n        },\n\n        /**\n         * Returns a linearized representation of the given Graph.\n         * See also the Graph.Utils.parse method for the inverse operation.\n         */\n        linearize: function(graph, addIds) {\n            if (Utils.isUndefined(graph)) {\n                throw \"Expected an instance of a Graph object in slot one.\";\n            }\n            if (Utils.isUndefined(addIds)) {\n                addIds = false;\n            }\n            var lin = [];\n            for (var i = 0, len = graph.links.length; i < len; i++) {\n                var link = graph.links[i];\n                lin.push(link.source.id + \"->\" + link.target.id);\n                if (addIds) {\n                    lin.push({ id: link.id });\n                }\n            }\n            return lin;\n        },\n\n        /**\n         * The method used by the diagram creation to instantiate a shape.\n         * @param kendoDiagram The Kendo diagram where the diagram will be created.\n         * @param p The position at which to place the shape.\n         * @param shapeDefaults Optional Shape options.\n         * @param id Optional identifier of the shape.\n         * @returns {*}\n         * @private\n         */\n        _addShape: function(kendoDiagram, p, id, shapeDefaults) {\n            if (Utils.isUndefined(p)) {\n                p = new diagram.Point(0, 0);\n            }\n\n            if (Utils.isUndefined(id)) {\n                id = randomId();\n            }\n\n            shapeDefaults = kendo.deepExtend({\n                width: 20,\n                height: 20,\n                id: id,\n                radius: 10,\n                fill: \"#778899\",\n                data: \"circle\",\n                undoable: false,\n                x: p.x,\n                y: p.y\n            }, shapeDefaults);\n\n            return kendoDiagram.addShape(shapeDefaults);\n        },\n        /**\n         * The method used by the diagram creation to instantiate a connection.\n         * @param diagram he Kendo diagram where the diagram will be created.\n         * @param from The source shape.\n         * @param to The target shape.\n         * @param options Optional Connection options.\n         * @returns {*}\n         * @private\n         */\n        _addConnection: function(diagram, from, to, options) {\n            return diagram.connect(from, to, options);\n        },\n\n        /**\n         * Creates a diagram from the given Graph.\n         * @param diagram The Kendo diagram where the diagram will be created.\n         * @param graph The graph structure defining the diagram.\n         */\n        createDiagramFromGraph: function(diagram, graph, doLayout, randomSize) {\n\n            if (Utils.isUndefined(diagram)) {\n                throw \"The diagram surface is undefined.\";\n            }\n            if (Utils.isUndefined(graph)) {\n                throw \"No graph specification defined.\";\n            }\n            if (Utils.isUndefined(doLayout)) {\n                doLayout = true;\n            }\n            if (Utils.isUndefined(randomSize)) {\n                randomSize = false;\n            }\n\n            var width = diagram.element.clientWidth || 200;\n            var height = diagram.element.clientHeight || 200;\n            var map = [], node, shape;\n            for (var i = 0, len = graph.nodes.length; i < len; i++) {\n                node = graph.nodes[i];\n                var p = node.position;\n                if (Utils.isUndefined(p)) {\n                    if (Utils.isDefined(node.x) && Utils.isDefined(node.y)) {\n                        p = new Point(node.x, node.y);\n                    }\n                    else {\n                        p = new Point(Utils.randomInteger(10, width - 20), Utils.randomInteger(10, height - 20));\n                    }\n                }\n                var opt = {};\n\n                if (node.id === \"0\") {\n                    /* kendo.deepExtend(opt,\n                     {\n                     fill: \"Orange\",\n                     data: 'circle',\n                     width: 100,\n                     height: 100,\n                     center: new Point(50, 50)\n                     });*/\n                }\n                else if (randomSize) {\n                    kendo.deepExtend(opt, {\n                        width: Math.random() * 150 + 20,\n                        height: Math.random() * 80 + 50,\n                        data: 'rectangle',\n                        fill: {\n                            color: \"#778899\"\n                        }\n                    });\n                }\n\n                shape = this._addShape(diagram, p, node.id, opt);\n                //shape.content(node.id);\n\n                var bounds = shape.bounds();\n                if (Utils.isDefined(bounds)) {\n                    node.x = bounds.x;\n                    node.y = bounds.y;\n                    node.width = bounds.width;\n                    node.height = bounds.height;\n                }\n                map[node.id] = shape;\n            }\n            for (var gli = 0; gli < graph.links.length; gli++) {\n                var link = graph.links[gli];\n                var sourceShape = map[link.source.id];\n                if (Utils.isUndefined(sourceShape)) {\n                    continue;\n                }\n                var targetShape = map[link.target.id];\n                if (Utils.isUndefined(targetShape)) {\n                    continue;\n                }\n                this._addConnection(diagram, sourceShape, targetShape, { id: link.id });\n\n            }\n            if (doLayout) {\n                var l = new diagram.SpringLayout(diagram);\n                l.layoutGraph(graph, { limitToView: false });\n                for (var shi = 0; shi < graph.nodes.length; shi++) {\n                    node = graph.nodes[shi];\n                    shape = map[node.id];\n                    shape.bounds(new Rect(node.x, node.y, node.width, node.height));\n                }\n            }\n        },\n\n        /**\n         * Creates a balanced tree with the specified number of levels and siblings count.\n         * Note that for a balanced tree of level N and sibling count s, counting the root as level zero:\n         *  - NodeCount = (1-s^(N+1))/(1-s)]\n         *  - LinkCount = s.(1-s^N)/(1-s)\n         * @param levels How many levels the tree should have.\n         * @param siblingsCount How many siblings each level should have.\n         * @returns {diagram.Graph}\n         */\n        createBalancedTree: function(levels, siblingsCount) {\n            if (Utils.isUndefined(levels)) {\n                levels = 3;\n            }\n            if (Utils.isUndefined(siblingsCount)) {\n                siblingsCount = 3;\n            }\n\n            var g = new diagram.Graph(), counter = -1, lastAdded = [], news;\n            if (levels <= 0 || siblingsCount <= 0) {\n                return g;\n            }\n            var root = new Node((++counter).toString());\n            g.addNode(root);\n            g.root = root;\n            lastAdded.push(root);\n            for (var i = 0; i < levels; i++) {\n                news = [];\n                for (var j = 0; j < lastAdded.length; j++) {\n                    var parent = lastAdded[j];\n                    for (var k = 0; k < siblingsCount; k++) {\n                        var item = new Node((++counter).toString());\n                        g.addLink(parent, item);\n                        news.push(item);\n                    }\n                }\n                lastAdded = news;\n            }\n            return g;\n        },\n\n        /**\n         * Creates a balanced tree with the specified number of levels and siblings count.\n         * Note that for a balanced forest of level N, sibling count s and tree count t, counting the root as level zero:\n         *  - NodeCount = t.(1-s^(N+1))/(1-s)]\n         *  - LinkCount = t.s.(1-s^N)/(1-s)\n         * @param levels How many levels the tree should have.\n         * @param siblingsCount How many siblings each level should have.\n         * @returns {diagram.Graph}\n         * @param treeCount The number of trees the forest should have.\n         */\n        createBalancedForest: function(levels, siblingsCount, treeCount) {\n            if (Utils.isUndefined(levels)) {\n                levels = 3;\n            }\n            if (Utils.isUndefined(siblingsCount)) {\n                siblingsCount = 3;\n            }\n            if (Utils.isUndefined(treeCount)) {\n                treeCount = 5;\n            }\n            var g = new diagram.Graph(), counter = -1, lastAdded = [], news;\n            if (levels <= 0 || siblingsCount <= 0 || treeCount <= 0) {\n                return g;\n            }\n\n            for (var t = 0; t < treeCount; t++) {\n                var root = new Node((++counter).toString());\n                g.addNode(root);\n                lastAdded = [root];\n                for (var i = 0; i < levels; i++) {\n                    news = [];\n                    for (var j = 0; j < lastAdded.length; j++) {\n                        var parent = lastAdded[j];\n                        for (var k = 0; k < siblingsCount; k++) {\n                            var item = new Node((++counter).toString());\n                            g.addLink(parent, item);\n                            news.push(item);\n                        }\n                    }\n                    lastAdded = news;\n                }\n            }\n            return g;\n        },\n\n        /**\n         * Creates a random graph (uniform distribution) with the specified amount of nodes.\n         * @param nodeCount The amount of nodes the random graph should have.\n         * @param maxIncidence The maximum allowed degree of the nodes.\n         * @param isTree Whether the return graph should be a tree (default: false).\n         * @returns {diagram.Graph}\n         */\n        createRandomConnectedGraph: function(nodeCount, maxIncidence, isTree) {\n\n            /* Swa's Mathematica export of random Bernoulli graphs\n             gr[n_,p_]:=Module[{g=RandomGraph[BernoulliGraphDistribution[n,p],VertexLabels->\"Name\",DirectedEdges->True]},\n             While[Not[ConnectedGraphQ[g]],g=RandomGraph[BernoulliGraphDistribution[n,p],VertexLabels->\"Name\",DirectedEdges->True]];g];\n             project[a_]:=(\"\\\"\"<>ToString[Part[#,1]]<>\"->\"<>ToString[Part[#,2]]<>\"\\\"\")&     @ a;\n             export[g_]:=project/@ EdgeList[g]\n             g = gr[12,.1]\n             export [g]\n             */\n\n            if (Utils.isUndefined(nodeCount)) {\n                nodeCount = 40;\n            }\n            if (Utils.isUndefined(maxIncidence)) {\n                maxIncidence = 4;\n            }\n            if (Utils.isUndefined(isTree)) {\n                isTree = false;\n            }\n\n            var g = new diagram.Graph(), counter = -1;\n            if (nodeCount <= 0) {\n                return g;\n            }\n\n            var root = new Node((++counter).toString());\n            g.addNode(root);\n            if (nodeCount === 1) {\n                return g;\n            }\n            if (nodeCount > 1) {\n                // random tree\n                for (var i = 1; i < nodeCount; i++) {\n                    var poolNode = g.takeRandomNode([], maxIncidence);\n                    if (!poolNode) {\n                        //failed to find one so the graph will have less nodes than specified\n                        break;\n                    }\n                    var newNode = g.addNode(i.toString());\n                    g.addLink(poolNode, newNode);\n                }\n                if (!isTree && nodeCount > 1) {\n                    var randomAdditions = Utils.randomInteger(1, nodeCount);\n                    for (var ri = 0; ri < randomAdditions; ri++) {\n                        var n1 = g.takeRandomNode([], maxIncidence);\n                        var n2 = g.takeRandomNode([], maxIncidence);\n                        if (n1 && n2 && !g.areConnected(n1, n2)) {\n                            g.addLink(n1, n2);\n                        }\n                    }\n                }\n                return g;\n            }\n        },\n\n        /**\n         * Generates a random diagram.\n         * @param diagram The host diagram.\n         * @param shapeCount The number of shapes the random diagram should contain.\n         * @param maxIncidence The maximum degree the shapes can have.\n         * @param isTree Whether the generated diagram should be a tree\n         * @param layoutType The optional layout type to apply after the diagram is generated.\n         */\n        randomDiagram: function(diagram, shapeCount, maxIncidence, isTree, randomSize) {\n            var g = kendo.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(shapeCount, maxIncidence, isTree);\n            Graph.Utils.createDiagramFromGraph(diagram, g, false, randomSize);\n        }\n    };\n\n    kendo.deepExtend(diagram, {\n        init: function(element) {\n            kendo.init(element, diagram.ui);\n        },\n\n        Point: Point,\n        Intersect: Intersect,\n        Geometry: Geometry,\n        Rect: Rect,\n        Size: Size,\n        RectAlign: RectAlign,\n        Matrix: Matrix,\n        MatrixVector: MatrixVector,\n        normalVariable: normalVariable,\n        randomId: randomId,\n        Dictionary: Dictionary,\n        HashTable: HashTable,\n        Queue: Queue,\n        Set: Set,\n        Node: Node,\n        Link: Link,\n        Graph: Graph,\n        PathDefiner: PathDefiner\n    });\n})(window.kendo.jQuery);\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 32549:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"../../kendo.dataviz.core\");\n\n/***/ }),\n\n/***/ 12273:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./utils\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(70834);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}