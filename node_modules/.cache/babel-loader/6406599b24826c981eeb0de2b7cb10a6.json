{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/******/\n(function () {\n  // webpackBootstrap\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\n    10048:\n    /***/\n    function (module, exports, __webpack_require__) {\n      var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n      (function (f, define) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(54148), __webpack_require__(63192), __webpack_require__(14639), __webpack_require__(66098), __webpack_require__(94421), __webpack_require__(88615), __webpack_require__(81477), __webpack_require__(75207), __webpack_require__(34815), __webpack_require__(18637), __webpack_require__(21474), __webpack_require__(69341), __webpack_require__(52220), __webpack_require__(1291), __webpack_require__(20648), __webpack_require__(63401)], __WEBPACK_AMD_DEFINE_FACTORY__ = f, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      })(function () {\n        var __meta__ = {\n          id: \"scheduler\",\n          name: \"Scheduler\",\n          category: \"web\",\n          description: \"The Scheduler is an event calendar.\",\n          depends: [\"dropdownlist\", \"editable\", \"multiselect\", \"window\", \"datepicker\", \"datetimepicker\", \"scheduler.recurrence\", \"scheduler.view\"],\n          features: [{\n            id: \"scheduler-dayview\",\n            name: \"Scheduler Day View\",\n            description: \"Scheduler Day View\",\n            depends: [\"scheduler.dayview\"]\n          }, {\n            id: \"scheduler-agendaview\",\n            name: \"Scheduler Agenda View\",\n            description: \"Scheduler Agenda View\",\n            depends: [\"scheduler.agendaview\"]\n          }, {\n            id: \"scheduler-monthview\",\n            name: \"Scheduler Month View\",\n            description: \"Scheduler Month View\",\n            depends: [\"scheduler.monthview\"]\n          }, {\n            id: \"scheduler-timelineview\",\n            name: \"Scheduler Timeline View\",\n            description: \"Scheduler Timeline View\",\n            depends: [\"scheduler.timelineview\"]\n          }, {\n            id: \"scheduler-yearview\",\n            name: \"Scheduler Year View\",\n            description: \"Scheduler Year View\",\n            depends: [\"scheduler.yearview\"]\n          }, {\n            id: \"scheduler-mobile\",\n            name: \"Scheduler adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [\"dialog\", \"pane\", \"switch\"]\n          }, {\n            id: \"scheduler-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export the scheduler events as PDF\",\n            depends: [\"pdf\", \"drawing\"]\n          }, {\n            id: \"scheduler-timezones\",\n            name: \"Timezones\",\n            description: \"Allow selecting timezones different than Etc/UTC\",\n            depends: [\"timezones\"]\n          }]\n        };\n\n        (function ($, undefined) {\n          var kendo = window.kendo,\n              date = kendo.date,\n              MS_PER_DAY = date.MS_PER_DAY,\n              getDate = date.getDate,\n              getMilliseconds = kendo.date.getMilliseconds,\n              recurrence = kendo.recurrence,\n              keys = $.extend({\n            F10: 121\n          }, kendo.keys),\n              ui = kendo.ui,\n              Widget = ui.Widget,\n              DataBoundWidget = ui.DataBoundWidget,\n              STRING = \"string\",\n              Popup = ui.Popup,\n              Calendar = ui.Calendar,\n              DataSource = kendo.data.DataSource,\n              isPlainObject = $.isPlainObject,\n              extend = $.extend,\n              toString = Object.prototype.toString,\n              isArray = Array.isArray,\n              NS = \".kendoScheduler\",\n              CLICK = \"click\",\n              MOUSEDOWN = \"mousedown\",\n              TOUCHSTART = kendo.support.pointers ? \"pointerdown\" : \"touchstart\",\n              TOUCHMOVE = kendo.support.pointers ? \"pointermove\" : \"touchmove\",\n              TOUCHEND = kendo.support.pointers ? \"pointerup\" : \"touchend\",\n              MOUSEMOVE = kendo.support.mousemove,\n              CHANGE = \"change\",\n              PROGRESS = \"progress\",\n              ERROR = \"error\",\n              CANCEL = \"cancel\",\n              REMOVE = \"remove\",\n              RESET = \"resetSeries\",\n              SAVE = \"save\",\n              ADD = \"add\",\n              EDIT = \"edit\",\n              DISABLED = \"disabled\",\n              OPTION = \"option\",\n              FOCUSEDSTATE = \"k-focus\",\n              VIEWSSELECTOR = \".k-scheduler-views\",\n              INVERSECOLORCLASS = \"k-event-inverse\",\n              valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/,\n              TODAY = getDate(new Date()),\n              EXCEPTION_SEPARATOR = \",\",\n              OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g,\n              RECURRENCE_EXCEPTION = \"recurrenceException\",\n              DELETECONFIRM = \"Are you sure you want to delete this event?\",\n              DELETERECURRING = \"Do you want to delete only this event occurrence or the whole series?\",\n              EDITRECURRING = \"Do you want to edit only this event occurrence or the whole series?\",\n              DELETERECURRINGCONFIRM = \"Are you sure you want to delete this event occurrence?\",\n              RESETSERIESCONFIRM = \"Are you sure you want to reset the whole series?\",\n              DELETESERIESCONFIRM = \"Are you sure you want to delete the whole series?\",\n              COMMANDBUTTONTMPL = '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid #=className#\" #=attr#><span class=\"k-button-text\">#=text#</span></button>',\n              VIEWS_DROPDOWN_TEMPLATE = kendo.template('' + '<select aria-label=\"#= label #\" class=\"k-picker k-dropdown-list k-dropdown k-views-dropdown\" tabindex=\"-1\">' + '#for (var view in views) {#' + '<option value=\"#= view #\">${views[view].title}</option>' + '#}#' + '</select>'),\n              TOOLBARTEMPLATE = kendo.template('' + '<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' + '# if (pdf) { #' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span><span class=\"k-button-text\">${messages.pdf}</span></button>' + '# } #' + '<span class=\"k-scheduler-navigation k-button-group\">' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-nav-today\" title=\"${messages.today}\"><span class=\"k-button-text\">${messages.today}</span></button>' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\" title=\"${messages.previous}\" aria-label=\"${messages.previous}\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></button>' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\" title=\"${messages.next}\" aria-label=\"${messages.next}\"><span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span></button>' + '</span>' + '<a tabindex=\"-1\" role=\"button\" href=\"\\\\#\" class=\"k-nav-current\" aria-live=\"polite\">' + '<span class=\"k-icon k-i-calendar\"></span>' + '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' + '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' + '</a>' + '<span class=\"k-spacer k-toolbar-spacer\"></span>' + '# if (search) { #' + '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' + '<input tabindex=\"-1\" autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' + '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' + '</span>' + '# } #' + '# if (viewsCount === 1) { #' + '<a role=\"button\" tabindex=\"-1\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\" aria-label=\"${messages.refresh}\">' + '<span class=\"k-button-icon k-icon k-i-reload\"></span>' + '</a>' + '# } else { #' + '<span class=\"k-scheduler-views-wrapper\">' + '<span class=\"k-scheduler-views k-button-group\">' + '# for (var view in views) { #' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><span class=\"k-button-text\">${views[view].title}</span></button>' + '# } #' + '</span>' + '</span>' + '# } #' + '</div>'),\n              MOBILETOOLBARTEMPLATE = kendo.template('<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' + '<span class=\"k-scheduler-tools k-button-group\">' + '# if (pdf) { #' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span></button>' + '# } #' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-calendar\"><span class=\"k-button-icon k-icon k-i-calendar\"></span></button>' + \"# if (editable) { #\" + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-create-event\"><span class=\"k-button-icon k-icon k-i-plus\"></span></button>' + \"# } #\" + '</span>' + '<span class=\"k-spacer k-toolbar-spacer\"></span>' + '# if (search) { #' + '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' + '<input tabindex=\"-1\" autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-scheduler-search-input k-input-inner\" />' + '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' + '</span>' + '# } #' + '#if(viewsCount === 1){#' + '<a role=\"button\" tabindex=\"-1\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\">' + '<span class=\"k-button-icon k-icon k-i-reload\"></span>' + '</a>' + '#} else {#' + '<select tabindex=\"-1\" class=\"k-picker k-dropdown-list k-dropdown k-scheduler-mobile-views\">' + '#for(var view in views){#' + '<option class=\"k-view-#= view.toLowerCase() #\" value=\"#=view#\">${views[view].title}</option>' + '#}#' + '</select>' + '#}#' + '</div>' + '<div class=\"k-scheduler-toolbar k-toolbar\">' + '<span class=\"k-scheduler-navigation\">' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-left\"></span></button>' + '<span class=\"k-nav-current\">' + '<span class=\"k-m-date-format\" data-#=ns#bind=\"text: formattedMobileDate\"></span>' + '<span class=\"k-y-date-format\" data-#=ns#bind=\"text: formattedYear\"></span>' + '</span>' + '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-right\"></span></button>' + '</span>' + '</div>'),\n              MOBILEDATERANGEEDITOR = function (container, options) {\n            var attr = {\n              name: options.field,\n              title: options.title\n            };\n            var isAllDay = options.model.isAllDay;\n            var dateTimeValidate = kendo.attr(\"validate\") + \"='\" + !isAllDay + \"'\";\n            var dateValidate = kendo.attr(\"validate\") + \"='\" + !!isAllDay + \"'\";\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n            $('<input type=\"datetime-local\" required ' + kendo.attr(\"type\") + '=\"datetime-local\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n            $('<input type=\"date\" required ' + kendo.attr(\"type\") + '=\"date\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n          },\n              DATERANGEEDITOR = function (container, options) {\n            var attr = {\n              name: options.field,\n              title: options.title\n            },\n                isAllDay = options.model.isAllDay,\n                dateTimeValidate = kendo.attr(\"validate\") + \"='\" + !isAllDay + \"' \",\n                dateValidate = kendo.attr(\"validate\") + \"='\" + !!isAllDay + \"' \";\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datetimepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n            $('<span ' + kendo.attr(\"bind\") + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n\n            if (options.field === \"end\") {\n              $('<span ' + kendo.attr(\"bind\") + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n            }\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n          },\n              RECURRENCEEDITOR = function (container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').attr({\n              name: options.field\n            }).appendTo(container).kendoRecurrenceEditor({\n              start: options.model.start,\n              timezone: options.timezone,\n              messages: options.messages\n            });\n          },\n              MOBILERECURRENCEEDITOR = function (container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').attr({\n              name: options.field\n            }).appendTo(container).kendoMobileRecurrenceEditor({\n              start: options.model.start,\n              timezone: options.timezone,\n              messages: options.messages,\n              pane: options.pane,\n              value: options.model[options.field]\n            });\n          },\n              MOBILEISALLDAYEDITOR = function (container, options) {\n            $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').appendTo(container);\n          },\n              ISALLDAYEDITOR = function (container, options) {\n            $('<input type=\"checkbox\" data-role=\"checkbox\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" data-label=\"' + options.title + '\" />').attr({\n              id: options.field,\n              name: options.field,\n              title: options.title ? options.title : options.field\n            }).appendTo(container);\n          },\n              MOBILETIMEZONEPOPUP = function (container, options) {\n            var text = timezoneButtonText(options.model, options.messages.noTimezone);\n            $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n            $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>').appendTo(container);\n            container.closest(\"li.k-item label\").on(CLICK, options.click);\n          },\n              TIMEZONEPOPUP = function (container, options) {\n            $('<a href=\"#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on(CLICK, options.click).appendTo(container);\n          },\n              MOBILETIMEZONEEDITOR = function (container, options) {\n            $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').attr({\n              name: options.field\n            }).appendTo(container).kendoMobileTimezoneEditor({\n              optionLabel: options.noTimezone\n            });\n          },\n              TIMEZONEEDITOR = function (container, options) {\n            var visible = options.visible || options.visible === undefined;\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').attr({\n              name: options.field\n            }).toggle(visible).appendTo(container).kendoTimezoneEditor({\n              optionLabel: options.noTimezone,\n              title: options.title\n            });\n          };\n\n          function timezoneButtonText(model, message) {\n            message = message || \"\";\n\n            if (model.startTimezone) {\n              message = model.startTimezone;\n\n              if (model.endTimezone) {\n                message += \" | \" + model.endTimezone;\n              }\n            }\n\n            return message;\n          }\n\n          function appendTimezoneAttr(attrs, options) {\n            var timezone = options.timezone;\n\n            if (timezone) {\n              attrs[kendo.attr(\"timezone\")] = timezone;\n            }\n          }\n\n          function appendValidDateValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n\n            if (validationRules) {\n              var validDateRule = validationRules.validDateValidator;\n\n              if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                attrs[kendo.attr(\"validDate-msg\")] = validDateRule.message;\n              }\n            }\n          }\n\n          function appendDateCompareValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n\n            if (validationRules) {\n              var dateCompareRule = validationRules.dateCompare;\n\n              if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                attrs[kendo.attr(\"dateCompare-msg\")] = dateCompareRule.message;\n              }\n            }\n          }\n\n          function wrapDataAccess(originalFunction, timezone) {\n            return function (data) {\n              data = originalFunction(data);\n              convertData(data, \"apply\", timezone);\n              return data || [];\n            };\n          }\n\n          function wrapDataSerialization(originalFunction, timezone) {\n            return function (data) {\n              if (data) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof kendo.data.ObservableArray)) {\n                  data = [data];\n                }\n              }\n\n              convertData(data, \"remove\", timezone, true);\n              data = originalFunction(data);\n              return data || [];\n            };\n          }\n\n          function convertData(data, method, timezone, removeUid) {\n            var event, idx, length, startOffset, endOffset;\n            data = data || [];\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n              event = data[idx];\n              startOffset = event.start ? event.start.getTimezoneOffset() : null;\n              endOffset = event.start ? event.end.getTimezoneOffset() : null;\n\n              if (removeUid) {\n                if (event.startTimezone || event.endTimezone) {\n                  if (timezone) {\n                    event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                    event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                  } else {\n                    event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                    event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                  }\n                } else if (timezone) {\n                  event.start = kendo.timezone[method](event.start, timezone);\n                  event.end = kendo.timezone[method](event.end, timezone);\n                }\n              } else {\n                if (event.startTimezone || event.endTimezone) {\n                  event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                  event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n\n                  if (timezone) {\n                    event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                    event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                  }\n                } else if (timezone) {\n                  event.start = kendo.timezone[method](event.start, timezone);\n                  event.end = kendo.timezone[method](event.end, timezone);\n                }\n              }\n\n              if (removeUid) {\n                delete event.uid;\n              }\n\n              if (method === \"remove\" && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n              }\n\n              if (method === \"remove\" && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n              }\n            }\n\n            return data;\n          }\n\n          function getOccurrenceByUid(data, uid) {\n            var length = data.length,\n                idx = 0,\n                event;\n\n            for (; idx < length; idx++) {\n              event = data[idx];\n\n              if (event.uid === uid) {\n                return event;\n              }\n            }\n          }\n\n          var SchedulerDataReader = kendo.Class.extend({\n            init: function (schema, reader) {\n              var timezone = schema.timezone;\n              this.reader = reader;\n\n              if (reader.model) {\n                this.model = reader.model;\n              }\n\n              this.timezone = timezone;\n              this.data = wrapDataAccess(this.data.bind(this), timezone);\n              this.serialize = wrapDataSerialization(this.serialize.bind(this), timezone);\n            },\n            errors: function (data) {\n              return this.reader.errors(data);\n            },\n            parse: function (data) {\n              return this.reader.parse(data);\n            },\n            data: function (data) {\n              return this.reader.data(data);\n            },\n            total: function (data) {\n              return this.reader.total(data);\n            },\n            groups: function (data) {\n              return this.reader.groups(data);\n            },\n            aggregates: function (data) {\n              return this.reader.aggregates(data);\n            },\n            serialize: function (data) {\n              return this.reader.serialize(data);\n            }\n          });\n\n          function applyZone(date, fromZone, toZone) {\n            if (toZone) {\n              date = kendo.timezone.convert(date, fromZone, toZone);\n            } else {\n              date = kendo.timezone.remove(date, fromZone);\n            }\n\n            return date;\n          }\n\n          function validDateValidator(input) {\n            if (input.filter(\"[name=start]\").length && input.filter(\"[title=Start]\").length || input.filter(\"[name=end]\").length && input.filter(\"[title=End]\").length || input.filter(\".k-recur-until\").length) {\n              var date;\n              var picker = kendo.widgetInstance(input, kendo.ui);\n\n              if (picker) {\n                date = kendo.parseDate(input.val(), picker.options.format);\n                return !!date && picker.value();\n              } else {\n                date = kendo.parseDate(input.val());\n                return !!date;\n              }\n            }\n\n            return true;\n          }\n\n          function dateCompareValidator(input) {\n            if (input.filter(\"[name=end]\").length) {\n              var container = input.closest(\".k-scheduler-edit-form\");\n              var startInput = container.find(\"[name=start]:visible\");\n              var endInput = container.find(\"[name=end]:visible\");\n\n              if (endInput[0] && startInput[0]) {\n                var start, end;\n                var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n                var editable = container.data(\"kendoEditable\");\n                var model = editable ? editable.options.model : null;\n\n                if (startPicker && endPicker) {\n                  start = startPicker.value();\n                  end = endPicker.value();\n                } else {\n                  start = kendo.parseDate(startInput.val());\n                  end = kendo.parseDate(endInput.val());\n                }\n\n                if (start && end) {\n                  if (model) {\n                    var timezone = startInput.attr(kendo.attr(\"timezone\"));\n                    var startTimezone = model.startTimezone;\n                    var endTimezone = model.endTimezone;\n                    startTimezone = startTimezone || endTimezone;\n                    endTimezone = endTimezone || startTimezone;\n\n                    if (startTimezone) {\n                      start = applyZone(start, startTimezone, timezone);\n                      end = applyZone(end, endTimezone, timezone);\n                    }\n                  }\n\n                  return start <= end;\n                }\n              }\n            }\n\n            return true;\n          }\n\n          function untilDateCompareValidator(input) {\n            var untilPicker, until, container, startInput, start, startPicker;\n\n            if (input.filter(\".k-recur-until\").length) {\n              untilPicker = kendo.widgetInstance(input, kendo.ui);\n              until = untilPicker.value();\n              container = input.closest(\".k-scheduler-edit-form\");\n              startInput = container.find(\"[name=start]:visible\");\n\n              if (startInput[0]) {\n                startPicker = kendo.widgetInstance(startInput, kendo.ui);\n\n                if (startPicker) {\n                  start = startPicker.value();\n                } else {\n                  start = kendo.parseDate(startInput.val());\n                }\n\n                if (start && until) {\n                  return start <= until;\n                }\n              }\n            }\n\n            return true;\n          }\n\n          var SchedulerEvent = kendo.data.Model.define({\n            init: function (value) {\n              var that = this;\n              kendo.data.Model.fn.init.call(that, value);\n              that._defaultId = that.defaults[that.idField];\n            },\n            _time: function (field) {\n              var date = this[field];\n              var fieldTime = \"_\" + field + \"Time\";\n\n              if (this[fieldTime]) {\n                return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n              }\n\n              return getMilliseconds(date);\n            },\n            _date: function (field) {\n              var fieldTime = \"_\" + field + \"Time\";\n\n              if (this[fieldTime]) {\n                return this[fieldTime] - this._time(field);\n              }\n\n              return kendo.date.getDate(this[field]);\n            },\n            clone: function (options, updateUid) {\n              var uid = this.uid,\n                  event = new this.constructor($.extend({}, this.toJSON(), options));\n\n              if (!updateUid) {\n                event.uid = uid;\n              }\n\n              return event;\n            },\n            duration: function () {\n              var end = this.end;\n              var start = this.start;\n              var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n              return end - start - offset;\n            },\n            expand: function (start, end, zone) {\n              return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n            },\n            update: function (eventInfo) {\n              for (var field in eventInfo) {\n                this.set(field, eventInfo[field]);\n              }\n\n              if (this._startTime) {\n                this.set(\"_startTime\", kendo.date.toUtcTime(this.start));\n              }\n\n              if (this._endTime) {\n                this.set(\"_endTime\", kendo.date.toUtcTime(this.end));\n              }\n            },\n            isMultiDay: function () {\n              return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n            },\n            isException: function () {\n              return !this.isNew() && this.recurrenceId;\n            },\n            isOccurrence: function () {\n              return this.isNew() && this.recurrenceId;\n            },\n            isRecurring: function () {\n              return !!(this.recurrenceRule || this.recurrenceId);\n            },\n            isRecurrenceHead: function () {\n              return !!(this.id && this.recurrenceRule);\n            },\n            toOccurrence: function (options) {\n              options = $.extend(options, {\n                recurrenceException: null,\n                recurrenceRule: null,\n                recurrenceId: this.id || this.recurrenceId\n              });\n              options[this.idField] = this.defaults[this.idField];\n              return this.clone(options, true);\n            },\n            toJSON: function () {\n              var obj = kendo.data.Model.fn.toJSON.call(this);\n              obj.uid = this.uid;\n              delete obj._startTime;\n              delete obj._endTime;\n              return obj;\n            },\n            shouldSerialize: function (field) {\n              return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== \"_defaultId\";\n            },\n            set: function (key, value) {\n              var isAllDay = this.isAllDay || false;\n              kendo.data.Model.fn.set.call(this, key, value);\n\n              if (key == \"isAllDay\" && value != isAllDay) {\n                var start = kendo.date.getDate(this.start);\n                var end = new Date(this.end);\n                var milliseconds = kendo.date.getMilliseconds(end);\n\n                if (milliseconds === 0 && value) {\n                  milliseconds = MS_PER_DAY;\n                }\n\n                this.set(\"start\", start);\n\n                if (value === true) {\n                  kendo.date.setTime(end, -milliseconds);\n\n                  if (end < start) {\n                    end = start;\n                  }\n                } else {\n                  kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                }\n\n                this.set(\"end\", end);\n              }\n            },\n            id: \"id\",\n            fields: {\n              id: {\n                type: \"number\"\n              },\n              title: {\n                defaultValue: \"\",\n                type: \"string\"\n              },\n              start: {\n                type: \"date\",\n                validation: {\n                  required: true,\n                  validDate: {\n                    value: validDateValidator\n                  }\n                }\n              },\n              startTimezone: {\n                type: \"string\"\n              },\n              end: {\n                type: \"date\",\n                validation: {\n                  required: true,\n                  validDate: {\n                    value: validDateValidator\n                  },\n                  dateCompare: {\n                    value: dateCompareValidator\n                  }\n                }\n              },\n              endTimezone: {\n                type: \"string\"\n              },\n              recurrenceRule: {\n                defaultValue: \"\",\n                type: \"string\",\n                validation: {\n                  validDate: {\n                    value: validDateValidator\n                  },\n                  untilDateCompare: {\n                    value: untilDateCompareValidator\n                  }\n                }\n              },\n              recurrenceException: {\n                defaultValue: \"\",\n                type: \"string\"\n              },\n              isAllDay: {\n                type: \"boolean\",\n                defaultValue: false\n              },\n              description: {\n                type: \"string\"\n              }\n            }\n          });\n          var SchedulerDataSource = DataSource.extend({\n            init: function (options) {\n              DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                  modelBase: SchedulerEvent,\n                  model: SchedulerEvent\n                }\n              }, options));\n              this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n            },\n            expand: function (start, end) {\n              var data = this.view(),\n                  filter = {},\n                  endOffset;\n\n              if (start && end) {\n                endOffset = end.getTimezoneOffset();\n                end = new Date(end.getTime() + MS_PER_DAY - 1);\n\n                if (end.getTimezoneOffset() !== endOffset) {\n                  end = kendo.timezone.apply(end, endOffset);\n                }\n\n                filter = {\n                  logic: \"or\",\n                  filters: [{\n                    logic: \"and\",\n                    filters: [{\n                      field: \"start\",\n                      operator: \"gte\",\n                      value: start\n                    }, {\n                      field: \"end\",\n                      operator: \"gte\",\n                      value: start\n                    }, {\n                      field: \"start\",\n                      operator: \"lte\",\n                      value: end\n                    }]\n                  }, {\n                    logic: \"and\",\n                    filters: [{\n                      field: \"start\",\n                      operator: \"lte\",\n                      value: new Date(start.getTime() + MS_PER_DAY - 1)\n                    }, {\n                      field: \"end\",\n                      operator: \"gte\",\n                      value: start\n                    }]\n                  }]\n                };\n                data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n              }\n\n              return data;\n            },\n            cancelChanges: function (model) {\n              if (model && model.isOccurrence()) {\n                this._removeExceptionDate(model);\n              }\n\n              DataSource.fn.cancelChanges.call(this, model);\n            },\n            insert: function (index, model) {\n              if (!model) {\n                return;\n              }\n\n              if (!(model instanceof SchedulerEvent)) {\n                var eventInfo = model;\n                model = this._createNewModel();\n                model.accept(eventInfo);\n              }\n\n              if (!this._pushCreated && model.isRecurrenceHead() || model.recurrenceId) {\n                model = model.recurrenceId ? model : model.toOccurrence();\n\n                this._addExceptionDate(model);\n              }\n\n              return DataSource.fn.insert.call(this, index, model);\n            },\n            pushCreate: function (items) {\n              this._pushCreated = true;\n              DataSource.fn.pushCreate.call(this, items);\n              this._pushCreated = false;\n            },\n            remove: function (model) {\n              if (model.isRecurrenceHead()) {\n                this._removeExceptions(model);\n              } else if (model.isRecurring()) {\n                this._addExceptionDate(model);\n              }\n\n              return DataSource.fn.remove.call(this, model);\n            },\n            _removeExceptions: function (model) {\n              var data = this.data().slice(0),\n                  item = data.shift(),\n                  id = model.id;\n\n              while (item) {\n                if (item.recurrenceId === id) {\n                  DataSource.fn.remove.call(this, item);\n                }\n\n                item = data.shift();\n              }\n\n              model.set(RECURRENCE_EXCEPTION, \"\");\n            },\n            _removeExceptionDate: function (model) {\n              if (model.recurrenceId) {\n                var head = this.get(model.recurrenceId);\n\n                if (head) {\n                  var start = model.defaults.start;\n                  var replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                  var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                  if (replaceRegExp.test(recurrenceException)) {\n                    head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                  } else {\n                    start = model.start;\n                    replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                    head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                  }\n                }\n              }\n            },\n            _addExceptionDate: function (model) {\n              var start = model.start;\n              var zone = this.reader.timezone;\n              var head = this.get(model.recurrenceId);\n              var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n              if (!recurrence.isException(recurrenceException, start, zone)) {\n                var newException = recurrence.toExceptionString(start, zone);\n                model.defaults.start = start;\n                head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : \"\") + newException);\n              }\n            }\n          });\n\n          function expandAll(events, start, end, zone) {\n            var length = events.length,\n                data = [],\n                idx = 0;\n\n            for (; idx < length; idx++) {\n              data = data.concat(events[idx].expand(start, end, zone));\n            }\n\n            return data;\n          }\n\n          SchedulerDataSource.create = function (options) {\n            if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n              options = {\n                data: options\n              };\n            }\n\n            var dataSource = options || {},\n                data = dataSource.data;\n            dataSource.data = data;\n\n            if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n              throw new Error(\"Incorrect DataSource type. Only SchedulerDataSource instances are supported\");\n            }\n\n            return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n          };\n\n          extend(true, kendo.data, {\n            SchedulerDataSource: SchedulerDataSource,\n            SchedulerDataReader: SchedulerDataReader,\n            SchedulerEvent: SchedulerEvent\n          });\n          var defaultCommands = {\n            update: {\n              text: \"Save\",\n              className: \"k-button-solid-primary k-scheduler-update\"\n            },\n            canceledit: {\n              text: \"Cancel\",\n              className: \"k-scheduler-cancel\"\n            },\n            destroy: {\n              text: \"Delete\",\n              imageClass: \"k-i-close\",\n              className: \"k-button-solid-primary k-scheduler-delete\",\n              iconClass: \"k-icon\"\n            }\n          };\n\n          function trimOptions(options, overrideOptions) {\n            delete options.name;\n            delete options.prefix;\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n\n            for (var key in overrideOptions) {\n              options[key] = overrideOptions[key];\n            }\n\n            return options;\n          }\n          /*\n          function fieldType(field) {\n              field = field != null ? field : \"\";\n              return field.type || kendo.type(field) || \"string\";\n          }\n          */\n\n\n          function descriptionEditor(options) {\n            var attr = createValidationAttributes(options.model, options.field);\n            return function (container, model) {\n              $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr).appendTo(container).wrap('<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"></span>');\n            };\n          }\n\n          function createValidationAttributes(model, field) {\n            var modelField = (model.fields || model)[field];\n            var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n            var validation = modelField ? modelField.validation : {}; // var type = fieldType(modelField);\n\n            var datatype = kendo.attr(\"type\");\n            var inArray = $.inArray;\n            var ruleName;\n            var rule;\n            var attr = {};\n\n            for (ruleName in validation) {\n              rule = validation[ruleName];\n\n              if (inArray(ruleName, specialRules) >= 0) {\n                attr[datatype] = ruleName;\n              } else if (!kendo.isFunction(rule)) {\n                attr[ruleName] = isPlainObject(rule) ? rule.value || ruleName : rule;\n              }\n\n              attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n            }\n\n            return attr;\n          }\n\n          function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n            var editorValue = editor.value(),\n                isMs = Array.isArray(editorValue),\n                valueArray;\n\n            if (isMs) {\n              valueArray = JSON.parse(JSON.stringify(editorValue));\n            } else {\n              valueArray = [editorValue.toString()];\n            }\n\n            editor.dataSource.data().forEach(function (item) {\n              if (item[parentValueField] === null || item[parentValueField] === undefined || item[parentValueField] == parentValue) {\n                item.set(DISABLED, false);\n              } else {\n                var currentValue = item.get(valueField);\n                item.set(DISABLED, true);\n\n                if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                  if (isMs) {\n                    valueArray.splice(valueArray.indexOf(currentValue), 1);\n                  } else {\n                    editor.value(null);\n                    editor.trigger(CHANGE);\n                  }\n                }\n              }\n            });\n\n            if (isMs && valueArray.length < editorValue.length) {\n              editor.value(valueArray);\n              editor.trigger(CHANGE);\n            }\n          }\n\n          function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n            var parentElement = container.closest(\".k-edit-form-container\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n            var parentWidget = parentElement.getKendoDropDownList();\n\n            if (parentWidget) {\n              parentWidget.bind(CHANGE, function (ev) {\n                var parentValue = ev.sender.value();\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n              });\n            } else {\n              parentElement.on(CHANGE, function (ev) {\n                var parentValue = ev.target.value;\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n              });\n            }\n          }\n\n          function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n            var options = currentEditor.find(OPTION),\n                editorValue = currentEditor.val(),\n                isMs = Array.isArray(editorValue),\n                valueArray;\n\n            if (isMs) {\n              valueArray = JSON.parse(JSON.stringify(editorValue));\n            } else {\n              valueArray = [editorValue];\n            }\n\n            resource.dataSource.view().forEach(function (item, index) {\n              var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n              var valid = itemParentValue === null || itemParentValue === undefined || itemParentValue == parentSelectedValue;\n\n              if (valid) {\n                options[index].removeAttribute(DISABLED);\n              } else {\n                options[index].setAttribute(DISABLED, DISABLED);\n                var currentValue = \"\" + item.get(resource.dataValueField);\n\n                if (valueArray.indexOf(currentValue) >= 0) {\n                  if (isMs) {\n                    valueArray.splice(valueArray.indexOf(currentValue), 1);\n                  } else {\n                    currentEditor.val(null);\n                    currentEditor.trigger(CHANGE);\n                  }\n                }\n              }\n            });\n\n            if (isMs && valueArray.length < editorValue.length) {\n              currentEditor.val(valueArray);\n              currentEditor.trigger(CHANGE);\n            }\n          }\n\n          function dropDownResourceEditor(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n              var currentEditor;\n\n              if (parent) {\n                setTimeout(function () {\n                  filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                  bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n              }\n\n              currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoDropDownList({\n                dataTextField: resource.dataTextField,\n                dataValueField: resource.dataValueField,\n                dataSource: resource.dataSource.data(),\n                valuePrimitive: resource.valuePrimitive,\n                optionLabel: \"None\",\n                template: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\"#><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                select: function (e) {\n                  if (e.dataItem && e.dataItem.disabled) {\n                    e.preventDefault();\n                  }\n                },\n                dataBound: function (e) {\n                  var options = e.sender.list.find('li');\n                  options.each(function (i, el) {\n                    var element = $(el);\n\n                    if (element.find(\"[data-disabled]\").length > 0) {\n                      element.addClass(\"k-disabled\");\n                    }\n                  });\n                }\n              }).data(\"kendoDropDownList\");\n            };\n          }\n\n          function dropDownResourceEditorMobile(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n              var options = \"\";\n              var view = resource.dataSource.view();\n\n              for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n              }\n\n              var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">{2}</select>', kendo.ns, resource.field, options)).appendTo(container).attr(attr);\n\n              if (parent) {\n                setTimeout(function () {\n                  var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                  var parentSelectedValue = model[parent];\n                  filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n                  parentElement.on(CHANGE, function (ev) {\n                    var parentValue = ev.target.value;\n                    filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                  });\n                });\n              }\n            };\n          }\n\n          function multiSelectResourceEditor(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n              var currentEditor;\n\n              if (parent) {\n                setTimeout(function () {\n                  filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                  bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n              }\n\n              currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoMultiSelect({\n                dataTextField: resource.dataTextField,\n                dataValueField: resource.dataValueField,\n                dataSource: resource.dataSource.data(),\n                valuePrimitive: resource.valuePrimitive,\n                itemTemplate: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\" #><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                tagTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField),\n                select: function (e) {\n                  if (e.dataItem && e.dataItem.disabled) {\n                    e.preventDefault();\n                  }\n                },\n                dataBound: function (e) {\n                  var options = e.sender.list.find('li');\n                  options.each(function (i, el) {\n                    var element = $(el);\n\n                    if (element.find(\"[data-disabled]\").length > 0) {\n                      element.addClass(\"k-disabled\");\n                    }\n                  });\n                }\n              }).data(\"kendoMultiSelect\");\n            };\n          }\n\n          function multiSelectResourceEditorMobile(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n              var options = \"\";\n              var view = resource.dataSource.view();\n\n              for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n              }\n\n              var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>', kendo.ns, resource.field, options)).appendTo(container).attr(attr);\n\n              if (parent) {\n                setTimeout(function () {\n                  var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                  var parentSelectedValue = model[parent];\n                  filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n                  parentElement.on(CHANGE, function (ev) {\n                    var parentValue = ev.target.value;\n                    filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                  });\n                });\n              }\n            };\n          }\n\n          function moveEventRange(event, distance) {\n            var duration = event.end.getTime() - event.start.getTime();\n            var start = new Date(event.start.getTime());\n            kendo.date.setTime(start, distance);\n            var end = new Date(start.getTime());\n            kendo.date.setTime(end, duration, true);\n            return {\n              start: start,\n              end: end\n            };\n          }\n\n          var editors = {\n            mobile: {\n              dateRange: MOBILEDATERANGEEDITOR,\n              timezonePopUp: MOBILETIMEZONEPOPUP,\n              timezone: MOBILETIMEZONEEDITOR,\n              recurrence: MOBILERECURRENCEEDITOR,\n              description: descriptionEditor,\n              multipleResources: multiSelectResourceEditorMobile,\n              resources: dropDownResourceEditorMobile,\n              isAllDay: MOBILEISALLDAYEDITOR\n            },\n            desktop: {\n              dateRange: DATERANGEEDITOR,\n              timezonePopUp: TIMEZONEPOPUP,\n              timezone: TIMEZONEEDITOR,\n              recurrence: RECURRENCEEDITOR,\n              description: descriptionEditor,\n              multipleResources: multiSelectResourceEditor,\n              resources: dropDownResourceEditor,\n              isAllDay: ISALLDAYEDITOR\n            }\n          };\n          var Editor = kendo.Observable.extend({\n            init: function (element, options) {\n              kendo.Observable.fn.init.call(this);\n              this.element = element;\n              this.options = extend(true, {}, this.options, options);\n              this.createButton = this.options.createButton;\n              this.toggleDateValidationHandler = this._toggleDateValidation.bind(this);\n            },\n            _toggleDateValidation: function (e) {\n              if (e.field == \"isAllDay\") {\n                var container = this.container,\n                    isAllDay = this.editable.options.model.isAllDay,\n                    bindAttribute = kendo.attr(\"bind\"),\n                    element,\n                    isDateTimeInput,\n                    shouldValidate;\n                container.find(\"[\" + bindAttribute + \"*=end],[\" + bindAttribute + \"*=start]\").each(function () {\n                  element = $(this);\n\n                  if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                    isDateTimeInput = element.is(\"[\" + kendo.attr(\"role\") + \"=datetimepicker],[type*=datetime]\");\n                    shouldValidate = isAllDay !== isDateTimeInput;\n                    element.attr(kendo.attr(\"validate\"), shouldValidate);\n                  }\n                });\n              }\n            },\n            fields: function (editors, model) {\n              var that = this;\n              var messages = that.options.messages;\n              var timezone = that.options.timezone;\n\n              var click = function (e) {\n                e.preventDefault();\n\n                that._initTimezoneEditor(model, this);\n              };\n\n              var fields = [{\n                field: \"title\",\n                title: messages.editor.title\n                /*, format: field.format, editor: field.editor, values: field.values*/\n\n              }, {\n                field: \"start\",\n                title: messages.editor.start,\n                editor: editors.dateRange,\n                timezone: timezone\n              }, {\n                field: \"end\",\n                title: messages.editor.end,\n                editor: editors.dateRange,\n                timezone: timezone\n              }, {\n                field: \"isAllDay\",\n                title: messages.editor.allDayEvent,\n                editor: editors.isAllDay\n              }];\n\n              var checkHierarchical = function (item) {\n                return !!item[resource.dataParentValueField];\n              };\n\n              if (kendo.timezone.windows_zones) {\n                fields.push({\n                  field: \"timezone\",\n                  title: messages.editor.timezone,\n                  editor: editors.timezonePopUp,\n                  click: click,\n                  messages: messages.editor,\n                  model: model\n                });\n                fields.push({\n                  field: \"startTimezone\",\n                  title: messages.editor.startTimezone,\n                  editor: editors.timezone,\n                  noTimezone: messages.editor.noTimezone\n                });\n                fields.push({\n                  field: \"endTimezone\",\n                  title: messages.editor.endTimezone,\n                  editor: editors.timezone,\n                  noTimezone: messages.editor.noTimezone\n                });\n              }\n\n              if (!model.recurrenceId) {\n                fields.push({\n                  field: \"recurrenceRule\",\n                  title: messages.editor.repeat,\n                  editor: editors.recurrence,\n                  timezone: timezone,\n                  messages: messages.recurrenceEditor,\n                  pane: this.pane\n                });\n              }\n\n              if (\"description\" in model) {\n                fields.push({\n                  field: \"description\",\n                  title: messages.editor.description,\n                  editor: editors.description({\n                    model: model,\n                    field: \"description\"\n                  })\n                });\n              }\n\n              for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                var resource = this.options.resources[resourceIndex];\n                var resourceView = resource.dataSource.view();\n                var hasParent = resourceView.some(checkHierarchical);\n                var parentResource, parent;\n\n                if (hasParent) {\n                  parentResource = this.options.resources[resourceIndex - 1];\n\n                  if (parentResource) {\n                    parent = parentResource.field;\n                  }\n                }\n\n                fields.push({\n                  field: resource.field,\n                  title: resource.title,\n                  editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                });\n              }\n\n              return fields;\n            },\n            end: function () {\n              return this.editable.end();\n            },\n            _buildDesktopEditTemplate: function (model, fields, editableFields) {\n              var messages = this.options.messages;\n              var settings = extend({}, kendo.Template, this.options.templateSettings);\n              var paramName = settings.paramName;\n              var html = \"\";\n              html += '<div class=\"k-form\">';\n\n              for (var idx = 0, length = fields.length; idx < length; idx++) {\n                var field = fields[idx];\n\n                if (field.field === \"startTimezone\") {\n                  html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                  html += '<div class=\"k-form\">';\n                  html += '<div class=\"k-form-field\"><div class=\"k-form-field-wrap\">' + kendo.html.renderCheckBox($('<input class=\"k-timezone-toggle\"/>'), {\n                    label: messages.editor.separateTimezones\n                  }) + '</div></div>';\n                }\n\n                if (model.fields[field.field] && model.fields[field.field].type === \"boolean\") {\n                  html += '<div class=\"k-form-field\">';\n                } else {\n                  html += '<div class=\"k-form-field\"><label class=\"k-label k-form-label\" for=\"' + field.field + '\" id=\"' + field.field + '_label\">' + (field.title || field.field || \"\") + '</label>';\n                }\n\n                if (!model.editable || model.editable(field.field)) {\n                  editableFields.push(field);\n                  html += '<div ' + kendo.attr(\"container-for\") + '=\"' + field.field + '\" class=\"k-form-field-wrap\"></div>';\n                } else {\n                  var tmpl = \"#:\";\n\n                  if (field.field) {\n                    field = kendo.expr(field.field, paramName);\n                    tmpl += field + \"==null?'':\" + field;\n                  } else {\n                    tmpl += \"''\";\n                  }\n\n                  tmpl += \"#\";\n                  tmpl = kendo.template(tmpl, settings);\n                  html += '<div class=\"k-form-field-wrap\">' + tmpl(model) + '</div>';\n                }\n\n                html += \"</div>\";\n\n                if (field.field === \"endTimezone\") {\n                  html += this._createEndTimezoneButton();\n                }\n              }\n\n              html += '</div>';\n              return html;\n            },\n            _buildMobileEditTemplate: function (model, fields, editableFields) {\n              var messages = this.options.messages;\n              var settings = extend({}, kendo.Template, this.options.templateSettings);\n              var paramName = settings.paramName;\n              var html = \"\";\n              html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n\n              for (var idx = 0, length = fields.length; idx < length; idx++) {\n                var field = fields[idx];\n\n                if (field.field === \"timezone\" || field.field === \"recurrenceRule\") {\n                  html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                }\n\n                if (field.field === \"startTimezone\") {\n                  html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                  html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                  html += '<li class=\"k-item k-listgroup-item\">';\n                  html += '<label class=\"k-label k-listgroup-form-row\">';\n                  html += '<span class=\"k-item-title k-listgroup-form-row\">' + messages.editor.separateTimezones + '</span>';\n                  html += '<span class=\"k-listgroup-form-field-wrapper\">';\n                  html += '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />';\n                  html += '</span>';\n                  html += '</label>';\n                  html += '</li>';\n                }\n\n                if (!model.editable || model.editable(field.field)) {\n                  html += '<li class=\"k-item k-listgroup-item\">';\n\n                  if (field.field === \"timezone\") {\n                    html += '<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-disabled: isAllDay }\">';\n                  } else {\n                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                  }\n\n                  html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || \"\") + '</span>';\n                  editableFields.push(field);\n                  html += '<div class=\"k-listgroup-form-field-wrapper\" ' + kendo.attr(\"container-for\") + '=\"' + field.field + '\"></div>';\n                  html += '</label></li>';\n                } else {\n                  var tmpl = \"#:\";\n                  html += '<li class=\"k-item k-listgroup-item\">';\n                  html += '<label class=\"k-label k-no-click k-listgroup-form-row\">';\n                  html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || \"\") + '</span>';\n\n                  if (field.field) {\n                    field = kendo.expr(field.field, paramName);\n                    tmpl += field + \"==null?'':\" + field;\n                  } else {\n                    tmpl += \"''\";\n                  }\n\n                  tmpl += \"#\";\n                  tmpl = kendo.template(tmpl, settings);\n                  html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                  html += '</label></li>';\n                }\n\n                if (field.field === \"recurrenceRule\") {\n                  html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                }\n\n                if (field.field === \"endTimezone\") {\n                  html += \"</ul></div>\";\n                }\n              }\n\n              html += '</ul>';\n              return html;\n            },\n            _buildEditTemplate: function (model, fields, editableFields, isMobile) {\n              var settings = extend({}, kendo.Template, this.options.templateSettings);\n              var template = this.options.editable.template;\n              var html = \"\";\n\n              if (template) {\n                if (typeof template === STRING) {\n                  template = kendo.unescape(template);\n                }\n\n                html += kendo.template(template, settings)(model);\n              } else if (isMobile) {\n                html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n              } else {\n                html += this._buildDesktopEditTemplate(model, fields, editableFields);\n              }\n\n              return html;\n            },\n            _createEndTimezoneButton: function () {\n              return '</ul></div>';\n            },\n            _revertTimezones: function (model) {\n              model.set(\"startTimezone\", this._startTimezone);\n              model.set(\"endTimezone\", this._endTimezone);\n              delete this._startTimezone;\n              delete this._endTimezone;\n            }\n          });\n          var MobileEditor = Editor.extend({\n            init: function () {\n              Editor.fn.init.apply(this, arguments);\n              this.pane = kendo.Pane.wrap(this.element, {\n                viewEngine: {\n                  viewOptions: {\n                    renderOnInit: true,\n                    wrap: false,\n                    wrapInSections: true,\n                    detachOnHide: false,\n                    detachOnDestroy: false\n                  }\n                }\n              });\n              this.pane.element.parent().css(\"height\", this.options.height);\n              this.view = this.pane.view();\n            },\n            options: {\n              animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n              }\n            },\n            destroy: function () {\n              this.close();\n              this.unbind();\n              this.pane.destroy();\n            },\n            _initTimezoneEditor: function (model) {\n              var that = this;\n              var pane = that.pane;\n              var messages = that.options.messages;\n              var timezoneView = that.timezoneView;\n              var container = timezoneView ? timezoneView.content.find(\".k-scheduler-timezones\") : that.container.find(\".k-scheduler-timezones\");\n              var kSwitch = container.find(\"input.k-timezone-toggle\").data(\"kendoSwitch\");\n              var endTimezoneRow = container.find(\"li.k-item:not(.k-zonepicker)\").last();\n\n              var startTimezoneChange = function (e) {\n                if (e.field === \"startTimezone\") {\n                  var value = model.startTimezone;\n                  kSwitch.enable(value);\n\n                  if (!value) {\n                    endTimezoneRow.hide();\n                    model.set(\"endTimezone\", \"\");\n                    kSwitch.value(false);\n                  }\n                }\n              };\n\n              that._startTimezone = model.startTimezone || \"\";\n              that._endTimezone = model.endTimezone || \"\";\n\n              if (!timezoneView) {\n                var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' + 'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + messages.editor.timezoneTitle + '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.save + '\" ' + 'aria-label=\"' + messages.save + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div><div data-role=\"content\"></div>';\n                this.timezoneView = timezoneView = pane.append(html);\n                timezoneView.contentElement.append(container.show());\n                timezoneView.element.on(CLICK + NS, \".k-scheduler-cancel, .k-scheduler-update\", function (e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n\n                  if ($(this).hasClass(\"k-scheduler-cancel\")) {\n                    that._revertTimezones(model);\n                  }\n\n                  var editView = that._editPane;\n                  var text = timezoneButtonText(model, messages.editor.noTimezone);\n                  editView.content.find(\".k-timezone-label\").text(text);\n                  pane.navigate(editView, that.options.animations.right);\n                });\n                kSwitch.bind(CHANGE, function (ev) {\n                  endTimezoneRow.toggle(ev.checked);\n                  model.set(\"endTimezone\", \"\");\n                });\n                model.bind(CHANGE, startTimezoneChange);\n              }\n\n              kSwitch.value(!!model.endTimezone);\n              kSwitch.enable(!!model.startTimezone);\n\n              if (model.endTimezone) {\n                endTimezoneRow.show();\n              } else {\n                endTimezoneRow.hide();\n              }\n\n              pane.navigate(timezoneView, that.options.animations.left);\n            },\n            showDialog: function (options) {\n              var actions = options.buttons.map(function (button) {\n                return {\n                  text: button.text,\n                  action: button.click\n                };\n              });\n              actions.push({\n                text: this.options.messages.cancel,\n                primary: true\n              });\n              $(\"<div />\").appendTo(document.body).kendoDialog({\n                close: function () {\n                  this.destroy();\n                },\n                modal: {\n                  preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: options.text,\n                actions: actions\n              });\n            },\n            editEvent: function (model) {\n              var pane = this.pane;\n              var html = \"\";\n              var messages = this.options.messages;\n              var updateText = messages.save;\n              var removeText = messages.destroy;\n              var cancelText = messages.cancel;\n              var titleText = messages.editor.editorTitle;\n              var resetSeries = messages.resetSeries;\n              html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr(\"uid\") + '=\"' + model.uid + '\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + cancelText + '\"' + 'aria-label=\"' + cancelText + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + titleText + '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + updateText + '\" ' + 'aria-label=\"' + updateText + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>';\n              var fields = this.fields(editors.mobile, model);\n              var that = this;\n              var editableFields = [];\n              html += this._buildEditTemplate(model, fields, editableFields, true);\n              html += \"</div>\";\n              var view = pane.append(html);\n\n              if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                view.contentElement.append(resetSeriesBtn);\n              }\n\n              if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                view.contentElement.append(deleteBtn);\n              }\n\n              this._editPane = view;\n              var container = this.container = view.element;\n              this.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                target: that.options.target,\n                validateOnBlur: true\n              }).data(\"kendoEditable\");\n\n              if (!this.trigger(\"edit\", {\n                container: container,\n                model: model\n              })) {\n                container.on(CLICK + NS, \"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries\", function (e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  var button = $(this);\n\n                  if (!button.hasClass(\"k-scheduler-edit\")) {\n                    var name = \"cancel\";\n\n                    if (button.hasClass(\"k-scheduler-update\")) {\n                      name = \"save\";\n                    } else if (button.hasClass(\"k-scheduler-delete\")) {\n                      name = \"remove\";\n                    } else if (button.hasClass(\"k-scheduler-resetSeries\")) {\n                      name = RESET;\n                    }\n\n                    that.trigger(name, {\n                      container: container,\n                      model: model\n                    });\n                  } else {\n                    pane.navigate(this._editPane, that.options.animations.right);\n                  }\n                });\n                pane.navigate(view, that.options.animations.left);\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n              } else {\n                this.trigger(\"cancel\", {\n                  container: container,\n                  model: model\n                });\n              }\n\n              return this.editable;\n            },\n            _views: function () {\n              return this.pane.element.find(kendo.roleSelector(\"view\")).not(this.view.element);\n            },\n            close: function () {\n              if (this.container) {\n                this.pane.navigate(\"\", this.options.animations.right);\n\n                var views = this._views();\n\n                var view;\n\n                for (var idx = 0, length = views.length; idx < length; idx++) {\n                  view = views.eq(idx).data(\"kendoView\");\n\n                  if (view) {\n                    view.purge();\n                  }\n                }\n\n                views.remove();\n                this.container = null;\n\n                if (this.editable) {\n                  this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                  this.editable.destroy();\n                  this.editable = null;\n                }\n\n                this.timezoneView = null;\n              }\n            }\n          });\n          var PopupEditor = Editor.extend({\n            destroy: function () {\n              this.close();\n              this.unbind();\n            },\n            editEvent: function (model) {\n              var that = this;\n              var editable = that.options.editable;\n              var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n              var messages = that.options.messages;\n              var updateText = messages.save;\n              var cancelText = messages.cancel;\n              var deleteText = messages.destroy;\n              var resetSeries = messages.resetSeries;\n              var fields = this.fields(editors.desktop, model);\n              var editableFields = [];\n              var fieldName;\n              html += this._buildEditTemplate(model, fields, editableFields, false);\n              var attr;\n              var options = isPlainObject(editable) ? editable.window : {};\n              html += '<div class=\"k-edit-buttons\">';\n              html += this.createButton({\n                name: \"update\",\n                text: updateText,\n                attr: attr\n              }) + this.createButton({\n                name: \"canceledit\",\n                text: cancelText,\n                attr: attr\n              });\n\n              if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                html += this.createButton({\n                  name: \"resetSeries\",\n                  text: resetSeries,\n                  attr: attr\n                });\n              }\n\n              if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                html += this.createButton({\n                  name: \"delete\",\n                  text: deleteText,\n                  attr: attr\n                });\n              }\n\n              html += '</div></div></div>';\n              var container = this.container = $(html).appendTo(that.element).eq(0).kendoWindow(extend({\n                modal: true,\n                resizable: false,\n                draggable: true,\n                title: messages.editor.editorTitle,\n                visible: false,\n                close: function (e) {\n                  if (e.userTriggered) {\n                    if (that.trigger(CANCEL, {\n                      container: container,\n                      model: model\n                    })) {\n                      e.preventDefault();\n                    }\n                  }\n                }\n              }, options));\n              that.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                validateOnBlur: true,\n                target: that.options.target\n              }).data(\"kendoEditable\");\n\n              for (var field in editableFields) {\n                if (editableFields[field].field !== \"recurrenceRule\") {\n                  fieldName = editableFields[field].field;\n                  container.find(\"[name='\" + fieldName + \"']\").attr(\"aria-labelledby\", fieldName + \"_label\");\n                }\n\n                if (editableFields[field].field === \"isAllDay\") {\n                  container.find(\"label[for='\" + fieldName + \"']\").attr(\"id\", fieldName + \"_label\");\n                }\n              }\n\n              if (!that.trigger(EDIT, {\n                container: container,\n                model: model\n              })) {\n                container.data(\"kendoWindow\").center().open();\n                container.on(CLICK + NS, \"button.k-scheduler-cancel\", function (e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  that.trigger(CANCEL, {\n                    container: container,\n                    model: model\n                  });\n                });\n                container.on(CLICK + NS, \"button.k-scheduler-update\", function (e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  that.trigger(\"save\", {\n                    container: container,\n                    model: model\n                  });\n                });\n                container.on(CLICK + NS, \"button.k-scheduler-delete\", function (e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  that.trigger(REMOVE, {\n                    container: container,\n                    model: model\n                  });\n                });\n                container.on(CLICK + NS, \"button.k-scheduler-resetSeries\", function (e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  that.trigger(RESET, {\n                    container: container,\n                    model: model\n                  });\n                });\n                kendo.cycleForm(container);\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n              } else {\n                that.trigger(CANCEL, {\n                  container: container,\n                  model: model\n                });\n              }\n\n              return that.editable;\n            },\n            close: function () {\n              var that = this;\n\n              var destroy = function () {\n                if (that.editable) {\n                  that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                  that.editable.destroy();\n                  that.editable = null;\n                  that.container = null;\n                }\n\n                if (that.popup) {\n                  that.popup.destroy();\n                  that.popup = null;\n                }\n              };\n\n              if (that.editable) {\n                if (that._timezonePopup && that._timezonePopup.data(\"kendoWindow\")) {\n                  that._timezonePopup.data(\"kendoWindow\").destroy();\n\n                  that._timezonePopup = null;\n                }\n\n                if (that.container.is(\":visible\")) {\n                  that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                } else {\n                  destroy();\n                }\n              } else {\n                destroy();\n              }\n            },\n            _createEndTimezoneButton: function () {\n              var messages = this.options.messages;\n              var html = \"\";\n              html += '<div class=\"k-edit-buttons\">';\n              html += this.createButton({\n                name: \"savetimezone\",\n                text: messages.save\n              }) + this.createButton({\n                name: \"canceltimezone\",\n                text: messages.cancel\n              });\n              html += '</div></div></div>';\n              return html;\n            },\n            showDialog: function (options) {\n              var html = kendo.format(\"<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>\", options.text);\n              html += '<div class=\"k-edit-buttons\">';\n\n              for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                html += this.createButton(options.buttons[buttonIndex]);\n              }\n\n              html += '</div></div></div>';\n              var wrapper = this.element;\n\n              if (this.popup) {\n                this.popup.destroy();\n              }\n\n              var popup = this.popup = $(html).appendTo(wrapper).eq(0).on(CLICK, \".k-button\", function (e) {\n                e.preventDefault();\n                popup.close();\n                var buttonIndex = $(e.currentTarget).index();\n                options.buttons[buttonIndex].click();\n              }).kendoWindow({\n                modal: true,\n                resizable: false,\n                draggable: false,\n                title: options.title,\n                visible: false,\n                close: function () {\n                  this.destroy();\n                  wrapper.trigger(\"focus\");\n                }\n              }).getKendoWindow();\n              popup.center().open();\n            },\n            _initTimezoneEditor: function (model, activator) {\n              var that = this;\n              var container = that.container.find(\".k-scheduler-timezones\");\n              var checkbox = container.find(\"input.k-timezone-toggle\");\n              var endTimezoneRow = container.find(\".k-form-field\").last();\n              var saveButton = container.find(\".k-scheduler-savetimezone\");\n              var cancelButton = container.find(\".k-scheduler-canceltimezone\");\n              var timezonePopup = that._timezonePopup;\n\n              var startTimezoneChange = function (e) {\n                if (e.field === \"startTimezone\") {\n                  var value = model.startTimezone;\n                  checkbox.prop(DISABLED, !value);\n\n                  if (!value) {\n                    endTimezoneRow.hide();\n                    model.set(\"endTimezone\", \"\");\n                    checkbox.prop(\"checked\", false);\n                  }\n                }\n              };\n\n              var wnd;\n              that._startTimezone = model.startTimezone;\n              that._endTimezone = model.endTimezone;\n\n              if (!timezonePopup) {\n                that._timezonePopup = timezonePopup = container.kendoWindow({\n                  modal: true,\n                  resizable: false,\n                  draggable: true,\n                  title: that.options.messages.editor.timezoneEditorTitle,\n                  visible: false,\n                  close: function (e) {\n                    model.unbind(CHANGE, startTimezoneChange);\n\n                    if (e.userTriggered) {\n                      that._revertTimezones(model);\n                    }\n\n                    if (activator) {\n                      activator.focus();\n                    }\n                  }\n                });\n                checkbox.on(CLICK, function () {\n                  endTimezoneRow.toggle(checkbox.prop(\"checked\"));\n                  model.set(\"endTimezone\", \"\");\n                });\n                saveButton.on(CLICK, function (e) {\n                  e.preventDefault();\n                  wnd.close();\n                });\n                cancelButton.on(CLICK, function (e) {\n                  e.preventDefault();\n\n                  that._revertTimezones(model);\n\n                  wnd.close();\n                });\n                model.bind(CHANGE, startTimezoneChange);\n              }\n\n              checkbox.prop(\"checked\", model.endTimezone).prop(DISABLED, !model.startTimezone);\n\n              if (model.endTimezone) {\n                endTimezoneRow.show();\n              } else {\n                endTimezoneRow.hide();\n              }\n\n              wnd = timezonePopup.data(\"kendoWindow\");\n              wnd.center().open();\n            }\n          });\n          var Scheduler = DataBoundWidget.extend({\n            init: function (element, options) {\n              var that = this;\n              Widget.fn.init.call(that, element, options);\n\n              if (!that.options.views || !that.options.views.length) {\n                that.options.views = [\"day\", \"week\"];\n              }\n\n              that.resources = [];\n\n              that._initModel();\n\n              that._wrapper();\n\n              that._views();\n\n              that._toolbar();\n\n              that._dataSource();\n\n              that._resources();\n\n              that._resizeHandler = function () {\n                that.resize();\n              };\n\n              that.wrapper.on(MOUSEDOWN + NS + \" selectstart\" + NS, function (e) {\n                if (!$(e.target).is(\":kendoFocusable\")) {\n                  e.preventDefault();\n                }\n              });\n\n              if (that.options.editable && that.options.editable.resize !== false) {\n                that._resizable();\n              }\n\n              that._movable();\n\n              that._bindResize();\n\n              if (that.options.messages && that.options.messages.recurrence) {\n                recurrence.options = that.options.messages.recurrence;\n              }\n\n              that._tabindex();\n\n              that._navigation();\n\n              that._selectable();\n\n              that._touchHandlers();\n\n              that._ariaId = kendo.guid();\n\n              that._createEditor();\n            },\n            _bindResize: function () {\n              $(window).on(\"resize\" + NS, this._resizeHandler);\n            },\n            _unbindResize: function () {\n              $(window).off(\"resize\" + NS, this._resizeHandler);\n            },\n            dataItems: function () {\n              var that = this;\n              var items = that.items();\n              var events = that._data;\n              var eventsUids = $.map(items, function (item) {\n                return $(item).attr(\"data-uid\");\n              });\n              var i;\n              var key;\n              var dict = {};\n              var eventsUidsLength = eventsUids.length;\n\n              for (i = 0; i < eventsUidsLength; i++) {\n                dict[eventsUids[i]] = null;\n              }\n\n              var eventsCount = events.length;\n\n              for (i = 0; i < eventsCount; i++) {\n                var event = events[i];\n\n                if (dict[event.uid] !== undefined) {\n                  dict[event.uid] = event;\n                }\n              }\n\n              var sortedData = [];\n\n              for (key in dict) {\n                sortedData.push(dict[key]);\n              }\n\n              return sortedData;\n            },\n            _isMobile: function () {\n              var options = this.options;\n              return options.mobile === true && kendo.support.mobileOS || options.mobile === \"phone\" || options.mobile === \"tablet\";\n            },\n            _isTouch: function (event) {\n              return /touch/.test(event.type) || event.originalEvent && /touch/.test(event.originalEvent.pointerType);\n            },\n            _isInverseColor: function (eventElement) {\n              return eventElement.hasClass(INVERSECOLORCLASS);\n            },\n            _groupsByResource: function (resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n              if (!groupsArray) {\n                groupsArray = [];\n              }\n\n              var resource = resources[0];\n\n              if (resource) {\n                var group;\n                var data = resource.dataSource.view();\n                var prevIndex = 0;\n\n                for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                  var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                  var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n                  group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                  group[resource.field] = fieldValue;\n                  prevIndex = group.groupIndex;\n\n                  if (parentField && parentFieldValue) {\n                    group[parentField] = parentFieldValue;\n                  }\n\n                  if (resources.length === 1) {\n                    group.groupIndex = groupIndex + dataIndex;\n                    groupsArray.push(group);\n                  }\n                }\n\n                return group;\n              } else {\n                return {};\n              }\n            },\n            data: function () {\n              return this._data;\n            },\n            select: function (options) {\n              var that = this;\n              var view = that.view();\n              var selection = that._selection;\n              var groups = view.groups;\n              var selectedGroups;\n\n              if (options === undefined) {\n                var selectedEvents;\n                var slots = view._selectedSlots;\n\n                if (!selection) {\n                  return [];\n                }\n\n                if (selection && selection.events) {\n                  selectedEvents = that._selectedEvents();\n                }\n\n                return {\n                  start: selection.start,\n                  end: selection.end,\n                  events: selectedEvents,\n                  slots: slots,\n                  resources: view._resourceBySlot(selection)\n                };\n              }\n\n              if (!options) {\n                that._selection = null;\n                that._old = null;\n                view.clearSelection();\n                return;\n              }\n\n              if (Array.isArray(options)) {\n                options = {\n                  events: options.splice(0)\n                };\n              }\n\n              if (options.resources) {\n                var fieldName;\n                var filters = [];\n                var groupsByResource = [];\n\n                if (view.groupedResources) {\n                  that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                }\n\n                for (fieldName in options.resources) {\n                  filters.push({\n                    field: fieldName,\n                    operator: \"eq\",\n                    value: options.resources[fieldName]\n                  });\n                }\n\n                selectedGroups = new kendo.data.Query(groupsByResource).filter(filters).toArray();\n              }\n\n              if (options.events && options.events.length) {\n                that._selectEvents(options.events, selectedGroups);\n\n                that._select();\n\n                return;\n              }\n\n              if (groups && options.start && options.end) {\n                var rangeStart = getDate(view._startDate);\n                var rangeEnd = kendo.date.addDays(getDate(view._endDate), 1);\n                var group;\n                var ranges;\n\n                if (options.start < rangeEnd && rangeStart <= options.end) {\n                  if (selectedGroups && selectedGroups.length) {\n                    group = groups[selectedGroups[0].groupIndex];\n                  } else {\n                    group = groups[0];\n                  }\n\n                  if (!group.timeSlotCollectionCount()) {\n                    options.isAllDay = true;\n                  }\n\n                  ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n\n                  if (ranges.length) {\n                    that._selection = {\n                      start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                      end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                      groupIndex: ranges[0].start.groupIndex,\n                      index: ranges[0].start.index,\n                      isAllDay: ranges[0].start.isDaySlot,\n                      events: []\n                    };\n\n                    that._select();\n                  }\n                }\n              }\n            },\n            _selectEvents: function (eventsUids, selectedGroups) {\n              var that = this;\n              var idx;\n              var view = that.view();\n              var groups = view.groups;\n              var eventsLength = eventsUids.length;\n              var isGrouped = selectedGroups && selectedGroups.length;\n              var ctrlKey = that._ctrlKey;\n              that._ctrlKey = true;\n\n              for (idx = 0; idx < eventsLength; idx++) {\n                if (groups && isGrouped) {\n                  var currentGroup = groups[selectedGroups[0].groupIndex];\n                  var events = [];\n                  var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                  var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n\n                  for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                    events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                  }\n\n                  for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                    events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                  }\n\n                  events = new kendo.data.Query(events).filter({\n                    field: \"element[0].getAttribute('data-uid')\",\n                    operator: \"eq\",\n                    value: eventsUids[idx]\n                  }).toArray();\n\n                  if (events[0]) {\n                    that._createSelection(events[0].element);\n                  }\n                } else {\n                  var element = view.element.find(kendo.format(\".k-event[data-uid={0}], .k-task[data-uid={0}]\", eventsUids[idx]));\n\n                  if (element.length) {\n                    that._createSelection(element[0]);\n                  }\n                }\n              }\n\n              that._ctrlKey = ctrlKey;\n            },\n            _touchHandlers: function () {\n              var that = this;\n              var startX;\n              var startY;\n              var endX;\n              var endY;\n              var timeStamp;\n              var wrapper = that.wrapper;\n\n              var touchMoveHandler = that._touchMove.bind(that);\n\n              wrapper.on(TOUCHSTART + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function (e) {\n                var content = that.wrapper.find(\".k-scheduler-content\");\n\n                if (!that._isTouch(e)) {\n                  return;\n                }\n\n                content.stop(true, false);\n                that._touchPosX = startX = that._tapPosition(e, 'X');\n                that._touchPosY = startY = that._tapPosition(e, 'Y');\n                that._userTouched = true;\n                that.view()._scrolling = false;\n                timeStamp = Date.now();\n                wrapper.on(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", touchMoveHandler);\n              });\n              wrapper.on(TOUCHEND + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function (e) {\n                if (!that._isTouch(e)) {\n                  return;\n                }\n\n                var delta = Date.now() - timeStamp;\n                var content = that.wrapper.find(\".k-scheduler-content\");\n                var amplitude = -that._amplitude * (3000 / delta);\n                endX = that._tapPosition(e, 'X');\n                endY = that._tapPosition(e, 'Y');\n\n                if (that._dragging) {\n                  return;\n                }\n\n                if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                  that._mouseDownSelection(e);\n                }\n\n                if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                  content.animate({\n                    scrollTop: content[0].scrollTop + amplitude\n                  });\n                }\n\n                wrapper.off(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", touchMoveHandler);\n              });\n            },\n            _navigation: function () {\n              var that = this,\n                  wrapper = that.wrapper;\n              wrapper.on(\"focus\" + NS, function () {\n                var selection = that._selection;\n\n                if ((!selection || selection.events.length > 0 && wrapper.find(\"[data-uid='\" + selection.events[0] + \"']\").length === 0) && !that._userTouched && !that._mouseDown) {\n                  that._initialFocus();\n                } else {\n                  that._mouseDown = false;\n                }\n\n                that._select();\n              });\n              wrapper.on(\"focusout\" + NS, function () {\n                that._ctrlKey = that._shiftKey = false;\n              });\n              wrapper.on(\"keydown\" + NS, that._keydown.bind(that));\n              wrapper.on(\"keyup\" + NS, function (e) {\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n              });\n            },\n            _selectable: function () {\n              var that = this;\n              var wrapper = that.wrapper;\n\n              if (!that.options.selectable) {\n                return;\n              }\n\n              wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link\", function (e) {\n                if (that._isTouch(e)) {\n                  return;\n                }\n\n                that._mouseDownSelection(e);\n              });\n\n              var mouseMoveHandler = that._mouseMove.bind(that);\n\n              wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", function (e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n\n                if (that._isTouch(e)) {\n                  return;\n                }\n\n                if (!isRight) {\n                  wrapper.on(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                }\n              });\n              wrapper.on(\"mouseup\" + NS + \" mousecancel\" + NS, function () {\n                wrapper.off(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n              });\n            },\n            _mouseDownSelection: function (e) {\n              var which = e.which;\n              var button = e.button;\n              var isRight = which && which === 3 || button && button == 2;\n\n              if (!isRight) {\n                if (e.ctrlKey) {\n                  this._ctrlKey = e.ctrlKey;\n                }\n\n                if (e.shiftKey) {\n                  this._shiftKey = e.shiftKey;\n                }\n\n                this._mouseDown = true;\n\n                this._createSelection(e.currentTarget);\n\n                if ($(e.currentTarget).hasClass(\"k-event\")) {\n                  this._selection.eventElement = e.currentTarget;\n                }\n              }\n\n              if (kendo._activeElement() !== this.wrapper.get(0)) {\n                kendo.focusElement(this.wrapper);\n              } else {\n                this._select();\n              }\n\n              if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n              }\n            },\n            _selectFirstSlot: function () {\n              var firstAllDay = this.wrapper.find(\".k-scheduler-header-all-day\").find(\"td\").first(),\n                  firstContent = this.wrapper.find(\".k-scheduler-content\").find(\"td\").first(),\n                  firstSlot;\n\n              if (firstAllDay.length > 0) {\n                firstSlot = firstAllDay;\n              } else if (firstContent.length > 0) {\n                firstSlot = firstContent;\n              } else {\n                firstSlot = this.wrapper.find(\".k-scheduler-body\").find(\".k-link\").first();\n              }\n\n              this._createSelection(firstSlot);\n            },\n            _firstEvent: function () {\n              var firstEventInAllDay = this.wrapper.find(\".k-scheduler-header-wrap .k-event, .k-task\").first(),\n                  firstEventInContent = this.wrapper.find(\".k-scheduler-content .k-event\").first(),\n                  firstEvent,\n                  allDayEvent,\n                  contentEvent;\n\n              if (firstEventInAllDay.length > 0) {\n                if (firstEventInContent.length > 0) {\n                  allDayEvent = this.occurrenceByUid(firstEventInAllDay.data(\"uid\"));\n                  contentEvent = this.occurrenceByUid(firstEventInContent.data(\"uid\"));\n                  firstEvent = allDayEvent.start <= contentEvent.start ? firstEventInAllDay : firstEventInContent;\n                } else {\n                  firstEvent = firstEventInAllDay;\n                }\n              } else if (firstEventInContent) {\n                firstEvent = firstEventInContent;\n              }\n\n              return firstEvent;\n            },\n            _initialFocus: function () {\n              var firstEvent = this._firstEvent(),\n                  view = this.view();\n\n              if (view.name === \"year\") {\n                if (!view._preventCalendarFocus) {\n                  view.calendar.element.find(\".k-calendar-view\").attr(\"tabindex\", 0);\n                  view.calendar.focus();\n                } else {\n                  view._preventCalendarFocus = false;\n                }\n              } else if (this.options.selectable) {\n                if (firstEvent && firstEvent.length > 0) {\n                  this._createSelection(firstEvent);\n\n                  this._selection.eventElement = firstEvent[0];\n                } else {\n                  this._selectFirstSlot();\n                }\n              } else if (this.toolbar && this.toolbar.find(\".\" + FOCUSEDSTATE).length === 0) {\n                this._focusToolbar();\n              } else if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n              }\n            },\n            _select: function () {\n              var that = this;\n              var view = that.view();\n              var wrapper = that.wrapper;\n              var current = view.current();\n              var selection = that._selection;\n              var oldSelection = that._old ? that._old.selection : null;\n              var oldEventsLength = that._old ? that._old.eventsLength : null;\n\n              if (!selection) {\n                return;\n              }\n\n              if (current) {\n                current.removeAttribute(\"id\");\n                wrapper.removeAttr(\"aria-activedescendant\");\n              }\n\n              view.select(selection);\n              that._selection.eventElement = null;\n              current = view.current();\n\n              if (current) {\n                current.setAttribute(\"id\", that._ariaId);\n                wrapper.attr(\"aria-activedescendant\", that._ariaId);\n\n                if (oldSelection !== current || selection.events && oldEventsLength !== selection.events.length) {\n                  var currentUid = $(current).data(\"uid\");\n\n                  if (that._old && currentUid && currentUid === $(that._old.selection).data(\"uid\") && selection.events && that._old.eventsLength === selection.events.length) {\n                    return;\n                  }\n\n                  var events = that._selectedEvents();\n\n                  var slots = view._selectedSlots;\n                  that._old = {\n                    selection: current,\n                    eventsLength: events.length\n                  };\n                  that.trigger(CHANGE, {\n                    start: selection.start,\n                    end: selection.end,\n                    events: events,\n                    slots: slots,\n                    resources: view._resourceBySlot(selection)\n                  });\n                }\n              }\n            },\n            _selectedEvents: function () {\n              var uids = this._selection.events;\n              var length = uids.length;\n              var idx = 0;\n              var event;\n              var events = [];\n\n              for (; idx < length; idx++) {\n                event = this.occurrenceByUid(uids[idx]);\n\n                if (event) {\n                  events.push(event);\n                }\n              }\n\n              return events;\n            },\n            _tapPosition: function (event, coordinate) {\n              return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n            },\n            _touchMove: function (e) {\n              var that = this;\n              var content = that.wrapper.find(\".k-scheduler-content\");\n              var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n              var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n\n              var endY = that._tapPosition(e, 'Y');\n\n              var endX = that._tapPosition(e, 'X');\n\n              var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n              var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n              var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n              var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n\n              if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                return;\n              }\n\n              if (applyVerticalScroll || applyhorizontalScroll) {\n                that._amplitude = Math.round(endY - that._touchPosY);\n                that._touchPosY = endY;\n                that._touchPosX = endX;\n                content.animate({\n                  scrollTop: scrollTop,\n                  scrollLeft: scrollLeft\n                }, 0);\n                that.view()._scrolling = true;\n              }\n            },\n            _mouseMove: function (e) {\n              var that = this;\n              clearTimeout(that._moveTimer);\n\n              if (that._isTouch(e)) {\n                return;\n              }\n\n              that._moveTimer = setTimeout(function () {\n                var view = that.view();\n                var selection = that._selection;\n\n                if (selection) {\n                  var slot = view.selectionByElement($(e.currentTarget));\n\n                  if (slot && selection.groupIndex === slot.groupIndex) {\n                    var startDate = slot.startDate();\n                    var endDate = slot.endDate();\n\n                    if (startDate >= selection.end) {\n                      selection.backward = false;\n                    } else if (endDate <= selection.start) {\n                      selection.backward = true;\n                    }\n\n                    if (selection.backward) {\n                      selection.start = startDate;\n                    } else {\n                      selection.end = endDate;\n                    }\n\n                    that._select();\n                  }\n                }\n              }, 5);\n            },\n            _viewByIndex: function (index) {\n              var view,\n                  views = this.views;\n\n              for (view in views) {\n                if (!index) {\n                  return view;\n                }\n\n                index--;\n              }\n            },\n            _keydownToolbar: function (e) {\n              var key = e.keyCode,\n                  focusableToolBarSelector = \"> .k-button,\" + \".k-scheduler-navigation > .k-button,\" + \".k-nav-current,\" + \".k-views-dropdown:visible,\" + \".k-scheduler-views:visible > .k-button,\" + \".k-scheduler-search-input,\" + \".k-scheduler-mobile-views,\" + \".k-button-group > .k-button\",\n                  focusableItems = this.toolbar.find(focusableToolBarSelector),\n                  shouldNavigate = $(e.target).closest(VIEWSSELECTOR).length || this.toolbar.find('.k-scheduler-views .k-focus').length,\n                  isRtl = kendo.support.isRtl(this.element),\n                  focusedItem = this.toolbar.find(\".\" + FOCUSEDSTATE + \", :focus\"),\n                  idx = focusableItems.index(focusedItem),\n                  itemToFocus;\n\n              if (key === keys.TAB && (!e.shiftKey || this.options.selectable)) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n              } else if (e.altKey && key === keys.DOWN && this.toolbar.find(\".k-nav-current\").hasClass(FOCUSEDSTATE)) {\n                this._showCalendar();\n\n                e.preventDefault();\n                return;\n              } else if (key === keys.RIGHT || key === keys.LEFT) {\n                if (key === keys.RIGHT && !isRtl || key === keys.LEFT && isRtl) {\n                  idx = idx + 1;\n\n                  if (idx === focusableItems.length) {\n                    this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                    this.element.focus();\n                    return;\n                  }\n                } else if (key === keys.LEFT && !isRtl || key === keys.RIGHT && isRtl) {\n                  idx = idx - 1;\n\n                  if (idx < 0) {\n                    return;\n                  }\n                }\n\n                itemToFocus = focusableItems[idx];\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(itemToFocus).addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).focus().attr(\"tabindex\", -1);\n                this._focusedView = null;\n                e.preventDefault();\n                return;\n              } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                if (shouldNavigate && this._focusedView && !this._focusedView.hasClass(\"k-selected\")) {\n                  var focusedViewName = this._focusedView.data().name;\n\n                  if (!this.trigger(\"navigate\", {\n                    view: focusedViewName,\n                    action: \"changeView\",\n                    date: this.date()\n                  })) {\n                    this.view(focusedViewName);\n                  }\n\n                  e.preventDefault();\n                  return;\n                }\n\n                this.toolbar.find(\".\" + FOCUSEDSTATE + ':visible').click();\n                e.preventDefault();\n                return;\n              } else if (key === keys.DOWN && !this.wrapper.find(\".k-views-dropdown\").hasClass(\"k-focus\")) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                if (this._selectedViewName === \"year\") {\n                  this.view().calendar.element.find(\".k-calendar-view\").attr(\"tabindex\", 0);\n                  this.view().calendar.focus();\n                } else if (document.activeElement !== this.element[0]) {\n                  this.element.focus();\n                }\n\n                e.preventDefault();\n                return;\n              }\n            },\n            _keydownView: function (e) {\n              var key = e.keyCode,\n                  isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92,\n                  selection = this._selection,\n                  view = this.view(),\n                  editable = view.options.editable,\n                  arrowKeys = [keys.LEFT, keys.RIGHT, keys.UP, keys.DOWN],\n                  isRtl = kendo.support.isRtl(this.element),\n                  previous,\n                  content,\n                  cell;\n\n              if (isModifier) {\n                return;\n              } // slots selection via keyboard is no longer available\n              // see here: https://github.com/telerik/kendo-themes/blob/develop/docs/accessibility/Scheduler.md\n\n\n              if (!selection) {\n                return;\n              }\n\n              if (key === keys.ENTER) {\n                if (selection.events.length && editable) {\n                  if (editable.update !== false) {\n                    this.editEvent(selection.events[0]);\n                  }\n                }\n              } else if ((key === keys.DELETE || key === keys.BACKSPACE) && editable !== false && editable.destroy !== false) {\n                this.removeEvent(selection.events[0]);\n              } else if (arrowKeys.indexOf(key) > -1) {\n                previous = key === keys.UP || key === keys.LEFT && !isRtl || key === keys.RIGHT && isRtl;\n\n                if (view.moveToEvent(selection, previous)) {\n                  this._select(); // Focus the Scheduler element only if it not the currently focused element\n\n\n                  if (document.activeElement !== this.element[0]) {\n                    this.element.focus();\n                  }\n\n                  e.preventDefault();\n                }\n              } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                  cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                  cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n              }\n            },\n            _keydownShortcut: function (key) {\n              var currentDate = new Date(),\n                  timezone = this.options.timezone,\n                  editable = this.view().options.editable;\n\n              if (key === 66 && !!this.view().toggleFullDay) {\n                this.view().toggleFullDay();\n              } else if (key === 67 && editable && editable.create !== false) {\n                this.addEvent(extend({}, {\n                  start: this.date(),\n                  end: this.date()\n                }));\n              } else if (key === 84) {\n                if (timezone) {\n                  var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                  date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                  date = currentDate;\n                }\n\n                if (!this.trigger(\"navigate\", {\n                  view: this._selectedViewName,\n                  action: \"today\",\n                  date: date\n                })) {\n                  this.date(date);\n                }\n              }\n            },\n            _keydownYearView: function (e) {\n              var view = this.view(),\n                  selection = this._selection,\n                  key = e.keyCode;\n\n              if (key === keys.TAB) {\n                return;\n              }\n\n              if (key === keys.F10) {\n                view.calendar.element.find(\".k-calendar-view\").removeAttr(\"tabindex\");\n\n                this._focusToolbar();\n\n                e.preventDefault();\n              } else {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                view.calendar.element.find(\".k-calendar-view\").attr(\"tabindex\", 0);\n                view.calendar.focus();\n              }\n\n              if (selection) {\n                this._adjustSelectedDate();\n              }\n\n              e.preventDefault();\n            },\n            _keydownAgendaView: function (e) {\n              var key = e.keyCode,\n                  view = this.view(),\n                  selection = this._selection,\n                  content,\n                  cell;\n\n              if (view.move(selection, key)) {\n                e.preventDefault();\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                this._select();\n              } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                  cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                  cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n              }\n            },\n            _keydownChangeView: function (key) {\n              var viewIndex = key - 49,\n                  viewByIndex;\n\n              if (viewIndex === -1) {\n                viewIndex = 9;\n              }\n\n              viewByIndex = this._viewByIndex(viewIndex);\n\n              if (viewByIndex && !this.trigger(\"navigate\", {\n                view: viewByIndex,\n                action: \"changeView\",\n                date: this.date()\n              })) {\n                this.view(viewByIndex);\n              }\n            },\n            _keydownChangeDate: function (key) {\n              var isRtl = kendo.support.isRtl(this.element),\n                  direction = isRtl && key === keys.LEFT || !isRtl && key === keys.RIGHT ? \"next\" : \"previous\";\n\n              if (direction === \"next\") {\n                date = this.view().nextDate();\n              } else {\n                date = this.view().previousDate();\n              }\n\n              if (!this.trigger(\"navigate\", {\n                view: this._selectedViewName,\n                action: direction,\n                date: date\n              })) {\n                this.date(date);\n\n                this._initialFocus();\n\n                this._select();\n              }\n            },\n            _keydown: function (e) {\n              var key = e.keyCode,\n                  shortcutKeys = [66, 67, 84],\n                  toolbarIsFocused = $(e.target).closest(\".k-toolbar\").length > 0,\n                  altKey = e.altKey;\n              this._ctrlKey = e.ctrlKey;\n              this._shiftKey = e.shiftKey;\n\n              if (key === keys.ESC && this.popup && this.popup.visible()) {\n                this.popup.close();\n                e.preventDefault();\n                return;\n              }\n\n              if ((key === keys.LEFT || key === keys.RIGHT) && this._shiftKey) {\n                this._keydownChangeDate(key);\n\n                return;\n              }\n\n              if (altKey && key >= 48 && key <= 57) {\n                this._keydownChangeView(key);\n\n                return;\n              }\n\n              if (shortcutKeys.indexOf(key) > -1) {\n                this._keydownShortcut(key);\n\n                return;\n              }\n\n              if (toolbarIsFocused) {\n                this._keydownToolbar(e);\n              } else {\n                if (this._selectedViewName === \"year\") {\n                  this._keydownYearView(e);\n\n                  return;\n                }\n\n                if (key === keys.F10) {\n                  this._focusToolbar();\n\n                  e.preventDefault();\n                  return;\n                }\n\n                if (this._selectedViewName === \"agenda\") {\n                  this._keydownAgendaView(e);\n\n                  return;\n                }\n\n                this._keydownView(e);\n              }\n            },\n            _focusToolbar: function () {\n              this.toolbar.find(\".k-button\").first().trigger(\"focus\").addClass(FOCUSEDSTATE);\n            },\n            _createSelection: function (item) {\n              var selection = this._selection,\n                  uid,\n                  slot;\n              item = $(item);\n\n              if (item.is(\".k-event\")) {\n                uid = item.attr(kendo.attr(\"uid\"));\n\n                if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                  return;\n                }\n              }\n\n              if (!selection || !this._ctrlKey && !this._shiftKey) {\n                selection = this._selection = {\n                  events: [],\n                  groupIndex: 0\n                };\n              }\n\n              slot = this.view().selectionByElement(item);\n\n              if (slot) {\n                selection.groupIndex = slot.groupIndex || 0;\n              }\n\n              if (uid) {\n                slot = getOccurrenceByUid(this._data, uid);\n              }\n\n              if (slot && slot.uid) {\n                uid = [slot.uid];\n              }\n\n              this._updateSelection(slot, uid);\n\n              this._adjustSelectedDate();\n            },\n            _updateSelection: function (dataItem, events, groupIndex) {\n              var selection = this._selection;\n\n              if (dataItem && selection) {\n                var view = this.view();\n\n                if (dataItem.uid) {\n                  dataItem = view._updateEventForSelection(dataItem);\n                }\n\n                if (this._shiftKey && selection.start && selection.end) {\n                  var backward = dataItem.end < selection.end;\n                  selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n\n                  if (backward && view._timeSlotInterval) {\n                    kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                  }\n                } else {\n                  selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                  selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                }\n\n                if (\"isDaySlot\" in dataItem) {\n                  selection.isAllDay = dataItem.isDaySlot;\n                } else {\n                  selection.isAllDay = dataItem.isAllDay;\n                }\n\n                if (groupIndex !== null && groupIndex !== undefined) {\n                  selection.groupIndex = groupIndex;\n                }\n\n                selection.index = dataItem.index;\n\n                if (this._ctrlKey) {\n                  var indexOfEvent = events && events.length ? selection.events.indexOf(events[0]) : -1;\n\n                  if (indexOfEvent > -1) {\n                    selection.events.splice(indexOfEvent, 1);\n                  } else {\n                    selection.events = selection.events.concat(events || []);\n                  }\n                } else {\n                  selection.events = events || [];\n                }\n              }\n            },\n            options: {\n              name: \"Scheduler\",\n              date: TODAY,\n              editable: true,\n              autoBind: true,\n              snap: true,\n              mobile: false,\n              timezone: \"\",\n              allDaySlot: true,\n              min: new Date(1900, 0, 1),\n              max: new Date(2099, 11, 31),\n              toolbar: null,\n              workWeekStart: 1,\n              workWeekEnd: 5,\n              workDays: null,\n              showWorkHours: false,\n              startTime: TODAY,\n              endTime: TODAY,\n              currentTimeMarker: {\n                updateInterval: 10000,\n                useLocalTimezone: true\n              },\n              footer: {},\n              messages: {\n                today: \"Today\",\n                pdf: \"Export to PDF\",\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                resetSeries: \"Reset Series\",\n                deleteWindowTitle: \"Delete event\",\n                next: \"Next\",\n                previous: \"Previous\",\n                refresh: \"Refresh\",\n                selectView: \"Select view\",\n                ariaSlotLabel: \"Selected from {0:t} to {1:t}\",\n                ariaEventLabel: {\n                  on: \"on\",\n                  at: \"at\",\n                  to: \"to\",\n                  allDay: \"(all day)\",\n                  prefix: \"\"\n                },\n                search: \"Search...\",\n                views: {\n                  day: \"Day\",\n                  week: \"Week\",\n                  workWeek: \"Work Week\",\n                  agenda: \"Agenda\",\n                  month: \"Month\",\n                  timeline: \"Timeline\",\n                  timelineWeek: \"Timeline Week\",\n                  timelineWorkWeek: \"Timeline Work Week\",\n                  timelineMonth: \"Timeline Month\",\n                  year: \"Year\"\n                },\n                recurrenceMessages: {\n                  deleteWindowTitle: \"Delete Recurring Item\",\n                  resetSeriesWindowTitle: \"Reset Series\",\n                  deleteWindowOccurrence: \"Delete current occurrence\",\n                  deleteWindowSeries: \"Delete the series\",\n                  editWindowTitle: \"Edit Recurring Item\",\n                  editWindowOccurrence: \"Edit current occurrence\",\n                  editWindowSeries: \"Edit the series\"\n                },\n                editable: {\n                  confirmation: DELETECONFIRM\n                },\n                editor: {\n                  title: \"Title\",\n                  start: \"Start\",\n                  end: \"End\",\n                  allDayEvent: \"All day event\",\n                  description: \"Description\",\n                  repeat: \"Repeat\",\n                  timezone: \"Timezone\",\n                  startTimezone: \"Start timezone\",\n                  endTimezone: \"End timezone\",\n                  separateTimezones: \"Use separate start and end time zones\",\n                  timezoneEditorTitle: \"Timezones\",\n                  timezoneEditorButton: \"Time zone\",\n                  timezoneTitle: \"Time zones\",\n                  noTimezone: \"No timezone\",\n                  editorTitle: \"Event\"\n                }\n              },\n              height: null,\n              width: null,\n              resources: [],\n              group: {\n                resources: [],\n                orientation: \"horizontal\"\n              },\n              views: [],\n              selectable: false\n            },\n            events: [REMOVE, EDIT, CANCEL, SAVE, \"add\", \"dataBinding\", \"dataBound\", \"moveStart\", \"move\", \"moveEnd\", \"resizeStart\", \"resize\", \"resizeEnd\", \"navigate\", CHANGE],\n            destroy: function () {\n              var that = this,\n                  element;\n              Widget.fn.destroy.call(that);\n\n              if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.dataSource.unbind(PROGRESS, that._progressHandler);\n                that.dataSource.unbind(ERROR, that._errorHandler);\n              }\n\n              if (that._resourceRefreshHandler) {\n                for (var idx = 0; idx < that.resources.length; idx++) {\n                  var resourceDS = that.resources[idx].dataSource;\n                  resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                  resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                  resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                }\n              }\n\n              if (that.calendar) {\n                that.calendar.destroy();\n                that.popup.destroy();\n              }\n\n              if (that.view()) {\n                that.view().destroy();\n              }\n\n              if (that._editor) {\n                that._editor.destroy();\n              }\n\n              if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n              }\n\n              if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n              }\n\n              element = that.element.add(that.wrapper).add(that.toolbar).add(that.popup);\n              element.off(NS);\n              clearTimeout(that._moveTimer);\n              that._model = null;\n              that.toolbar = null;\n              that.element = null;\n              $(window).off(\"resize\" + NS, that._resizeHandler);\n              kendo.destroy(that.wrapper);\n            },\n            setDataSource: function (dataSource) {\n              this.options.dataSource = dataSource;\n\n              this._dataSource();\n\n              if (this.options.autoBind && dataSource.fetch) {\n                dataSource.fetch();\n              } else if (isArray(dataSource)) {\n                this.view(this._selectedView);\n              }\n            },\n            items: function () {\n              var content = this.wrapper.find(\".k-scheduler-content\");\n              var view = this.view();\n\n              if (view && view.options.name === \"agenda\") {\n                return content.find(\".k-task\");\n              } else {\n                return content.find(\".k-event\").add(this.wrapper.find(\".k-scheduler-header-wrap\").find(\".k-scheduler-header-all-day\").siblings());\n              }\n            },\n            _movable: function () {\n              var startSlot;\n              var endSlot;\n              var startResources;\n              var startTime;\n              var endTime;\n              var event;\n              var clonedEvent;\n              var that = this;\n              var originSlot;\n              var originStartTime;\n              var originalEvent;\n              var distance = 0;\n              var clonedEvents = [];\n              var cachedEvents = [];\n\n              var isMobile = that._isMobile();\n\n              var movable = that.options.editable && that.options.editable.move !== false;\n              var resizable = that.options.editable && that.options.editable.resize !== false;\n\n              if (movable || resizable && isMobile) {\n                that._dragging = false;\n\n                if (isMobile && kendo.support.mobileOS.android) {\n                  distance = 5;\n                }\n\n                that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                  distance: distance,\n                  filter: \".k-event\",\n                  ignore: \".k-resize-handle\",\n                  holdToDrag: isMobile,\n                  autoScroll: true\n                });\n\n                if (movable) {\n                  that._moveDraggable.bind(\"dragstart\", function (e) {\n                    var view = that.view();\n                    var eventElement = e.currentTarget;\n\n                    var isTouch = that._isTouch(e);\n\n                    that._dragging = true;\n\n                    if (!view.options.editable || view.options.editable.move === false) {\n                      that._dragging = false;\n                      e.preventDefault();\n                      return;\n                    }\n\n                    if (isTouch && !eventElement.hasClass(\"k-event-active\")) {\n                      that._dragging = false;\n                      that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                      e.preventDefault();\n                      return;\n                    }\n\n                    event = that.occurrenceByUid(eventElement.attr(kendo.attr(\"uid\")));\n                    clonedEvent = event.clone();\n                    originalEvent = event.clone();\n                    clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n                    clonedEvent.inverseColor = that._isInverseColor(eventElement);\n                    clonedEvents = [];\n\n                    if (that._selection) {\n                      var events = that._selection.events;\n\n                      for (var i = 0; i < events.length; i++) {\n                        var evtClone = that.occurrenceByUid(events[i]).clone();\n                        var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n                        evtClone.update(view._eventOptionsForMove(evtClone));\n\n                        if (evtCloneElement.length) {\n                          evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                        }\n\n                        clonedEvents.push(evtClone);\n                      }\n                    } else {\n                      clonedEvents.push(clonedEvent);\n                    }\n\n                    startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                    startResources = view._resourceBySlot(startSlot);\n                    originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n                    endSlot = startSlot;\n                    originSlot = startSlot;\n\n                    if (!startSlot || that.trigger(\"moveStart\", {\n                      event: event\n                    })) {\n                      e.preventDefault();\n                    }\n                  }).bind(\"drag\", function (e) {\n                    var view = that.view();\n\n                    var slot = view._slotByPosition(e.x.location, e.y.location);\n\n                    var distance;\n                    var range;\n                    var i;\n\n                    if (!slot) {\n                      return;\n                    }\n\n                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n\n                    if (slot.isDaySlot !== startSlot.isDaySlot) {\n                      if (slot.isDaySlot !== originSlot.isDaySlot) {\n                        var slotIndex = $(startSlot.element).index();\n                        var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n                        startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n                        startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n                        cachedEvents = clonedEvents.map(function (event) {\n                          return event.clone();\n                        });\n\n                        for (i = 0; i < clonedEvents.length; i++) {\n                          if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                            clonedEvents[i].isAllDay = slot.isDaySlot;\n                            clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                            clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n\n                            if (!slot.isDaySlot) {\n                              kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                              kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                            }\n                          }\n                        }\n                      } else {\n                        startSlot = $.extend(true, {}, originSlot);\n                        startTime = originStartTime;\n                        clonedEvents = cachedEvents;\n                      }\n                    }\n\n                    distance = endTime - startTime;\n\n                    for (i = 0; i < clonedEvents.length; i++) {\n                      view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                    }\n\n                    range = moveEventRange(clonedEvent, distance);\n\n                    if (!that.trigger(\"move\", {\n                      event: event,\n                      slot: {\n                        element: slot.element,\n                        start: slot.startDate(),\n                        end: slot.endDate(),\n                        isDaySlot: slot.isDaySlot\n                      },\n                      resources: view._resourceBySlot(slot),\n                      start: range.start,\n                      end: range.end\n                    })) {\n                      endSlot = slot;\n                    } else {\n                      for (i = 0; i < clonedEvents.length; i++) {\n                        view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                      }\n                    }\n                  }).bind(\"dragend\", function (e) {\n                    that.view()._removeMoveHint();\n\n                    var distance = endTime - startTime;\n                    var range = moveEventRange(clonedEvent, distance);\n                    var start = range.start;\n                    var end = range.end;\n                    that._dragging = false;\n\n                    var endResources = that.view()._resourceBySlot(endSlot);\n\n                    var prevented = that.trigger(\"moveEnd\", {\n                      event: event,\n                      slot: {\n                        element: endSlot.element,\n                        start: endSlot.startDate(),\n                        end: endSlot.endDate()\n                      },\n                      start: start,\n                      end: end,\n                      resources: endResources\n                    });\n\n                    if (!prevented && (event.start.getTime() !== start.getTime() || event.end.getTime() !== end.getTime() || originSlot.isDaySlot !== endSlot.isDaySlot || kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n                      that._isMultiDrag = clonedEvents.length > 1;\n\n                      for (var i = 0; i < clonedEvents.length; i++) {\n                        var evt = clonedEvents[i];\n                        range = moveEventRange(evt, distance);\n\n                        var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n\n                        var eventOptions = $.extend({\n                          isAllDay: evt.isAllDay,\n                          start: range.start,\n                          end: range.end\n                        }, updatedEventOptions, endResources);\n\n                        that._updateEvent(null, evt, eventOptions);\n                      }\n\n                      if (that._isMultiDrag) {\n                        that.dataSource.sync();\n                        that._isMultiDrag = false;\n                      }\n                    }\n\n                    e.currentTarget.removeClass(\"k-event-active\");\n                    this.cancelHold();\n                    clonedEvents = [];\n                    cachedEvents = [];\n                  }).bind(\"dragcancel\", function () {\n                    that.view()._removeMoveHint();\n\n                    this.cancelHold();\n                    clonedEvents = [];\n                    cachedEvents = [];\n                  });\n                }\n\n                that._moveDraggable.bind(\"hold\", function (e) {\n                  if (that._isTouch(e)) {\n                    that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n\n                    if (that.options.selectable) {\n                      that._createSelection(e.currentTarget);\n                    }\n\n                    e.currentTarget.addClass(\"k-event-active\");\n                  }\n                });\n              }\n            },\n            _resizable: function () {\n              var startTime;\n              var endTime;\n              var event;\n              var clonedEvent;\n              var slot;\n              var that = this;\n              var distance = 0;\n\n              function direction(handle) {\n                var directions = {\n                  \"k-resize-e\": \"east\",\n                  \"k-resize-w\": \"west\",\n                  \"k-resize-n\": \"north\",\n                  \"k-resize-s\": \"south\"\n                };\n\n                for (var key in directions) {\n                  if (handle.hasClass(key)) {\n                    return directions[key];\n                  }\n                }\n              }\n\n              if (that._isMobile() && kendo.support.mobileOS.android) {\n                distance = 5;\n              }\n\n              that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                distance: distance,\n                filter: \".k-resize-handle\",\n                autoScroll: true,\n                dragstart: function (e) {\n                  var dragHandle = $(e.currentTarget);\n                  var eventElement = dragHandle.closest(\".k-event\");\n                  var uid = eventElement.attr(kendo.attr(\"uid\"));\n                  var view = that.view();\n                  that._dragging = true;\n                  event = that.occurrenceByUid(uid);\n                  clonedEvent = event.clone();\n\n                  view._updateEventForResize(clonedEvent);\n\n                  slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n\n                  if (that.trigger(\"resizeStart\", {\n                    event: event\n                  })) {\n                    e.preventDefault();\n                  }\n\n                  startTime = kendo.date.toUtcTime(clonedEvent.start);\n                  endTime = kendo.date.toUtcTime(clonedEvent.end);\n                },\n                drag: function (e) {\n                  if (!slot) {\n                    return;\n                  }\n\n                  var dragHandle = $(e.currentTarget);\n                  var dir = direction(dragHandle);\n                  var view = that.view();\n\n                  var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n\n                  if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                    return;\n                  }\n\n                  slot = currentSlot;\n                  var originalStart = startTime;\n                  var originalEnd = endTime;\n\n                  if (dir == \"south\") {\n                    if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                      if (clonedEvent.isAllDay) {\n                        endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                      } else {\n                        endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                      }\n                    }\n                  } else if (dir == \"north\") {\n                    if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                      startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                    }\n                  } else if (dir == \"east\") {\n                    if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                      if (clonedEvent.isAllDay) {\n                        endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                      } else {\n                        endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                      }\n                    } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                      endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                    }\n                  } else if (dir == \"west\") {\n                    if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                      startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                    } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                      startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                    }\n                  }\n\n                  if (!that.trigger(\"resize\", {\n                    event: event,\n                    slot: {\n                      element: slot.element,\n                      start: slot.startDate(),\n                      end: slot.endDate()\n                    },\n                    start: kendo.timezone.toLocalDate(startTime),\n                    end: kendo.timezone.toLocalDate(endTime),\n                    resources: view._resourceBySlot(slot)\n                  })) {\n                    view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                  } else {\n                    startTime = originalStart;\n                    endTime = originalEnd;\n                  }\n                },\n                dragend: function (e) {\n                  var dragHandle = $(e.currentTarget);\n                  var start = new Date(clonedEvent.start.getTime());\n                  var end = new Date(clonedEvent.end.getTime());\n                  var dir = direction(dragHandle);\n                  that._dragging = false;\n\n                  that.view()._removeResizeHint();\n\n                  if (dir == \"south\") {\n                    end = kendo.timezone.toLocalDate(endTime);\n                  } else if (dir == \"north\") {\n                    start = kendo.timezone.toLocalDate(startTime);\n                  } else if (dir == \"east\") {\n                    if (slot.isDaySlot) {\n                      end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                    } else {\n                      end = kendo.timezone.toLocalDate(endTime);\n                    }\n                  } else if (dir == \"west\") {\n                    if (slot.isDaySlot) {\n                      start = new Date(kendo.timezone.toLocalDate(startTime));\n                      start.setHours(0);\n                      start.setMinutes(0);\n                    } else {\n                      start = kendo.timezone.toLocalDate(startTime);\n                    }\n                  }\n\n                  var prevented = that.trigger(\"resizeEnd\", {\n                    event: event,\n                    slot: {\n                      element: slot.element,\n                      start: slot.startDate(),\n                      end: slot.endDate()\n                    },\n                    start: start,\n                    end: end,\n                    resources: that.view()._resourceBySlot(slot)\n                  });\n\n                  if (!prevented && end.getTime() >= start.getTime()) {\n                    if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                      that.view()._updateEventForResize(event);\n\n                      that._updateEvent(dir, event, {\n                        start: start,\n                        end: end\n                      });\n                    }\n                  }\n\n                  slot = null;\n                  event = null;\n                },\n                dragcancel: function () {\n                  that._dragging = false;\n\n                  that.view()._removeResizeHint();\n\n                  slot = null;\n                  event = null;\n                }\n              });\n            },\n            _updateEvent: function (dir, event, eventInfo) {\n              var that = this;\n\n              var updateEvent = function (event, callback) {\n                var start;\n\n                try {\n                  that._preventRefresh = true;\n                  event.update(eventInfo);\n\n                  that._convertDates(event);\n\n                  start = event.start;\n\n                  if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                    event.set(\"isAllDay\", true);\n                  }\n                } finally {\n                  that._preventRefresh = false;\n                }\n\n                if (!that.trigger(SAVE, {\n                  event: event\n                })) {\n                  if (callback) {\n                    callback();\n                  }\n\n                  if (!that._isMultiDrag) {\n                    that.dataSource.sync();\n                  }\n                }\n              };\n\n              var recurrenceHead = function (event) {\n                if (event.recurrenceRule) {\n                  return that.dataSource.getByUid(event.uid);\n                } else {\n                  return that.dataSource.get(event.recurrenceId);\n                }\n              };\n\n              var updateSeries = function () {\n                var head = recurrenceHead(event);\n\n                if (dir == \"south\" || dir == \"north\") {\n                  if (eventInfo.start) {\n                    var start = kendo.date.getDate(head.start);\n                    kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                    eventInfo.start = start;\n                  }\n\n                  if (eventInfo.end) {\n                    var end = kendo.date.getDate(head.end);\n                    kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                    eventInfo.end = end;\n                  }\n                }\n\n                that.dataSource._removeExceptions(head);\n\n                updateEvent(head);\n              };\n\n              var updateOccurrence = function () {\n                var head = recurrenceHead(event);\n                var eventUid;\n\n                var callback = function () {\n                  that._convertDates(head);\n\n                  if (that._selection) {\n                    that._selection.events.push(eventUid);\n                  }\n                };\n\n                var exception = head.toOccurrence({\n                  start: event.start,\n                  end: event.end\n                });\n                eventUid = exception.uid;\n                updateEvent(that.dataSource.add(exception), callback);\n              };\n\n              if (event.recurrenceRule || event.isOccurrence()) {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                that._showRecurringDialog(event, updateOccurrence, updateSeries, {\n                  title: recurrenceMessages.editWindowTitle,\n                  text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                  occurrenceText: recurrenceMessages.editWindowOccurrence,\n                  seriesText: recurrenceMessages.editWindowSeries\n                });\n              } else {\n                updateEvent(that.dataSource.getByUid(event.uid));\n              }\n            },\n            _modelForContainer: function (container) {\n              container = $(container).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n              return this.dataSource.getByUid(container.attr(kendo.attr(\"uid\")));\n            },\n            showDialog: function (options) {\n              this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n              this._editor.showDialog(options);\n            },\n            focus: function () {\n              this.wrapper.trigger(\"focus\");\n            },\n            _confirmation: function (callback, model, isResetSeries) {\n              var editable = this.options.editable;\n\n              if (editable === true || editable.confirmation !== false) {\n                var messages = this.options.messages;\n                var title = messages.deleteWindowTitle;\n                var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n\n                if (this._isEditorOpened() && model.isRecurring()) {\n                  var recurrenceMessages = this.options.messages.recurrenceMessages;\n                  title = recurrenceMessages.deleteWindowTitle;\n\n                  if (model.isException() || model.isNew()) {\n                    text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                  } else {\n                    text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                  }\n\n                  if (isResetSeries) {\n                    title = recurrenceMessages.resetSeriesWindowTitle;\n                    text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                  }\n                }\n\n                var buttons = [{\n                  name: \"destroy\",\n                  text: isResetSeries ? messages.resetSeries : messages.destroy,\n                  click: function () {\n                    callback();\n                  }\n                }];\n\n                if (!(this._isMobile() && kendo.Pane)) {\n                  buttons.push({\n                    name: \"canceledit\",\n                    text: messages.cancel,\n                    click: function () {\n                      callback(true);\n                    }\n                  });\n                }\n\n                this._unbindResize();\n\n                this.showDialog({\n                  model: model,\n                  text: text,\n                  title: title,\n                  buttons: buttons\n                });\n\n                this._bindResize();\n              } else {\n                callback();\n              }\n            },\n            addEvent: function (eventInfo) {\n              var editable = this._editor.editable;\n              var dataSource = this.dataSource;\n              var event;\n              eventInfo = eventInfo || {};\n              var prevented = this.trigger(\"add\", {\n                event: eventInfo\n              });\n\n              if (!prevented && (editable && editable.end() || !editable)) {\n                this.cancelEvent();\n\n                if (eventInfo && eventInfo.toJSON) {\n                  eventInfo = eventInfo.toJSON();\n                }\n\n                event = dataSource.add(eventInfo);\n\n                if (event) {\n                  this.cancelEvent();\n\n                  this._editEvent(event);\n                }\n              }\n            },\n            saveEvent: function () {\n              var that = this;\n              var editor = that._editor;\n              var dataSource = that.dataSource;\n\n              if (!editor) {\n                return;\n              }\n\n              var editable = editor.editable;\n              var container = editor.container;\n\n              var model = that._modelForContainer(container);\n\n              var events, i, event;\n\n              if (container && editable && editable.end() && !that.trigger(SAVE, {\n                container: container,\n                event: model\n              })) {\n                if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                  events = dataSource.data();\n\n                  for (i = events.length - 1; i >= 0; i -= 1) {\n                    event = events[i];\n\n                    if (event && event.recurrenceId === model.id) {\n                      dataSource.remove(event);\n                    }\n                  }\n\n                  model.set(\"recurrenceException\", \"\");\n                }\n\n                if (!model.dirty && !model.isOccurrence()) {\n                  that._convertDates(model, \"remove\");\n                }\n\n                dataSource.sync();\n              }\n            },\n            cancelEvent: function () {\n              var editor = this._editor;\n              var container = editor.container;\n              var model;\n\n              if (container) {\n                model = this._modelForContainer(container);\n\n                if (model && model.isOccurrence()) {\n                  this._convertDates(model, \"remove\");\n\n                  this._convertDates(this.dataSource.get(model.recurrenceId), \"remove\");\n                }\n\n                this.dataSource.cancelChanges(model); //TODO: handle the cancel in UI\n\n                editor.close();\n              }\n            },\n            editEvent: function (uid) {\n              var model = typeof uid == \"string\" ? this.occurrenceByUid(uid) : uid;\n\n              if (!model) {\n                return;\n              }\n\n              this.cancelEvent();\n\n              if (model.isRecurring()) {\n                this._editRecurringDialog(model);\n              } else {\n                this._editEvent(model);\n              }\n            },\n            _editEvent: function (model) {\n              this._preventRefresh = true;\n\n              this._unbindResize();\n\n              this._createPopupEditor(model);\n\n              this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n              this._bindResize();\n            },\n            _editRecurringDialog: function (model) {\n              var that = this;\n\n              var editOccurrence = function () {\n                if (model.isException()) {\n                  that._editEvent(model);\n                } else {\n                  that.addEvent(model);\n                }\n              };\n\n              var editSeries = function () {\n                if (model.recurrenceId) {\n                  model = that.dataSource.get(model.recurrenceId);\n                }\n\n                that._editEvent(model);\n              };\n\n              var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n              that._showRecurringDialog(model, editOccurrence, editSeries, {\n                title: recurrenceMessages.editWindowTitle,\n                text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                occurrenceText: recurrenceMessages.editWindowOccurrence,\n                seriesText: recurrenceMessages.editWindowSeries\n              });\n            },\n            _showRecurringDialog: function (model, editOccurrence, editSeries, messages) {\n              var editable = this.options.editable;\n              var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n              if (editRecurringMode === \"occurrence\" || this._isMultiDrag) {\n                editOccurrence();\n              } else if (editRecurringMode === \"series\") {\n                editSeries();\n              } else {\n                this._unbindResize();\n\n                this.showDialog({\n                  model: model,\n                  title: messages.title,\n                  text: messages.text,\n                  buttons: [{\n                    text: messages.occurrenceText,\n                    click: editOccurrence\n                  }, {\n                    text: messages.seriesText,\n                    click: editSeries\n                  }]\n                });\n\n                this._bindResize();\n              }\n            },\n            _createButton: function (command) {\n              var template = command.template || COMMANDBUTTONTMPL,\n                  commandName = typeof command === STRING ? command : command.name || command.text,\n                  options = {\n                className: \"k-scheduler-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                text: commandName,\n                attr: \"\"\n              };\n\n              if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n              }\n\n              if (isPlainObject(command)) {\n                if (command.className) {\n                  command.className += \" \" + options.className;\n                }\n\n                if (commandName === \"edit\" && isPlainObject(command.text)) {\n                  command = extend(true, {}, command);\n                  command.text = command.text.edit;\n                }\n\n                options = extend(true, options, defaultCommands[commandName], command);\n              } else {\n                options = extend(true, options, defaultCommands[commandName]);\n              }\n\n              if (!options.className) {\n                options.className = \"k-button-solid-base\";\n              } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                options.className += \" k-button-solid-base\";\n              }\n\n              return kendo.template(template)(options);\n            },\n            _convertDates: function (model, method) {\n              var timezone = this.dataSource.reader.timezone;\n              var startTimezone = model.startTimezone;\n              var endTimezone = model.endTimezone;\n              var start = model.start;\n              var end = model.start;\n              method = method || \"apply\";\n              startTimezone = startTimezone || endTimezone;\n              endTimezone = endTimezone || startTimezone;\n\n              if (startTimezone) {\n                if (timezone) {\n                  if (method === \"apply\") {\n                    start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                    end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                  } else {\n                    start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                    end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                  }\n                } else {\n                  start = kendo.timezone[method](model.start, startTimezone);\n                  end = kendo.timezone[method](model.end, endTimezone);\n                }\n\n                model._set(\"start\", start);\n\n                model._set(\"end\", end);\n              }\n            },\n            _createEditor: function () {\n              var that = this;\n              var editor;\n\n              if (this._isMobile() && kendo.Pane) {\n                editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                  target: this,\n                  timezone: that.dataSource.reader.timezone,\n                  resources: that.resources,\n                  createButton: this._createButton.bind(this)\n                }));\n              } else {\n                editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                  target: this,\n                  createButton: this._createButton.bind(this),\n                  timezone: that.dataSource.reader.timezone,\n                  resources: that.resources\n                }));\n              }\n\n              editor.bind(\"cancel\", function (e) {\n                if (that.trigger(\"cancel\", {\n                  container: e.container,\n                  event: e.model\n                })) {\n                  e.preventDefault();\n                  return;\n                }\n\n                that._preventRefresh = false;\n                that.cancelEvent();\n\n                if (that._attemptRefresh) {\n                  that.refresh();\n                }\n\n                that.focus();\n              });\n              editor.bind(\"edit\", function (e) {\n                if (that.trigger(EDIT, {\n                  container: e.container,\n                  event: e.model\n                })) {\n                  e.preventDefault();\n                }\n              });\n              editor.bind(\"save\", function () {\n                that._preventRefresh = false;\n                that.saveEvent();\n              });\n              editor.bind(\"remove\", function (e) {\n                that._preventRefresh = false;\n                that.removeEvent(e.model);\n              });\n              editor.bind(\"resetSeries\", function (e) {\n                that._confirmation(function (cancel) {\n                  that._preventRefresh = false;\n\n                  if (!cancel) {\n                    that.dataSource._removeExceptions(e.model);\n\n                    that.saveEvent();\n                  }\n                }, e.model, true);\n              });\n            },\n            _createPopupEditor: function (model) {\n              var editor = this._editor;\n\n              if (!model.isNew() || model.isOccurrence()) {\n                if (model.isOccurrence()) {\n                  this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                }\n\n                this._convertDates(model);\n              }\n\n              this.editable = editor.editEvent(model);\n            },\n            removeEvent: function (uid) {\n              var that = this,\n                  model = typeof uid == \"string\" ? that.occurrenceByUid(uid) : uid;\n\n              if (!model) {\n                return;\n              }\n\n              if (model.isRecurring()) {\n                that._deleteRecurringDialog(model);\n              } else {\n                that._confirmation(function (cancel) {\n                  if (!cancel) {\n                    that._removeEvent(model);\n                  }\n                }, model);\n              }\n            },\n            occurrenceByUid: function (uid) {\n              var occurrence = this.dataSource.getByUid(uid);\n\n              if (!occurrence) {\n                occurrence = getOccurrenceByUid(this._data, uid);\n              }\n\n              return occurrence;\n            },\n            occurrencesInRange: function (start, end) {\n              return new kendo.data.Query(this._data).filter({\n                logic: \"or\",\n                filters: [{\n                  logic: \"and\",\n                  filters: [{\n                    field: \"start\",\n                    operator: \"gte\",\n                    value: start\n                  }, {\n                    field: \"end\",\n                    operator: \"gte\",\n                    value: start\n                  }, {\n                    field: \"start\",\n                    operator: \"lt\",\n                    value: end\n                  }]\n                }, {\n                  logic: \"and\",\n                  filters: [{\n                    field: \"start\",\n                    operator: \"lte\",\n                    value: start\n                  }, {\n                    field: \"end\",\n                    operator: \"gt\",\n                    value: start\n                  }]\n                }]\n              }).toArray();\n            },\n            _removeEvent: function (model) {\n              if (!this.trigger(REMOVE, {\n                event: model\n              })) {\n                if (this.dataSource.remove(model)) {\n                  this.dataSource.sync();\n                }\n              }\n            },\n            _deleteRecurringDialog: function (model) {\n              var that = this;\n              var currentModel = model;\n              var editable = that.options.editable;\n              var deleteOccurrence;\n              var deleteSeries;\n              var createException;\n              var deleteOccurrenceConfirmation;\n              var deleteSeriesConfirmation;\n              var createExceptionConfirmation;\n              var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n              deleteOccurrence = function () {\n                var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                var head = that.dataSource.get(occurrence.recurrenceId);\n\n                that._convertDates(head);\n\n                that._removeEvent(occurrence);\n              };\n\n              deleteSeries = function () {\n                if (currentModel.recurrenceId) {\n                  currentModel = that.dataSource.get(currentModel.recurrenceId);\n                }\n\n                that._removeEvent(currentModel);\n              };\n\n              createException = function () {\n                that.dataSource.remove(currentModel);\n                that.dataSource.sync();\n              };\n\n              if (editRecurringMode != \"dialog\" || that._isEditorOpened()) {\n                deleteOccurrenceConfirmation = function () {\n                  that._confirmation(function (cancel) {\n                    if (!cancel) {\n                      deleteOccurrence();\n                    }\n                  }, currentModel);\n                };\n\n                deleteSeriesConfirmation = function () {\n                  that._confirmation(function (cancel) {\n                    if (!cancel) {\n                      deleteSeries();\n                    }\n                  }, currentModel);\n                };\n\n                createExceptionConfirmation = function () {\n                  that._confirmation(function (cancel) {\n                    if (!cancel) {\n                      createException();\n                    }\n                  }, currentModel);\n                };\n              }\n\n              var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n              var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n              var exeptionCallback = createExceptionConfirmation || createException;\n\n              if (that._isEditorOpened()) {\n                if (model.isException()) {\n                  occurrenceCallback();\n                } else if (model.isNew()) {\n                  exeptionCallback();\n                } else {\n                  seriesCallback();\n                }\n              } else {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                  title: recurrenceMessages.deleteWindowTitle,\n                  text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                  occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                  seriesText: recurrenceMessages.deleteWindowSeries\n                });\n              }\n            },\n            _isEditorOpened: function () {\n              return !!this._editor.container;\n            },\n            _unbindView: function (view) {\n              var that = this;\n              that.angular(\"cleanup\", function () {\n                return {\n                  elements: that.items()\n                };\n              });\n              view.destroy();\n            },\n            _bindView: function (view) {\n              var that = this;\n\n              if (that.options.editable) {\n                if (that._viewRemoveHandler) {\n                  view.unbind(REMOVE, that._viewRemoveHandler);\n                }\n\n                that._viewRemoveHandler = function (e) {\n                  that.removeEvent(e.uid);\n                };\n\n                view.bind(REMOVE, that._viewRemoveHandler);\n\n                if (that._viewAddHandler) {\n                  view.unbind(ADD, that._viewAddHandler);\n                }\n\n                that._viewAddHandler = function (e) {\n                  that.addEvent(e.eventInfo);\n                };\n\n                view.bind(ADD, this._viewAddHandler);\n\n                if (that._viewEditHandler) {\n                  view.unbind(EDIT, that._viewEditHandler);\n                }\n\n                that._viewEditHandler = function (e) {\n                  that.editEvent(e.uid);\n                };\n\n                view.bind(EDIT, this._viewEditHandler);\n              }\n\n              if (that._viewNavigateHandler) {\n                view.unbind(\"navigate\", that._viewNavigateHandler);\n              }\n\n              that._viewNavigateHandler = function (e) {\n                if (e.action) {\n                  if (!that.trigger(\"navigate\", {\n                    view: e.view,\n                    isWorkDay: e.isWorkDay,\n                    action: e.action,\n                    date: e.date\n                  })) {\n                    that.date(e.date);\n                  }\n                } else if (e.view) {\n                  var switchWorkDay = (\"isWorkDay\" in e);\n                  var action = switchWorkDay ? \"changeWorkDay\" : \"changeView\";\n\n                  if (!that.trigger(\"navigate\", {\n                    view: e.view,\n                    isWorkDay: e.isWorkDay,\n                    action: action,\n                    date: e.date\n                  })) {\n                    if (switchWorkDay) {\n                      that._workDayMode = e.isWorkDay;\n                    }\n\n                    that._selectView(e.view);\n\n                    that.date(e.date);\n                  }\n                }\n              };\n\n              view.bind(\"navigate\", that._viewNavigateHandler);\n\n              if (that._viewActivateHandler) {\n                view.unbind(\"activate\", that._viewActivateHandler);\n              }\n\n              that._viewActivateHandler = function () {\n                var view = this;\n\n                if (that._selection) {\n                  view.constrainSelection(that._selection);\n\n                  if ($(document.activeElement).closest(\".k-scheduler-toolbar\").length === 0) {\n                    if (document.activeElement !== that.wrapper[0]) {\n                      that.element.focus();\n                    } else {\n                      that._select();\n                    }\n                  }\n\n                  that._adjustSelectedDate();\n                }\n              };\n\n              view.bind(\"activate\", that._viewActivateHandler);\n            },\n            _selectView: function (name) {\n              var that = this;\n\n              if (name && that.views[name]) {\n                if (that._selectedView) {\n                  that._unbindView(that._selectedView);\n                }\n\n                that._selectedView = that._renderView(name);\n                that._selectedViewName = name;\n\n                if (that._viewsCount > 1 && !that._isMobile()) {\n                  var viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                  var viewButtons = that.toolbar.find(\".k-scheduler-views > .k-button\");\n\n                  if (that.toolbar.find(\".k-views-dropdown\").length === 0) {\n                    that.toolbar.find(\".k-scheduler-views-wrapper\").prepend(VIEWS_DROPDOWN_TEMPLATE({\n                      views: that.views,\n                      view: name,\n                      ns: kendo.ns,\n                      label: that.options.messages.selectView\n                    }));\n                    viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                  }\n\n                  viewsDropdown.val(name);\n                  viewButtons.removeClass(\"k-selected\");\n                  viewButtons.filter(\".k-view-\" + name.replace(/\\./g, \"\\\\.\").toLowerCase()).addClass(\"k-selected\");\n                } else {\n                  var viewSelect = that.toolbar.find(\".k-scheduler-mobile-views\");\n                  viewSelect.find(\"[value=\" + name.replace(/\\./g, \"\\\\.\") + \"]\").prop(\"selected\", \"selected\");\n                }\n              }\n            },\n            view: function (name) {\n              var that = this;\n\n              if (name) {\n                that._selectView(name);\n\n                that.rebind();\n                return;\n              }\n\n              return that._selectedView;\n            },\n            viewName: function () {\n              return this.view().name;\n            },\n            _renderView: function (name) {\n              var view = this._initializeView(name);\n\n              this._bindView(view);\n\n              if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                view.content.css(\"-ms-touch-action\", \"pinch-zoom\");\n                view.content.css(\"touch-action\", \"pinch-zoom\");\n              }\n\n              this._model.set(\"formattedDate\", view.dateForTitle());\n\n              this._model.set(\"formattedShortDate\", view.shortDateForTitle());\n\n              this._model.set(\"formattedMobileDate\", view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n\n              this._model.set(\"formattedYear\", kendo.format(\"{0:yyyy}\", view.startDate()));\n\n              return view;\n            },\n            resize: function (force) {\n              var size = this.getSize();\n              var currentSize = this._size;\n              var view = this.view();\n\n              if (!view || !view.groups) {\n                return;\n              }\n\n              if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                this.refresh({\n                  action: \"resize\"\n                });\n                this._size = size;\n              }\n            },\n            _adjustSelectedDate: function () {\n              var date = this._model.selectedDate,\n                  selection = this._selection,\n                  start = selection.start;\n\n              if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n              }\n            },\n            _initializeView: function (name) {\n              var view = this.views[name];\n\n              if (view) {\n                var isSettings = isPlainObject(view),\n                    overrideOptions = {},\n                    type = view.type;\n\n                if (typeof type === STRING) {\n                  type = kendo.getter(view.type)(window);\n                }\n\n                if (isSettings && view.workDays && view.workDays.length) {\n                  overrideOptions.workDays = view.workDays;\n                }\n\n                if (type) {\n                  view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                    resources: this.resources,\n                    date: this.date(),\n                    startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                    endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                    showWorkHours: this._workDayMode\n                  }), overrideOptions));\n                } else {\n                  throw new Error(\"There is no such view\");\n                }\n              }\n\n              return view;\n            },\n            _views: function () {\n              var views = this.options.views;\n              var view;\n              var defaultView;\n              var selected;\n              var isSettings;\n              var name;\n              var type;\n              var idx;\n              var length;\n              this.views = {};\n              this._viewsCount = 0;\n\n              for (idx = 0, length = views.length; idx < length; idx++) {\n                var hasType = false;\n                view = views[idx];\n                isSettings = isPlainObject(view);\n\n                if (isSettings) {\n                  type = name = view.type ? view.type : view;\n\n                  if (typeof type !== STRING) {\n                    name = view.name || view.title;\n                    hasType = true;\n                  }\n                } else {\n                  type = name = view;\n                }\n\n                defaultView = defaultViews[name];\n\n                if (defaultView && !hasType) {\n                  view.type = defaultView.type;\n                  defaultView.title = this.options.messages.views[name];\n\n                  if (defaultView.type === \"day\") {\n                    defaultView.messages = {\n                      allDay: this.options.messages.allDay\n                    };\n                  } else if (defaultView.type === \"agenda\") {\n                    defaultView.messages = {\n                      event: this.options.messages.event,\n                      date: this.options.messages.date,\n                      time: this.options.messages.time\n                    };\n                  }\n                }\n\n                view = extend({\n                  title: name\n                }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                  this.views[name] = view;\n                  this._viewsCount++;\n\n                  if (!selected || view.selected) {\n                    selected = name;\n                  }\n                }\n              }\n\n              if (selected) {\n                this._selectedViewName = selected; // toolbar is not rendered yet\n              }\n            },\n            rebind: function () {\n              var that = this,\n                  resources = that.resources,\n                  resourceFetchArray = [];\n\n              if (that._preventRebind) {\n                that._preventRebind = false;\n                return;\n              }\n\n              if (that.options.autoBind === false && resources && resources.length > 0) {\n                resources.forEach(function (resource) {\n                  if (resource.dataSource.data().length === 0) {\n                    that._preventRebind = true;\n                    resourceFetchArray.push(resource.dataSource.fetch());\n                  }\n                });\n                $.when.apply(null, resourceFetchArray).then(function () {\n                  that.dataSource.fetch();\n                  that._preventRebind = false;\n                });\n              } else {\n                that.dataSource.fetch();\n              }\n            },\n            _dataSource: function () {\n              var that = this,\n                  options = that.options,\n                  dataSource = options.dataSource;\n              dataSource = isArray(dataSource) ? {\n                data: dataSource\n              } : dataSource;\n\n              if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                dataSource = extend(true, dataSource, {\n                  schema: {\n                    timezone: options.timezone\n                  }\n                });\n              } else if (dataSource instanceof SchedulerDataSource) {\n                options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : \"\";\n              }\n\n              if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n              } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n              }\n\n              that.dataSource = kendo.data.SchedulerDataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler);\n              that.options.dataSource = that.dataSource;\n            },\n            _error: function () {\n              this._progress(false);\n            },\n            _requestStart: function () {\n              this._progress(true);\n            },\n            _progress: function (toggle) {\n              var element = this.element.find(\".k-scheduler-content\");\n              kendo.ui.progress(element, toggle);\n            },\n            _resources: function () {\n              var that = this;\n              var resources = that.options.resources;\n              var resourcePromises = [];\n\n              for (var idx = 0; idx < resources.length; idx++) {\n                var resource = resources[idx];\n                var field = resource.field;\n                var name = resource.name || field;\n                var dataSource = resource.dataSource;\n\n                if (!field || !dataSource) {\n                  throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                }\n\n                that.resources.push({\n                  field: field,\n                  name: name,\n                  title: resource.title || field,\n                  dataTextField: resource.dataTextField || \"text\",\n                  dataValueField: resource.dataValueField || \"value\",\n                  dataColorField: resource.dataColorField || \"color\",\n                  dataParentValueField: resource.dataParentValueField || \"parentValue\",\n                  valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                  multiple: resource.multiple || false,\n                  dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                });\n              }\n\n              if (!that.options.autoBind) {\n                that._selectView(that._selectedViewName);\n              } else {\n                $.when.apply(null, resourcePromises).then(function () {\n                  that.view(that._selectedViewName);\n                });\n              }\n            },\n            _resourceDataSource: function (resourceDS, groupName, promises) {\n              var that = this;\n              var dataSource = isArray(resourceDS) ? {\n                data: resourceDS\n              } : resourceDS;\n              var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n\n              if (that.options.autoBind) {\n                promises.push(dataSourceInstance.fetch(function () {\n                  // 'this' is the DataSource instance not the Scheduler\n                  that._bindResourceEvents(this, groupName);\n                }));\n              } else {\n                that._bindResourceEvents(dataSourceInstance, groupName);\n              }\n\n              return dataSourceInstance;\n            },\n            _bindResourceEvents: function (resourceDS, groupName) {\n              var that = this;\n              var isGrouped = that.options.group && that.options.group.resources.length;\n              var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n\n              if (!that._resourceRefreshHandler && isResourceGrouped) {\n                that._resourceRefreshHandler = that._refreshResource.bind(that);\n                that._resourceErrorHandler = that._error.bind(that);\n              }\n\n              if (isResourceGrouped) {\n                resourceDS.bind(CHANGE, that._resourceRefreshHandler).bind(ERROR, that._resourceErrorHandler);\n              }\n            },\n            _refreshResource: function () {\n              var that = this;\n              var preventRefresh = that._editor && that._editor.editable || that._preventRefresh;\n\n              if (!preventRefresh) {\n                that.view(that._selectedViewName);\n              }\n            },\n            _initModel: function () {\n              var that = this;\n              that._model = kendo.observable({\n                selectedDate: new Date(this.options.date),\n                formattedDate: \"\",\n                formattedShortDate: \"\"\n              });\n\n              that._model.bind(CHANGE, function (e) {\n                if (e.field === \"selectedDate\") {\n                  that.view(that._selectedViewName);\n                }\n              });\n            },\n            _wrapper: function () {\n              var that = this;\n              var options = that.options;\n              var height = options.height;\n              var width = options.width;\n              that.wrapper = that.element.addClass(\"k-widget k-scheduler k-floatwrap\");\n\n              if (that._isMobile()) {\n                that.wrapper.addClass(\"k-scheduler-mobile\");\n              }\n\n              if (height) {\n                that.wrapper.height(height);\n              }\n\n              if (width) {\n                that.wrapper.width(width);\n              }\n            },\n            date: function (value) {\n              if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                this._model.set(\"selectedDate\", value);\n              }\n\n              return getDate(this._model.get(\"selectedDate\"));\n            },\n            _toolbar: function () {\n              var that = this;\n              var options = that.options;\n              var commands = [];\n\n              if (options.toolbar) {\n                commands = Array.isArray(options.toolbar) ? options.toolbar : [options.toolbar];\n              }\n\n              var template = this._isMobile() ? MOBILETOOLBARTEMPLATE : TOOLBARTEMPLATE;\n              var toolbar = $(template({\n                messages: options.messages,\n                pdf: $.grep(commands, function (item) {\n                  return item == \"pdf\" || item.name == \"pdf\";\n                }).length > 0,\n                search: $.grep(commands, function (item) {\n                  return item == \"search\" || item.name == \"search\";\n                }).length > 0,\n                ns: kendo.ns,\n                view: that._selectedViewName,\n                views: that.views,\n                viewsCount: that._viewsCount,\n                editable: that.options.editable\n              }));\n              that.wrapper.append(toolbar);\n              that.toolbar = toolbar;\n              kendo.bind(that.toolbar, that._model);\n              toolbar.on(CLICK + NS, \".k-pdf\", function (e) {\n                e.preventDefault();\n                that.saveAsPDF();\n              });\n              toolbar.on(\"input\" + NS, \".k-scheduler-search-input\", kendo.throttle(function (e) {\n                that.dataSource.filter({\n                  logic: \"or\",\n                  filters: [{\n                    field: \"title\",\n                    operator: \"contains\",\n                    value: e.target.value\n                  }, {\n                    field: \"description\",\n                    operator: \"contains\",\n                    value: e.target.value\n                  }]\n                });\n              }, 250));\n              toolbar.on(CLICK + NS, \".k-create-event\", function (e) {\n                e.preventDefault();\n                that.addEvent();\n              });\n              toolbar.on(CLICK + NS, \".k-nav-calendar\", function (e) {\n                e.preventDefault();\n\n                that._showCalendar(e.target);\n              });\n              toolbar.on(CLICK + NS, \".k-scheduler-navigation > .k-button\", function (e) {\n                var button = $(this);\n                var date = new Date(that.date());\n                var action = \"\";\n                var currentDate = new Date();\n                var timezone = that.options.timezone;\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                button.addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).trigger(\"focus\").attr(\"tabindex\", -1);\n\n                if ($(e.target).is(\"input\")) {\n                  return;\n                }\n\n                e.preventDefault();\n\n                if (button.hasClass(\"k-nav-today\")) {\n                  action = \"today\";\n\n                  if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                  } else {\n                    date = currentDate;\n                  }\n                } else if (button.hasClass(\"k-nav-next\")) {\n                  action = \"next\";\n                  date = that.view().nextDate();\n                } else if (button.hasClass(\"k-nav-prev\")) {\n                  action = \"previous\";\n                  date = that.view().previousDate();\n                }\n\n                if (!that.trigger(\"navigate\", {\n                  view: that._selectedViewName,\n                  action: action,\n                  date: date\n                })) {\n                  that.date(date);\n                }\n              });\n              toolbar.on(CLICK + NS, \".k-nav-current\", function (e) {\n                e.preventDefault();\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(this).addClass(FOCUSEDSTATE);\n\n                if (!that._isMobile()) {\n                  that._showCalendar();\n                }\n              });\n              toolbar.on(CLICK + NS, \".k-scheduler-views > .k-button, .k-scheduler-refresh\", function (e) {\n                e.preventDefault();\n                var name = $(this).attr(kendo.attr(\"name\"));\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(this).addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).trigger(\"focus\").attr(\"tabindex\", -1);\n\n                if (!that.trigger(\"navigate\", {\n                  view: name,\n                  action: \"changeView\",\n                  date: that.date()\n                })) {\n                  that.view(name);\n                }\n              });\n              toolbar.on(CHANGE + NS, \".k-views-dropdown, .k-scheduler-mobile-views\", function () {\n                var name = this.value;\n\n                if (!that.trigger(\"navigate\", {\n                  view: name,\n                  action: \"changeView\",\n                  date: that.date()\n                })) {\n                  that.view(name);\n                }\n              });\n            },\n            _showCalendar: function (targetElm) {\n              var that = this,\n                  target = targetElm || that.toolbar.find(\".k-nav-current\"),\n                  html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n\n              if (!that.popup) {\n                that.popup = new Popup(html, {\n                  anchor: target,\n                  activate: function () {\n                    if (that.popup && that.calendar) {\n                      that.popup._toggleResize(false);\n\n                      that.calendar.element.find(\"table\").trigger(\"focus\");\n\n                      that.popup._toggleResize(true);\n                    }\n                  },\n                  open: function () {\n                    if (!that.calendar) {\n                      that.calendar = new Calendar(this.element.find(\".k-scheduler-calendar\"), {\n                        change: function () {\n                          var date = this.value();\n\n                          if (!that.trigger(\"navigate\", {\n                            view: that._selectedViewName,\n                            action: \"changeDate\",\n                            date: date\n                          })) {\n                            that.date(date);\n                            that.popup.close();\n                          }\n\n                          if (!that._isMobile()) {\n                            that._selectedView.element.trigger(\"focus\");\n\n                            that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                          }\n                        },\n                        min: that.options.min,\n                        max: that.options.max\n                      });\n                    }\n\n                    that.calendar.element.on(\"keydown\" + NS, function (e) {\n                      if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                        that.popup.close();\n\n                        that._selectedView.element.trigger(\"focus\");\n\n                        that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                      }\n                    });\n                    that.calendar.setOptions({\n                      start: that._selectedViewName === \"year\" ? \"decade\" : \"month\",\n                      depth: that._selectedViewName === \"year\" ? \"decade\" : \"month\"\n                    });\n                    that.calendar.value(that.date());\n                  },\n                  copyAnchorStyles: false\n                });\n              }\n\n              that.popup.open();\n            },\n            refresh: function (e) {\n              var that = this;\n              var view = this.view();\n              var preventRefresh = e && e.action === \"itemchange\" && (this._editor.editable || this._preventRefresh) || this.dataSource.options.type === \"signalr\" && this._preventRefresh;\n\n              this._progress(false);\n\n              this.angular(\"cleanup\", function () {\n                return {\n                  elements: that.items()\n                };\n              });\n              e = e || {};\n\n              if (!view) {\n                return;\n              }\n\n              if (preventRefresh) {\n                // skip rebinding if editing is in progress\n                this._attemptRefresh = true && this.dataSource.options.type === \"signalr\";\n                return;\n              }\n\n              if (this.trigger(\"dataBinding\", {\n                action: e.action || \"rebind\",\n                index: e.index,\n                items: e.items\n              })) {\n                return;\n              }\n\n              if (!(e && e.action === \"resize\") && this._editor) {\n                this._editor.close();\n              }\n\n              this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n              view.refreshLayout();\n              view.render(this._data);\n              this.trigger(\"dataBound\");\n              this._attemptRefresh = false;\n            },\n            slotByPosition: function (x, y) {\n              var view = this.view();\n\n              if (!view._slotByPosition) {\n                return null;\n              }\n\n              var slot = view._slotByPosition(x, y);\n\n              if (!slot) {\n                return null;\n              }\n\n              return {\n                startDate: slot.startDate(),\n                endDate: slot.endDate(),\n                groupIndex: slot.groupIndex,\n                element: slot.element,\n                isDaySlot: slot.isDaySlot\n              };\n            },\n            slotByElement: function (element) {\n              var offset = $(element).offset();\n              return this.slotByPosition(offset.left, offset.top);\n            },\n            resourcesBySlot: function (slot) {\n              return this.view()._resourceBySlot(slot);\n            }\n          });\n          var defaultViews = {\n            day: {\n              type: \"kendo.ui.DayView\"\n            },\n            week: {\n              type: \"kendo.ui.WeekView\"\n            },\n            workWeek: {\n              type: \"kendo.ui.WorkWeekView\"\n            },\n            agenda: {\n              type: \"kendo.ui.AgendaView\"\n            },\n            month: {\n              type: \"kendo.ui.MonthView\"\n            },\n            timeline: {\n              type: \"kendo.ui.TimelineView\"\n            },\n            timelineWeek: {\n              type: \"kendo.ui.TimelineWeekView\"\n            },\n            timelineWorkWeek: {\n              type: \"kendo.ui.TimelineWorkWeekView\"\n            },\n            timelineMonth: {\n              type: \"kendo.ui.TimelineMonthView\"\n            },\n            year: {\n              type: \"kendo.ui.YearView\"\n            }\n          };\n          ui.plugin(Scheduler);\n\n          if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Scheduler.prototype);\n            var SCHEDULER_EXPORT = \"k-scheduler-pdf-export\";\n\n            Scheduler.fn._drawPDF = function (progress) {\n              var wrapper = this.wrapper;\n              var styles = wrapper[0].style.cssText;\n              wrapper.css({\n                width: wrapper.width(),\n                height: wrapper.height()\n              });\n              wrapper.addClass(SCHEDULER_EXPORT);\n              var scheduler = this;\n              var promise = new $.Deferred();\n              var table = wrapper.find(\".k-scheduler-content\").find(\"table\").css(\"table-layout\", \"auto\");\n              setTimeout(function () {\n                table.css(\"table-layout\", \"fixed\");\n                scheduler.resize(true);\n\n                scheduler._drawPDFShadow({}, {\n                  avoidLinks: scheduler.options.pdf.avoidLinks\n                }).done(function (group) {\n                  var args = {\n                    page: group,\n                    pageNumber: 1,\n                    progress: 1,\n                    totalPages: 1\n                  };\n                  progress.notify(args);\n                  promise.resolve(args.page);\n                }).fail(function (err) {\n                  promise.reject(err);\n                }).always(function () {\n                  wrapper[0].style.cssText = styles;\n                  wrapper.removeClass(SCHEDULER_EXPORT);\n                  scheduler.resize(true); //Required because slot.offsetLeft is incorrect after first resize\n\n                  scheduler.resize(true);\n                });\n              });\n              return promise;\n            };\n          }\n\n          var TimezoneEditor = Widget.extend({\n            init: function (element, options) {\n              var that = this,\n                  zones = kendo.timezone.windows_zones;\n\n              if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n              }\n\n              Widget.fn.init.call(that, element, options);\n              that.wrapper = that.element;\n              that._zonesQuery = new kendo.data.Query(zones);\n              that._zoneTitleId = kendo.guid();\n\n              that._zoneTitlePicker();\n\n              that._zonePicker();\n\n              that._zoneTitle.bind(\"cascade\", function () {\n                if (!this.value()) {\n                  that._zone.wrapper.hide();\n                }\n              });\n\n              that._zone.bind(\"cascade\", function () {\n                that._value = this.value();\n                that.trigger(CHANGE);\n              });\n\n              that.value(that.options.value);\n            },\n            options: {\n              name: \"TimezoneEditor\",\n              value: \"\",\n              optionLabel: \"No timezone\"\n            },\n            events: [CHANGE],\n            _zoneTitlePicker: function () {\n              var that = this,\n                  zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n              that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                dataSource: kendo.timezone.zones_titles,\n                dataValueField: \"other_zone\",\n                dataTextField: \"name\",\n                optionLabel: that.options.optionLabel\n              });\n            },\n            _zonePicker: function () {\n              var that = this,\n                  zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n              that._zone = new kendo.ui.DropDownList(zone, {\n                dataValueField: \"zone\",\n                dataTextField: \"territory\",\n                dataSource: that._zonesQuery.data,\n                cascadeFrom: that._zoneTitleId,\n                dataBound: function () {\n                  that._value = this.value();\n                  this.wrapper.toggle(this.dataSource.view().length > 1);\n                }\n              });\n\n              that._zone.wrapper.hide();\n            },\n            destroy: function () {\n              Widget.fn.destroy.call(this);\n              kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n              var that = this,\n                  zone;\n\n              if (value === undefined) {\n                return that._value;\n              }\n\n              zone = that._zonesQuery.filter({\n                field: \"zone\",\n                operator: \"eq\",\n                value: value\n              }).data[0];\n\n              if (zone) {\n                that._zoneTitle.value(zone.other_zone);\n\n                that._zone.value(zone.zone);\n              } else {\n                that._zoneTitle.select(0);\n              }\n            }\n          });\n          ui.plugin(TimezoneEditor);\n          var ZONETITLEOPTIONTEMPLATE = kendo.template('<option value=\"#=other_zone#\">#=name#</option>');\n          var ZONEOPTIONTEMPLATE = kendo.template('<option value=\"#=zone#\">#=territory#</option>');\n          var MobileTimezoneEditor = Widget.extend({\n            init: function (element, options) {\n              var that = this,\n                  zones = kendo.timezone.windows_zones;\n\n              if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n              }\n\n              Widget.fn.init.call(that, element, options);\n              that.wrapper = that.element;\n              that._zonesQuery = new kendo.data.Query(zones);\n\n              that._zoneTitlePicker();\n\n              that._zonePicker();\n\n              that.value(that.options.value);\n            },\n            options: {\n              name: \"MobileTimezoneEditor\",\n              optionLabel: \"No timezone\",\n              value: \"\"\n            },\n            events: [CHANGE],\n            _bindZones: function (value) {\n              var data = value ? this._filter(value) : [];\n\n              this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n            },\n            _filter: function (value) {\n              return this._zonesQuery.filter({\n                field: \"other_zone\",\n                operator: \"eq\",\n                value: value\n              }).data;\n            },\n            _options: function (data, template, optionLabel) {\n              var idx = 0;\n              var html = \"\";\n              var length = data.length;\n\n              if (optionLabel) {\n                html += template({\n                  other_zone: \"\",\n                  name: optionLabel\n                });\n              }\n\n              for (; idx < length; idx++) {\n                html += template(data[idx]);\n              }\n\n              return html;\n            },\n            _zoneTitlePicker: function () {\n              var that = this;\n\n              var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n\n              that._zoneTitle = $('<select>' + options + '</select>').appendTo(that.wrapper).on(\"change\", function () {\n                var value = this.value;\n                var zone = that._zonePickerLabel;\n                var zoneSelect = zone.find(\"select\");\n\n                that._bindZones(value);\n\n                if (value && zoneSelect.children().length > 1) {\n                  zone.show();\n                } else {\n                  zone.hide();\n                }\n\n                that._value = that._zone[0].value;\n                that.trigger(CHANGE);\n              });\n            },\n            _zonePicker: function () {\n              var that = this;\n              that._zonePickerLabel = $(\"<li class='k-item k-listgroup-item k-zonepicker' style='display:none'>\" + \"<label class='k-label k-listgroup-form-row'>\" + \"<span class='k-item-title k-listgroup-form-field-label'></span>\" + \"<div class='k-listgroup-form-field-wrapper'></div>\" + \"</label>\" + \"</li>\");\n              that._zone = $('<select></select>').appendTo(that._zonePickerLabel.find(\"div\")).on(\"change\", function () {\n                that._value = this.value;\n                that.trigger(CHANGE);\n              });\n              this.wrapper.closest(\".k-item\").after(that._zonePickerLabel);\n\n              that._bindZones(that._zoneTitle.val());\n\n              that._value = that._zone[0].value;\n            },\n            destroy: function () {\n              Widget.fn.destroy.call(this);\n              kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n              var that = this;\n              var zonePicker = that._zone;\n              var other_zone = \"\";\n              var zone_value = \"\";\n              var zone;\n\n              if (value === undefined) {\n                return that._value;\n              }\n\n              zone = that._zonesQuery.filter({\n                field: \"zone\",\n                operator: \"eq\",\n                value: value\n              }).data[0];\n\n              if (zone) {\n                zone_value = zone.zone;\n                other_zone = zone.other_zone;\n              }\n\n              that._zoneTitle.val(other_zone);\n\n              that._bindZones(other_zone);\n\n              zonePicker.val(zone_value);\n              zone_value = zonePicker[0].value;\n\n              if (zone_value && zonePicker.children.length > 1) {\n                that._zonePickerLabel.show();\n              } else {\n                that._zonePickerLabel.hide();\n              }\n\n              that._value = zone_value;\n            }\n          });\n          ui.plugin(MobileTimezoneEditor);\n        })(window.kendo.jQuery);\n\n        return window.kendo;\n      }, __webpack_require__.amdD);\n      /***/\n\n    },\n\n    /***/\n    94421:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.datetimepicker\");\n      /***/\n    },\n\n    /***/\n    52220:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.dialog\");\n      /***/\n    },\n\n    /***/\n    54148:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.dropdownlist\");\n      /***/\n    },\n\n    /***/\n    63192:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.editable\");\n      /***/\n    },\n\n    /***/\n    14639:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.multiselect\");\n      /***/\n    },\n\n    /***/\n    1291:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.pane\");\n      /***/\n    },\n\n    /***/\n    20648:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.pdf\");\n      /***/\n    },\n\n    /***/\n    34815:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.agendaview\");\n      /***/\n    },\n\n    /***/\n    75207:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.dayview\");\n      /***/\n    },\n\n    /***/\n    18637:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.monthview\");\n      /***/\n    },\n\n    /***/\n    88615:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.recurrence\");\n      /***/\n    },\n\n    /***/\n    21474:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.timelineview\");\n      /***/\n    },\n\n    /***/\n    81477:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.view\");\n      /***/\n    },\n\n    /***/\n    69341:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.scheduler.yearview\");\n      /***/\n    },\n\n    /***/\n    63401:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.switch\");\n      /***/\n    },\n\n    /***/\n    66098:\n    /***/\n    function (module) {\n      \"use strict\";\n\n      module.exports = require(\"./kendo.window\");\n      /***/\n    }\n    /******/\n\n  };\n  /************************************************************************/\n\n  /******/\n  // The module cache\n\n  /******/\n\n  var __webpack_module_cache__ = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n    // Check if module is in cache\n\n    /******/\n    var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n\n    if (cachedModule !== undefined) {\n      /******/\n      return cachedModule.exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/\n      // no module.id needed\n\n      /******/\n      // no module.loaded needed\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /* webpack/runtime/amd define */\n\n  /******/\n\n\n  !function () {\n    /******/\n    __webpack_require__.amdD = function () {\n      /******/\n      throw new Error('define cannot be used indirect');\n      /******/\n    };\n    /******/\n\n  }();\n  /******/\n\n  /************************************************************************/\n\n  /******/\n\n  /******/\n  // startup\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n  // This entry module used 'module' so it can't be inlined\n\n  /******/\n\n  var __webpack_exports__ = __webpack_require__(10048);\n  /******/\n\n\n  module.exports = __webpack_exports__;\n  /******/\n\n  /******/\n})();","map":{"version":3,"names":["__webpack_modules__","module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","f","define","apply","undefined","__meta__","id","name","category","description","depends","features","$","kendo","window","date","MS_PER_DAY","getDate","getMilliseconds","recurrence","keys","extend","F10","ui","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","data","isPlainObject","toString","Object","prototype","isArray","Array","NS","CLICK","MOUSEDOWN","TOUCHSTART","support","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","CHANGE","PROGRESS","ERROR","CANCEL","REMOVE","RESET","SAVE","ADD","EDIT","DISABLED","OPTION","FOCUSEDSTATE","VIEWSSELECTOR","INVERSECOLORCLASS","valueStartEndBoundRegex","TODAY","Date","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","DELETECONFIRM","DELETERECURRING","EDITRECURRING","DELETERECURRINGCONFIRM","RESETSERIESCONFIRM","DELETESERIESCONFIRM","COMMANDBUTTONTMPL","VIEWS_DROPDOWN_TEMPLATE","template","TOOLBARTEMPLATE","MOBILETOOLBARTEMPLATE","MOBILEDATERANGEEDITOR","container","options","attr","field","title","isAllDay","model","dateTimeValidate","dateValidate","appendTimezoneAttr","appendValidDateValidator","appendDateCompareValidator","appendTo","hide","DATERANGEEDITOR","RECURRENCEEDITOR","kendoRecurrenceEditor","start","timezone","messages","MOBILERECURRENCEEDITOR","kendoMobileRecurrenceEditor","pane","value","MOBILEISALLDAYEDITOR","ISALLDAYEDITOR","MOBILETIMEZONEPOPUP","text","timezoneButtonText","noTimezone","closest","on","click","TIMEZONEPOPUP","timezoneEditorButton","MOBILETIMEZONEEDITOR","kendoMobileTimezoneEditor","optionLabel","TIMEZONEEDITOR","visible","toggle","kendoTimezoneEditor","message","startTimezone","endTimezone","attrs","validationRules","fields","validation","validDateRule","validDateValidator","dateCompareRule","dateCompare","wrapDataAccess","originalFunction","convertData","wrapDataSerialization","call","ObservableArray","method","removeUid","event","idx","length","startOffset","endOffset","getTimezoneOffset","end","convert","uid","getTime","getOccurrenceByUid","SchedulerDataReader","Class","init","schema","reader","bind","serialize","errors","parse","total","groups","aggregates","applyZone","fromZone","toZone","remove","input","filter","picker","widgetInstance","parseDate","val","format","dateCompareValidator","startInput","find","endInput","startPicker","endPicker","editable","untilDateCompareValidator","untilPicker","until","SchedulerEvent","Model","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","duration","offset","MS_PER_MINUTE","expand","zone","update","eventInfo","set","_startTime","_endTime","isMultiDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","toOccurrence","recurrenceException","obj","shouldSerialize","key","milliseconds","setTime","type","defaultValue","required","validDate","untilDateCompare","SchedulerDataSource","modelBase","view","logic","filters","operator","Query","expandAll","toArray","cancelChanges","_removeExceptionDate","insert","index","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","item","shift","head","get","replaceRegExp","RegExp","toExceptionString","replace","test","newException","events","concat","create","dataSource","Error","defaultCommands","className","canceledit","destroy","imageClass","iconClass","trimOptions","overrideOptions","prefix","edit","add","navigate","descriptionEditor","createValidationAttributes","wrap","modelField","specialRules","datatype","inArray","ruleName","rule","isFunction","filterResourceEditorData","editor","parentValue","parentValueField","valueField","editorValue","isMs","valueArray","JSON","stringify","forEach","currentValue","indexOf","splice","trigger","bindParentValueChangeHandler","currentEditor","resource","parent","parentElement","ns","parentWidget","getKendoDropDownList","ev","sender","dataParentValueField","dataValueField","target","filterMobileResourceEditorData","parentSelectedValue","itemParentValue","getter","valid","removeAttribute","setAttribute","dropDownResourceEditor","setTimeout","kendoDropDownList","dataTextField","valuePrimitive","dataColorField","select","e","dataItem","disabled","preventDefault","dataBound","list","each","i","el","element","addClass","dropDownResourceEditorMobile","multiSelectResourceEditor","kendoMultiSelect","itemTemplate","tagTemplate","multiSelectResourceEditorMobile","moveEventRange","distance","editors","mobile","dateRange","timezonePopUp","multipleResources","resources","desktop","Editor","Observable","createButton","toggleDateValidationHandler","_toggleDateValidation","bindAttribute","isDateTimeInput","shouldValidate","is","_initTimezoneEditor","allDayEvent","checkHierarchical","windows_zones","push","repeat","recurrenceEditor","resourceIndex","resourceView","hasParent","some","parentResource","multiple","_buildDesktopEditTemplate","editableFields","settings","Template","templateSettings","paramName","html","renderCheckBox","label","separateTimezones","tmpl","expr","_createEndTimezoneButton","_buildMobileEditTemplate","_buildEditTemplate","isMobile","unescape","_revertTimezones","_startTimezone","_endTimezone","MobileEditor","arguments","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","css","height","animations","left","right","close","unbind","timezoneView","content","kSwitch","endTimezoneRow","last","startTimezoneChange","enable","cancel","timezoneTitle","save","append","contentElement","show","stopPropagation","hasClass","editView","_editPane","checked","showDialog","actions","buttons","map","button","action","primary","document","body","kendoDialog","modal","preventScroll","closable","editEvent","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","resetSeriesBtn","deleteBtn","kendoEditable","clearContainer","validateOnBlur","_views","roleSelector","not","views","eq","purge","PopupEditor","deleteText","fieldName","kendoWindow","resizable","draggable","userTriggered","center","open","cycleForm","popup","_timezonePopup","buttonIndex","wrapper","currentTarget","getKendoWindow","activator","checkbox","saveButton","cancelButton","timezonePopup","prop","wnd","timezoneEditorTitle","focus","Scheduler","_initModel","_wrapper","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_tabindex","_navigation","_selectable","_touchHandlers","_ariaId","guid","_createEditor","_unbindResize","off","dataItems","_data","eventsUids","dict","eventsUidsLength","eventsCount","sortedData","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","group","prevIndex","dataIndex","fieldValue","currentGroupIndex","selection","_selection","selectedGroups","selectedEvents","slots","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","groupsByResource","groupedResources","_selectEvents","_select","rangeStart","_startDate","rangeEnd","addDays","_endDate","ranges","timeSlotCollectionCount","toLocalDate","isDaySlot","eventsLength","isGrouped","ctrlKey","_ctrlKey","currentGroup","daySlotCollectionCount","collIdx","getTimeSlotCollection","dayCollIdx","getDaySlotCollection","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","delta","amplitude","_amplitude","_dragging","selectable","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","_mouseDown","_initialFocus","_shiftKey","_keydown","shiftKey","mouseMoveHandler","_mouseMove","which","isRight","_activeElement","focusElement","toolbar","removeClass","_selectFirstSlot","firstAllDay","first","firstContent","firstSlot","_firstEvent","firstEventInAllDay","firstEventInContent","firstEvent","contentEvent","occurrenceByUid","_preventCalendarFocus","calendar","_focusToolbar","current","oldSelection","oldEventsLength","removeAttr","currentUid","uids","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","slot","selectionByElement","startDate","endDate","backward","_viewByIndex","_keydownToolbar","keyCode","focusableToolBarSelector","focusableItems","shouldNavigate","isRtl","focusedItem","itemToFocus","TAB","altKey","DOWN","_showCalendar","RIGHT","LEFT","_focusedView","ENTER","SPACEBAR","focusedViewName","_selectedViewName","activeElement","_keydownView","isModifier","arrowKeys","UP","previous","cell","DELETE","BACKSPACE","removeEvent","moveToEvent","HOME","END","_scrollTo","_keydownShortcut","currentDate","toggleFullDay","addEvent","timezoneOffset","_keydownYearView","_adjustSelectedDate","_keydownAgendaView","move","_keydownChangeView","viewIndex","viewByIndex","_keydownChangeDate","direction","nextDate","previousDate","shortcutKeys","toolbarIsFocused","ESC","_updateSelection","_updateEventForSelection","_timeSlotInterval","indexOfEvent","autoBind","snap","allDaySlot","min","max","workWeekStart","workWeekEnd","workDays","showWorkHours","startTime","endTime","currentTimeMarker","updateInterval","useLocalTimezone","footer","today","pdf","deleteWindowTitle","next","refresh","selectView","ariaSlotLabel","ariaEventLabel","at","to","allDay","search","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","year","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","width","orientation","_refreshHandler","_progressHandler","_errorHandler","_resourceRefreshHandler","resourceDS","_resourceProgressHandler","_resourceErrorHandler","_editor","_moveDraggable","_resizeDraggable","_model","setDataSource","fetch","_selectedView","siblings","startSlot","endSlot","startResources","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","movable","android","Draggable","ignore","holdToDrag","autoScroll","isTouch","_eventOptionsForMove","inverseColor","evtClone","evtCloneElement","_slotByPosition","x","startLocation","y","location","range","slotIndex","targetSlotElement","children","top","_updateMoveHint","_removeMoveHint","endResources","prevented","_isMultiDrag","evt","updatedEventOptions","eventOptions","_updateEvent","sync","cancelHold","handle","directions","dragstart","dragHandle","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","getHours","getMinutes","getSeconds","recurrenceHead","getByUid","updateSeries","updateOccurrence","eventUid","exception","_showRecurringDialog","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","command","commandName","_set","_attemptRefresh","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","currentModel","deleteOccurrence","deleteSeries","createException","deleteOccurrenceConfirmation","createExceptionConfirmation","seriesCallback","occurrenceCallback","exeptionCallback","deleteRecurring","_unbindView","angular","elements","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","isWorkDay","switchWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","_renderView","_viewsCount","viewsDropdown","viewButtons","prepend","toLowerCase","viewSelect","rebind","viewName","_initializeView","mouseAndTouchPresent","dateForTitle","shortDateForTitle","mobileDateForTitle","force","size","getSize","currentSize","_size","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","defaultView","selected","hasType","defaultViews","time","resourceFetchArray","_preventRebind","when","then","_requestStart","_error","_progress","progress","resourcePromises","_resourceDataSource","groupName","promises","dataSourceInstance","_bindResourceEvents","isResourceGrouped","_refreshResource","preventRefresh","observable","formattedDate","formattedShortDate","commands","grep","viewsCount","saveAsPDF","throttle","targetElm","anchor","activate","_toggleResize","change","setOptions","depth","copyAnchorStyles","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","resourcesBySlot","plugin","PDFMixin","SCHEDULER_EXPORT","_drawPDF","styles","style","cssText","scheduler","promise","Deferred","table","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","TimezoneEditor","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","other_zone","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","MobileTimezoneEditor","_bindZones","_filter","_options","_zonePickerLabel","zoneSelect","after","zonePicker","zone_value","jQuery","amdD","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__"],"sources":["C:/Users/abodean/restapi-nodejs/client/app-router/node_modules/@progress/kendo-ui/js/kendo.scheduler.js"],"sourcesContent":["/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 10048:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(f, define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(54148), __webpack_require__(63192), __webpack_require__(14639), __webpack_require__(66098), __webpack_require__(94421), __webpack_require__(88615), __webpack_require__(81477), __webpack_require__(75207), __webpack_require__(34815), __webpack_require__(18637), __webpack_require__(21474), __webpack_require__(69341), __webpack_require__(52220), __webpack_require__(1291), __webpack_require__(20648), __webpack_require__(63401) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (f),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(function() {\n\nvar __meta__ = {\n    id: \"scheduler\",\n    name: \"Scheduler\",\n    category: \"web\",\n    description: \"The Scheduler is an event calendar.\",\n    depends: [ \"dropdownlist\", \"editable\", \"multiselect\", \"window\", \"datepicker\", \"datetimepicker\", \"scheduler.recurrence\", \"scheduler.view\" ],\n    features: [ {\n        id: \"scheduler-dayview\",\n        name: \"Scheduler Day View\",\n        description: \"Scheduler Day View\",\n        depends: [ \"scheduler.dayview\" ]\n    }, {\n        id: \"scheduler-agendaview\",\n        name: \"Scheduler Agenda View\",\n        description: \"Scheduler Agenda View\",\n        depends: [ \"scheduler.agendaview\" ]\n    }, {\n        id: \"scheduler-monthview\",\n        name: \"Scheduler Month View\",\n        description: \"Scheduler Month View\",\n        depends: [ \"scheduler.monthview\" ]\n    }, {\n        id: \"scheduler-timelineview\",\n        name: \"Scheduler Timeline View\",\n        description: \"Scheduler Timeline View\",\n        depends: [ \"scheduler.timelineview\" ]\n    }, {\n        id: \"scheduler-yearview\",\n        name: \"Scheduler Year View\",\n        description: \"Scheduler Year View\",\n        depends: [ \"scheduler.yearview\" ]\n    }, {\n        id: \"scheduler-mobile\",\n        name: \"Scheduler adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"scheduler-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export the scheduler events as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    }, {\n        id: \"scheduler-timezones\",\n        name: \"Timezones\",\n        description: \"Allow selecting timezones different than Etc/UTC\",\n        depends: [ \"timezones\" ]\n    }]\n};\n\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        date = kendo.date,\n        MS_PER_DAY = date.MS_PER_DAY,\n        getDate = date.getDate,\n        getMilliseconds = kendo.date.getMilliseconds,\n        recurrence = kendo.recurrence,\n        keys = $.extend({ F10: 121 }, kendo.keys),\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DataBoundWidget = ui.DataBoundWidget,\n        STRING = \"string\",\n        Popup = ui.Popup,\n        Calendar = ui.Calendar,\n        DataSource = kendo.data.DataSource,\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        toString = Object.prototype.toString,\n        isArray = Array.isArray,\n        NS = \".kendoScheduler\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        TOUCHSTART = kendo.support.pointers ? \"pointerdown\" : \"touchstart\",\n        TOUCHMOVE = kendo.support.pointers ? \"pointermove\" : \"touchmove\",\n        TOUCHEND = kendo.support.pointers ? \"pointerup\" : \"touchend\",\n        MOUSEMOVE = kendo.support.mousemove,\n        CHANGE = \"change\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        CANCEL = \"cancel\",\n        REMOVE = \"remove\",\n        RESET = \"resetSeries\",\n        SAVE = \"save\",\n        ADD = \"add\",\n        EDIT = \"edit\",\n        DISABLED = \"disabled\",\n        OPTION = \"option\",\n        FOCUSEDSTATE = \"k-focus\",\n        VIEWSSELECTOR = \".k-scheduler-views\",\n        INVERSECOLORCLASS = \"k-event-inverse\",\n        valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/,\n        TODAY = getDate(new Date()),\n        EXCEPTION_SEPARATOR = \",\",\n        OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g,\n        RECURRENCE_EXCEPTION = \"recurrenceException\",\n        DELETECONFIRM = \"Are you sure you want to delete this event?\",\n        DELETERECURRING = \"Do you want to delete only this event occurrence or the whole series?\",\n        EDITRECURRING = \"Do you want to edit only this event occurrence or the whole series?\",\n        DELETERECURRINGCONFIRM = \"Are you sure you want to delete this event occurrence?\",\n        RESETSERIESCONFIRM = \"Are you sure you want to reset the whole series?\",\n        DELETESERIESCONFIRM = \"Are you sure you want to delete the whole series?\",\n        COMMANDBUTTONTMPL = '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid #=className#\" #=attr#><span class=\"k-button-text\">#=text#</span></button>',\n        VIEWS_DROPDOWN_TEMPLATE = kendo.template('' +\n            '<select aria-label=\"#= label #\" class=\"k-picker k-dropdown-list k-dropdown k-views-dropdown\" tabindex=\"-1\">' +\n                '#for (var view in views) {#' +\n                    '<option value=\"#= view #\">${views[view].title}</option>' +\n                '#}#' +\n            '</select>'\n        ),\n        TOOLBARTEMPLATE = kendo.template('' +\n            '<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' +\n                '# if (pdf) { #' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span><span class=\"k-button-text\">${messages.pdf}</span></button>' +\n                '# } #' +\n                '<span class=\"k-scheduler-navigation k-button-group\">' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-nav-today\" title=\"${messages.today}\"><span class=\"k-button-text\">${messages.today}</span></button>' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\" title=\"${messages.previous}\" aria-label=\"${messages.previous}\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></button>' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\" title=\"${messages.next}\" aria-label=\"${messages.next}\"><span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span></button>' +\n                '</span>' +\n                '<a tabindex=\"-1\" role=\"button\" href=\"\\\\#\" class=\"k-nav-current\" aria-live=\"polite\">' +\n                    '<span class=\"k-icon k-i-calendar\"></span>' +\n                    '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' +\n                    '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' +\n                '</a>' +\n                '<span class=\"k-spacer k-toolbar-spacer\"></span>' +\n                '# if (search) { #' +\n                    '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' +\n                        '<input tabindex=\"-1\" autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' +\n                        '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' +\n                    '</span>' +\n                '# } #' +\n                '# if (viewsCount === 1) { #' +\n                    '<a role=\"button\" tabindex=\"-1\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\" aria-label=\"${messages.refresh}\">' +\n                        '<span class=\"k-button-icon k-icon k-i-reload\"></span>' +\n                    '</a>' +\n                '# } else { #' +\n                    '<span class=\"k-scheduler-views-wrapper\">' +\n                        '<span class=\"k-scheduler-views k-button-group\">' +\n                            '# for (var view in views) { #' +\n                                '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><span class=\"k-button-text\">${views[view].title}</span></button>' +\n                            '# } #' +\n                        '</span>' +\n                    '</span>' +\n                '# } #' +\n            '</div>'),\n        MOBILETOOLBARTEMPLATE = kendo.template('<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' +\n            '<span class=\"k-scheduler-tools k-button-group\">' +\n                '# if (pdf) { #' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span></button>' +\n                '# } #' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-calendar\"><span class=\"k-button-icon k-icon k-i-calendar\"></span></button>' +\n                \"# if (editable) { #\" +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-create-event\"><span class=\"k-button-icon k-icon k-i-plus\"></span></button>' +\n                \"# } #\" +\n            '</span>' +\n            '<span class=\"k-spacer k-toolbar-spacer\"></span>' +\n            '# if (search) { #' +\n                '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' +\n                    '<input tabindex=\"-1\" autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-scheduler-search-input k-input-inner\" />' +\n                    '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' +\n                '</span>' +\n            '# } #' +\n            '#if(viewsCount === 1){#' +\n                '<a role=\"button\" tabindex=\"-1\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\">' +\n                    '<span class=\"k-button-icon k-icon k-i-reload\"></span>' +\n                '</a>' +\n            '#} else {#' +\n                '<select tabindex=\"-1\" class=\"k-picker k-dropdown-list k-dropdown k-scheduler-mobile-views\">' +\n                    '#for(var view in views){#' +\n                        '<option class=\"k-view-#= view.toLowerCase() #\" value=\"#=view#\">${views[view].title}</option>' +\n                    '#}#' +\n                '</select>' +\n            '#}#' +\n            '</div>' +\n            '<div class=\"k-scheduler-toolbar k-toolbar\">' +\n                '<span class=\"k-scheduler-navigation\">' +\n                   '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-left\"></span></button>' +\n                   '<span class=\"k-nav-current\">' +\n                        '<span class=\"k-m-date-format\" data-#=ns#bind=\"text: formattedMobileDate\"></span>' +\n                        '<span class=\"k-y-date-format\" data-#=ns#bind=\"text: formattedYear\"></span>' +\n                    '</span>' +\n                   '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-right\"></span></button>' +\n                '</span>' +\n            '</div>'),\n        MOBILEDATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title };\n            var isAllDay = options.model.isAllDay;\n            var dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"'\";\n            var dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"'\";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"datetime-local\" required ' + kendo.attr(\"type\") + '=\"datetime-local\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>')\n                .attr(attr)\n                .appendTo(container);\n\n            $('<input type=\"date\" required ' + kendo.attr(\"type\") + '=\"date\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n                .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        DATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title },\n                isAllDay = options.model.isAllDay,\n                dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"' \",\n                dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"' \";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datetimepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',invisible:isAllDay\" ' +\n                dateTimeValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"bind\") + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n\n            if (options.field === \"end\") {\n                $('<span ' + kendo.attr(\"bind\") + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n            }\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        RECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n        },\n        MOBILERECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n        },\n        MOBILEISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').appendTo(container);\n        },\n        ISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"checkbox\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" data-label=\"' + options.title + '\" />')\n                .attr({\n                    id: options.field,\n                    name: options.field,\n                    title: options.title ? options.title : options.field\n                })\n                .appendTo(container);\n        },\n        MOBILETIMEZONEPOPUP = function(container, options) {\n            var text = timezoneButtonText(options.model, options.messages.noTimezone);\n            $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n            $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>').appendTo(container);\n            container.closest(\"li.k-item label\").on(CLICK, options.click);\n        },\n        TIMEZONEPOPUP = function(container, options) {\n            $('<a href=\"#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on(CLICK, options.click).appendTo(container);\n        },\n        MOBILETIMEZONEEDITOR = function(container, options) {\n            $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileTimezoneEditor({\n                    optionLabel: options.noTimezone\n                });\n        },\n        TIMEZONEEDITOR = function(container, options) {\n            var visible = options.visible || options.visible === undefined;\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({ name: options.field })\n                .toggle(visible)\n                .appendTo(container)\n                .kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n        };\n\n    function timezoneButtonText(model, message) {\n        message = message || \"\";\n\n        if (model.startTimezone) {\n            message = model.startTimezone;\n\n            if (model.endTimezone) {\n                message += \" | \" + model.endTimezone;\n            }\n        }\n\n        return message;\n    }\n\n    function appendTimezoneAttr(attrs, options) {\n        var timezone = options.timezone;\n\n        if (timezone) {\n            attrs[kendo.attr(\"timezone\")] = timezone;\n        }\n    }\n\n    function appendValidDateValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var validDateRule = validationRules.validDateValidator;\n            if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                attrs[kendo.attr(\"validDate-msg\")] = validDateRule.message;\n            }\n        }\n    }\n\n    function appendDateCompareValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var dateCompareRule = validationRules.dateCompare;\n            if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                attrs[kendo.attr(\"dateCompare-msg\")] = dateCompareRule.message;\n            }\n        }\n    }\n\n    function wrapDataAccess(originalFunction, timezone) {\n        return function(data) {\n            data = originalFunction(data);\n\n            convertData(data, \"apply\", timezone);\n\n            return data || [];\n        };\n    }\n\n    function wrapDataSerialization(originalFunction, timezone) {\n        return function(data) {\n\n            if (data) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof kendo.data.ObservableArray)) {\n                    data = [data];\n                }\n            }\n\n            convertData(data, \"remove\", timezone, true);\n\n            data = originalFunction(data);\n\n            return data || [];\n        };\n    }\n\n    function convertData(data, method, timezone, removeUid) {\n        var event,\n            idx,\n            length,\n            startOffset,\n            endOffset;\n\n        data = data || [];\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            event = data[idx];\n            startOffset = event.start ? event.start.getTimezoneOffset() : null;\n            endOffset = event.start ? event.end.getTimezoneOffset() : null;\n\n            if (removeUid) {\n                if (event.startTimezone || event.endTimezone) {\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    } else {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            } else {\n                if (event.startTimezone || event.endTimezone) {\n                    event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                    event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            }\n\n            if (removeUid) {\n                delete event.uid;\n            }\n\n            if (method === \"remove\" && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n            }\n            if (method === \"remove\" && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n            }\n        }\n        return data;\n    }\n\n    function getOccurrenceByUid(data, uid) {\n        var length = data.length,\n            idx = 0,\n            event;\n\n        for (; idx < length; idx++) {\n            event = data[idx];\n\n            if (event.uid === uid) {\n                return event;\n            }\n        }\n    }\n\n    var SchedulerDataReader = kendo.Class.extend({\n        init: function(schema, reader) {\n            var timezone = schema.timezone;\n\n            this.reader = reader;\n\n            if (reader.model) {\n                this.model = reader.model;\n            }\n\n            this.timezone = timezone;\n            this.data = wrapDataAccess(this.data.bind(this), timezone);\n            this.serialize = wrapDataSerialization(this.serialize.bind(this), timezone);\n        },\n        errors: function(data) {\n            return this.reader.errors(data);\n        },\n        parse: function(data) {\n            return this.reader.parse(data);\n        },\n        data: function(data) {\n            return this.reader.data(data);\n        },\n        total: function(data) {\n            return this.reader.total(data);\n        },\n        groups: function(data) {\n            return this.reader.groups(data);\n        },\n        aggregates: function(data) {\n            return this.reader.aggregates(data);\n        },\n        serialize: function(data) {\n            return this.reader.serialize(data);\n        }\n    });\n\n    function applyZone(date, fromZone, toZone) {\n        if (toZone) {\n            date = kendo.timezone.convert(date, fromZone, toZone);\n        } else {\n            date = kendo.timezone.remove(date, fromZone);\n        }\n\n        return date;\n    }\n\n    function validDateValidator(input) {\n        if ((input.filter(\"[name=start]\").length && input.filter(\"[title=Start]\").length) ||\n            (input.filter(\"[name=end]\").length && input.filter(\"[title=End]\").length) ||\n            input.filter(\".k-recur-until\").length) {\n            var date;\n            var picker = kendo.widgetInstance(input, kendo.ui);\n\n            if (picker) {\n                date = kendo.parseDate(input.val(), picker.options.format);\n                return !!date && picker.value();\n            } else {\n                date = kendo.parseDate(input.val());\n                return !!date;\n            }\n        }\n\n        return true;\n    }\n\n    function dateCompareValidator(input) {\n        if (input.filter(\"[name=end]\").length) {\n            var container = input.closest(\".k-scheduler-edit-form\");\n            var startInput = container.find(\"[name=start]:visible\");\n            var endInput = container.find(\"[name=end]:visible\");\n\n            if (endInput[0] && startInput[0]) {\n                var start, end;\n                var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n\n                var editable = container.data(\"kendoEditable\");\n                var model = editable ? editable.options.model : null;\n\n                if (startPicker && endPicker) {\n                    start = startPicker.value();\n                    end = endPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                    end = kendo.parseDate(endInput.val());\n                }\n\n                if (start && end) {\n                    if (model) {\n                        var timezone = startInput.attr(kendo.attr(\"timezone\"));\n                        var startTimezone = model.startTimezone;\n                        var endTimezone = model.endTimezone;\n\n                        startTimezone = startTimezone || endTimezone;\n                        endTimezone = endTimezone || startTimezone;\n\n                        if (startTimezone) {\n                            start = applyZone(start, startTimezone, timezone);\n                            end = applyZone(end, endTimezone, timezone);\n                        }\n                    }\n\n                    return start <= end;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function untilDateCompareValidator(input) {\n        var untilPicker, until,\n            container, startInput, start, startPicker;\n\n        if (input.filter(\".k-recur-until\").length) {\n            untilPicker = kendo.widgetInstance(input, kendo.ui);\n            until = untilPicker.value();\n            container = input.closest(\".k-scheduler-edit-form\");\n            startInput = container.find(\"[name=start]:visible\");\n\n            if (startInput[0]) {\n                startPicker = kendo.widgetInstance(startInput, kendo.ui);\n\n                if (startPicker) {\n                    start = startPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                }\n\n                if (start && until) {\n                    return start <= until;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var SchedulerEvent = kendo.data.Model.define({\n        init: function(value) {\n            var that = this;\n\n            kendo.data.Model.fn.init.call(that, value);\n\n            that._defaultId = that.defaults[that.idField];\n        },\n\n        _time: function(field) {\n            var date = this[field];\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n            }\n\n            return getMilliseconds(date);\n        },\n\n        _date: function(field) {\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - this._time(field);\n            }\n\n            return kendo.date.getDate(this[field]);\n        },\n\n        clone: function(options, updateUid) {\n            var uid = this.uid,\n                event = new this.constructor($.extend({}, this.toJSON(), options));\n\n            if (!updateUid) {\n                event.uid = uid;\n            }\n\n            return event;\n        },\n\n        duration: function() {\n            var end = this.end;\n            var start = this.start;\n            var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n\n            return end - start - offset;\n        },\n\n        expand: function(start, end, zone) {\n            return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n        },\n\n        update: function(eventInfo) {\n            for (var field in eventInfo) {\n                this.set(field, eventInfo[field]);\n            }\n\n            if (this._startTime) {\n                this.set(\"_startTime\", kendo.date.toUtcTime(this.start));\n            }\n\n            if (this._endTime) {\n                this.set(\"_endTime\", kendo.date.toUtcTime(this.end));\n            }\n        },\n\n        isMultiDay: function() {\n            return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n        },\n\n        isException: function() {\n            return !this.isNew() && this.recurrenceId;\n        },\n\n        isOccurrence: function() {\n            return this.isNew() && this.recurrenceId;\n        },\n\n        isRecurring: function() {\n            return !!(this.recurrenceRule || this.recurrenceId);\n        },\n\n        isRecurrenceHead: function() {\n            return !!(this.id && this.recurrenceRule);\n        },\n\n        toOccurrence: function(options) {\n            options = $.extend(options, {\n                recurrenceException: null,\n                recurrenceRule: null,\n                recurrenceId: this.id || this.recurrenceId\n            });\n\n            options[this.idField] = this.defaults[this.idField];\n\n            return this.clone(options, true);\n        },\n\n        toJSON: function() {\n            var obj = kendo.data.Model.fn.toJSON.call(this);\n            obj.uid = this.uid;\n\n            delete obj._startTime;\n            delete obj._endTime;\n\n            return obj;\n        },\n\n        shouldSerialize: function(field) {\n            return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== \"_defaultId\";\n        },\n\n        set: function(key, value) {\n            var isAllDay = this.isAllDay || false;\n\n            kendo.data.Model.fn.set.call(this, key, value);\n\n            if (key == \"isAllDay\" && value != isAllDay) {\n                var start = kendo.date.getDate(this.start);\n                var end = new Date(this.end);\n                var milliseconds = kendo.date.getMilliseconds(end);\n\n                if (milliseconds === 0 && value) {\n                    milliseconds = MS_PER_DAY;\n                }\n\n                this.set(\"start\", start);\n\n                if (value === true) {\n                    kendo.date.setTime(end, -milliseconds);\n\n                    if (end < start) {\n                        end = start;\n                    }\n                } else {\n                    kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                }\n\n                this.set(\"end\", end);\n            }\n        },\n        id: \"id\",\n        fields: {\n            id: { type: \"number\" },\n            title: { defaultValue: \"\", type: \"string\" },\n            start: { type: \"date\", validation: { required: true, validDate: { value: validDateValidator } } },\n            startTimezone: { type: \"string\" },\n            end: {\n                type: \"date\",\n                validation: {\n                    required: true,\n                    validDate: { value: validDateValidator },\n                    dateCompare: { value: dateCompareValidator }\n                }\n            },\n            endTimezone: { type: \"string\" },\n            recurrenceRule: {\n                defaultValue: \"\",\n                type: \"string\",\n                validation: {\n                    validDate: { value: validDateValidator },\n                    untilDateCompare: { value: untilDateCompareValidator }\n                }\n            },\n            recurrenceException: { defaultValue: \"\", type: \"string\" },\n            isAllDay: { type: \"boolean\", defaultValue: false },\n            description: { type: \"string\" }\n        }\n    });\n\n    var SchedulerDataSource = DataSource.extend({\n        init: function(options) {\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                    modelBase: SchedulerEvent,\n                    model: SchedulerEvent\n                }\n            }, options));\n\n            this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n        },\n\n        expand: function(start, end) {\n            var data = this.view(),\n                filter = {},\n                endOffset;\n\n            if (start && end) {\n                endOffset = end.getTimezoneOffset();\n                end = new Date(end.getTime() + MS_PER_DAY - 1);\n\n                if (end.getTimezoneOffset() !== endOffset) {\n                    end = kendo.timezone.apply(end, endOffset);\n                }\n\n                filter = {\n                    logic: \"or\",\n                    filters: [\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"gte\", value: start },\n                                { field: \"end\", operator: \"gte\", value: start },\n                                { field: \"start\", operator: \"lte\", value: end }\n                            ]\n                        },\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"lte\", value: new Date(start.getTime() + MS_PER_DAY - 1) },\n                                { field: \"end\", operator: \"gte\", value: start }\n                            ]\n                        }\n                    ]\n                };\n\n                data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n            }\n\n            return data;\n        },\n\n        cancelChanges: function(model) {\n            if (model && model.isOccurrence()) {\n                this._removeExceptionDate(model);\n            }\n\n            DataSource.fn.cancelChanges.call(this, model);\n        },\n\n        insert: function(index, model) {\n            if (!model) {\n                return;\n            }\n\n            if (!(model instanceof SchedulerEvent)) {\n                var eventInfo = model;\n\n                model = this._createNewModel();\n                model.accept(eventInfo);\n            }\n\n            if ((!this._pushCreated && model.isRecurrenceHead()) || model.recurrenceId) {\n                model = model.recurrenceId ? model : model.toOccurrence();\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n\n        pushCreate: function(items) {\n            this._pushCreated = true;\n            DataSource.fn.pushCreate.call(this, items);\n            this._pushCreated = false;\n        },\n\n        remove: function(model) {\n            if (model.isRecurrenceHead()) {\n                this._removeExceptions(model);\n            } else if (model.isRecurring()) {\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.remove.call(this, model);\n        },\n\n        _removeExceptions: function(model) {\n            var data = this.data().slice(0),\n                item = data.shift(),\n                id = model.id;\n\n            while (item) {\n                if (item.recurrenceId === id) {\n                    DataSource.fn.remove.call(this, item);\n                }\n\n                item = data.shift();\n            }\n\n            model.set(RECURRENCE_EXCEPTION, \"\");\n        },\n\n        _removeExceptionDate: function(model) {\n            if (model.recurrenceId) {\n                var head = this.get(model.recurrenceId);\n\n                if (head) {\n                    var start = model.defaults.start;\n                    var replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                    var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                    if (replaceRegExp.test(recurrenceException)) {\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    } else {\n                        start = model.start;\n                        replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    }\n                }\n            }\n        },\n\n        _addExceptionDate: function(model) {\n            var start = model.start;\n            var zone = this.reader.timezone;\n            var head = this.get(model.recurrenceId);\n            var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n            if (!recurrence.isException(recurrenceException, start, zone)) {\n                var newException = recurrence.toExceptionString(start, zone);\n                model.defaults.start = start;\n                head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : \"\") + newException);\n            }\n        }\n    });\n\n    function expandAll(events, start, end, zone) {\n        var length = events.length,\n            data = [],\n            idx = 0;\n\n        for (; idx < length; idx++) {\n            data = data.concat(events[idx].expand(start, end, zone));\n        }\n\n        return data;\n    }\n\n    SchedulerDataSource.create = function(options) {\n        if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n            options = { data: options };\n        }\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only SchedulerDataSource instances are supported\");\n        }\n\n        return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n    };\n\n    extend(true, kendo.data, {\n       SchedulerDataSource: SchedulerDataSource,\n       SchedulerDataReader: SchedulerDataReader,\n       SchedulerEvent: SchedulerEvent\n    });\n\n    var defaultCommands = {\n        update: {\n            text: \"Save\",\n            className: \"k-button-solid-primary k-scheduler-update\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-scheduler-cancel\"\n        },\n        destroy: {\n            text: \"Delete\",\n            imageClass: \"k-i-close\",\n            className: \"k-button-solid-primary k-scheduler-delete\",\n            iconClass: \"k-icon\"\n        }\n    };\n\n    function trimOptions(options, overrideOptions) {\n        delete options.name;\n        delete options.prefix;\n\n        delete options.remove;\n        delete options.edit;\n        delete options.add;\n        delete options.navigate;\n\n        for (var key in overrideOptions) {\n            options[key] = overrideOptions[key];\n        }\n\n        return options;\n    }\n\n    /*\n    function fieldType(field) {\n        field = field != null ? field : \"\";\n        return field.type || kendo.type(field) || \"string\";\n    }\n    */\n\n    function descriptionEditor(options) {\n        var attr = createValidationAttributes(options.model, options.field);\n\n        return function(container, model) {\n            $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr)\n                .appendTo(container)\n                .wrap('<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"></span>');\n        };\n    }\n\n    function createValidationAttributes(model, field) {\n        var modelField = (model.fields || model)[field];\n        var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n        var validation = modelField ? modelField.validation : {};\n        // var type = fieldType(modelField);\n        var datatype = kendo.attr(\"type\");\n        var inArray = $.inArray;\n        var ruleName;\n        var rule;\n\n        var attr = {};\n\n        for (ruleName in validation) {\n            rule = validation[ruleName];\n\n            if (inArray(ruleName, specialRules) >= 0) {\n                attr[datatype] = ruleName;\n            } else if (!kendo.isFunction(rule)) {\n                attr[ruleName] = isPlainObject(rule) ? (rule.value || ruleName) : rule;\n            }\n\n            attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n        }\n\n        return attr;\n    }\n\n    function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n        var editorValue = editor.value(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue.toString()];\n        }\n\n        editor.dataSource.data().forEach(function(item) {\n            if (item[parentValueField] === null || item[parentValueField] === undefined || item[parentValueField] == parentValue) {\n                item.set(DISABLED, false);\n            } else {\n                var currentValue = item.get(valueField);\n\n                item.set(DISABLED, true);\n\n                if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        editor.value(null);\n                        editor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            editor.value(valueArray);\n            editor.trigger(CHANGE);\n        }\n    }\n\n    function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n        var parentElement = container.closest(\".k-edit-form-container\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n        var parentWidget = parentElement.getKendoDropDownList();\n\n        if (parentWidget) {\n            parentWidget.bind(CHANGE, function(ev) {\n                var parentValue = ev.sender.value();\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        } else {\n            parentElement.on(CHANGE, function(ev) {\n                var parentValue = ev.target.value;\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        }\n    }\n\n    function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n        var options = currentEditor.find(OPTION),\n            editorValue = currentEditor.val(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue];\n        }\n\n        resource.dataSource.view().forEach(function(item, index) {\n            var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n            var valid = itemParentValue === null || itemParentValue === undefined || itemParentValue == parentSelectedValue;\n\n            if (valid) {\n                options[index].removeAttribute(DISABLED);\n            } else {\n                options[index].setAttribute(DISABLED, DISABLED);\n\n                var currentValue = \"\" + item.get(resource.dataValueField);\n\n                if (valueArray.indexOf(currentValue) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        currentEditor.val(null);\n                        currentEditor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            currentEditor.val(valueArray);\n            currentEditor.trigger(CHANGE);\n        }\n    }\n\n    function dropDownResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: \"None\",\n                    template: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\"#><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        var options = e.sender.list.find('li');\n\n                        options.each(function(i, el) {\n                            var element = $(el);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        });\n                    }\n                }).data(\"kendoDropDownList\");\n       };\n    }\n\n    function dropDownResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function multiSelectResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\" #><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                    tagTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField),\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        var options = e.sender.list.find('li');\n\n                        options.each(function(i, el) {\n                            var element = $(el);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        });\n                    }\n                }).data(\"kendoMultiSelect\");\n       };\n    }\n\n    function multiSelectResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function moveEventRange(event, distance) {\n        var duration = event.end.getTime() - event.start.getTime();\n\n        var start = new Date(event.start.getTime());\n\n        kendo.date.setTime(start, distance);\n\n        var end = new Date(start.getTime());\n\n        kendo.date.setTime(end, duration, true);\n\n        return {\n            start: start,\n            end: end\n        };\n    }\n\n    var editors = {\n        mobile: {\n            dateRange: MOBILEDATERANGEEDITOR,\n            timezonePopUp: MOBILETIMEZONEPOPUP,\n            timezone: MOBILETIMEZONEEDITOR,\n            recurrence: MOBILERECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditorMobile,\n            resources: dropDownResourceEditorMobile,\n            isAllDay: MOBILEISALLDAYEDITOR\n        },\n        desktop: {\n            dateRange: DATERANGEEDITOR,\n            timezonePopUp: TIMEZONEPOPUP,\n            timezone: TIMEZONEEDITOR,\n            recurrence: RECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditor,\n            resources: dropDownResourceEditor,\n            isAllDay: ISALLDAYEDITOR\n        }\n    };\n\n    var Editor = kendo.Observable.extend({\n        init: function(element, options) {\n\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n            this.createButton = this.options.createButton;\n\n            this.toggleDateValidationHandler = this._toggleDateValidation.bind(this);\n        },\n\n        _toggleDateValidation: function(e) {\n            if (e.field == \"isAllDay\") {\n                var container = this.container,\n                    isAllDay = this.editable.options.model.isAllDay,\n                    bindAttribute = kendo.attr(\"bind\"),\n                    element, isDateTimeInput, shouldValidate;\n                container.find(\"[\" + bindAttribute + \"*=end],[\" + bindAttribute + \"*=start]\").each(function() {\n                    element = $(this);\n                    if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                        isDateTimeInput = element.is(\"[\" + kendo.attr(\"role\") + \"=datetimepicker],[type*=datetime]\");\n                        shouldValidate = isAllDay !== isDateTimeInput;\n                        element.attr(kendo.attr(\"validate\"), shouldValidate);\n                    }\n                });\n            }\n        },\n\n        fields: function(editors, model) {\n            var that = this;\n            var messages = that.options.messages;\n            var timezone = that.options.timezone;\n\n            var click = function(e) {\n                e.preventDefault();\n                that._initTimezoneEditor(model, this);\n            };\n\n            var fields = [\n                { field: \"title\", title: messages.editor.title /*, format: field.format, editor: field.editor, values: field.values*/ },\n                { field: \"start\", title: messages.editor.start, editor: editors.dateRange, timezone: timezone },\n                { field: \"end\", title: messages.editor.end, editor: editors.dateRange, timezone: timezone },\n                { field: \"isAllDay\", title: messages.editor.allDayEvent, editor: editors.isAllDay }\n            ];\n\n            var checkHierarchical = function(item) {\n                return !!item[resource.dataParentValueField];\n            };\n\n            if (kendo.timezone.windows_zones) {\n                fields.push({ field: \"timezone\", title: messages.editor.timezone, editor: editors.timezonePopUp, click: click, messages: messages.editor, model: model });\n                fields.push({ field: \"startTimezone\", title: messages.editor.startTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n                fields.push({ field: \"endTimezone\", title: messages.editor.endTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n            }\n\n            if (!model.recurrenceId) {\n                fields.push({ field: \"recurrenceRule\", title: messages.editor.repeat, editor: editors.recurrence, timezone: timezone, messages: messages.recurrenceEditor, pane: this.pane });\n            }\n\n            if (\"description\" in model) {\n                fields.push({ field: \"description\", title: messages.editor.description, editor: editors.description({ model: model, field: \"description\" }) });\n            }\n\n            for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                var resource = this.options.resources[resourceIndex];\n                var resourceView = resource.dataSource.view();\n                var hasParent = resourceView.some(checkHierarchical);\n                var parentResource, parent;\n\n                if (hasParent) {\n                    parentResource = this.options.resources[resourceIndex - 1];\n\n                    if (parentResource) {\n                        parent = parentResource.field;\n                    }\n                }\n\n                fields.push({\n                    field: resource.field,\n                    title: resource.title,\n                    editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                });\n            }\n\n            return fields;\n        },\n\n        end: function() {\n            return this.editable.end();\n        },\n\n        _buildDesktopEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var html = \"\";\n\n            html += '<div class=\"k-form\">';\n\n            for (var idx = 0, length = fields.length; idx < length; idx++) {\n                var field = fields[idx];\n\n                if (field.field === \"startTimezone\") {\n                    html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                    html += '<div class=\"k-form\">';\n                    html += '<div class=\"k-form-field\"><div class=\"k-form-field-wrap\">' + kendo.html.renderCheckBox($('<input class=\"k-timezone-toggle\"/>'), { label: messages.editor.separateTimezones }) + '</div></div>';\n                }\n\n                if (model.fields[field.field] && model.fields[field.field].type === \"boolean\") {\n                    html += '<div class=\"k-form-field\">';\n                } else {\n                    html += '<div class=\"k-form-field\"><label class=\"k-label k-form-label\" for=\"' + field.field + '\" id=\"' + field.field + '_label\">' + (field.title || field.field || \"\") + '</label>';\n                }\n\n                if ((!model.editable || model.editable(field.field))) {\n                    editableFields.push(field);\n                    html += '<div ' + kendo.attr(\"container-for\") + '=\"' + field.field + '\" class=\"k-form-field-wrap\"></div>';\n                } else {\n                    var tmpl = \"#:\";\n\n                    if (field.field) {\n                        field = kendo.expr(field.field, paramName);\n                        tmpl += field + \"==null?'':\" + field;\n                    } else {\n                        tmpl += \"''\";\n                    }\n\n                    tmpl += \"#\";\n\n                    tmpl = kendo.template(tmpl, settings);\n\n                    html += '<div class=\"k-form-field-wrap\">' + tmpl(model) + '</div>';\n                }\n\n                html += \"</div>\";\n\n                if (field.field === \"endTimezone\") {\n                    html += this._createEndTimezoneButton();\n                }\n            }\n\n            html += '</div>';\n\n            return html;\n        },\n\n        _buildMobileEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var html = \"\";\n\n            html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n\n            for (var idx = 0, length = fields.length; idx < length; idx++) {\n                var field = fields[idx];\n\n                if (field.field === \"timezone\" || field.field === \"recurrenceRule\") {\n                    html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                }\n\n                if (field.field === \"startTimezone\") {\n                    html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                    html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                    html += '<li class=\"k-item k-listgroup-item\">';\n                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                    html += '<span class=\"k-item-title k-listgroup-form-row\">' + messages.editor.separateTimezones + '</span>';\n                    html += '<span class=\"k-listgroup-form-field-wrapper\">';\n                    html += '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />';\n                    html += '</span>';\n                    html += '</label>';\n                    html += '</li>';\n                }\n\n                if ((!model.editable || model.editable(field.field))) {\n                    html += '<li class=\"k-item k-listgroup-item\">';\n                    if (field.field === \"timezone\") {\n                        html += '<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-disabled: isAllDay }\">';\n                    } else {\n                        html += '<label class=\"k-label k-listgroup-form-row\">';\n                    }\n                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || \"\") + '</span>';\n\n                    editableFields.push(field);\n                    html += '<div class=\"k-listgroup-form-field-wrapper\" ' + kendo.attr(\"container-for\") + '=\"' + field.field + '\"></div>';\n\n                    html += '</label></li>';\n                } else {\n                    var tmpl = \"#:\";\n\n                    html += '<li class=\"k-item k-listgroup-item\">';\n                    html += '<label class=\"k-label k-no-click k-listgroup-form-row\">';\n                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || \"\") + '</span>';\n\n                    if (field.field) {\n                        field = kendo.expr(field.field, paramName);\n                        tmpl += field + \"==null?'':\" + field;\n                    } else {\n                        tmpl += \"''\";\n                    }\n\n                    tmpl += \"#\";\n\n                    tmpl = kendo.template(tmpl, settings);\n\n                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n\n                    html += '</label></li>';\n                }\n\n                if (field.field === \"recurrenceRule\") {\n                    html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                }\n\n                if (field.field === \"endTimezone\") {\n                    html += \"</ul></div>\";\n                }\n            }\n            html += '</ul>';\n\n            return html;\n        },\n\n        _buildEditTemplate: function(model, fields, editableFields, isMobile) {\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var template = this.options.editable.template;\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n                html += (kendo.template(template, settings))(model);\n            } else if (isMobile) {\n                html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n            } else {\n                html += this._buildDesktopEditTemplate(model, fields, editableFields);\n            }\n\n            return html;\n        },\n\n        _createEndTimezoneButton: function() {\n            return '</ul></div>';\n        },\n\n        _revertTimezones: function(model) {\n            model.set(\"startTimezone\", this._startTimezone);\n            model.set(\"endTimezone\", this._endTimezone);\n\n            delete this._startTimezone;\n            delete this._endTimezone;\n        }\n    });\n\n    var MobileEditor = Editor.extend({\n        init: function() {\n            Editor.fn.init.apply(this, arguments);\n\n            this.pane = kendo.Pane.wrap(this.element, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n            this.pane.element.parent().css(\"height\", this.options.height);\n            this.view = this.pane.view();\n        },\n\n        options: {\n            animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n            }\n        },\n\n        destroy: function() {\n            this.close();\n            this.unbind();\n            this.pane.destroy();\n        },\n\n        _initTimezoneEditor: function(model) {\n            var that = this;\n            var pane = that.pane;\n            var messages = that.options.messages;\n            var timezoneView = that.timezoneView;\n            var container = timezoneView ? timezoneView.content.find(\".k-scheduler-timezones\") : that.container.find(\".k-scheduler-timezones\");\n            var kSwitch = container.find(\"input.k-timezone-toggle\").data(\"kendoSwitch\");\n            var endTimezoneRow = container.find(\"li.k-item:not(.k-zonepicker)\").last();\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    kSwitch.enable(value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        kSwitch.value(false);\n                    }\n                }\n            };\n\n            that._startTimezone = model.startTimezone || \"\";\n            that._endTimezone = model.endTimezone || \"\";\n\n            if (!timezoneView) {\n                var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' +\n                '<div data-role=\"header\" class=\"k-header\">' +\n                    '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' +\n                    'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                    messages.editor.timezoneTitle +\n                    '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.save + '\" ' +\n                    'aria-label=\"' + messages.save + '\"><span class=\"k-icon k-i-check\"></span></a>' +\n                '</div><div data-role=\"content\"></div>';\n\n                this.timezoneView = timezoneView = pane.append(html);\n\n                timezoneView.contentElement.append(container.show());\n\n                timezoneView.element.on(CLICK + NS, \".k-scheduler-cancel, .k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    if ($(this).hasClass(\"k-scheduler-cancel\")) {\n                        that._revertTimezones(model);\n                    }\n\n                    var editView = that._editPane;\n\n                    var text = timezoneButtonText(model, messages.editor.noTimezone);\n\n                    editView.content.find(\".k-timezone-label\").text(text);\n\n                    pane.navigate(editView, that.options.animations.right);\n                });\n\n                kSwitch.bind(CHANGE, function(ev) {\n                    endTimezoneRow.toggle(ev.checked);\n                    model.set(\"endTimezone\", \"\");\n                });\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            kSwitch.value(!!model.endTimezone);\n            kSwitch.enable(!!model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            pane.navigate(timezoneView, that.options.animations.left);\n        },\n\n        showDialog: function(options) {\n            var actions = options.buttons.map(function(button) {\n                return {\n                    text: button.text,\n                    action: button.click\n                };\n            });\n\n            actions.push({\n                text: this.options.messages.cancel,\n                primary: true\n            });\n\n            $(\"<div />\").appendTo(document.body)\n                .kendoDialog({\n                    close: function() {\n                        this.destroy();\n                    },\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: options.text,\n                    actions: actions\n                });\n        },\n\n        editEvent: function(model) {\n            var pane = this.pane;\n            var html = \"\";\n\n            var messages = this.options.messages;\n            var updateText = messages.save;\n            var removeText = messages.destroy;\n            var cancelText = messages.cancel;\n            var titleText = messages.editor.editorTitle;\n            var resetSeries = messages.resetSeries;\n\n            html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr(\"uid\") + '=\"' + model.uid + '\">' +\n                '<div data-role=\"header\" class=\"k-header\">' +\n                    '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + cancelText + '\"' +\n                    'aria-label=\"' + cancelText + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                    titleText +\n                    '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + updateText + '\" ' +\n                    'aria-label=\"' + updateText + '\"><span class=\"k-icon k-i-check\"></span></a>' +\n                '</div>';\n\n            var fields = this.fields(editors.mobile, model);\n\n            var that = this;\n\n            var editableFields = [];\n\n            html += this._buildEditTemplate(model, fields, editableFields, true);\n\n            html += \"</div>\";\n\n            var view = pane.append(html);\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                view.contentElement.append(resetSeriesBtn);\n            }\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                view.contentElement.append(deleteBtn);\n            }\n\n            this._editPane = view;\n\n            var container = this.container = view.element;\n\n            this.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                target: that.options.target,\n                validateOnBlur: true\n            }).data(\"kendoEditable\");\n\n            if (!this.trigger(\"edit\", { container: container, model: model })) {\n\n                container.on(CLICK + NS, \"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    var button = $(this);\n\n                    if (!button.hasClass(\"k-scheduler-edit\")) {\n\n                        var name = \"cancel\";\n\n                        if (button.hasClass(\"k-scheduler-update\")) {\n                            name = \"save\";\n                        } else if (button.hasClass(\"k-scheduler-delete\")) {\n                            name = \"remove\";\n                        } else if (button.hasClass(\"k-scheduler-resetSeries\")) {\n                            name = RESET;\n                        }\n\n                        that.trigger(name, { container: container, model: model });\n                    } else {\n                        pane.navigate(this._editPane, that.options.animations.right);\n                    }\n                });\n\n                pane.navigate(view, that.options.animations.left);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                this.trigger(\"cancel\", { container: container, model: model });\n            }\n\n            return this.editable;\n        },\n\n        _views: function() {\n            return this.pane.element\n                    .find(kendo.roleSelector(\"view\"))\n                    .not(this.view.element);\n        },\n\n        close: function() {\n            if (this.container) {\n                this.pane.navigate(\"\", this.options.animations.right);\n\n                var views = this._views();\n                var view;\n\n                for (var idx = 0, length = views.length; idx < length; idx++) {\n                    view = views.eq(idx).data(\"kendoView\");\n                    if (view) {\n                       view.purge();\n                    }\n                }\n\n                views.remove();\n\n                this.container = null;\n                if (this.editable) {\n                    this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                    this.editable.destroy();\n                    this.editable = null;\n                }\n                this.timezoneView = null;\n            }\n        }\n    });\n\n    var PopupEditor = Editor.extend({\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        editEvent: function(model) {\n            var that = this;\n            var editable = that.options.editable;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n            var messages = that.options.messages;\n            var updateText = messages.save;\n            var cancelText = messages.cancel;\n            var deleteText = messages.destroy;\n            var resetSeries = messages.resetSeries;\n            var fields = this.fields(editors.desktop, model);\n            var editableFields = [];\n            var fieldName;\n\n            html += this._buildEditTemplate(model, fields, editableFields, false);\n\n            var attr;\n            var options = isPlainObject(editable) ? editable.window : {};\n\n            html += '<div class=\"k-edit-buttons\">';\n            html += this.createButton({ name: \"update\", text: updateText, attr: attr }) + this.createButton({ name: \"canceledit\", text: cancelText, attr: attr });\n\n            if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                html += this.createButton({ name: \"resetSeries\", text: resetSeries, attr: attr });\n            }\n\n            if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                html += this.createButton({ name: \"delete\", text: deleteText, attr: attr });\n            }\n\n            html += '</div></div></div>';\n\n            var container = this.container = $(html)\n                .appendTo(that.element).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, { container: container, model: model })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n\n            that.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                validateOnBlur: true,\n                target: that.options.target\n            }).data(\"kendoEditable\");\n\n            for (var field in editableFields) {\n                if (editableFields[field].field !== \"recurrenceRule\") {\n                    fieldName = editableFields[field].field;\n                    container.find(\"[name='\" + fieldName + \"']\").attr(\"aria-labelledby\", fieldName + \"_label\");\n                }\n\n                if (editableFields[field].field === \"isAllDay\") {\n                    container.find(\"label[for='\" + fieldName + \"']\").attr(\"id\", fieldName + \"_label\");\n                }\n            }\n\n            if (!that.trigger(EDIT, { container: container, model: model })) {\n\n                container.data(\"kendoWindow\").center().open();\n\n                container.on(CLICK + NS, \"button.k-scheduler-cancel\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(CANCEL, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"save\", { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-delete\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(REMOVE, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    that.trigger(RESET, { container: container, model: model });\n                });\n\n                kendo.cycleForm(container);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                that.trigger(CANCEL, { container: container, model: model });\n            }\n\n            return that.editable;\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                    that.editable.destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._timezonePopup && that._timezonePopup.data(\"kendoWindow\")) {\n                    that._timezonePopup.data(\"kendoWindow\").destroy();\n                    that._timezonePopup = null;\n                }\n\n                if (that.container.is(\":visible\")) {\n                    that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                } else {\n                    destroy();\n                }\n            } else {\n                destroy();\n            }\n        },\n\n        _createEndTimezoneButton: function() {\n            var messages = this.options.messages;\n            var html = \"\";\n\n            html += '<div class=\"k-edit-buttons\">';\n            html += this.createButton({ name: \"savetimezone\", text: messages.save }) + this.createButton({ name: \"canceltimezone\", text: messages.cancel });\n            html += '</div></div></div>';\n\n            return html;\n        },\n\n        showDialog: function(options) {\n            var html = kendo.format(\"<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>\", options.text);\n\n            html += '<div class=\"k-edit-buttons\">';\n\n            for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                html += this.createButton(options.buttons[buttonIndex]);\n            }\n\n            html += '</div></div></div>';\n\n            var wrapper = this.element;\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = $(html).appendTo(wrapper)\n                               .eq(0)\n                               .on(CLICK, \".k-button\", function(e) {\n                                    e.preventDefault();\n\n                                    popup.close();\n\n                                    var buttonIndex = $(e.currentTarget).index();\n\n                                    options.buttons[buttonIndex].click();\n                               })\n                               .kendoWindow({\n                                   modal: true,\n                                   resizable: false,\n                                   draggable: false,\n                                   title: options.title,\n                                   visible: false,\n                                   close: function() {\n                                       this.destroy();\n                                       wrapper.trigger(\"focus\");\n                                   }\n                               })\n                               .getKendoWindow();\n\n            popup.center().open();\n        },\n\n        _initTimezoneEditor: function(model, activator) {\n            var that = this;\n            var container = that.container.find(\".k-scheduler-timezones\");\n            var checkbox = container.find(\"input.k-timezone-toggle\");\n            var endTimezoneRow = container.find(\".k-form-field\").last();\n            var saveButton = container.find(\".k-scheduler-savetimezone\");\n            var cancelButton = container.find(\".k-scheduler-canceltimezone\");\n            var timezonePopup = that._timezonePopup;\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    checkbox.prop(DISABLED, !value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        checkbox.prop(\"checked\", false);\n                    }\n                }\n            };\n            var wnd;\n\n            that._startTimezone = model.startTimezone;\n            that._endTimezone = model.endTimezone;\n\n            if (!timezonePopup) {\n                that._timezonePopup = timezonePopup = container.kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.editor.timezoneEditorTitle,\n                    visible: false,\n                    close: function(e) {\n                        model.unbind(CHANGE, startTimezoneChange);\n\n                        if (e.userTriggered) {\n                            that._revertTimezones(model);\n                        }\n\n                        if (activator) {\n                            activator.focus();\n                        }\n                    }\n                });\n\n                checkbox.on(CLICK, function() {\n                    endTimezoneRow.toggle(checkbox.prop(\"checked\"));\n                    model.set(\"endTimezone\", \"\");\n                });\n\n                saveButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    wnd.close();\n                });\n\n                cancelButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    that._revertTimezones(model);\n                    wnd.close();\n                });\n\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            checkbox.prop(\"checked\", model.endTimezone).prop(DISABLED, !model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            wnd = timezonePopup.data(\"kendoWindow\");\n            wnd.center().open();\n        }\n    });\n\n    var Scheduler = DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (!that.options.views || !that.options.views.length) {\n                that.options.views = [\"day\", \"week\"];\n            }\n\n            that.resources = [];\n\n            that._initModel();\n\n            that._wrapper();\n\n            that._views();\n\n            that._toolbar();\n\n            that._dataSource();\n\n            that._resources();\n\n            that._resizeHandler = function() {\n                that.resize();\n            };\n\n            that.wrapper.on(MOUSEDOWN + NS + \" selectstart\" + NS, function(e) {\n                if (!$(e.target).is(\":kendoFocusable\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (that.options.editable && that.options.editable.resize !== false) {\n                that._resizable();\n            }\n\n            that._movable();\n\n            that._bindResize();\n\n            if (that.options.messages && that.options.messages.recurrence) {\n                recurrence.options = that.options.messages.recurrence;\n            }\n\n            that._tabindex();\n            that._navigation();\n            that._selectable();\n            that._touchHandlers();\n\n            that._ariaId = kendo.guid();\n\n            that._createEditor();\n        },\n\n        _bindResize: function() {\n            $(window).on(\"resize\" + NS, this._resizeHandler);\n        },\n\n        _unbindResize: function() {\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n        },\n\n        dataItems: function() {\n            var that = this;\n            var items = that.items();\n            var events = that._data;\n            var eventsUids = $.map(items, function(item) {\n                return $(item).attr(\"data-uid\");\n            });\n            var i;\n            var key;\n\n            var dict = {};\n            var eventsUidsLength = eventsUids.length;\n            for (i = 0; i < eventsUidsLength; i++) {\n                dict[eventsUids[i]] = null;\n            }\n\n            var eventsCount = events.length;\n            for (i = 0; i < eventsCount; i++) {\n                var event = events[i];\n                if (dict[event.uid] !== undefined) {\n                    dict[event.uid] = event;\n                }\n            }\n\n            var sortedData = [];\n            for (key in dict) {\n                sortedData.push(dict[key]);\n            }\n\n            return sortedData;\n        },\n\n        _isMobile: function() {\n            var options = this.options;\n            return (options.mobile === true && kendo.support.mobileOS) || options.mobile === \"phone\" || options.mobile === \"tablet\";\n        },\n\n        _isTouch: function(event) {\n            return /touch/.test(event.type) || (event.originalEvent && /touch/.test(event.originalEvent.pointerType));\n        },\n\n        _isInverseColor: function(eventElement) {\n            return eventElement.hasClass(INVERSECOLORCLASS);\n        },\n\n        _groupsByResource: function(resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n            if (!groupsArray) {\n                groupsArray = [];\n            }\n\n            var resource = resources[0];\n            if (resource) {\n                var group;\n                var data = resource.dataSource.view();\n                var prevIndex = 0;\n\n                for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                    var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                    var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n\n                    group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                    group[resource.field] = fieldValue;\n                    prevIndex = group.groupIndex;\n\n                    if (parentField && parentFieldValue) {\n                        group[parentField] = parentFieldValue;\n                    }\n\n                    if (resources.length === 1) {\n                        group.groupIndex = groupIndex + dataIndex;\n                        groupsArray.push(group);\n                    }\n                }\n                return group;\n            } else {\n                return {};\n            }\n        },\n\n        data: function() {\n            return this._data;\n        },\n\n        select: function(options) {\n            var that = this;\n            var view = that.view();\n            var selection = that._selection;\n            var groups = view.groups;\n            var selectedGroups;\n\n            if (options === undefined) {\n                var selectedEvents;\n                var slots = view._selectedSlots;\n\n                if (!selection) {\n                    return [];\n                }\n\n                if (selection && selection.events) {\n                    selectedEvents = that._selectedEvents();\n                }\n\n                return {\n                    start: selection.start,\n                    end: selection.end,\n                    events: selectedEvents,\n                    slots: slots,\n                    resources: view._resourceBySlot(selection)\n                };\n            }\n\n            if (!options) {\n                that._selection = null;\n                that._old = null;\n                view.clearSelection();\n\n                return;\n            }\n\n            if (Array.isArray(options)) {\n                options = {\n                    events: options.splice(0)\n                };\n            }\n\n            if (options.resources) {\n                var fieldName;\n                var filters = [];\n                var groupsByResource = [];\n\n                if (view.groupedResources) {\n                    that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                }\n\n                for (fieldName in options.resources) {\n                    filters.push({ field: fieldName, operator: \"eq\", value: options.resources[fieldName] });\n                }\n\n                selectedGroups = new kendo.data.Query(groupsByResource)\n                    .filter(filters)\n                    .toArray();\n            }\n\n            if (options.events && options.events.length) {\n                that._selectEvents(options.events, selectedGroups);\n                that._select();\n\n                return;\n            }\n\n            if (groups && (options.start && options.end)) {\n                var rangeStart = getDate(view._startDate);\n                var rangeEnd = kendo.date.addDays(getDate(view._endDate),1);\n                var group;\n                var ranges;\n\n                if (options.start < rangeEnd && rangeStart <= options.end) {\n                    if (selectedGroups && selectedGroups.length) {\n                        group = groups[selectedGroups[0].groupIndex];\n                    } else {\n                        group = groups[0];\n                    }\n\n                    if (!group.timeSlotCollectionCount()) {\n                        options.isAllDay = true;\n                    }\n\n                    ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n\n                    if (ranges.length) {\n                        that._selection = {\n                            start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                            end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                            groupIndex: ranges[0].start.groupIndex,\n                            index: ranges[0].start.index,\n                            isAllDay: ranges[0].start.isDaySlot,\n                            events: []\n                        };\n\n                        that._select();\n                    }\n                }\n            }\n        },\n\n        _selectEvents: function(eventsUids, selectedGroups) {\n            var that = this;\n            var idx;\n            var view = that.view();\n            var groups = view.groups;\n            var eventsLength = eventsUids.length;\n            var isGrouped = selectedGroups && selectedGroups.length;\n            var ctrlKey = that._ctrlKey;\n\n            that._ctrlKey = true;\n\n            for (idx = 0; idx < eventsLength; idx++) {\n                if (groups && isGrouped) {\n                    var currentGroup = groups[selectedGroups[0].groupIndex];\n                    var events = [];\n                    var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                    var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n\n                    for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                        events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                    }\n\n                    for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                        events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                    }\n\n                    events = new kendo.data.Query(events)\n                        .filter({ field: \"element[0].getAttribute('data-uid')\", operator: \"eq\", value: eventsUids[idx] })\n                        .toArray();\n\n                    if (events[0]) {\n                        that._createSelection(events[0].element);\n                    }\n                } else {\n                    var element = view.element.find(kendo.format(\".k-event[data-uid={0}], .k-task[data-uid={0}]\", eventsUids[idx]));\n\n                    if (element.length) {\n                        that._createSelection(element[0]);\n                    }\n                }\n            }\n\n            that._ctrlKey = ctrlKey;\n        },\n\n        _touchHandlers: function() {\n            var that = this;\n            var startX;\n            var startY;\n            var endX;\n            var endY;\n            var timeStamp;\n            var wrapper = that.wrapper;\n            var touchMoveHandler = that._touchMove.bind(that);\n\n            wrapper.on(TOUCHSTART + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                var content = that.wrapper.find(\".k-scheduler-content\");\n\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                content.stop(true, false);\n\n                that._touchPosX = startX = that._tapPosition(e, 'X');\n                that._touchPosY = startY = that._tapPosition(e, 'Y');\n                that._userTouched = true;\n                that.view()._scrolling = false;\n                timeStamp = Date.now();\n\n                wrapper.on(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", touchMoveHandler);\n            });\n\n            wrapper.on(TOUCHEND + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                var delta = Date.now() - timeStamp;\n                var content = that.wrapper.find(\".k-scheduler-content\");\n                var amplitude = -that._amplitude * (3000 / delta);\n\n                endX = that._tapPosition(e, 'X');\n                endY = that._tapPosition(e, 'Y');\n\n                if (that._dragging) {\n                    return;\n                }\n\n                if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                    that._mouseDownSelection(e);\n                }\n\n                if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                    content.animate({\n                        scrollTop: content[0].scrollTop + amplitude\n                    });\n                }\n\n                wrapper.off(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", touchMoveHandler);\n            });\n        },\n\n        _navigation: function() {\n            var that = this,\n                wrapper = that.wrapper;\n\n            wrapper.on(\"focus\" + NS, function() {\n                var selection = that._selection;\n\n                if ((!selection ||\n                        (selection.events.length > 0 && wrapper.find(\"[data-uid='\" + selection.events[0] + \"']\").length === 0)) &&\n                    !that._userTouched &&\n                    !that._mouseDown) {\n                        that._initialFocus();\n                } else {\n                    that._mouseDown = false;\n                }\n\n                that._select();\n            });\n\n            wrapper.on(\"focusout\" + NS, function() {\n                that._ctrlKey = that._shiftKey = false;\n            });\n\n            wrapper.on(\"keydown\" + NS, that._keydown.bind(that));\n\n            wrapper.on(\"keyup\" + NS, function(e) {\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n            });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (!that.options.selectable) {\n                return;\n            }\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link\", function(e) {\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._mouseDownSelection(e);\n            });\n\n            var mouseMoveHandler = that._mouseMove.bind(that);\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", function(e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n\n                if (that._isTouch(e)) {\n                    return;\n                }\n\n                if (!isRight) {\n                    wrapper.on(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                }\n            });\n\n            wrapper.on(\"mouseup\" + NS + \" mousecancel\" + NS, function() {\n                wrapper.off(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n            });\n        },\n\n        _mouseDownSelection: function(e) {\n            var which = e.which;\n            var button = e.button;\n            var isRight = which && which === 3 || button && button == 2;\n\n            if (!isRight) {\n                if (e.ctrlKey) {\n                    this._ctrlKey = e.ctrlKey;\n                }\n\n                if (e.shiftKey) {\n                    this._shiftKey = e.shiftKey;\n                }\n\n                this._mouseDown = true;\n                this._createSelection(e.currentTarget);\n\n                if ($(e.currentTarget).hasClass(\"k-event\")) {\n                    this._selection.eventElement = e.currentTarget;\n                }\n            }\n\n            if (kendo._activeElement() !== this.wrapper.get(0)) {\n                kendo.focusElement(this.wrapper);\n            } else {\n                this._select();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _selectFirstSlot: function() {\n            var firstAllDay = this.wrapper.find(\".k-scheduler-header-all-day\").find(\"td\").first(),\n                firstContent = this.wrapper.find(\".k-scheduler-content\").find(\"td\").first(),\n                firstSlot;\n\n            if (firstAllDay.length > 0) {\n                firstSlot = firstAllDay;\n            } else if (firstContent.length > 0) {\n                firstSlot = firstContent;\n            } else {\n                firstSlot = this.wrapper.find(\".k-scheduler-body\").find(\".k-link\").first();\n            }\n\n            this._createSelection(firstSlot);\n        },\n\n        _firstEvent: function() {\n            var firstEventInAllDay = this.wrapper.find(\".k-scheduler-header-wrap .k-event, .k-task\").first(),\n                firstEventInContent = this.wrapper.find(\".k-scheduler-content .k-event\").first(),\n                firstEvent, allDayEvent, contentEvent;\n\n            if (firstEventInAllDay.length > 0) {\n                if (firstEventInContent.length > 0) {\n                    allDayEvent = this.occurrenceByUid(firstEventInAllDay.data(\"uid\"));\n                    contentEvent = this.occurrenceByUid(firstEventInContent.data(\"uid\"));\n\n                    firstEvent = allDayEvent.start <= contentEvent.start ? firstEventInAllDay : firstEventInContent;\n                } else {\n                    firstEvent = firstEventInAllDay;\n                }\n            } else if (firstEventInContent) {\n                firstEvent = firstEventInContent;\n            }\n\n            return firstEvent;\n        },\n\n        _initialFocus: function() {\n            var firstEvent = this._firstEvent(),\n                view = this.view();\n\n            if (view.name === \"year\") {\n                if (!view._preventCalendarFocus) {\n                    view.calendar.element.find(\".k-calendar-view\").attr(\"tabindex\", 0);\n                    view.calendar.focus();\n                } else {\n                    view._preventCalendarFocus = false;\n                }\n            } else if (this.options.selectable) {\n                if (firstEvent && firstEvent.length > 0) {\n                    this._createSelection(firstEvent);\n                    this._selection.eventElement = firstEvent[0];\n                } else {\n                    this._selectFirstSlot();\n                }\n            } else if (this.toolbar && this.toolbar.find(\".\" + FOCUSEDSTATE).length === 0) {\n                this._focusToolbar();\n            } else if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _select: function() {\n            var that = this;\n            var view = that.view();\n            var wrapper = that.wrapper;\n            var current = view.current();\n            var selection = that._selection;\n            var oldSelection = that._old ? that._old.selection : null;\n            var oldEventsLength = that._old ? that._old.eventsLength : null;\n            if (!selection) {\n                return;\n            }\n\n            if (current) {\n                current.removeAttribute(\"id\");\n                wrapper.removeAttr(\"aria-activedescendant\");\n            }\n\n            view.select(selection);\n            that._selection.eventElement = null;\n\n            current = view.current();\n            if (current) {\n                current.setAttribute(\"id\", that._ariaId);\n                wrapper.attr(\"aria-activedescendant\", that._ariaId);\n\n                if (oldSelection !== current || (selection.events && (oldEventsLength !== selection.events.length ))) {\n                    var currentUid = $(current).data(\"uid\");\n\n                    if (that._old && currentUid &&\n                        currentUid === $(that._old.selection).data(\"uid\") &&\n                        (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length\n                    };\n\n                    that.trigger(CHANGE, {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            }\n        },\n\n        _selectedEvents: function() {\n            var uids = this._selection.events;\n            var length = uids.length;\n            var idx = 0;\n            var event;\n\n            var events = [];\n\n            for (; idx < length; idx++) {\n                event = this.occurrenceByUid(uids[idx]);\n                if (event) {\n                    events.push(event);\n                }\n            }\n\n            return events;\n        },\n\n        _tapPosition: function(event, coordinate) {\n            return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n        },\n\n        _touchMove: function(e) {\n            var that = this;\n            var content = that.wrapper.find(\".k-scheduler-content\");\n            var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n            var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n            var endY = that._tapPosition(e, 'Y');\n            var endX = that._tapPosition(e, 'X');\n            var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n            var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n            var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n            var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n\n\n            if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                return;\n            }\n\n            if (applyVerticalScroll || applyhorizontalScroll) {\n                that._amplitude = Math.round(endY - that._touchPosY);\n                that._touchPosY = endY;\n                that._touchPosX = endX;\n                content.animate({\n                    scrollTop: scrollTop,\n                    scrollLeft: scrollLeft\n                }, 0);\n                that.view()._scrolling = true;\n            }\n        },\n\n        _mouseMove: function(e) {\n            var that = this;\n            clearTimeout(that._moveTimer);\n\n            if (that._isTouch(e)) {\n                return;\n            }\n\n            that._moveTimer = setTimeout(function() {\n                var view = that.view();\n                var selection = that._selection;\n\n                if (selection) {\n                    var slot = view.selectionByElement($(e.currentTarget));\n\n                    if (slot && selection.groupIndex === slot.groupIndex) {\n                        var startDate = slot.startDate();\n                        var endDate = slot.endDate();\n\n                        if (startDate >= selection.end) {\n                            selection.backward = false;\n                        } else if (endDate <= selection.start) {\n                            selection.backward = true;\n                        }\n\n                        if (selection.backward) {\n                            selection.start = startDate;\n                        } else {\n                            selection.end = endDate;\n                        }\n\n                        that._select();\n                    }\n                }\n            }, 5);\n        },\n\n        _viewByIndex: function(index) {\n            var view, views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _keydownToolbar: function(e) {\n            var key = e.keyCode,\n                focusableToolBarSelector = \"> .k-button,\" +\n                    \".k-scheduler-navigation > .k-button,\" +\n                    \".k-nav-current,\" +\n                    \".k-views-dropdown:visible,\" +\n                    \".k-scheduler-views:visible > .k-button,\" +\n                    \".k-scheduler-search-input,\" +\n                    \".k-scheduler-mobile-views,\" +\n                    \".k-button-group > .k-button\",\n                focusableItems = this.toolbar.find(focusableToolBarSelector),\n                shouldNavigate = $(e.target).closest(VIEWSSELECTOR).length || this.toolbar.find('.k-scheduler-views .k-focus').length,\n                isRtl = kendo.support.isRtl(this.element),\n                focusedItem = this.toolbar.find(\".\" + FOCUSEDSTATE + \", :focus\"),\n                idx = focusableItems.index(focusedItem),\n                itemToFocus;\n\n            if (key === keys.TAB && (!e.shiftKey || this.options.selectable)) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            } else if (e.altKey && key === keys.DOWN && this.toolbar.find(\".k-nav-current\").hasClass(FOCUSEDSTATE)) {\n                this._showCalendar();\n                e.preventDefault();\n                return;\n            } else if (key === keys.RIGHT || key === keys.LEFT) {\n                if ((key === keys.RIGHT && !isRtl) || (key === keys.LEFT && isRtl)) {\n\n                    idx = idx + 1;\n\n                    if (idx === focusableItems.length) {\n                        this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        this.element.focus();\n\n                        return;\n                    }\n                } else if ((key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl)) {\n                    idx = idx - 1;\n\n                    if (idx < 0) {\n                        return;\n                    }\n                }\n\n                itemToFocus = focusableItems[idx];\n\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(itemToFocus).addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).focus().attr(\"tabindex\", -1);\n                this._focusedView = null;\n                e.preventDefault();\n\n                return;\n            } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                if (shouldNavigate && this._focusedView && !this._focusedView.hasClass(\"k-selected\")) {\n                    var focusedViewName = this._focusedView.data().name;\n\n                    if (!this.trigger(\"navigate\", { view: focusedViewName, action: \"changeView\", date: this.date() })) {\n                        this.view(focusedViewName);\n                    }\n                    e.preventDefault();\n                    return;\n                }\n\n                this.toolbar.find(\".\" + FOCUSEDSTATE + ':visible').click();\n                e.preventDefault();\n\n                return;\n            } else if (key === keys.DOWN && !this.wrapper.find(\".k-views-dropdown\").hasClass(\"k-focus\")) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                if (this._selectedViewName === \"year\") {\n                    this.view().calendar.element.find(\".k-calendar-view\").attr(\"tabindex\", 0);\n                    this.view().calendar.focus();\n                } else if (document.activeElement !== this.element[0]) {\n                    this.element.focus();\n                }\n\n                e.preventDefault();\n\n                return;\n            }\n        },\n\n        _keydownView: function(e) {\n            var key = e.keyCode,\n                isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92,\n                selection = this._selection,\n                view = this.view(),\n                editable = view.options.editable,\n                arrowKeys = [ keys.LEFT, keys.RIGHT, keys.UP, keys.DOWN ],\n                isRtl = kendo.support.isRtl(this.element),\n                previous, content, cell;\n\n            if (isModifier) {\n                return;\n            }\n\n            // slots selection via keyboard is no longer available\n            // see here: https://github.com/telerik/kendo-themes/blob/develop/docs/accessibility/Scheduler.md\n            if (!selection) {\n                return;\n            }\n\n            if (key === keys.ENTER) {\n                if (selection.events.length && editable) {\n                    if (editable.update !== false) {\n                        this.editEvent(selection.events[0]);\n                    }\n                }\n            } else if ((key === keys.DELETE || key === keys.BACKSPACE) && editable !== false && editable.destroy !== false) {\n                this.removeEvent(selection.events[0]);\n            } else if (arrowKeys.indexOf(key) > -1) {\n                previous = key === keys.UP || (key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl);\n\n                if (view.moveToEvent(selection, previous)) {\n                    this._select();\n\n                    // Focus the Scheduler element only if it not the currently focused element\n                    if (document.activeElement !== this.element[0]) {\n                        this.element.focus();\n                    }\n\n                    e.preventDefault();\n                }\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownShortcut: function(key) {\n            var currentDate = new Date(),\n                timezone = this.options.timezone,\n                editable = this.view().options.editable;\n\n            if (key === 66 && !!this.view().toggleFullDay) {\n                this.view().toggleFullDay();\n            } else if (key === 67 && editable && editable.create !== false) {\n                this.addEvent(extend({}, {\n                    start: this.date(),\n                    end: this.date()\n                }));\n            } else if (key === 84) {\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: \"today\", date: date })) {\n                    this.date(date);\n                }\n            }\n        },\n\n        _keydownYearView: function(e) {\n            var view = this.view(),\n                selection = this._selection,\n                key = e.keyCode;\n\n            if (key === keys.TAB) {\n                return;\n            }\n\n            if (key === keys.F10) {\n                view.calendar.element.find(\".k-calendar-view\").removeAttr(\"tabindex\");\n                this._focusToolbar();\n                e.preventDefault();\n            } else {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                view.calendar.element.find(\".k-calendar-view\").attr(\"tabindex\", 0);\n                view.calendar.focus();\n            }\n\n            if (selection) {\n                this._adjustSelectedDate();\n            }\n\n            e.preventDefault();\n        },\n\n        _keydownAgendaView: function(e) {\n            var key = e.keyCode,\n                view = this.view(),\n                selection = this._selection,\n                content, cell;\n\n            if (view.move(selection, key)) {\n                e.preventDefault();\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                this._select();\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownChangeView: function(key) {\n            var viewIndex = key - 49,\n                viewByIndex;\n\n            if (viewIndex === -1) {\n                viewIndex = 9;\n            }\n\n            viewByIndex = this._viewByIndex(viewIndex);\n\n            if (viewByIndex && !this.trigger(\"navigate\", { view: viewByIndex, action: \"changeView\", date: this.date() })) {\n                this.view(viewByIndex);\n            }\n        },\n\n        _keydownChangeDate: function(key) {\n            var isRtl = kendo.support.isRtl(this.element),\n                direction = (isRtl && key === keys.LEFT) || (!isRtl && key === keys.RIGHT) ? \"next\" : \"previous\";\n\n            if (direction === \"next\") {\n                date = this.view().nextDate();\n            } else {\n                date = this.view().previousDate();\n            }\n\n            if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: direction, date: date })) {\n                this.date(date);\n                this._initialFocus();\n                this._select();\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode,\n                shortcutKeys = [66, 67, 84],\n                toolbarIsFocused = $(e.target).closest(\".k-toolbar\").length > 0,\n                altKey = e.altKey;\n\n            this._ctrlKey = e.ctrlKey;\n            this._shiftKey = e.shiftKey;\n\n            if (key === keys.ESC && this.popup && this.popup.visible()) {\n                this.popup.close();\n                e.preventDefault();\n                return;\n            }\n\n            if ((key === keys.LEFT || key === keys.RIGHT) && this._shiftKey) {\n                this._keydownChangeDate(key);\n                return;\n            }\n\n            if (altKey && key >= 48 && key <= 57) {\n                this._keydownChangeView(key);\n                return;\n            }\n\n            if (shortcutKeys.indexOf(key) > -1) {\n                this._keydownShortcut(key);\n                return;\n            }\n\n            if (toolbarIsFocused) {\n                this._keydownToolbar(e);\n            } else {\n                if (this._selectedViewName === \"year\") {\n                    this._keydownYearView(e);\n                    return;\n                }\n\n                if (key === keys.F10) {\n                    this._focusToolbar();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._selectedViewName === \"agenda\") {\n                    this._keydownAgendaView(e);\n                    return;\n                }\n\n                this._keydownView(e);\n            }\n        },\n\n        _focusToolbar: function() {\n            this.toolbar.find(\".k-button\").first()\n                .trigger(\"focus\")\n                .addClass(FOCUSEDSTATE);\n        },\n\n        _createSelection: function(item) {\n            var selection = this._selection,\n                uid, slot;\n\n            item = $(item);\n\n            if (item.is(\".k-event\")) {\n                uid = item.attr(kendo.attr(\"uid\"));\n\n                if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                    return;\n                }\n            }\n\n            if (!selection || (!this._ctrlKey && !this._shiftKey)) {\n                selection = this._selection = {\n                    events: [],\n                    groupIndex: 0\n                };\n            }\n\n            slot = this.view().selectionByElement(item);\n\n            if (slot) {\n                selection.groupIndex = slot.groupIndex || 0;\n            }\n\n            if (uid) {\n                slot = getOccurrenceByUid(this._data, uid);\n            }\n\n            if (slot && slot.uid) {\n                uid = [slot.uid];\n            }\n\n            this._updateSelection(slot, uid);\n            this._adjustSelectedDate();\n        },\n\n        _updateSelection: function(dataItem, events, groupIndex) {\n            var selection = this._selection;\n\n            if (dataItem && selection) {\n                var view = this.view();\n\n                if (dataItem.uid) {\n                    dataItem = view._updateEventForSelection(dataItem);\n                }\n\n                if (this._shiftKey && selection.start && selection.end) {\n                    var backward = dataItem.end < selection.end;\n\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n\n                    if (backward && view._timeSlotInterval) {\n                        kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                    }\n                } else {\n                    selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                }\n\n                if (\"isDaySlot\" in dataItem) {\n                    selection.isAllDay = dataItem.isDaySlot;\n                } else {\n                    selection.isAllDay = dataItem.isAllDay;\n                }\n\n                if (groupIndex !== null && groupIndex !== undefined) {\n                    selection.groupIndex = groupIndex;\n                }\n\n                selection.index = dataItem.index;\n                if (this._ctrlKey) {\n                    var indexOfEvent = (events && events.length) ? selection.events.indexOf(events[0]) : -1;\n\n                    if (indexOfEvent > -1) {\n                        selection.events.splice(indexOfEvent, 1);\n                    } else {\n                        selection.events = selection.events.concat(events || []);\n                    }\n                } else {\n                        selection.events = events || [];\n                }\n            }\n        },\n\n        options: {\n            name: \"Scheduler\",\n            date: TODAY,\n            editable: true,\n            autoBind: true,\n            snap: true,\n            mobile: false,\n            timezone: \"\",\n            allDaySlot: true,\n            min: new Date(1900, 0, 1),\n            max: new Date(2099, 11, 31),\n            toolbar: null,\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            workDays: null,\n            showWorkHours: false,\n            startTime: TODAY,\n            endTime: TODAY,\n            currentTimeMarker: {\n                updateInterval: 10000,\n                useLocalTimezone: true\n            },\n            footer: {},\n            messages: {\n                today: \"Today\",\n                pdf: \"Export to PDF\",\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                resetSeries: \"Reset Series\",\n                deleteWindowTitle: \"Delete event\",\n                next: \"Next\",\n                previous: \"Previous\",\n                refresh: \"Refresh\",\n                selectView: \"Select view\",\n                ariaSlotLabel: \"Selected from {0:t} to {1:t}\",\n                ariaEventLabel: {\n                    on: \"on\",\n                    at: \"at\",\n                    to: \"to\",\n                    allDay: \"(all day)\",\n                    prefix: \"\"\n                },\n                search: \"Search...\",\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    workWeek: \"Work Week\",\n                    agenda: \"Agenda\",\n                    month: \"Month\",\n                    timeline: \"Timeline\",\n                    timelineWeek: \"Timeline Week\",\n                    timelineWorkWeek: \"Timeline Work Week\",\n                    timelineMonth: \"Timeline Month\",\n                    year: \"Year\"\n                },\n                recurrenceMessages: {\n                    deleteWindowTitle: \"Delete Recurring Item\",\n                    resetSeriesWindowTitle: \"Reset Series\",\n                    deleteWindowOccurrence: \"Delete current occurrence\",\n                    deleteWindowSeries: \"Delete the series\",\n                    editWindowTitle: \"Edit Recurring Item\",\n                    editWindowOccurrence: \"Edit current occurrence\",\n                    editWindowSeries: \"Edit the series\"\n                },\n                editable: {\n                    confirmation: DELETECONFIRM\n                },\n                editor: {\n                    title: \"Title\",\n                    start: \"Start\",\n                    end: \"End\",\n                    allDayEvent: \"All day event\",\n                    description: \"Description\",\n                    repeat: \"Repeat\",\n                    timezone: \"Timezone\",\n                    startTimezone: \"Start timezone\",\n                    endTimezone: \"End timezone\",\n                    separateTimezones: \"Use separate start and end time zones\",\n                    timezoneEditorTitle: \"Timezones\",\n                    timezoneEditorButton: \"Time zone\",\n                    timezoneTitle: \"Time zones\",\n                    noTimezone: \"No timezone\",\n                    editorTitle: \"Event\"\n                }\n            },\n            height: null,\n            width: null,\n            resources: [],\n            group: {\n                resources: [],\n                orientation: \"horizontal\"\n            },\n            views: [],\n            selectable: false\n        },\n\n        events: [\n            REMOVE,\n            EDIT,\n            CANCEL,\n            SAVE,\n            \"add\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"moveStart\",\n            \"move\",\n            \"moveEnd\",\n            \"resizeStart\",\n            \"resize\",\n            \"resizeEnd\",\n            \"navigate\",\n            CHANGE\n        ],\n\n        destroy: function() {\n            var that = this,\n                element;\n\n            Widget.fn.destroy.call(that);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.dataSource.unbind(PROGRESS, that._progressHandler);\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            }\n\n            if (that._resourceRefreshHandler) {\n                for (var idx = 0; idx < that.resources.length; idx++) {\n                    var resourceDS = that.resources[idx].dataSource;\n                    resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                    resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                    resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                }\n            }\n\n            if (that.calendar) {\n                that.calendar.destroy();\n                that.popup.destroy();\n            }\n\n            if (that.view()) {\n                that.view().destroy();\n            }\n\n            if (that._editor) {\n                that._editor.destroy();\n            }\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.toolbar)\n                .add(that.popup);\n\n            element.off(NS);\n\n            clearTimeout(that._moveTimer);\n\n            that._model = null;\n            that.toolbar = null;\n            that.element = null;\n\n            $(window).off(\"resize\" + NS, that._resizeHandler);\n\n            kendo.destroy(that.wrapper);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.options.autoBind && dataSource.fetch) {\n                dataSource.fetch();\n            } else if (isArray(dataSource)) {\n                this.view(this._selectedView);\n            }\n        },\n\n        items: function() {\n            var content = this.wrapper.find(\".k-scheduler-content\");\n            var view = this.view();\n\n            if (view && view.options.name === \"agenda\") {\n                return content.find(\".k-task\");\n            } else {\n                return content.find(\".k-event\")\n                              .add(this.wrapper.find(\".k-scheduler-header-wrap\")\n                                       .find(\".k-scheduler-header-all-day\").siblings());\n            }\n        },\n\n        _movable: function() {\n            var startSlot;\n            var endSlot;\n            var startResources;\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var that = this;\n            var originSlot;\n            var originStartTime;\n            var originalEvent;\n            var distance = 0;\n            var clonedEvents = [];\n            var cachedEvents = [];\n\n            var isMobile = that._isMobile();\n            var movable = that.options.editable && that.options.editable.move !== false;\n            var resizable = that.options.editable && that.options.editable.resize !== false;\n\n            if (movable || (resizable && isMobile)) {\n                that._dragging = false;\n                if (isMobile && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n\n                that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: \".k-event\",\n                    ignore: \".k-resize-handle\",\n                    holdToDrag: isMobile,\n                    autoScroll: true\n                });\n\n                if (movable) {\n                    that._moveDraggable.bind(\"dragstart\", function(e) {\n                        var view = that.view();\n                        var eventElement = e.currentTarget;\n                        var isTouch = that._isTouch(e);\n                        that._dragging = true;\n\n                        if (!view.options.editable || view.options.editable.move === false) {\n                            that._dragging = false;\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (isTouch && !eventElement.hasClass(\"k-event-active\")) {\n                            that._dragging = false;\n                            that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                            e.preventDefault();\n                            return;\n                        }\n\n                        event = that.occurrenceByUid(eventElement.attr(kendo.attr(\"uid\")));\n\n                        clonedEvent = event.clone();\n                        originalEvent = event.clone();\n\n                        clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n\n                        clonedEvent.inverseColor = that._isInverseColor(eventElement);\n\n                        clonedEvents = [];\n                        if (that._selection) {\n                            var events = that._selection.events;\n\n                            for (var i = 0; i < events.length; i++) {\n                                var evtClone = that.occurrenceByUid(events[i]).clone();\n                                var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n\n                                evtClone.update(view._eventOptionsForMove(evtClone));\n\n                                if (evtCloneElement.length) {\n                                    evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                }\n\n                                clonedEvents.push(evtClone);\n                            }\n                        } else {\n                            clonedEvents.push(clonedEvent);\n                        }\n\n                        startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        startResources = view._resourceBySlot(startSlot);\n\n                        originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n\n                        endSlot = startSlot;\n\n                        originSlot = startSlot;\n\n                        if (!startSlot || that.trigger(\"moveStart\", { event: event })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"drag\", function(e) {\n                        var view = that.view();\n                        var slot = view._slotByPosition(e.x.location, e.y.location);\n                        var distance;\n                        var range;\n                        var i;\n\n                        if (!slot) {\n                            return;\n                        }\n\n                        endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n\n                        if (slot.isDaySlot !== startSlot.isDaySlot) {\n\n                            if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                var slotIndex = $(startSlot.element).index();\n\n                                var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n\n                                startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n\n                                startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n\n                                cachedEvents = clonedEvents.map(function(event) { return event.clone(); });\n\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                        clonedEvents[i].isAllDay = slot.isDaySlot;\n\n                                        clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                        clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n\n                                        if (!slot.isDaySlot) {\n                                            kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                            kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                        }\n                                    }\n                                }\n                            } else {\n                                startSlot = $.extend(true, { }, originSlot);\n                                startTime = originStartTime;\n\n                                clonedEvents = cachedEvents;\n                            }\n                        }\n\n                        distance = endTime - startTime;\n\n                        for (i = 0; i < clonedEvents.length; i++) {\n                            view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                        }\n\n                        range = moveEventRange(clonedEvent, distance);\n\n                        if (!that.trigger(\"move\", {\n                            event: event,\n                            slot: { element: slot.element, start: slot.startDate(), end: slot.endDate(), isDaySlot: slot.isDaySlot },\n                            resources: view._resourceBySlot(slot),\n                            start: range.start,\n                            end: range.end\n                        })) {\n                            endSlot = slot;\n                        } else {\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                        }\n                    })\n                    .bind(\"dragend\", function(e) {\n                        that.view()._removeMoveHint();\n                        var distance = endTime - startTime;\n                        var range = moveEventRange(clonedEvent, distance);\n                        var start = range.start;\n                        var end = range.end;\n                        that._dragging = false;\n\n                        var endResources = that.view()._resourceBySlot(endSlot);\n\n                        var prevented = that.trigger(\"moveEnd\", {\n                            event: event,\n                            slot: { element: endSlot.element, start: endSlot.startDate(), end: endSlot.endDate() },\n                            start: start,\n                            end: end,\n                            resources: endResources\n                        });\n\n                        if (!prevented && (event.start.getTime() !== start.getTime() ||\n                            event.end.getTime() !== end.getTime() ||\n                            originSlot.isDaySlot !== endSlot.isDaySlot ||\n                            kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n\n                            that._isMultiDrag = clonedEvents.length > 1;\n\n                            for (var i = 0; i < clonedEvents.length; i++) {\n                                var evt = clonedEvents[i];\n\n                                range = moveEventRange(evt, distance);\n\n                                var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                var eventOptions = $.extend(\n                                    {\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    },\n                                    updatedEventOptions,\n                                    endResources\n                                );\n\n                                that._updateEvent(null, evt, eventOptions);\n                            }\n\n                            if (that._isMultiDrag) {\n                                that.dataSource.sync();\n                                that._isMultiDrag = false;\n                            }\n                        }\n\n                        e.currentTarget.removeClass(\"k-event-active\");\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    })\n                    .bind(\"dragcancel\", function() {\n                        that.view()._removeMoveHint();\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    });\n                }\n\n                that._moveDraggable.bind(\"hold\", function(e) {\n                    if (that._isTouch(e)) {\n                        that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                        if (that.options.selectable) {\n                            that._createSelection(e.currentTarget);\n                        }\n                        e.currentTarget.addClass(\"k-event-active\");\n                    }\n                });\n            }\n        },\n\n        _resizable: function() {\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var slot;\n            var that = this;\n            var distance = 0;\n\n            function direction(handle) {\n                var directions = {\n                    \"k-resize-e\": \"east\",\n                    \"k-resize-w\": \"west\",\n                    \"k-resize-n\": \"north\",\n                    \"k-resize-s\": \"south\"\n                };\n\n                for (var key in directions) {\n                    if (handle.hasClass(key)) {\n                        return directions[key];\n                    }\n                }\n            }\n\n            if (that._isMobile() && kendo.support.mobileOS.android) {\n                distance = 5;\n            }\n\n            that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                distance: distance,\n                filter: \".k-resize-handle\",\n                autoScroll: true,\n                dragstart: function(e) {\n                    var dragHandle = $(e.currentTarget);\n\n                    var eventElement = dragHandle.closest(\".k-event\");\n\n                    var uid = eventElement.attr(kendo.attr(\"uid\"));\n\n                    var view = that.view();\n\n                    that._dragging = true;\n                    event = that.occurrenceByUid(uid);\n\n                    clonedEvent = event.clone();\n\n                    view._updateEventForResize(clonedEvent);\n\n                    slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n\n                    if (that.trigger(\"resizeStart\", { event: event })) {\n                        e.preventDefault();\n                    }\n\n                    startTime = kendo.date.toUtcTime(clonedEvent.start);\n\n                    endTime = kendo.date.toUtcTime(clonedEvent.end);\n                },\n                drag: function(e) {\n                    if (!slot) {\n                        return;\n                    }\n\n                    var dragHandle = $(e.currentTarget);\n\n                    var dir = direction(dragHandle);\n\n                    var view = that.view();\n\n                    var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n\n                    if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                        return;\n                    }\n\n                    slot = currentSlot;\n\n                    var originalStart = startTime;\n\n                    var originalEnd = endTime;\n\n                    if (dir == \"south\") {\n                        if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                    } else if (dir == \"north\") {\n                        if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: kendo.timezone.toLocalDate(startTime),\n                        end: kendo.timezone.toLocalDate(endTime),\n                        resources: view._resourceBySlot(slot)\n                    })) {\n                        view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                    } else {\n                        startTime = originalStart;\n                        endTime = originalEnd;\n                    }\n                },\n                dragend: function(e) {\n                    var dragHandle = $(e.currentTarget);\n                    var start = new Date(clonedEvent.start.getTime());\n                    var end = new Date(clonedEvent.end.getTime());\n                    var dir = direction(dragHandle);\n\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    if (dir == \"south\") {\n                        end = kendo.timezone.toLocalDate(endTime);\n                    } else if (dir == \"north\") {\n                        start = kendo.timezone.toLocalDate(startTime);\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot) {\n                            end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                        } else {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot) {\n                            start = new Date(kendo.timezone.toLocalDate(startTime));\n                            start.setHours(0);\n                            start.setMinutes(0);\n                        } else {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        }\n                    }\n\n                    var prevented = that.trigger(\"resizeEnd\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: start,\n                        end: end,\n                        resources: that.view()._resourceBySlot(slot)\n                    });\n\n                    if (!prevented && end.getTime() >= start.getTime()) {\n                        if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                            that.view()._updateEventForResize(event);\n                            that._updateEvent(dir, event, { start: start, end: end });\n                        }\n                    }\n\n                    slot = null;\n                    event = null;\n                },\n                dragcancel: function() {\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    slot = null;\n                    event = null;\n                }\n            });\n        },\n\n        _updateEvent: function(dir, event, eventInfo) {\n            var that = this;\n\n            var updateEvent = function(event, callback) {\n                var start;\n\n                try {\n                    that._preventRefresh = true;\n                    event.update(eventInfo);\n                    that._convertDates(event);\n                    start = event.start;\n\n                    if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                        event.set(\"isAllDay\", true);\n                    }\n                } finally {\n                    that._preventRefresh = false;\n                }\n\n                if (!that.trigger(SAVE, { event: event })) {\n                    if (callback) {\n                        callback();\n                    }\n\n                    if (!that._isMultiDrag) {\n                        that.dataSource.sync();\n                    }\n                }\n            };\n\n            var recurrenceHead = function(event) {\n                if (event.recurrenceRule) {\n                    return that.dataSource.getByUid(event.uid);\n                } else {\n                    return that.dataSource.get(event.recurrenceId);\n                }\n            };\n\n            var updateSeries = function() {\n                var head = recurrenceHead(event);\n\n                if (dir == \"south\" || dir == \"north\") {\n                    if (eventInfo.start) {\n                        var start = kendo.date.getDate(head.start);\n                        kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                        eventInfo.start = start;\n                    }\n                    if (eventInfo.end) {\n                        var end = kendo.date.getDate(head.end);\n                        kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                        eventInfo.end = end;\n                    }\n                }\n\n                that.dataSource._removeExceptions(head);\n\n                updateEvent(head);\n            };\n\n            var updateOccurrence = function() {\n                var head = recurrenceHead(event);\n                var eventUid;\n\n                var callback = function() {\n                    that._convertDates(head);\n\n                    if (that._selection) {\n                        that._selection.events.push(eventUid);\n                    }\n                };\n\n                var exception = head.toOccurrence({ start: event.start, end: event.end });\n\n                eventUid = exception.uid;\n\n                updateEvent(that.dataSource.add(exception), callback);\n            };\n\n            if (event.recurrenceRule || event.isOccurrence()) {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                that._showRecurringDialog(event, updateOccurrence, updateSeries,{\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            } else {\n                updateEvent(that.dataSource.getByUid(event.uid));\n            }\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n\n            return this.dataSource.getByUid(container.attr(kendo.attr(\"uid\")));\n        },\n\n        showDialog: function(options) {\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            this._editor.showDialog(options);\n        },\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        _confirmation: function(callback, model, isResetSeries) {\n            var editable = this.options.editable;\n\n            if (editable === true || editable.confirmation !== false) {\n                var messages = this.options.messages;\n                var title = messages.deleteWindowTitle;\n                var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n\n                if (this._isEditorOpened() && model.isRecurring()) {\n                    var recurrenceMessages = this.options.messages.recurrenceMessages;\n                    title = recurrenceMessages.deleteWindowTitle;\n\n                    if (model.isException() || model.isNew()) {\n                        text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                    } else {\n                        text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                    }\n\n                    if (isResetSeries) {\n                        title = recurrenceMessages.resetSeriesWindowTitle;\n                        text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                    }\n                }\n\n                var buttons = [\n                    { name: \"destroy\", text: isResetSeries ? messages.resetSeries : messages.destroy, click: function() { callback(); } }\n                ];\n\n                if (!(this._isMobile() && kendo.Pane)) {\n                    buttons.push({ name: \"canceledit\", text: messages.cancel, click: function() { callback(true); } });\n                }\n\n                this._unbindResize();\n\n                this.showDialog({\n                    model: model,\n                    text: text,\n                    title: title,\n                    buttons: buttons\n                });\n\n                this._bindResize();\n            } else {\n                callback();\n            }\n        },\n\n        addEvent: function(eventInfo) {\n            var editable = this._editor.editable;\n            var dataSource = this.dataSource;\n            var event;\n\n            eventInfo = eventInfo || {};\n\n            var prevented = this.trigger(\"add\", { event: eventInfo });\n\n            if (!prevented && ((editable && editable.end()) || !editable)) {\n                this.cancelEvent();\n\n                if (eventInfo && eventInfo.toJSON) {\n                    eventInfo = eventInfo.toJSON();\n                }\n\n                event = dataSource.add(eventInfo);\n\n                if (event) {\n                    this.cancelEvent();\n                    this._editEvent(event);\n                }\n            }\n       },\n\n       saveEvent: function() {\n            var that = this;\n            var editor = that._editor;\n            var dataSource = that.dataSource;\n\n            if (!editor) {\n                return;\n            }\n\n            var editable = editor.editable;\n            var container = editor.container;\n            var model = that._modelForContainer(container);\n            var events, i, event;\n\n            if (container && editable && editable.end() &&\n                !that.trigger(SAVE, { container: container, event: model } )) {\n\n                if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                    events = dataSource.data();\n\n                    for (i = events.length - 1; i >= 0; i -= 1) {\n                        event = events[i];\n                        if (event && event.recurrenceId === model.id) {\n                            dataSource.remove(event);\n                        }\n                    }\n\n                    model.set(\"recurrenceException\", \"\");\n                }\n\n                if (!model.dirty && !model.isOccurrence()) {\n                    that._convertDates(model, \"remove\");\n                }\n\n                dataSource.sync();\n            }\n        },\n\n        cancelEvent: function() {\n            var editor = this._editor;\n            var container = editor.container;\n            var model;\n\n            if (container) {\n                model = this._modelForContainer(container);\n\n                if (model && model.isOccurrence()) {\n                    this._convertDates(model, \"remove\");\n                    this._convertDates(this.dataSource.get(model.recurrenceId), \"remove\");\n                }\n\n                this.dataSource.cancelChanges(model);\n\n                //TODO: handle the cancel in UI\n\n                editor.close();\n            }\n        },\n\n        editEvent: function(uid) {\n            var model = typeof uid == \"string\" ? this.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            this.cancelEvent();\n\n            if (model.isRecurring()) {\n                this._editRecurringDialog(model);\n            } else {\n                this._editEvent(model);\n            }\n        },\n\n        _editEvent: function(model) {\n            this._preventRefresh = true;\n            this._unbindResize();\n\n            this._createPopupEditor(model);\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n            this._bindResize();\n        },\n\n        _editRecurringDialog: function(model) {\n            var that = this;\n\n            var editOccurrence = function() {\n                if (model.isException()) {\n                    that._editEvent(model);\n                } else {\n                    that.addEvent(model);\n                }\n            };\n\n            var editSeries = function() {\n                if (model.recurrenceId) {\n                    model = that.dataSource.get(model.recurrenceId);\n                }\n\n                that._editEvent(model);\n            };\n\n            var recurrenceMessages = that.options.messages.recurrenceMessages;\n            that._showRecurringDialog(model, editOccurrence, editSeries, {\n                title: recurrenceMessages.editWindowTitle,\n                text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                occurrenceText: recurrenceMessages.editWindowOccurrence,\n                seriesText: recurrenceMessages.editWindowSeries\n            });\n         },\n\n         _showRecurringDialog: function(model, editOccurrence, editSeries, messages) {\n             var editable = this.options.editable;\n             var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n             if (editRecurringMode === \"occurrence\" || this._isMultiDrag) {\n                 editOccurrence();\n             } else if (editRecurringMode === \"series\") {\n                 editSeries();\n             } else {\n                 this._unbindResize();\n\n                 this.showDialog({\n                     model: model,\n                     title: messages.title,\n                     text: messages.text,\n                     buttons: [\n                         { text: messages.occurrenceText, click: editOccurrence },\n                         { text: messages.seriesText, click: editSeries }\n                     ]\n                 });\n\n                 this._bindResize();\n             }\n        },\n\n        _createButton: function(command) {\n            var template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                options = { className: \"k-scheduler-\" + (commandName || \"\").replace(/\\s/g, \"\"), text: commandName, attr: \"\" };\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                if (command.className) {\n                    command.className += \" \" + options.className;\n                }\n\n                if (commandName === \"edit\" && isPlainObject(command.text)) {\n                    command = extend(true, {}, command);\n                    command.text = command.text.edit;\n                }\n\n                options = extend(true, options, defaultCommands[commandName], command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName]);\n            }\n\n            if (!options.className) {\n                options.className = \"k-button-solid-base\";\n            } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                options.className += \" k-button-solid-base\";\n            }\n\n            return kendo.template(template)(options);\n        },\n\n        _convertDates: function(model, method) {\n            var timezone = this.dataSource.reader.timezone;\n            var startTimezone = model.startTimezone;\n            var endTimezone = model.endTimezone;\n            var start = model.start;\n            var end = model.start;\n\n            method = method || \"apply\";\n            startTimezone = startTimezone || endTimezone;\n            endTimezone = endTimezone || startTimezone;\n\n            if (startTimezone) {\n                if (timezone) {\n                    if (method === \"apply\") {\n                        start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                        end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                    } else {\n                        start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                        end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                    }\n                } else {\n                    start = kendo.timezone[method](model.start, startTimezone);\n                    end = kendo.timezone[method](model.end, endTimezone);\n                }\n\n                model._set(\"start\", start);\n                model._set(\"end\", end);\n            }\n        },\n\n        _createEditor: function() {\n            var that = this;\n\n            var editor;\n\n            if (this._isMobile() && kendo.Pane) {\n                editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources,\n                    createButton: this._createButton.bind(this)\n                }));\n            } else {\n                editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    createButton: this._createButton.bind(this),\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources\n                }));\n            }\n\n            editor.bind(\"cancel\", function(e) {\n                if (that.trigger(\"cancel\", { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                    return;\n                }\n                that._preventRefresh = false;\n                that.cancelEvent();\n\n                if (that._attemptRefresh) {\n                    that.refresh();\n                }\n\n                that.focus();\n            });\n\n            editor.bind(\"edit\", function(e) {\n                if (that.trigger(EDIT, { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                }\n            });\n\n            editor.bind(\"save\", function() {\n                that._preventRefresh = false;\n                that.saveEvent();\n            });\n\n            editor.bind(\"remove\", function(e) {\n                that._preventRefresh = false;\n                that.removeEvent(e.model);\n            });\n\n            editor.bind(\"resetSeries\", function(e) {\n                that._confirmation(function(cancel) {\n                    that._preventRefresh = false;\n                    if (!cancel) {\n                        that.dataSource._removeExceptions(e.model);\n                        that.saveEvent();\n                    }\n                }, e.model, true);\n            });\n        },\n\n        _createPopupEditor: function(model) {\n            var editor = this._editor;\n\n            if (!model.isNew() || model.isOccurrence()) {\n                if (model.isOccurrence()) {\n                    this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                }\n                this._convertDates(model);\n            }\n\n            this.editable = editor.editEvent(model);\n        },\n\n        removeEvent: function(uid) {\n            var that = this,\n                model = typeof uid == \"string\" ? that.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            if (model.isRecurring()) {\n                that._deleteRecurringDialog(model);\n            } else {\n                that._confirmation(function(cancel) {\n                    if (!cancel) {\n                        that._removeEvent(model);\n                    }\n                }, model);\n            }\n        },\n\n        occurrenceByUid: function(uid) {\n            var occurrence = this.dataSource.getByUid(uid);\n            if (!occurrence) {\n                occurrence = getOccurrenceByUid(this._data, uid);\n            }\n\n            return occurrence;\n        },\n\n        occurrencesInRange: function(start, end) {\n            return new kendo.data.Query(this._data).filter({\n                logic: \"or\",\n                filters: [\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"gte\", value: start },\n                            { field: \"end\", operator: \"gte\", value: start },\n                            { field: \"start\", operator: \"lt\", value: end }\n                        ]\n                    },\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"lte\", value: start },\n                            { field: \"end\", operator: \"gt\", value: start }\n                        ]\n                    }\n                ]\n            }).toArray();\n        },\n\n        _removeEvent: function(model) {\n            if (!this.trigger(REMOVE, { event: model })) {\n                if (this.dataSource.remove(model)) {\n                    this.dataSource.sync();\n                }\n            }\n        },\n\n        _deleteRecurringDialog: function(model) {\n            var that = this;\n            var currentModel = model;\n            var editable = that.options.editable;\n            var deleteOccurrence;\n            var deleteSeries;\n            var createException;\n            var deleteOccurrenceConfirmation;\n            var deleteSeriesConfirmation;\n            var createExceptionConfirmation;\n            var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n            deleteOccurrence = function() {\n                var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                var head = that.dataSource.get(occurrence.recurrenceId);\n\n                that._convertDates(head);\n                that._removeEvent(occurrence);\n            };\n\n            deleteSeries = function() {\n                if (currentModel.recurrenceId) {\n                    currentModel = that.dataSource.get(currentModel.recurrenceId);\n                }\n\n                that._removeEvent(currentModel);\n            };\n\n            createException = function() {\n                that.dataSource.remove(currentModel);\n                that.dataSource.sync();\n            };\n\n            if (editRecurringMode != \"dialog\" || that._isEditorOpened()) {\n                deleteOccurrenceConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteOccurrence();\n                        }\n                    }, currentModel);\n                };\n\n                deleteSeriesConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteSeries();\n                        }\n                    }, currentModel);\n                };\n\n                createExceptionConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            createException();\n                        }\n                    }, currentModel);\n                };\n            }\n\n            var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n            var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n            var exeptionCallback = createExceptionConfirmation || createException;\n\n            if (that._isEditorOpened()) {\n                if (model.isException()) {\n                    occurrenceCallback();\n                } else if (model.isNew()) {\n                    exeptionCallback();\n                } else {\n                    seriesCallback();\n                }\n            } else {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                    title: recurrenceMessages.deleteWindowTitle,\n                    text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                    occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                    seriesText: recurrenceMessages.deleteWindowSeries\n                });\n            }\n        },\n\n        _isEditorOpened: function() {\n            return !!this._editor.container;\n        },\n\n        _unbindView: function(view) {\n            var that = this;\n            that.angular(\"cleanup\", function() {\n                return { elements: that.items() };\n            });\n\n            view.destroy();\n        },\n\n        _bindView: function(view) {\n            var that = this;\n\n            if (that.options.editable) {\n                if (that._viewRemoveHandler) {\n                    view.unbind(REMOVE, that._viewRemoveHandler);\n                }\n\n                that._viewRemoveHandler = function(e) {\n                    that.removeEvent(e.uid);\n                };\n\n                view.bind(REMOVE, that._viewRemoveHandler);\n\n                if (that._viewAddHandler) {\n                    view.unbind(ADD, that._viewAddHandler);\n                }\n\n                that._viewAddHandler = function(e) {\n                    that.addEvent(e.eventInfo);\n                };\n\n                view.bind(ADD, this._viewAddHandler);\n\n                if (that._viewEditHandler) {\n                    view.unbind(EDIT, that._viewEditHandler);\n                }\n\n                that._viewEditHandler = function(e) {\n                    that.editEvent(e.uid);\n                };\n\n                view.bind(EDIT, this._viewEditHandler);\n            }\n\n            if (that._viewNavigateHandler) {\n                view.unbind(\"navigate\", that._viewNavigateHandler);\n            }\n\n            that._viewNavigateHandler = function(e) {\n                if (e.action) {\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: e.action, date: e.date })) {\n                        that.date(e.date);\n                    }\n                } else if (e.view) {\n                    var switchWorkDay = \"isWorkDay\" in e;\n                    var action = switchWorkDay ? \"changeWorkDay\" : \"changeView\";\n\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: action, date: e.date })) {\n                        if (switchWorkDay) {\n                            that._workDayMode = e.isWorkDay;\n                        }\n\n                        that._selectView(e.view);\n                        that.date(e.date);\n                    }\n                }\n            };\n\n            view.bind(\"navigate\", that._viewNavigateHandler);\n\n            if (that._viewActivateHandler) {\n                view.unbind(\"activate\", that._viewActivateHandler);\n            }\n\n            that._viewActivateHandler = function() {\n                var view = this;\n                if (that._selection) {\n                    view.constrainSelection(that._selection);\n\n                    if ($(document.activeElement).closest(\".k-scheduler-toolbar\").length === 0) {\n                        if (document.activeElement !== that.wrapper[0]) {\n                            that.element.focus();\n                        } else {\n                            that._select();\n                        }\n                    }\n\n                    that._adjustSelectedDate();\n                }\n            };\n\n            view.bind(\"activate\", that._viewActivateHandler);\n        },\n\n        _selectView: function(name) {\n            var that = this;\n\n            if (name && that.views[name]) {\n\n                if (that._selectedView) {\n                    that._unbindView(that._selectedView);\n                }\n\n                that._selectedView = that._renderView(name);\n                that._selectedViewName = name;\n\n                if (that._viewsCount > 1 && !that._isMobile()) {\n                    var viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                    var viewButtons = that.toolbar.find(\".k-scheduler-views > .k-button\");\n\n                    if ( that.toolbar.find(\".k-views-dropdown\").length === 0 ) {\n                        that.toolbar.find(\".k-scheduler-views-wrapper\").prepend(VIEWS_DROPDOWN_TEMPLATE({ views: that.views, view: name, ns: kendo.ns, label: that.options.messages.selectView }));\n                        viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                    }\n\n                    viewsDropdown.val(name);\n\n                    viewButtons.removeClass(\"k-selected\");\n                    viewButtons.filter(\".k-view-\" + name.replace(/\\./g, \"\\\\.\").toLowerCase()).addClass(\"k-selected\");\n                } else {\n                    var viewSelect = that.toolbar.find(\".k-scheduler-mobile-views\");\n\n                    viewSelect.find(\"[value=\" + name.replace(/\\./g, \"\\\\.\") + \"]\")\n                        .prop(\"selected\", \"selected\");\n                }\n            }\n        },\n\n        view: function(name) {\n            var that = this;\n\n            if (name) {\n                that._selectView(name);\n                that.rebind();\n\n                return;\n            }\n\n            return that._selectedView;\n        },\n\n        viewName: function() {\n            return this.view().name;\n        },\n\n        _renderView: function(name) {\n            var view = this._initializeView(name);\n\n            this._bindView(view);\n\n            if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                view.content.css(\"-ms-touch-action\", \"pinch-zoom\");\n                view.content.css(\"touch-action\", \"pinch-zoom\");\n            }\n\n            this._model.set(\"formattedDate\", view.dateForTitle());\n            this._model.set(\"formattedShortDate\", view.shortDateForTitle());\n            this._model.set(\"formattedMobileDate\", view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n            this._model.set(\"formattedYear\", kendo.format(\"{0:yyyy}\", view.startDate()));\n\n            return view;\n        },\n\n        resize: function(force) {\n            var size = this.getSize();\n            var currentSize = this._size;\n            var view = this.view();\n\n            if (!view || !view.groups) {\n                return;\n            }\n\n            if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                this.refresh({ action: \"resize\" });\n                this._size = size;\n            }\n        },\n\n        _adjustSelectedDate: function() {\n            var date = this._model.selectedDate,\n                selection = this._selection,\n                start = selection.start;\n\n            if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var isSettings = isPlainObject(view),\n                    overrideOptions = {},\n                    type = view.type;\n\n                if (typeof type === STRING) {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (isSettings && view.workDays && view.workDays.length) {\n                    overrideOptions.workDays = view.workDays;\n                }\n\n                if (type) {\n                    view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                        resources: this.resources,\n                        date: this.date(),\n                        startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                        endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                        showWorkHours: this._workDayMode\n                    }),overrideOptions));\n\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var defaultView;\n            var selected;\n            var isSettings;\n            var name;\n            var type;\n            var idx;\n            var length;\n\n            this.views = {};\n            this._viewsCount = 0;\n\n            for (idx = 0, length = views.length; idx < length; idx++) {\n                var hasType = false;\n\n                view = views[idx];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings) {\n                    type = name = view.type ? view.type : view;\n                    if (typeof type !== STRING) {\n                        name = view.name || view.title;\n                        hasType = true;\n                    }\n                } else {\n                    type = name = view;\n                }\n\n                defaultView = defaultViews[name];\n\n                if (defaultView && !hasType) {\n\n                    view.type = defaultView.type;\n                    defaultView.title = this.options.messages.views[name];\n                    if (defaultView.type === \"day\") {\n                        defaultView.messages = { allDay: this.options.messages.allDay };\n                    } else if (defaultView.type === \"agenda\") {\n                        defaultView.messages = {\n                            event: this.options.messages.event,\n                            date: this.options.messages.date,\n                            time: this.options.messages.time\n                        };\n                    }\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n                    this._viewsCount++;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected; // toolbar is not rendered yet\n            }\n        },\n\n        rebind: function() {\n            var that = this,\n                resources = that.resources,\n                resourceFetchArray = [];\n\n            if (that._preventRebind) {\n                that._preventRebind = false;\n                return;\n            }\n\n            if (that.options.autoBind === false && resources && resources.length > 0) {\n                resources.forEach(function(resource) {\n                    if (resource.dataSource.data().length === 0) {\n                        that._preventRebind = true;\n                        resourceFetchArray.push(resource.dataSource.fetch());\n                    }\n                });\n\n                $.when.apply(null, resourceFetchArray).then(function() {\n                    that.dataSource.fetch();\n                    that._preventRebind = false;\n                });\n            } else {\n                that.dataSource.fetch();\n            }\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n            } else if (dataSource instanceof SchedulerDataSource) {\n                options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : \"\";\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource\n                    .unbind(CHANGE, that._refreshHandler)\n                    .unbind(PROGRESS, that._progressHandler)\n                    .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.SchedulerDataSource.create(dataSource)\n                .bind(CHANGE, that._refreshHandler)\n                .bind(PROGRESS, that._progressHandler)\n                .bind(ERROR, that._errorHandler);\n\n            that.options.dataSource = that.dataSource;\n        },\n\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _progress: function(toggle) {\n            var element = this.element.find(\".k-scheduler-content\");\n            kendo.ui.progress(element, toggle);\n        },\n\n        _resources: function() {\n            var that = this;\n            var resources = that.options.resources;\n            var resourcePromises = [];\n\n            for (var idx = 0; idx < resources.length; idx++) {\n                var resource = resources[idx];\n                var field = resource.field;\n                var name = resource.name || field;\n                var dataSource = resource.dataSource;\n\n                if (!field || !dataSource) {\n                    throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                }\n\n                that.resources.push({\n                    field: field,\n                    name: name,\n                    title: resource.title || field,\n                    dataTextField: resource.dataTextField || \"text\",\n                    dataValueField: resource.dataValueField || \"value\",\n                    dataColorField: resource.dataColorField || \"color\",\n                    dataParentValueField: resource.dataParentValueField || \"parentValue\",\n                    valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                    multiple: resource.multiple || false,\n                    dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                });\n            }\n\n            if (!that.options.autoBind) {\n                that._selectView(that._selectedViewName);\n            } else {\n                $.when.apply(null, resourcePromises)\n                      .then(function() {\n                            that.view(that._selectedViewName);\n                        });\n            }\n        },\n\n        _resourceDataSource: function(resourceDS, groupName, promises) {\n            var that = this;\n            var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n            var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n\n            if (that.options.autoBind) {\n                promises.push(dataSourceInstance.fetch(function() {\n                    // 'this' is the DataSource instance not the Scheduler\n                    that._bindResourceEvents(this, groupName);\n                }));\n            } else {\n                that._bindResourceEvents(dataSourceInstance, groupName);\n            }\n\n            return dataSourceInstance;\n        },\n\n        _bindResourceEvents: function(resourceDS, groupName) {\n            var that = this;\n            var isGrouped = that.options.group && that.options.group.resources.length;\n            var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n\n            if (!that._resourceRefreshHandler && isResourceGrouped) {\n                that._resourceRefreshHandler = that._refreshResource.bind(that);\n                that._resourceErrorHandler = that._error.bind(that);\n            }\n\n            if (isResourceGrouped) {\n                resourceDS.bind(CHANGE, that._resourceRefreshHandler)\n                    .bind(ERROR, that._resourceErrorHandler);\n            }\n        },\n\n        _refreshResource: function() {\n            var that = this;\n            var preventRefresh = (that._editor && that._editor.editable) || that._preventRefresh;\n\n            if (!preventRefresh) {\n                that.view(that._selectedViewName);\n            }\n        },\n\n        _initModel: function() {\n            var that = this;\n            that._model = kendo.observable({\n               selectedDate: new Date(this.options.date),\n               formattedDate: \"\",\n               formattedShortDate: \"\"\n           });\n\n           that._model.bind(CHANGE, function(e) {\n                if (e.field === \"selectedDate\") {\n                    that.view(that._selectedViewName);\n                }\n           });\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var options = that.options;\n            var height = options.height;\n            var width = options.width;\n\n            that.wrapper = that.element.addClass(\"k-widget k-scheduler k-floatwrap\");\n\n            if (that._isMobile()) {\n               that.wrapper.addClass(\"k-scheduler-mobile\");\n            }\n\n            if (height) {\n                that.wrapper.height(height);\n            }\n\n            if (width) {\n                that.wrapper.width(width);\n            }\n        },\n\n        date: function(value) {\n            if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                this._model.set(\"selectedDate\", value);\n            }\n            return getDate(this._model.get(\"selectedDate\"));\n        },\n\n        _toolbar: function() {\n            var that = this;\n            var options = that.options;\n            var commands = [];\n\n            if (options.toolbar) {\n                commands = Array.isArray(options.toolbar) ? options.toolbar : [options.toolbar];\n            }\n\n            var template = this._isMobile() ? MOBILETOOLBARTEMPLATE : TOOLBARTEMPLATE;\n\n            var toolbar = $(template({\n                    messages: options.messages,\n                    pdf: $.grep(commands, function(item) {\n                            return item == \"pdf\" || item.name == \"pdf\";\n                        }).length > 0,\n                    search: $.grep(commands, function(item) {\n                        return item == \"search\" || item.name == \"search\";\n                    }).length > 0,\n                    ns: kendo.ns,\n                    view: that._selectedViewName,\n                    views: that.views,\n                    viewsCount: that._viewsCount,\n                    editable: that.options.editable\n                }));\n\n            that.wrapper.append(toolbar);\n            that.toolbar = toolbar;\n\n            kendo.bind(that.toolbar, that._model);\n\n            toolbar.on(CLICK + NS, \".k-pdf\", function(e) {\n                e.preventDefault();\n                that.saveAsPDF();\n            });\n\n            toolbar.on(\"input\" + NS, \".k-scheduler-search-input\", kendo.throttle(function(e) {\n                that.dataSource.filter({\n                    logic: \"or\",\n                    filters: [\n                        { field: \"title\", operator: \"contains\", value: e.target.value },\n                        { field: \"description\", operator: \"contains\", value: e.target.value }\n                    ]\n                });\n            }, 250));\n\n            toolbar.on(CLICK + NS, \".k-create-event\", function(e) {\n                e.preventDefault();\n                that.addEvent();\n            });\n\n            toolbar.on(CLICK + NS, \".k-nav-calendar\", function(e) {\n                e.preventDefault();\n                that._showCalendar(e.target);\n            });\n\n            toolbar.on(CLICK + NS, \".k-scheduler-navigation > .k-button\", function(e) {\n                var button = $(this);\n                var date = new Date(that.date());\n                var action = \"\";\n                var currentDate = new Date();\n                var timezone = that.options.timezone;\n\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                button.addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).trigger(\"focus\").attr(\"tabindex\", -1);\n\n                if ($(e.target).is(\"input\")) {\n                    return;\n                }\n\n                e.preventDefault();\n\n                if (button.hasClass(\"k-nav-today\")) {\n                    action = \"today\";\n                    if (timezone) {\n                        var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                        date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                    } else {\n                        date = currentDate;\n                    }\n                } else if (button.hasClass(\"k-nav-next\")) {\n                    action = \"next\";\n                    date = that.view().nextDate();\n                } else if (button.hasClass(\"k-nav-prev\")) {\n                    action = \"previous\";\n                    date = that.view().previousDate();\n                }\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: action, date: date })) {\n                    that.date(date);\n                }\n            });\n\n            toolbar.on(CLICK + NS, \".k-nav-current\", function(e) {\n                e.preventDefault();\n\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(this).addClass(FOCUSEDSTATE);\n\n                if (!that._isMobile()) {\n                    that._showCalendar();\n                }\n            });\n\n            toolbar.on(CLICK + NS, \".k-scheduler-views > .k-button, .k-scheduler-refresh\", function(e) {\n                e.preventDefault();\n\n                var name = $(this).attr(kendo.attr(\"name\"));\n\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(this).addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).trigger(\"focus\").attr(\"tabindex\", -1);\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            });\n\n            toolbar.on(CHANGE + NS, \".k-views-dropdown, .k-scheduler-mobile-views\", function() {\n                var name = this.value;\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            });\n        },\n\n        _showCalendar: function(targetElm) {\n            var that = this,\n                target = targetElm || that.toolbar.find(\".k-nav-current\"),\n                html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n\n            if (!that.popup) {\n                that.popup = new Popup(html, {\n                    anchor: target,\n                    activate: function() {\n                        if (that.popup && that.calendar) {\n                            that.popup._toggleResize(false);\n                            that.calendar.element.find(\"table\").trigger(\"focus\");\n                            that.popup._toggleResize(true);\n                        }\n                    },\n                    open: function() {\n                        if (!that.calendar) {\n                            that.calendar = new Calendar(this.element.find(\".k-scheduler-calendar\"),\n                            {\n                                change: function() {\n                                    var date = this.value();\n                                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"changeDate\", date: date })) {\n                                        that.date(date);\n                                        that.popup.close();\n                                    }\n\n                                    if (!that._isMobile()) {\n                                        that._selectedView.element.trigger(\"focus\");\n                                        that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                                    }\n                                },\n                                min: that.options.min,\n                                max: that.options.max\n                            });\n                        }\n                        that.calendar.element.on(\"keydown\" + NS, function(e) {\n                            if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                that.popup.close();\n                                that._selectedView.element.trigger(\"focus\");\n                                that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                            }\n                        });\n\n                        that.calendar.setOptions({\n                            start: that._selectedViewName === \"year\" ? \"decade\" : \"month\",\n                            depth: that._selectedViewName === \"year\" ? \"decade\" : \"month\"\n                        });\n\n                        that.calendar.value(that.date());\n                    },\n                    copyAnchorStyles: false\n                });\n            }\n\n            that.popup.open();\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var view = this.view();\n            var preventRefresh = (e && e.action === \"itemchange\" && (this._editor.editable || this._preventRefresh)) ||\n                                 (this.dataSource.options.type === \"signalr\" && this._preventRefresh);\n\n            this._progress(false);\n\n            this.angular(\"cleanup\", function() {\n                return { elements: that.items() };\n            });\n\n            e = e || {};\n\n            if (!view) {\n                return;\n            }\n\n            if (preventRefresh) { // skip rebinding if editing is in progress\n                this._attemptRefresh =  true && this.dataSource.options.type === \"signalr\";\n                return;\n            }\n\n            if (this.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (!(e && e.action === \"resize\") && this._editor) {\n                this._editor.close();\n            }\n\n            this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n\n            view.refreshLayout();\n\n            view.render(this._data);\n\n            this.trigger(\"dataBound\");\n            this._attemptRefresh = false;\n        },\n\n        slotByPosition: function(x, y) {\n            var view = this.view();\n\n            if (!view._slotByPosition) {\n                return null;\n            }\n\n            var slot = view._slotByPosition(x, y);\n\n            if (!slot) {\n                return null;\n            }\n\n            return {\n                startDate: slot.startDate(),\n                endDate: slot.endDate(),\n                groupIndex: slot.groupIndex,\n                element: slot.element,\n                isDaySlot: slot.isDaySlot\n            };\n        },\n\n        slotByElement: function(element) {\n            var offset = $(element).offset();\n            return this.slotByPosition(offset.left, offset.top);\n        },\n\n        resourcesBySlot: function(slot) {\n            return this.view()._resourceBySlot(slot);\n        }\n    });\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.DayView\"\n        },\n        week: {\n            type: \"kendo.ui.WeekView\"\n        },\n        workWeek: {\n            type: \"kendo.ui.WorkWeekView\"\n        },\n        agenda: {\n            type: \"kendo.ui.AgendaView\"\n        },\n        month: {\n            type: \"kendo.ui.MonthView\"\n        },\n        timeline: {\n            type: \"kendo.ui.TimelineView\"\n        },\n        timelineWeek: {\n            type: \"kendo.ui.TimelineWeekView\"\n        },\n        timelineWorkWeek: {\n            type: \"kendo.ui.TimelineWorkWeekView\"\n        },\n        timelineMonth: {\n            type: \"kendo.ui.TimelineMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.YearView\"\n        }\n    };\n\n    ui.plugin(Scheduler);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Scheduler.prototype);\n\n        var SCHEDULER_EXPORT = \"k-scheduler-pdf-export\";\n        Scheduler.fn._drawPDF = function(progress) {\n            var wrapper = this.wrapper;\n            var styles = wrapper[0].style.cssText;\n\n            wrapper.css({\n                width: wrapper.width(),\n                height: wrapper.height()\n            });\n\n            wrapper.addClass(SCHEDULER_EXPORT);\n\n            var scheduler = this;\n            var promise = new $.Deferred();\n            var table = wrapper.find(\".k-scheduler-content\").find(\"table\").css(\"table-layout\", \"auto\");\n\n            setTimeout(function() {\n                table.css(\"table-layout\", \"fixed\");\n                scheduler.resize(true);\n\n                scheduler._drawPDFShadow({}, {\n                    avoidLinks: scheduler.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var args = {\n                        page: group,\n                        pageNumber: 1,\n                        progress: 1,\n                        totalPages: 1\n                    };\n\n                    progress.notify(args);\n                    promise.resolve(args.page);\n                })\n                .fail(function(err) {\n                    promise.reject(err);\n                })\n                .always(function() {\n                    wrapper[0].style.cssText = styles;\n                    wrapper.removeClass(SCHEDULER_EXPORT);\n                    scheduler.resize(true);\n\n                    //Required because slot.offsetLeft is incorrect after first resize\n                    scheduler.resize(true);\n                });\n            });\n\n            return promise;\n        };\n    }\n\n    var TimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitleId = kendo.guid();\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that._zoneTitle.bind(\"cascade\", function() {\n                if (!this.value()) {\n                    that._zone.wrapper.hide();\n                }\n            });\n\n            that._zone.bind(\"cascade\", function() {\n                that._value = this.value();\n                that.trigger(CHANGE);\n            });\n\n            that.value(that.options.value);\n        },\n        options: {\n            name: \"TimezoneEditor\",\n            value: \"\",\n            optionLabel: \"No timezone\"\n        },\n        events: [ CHANGE ],\n\n        _zoneTitlePicker: function() {\n            var that = this,\n                zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n\n            that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                dataSource: kendo.timezone.zones_titles,\n                dataValueField: \"other_zone\",\n                dataTextField: \"name\",\n                optionLabel: that.options.optionLabel\n            });\n        },\n\n        _zonePicker: function() {\n            var that = this,\n                zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n\n            that._zone = new kendo.ui.DropDownList(zone, {\n                dataValueField: \"zone\",\n                dataTextField: \"territory\",\n                dataSource: that._zonesQuery.data,\n                cascadeFrom: that._zoneTitleId,\n                dataBound: function() {\n                    that._value = this.value();\n                    this.wrapper.toggle(this.dataSource.view().length > 1);\n                }\n            });\n\n            that._zone.wrapper.hide();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this,\n                zone;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                that._zoneTitle.value(zone.other_zone);\n                that._zone.value(zone.zone);\n            } else {\n                that._zoneTitle.select(0);\n            }\n\n        }\n    });\n\n    ui.plugin(TimezoneEditor);\n\n    var ZONETITLEOPTIONTEMPLATE = kendo.template('<option value=\"#=other_zone#\">#=name#</option>');\n    var ZONEOPTIONTEMPLATE = kendo.template('<option value=\"#=zone#\">#=territory#</option>');\n\n    var MobileTimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that.value(that.options.value);\n        },\n\n        options: {\n            name: \"MobileTimezoneEditor\",\n            optionLabel: \"No timezone\",\n            value: \"\"\n        },\n\n        events: [ CHANGE ],\n\n        _bindZones: function(value) {\n            var data = value ? this._filter(value) : [];\n\n            this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n        },\n\n        _filter: function(value) {\n            return this._zonesQuery.filter({ field: \"other_zone\", operator: \"eq\", value: value }).data;\n        },\n\n        _options: function(data, template, optionLabel) {\n            var idx = 0;\n            var html = \"\";\n            var length = data.length;\n\n            if (optionLabel) {\n                html += template({ other_zone: \"\", name: optionLabel });\n            }\n\n            for (; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        },\n\n        _zoneTitlePicker: function() {\n            var that = this;\n            var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n\n            that._zoneTitle = $('<select>' + options + '</select>')\n                                .appendTo(that.wrapper)\n                                .on(\"change\", function() {\n                                    var value = this.value;\n                                    var zone = that._zonePickerLabel;\n                                    var zoneSelect = zone.find(\"select\");\n\n                                    that._bindZones(value);\n\n                                    if (value && zoneSelect.children().length > 1) {\n                                        zone.show();\n                                    } else {\n                                        zone.hide();\n                                    }\n\n                                    that._value = that._zone[0].value;\n\n                                    that.trigger(CHANGE);\n                                });\n        },\n\n        _zonePicker: function() {\n            var that = this;\n\n            that._zonePickerLabel = $(\"<li class='k-item k-listgroup-item k-zonepicker' style='display:none'>\" +\n                                        \"<label class='k-label k-listgroup-form-row'>\" +\n                                            \"<span class='k-item-title k-listgroup-form-field-label'></span>\" +\n                                            \"<div class='k-listgroup-form-field-wrapper'></div>\" +\n                                        \"</label>\" +\n                                    \"</li>\");\n\n            that._zone = $('<select></select>')\n                            .appendTo(that._zonePickerLabel.find(\"div\"))\n                            .on(\"change\", function() {\n                                that._value = this.value;\n\n                                that.trigger(CHANGE);\n                            });\n\n            this.wrapper.closest(\".k-item\").after(that._zonePickerLabel);\n\n            that._bindZones(that._zoneTitle.val());\n            that._value = that._zone[0].value;\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this;\n            var zonePicker = that._zone;\n            var other_zone = \"\";\n            var zone_value = \"\";\n            var zone;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                zone_value = zone.zone;\n                other_zone = zone.other_zone;\n            }\n\n            that._zoneTitle.val(other_zone);\n            that._bindZones(other_zone);\n\n            zonePicker.val(zone_value);\n            zone_value = zonePicker[0].value;\n\n            if (zone_value && zonePicker.children.length > 1) {\n                that._zonePickerLabel.show();\n            } else {\n                that._zonePickerLabel.hide();\n            }\n\n            that._value = zone_value;\n        }\n    });\n\n    ui.plugin(MobileTimezoneEditor);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, __webpack_require__.amdD);\n\n\n/***/ }),\n\n/***/ 94421:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.datetimepicker\");\n\n/***/ }),\n\n/***/ 52220:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.dialog\");\n\n/***/ }),\n\n/***/ 54148:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.dropdownlist\");\n\n/***/ }),\n\n/***/ 63192:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.editable\");\n\n/***/ }),\n\n/***/ 14639:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.multiselect\");\n\n/***/ }),\n\n/***/ 1291:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.pane\");\n\n/***/ }),\n\n/***/ 20648:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.pdf\");\n\n/***/ }),\n\n/***/ 34815:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.agendaview\");\n\n/***/ }),\n\n/***/ 75207:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.dayview\");\n\n/***/ }),\n\n/***/ 18637:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.monthview\");\n\n/***/ }),\n\n/***/ 88615:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.recurrence\");\n\n/***/ }),\n\n/***/ 21474:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.timelineview\");\n\n/***/ }),\n\n/***/ 81477:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.view\");\n\n/***/ }),\n\n/***/ 69341:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.scheduler.yearview\");\n\n/***/ }),\n\n/***/ 63401:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.switch\");\n\n/***/ }),\n\n/***/ 66098:\n/***/ (function(module) {\n\n\"use strict\";\nmodule.exports = require(\"./kendo.window\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/amd define */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.amdD = function () {\n/******/ \t\t\tthrow new Error('define cannot be used indirect');\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module used 'module' so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(10048);\n/******/ \tmodule.exports = __webpack_exports__;\n/******/ \t\n/******/ })()\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}